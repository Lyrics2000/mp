2024-09-09 14:27:42,967 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 14:27:43,103 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 14:27:43,104 - INFO - {'updated': 'initiated stk query for ws_CO_09092024172708797700403280 899885 '}
2024-09-09 14:27:43,173 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:27:44,108 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 14:27:44,110 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer hSYLRWF29TOrJTKON69TxoDnNJVn'}"}
2024-09-09 14:27:44,111 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTQyNzQz', 'Timestamp': '20240909142743', 'CheckoutRequestID': 'ws_CO_09092024172708797700403280'}"}
2024-09-09 14:27:44,112 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:27:44,969 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 14:27:44,970 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c229-4922-a304-de61d3eb488813489581', 'CheckoutRequestID': 'ws_CO_09092024172708797700403280', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024172708797700403280 899885"}
2024-09-09 14:27:45,120 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 14:27:45,409 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 14:27:45,411 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 14:27:46,055 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 14:28:18,493 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 14:28:18,657 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 14:28:18,658 - INFO - {'updated': 'initiated stk query for ws_CO_09092024172806440720956156 899885 '}
2024-09-09 14:28:18,717 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:28:19,487 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 14:28:19,489 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer BuW3lExAF13T9vWLFyqMtBD7QmCO'}"}
2024-09-09 14:28:19,490 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTQyODE4', 'Timestamp': '20240909142818', 'CheckoutRequestID': 'ws_CO_09092024172806440720956156'}"}
2024-09-09 14:28:19,491 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:28:20,294 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-09 14:28:20,296 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee593416635', 'CheckoutRequestID': 'ws_CO_09092024172806440720956156', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024172806440720956156 899885"}
2024-09-09 14:28:20,424 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 14:28:20,685 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 14:28:20,686 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 14:28:21,019 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 14:29:05,990 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6168600487', 'CheckoutRequestID': 'ws_CO_09092024172855623724554439', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI96ZLC31Y'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909172905}, {'Name': 'PhoneNumber', 'Value': 254724554439}]}}}}"}
2024-09-09 14:29:05,990 - INFO - {'updated_data': 'callback data began'}
2024-09-09 14:29:05,990 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6168600487', 'CheckoutRequestID': 'ws_CO_09092024172855623724554439', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI96ZLC31Y'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909172905}, {'Name': 'PhoneNumber', 'Value': 254724554439}]}}}}}
2024-09-09 14:29:06,173 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 14:29:06,451 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 14:29:06,453 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 14:29:07,073 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 14:32:12,872 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c229-4922-a304-de61d3eb488813504020', 'CheckoutRequestID': 'ws_CO_09092024173200625701585474', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI92ZLVG6I'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909173212}, {'Name': 'PhoneNumber', 'Value': 254701585474}]}}}}"}
2024-09-09 14:32:12,872 - INFO - {'updated_data': 'callback data began'}
2024-09-09 14:32:12,872 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c229-4922-a304-de61d3eb488813504020', 'CheckoutRequestID': 'ws_CO_09092024173200625701585474', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI92ZLVG6I'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909173212}, {'Name': 'PhoneNumber', 'Value': 254701585474}]}}}}}
2024-09-09 14:32:13,043 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 14:32:13,554 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 14:32:13,555 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 14:32:14,172 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 14:32:20,930 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 14:32:21,093 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 14:32:21,093 - INFO - {'updated': 'initiated stk query for ws_CO_09092024173200625701585474 827142 '}
2024-09-09 14:32:21,158 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:32:22,010 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 14:32:22,012 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer fui7OewO0FbskJApgZAHneqF8Svu'}"}
2024-09-09 14:32:22,012 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTQzMjIx', 'Timestamp': '20240909143221', 'CheckoutRequestID': 'ws_CO_09092024173200625701585474'}"}
2024-09-09 14:32:22,013 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:32:22,822 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 14:32:22,823 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c229-4922-a304-de61d3eb488813504020', 'CheckoutRequestID': 'ws_CO_09092024173200625701585474', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024173200625701585474 827142"}
2024-09-09 14:32:22,947 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 14:32:23,239 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 14:32:23,241 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 14:32:23,592 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 14:32:29,620 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 14:32:29,763 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 14:32:29,763 - INFO - {'updated': 'initiated stk query for ws_CO_09092024173200625701585474 827142 '}
2024-09-09 14:32:29,824 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:32:30,535 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 14:32:30,537 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ltaN6PivJdEhjFJsrQb4XVIY5nrA'}"}
2024-09-09 14:32:30,537 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTQzMjI5', 'Timestamp': '20240909143229', 'CheckoutRequestID': 'ws_CO_09092024173200625701585474'}"}
2024-09-09 14:32:30,539 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:32:31,295 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 14:32:31,295 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c229-4922-a304-de61d3eb488813504020', 'CheckoutRequestID': 'ws_CO_09092024173200625701585474', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024173200625701585474 827142"}
2024-09-09 14:32:31,435 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 14:32:31,693 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 14:32:31,695 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 14:32:32,019 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 14:33:50,800 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 14:33:50,975 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 14:33:50,976 - INFO - there is a test coming
2024-09-09 14:33:50,976 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 14:33:51,027 - INFO - {'updated_data': 'the data is now as 254114449748'}
2024-09-09 14:33:51,027 - INFO - the data is now as 254114449748
2024-09-09 14:33:51,056 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 14:33:51,057 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 14:33:51,058 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:33:51,833 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 14:33:51,836 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 7jDSKrIyQf6AYMnry14SYR37V55W'}"}
2024-09-09 14:33:51,836 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTQzMzUx', 'Timestamp': '20240909143351', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2300', 'PartyA': '254114449748', 'PartyB': 899885, 'PhoneNumber': '254114449748', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053311', 'TransactionDesc': 'Some payment'}
2024-09-09 14:33:51,838 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:33:52,857 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-09 14:33:52,863 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6168606731', 'CheckoutRequestID': 'ws_CO_09092024173352533114449748', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 14:34:04,997 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6168606731', 'CheckoutRequestID': 'ws_CO_09092024173352533114449748', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2300.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI95ZM6SQX'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909173404}, {'Name': 'PhoneNumber', 'Value': 254114449748}]}}}}"}
2024-09-09 14:34:04,997 - INFO - {'updated_data': 'callback data began'}
2024-09-09 14:34:04,997 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6168606731', 'CheckoutRequestID': 'ws_CO_09092024173352533114449748', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2300.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI95ZM6SQX'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909173404}, {'Name': 'PhoneNumber', 'Value': 254114449748}]}}}}}
2024-09-09 14:34:05,177 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 14:34:05,451 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 14:34:05,453 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 14:34:05,772 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 14:34:56,545 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 14:34:56,672 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 14:34:56,673 - INFO - there is a test coming
2024-09-09 14:34:56,673 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 14:34:56,726 - INFO - {'updated_data': 'the data is now as 254705785881'}
2024-09-09 14:34:56,726 - INFO - the data is now as 254705785881
2024-09-09 14:34:56,742 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 14:34:56,742 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 14:34:56,744 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:34:57,579 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 14:34:57,581 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer z5XzriRB5Sirn2omuffExgUomVEC'}"}
2024-09-09 14:34:57,581 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTQzNDU3', 'Timestamp': '20240909143457', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '16000', 'PartyA': '254705785881', 'PartyB': 899885, 'PhoneNumber': '254705785881', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0625421-1725892495466', 'TransactionDesc': 'Some payment'}
2024-09-09 14:34:57,583 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:34:58,530 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 14:34:58,536 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db13528739', 'CheckoutRequestID': 'ws_CO_09092024173458301705785881', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 14:35:07,926 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db13528739', 'CheckoutRequestID': 'ws_CO_09092024173458301705785881', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 16000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI99ZMDBZ3'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909173507}, {'Name': 'PhoneNumber', 'Value': 254705785881}]}}}}"}
2024-09-09 14:35:07,926 - INFO - {'updated_data': 'callback data began'}
2024-09-09 14:35:07,927 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db13528739', 'CheckoutRequestID': 'ws_CO_09092024173458301705785881', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 16000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI99ZMDBZ3'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909173507}, {'Name': 'PhoneNumber', 'Value': 254705785881}]}}}}}
2024-09-09 14:35:08,082 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 14:35:08,371 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 14:35:08,372 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 14:35:08,736 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 14:35:09,837 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 14:35:10,061 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 14:35:10,062 - INFO - {'updated': 'initiated stk query for ws_CO_09092024173458301705785881 899885 '}
2024-09-09 14:35:10,116 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:35:10,839 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 14:35:10,841 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer tg1CJAKMt450l5xNlHlO7ZOrnAMN'}"}
2024-09-09 14:35:10,841 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTQzNTEw', 'Timestamp': '20240909143510', 'CheckoutRequestID': 'ws_CO_09092024173458301705785881'}"}
2024-09-09 14:35:10,842 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:35:11,629 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 14:35:11,630 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db13528739', 'CheckoutRequestID': 'ws_CO_09092024173458301705785881', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024173458301705785881 899885"}
2024-09-09 14:35:11,772 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 14:35:12,380 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 14:35:12,382 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 14:35:12,737 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 14:36:04,678 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 14:36:04,828 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 14:36:04,829 - INFO - {'updated': 'initiated stk query for ws_CO_09092024173553070705785881 899885 '}
2024-09-09 14:36:04,887 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:36:05,619 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 14:36:05,621 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer dtjI2B7oVnnVqqjgeIeJa1RWbZoU'}"}
2024-09-09 14:36:05,622 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTQzNjA0', 'Timestamp': '20240909143604', 'CheckoutRequestID': 'ws_CO_09092024173553070705785881'}"}
2024-09-09 14:36:05,623 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:36:06,448 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 388
2024-09-09 14:36:06,449 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074285005', 'CheckoutRequestID': 'ws_CO_09092024173553070705785881', 'ResultCode': '1', 'ResultDesc': 'The balance is insufficient for the transaction.'} for ws_CO_09092024173553070705785881 899885"}
2024-09-09 14:36:06,563 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 14:36:06,855 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 14:36:06,856 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 14:36:07,242 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 14:51:05,753 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 14:51:05,902 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 14:51:05,903 - INFO - {'updated': 'initiated stk query for ws_CO_09092024175044627724159654 827142 '}
2024-09-09 14:51:05,979 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:51:06,833 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 14:51:06,835 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 40wqPb8BrPVMw2cMjEsFOczCnkgi'}"}
2024-09-09 14:51:06,835 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTQ1MTA1', 'Timestamp': '20240909145105', 'CheckoutRequestID': 'ws_CO_09092024175044627724159654'}"}
2024-09-09 14:51:06,836 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:51:07,635 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 14:51:07,636 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b513571749', 'CheckoutRequestID': 'ws_CO_09092024175044627724159654', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024175044627724159654 827142"}
2024-09-09 14:51:07,748 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 14:51:08,045 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 14:51:08,047 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 14:51:08,726 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 14:53:25,002 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee593491008', 'CheckoutRequestID': 'ws_CO_09092024175315261792540034', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3522.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI94ZPM0BG'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909175324}, {'Name': 'PhoneNumber', 'Value': 254792540034}]}}}}"}
2024-09-09 14:53:25,002 - INFO - {'updated_data': 'callback data began'}
2024-09-09 14:53:25,002 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee593491008', 'CheckoutRequestID': 'ws_CO_09092024175315261792540034', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3522.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI94ZPM0BG'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909175324}, {'Name': 'PhoneNumber', 'Value': 254792540034}]}}}}}
2024-09-09 14:53:25,156 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 14:53:25,428 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 14:53:25,429 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 14:53:25,764 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 14:53:27,204 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 14:53:27,351 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 14:53:27,352 - INFO - {'updated': 'initiated stk query for ws_CO_09092024175315261792540034 827142 '}
2024-09-09 14:53:27,408 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:53:28,178 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 14:53:28,180 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer W8SIUJAYzsniRmVKD92AZvGOyhkK'}"}
2024-09-09 14:53:28,181 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTQ1MzI3', 'Timestamp': '20240909145327', 'CheckoutRequestID': 'ws_CO_09092024175315261792540034'}"}
2024-09-09 14:53:28,182 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:53:29,079 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-09 14:53:29,079 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee593491008', 'CheckoutRequestID': 'ws_CO_09092024175315261792540034', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024175315261792540034 827142"}
2024-09-09 14:53:29,198 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 14:53:29,483 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 14:53:29,485 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 14:53:29,838 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 14:54:54,820 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 14:54:54,973 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 14:54:54,974 - INFO - there is a test coming
2024-09-09 14:54:54,974 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 14:54:55,016 - INFO - {'updated_data': 'the data is now as 254722921686'}
2024-09-09 14:54:55,016 - INFO - the data is now as 254722921686
2024-09-09 14:54:55,032 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 14:54:55,032 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 14:54:55,033 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:54:55,953 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 14:54:55,955 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer VmqhQw3qbV5DFeX2rMshu3PPUgrU'}"}
2024-09-09 14:54:55,955 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTQ1NDU1', 'Timestamp': '20240909145455', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '115000', 'PartyA': '254722921686', 'PartyB': 827142, 'PhoneNumber': '254722921686', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-86633', 'TransactionDesc': 'Some payment'}
2024-09-09 14:54:55,956 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:54:56,889 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-09 14:54:56,895 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6168632429', 'CheckoutRequestID': 'ws_CO_09092024175456674722921686', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 14:55:13,485 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6168632429', 'CheckoutRequestID': 'ws_CO_09092024175456674722921686', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 115000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI90ZPXYKI'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909175512}, {'Name': 'PhoneNumber', 'Value': 254722921686}]}}}}"}
2024-09-09 14:55:13,485 - INFO - {'updated_data': 'callback data began'}
2024-09-09 14:55:13,485 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6168632429', 'CheckoutRequestID': 'ws_CO_09092024175456674722921686', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 115000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI90ZPXYKI'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909175512}, {'Name': 'PhoneNumber', 'Value': 254722921686}]}}}}}
2024-09-09 14:55:13,638 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 14:55:14,607 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 14:55:14,608 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 14:55:14,837 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 14:55:14,929 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 14:55:15,022 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 14:55:15,022 - INFO - there is a test coming
2024-09-09 14:55:15,023 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 14:55:15,070 - INFO - {'updated_data': 'the data is now as 254702008869'}
2024-09-09 14:55:15,070 - INFO - the data is now as 254702008869
2024-09-09 14:55:15,086 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 14:55:15,086 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 14:55:15,087 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:55:15,826 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 14:55:15,828 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer vuXFBlMXAC69RHRaGbAoZAV0VafJ'}"}
2024-09-09 14:55:15,828 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTQ1NTE1', 'Timestamp': '20240909145515', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '400', 'PartyA': '254702008869', 'PartyB': 899885, 'PhoneNumber': '254702008869', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053314', 'TransactionDesc': 'Some payment'}
2024-09-09 14:55:15,829 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:55:16,751 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-09 14:55:16,758 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e168397241', 'CheckoutRequestID': 'ws_CO_09092024175516539702008869', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 14:58:35,867 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e168400470', 'CheckoutRequestID': 'ws_CO_09092024175822385723793240', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4415.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI93ZQK2VT'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909175835}, {'Name': 'PhoneNumber', 'Value': 254723793240}]}}}}"}
2024-09-09 14:58:35,867 - INFO - {'updated_data': 'callback data began'}
2024-09-09 14:58:35,868 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e168400470', 'CheckoutRequestID': 'ws_CO_09092024175822385723793240', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4415.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI93ZQK2VT'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909175835}, {'Name': 'PhoneNumber', 'Value': 254723793240}]}}}}}
2024-09-09 14:58:36,038 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 14:58:36,651 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 14:58:36,652 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 14:58:36,994 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:00:54,600 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:00:54,741 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:00:54,741 - INFO - {'updated': 'initiated stk query for ws_CO_09092024180039660723793240 827142 '}
2024-09-09 15:00:54,807 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:00:55,553 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:00:55,555 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer NpUQYCx3X6kA8XGzRcKF4RbHb3bA'}"}
2024-09-09 15:00:55,555 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTUwMDU0', 'Timestamp': '20240909150054', 'CheckoutRequestID': 'ws_CO_09092024180039660723793240'}"}
2024-09-09 15:00:55,556 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:00:56,993 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-09 15:00:56,994 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e168403076', 'CheckoutRequestID': 'ws_CO_09092024180039660723793240', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024180039660723793240 827142"}
2024-09-09 15:00:57,149 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:00:57,759 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:00:57,760 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:00:58,426 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:03:06,708 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b513608062', 'CheckoutRequestID': 'ws_CO_09092024180243233722618328', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-09 15:03:06,709 - INFO - {'updated_data': 'callback data began'}
2024-09-09 15:03:06,709 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b513608062', 'CheckoutRequestID': 'ws_CO_09092024180243233722618328', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-09 15:03:06,879 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:03:07,172 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:03:07,173 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:03:07,832 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:04:52,327 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:04:52,460 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:04:52,461 - INFO - there is a test coming
2024-09-09 15:04:52,461 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 15:04:52,503 - INFO - {'updated_data': 'the data is now as 254721755509'}
2024-09-09 15:04:52,503 - INFO - the data is now as 254721755509
2024-09-09 15:04:52,522 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 15:04:52,523 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 15:04:52,524 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:04:53,418 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:04:53,420 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer j2O2z1iZpUtxfFWQMfGIJ2Twcz9W'}"}
2024-09-09 15:04:53,421 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTUwNDUz', 'Timestamp': '20240909150453', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5100', 'PartyA': '254721755509', 'PartyB': 827142, 'PhoneNumber': '254721755509', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-110746', 'TransactionDesc': 'Some payment'}
2024-09-09 15:04:53,423 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:04:54,453 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-09 15:04:54,472 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169129420', 'CheckoutRequestID': 'ws_CO_09092024180454180721755509', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 15:06:14,262 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc13615530', 'CheckoutRequestID': 'ws_CO_09092024180605679724324627', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI97ZRYI2B'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909180613}, {'Name': 'PhoneNumber', 'Value': 254724324627}]}}}}"}
2024-09-09 15:06:14,263 - INFO - {'updated_data': 'callback data began'}
2024-09-09 15:06:14,264 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc13615530', 'CheckoutRequestID': 'ws_CO_09092024180605679724324627', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI97ZRYI2B'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909180613}, {'Name': 'PhoneNumber', 'Value': 254724324627}]}}}}}
2024-09-09 15:06:14,420 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:06:15,244 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:06:15,246 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:06:15,621 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:06:16,797 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:06:16,996 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:06:16,997 - INFO - {'updated': 'initiated stk query for ws_CO_09092024180605679724324627 899885 '}
2024-09-09 15:06:17,066 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:06:17,819 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:06:17,822 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer QXRb3Sk02J3Is8SAd4BSYJIrEgPm'}"}
2024-09-09 15:06:17,822 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTUwNjE3', 'Timestamp': '20240909150617', 'CheckoutRequestID': 'ws_CO_09092024180605679724324627'}"}
2024-09-09 15:06:17,823 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:06:18,718 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 15:06:18,719 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc13615530', 'CheckoutRequestID': 'ws_CO_09092024180605679724324627', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024180605679724324627 899885"}
2024-09-09 15:06:18,842 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:06:19,445 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:06:19,447 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:06:19,800 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:06:48,804 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:06:48,937 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:06:48,938 - INFO - {'updated': 'initiated stk query for ws_CO_09092024180637354704436869 827142 '}
2024-09-09 15:06:49,014 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:06:49,865 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:06:49,871 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer fLpLwNqvy0Rr4GuzoGNHVzFDRxMw'}"}
2024-09-09 15:06:49,873 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTUwNjQ5', 'Timestamp': '20240909150649', 'CheckoutRequestID': 'ws_CO_09092024180637354704436869'}"}
2024-09-09 15:06:49,875 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:06:50,660 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 15:06:50,661 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208792001431', 'CheckoutRequestID': 'ws_CO_09092024180637354704436869', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024180637354704436869 827142"}
2024-09-09 15:06:50,774 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:06:51,405 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:06:51,406 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:06:52,090 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:07:18,124 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86316371', 'CheckoutRequestID': 'ws_CO_09092024180710268704436869', 'ResultCode': 17, 'ResultDesc': 'Rule limited.'}}}"}
2024-09-09 15:07:18,124 - INFO - {'updated_data': 'callback data began'}
2024-09-09 15:07:18,125 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86316371', 'CheckoutRequestID': 'ws_CO_09092024180710268704436869', 'ResultCode': 17, 'ResultDesc': 'Rule limited.'}}}}
2024-09-09 15:07:18,312 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:07:18,608 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:07:18,610 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:07:19,337 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:07:21,734 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:07:21,892 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:07:21,893 - INFO - {'updated': 'initiated stk query for ws_CO_09092024180710268704436869 827142 '}
2024-09-09 15:07:21,950 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:07:22,705 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:07:22,707 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer HP6ALDRZGekMRMflzcrIzAiAjILR'}"}
2024-09-09 15:07:22,708 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTUwNzIx', 'Timestamp': '20240909150721', 'CheckoutRequestID': 'ws_CO_09092024180710268704436869'}"}
2024-09-09 15:07:22,710 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:07:23,504 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 354
2024-09-09 15:07:23,505 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86316371', 'CheckoutRequestID': 'ws_CO_09092024180710268704436869', 'ResultCode': '17', 'ResultDesc': 'Rule limited.'} for ws_CO_09092024180710268704436869 827142"}
2024-09-09 15:07:23,650 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:07:24,289 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:07:24,290 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:07:24,658 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:09:59,071 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:09:59,229 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:09:59,230 - INFO - there is a test coming
2024-09-09 15:09:59,230 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 15:09:59,274 - INFO - {'updated_data': 'the data is now as 254704436869'}
2024-09-09 15:09:59,274 - INFO - the data is now as 254704436869
2024-09-09 15:09:59,293 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 15:09:59,293 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 15:09:59,294 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:10:00,168 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:10:00,170 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer FNCfqPfVsTGgs14RKf4CpJxzBHAx'}"}
2024-09-09 15:10:00,171 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTUxMDAw', 'Timestamp': '20240909151000', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254704436869', 'PartyB': 827142, 'PhoneNumber': '254704436869', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-29757', 'TransactionDesc': 'Some payment'}
2024-09-09 15:10:00,172 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:10:01,121 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 15:10:01,128 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c229-4922-a304-de61d3eb488813617891', 'CheckoutRequestID': 'ws_CO_09092024181000897704436869', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 15:10:12,411 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:10:12,599 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:10:12,600 - INFO - {'updated': 'initiated stk query for ws_CO_09092024181000897704436869 827142 '}
2024-09-09 15:10:12,679 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:10:13,441 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:10:13,443 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer CxZ7oBvGNmuUBkgBL11iPwKilgbn'}"}
2024-09-09 15:10:13,444 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTUxMDEy', 'Timestamp': '20240909151012', 'CheckoutRequestID': 'ws_CO_09092024181000897704436869'}"}
2024-09-09 15:10:13,445 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:10:14,242 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 15:10:14,243 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c229-4922-a304-de61d3eb488813617891', 'CheckoutRequestID': 'ws_CO_09092024181000897704436869', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024181000897704436869 827142"}
2024-09-09 15:10:14,363 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:10:14,974 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:10:14,976 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:10:15,644 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:10:51,720 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:10:51,849 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:10:51,850 - INFO - there is a test coming
2024-09-09 15:10:51,850 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 15:10:51,900 - INFO - {'updated_data': 'the data is now as 254726934962'}
2024-09-09 15:10:51,900 - INFO - the data is now as 254726934962
2024-09-09 15:10:51,917 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 15:10:51,918 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 15:10:51,919 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:10:53,250 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:10:53,252 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer G1Y117MkfNA6ytZ3UBKivyMq8Pqv'}"}
2024-09-09 15:10:53,252 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTUxMDUz', 'Timestamp': '20240909151053', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2500', 'PartyA': '254726934962', 'PartyB': 827142, 'PhoneNumber': '254726934962', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-134864', 'TransactionDesc': 'Some payment'}
2024-09-09 15:10:53,253 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:10:54,305 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 15:10:54,311 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db13637736', 'CheckoutRequestID': 'ws_CO_09092024181054071726934962', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 15:11:04,903 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db13637736', 'CheckoutRequestID': 'ws_CO_09092024181054071726934962', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI98ZSV004'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909181104}, {'Name': 'PhoneNumber', 'Value': 254726934962}]}}}}"}
2024-09-09 15:11:04,903 - INFO - {'updated_data': 'callback data began'}
2024-09-09 15:11:04,904 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db13637736', 'CheckoutRequestID': 'ws_CO_09092024181054071726934962', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI98ZSV004'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909181104}, {'Name': 'PhoneNumber', 'Value': 254726934962}]}}}}}
2024-09-09 15:11:05,064 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:11:05,380 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:11:05,382 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:11:06,077 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:11:37,520 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074328035', 'CheckoutRequestID': 'ws_CO_09092024181130023719750492', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI94ZSYML4'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909181136}, {'Name': 'PhoneNumber', 'Value': 254719750492}]}}}}"}
2024-09-09 15:11:37,520 - INFO - {'updated_data': 'callback data began'}
2024-09-09 15:11:37,520 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074328035', 'CheckoutRequestID': 'ws_CO_09092024181130023719750492', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI94ZSYML4'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909181136}, {'Name': 'PhoneNumber', 'Value': 254719750492}]}}}}}
2024-09-09 15:11:37,685 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:11:38,488 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:11:38,489 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:11:38,871 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:11:39,047 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:11:39,204 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:11:39,205 - INFO - {'updated': 'initiated stk query for ws_CO_09092024181127615705289286 899885 '}
2024-09-09 15:11:39,261 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:11:40,013 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:11:40,016 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer CJ5W5NXw8XqIXAb26QHLgxTdgplD'}"}
2024-09-09 15:11:40,017 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTUxMTM5', 'Timestamp': '20240909151139', 'CheckoutRequestID': 'ws_CO_09092024181127615705289286'}"}
2024-09-09 15:11:40,018 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:11:40,932 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-09 15:11:40,934 - INFO - {'updated': "Received response {'requestId': 'ws_CO_09092024181127615705289286', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_09092024181127615705289286 899885"}
2024-09-09 15:11:40,936 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-09 15:11:42,568 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b513634841', 'CheckoutRequestID': 'ws_CO_09092024181127615705289286', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI94ZSZFH4'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909181142}, {'Name': 'PhoneNumber', 'Value': 254705289286}]}}}}"}
2024-09-09 15:11:42,569 - INFO - {'updated_data': 'callback data began'}
2024-09-09 15:11:42,569 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b513634841', 'CheckoutRequestID': 'ws_CO_09092024181127615705289286', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI94ZSZFH4'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909181142}, {'Name': 'PhoneNumber', 'Value': 254705289286}]}}}}}
2024-09-09 15:11:42,728 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:11:43,351 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:11:43,353 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:11:44,022 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:11:59,011 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:11:59,127 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:11:59,128 - INFO - {'updated': 'initiated stk query for ws_CO_09092024181127615705289286 899885 '}
2024-09-09 15:11:59,196 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:12:00,056 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:12:00,058 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer f3Jssavk43AjukXhxtQAn3uo0QgK'}"}
2024-09-09 15:12:00,058 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTUxMTU5', 'Timestamp': '20240909151159', 'CheckoutRequestID': 'ws_CO_09092024181127615705289286'}"}
2024-09-09 15:12:00,060 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:12:00,886 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 15:12:00,887 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b513634841', 'CheckoutRequestID': 'ws_CO_09092024181127615705289286', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024181127615705289286 899885"}
2024-09-09 15:12:01,004 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:12:03,600 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:12:03,601 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:12:03,976 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:12:28,431 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:12:28,568 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:12:28,569 - INFO - there is a test coming
2024-09-09 15:12:28,569 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 15:12:28,613 - INFO - {'updated_data': 'the data is now as 254722393122'}
2024-09-09 15:12:28,613 - INFO - the data is now as 254722393122
2024-09-09 15:12:28,628 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 15:12:28,628 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 15:12:28,629 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:12:29,657 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:12:29,658 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer xhInN2lZYqOfI1s2F1xgpaOP6BOl'}"}
2024-09-09 15:12:29,659 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTUxMjI5', 'Timestamp': '20240909151229', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '4500', 'PartyA': '254722393122', 'PartyB': 899885, 'PhoneNumber': '254722393122', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA007268CP-1725894746040', 'TransactionDesc': 'Some payment'}
2024-09-09 15:12:29,660 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:12:30,639 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 15:12:30,645 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c229-4922-a304-de61d3eb488813626025', 'CheckoutRequestID': 'ws_CO_09092024181230418722393122', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 15:14:01,482 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86325665', 'CheckoutRequestID': 'ws_CO_09092024181354265705289286', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-09 15:14:01,482 - INFO - {'updated_data': 'callback data began'}
2024-09-09 15:14:01,483 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86325665', 'CheckoutRequestID': 'ws_CO_09092024181354265705289286', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-09 15:14:01,641 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:14:02,252 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:14:02,253 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:14:02,615 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:14:07,917 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:14:08,060 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:14:08,061 - INFO - {'updated': 'initiated stk query for ws_CO_09092024181354265705289286 899885 '}
2024-09-09 15:14:08,179 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:14:08,911 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:14:08,913 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer U0YUGjdKMcxrfmjwL4mlTANZnaID'}"}
2024-09-09 15:14:08,914 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTUxNDA4', 'Timestamp': '20240909151408', 'CheckoutRequestID': 'ws_CO_09092024181354265705289286'}"}
2024-09-09 15:14:08,915 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:14:09,750 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-09 15:14:09,751 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86325665', 'CheckoutRequestID': 'ws_CO_09092024181354265705289286', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_09092024181354265705289286 899885"}
2024-09-09 15:14:09,871 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:14:10,152 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:14:10,154 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:14:10,526 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:14:47,693 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:14:47,847 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:14:47,847 - INFO - there is a test coming
2024-09-09 15:14:47,847 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 15:14:47,893 - INFO - {'updated_data': 'the data is now as 254719750492'}
2024-09-09 15:14:47,893 - INFO - the data is now as 254719750492
2024-09-09 15:14:47,919 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 15:14:47,919 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 15:14:47,920 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:14:48,766 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:14:48,768 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer C7NAVzLFgyvq6xz9LGcqQudNRsUn'}"}
2024-09-09 15:14:48,769 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTUxNDQ4', 'Timestamp': '20240909151448', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254719750492', 'PartyB': 827142, 'PhoneNumber': '254719750492', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-30262', 'TransactionDesc': 'Some payment'}
2024-09-09 15:14:48,770 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:14:49,700 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 15:14:49,706 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86326761', 'CheckoutRequestID': 'ws_CO_09092024181449473719750492', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 15:14:56,624 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:14:56,813 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:14:56,814 - INFO - {'updated': 'initiated stk query for ws_CO_09092024181444255717379630 827142 '}
2024-09-09 15:14:56,882 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:14:57,824 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:14:57,826 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer H4vV8zAlKAicPesZKWQzxEJRpVUr'}"}
2024-09-09 15:14:57,827 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTUxNDU2', 'Timestamp': '20240909151456', 'CheckoutRequestID': 'ws_CO_09092024181444255717379630'}"}
2024-09-09 15:14:57,828 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:14:58,641 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 15:14:58,642 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc13642762', 'CheckoutRequestID': 'ws_CO_09092024181444255717379630', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024181444255717379630 827142"}
2024-09-09 15:14:58,764 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:14:59,057 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:14:59,058 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:14:59,730 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:15:51,985 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792013682', 'CheckoutRequestID': 'ws_CO_09092024181542550706873334', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI94ZTRYAE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909181551}, {'Name': 'PhoneNumber', 'Value': 254706873334}]}}}}"}
2024-09-09 15:15:51,985 - INFO - {'updated_data': 'callback data began'}
2024-09-09 15:15:51,985 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792013682', 'CheckoutRequestID': 'ws_CO_09092024181542550706873334', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI94ZTRYAE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909181551}, {'Name': 'PhoneNumber', 'Value': 254706873334}]}}}}}
2024-09-09 15:15:52,145 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:15:52,777 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:15:52,778 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:15:53,442 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:30:01,702 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169166208', 'CheckoutRequestID': 'ws_CO_09092024182949602720760628', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}"}
2024-09-09 15:30:01,702 - INFO - {'updated_data': 'callback data began'}
2024-09-09 15:30:01,703 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169166208', 'CheckoutRequestID': 'ws_CO_09092024182949602720760628', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}}
2024-09-09 15:30:01,877 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:30:02,542 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:30:02,543 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:30:03,584 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:30:21,252 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:30:21,405 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:30:21,406 - INFO - there is a test coming
2024-09-09 15:30:21,406 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 15:30:21,465 - INFO - {'updated_data': 'the data is now as 254720760628'}
2024-09-09 15:30:21,465 - INFO - the data is now as 254720760628
2024-09-09 15:30:21,482 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 15:30:21,483 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 15:30:21,494 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:30:22,245 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:30:22,247 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer huMAK6mL3oKLkB4MtUIRFj0a5y4U'}"}
2024-09-09 15:30:22,248 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTUzMDIy', 'Timestamp': '20240909153022', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254720760628', 'PartyB': 827142, 'PhoneNumber': '254720760628', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-20774', 'TransactionDesc': 'Some payment'}
2024-09-09 15:30:22,250 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:30:23,359 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 15:30:23,365 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208792037192', 'CheckoutRequestID': 'ws_CO_09092024183022987720760628', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 15:30:35,228 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:30:35,383 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:30:35,383 - INFO - {'updated': 'initiated stk query for ws_CO_09092024183022987720760628 827142 '}
2024-09-09 15:30:35,443 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:30:36,251 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:30:36,253 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 54DdxeGLtmz79zIPqQvAoAZxAAt1'}"}
2024-09-09 15:30:36,254 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTUzMDM1', 'Timestamp': '20240909153035', 'CheckoutRequestID': 'ws_CO_09092024183022987720760628'}"}
2024-09-09 15:30:36,255 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:30:37,091 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-09 15:30:37,092 - INFO - {'updated': "Received response {'requestId': 'ws_CO_09092024183022987720760628', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_09092024183022987720760628 827142"}
2024-09-09 15:30:37,094 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-09 15:30:47,997 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792037192', 'CheckoutRequestID': 'ws_CO_09092024183022987720760628', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}"}
2024-09-09 15:30:47,997 - INFO - {'updated_data': 'callback data began'}
2024-09-09 15:30:47,997 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792037192', 'CheckoutRequestID': 'ws_CO_09092024183022987720760628', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}}
2024-09-09 15:30:48,162 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:30:48,822 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:30:48,823 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:30:49,202 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:31:01,485 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:31:01,619 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:31:01,620 - INFO - there is a test coming
2024-09-09 15:31:01,620 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 15:31:01,681 - INFO - {'updated_data': 'the data is now as 254759084141'}
2024-09-09 15:31:01,681 - INFO - the data is now as 254759084141
2024-09-09 15:31:01,699 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 15:31:01,699 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 15:31:01,701 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:31:02,548 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:31:02,550 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer D0iNrSAAvwleAsZHmHV38Sx9AsHc'}"}
2024-09-09 15:31:02,551 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTUzMTAy', 'Timestamp': '20240909153102', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254759084141', 'PartyB': 899885, 'PhoneNumber': '254759084141', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053317', 'TransactionDesc': 'Some payment'}
2024-09-09 15:31:02,552 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:31:03,687 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 15:31:03,693 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c229-4922-a304-de61d3eb488813684098', 'CheckoutRequestID': 'ws_CO_09092024183103276759084141', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 15:32:23,470 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c229-4922-a304-de61d3eb488813688228', 'CheckoutRequestID': 'ws_CO_09092024183216290757255929', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-09 15:32:23,471 - INFO - {'updated_data': 'callback data began'}
2024-09-09 15:32:23,471 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c229-4922-a304-de61d3eb488813688228', 'CheckoutRequestID': 'ws_CO_09092024183216290757255929', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-09 15:32:23,635 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:32:23,980 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:32:23,982 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:32:24,357 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:32:58,522 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:32:58,632 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:32:58,633 - INFO - there is a test coming
2024-09-09 15:32:58,633 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 15:32:58,681 - INFO - {'updated_data': 'the data is now as 254720760628'}
2024-09-09 15:32:58,682 - INFO - the data is now as 254720760628
2024-09-09 15:32:58,698 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 15:32:58,699 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 15:32:58,700 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:32:59,596 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:32:59,598 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer CmWyE0KZHZRpmNOReJdCBnidLEE9'}"}
2024-09-09 15:32:59,599 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTUzMjU5', 'Timestamp': '20240909153259', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254720760628', 'PartyB': 827142, 'PhoneNumber': '254720760628', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-20774', 'TransactionDesc': 'Some payment'}
2024-09-09 15:32:59,600 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:33:00,668 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-09 15:33:00,678 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee593614212', 'CheckoutRequestID': 'ws_CO_09092024183300420720760628', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 15:42:03,439 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:42:03,575 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:42:03,576 - INFO - {'updated': 'initiated stk query for ws_CO_09092024184136884721601529 827142 '}
2024-09-09 15:42:03,642 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:42:04,416 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:42:04,418 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer JLCvTgwa4tk10iGOQAxFnJdyDbA2'}"}
2024-09-09 15:42:04,418 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTU0MjAz', 'Timestamp': '20240909154203', 'CheckoutRequestID': 'ws_CO_09092024184136884721601529'}"}
2024-09-09 15:42:04,420 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:42:05,352 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-09 15:42:05,353 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc13726699', 'CheckoutRequestID': 'ws_CO_09092024184136884721601529', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_09092024184136884721601529 827142"}
2024-09-09 15:42:05,467 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:42:05,919 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:42:05,920 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:42:06,300 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:42:06,947 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:42:07,105 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:42:07,106 - INFO - {'updated': 'initiated stk query for ws_CO_09092024184154677746999285 827142 '}
2024-09-09 15:42:07,165 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:42:07,936 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:42:07,938 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer fqlbGLkP3yQErdM217AbCWO1yUjS'}"}
2024-09-09 15:42:07,939 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTU0MjA3', 'Timestamp': '20240909154207', 'CheckoutRequestID': 'ws_CO_09092024184154677746999285'}"}
2024-09-09 15:42:07,940 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:42:08,751 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 388
2024-09-09 15:42:08,751 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc13727674', 'CheckoutRequestID': 'ws_CO_09092024184154677746999285', 'ResultCode': '1', 'ResultDesc': 'The balance is insufficient for the transaction.'} for ws_CO_09092024184154677746999285 827142"}
2024-09-09 15:42:08,904 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:42:09,525 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:42:09,527 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:42:10,192 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:44:36,239 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db13742375', 'CheckoutRequestID': 'ws_CO_09092024184426720722655608', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 13000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI98ZZKN28'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909184435}, {'Name': 'PhoneNumber', 'Value': 254722655608}]}}}}"}
2024-09-09 15:44:36,241 - INFO - {'updated_data': 'callback data began'}
2024-09-09 15:44:36,241 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db13742375', 'CheckoutRequestID': 'ws_CO_09092024184426720722655608', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 13000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI98ZZKN28'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909184435}, {'Name': 'PhoneNumber', 'Value': 254722655608}]}}}}}
2024-09-09 15:44:36,396 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:44:36,981 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:44:36,983 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:44:37,668 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:44:38,005 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:44:38,141 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:44:38,142 - INFO - {'updated': 'initiated stk query for ws_CO_09092024184426720722655608 827142 '}
2024-09-09 15:44:38,220 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:44:39,028 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:44:39,030 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer uzbNd7M7t4m6a3EmLNSZv72HeVQa'}"}
2024-09-09 15:44:39,031 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTU0NDM4', 'Timestamp': '20240909154438', 'CheckoutRequestID': 'ws_CO_09092024184426720722655608'}"}
2024-09-09 15:44:39,032 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:44:39,864 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 15:44:39,864 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db13742375', 'CheckoutRequestID': 'ws_CO_09092024184426720722655608', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024184426720722655608 827142"}
2024-09-09 15:44:39,976 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:44:40,300 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:44:40,302 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:44:40,962 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:47:26,468 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:47:26,612 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:47:26,613 - INFO - {'updated': 'initiated stk query for ws_CO_09092024184714632722655608 827142 '}
2024-09-09 15:47:26,670 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:47:27,420 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:47:27,421 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer h4j28kJ5zNR3pBbtjPiYWuzGQ9k6'}"}
2024-09-09 15:47:27,421 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTU0NzI2', 'Timestamp': '20240909154726', 'CheckoutRequestID': 'ws_CO_09092024184714632722655608'}"}
2024-09-09 15:47:27,422 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:47:28,323 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-09 15:47:28,323 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6168704048', 'CheckoutRequestID': 'ws_CO_09092024184714632722655608', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024184714632722655608 827142"}
2024-09-09 15:47:28,455 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:47:29,057 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:47:29,058 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:47:29,512 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:48:25,081 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b513750081', 'CheckoutRequestID': 'ws_CO_09092024184813632726428256', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9210EAT8'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909184824}, {'Name': 'PhoneNumber', 'Value': 254726428256}]}}}}"}
2024-09-09 15:48:25,082 - INFO - {'updated_data': 'callback data began'}
2024-09-09 15:48:25,082 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b513750081', 'CheckoutRequestID': 'ws_CO_09092024184813632726428256', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9210EAT8'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909184824}, {'Name': 'PhoneNumber', 'Value': 254726428256}]}}}}}
2024-09-09 15:48:25,247 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:48:25,854 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:48:25,855 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:48:26,205 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:48:33,375 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:48:33,626 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:48:33,627 - INFO - {'updated': 'initiated stk query for ws_CO_09092024184813632726428256 827142 '}
2024-09-09 15:48:33,691 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:48:34,512 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:48:34,514 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer GG3wkpmrSAA5YZwOkzjmfiKtNgRG'}"}
2024-09-09 15:48:34,515 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTU0ODMz', 'Timestamp': '20240909154833', 'CheckoutRequestID': 'ws_CO_09092024184813632726428256'}"}
2024-09-09 15:48:34,516 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:48:35,395 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 15:48:35,395 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b513750081', 'CheckoutRequestID': 'ws_CO_09092024184813632726428256', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024184813632726428256 827142"}
2024-09-09 15:48:35,576 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:48:35,869 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:48:35,870 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:48:36,575 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:50:14,667 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:50:14,848 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:50:14,848 - INFO - there is a test coming
2024-09-09 15:50:14,848 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 15:50:14,900 - INFO - {'updated_data': 'the data is now as 254722373658'}
2024-09-09 15:50:14,900 - INFO - the data is now as 254722373658
2024-09-09 15:50:14,930 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 15:50:14,930 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 15:50:14,931 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:50:15,721 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:50:15,723 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer AWI4gysUwrqWGWglVE1H0NLASQBk'}"}
2024-09-09 15:50:15,723 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTU1MDE1', 'Timestamp': '20240909155015', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2179', 'PartyA': '254722373658', 'PartyB': 827142, 'PhoneNumber': '254722373658', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-43561', 'TransactionDesc': 'Some payment'}
2024-09-09 15:50:15,725 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:50:16,685 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 15:50:16,691 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208792063832', 'CheckoutRequestID': 'ws_CO_09092024185016439722373658', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 15:50:16,737 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86377816', 'CheckoutRequestID': 'ws_CO_09092024185006639714041521', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-09 15:50:16,737 - INFO - {'updated_data': 'callback data began'}
2024-09-09 15:50:16,737 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86377816', 'CheckoutRequestID': 'ws_CO_09092024185006639714041521', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-09 15:50:16,979 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:50:17,419 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:50:17,420 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:50:17,780 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:50:17,842 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:50:17,969 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:50:17,970 - INFO - {'updated': 'initiated stk query for ws_CO_09092024185006639714041521 827142 '}
2024-09-09 15:50:18,036 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:50:18,813 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:50:18,815 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer GYgG8sbDbkVqvEdsQIKEXSP0EEbK'}"}
2024-09-09 15:50:18,816 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTU1MDE4', 'Timestamp': '20240909155018', 'CheckoutRequestID': 'ws_CO_09092024185006639714041521'}"}
2024-09-09 15:50:18,817 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:50:19,647 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-09 15:50:19,648 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86377816', 'CheckoutRequestID': 'ws_CO_09092024185006639714041521', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_09092024185006639714041521 827142"}
2024-09-09 15:50:19,763 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:50:20,061 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:50:20,063 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:50:20,750 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:50:27,778 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:50:27,881 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:50:27,881 - INFO - {'updated': 'initiated stk query for ws_CO_09092024185016439722373658 827142 '}
2024-09-09 15:50:27,946 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:50:28,782 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:50:28,784 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer uMlyRNgWXxFfcJxuVaDsxMgicHP4'}"}
2024-09-09 15:50:28,784 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTU1MDI3', 'Timestamp': '20240909155027', 'CheckoutRequestID': 'ws_CO_09092024185016439722373658'}"}
2024-09-09 15:50:28,785 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:50:29,651 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 380
2024-09-09 15:50:29,652 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208792063832', 'CheckoutRequestID': 'ws_CO_09092024185016439722373658', 'ResultCode': '2001', 'ResultDesc': 'The initiator information is invalid.'} for ws_CO_09092024185016439722373658 827142"}
2024-09-09 15:50:29,765 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:50:30,075 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:50:30,082 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:50:30,744 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:50:53,558 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792064638', 'CheckoutRequestID': 'ws_CO_09092024185044319722373658', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2179.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9910XT79'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909185052}, {'Name': 'PhoneNumber', 'Value': 254722373658}]}}}}"}
2024-09-09 15:50:53,558 - INFO - {'updated_data': 'callback data began'}
2024-09-09 15:50:53,559 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792064638', 'CheckoutRequestID': 'ws_CO_09092024185044319722373658', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2179.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9910XT79'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909185052}, {'Name': 'PhoneNumber', 'Value': 254722373658}]}}}}}
2024-09-09 15:50:53,741 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:50:54,038 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:50:54,040 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:50:54,711 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:51:15,740 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:51:15,897 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:51:15,898 - INFO - {'updated': 'initiated stk query for ws_CO_09092024185044319722373658 827142 '}
2024-09-09 15:51:15,955 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:51:16,713 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:51:16,715 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer HdSSglTAzF1YkJgpGjQZfupisj8u'}"}
2024-09-09 15:51:16,716 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTU1MTE1', 'Timestamp': '20240909155115', 'CheckoutRequestID': 'ws_CO_09092024185044319722373658'}"}
2024-09-09 15:51:16,717 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:51:17,514 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 15:51:17,515 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208792064638', 'CheckoutRequestID': 'ws_CO_09092024185044319722373658', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024185044319722373658 827142"}
2024-09-09 15:51:17,668 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:51:17,961 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:51:17,962 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:51:18,323 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:57:27,280 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:57:27,475 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:57:27,476 - INFO - there is a test coming
2024-09-09 15:57:27,476 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 15:57:27,514 - INFO - {'updated_data': 'the data is now as 254701026177'}
2024-09-09 15:57:27,514 - INFO - the data is now as 254701026177
2024-09-09 15:57:27,528 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 15:57:27,529 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 15:57:27,530 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:57:28,476 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:57:28,478 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Q5uLU2PmbYRAdN0AKDQoUn7X4UHW'}"}
2024-09-09 15:57:28,478 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTU1NzI4', 'Timestamp': '20240909155728', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254701026177', 'PartyB': 827142, 'PhoneNumber': '254701026177', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-23756', 'TransactionDesc': 'Some payment'}
2024-09-09 15:57:28,479 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:57:29,533 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 15:57:29,554 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208792074734', 'CheckoutRequestID': 'ws_CO_09092024185729274701026177', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 15:57:42,739 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792074734', 'CheckoutRequestID': 'ws_CO_09092024185729274701026177', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9812HUBM'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909185742}, {'Name': 'PhoneNumber', 'Value': 254701026177}]}}}}"}
2024-09-09 15:57:42,740 - INFO - {'updated_data': 'callback data began'}
2024-09-09 15:57:42,740 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792074734', 'CheckoutRequestID': 'ws_CO_09092024185729274701026177', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9812HUBM'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909185742}, {'Name': 'PhoneNumber', 'Value': 254701026177}]}}}}}
2024-09-09 15:57:42,903 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:57:43,211 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:57:43,213 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:57:43,588 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:57:46,501 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:57:46,644 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:57:46,645 - INFO - there is a test coming
2024-09-09 15:57:46,645 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 15:57:46,697 - INFO - {'updated_data': 'the data is now as 254708573922'}
2024-09-09 15:57:46,698 - INFO - the data is now as 254708573922
2024-09-09 15:57:46,716 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 15:57:46,716 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 15:57:46,717 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:57:47,488 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:57:47,491 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 6qtBh1UENU5DADRCxMyQ6yKg7mz4'}"}
2024-09-09 15:57:47,491 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTU1NzQ3', 'Timestamp': '20240909155747', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1200', 'PartyA': '254708573922', 'PartyB': 827142, 'PhoneNumber': '254708573922', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-25756', 'TransactionDesc': 'Some payment'}
2024-09-09 15:57:47,493 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:57:48,457 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 15:57:48,463 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074394822', 'CheckoutRequestID': 'ws_CO_09092024185748224708573922', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 15:59:10,957 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:59:11,163 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:59:11,164 - INFO - there is a test coming
2024-09-09 15:59:11,164 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 15:59:11,209 - INFO - {'updated_data': 'the data is now as 254720970193'}
2024-09-09 15:59:11,209 - INFO - the data is now as 254720970193
2024-09-09 15:59:11,225 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 15:59:11,225 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 15:59:11,226 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:59:11,983 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:59:11,985 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer h7uLXS7fWHGtsY5EX998evhNGArA'}"}
2024-09-09 15:59:11,985 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTU1OTEx', 'Timestamp': '20240909155911', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254720970193', 'PartyB': 827142, 'PhoneNumber': '254720970193', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-30171', 'TransactionDesc': 'Some payment'}
2024-09-09 15:59:11,986 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:59:12,963 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-09 15:59:12,969 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6168721235', 'CheckoutRequestID': 'ws_CO_09092024185912705720970193', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 16:01:27,705 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6168724352', 'CheckoutRequestID': 'ws_CO_09092024190116816722268435', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9313CTXP'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909190127}, {'Name': 'PhoneNumber', 'Value': 254722268435}]}}}}"}
2024-09-09 16:01:27,706 - INFO - {'updated_data': 'callback data began'}
2024-09-09 16:01:27,706 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6168724352', 'CheckoutRequestID': 'ws_CO_09092024190116816722268435', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9313CTXP'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909190127}, {'Name': 'PhoneNumber', 'Value': 254722268435}]}}}}}
2024-09-09 16:01:27,889 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:01:28,491 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:01:28,493 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:01:29,159 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:02:22,788 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:02:22,969 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:02:22,970 - INFO - {'updated': 'initiated stk query for ws_CO_09092024190211365723477709 827142 '}
2024-09-09 16:02:23,035 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:02:23,807 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:02:23,808 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer jeP6bktUTuWzNv76PUAjNQMgGaCV'}"}
2024-09-09 16:02:23,809 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTYwMjIz', 'Timestamp': '20240909160223', 'CheckoutRequestID': 'ws_CO_09092024190211365723477709'}"}
2024-09-09 16:02:23,810 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:02:24,617 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-09 16:02:24,617 - INFO - {'updated': "Received response {'requestId': 'ws_CO_09092024190211365723477709', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_09092024190211365723477709 827142"}
2024-09-09 16:02:24,620 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-09 16:02:31,331 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792081460', 'CheckoutRequestID': 'ws_CO_09092024190211365723477709', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9613LU2E'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909190230}, {'Name': 'PhoneNumber', 'Value': 254723477709}]}}}}"}
2024-09-09 16:02:31,331 - INFO - {'updated_data': 'callback data began'}
2024-09-09 16:02:31,331 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792081460', 'CheckoutRequestID': 'ws_CO_09092024190211365723477709', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9613LU2E'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909190230}, {'Name': 'PhoneNumber', 'Value': 254723477709}]}}}}}
2024-09-09 16:02:31,484 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:02:31,985 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:02:31,987 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:02:32,349 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:03:01,554 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:03:01,717 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:03:01,718 - INFO - {'updated': 'initiated stk query for ws_CO_09092024190244219721342100 827142 '}
2024-09-09 16:03:01,791 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:03:02,531 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:03:02,533 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 4WAhZdAKdw5YZ4kbtS7LjGnm1DZQ'}"}
2024-09-09 16:03:02,533 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTYwMzAx', 'Timestamp': '20240909160301', 'CheckoutRequestID': 'ws_CO_09092024190244219721342100'}"}
2024-09-09 16:03:02,535 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:03:03,364 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 16:03:03,364 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86396186', 'CheckoutRequestID': 'ws_CO_09092024190244219721342100', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024190244219721342100 827142"}
2024-09-09 16:03:03,478 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:03:03,777 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:03:03,778 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:03:04,143 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:03:35,363 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:03:35,565 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:03:35,565 - INFO - there is a test coming
2024-09-09 16:03:35,565 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 16:03:35,618 - INFO - {'updated_data': 'the data is now as 254700916708'}
2024-09-09 16:03:35,618 - INFO - the data is now as 254700916708
2024-09-09 16:03:35,636 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 16:03:35,636 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 16:03:35,637 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:03:36,517 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:03:36,519 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ZjKUdeGIAwhz3B6UM2NSYaAeVAkQ'}"}
2024-09-09 16:03:36,520 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTYwMzM2', 'Timestamp': '20240909160336', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '200', 'PartyA': '254700916708', 'PartyB': 899885, 'PhoneNumber': '254700916708', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053288', 'TransactionDesc': 'Some payment'}
2024-09-09 16:03:36,521 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:03:38,014 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-09 16:03:38,021 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e168491538', 'CheckoutRequestID': 'ws_CO_09092024190337793700916708', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 16:03:45,099 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e168491538', 'CheckoutRequestID': 'ws_CO_09092024190337793700916708', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9013WCDY'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909190344}, {'Name': 'PhoneNumber', 'Value': 254700916708}]}}}}"}
2024-09-09 16:03:45,100 - INFO - {'updated_data': 'callback data began'}
2024-09-09 16:03:45,100 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e168491538', 'CheckoutRequestID': 'ws_CO_09092024190337793700916708', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9013WCDY'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909190344}, {'Name': 'PhoneNumber', 'Value': 254700916708}]}}}}}
2024-09-09 16:03:45,263 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:03:45,879 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:03:45,880 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:03:46,250 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:03:48,911 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:03:49,042 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:03:49,043 - INFO - {'updated': 'initiated stk query for ws_CO_09092024190337793700916708 899885 '}
2024-09-09 16:03:49,124 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:03:49,897 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:03:49,900 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer BHmdTmZO9nPE3V67gsvvV5mBbZ8x'}"}
2024-09-09 16:03:49,900 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTYwMzQ5', 'Timestamp': '20240909160349', 'CheckoutRequestID': 'ws_CO_09092024190337793700916708'}"}
2024-09-09 16:03:49,902 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:03:50,822 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-09 16:03:50,823 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e168491538', 'CheckoutRequestID': 'ws_CO_09092024190337793700916708', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024190337793700916708 899885"}
2024-09-09 16:03:50,940 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:03:51,241 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:03:51,242 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:03:52,926 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:05:36,655 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:05:36,791 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:05:36,792 - INFO - there is a test coming
2024-09-09 16:05:36,792 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 16:05:36,846 - INFO - {'updated_data': 'the data is now as 254727159003'}
2024-09-09 16:05:36,846 - INFO - the data is now as 254727159003
2024-09-09 16:05:36,870 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 16:05:36,870 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 16:05:36,871 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:05:37,646 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:05:37,647 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer EuHB3tzdvHTcGEp75tM1ANe9r0Tj'}"}
2024-09-09 16:05:37,648 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTYwNTM3', 'Timestamp': '20240909160537', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1200', 'PartyA': '254727159003', 'PartyB': 827142, 'PhoneNumber': '254727159003', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '121-47546', 'TransactionDesc': 'Some payment'}
2024-09-09 16:05:37,649 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:05:40,443 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 16:05:40,449 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074405812', 'CheckoutRequestID': 'ws_CO_09092024190538355727159003', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 16:05:44,464 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86400023', 'CheckoutRequestID': 'ws_CO_09092024190537332723477709', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9414CVLU'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909190543}, {'Name': 'PhoneNumber', 'Value': 254723477709}]}}}}"}
2024-09-09 16:05:44,464 - INFO - {'updated_data': 'callback data began'}
2024-09-09 16:05:44,464 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86400023', 'CheckoutRequestID': 'ws_CO_09092024190537332723477709', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9414CVLU'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909190543}, {'Name': 'PhoneNumber', 'Value': 254723477709}]}}}}}
2024-09-09 16:05:44,625 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:05:45,242 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:05:45,243 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:05:45,929 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:05:48,846 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:05:48,966 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:05:48,967 - INFO - {'updated': 'initiated stk query for ws_CO_09092024190537332723477709 827142 '}
2024-09-09 16:05:49,027 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:05:49,880 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:05:49,882 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer q14arOmQLa940wKjGX5CxWt2ZzKX'}"}
2024-09-09 16:05:49,882 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTYwNTQ5', 'Timestamp': '20240909160549', 'CheckoutRequestID': 'ws_CO_09092024190537332723477709'}"}
2024-09-09 16:05:49,883 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:05:50,758 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 16:05:50,759 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86400023', 'CheckoutRequestID': 'ws_CO_09092024190537332723477709', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024190537332723477709 827142"}
2024-09-09 16:05:50,884 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:05:51,186 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:05:51,188 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:05:51,880 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:05:57,542 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:05:57,685 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:05:57,686 - INFO - {'updated': 'initiated stk query for ws_CO_09092024190538355727159003 827142 '}
2024-09-09 16:05:57,787 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:05:58,569 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:05:58,571 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer DaGibYg8QalRbWZ8M6WN0A7Lqpid'}"}
2024-09-09 16:05:58,572 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTYwNTU3', 'Timestamp': '20240909160557', 'CheckoutRequestID': 'ws_CO_09092024190538355727159003'}"}
2024-09-09 16:05:58,573 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:05:59,363 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 16:05:59,364 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074405812', 'CheckoutRequestID': 'ws_CO_09092024190538355727159003', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024190538355727159003 827142"}
2024-09-09 16:05:59,484 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:06:00,103 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:06:00,104 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:06:00,470 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:06:13,884 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:06:13,925 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-09 16:06:13,925 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-09 16:06:52,537 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:06:52,676 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:06:52,677 - INFO - {'updated': 'initiated stk query for ws_CO_09092024190640306723477709 827142 '}
2024-09-09 16:06:52,739 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:06:53,490 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:06:53,492 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer bGgG4ujqK53dzNoAA9iWbvG04I6y'}"}
2024-09-09 16:06:53,492 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTYwNjUy', 'Timestamp': '20240909160652', 'CheckoutRequestID': 'ws_CO_09092024190640306723477709'}"}
2024-09-09 16:06:53,493 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:06:54,298 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 16:06:54,299 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86401430', 'CheckoutRequestID': 'ws_CO_09092024190640306723477709', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024190640306723477709 827142"}
2024-09-09 16:06:54,411 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:06:54,708 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:06:54,709 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:06:55,098 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:09:02,077 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:09:02,220 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:09:02,221 - INFO - there is a test coming
2024-09-09 16:09:02,222 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 16:09:02,269 - INFO - {'updated_data': 'the data is now as 254723477709'}
2024-09-09 16:09:02,270 - INFO - the data is now as 254723477709
2024-09-09 16:09:02,286 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 16:09:02,286 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 16:09:02,288 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:09:03,238 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:09:03,240 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer nGihs0iH9S9AYr0zBi6b2fuO0RTp'}"}
2024-09-09 16:09:03,240 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTYwOTAz', 'Timestamp': '20240909160903', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254723477709', 'PartyB': 899885, 'PhoneNumber': '254723477709', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA1564675LM-1725898141154', 'TransactionDesc': 'Some payment'}
2024-09-09 16:09:03,241 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:09:04,211 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 16:09:04,217 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc13819922', 'CheckoutRequestID': 'ws_CO_09092024190903961723477709', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 16:09:11,228 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc13819922', 'CheckoutRequestID': 'ws_CO_09092024190903961723477709', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI90155N6A'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909190910}, {'Name': 'PhoneNumber', 'Value': 254723477709}]}}}}"}
2024-09-09 16:09:11,229 - INFO - {'updated_data': 'callback data began'}
2024-09-09 16:09:11,229 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc13819922', 'CheckoutRequestID': 'ws_CO_09092024190903961723477709', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI90155N6A'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909190910}, {'Name': 'PhoneNumber', 'Value': 254723477709}]}}}}}
2024-09-09 16:09:11,389 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:09:11,923 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:09:11,925 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:09:12,298 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:09:15,193 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:09:15,330 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:09:15,330 - INFO - {'updated': 'initiated stk query for ws_CO_09092024190903961723477709 899885 '}
2024-09-09 16:09:15,387 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:09:16,153 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:09:16,155 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer XcAo0XaJv1cwAf1HO2bmToOOWAcU'}"}
2024-09-09 16:09:16,155 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTYwOTE1', 'Timestamp': '20240909160915', 'CheckoutRequestID': 'ws_CO_09092024190903961723477709'}"}
2024-09-09 16:09:16,157 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:09:17,067 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 16:09:17,067 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc13819922', 'CheckoutRequestID': 'ws_CO_09092024190903961723477709', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024190903961723477709 899885"}
2024-09-09 16:09:17,206 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:09:17,877 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:09:17,879 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:09:18,259 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:09:22,205 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:09:22,361 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:09:22,362 - INFO - there is a test coming
2024-09-09 16:09:22,362 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 16:09:22,414 - INFO - {'updated_data': 'the data is now as 254721281152'}
2024-09-09 16:09:22,414 - INFO - the data is now as 254721281152
2024-09-09 16:09:22,432 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 16:09:22,432 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 16:09:22,434 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:09:23,211 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:09:23,213 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 9DSTNYGGhex4PH90fMWFVDkMkCOb'}"}
2024-09-09 16:09:23,214 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTYwOTIz', 'Timestamp': '20240909160923', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1500', 'PartyA': '254721281152', 'PartyB': 899885, 'PhoneNumber': '254721281152', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0619916-1725898160777', 'TransactionDesc': 'Some payment'}
2024-09-09 16:09:23,216 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:09:24,236 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 16:09:24,242 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b513824467', 'CheckoutRequestID': 'ws_CO_09092024190924026721281152', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 16:09:35,122 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:09:35,247 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:09:35,248 - INFO - {'updated': 'initiated stk query for ws_CO_09092024190924026721281152 899885 '}
2024-09-09 16:09:35,347 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:09:36,114 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:09:36,116 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Bbk23Uv1ZyQnhTe53NLHdHSygn5K'}"}
2024-09-09 16:09:36,117 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTYwOTM1', 'Timestamp': '20240909160935', 'CheckoutRequestID': 'ws_CO_09092024190924026721281152'}"}
2024-09-09 16:09:36,119 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:09:36,933 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 16:09:36,934 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b513824467', 'CheckoutRequestID': 'ws_CO_09092024190924026721281152', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024190924026721281152 899885"}
2024-09-09 16:09:37,053 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:09:37,682 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:09:37,684 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:09:38,676 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:12:42,270 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:12:42,394 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:12:42,395 - INFO - {'updated': 'initiated stk query for ws_CO_09092024191231060712959475 827142 '}
2024-09-09 16:12:42,477 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:12:43,285 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:12:43,287 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Wqs6Ti6JioAFxvd36JWQ8Aa1mRaf'}"}
2024-09-09 16:12:43,287 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTYxMjQy', 'Timestamp': '20240909161242', 'CheckoutRequestID': 'ws_CO_09092024191231060712959475'}"}
2024-09-09 16:12:43,288 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:12:44,125 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 16:12:44,126 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc13832185', 'CheckoutRequestID': 'ws_CO_09092024191231060712959475', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024191231060712959475 827142"}
2024-09-09 16:12:44,288 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:12:44,898 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:12:44,899 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:12:45,591 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:15:38,589 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:15:38,742 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:15:38,743 - INFO - there is a test coming
2024-09-09 16:15:38,743 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 16:15:38,786 - INFO - {'updated_data': 'the data is now as 254725070051'}
2024-09-09 16:15:38,786 - INFO - the data is now as 254725070051
2024-09-09 16:15:38,810 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 16:15:38,811 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 16:15:38,812 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:15:39,886 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:15:39,888 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer HGdjls8ar44M5kk1ApeaQhnazeMV'}"}
2024-09-09 16:15:39,889 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTYxNTM5', 'Timestamp': '20240909161539', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2500', 'PartyA': '254725070051', 'PartyB': 899885, 'PhoneNumber': '254725070051', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0618916-1725898536281', 'TransactionDesc': 'Some payment'}
2024-09-09 16:15:39,890 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:15:40,929 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-09 16:15:40,935 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6168744053', 'CheckoutRequestID': 'ws_CO_09092024191540682725070051', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 16:20:37,066 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:20:37,220 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:20:37,222 - INFO - {'updated': 'initiated stk query for ws_CO_09092024192025834710248031 827142 '}
2024-09-09 16:20:37,293 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:20:38,076 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:20:38,081 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer A0Urq5eIyQCTYKuOaIhFLzbs6GYg'}"}
2024-09-09 16:20:38,081 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTYyMDM3', 'Timestamp': '20240909162037', 'CheckoutRequestID': 'ws_CO_09092024192025834710248031'}"}
2024-09-09 16:20:38,082 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:20:38,921 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-09 16:20:38,922 - INFO - {'updated': "Received response {'requestId': 'ws_CO_09092024192025834710248031', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_09092024192025834710248031 827142"}
2024-09-09 16:20:38,924 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-09 16:21:25,731 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:21:25,909 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:21:25,910 - INFO - there is a test coming
2024-09-09 16:21:25,910 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 16:21:25,950 - INFO - {'updated_data': 'the data is now as 254728781531'}
2024-09-09 16:21:25,950 - INFO - the data is now as 254728781531
2024-09-09 16:21:25,967 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 16:21:25,967 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 16:21:25,968 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:21:26,731 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:21:26,733 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer FuLG56yED6Gllwsrr0ryuT7r0laX'}"}
2024-09-09 16:21:26,733 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTYyMTI2', 'Timestamp': '20240909162126', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '400', 'PartyA': '254728781531', 'PartyB': 899885, 'PhoneNumber': '254728781531', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA008383CP-1725898883427', 'TransactionDesc': 'Some payment'}
2024-09-09 16:21:26,734 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:21:27,755 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 16:21:27,765 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc13864811', 'CheckoutRequestID': 'ws_CO_09092024192127536728781531', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 16:23:26,601 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:23:26,739 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:23:26,739 - INFO - there is a test coming
2024-09-09 16:23:26,740 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 16:23:26,785 - INFO - {'updated_data': 'the data is now as 254729530016'}
2024-09-09 16:23:26,786 - INFO - the data is now as 254729530016
2024-09-09 16:23:26,803 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 16:23:26,803 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 16:23:26,804 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:23:27,727 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:23:27,729 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer TCH4PQrTRwGNvJIS0UGDFdD10ZKZ'}"}
2024-09-09 16:23:27,729 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTYyMzI3', 'Timestamp': '20240909162327', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3558', 'PartyA': '254729530016', 'PartyB': 827142, 'PhoneNumber': '254729530016', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-34120', 'TransactionDesc': 'Some payment'}
2024-09-09 16:23:27,730 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:23:28,796 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 16:23:28,802 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074431502', 'CheckoutRequestID': 'ws_CO_09092024192328514729530016', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 16:23:40,512 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:23:40,644 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:23:40,645 - INFO - there is a test coming
2024-09-09 16:23:40,645 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 16:23:40,694 - INFO - {'updated_data': 'the data is now as 254716159759'}
2024-09-09 16:23:40,694 - INFO - the data is now as 254716159759
2024-09-09 16:23:40,712 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 16:23:40,712 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 16:23:40,713 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:23:41,462 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:23:41,464 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer zhw6LHLT2B4mQCAsBD4cUFmTilnm'}"}
2024-09-09 16:23:41,464 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTYyMzQx', 'Timestamp': '20240909162341', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254716159759', 'PartyB': 899885, 'PhoneNumber': '254716159759', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA1640104BP-1725899018204', 'TransactionDesc': 'Some payment'}
2024-09-09 16:23:41,466 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:23:42,525 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-09 16:23:42,532 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee593788165', 'CheckoutRequestID': 'ws_CO_09092024192342183716159759', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 16:23:53,376 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:23:53,529 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:23:53,530 - INFO - {'updated': 'initiated stk query for ws_CO_09092024192342183716159759 899885 '}
2024-09-09 16:23:53,586 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:23:54,337 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:23:54,339 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer WdU5cOHkH6LZE1JUf9cwAU3zc1B8'}"}
2024-09-09 16:23:54,340 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTYyMzUz', 'Timestamp': '20240909162353', 'CheckoutRequestID': 'ws_CO_09092024192342183716159759'}"}
2024-09-09 16:23:54,342 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:23:55,160 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-09 16:23:55,161 - INFO - {'updated': "Received response {'requestId': 'ws_CO_09092024192342183716159759', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_09092024192342183716159759 899885"}
2024-09-09 16:23:55,163 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-09 16:30:33,429 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:30:33,605 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:30:33,605 - INFO - there is a test coming
2024-09-09 16:30:33,605 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 16:30:33,858 - INFO - {'updated_data': 'the data is now as 254114198971'}
2024-09-09 16:30:33,859 - INFO - the data is now as 254114198971
2024-09-09 16:30:33,940 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 16:30:33,941 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 16:30:33,942 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:30:34,715 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:30:34,717 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer yCpypcmARGI7i2ULmX7TcnRML2uy'}"}
2024-09-09 16:30:34,718 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTYzMDM0', 'Timestamp': '20240909163034', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254114198971', 'PartyB': 899885, 'PhoneNumber': '254114198971', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053290', 'TransactionDesc': 'Some payment'}
2024-09-09 16:30:34,719 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:30:35,900 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-09 16:30:35,906 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e168530636', 'CheckoutRequestID': 'ws_CO_09092024193035440114198971', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 16:31:57,120 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169253772', 'CheckoutRequestID': 'ws_CO_09092024193145977723330049', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI981AIHW0'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909193156}, {'Name': 'PhoneNumber', 'Value': 254723330049}]}}}}"}
2024-09-09 16:31:57,120 - INFO - {'updated_data': 'callback data began'}
2024-09-09 16:31:57,121 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169253772', 'CheckoutRequestID': 'ws_CO_09092024193145977723330049', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI981AIHW0'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909193156}, {'Name': 'PhoneNumber', 'Value': 254723330049}]}}}}}
2024-09-09 16:31:57,323 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:31:57,622 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:31:57,623 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:31:58,304 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:32:08,966 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:32:09,138 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:32:09,139 - INFO - there is a test coming
2024-09-09 16:32:09,139 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 16:32:09,188 - INFO - {'updated_data': 'the data is now as 254795509679'}
2024-09-09 16:32:09,189 - INFO - the data is now as 254795509679
2024-09-09 16:32:09,212 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 16:32:09,212 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 16:32:09,213 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:32:10,180 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:32:10,183 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer xpXLMbQ0Dc4G3aGpgIVCAycSxdjL'}"}
2024-09-09 16:32:10,183 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTYzMjEw', 'Timestamp': '20240909163210', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1500', 'PartyA': '254795509679', 'PartyB': 827142, 'PhoneNumber': '254795509679', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-31097', 'TransactionDesc': 'Some payment'}
2024-09-09 16:32:10,185 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:32:11,503 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-09 16:32:11,510 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169254496', 'CheckoutRequestID': 'ws_CO_09092024193210996795509679', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 16:32:22,419 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:32:22,435 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-09 16:32:22,436 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-09 16:33:21,580 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:33:21,749 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:33:21,750 - INFO - {'updated': 'initiated stk query for ws_CO_09092024193300304722725137 827142 '}
2024-09-09 16:33:21,813 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:33:22,577 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:33:22,579 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer pPqB68vDITpLAFW4ZNiIcOgEV4eC'}"}
2024-09-09 16:33:22,580 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTYzMzIx', 'Timestamp': '20240909163321', 'CheckoutRequestID': 'ws_CO_09092024193300304722725137'}"}
2024-09-09 16:33:22,581 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:33:23,518 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 16:33:23,519 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db13915435', 'CheckoutRequestID': 'ws_CO_09092024193300304722725137', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024193300304722725137 827142"}
2024-09-09 16:33:23,638 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:33:23,965 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:33:23,966 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:33:24,620 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:34:09,813 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:34:09,989 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:34:09,990 - INFO - there is a test coming
2024-09-09 16:34:09,991 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 16:34:10,039 - INFO - {'updated_data': 'the data is now as 254798241100'}
2024-09-09 16:34:10,039 - INFO - the data is now as 254798241100
2024-09-09 16:34:10,056 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 16:34:10,056 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 16:34:10,057 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:34:10,911 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:34:10,914 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer rVtjaw4KYGnXDykhcsVBPGLqQBR8'}"}
2024-09-09 16:34:10,914 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTYzNDEw', 'Timestamp': '20240909163410', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '500', 'PartyA': '254798241100', 'PartyB': 827142, 'PhoneNumber': '254798241100', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-48656', 'TransactionDesc': 'Some payment'}
2024-09-09 16:34:10,916 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:34:11,833 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-09 16:34:11,839 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6168772679', 'CheckoutRequestID': 'ws_CO_09092024193411611798241100', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 16:34:23,664 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:34:23,819 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:34:23,820 - INFO - {'updated': 'initiated stk query for ws_CO_09092024193411611798241100 827142 '}
2024-09-09 16:34:23,903 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:34:24,665 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:34:24,667 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer RF481S3uY6SG2QnBFpu2t9Qb2dER'}"}
2024-09-09 16:34:24,668 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTYzNDIz', 'Timestamp': '20240909163423', 'CheckoutRequestID': 'ws_CO_09092024193411611798241100'}"}
2024-09-09 16:34:24,669 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:34:25,557 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-09 16:34:25,557 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6168772679', 'CheckoutRequestID': 'ws_CO_09092024193411611798241100', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024193411611798241100 827142"}
2024-09-09 16:34:25,674 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:34:26,260 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:34:26,262 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:34:26,622 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:36:43,662 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:36:43,849 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:36:43,849 - INFO - {'updated': 'initiated stk query for ws_CO_09092024193632242721998271 827142 '}
2024-09-09 16:36:43,922 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:36:44,767 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:36:44,769 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 9A2AOEogQwlxMUnZZFXBVRDHKJop'}"}
2024-09-09 16:36:44,769 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTYzNjQz', 'Timestamp': '20240909163643', 'CheckoutRequestID': 'ws_CO_09092024193632242721998271'}"}
2024-09-09 16:36:44,776 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:36:45,586 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-09 16:36:45,586 - INFO - {'updated': "Received response {'requestId': 'ws_CO_09092024193632242721998271', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_09092024193632242721998271 827142"}
2024-09-09 16:36:45,588 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-09 16:38:26,607 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:38:26,750 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:38:26,751 - INFO - {'updated': 'initiated stk query for ws_CO_09092024193815396798840454 827142 '}
2024-09-09 16:38:26,804 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:38:27,554 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:38:27,555 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer HnWuvLSNz7kGt5shxN5vLDmMJg8G'}"}
2024-09-09 16:38:27,556 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTYzODI2', 'Timestamp': '20240909163826', 'CheckoutRequestID': 'ws_CO_09092024193815396798840454'}"}
2024-09-09 16:38:27,557 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:38:28,349 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 16:38:28,350 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b513931029', 'CheckoutRequestID': 'ws_CO_09092024193815396798840454', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024193815396798840454 827142"}
2024-09-09 16:38:28,463 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:38:29,092 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:38:29,093 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:38:29,442 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:39:00,245 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:39:00,411 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:39:00,412 - INFO - there is a test coming
2024-09-09 16:39:00,412 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 16:39:00,458 - INFO - {'updated_data': 'the data is now as 254704925785'}
2024-09-09 16:39:00,458 - INFO - the data is now as 254704925785
2024-09-09 16:39:00,476 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 16:39:00,476 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 16:39:00,478 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:39:01,433 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:39:01,435 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer IfPVRHmOKQMwqZzOBJMU1N5GyeHg'}"}
2024-09-09 16:39:01,436 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTYzOTAx', 'Timestamp': '20240909163901', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '4000', 'PartyA': '254704925785', 'PartyB': 899885, 'PhoneNumber': '254704925785', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053292', 'TransactionDesc': 'Some payment'}
2024-09-09 16:39:01,437 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:39:02,461 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-09 16:39:02,467 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6168779872', 'CheckoutRequestID': 'ws_CO_09092024193902237704925785', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 16:45:14,010 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db13959863', 'CheckoutRequestID': 'ws_CO_09092024194446970717418439', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI931DG7VP'}, {'Name': 'TransactionDate', 'Value': 20240909194500}, {'Name': 'PhoneNumber', 'Value': 254717418439}]}}}}"}
2024-09-09 16:45:14,010 - INFO - {'updated_data': 'callback data began'}
2024-09-09 16:45:14,010 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db13959863', 'CheckoutRequestID': 'ws_CO_09092024194446970717418439', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI931DG7VP'}, {'Name': 'TransactionDate', 'Value': 20240909194500}, {'Name': 'PhoneNumber', 'Value': 254717418439}]}}}}}
2024-09-09 16:45:14,173 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:45:14,479 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:45:14,480 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:45:14,884 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:45:29,574 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86459998', 'CheckoutRequestID': 'ws_CO_09092024194517389722994079', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 60000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI941DJSIU'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909194528}, {'Name': 'PhoneNumber', 'Value': 254722994079}]}}}}"}
2024-09-09 16:45:29,575 - INFO - {'updated_data': 'callback data began'}
2024-09-09 16:45:29,575 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86459998', 'CheckoutRequestID': 'ws_CO_09092024194517389722994079', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 60000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI941DJSIU'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909194528}, {'Name': 'PhoneNumber', 'Value': 254722994079}]}}}}}
2024-09-09 16:45:29,772 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:45:30,082 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:45:30,083 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:45:30,762 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:45:31,439 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:45:31,598 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:45:31,599 - INFO - {'updated': 'initiated stk query for ws_CO_09092024194517389722994079 827142 '}
2024-09-09 16:45:31,661 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:45:32,405 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:45:32,408 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer BfTTVxGYnvxc7MsGYWzB0B2FyCLb'}"}
2024-09-09 16:45:32,408 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTY0NTMx', 'Timestamp': '20240909164531', 'CheckoutRequestID': 'ws_CO_09092024194517389722994079'}"}
2024-09-09 16:45:32,410 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:45:33,282 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 16:45:33,283 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86459998', 'CheckoutRequestID': 'ws_CO_09092024194517389722994079', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024194517389722994079 827142"}
2024-09-09 16:45:33,408 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:45:33,717 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:45:33,718 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:45:34,397 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:45:39,416 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e168554307', 'CheckoutRequestID': 'ws_CO_09092024194531658772131131', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 15000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI931DKYAZ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909194538}, {'Name': 'PhoneNumber', 'Value': 254772131131}]}}}}"}
2024-09-09 16:45:39,419 - INFO - {'updated_data': 'callback data began'}
2024-09-09 16:45:39,419 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e168554307', 'CheckoutRequestID': 'ws_CO_09092024194531658772131131', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 15000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI931DKYAZ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909194538}, {'Name': 'PhoneNumber', 'Value': 254772131131}]}}}}}
2024-09-09 16:45:39,580 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:45:39,873 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:45:39,874 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:45:40,253 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:46:30,027 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:46:30,239 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:46:30,240 - INFO - there is a test coming
2024-09-09 16:46:30,240 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 16:46:30,288 - INFO - {'updated_data': 'the data is now as 254724457727'}
2024-09-09 16:46:30,288 - INFO - the data is now as 254724457727
2024-09-09 16:46:30,306 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 16:46:30,306 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 16:46:30,307 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:46:31,067 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:46:31,069 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer bHcKRQoomJIZN2RLePnaYaemkhG0'}"}
2024-09-09 16:46:31,069 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTY0NjMx', 'Timestamp': '20240909164631', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '6000', 'PartyA': '254724457727', 'PartyB': 899885, 'PhoneNumber': '254724457727', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053321', 'TransactionDesc': 'Some payment'}
2024-09-09 16:46:31,070 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:46:32,114 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-09 16:46:32,120 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b3510488', 'CheckoutRequestID': 'ws_CO_09092024194631891724457727', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 16:47:53,283 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:47:53,421 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:47:53,422 - INFO - there is a test coming
2024-09-09 16:47:53,422 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 16:47:53,474 - INFO - {'updated_data': 'the data is now as 254722950764'}
2024-09-09 16:47:53,475 - INFO - the data is now as 254722950764
2024-09-09 16:47:53,493 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 16:47:53,493 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 16:47:53,494 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:47:54,276 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:47:54,278 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer OmOx6xyGPFAXh0gK4lGlmqlYgi0v'}"}
2024-09-09 16:47:54,278 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTY0NzU0', 'Timestamp': '20240909164754', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '500', 'PartyA': '254722950764', 'PartyB': 899885, 'PhoneNumber': '254722950764', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053322', 'TransactionDesc': 'Some payment'}
2024-09-09 16:47:54,279 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:47:55,285 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 16:47:55,291 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc13964479', 'CheckoutRequestID': 'ws_CO_09092024194755009722950764', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 16:50:42,665 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:50:42,838 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:50:42,838 - INFO - {'updated': 'initiated stk query for ws_CO_09092024194959550723770077 827142 '}
2024-09-09 16:50:42,912 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:50:43,673 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:50:43,676 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Zfke6UrqjVvOGEr2wO9PQGxwqHyd'}"}
2024-09-09 16:50:43,676 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTY1MDQy', 'Timestamp': '20240909165042', 'CheckoutRequestID': 'ws_CO_09092024194959550723770077'}"}
2024-09-09 16:50:43,678 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:50:44,621 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 16:50:44,623 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074473632', 'CheckoutRequestID': 'ws_CO_09092024194959550723770077', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024194959550723770077 827142"}
2024-09-09 16:50:44,739 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:50:45,333 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:50:45,334 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:50:45,688 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:51:12,268 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:51:12,419 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:51:12,420 - INFO - there is a test coming
2024-09-09 16:51:12,421 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 16:51:12,482 - INFO - {'updated_data': 'the data is now as 254710894202'}
2024-09-09 16:51:12,482 - INFO - the data is now as 254710894202
2024-09-09 16:51:12,497 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 16:51:12,497 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 16:51:12,499 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:51:13,243 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:51:13,245 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 2NWh5eulA7hQzRZxrdBGkFBghTJU'}"}
2024-09-09 16:51:13,246 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTY1MTEz', 'Timestamp': '20240909165113', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254710894202', 'PartyB': 827142, 'PhoneNumber': '254710894202', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-4912', 'TransactionDesc': 'Some payment'}
2024-09-09 16:51:13,247 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:51:14,260 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-09 16:51:14,266 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e168563603', 'CheckoutRequestID': 'ws_CO_09092024195114049710894202', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 16:51:48,517 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee593894691', 'CheckoutRequestID': 'ws_CO_09092024195132073713923413', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI901EX1D8'}, {'Name': 'TransactionDate', 'Value': 20240909195147}, {'Name': 'PhoneNumber', 'Value': 254713923413}]}}}}"}
2024-09-09 16:51:48,517 - INFO - {'updated_data': 'callback data began'}
2024-09-09 16:51:48,517 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee593894691', 'CheckoutRequestID': 'ws_CO_09092024195132073713923413', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI901EX1D8'}, {'Name': 'TransactionDate', 'Value': 20240909195147}, {'Name': 'PhoneNumber', 'Value': 254713923413}]}}}}}
2024-09-09 16:51:48,666 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:51:49,001 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:51:49,002 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:51:49,680 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:53:17,030 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c229-4922-a304-de61d3eb488813975379', 'CheckoutRequestID': 'ws_CO_09092024195309128723770077', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-09 16:53:17,030 - INFO - {'updated_data': 'callback data began'}
2024-09-09 16:53:17,031 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c229-4922-a304-de61d3eb488813975379', 'CheckoutRequestID': 'ws_CO_09092024195309128723770077', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-09 16:53:17,190 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:53:17,486 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:53:17,487 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:53:18,177 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:55:18,436 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:55:18,639 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:55:18,639 - INFO - there is a test coming
2024-09-09 16:55:18,640 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 16:55:18,679 - INFO - {'updated_data': 'the data is now as 254721250557'}
2024-09-09 16:55:18,679 - INFO - the data is now as 254721250557
2024-09-09 16:55:18,694 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 16:55:18,694 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 16:55:18,695 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:55:19,517 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:55:19,519 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer KES1B8ZM5XhZ31Ed7u9SCl1vESgO'}"}
2024-09-09 16:55:19,520 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTY1NTE5', 'Timestamp': '20240909165519', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254721250557', 'PartyB': 827142, 'PhoneNumber': '254721250557', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-14868', 'TransactionDesc': 'Some payment'}
2024-09-09 16:55:19,521 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:55:20,461 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 16:55:20,474 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86478661', 'CheckoutRequestID': 'ws_CO_09092024195520223721250557', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 16:55:31,359 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:55:31,495 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:55:31,497 - INFO - {'updated': 'initiated stk query for ws_CO_09092024195520223721250557 827142 '}
2024-09-09 16:55:31,558 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:55:35,012 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:55:35,014 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer cUv2Zre32AQpfbwk2KntXZYper8V'}"}
2024-09-09 16:55:35,014 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTY1NTMx', 'Timestamp': '20240909165531', 'CheckoutRequestID': 'ws_CO_09092024195520223721250557'}"}
2024-09-09 16:55:35,016 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:55:56,133 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 16:55:56,134 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86478661', 'CheckoutRequestID': 'ws_CO_09092024195520223721250557', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024195520223721250557 827142"}
2024-09-09 16:55:56,252 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:55:56,847 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:55:56,848 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:55:57,211 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:57:16,716 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792168928', 'CheckoutRequestID': 'ws_CO_09092024195705911797005418', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI951G23Q7'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909195716}, {'Name': 'PhoneNumber', 'Value': 254797005418}]}}}}"}
2024-09-09 16:57:16,716 - INFO - {'updated_data': 'callback data began'}
2024-09-09 16:57:16,716 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792168928', 'CheckoutRequestID': 'ws_CO_09092024195705911797005418', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI951G23Q7'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909195716}, {'Name': 'PhoneNumber', 'Value': 254797005418}]}}}}}
2024-09-09 16:57:16,872 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:57:17,159 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:57:17,168 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:57:17,545 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:57:24,332 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:57:24,485 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:57:24,485 - INFO - there is a test coming
2024-09-09 16:57:24,486 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 16:57:24,526 - INFO - {'updated_data': 'the data is now as 254724607989'}
2024-09-09 16:57:24,526 - INFO - the data is now as 254724607989
2024-09-09 16:57:24,543 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 16:57:24,543 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 16:57:24,544 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:57:25,292 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:57:25,293 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer IAN8qVmUfIoI1qgFMxAVWkanr2Ny'}"}
2024-09-09 16:57:25,294 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTY1NzI1', 'Timestamp': '20240909165725', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '40000', 'PartyA': '254724607989', 'PartyB': 899885, 'PhoneNumber': '254724607989', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA1641196LM-1725901043413', 'TransactionDesc': 'Some payment'}
2024-09-09 16:57:25,295 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:57:26,336 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-09 16:57:26,342 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6168813322', 'CheckoutRequestID': 'ws_CO_09092024195726113724607989', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 16:58:38,792 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:58:38,919 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:58:38,920 - INFO - there is a test coming
2024-09-09 16:58:38,920 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 16:58:38,970 - INFO - {'updated_data': 'the data is now as 254718488604'}
2024-09-09 16:58:38,970 - INFO - the data is now as 254718488604
2024-09-09 16:58:38,989 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 16:58:38,989 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 16:58:38,990 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:58:41,873 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:58:41,875 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer WL4iT654UnbSTm9SASYwENS0cdMx'}"}
2024-09-09 16:58:41,875 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTY1ODQx', 'Timestamp': '20240909165841', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254718488604', 'PartyB': 827142, 'PhoneNumber': '254718488604', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-21214', 'TransactionDesc': 'Some payment'}
2024-09-09 16:58:41,877 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:59:27,395 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 16:59:27,401 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c229-4922-a304-de61d3eb488813998365', 'CheckoutRequestID': 'ws_CO_09092024195925765718488604', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 17:00:29,580 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:00:29,725 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:00:29,726 - INFO - there is a test coming
2024-09-09 17:00:29,727 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 17:00:29,770 - INFO - {'updated_data': 'the data is now as 254725269128'}
2024-09-09 17:00:29,771 - INFO - the data is now as 254725269128
2024-09-09 17:00:29,800 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 17:00:29,800 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 17:00:29,802 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:00:45,981 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 400 0
2024-09-09 17:00:45,984 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer '}"}
2024-09-09 17:00:45,984 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTcwMDQ1', 'Timestamp': '20240909170045', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '14000', 'PartyA': '254725269128', 'PartyB': 899885, 'PhoneNumber': '254725269128', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0603898-1725901227415', 'TransactionDesc': 'Some payment'}
2024-09-09 17:00:45,985 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:01:25,793 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 404 208
2024-09-09 17:01:25,794 - INFO -  th data is {'code': 404, 'message': {'requestId': 'e1f1-482d-9538-d140c330be9b3565931', 'errorCode': '404.001.03', 'errorMessage': 'Invalid Access Token'}}
2024-09-09 17:01:25,795 - WARNING - Not Found: /api/v1/stk/
2024-09-09 17:01:29,556 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:01:29,702 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:01:29,703 - INFO - there is a test coming
2024-09-09 17:01:29,703 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 17:01:29,744 - INFO - {'updated_data': 'the data is now as 254725269128'}
2024-09-09 17:01:29,744 - INFO - the data is now as 254725269128
2024-09-09 17:01:29,759 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 17:01:29,760 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 17:01:29,761 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:01:30,547 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:01:30,549 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer of1YjqAvmvuU0j8N9kBi11nkYlcO'}"}
2024-09-09 17:01:30,549 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTcwMTMw', 'Timestamp': '20240909170130', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '14000', 'PartyA': '254725269128', 'PartyB': 899885, 'PhoneNumber': '254725269128', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0603898-1725901283108', 'TransactionDesc': 'Some payment'}
2024-09-09 17:01:30,551 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:01:31,924 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-09 17:01:31,930 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b3568828', 'CheckoutRequestID': 'ws_CO_09092024200131364725269128', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 17:06:42,617 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:06:42,821 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:06:42,821 - INFO - there is a test coming
2024-09-09 17:06:42,822 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 17:06:42,863 - INFO - {'updated_data': 'the data is now as 254713633177'}
2024-09-09 17:06:42,864 - INFO - the data is now as 254713633177
2024-09-09 17:06:42,879 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 17:06:42,880 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 17:06:42,881 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:06:43,712 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:06:43,714 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer EpFqQ70dMqHuFD8NJUEaHxL8I6bC'}"}
2024-09-09 17:06:43,714 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTcwNjQz', 'Timestamp': '20240909170643', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254713633177', 'PartyB': 899885, 'PhoneNumber': '254713633177', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053357', 'TransactionDesc': 'Some payment'}
2024-09-09 17:06:43,715 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:07:07,948 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 17:07:07,964 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b514037795', 'CheckoutRequestID': 'ws_CO_09092024200706856713633177', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 17:07:22,202 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:07:22,341 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:07:22,342 - INFO - {'updated': 'initiated stk query for ws_CO_09092024200706856713633177 899885 '}
2024-09-09 17:07:22,397 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:07:23,212 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:07:23,220 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer WQC3XZkO1Ww6sgzsNzXA9EXxStMf'}"}
2024-09-09 17:07:23,221 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTcwNzIy', 'Timestamp': '20240909170722', 'CheckoutRequestID': 'ws_CO_09092024200706856713633177'}"}
2024-09-09 17:07:23,222 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:07:34,367 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 17:07:34,368 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b514037795', 'CheckoutRequestID': 'ws_CO_09092024200706856713633177', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024200706856713633177 899885"}
2024-09-09 17:07:34,533 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 17:07:35,125 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 17:07:35,126 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 17:07:35,480 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 17:11:15,322 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:11:15,471 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:11:15,472 - INFO - {'updated': 'initiated stk query for ws_CO_09092024201054225710509532 899885 '}
2024-09-09 17:11:15,548 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:11:16,606 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:11:16,608 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer cjHZQFRf59Cg5EupcEuDMunGcxy0'}"}
2024-09-09 17:11:16,609 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTcxMTE1', 'Timestamp': '20240909171115', 'CheckoutRequestID': 'ws_CO_09092024201054225710509532'}"}
2024-09-09 17:11:16,610 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:11:17,539 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 17:11:17,540 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208792206136', 'CheckoutRequestID': 'ws_CO_09092024201054225710509532', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024201054225710509532 899885"}
2024-09-09 17:11:17,658 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 17:11:17,944 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 17:11:17,945 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 17:11:18,309 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 17:15:42,298 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:15:42,441 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:15:42,441 - INFO - {'updated': 'initiated stk query for ws_CO_09092024201511049724344180 827142 '}
2024-09-09 17:15:42,499 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:15:53,256 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:15:53,259 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer udWMFojZG9JUALu8WY31dbJSU3tU'}"}
2024-09-09 17:15:53,259 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTcxNTQy', 'Timestamp': '20240909171542', 'CheckoutRequestID': 'ws_CO_09092024201511049724344180'}"}
2024-09-09 17:15:53,260 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:16:50,866 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 17:16:50,866 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208792217345', 'CheckoutRequestID': 'ws_CO_09092024201511049724344180', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024201511049724344180 827142"}
2024-09-09 17:16:50,990 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 17:16:51,578 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 17:16:51,580 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 17:16:52,389 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 17:17:11,885 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:17:12,085 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:17:12,086 - INFO - {'updated': 'initiated stk query for ws_CO_09092024201647258704909094 827142 '}
2024-09-09 17:17:12,153 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:17:12,899 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:17:12,901 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer fcn6tGyvuBPxGLdbQEHx1NKNi1ZC'}"}
2024-09-09 17:17:12,901 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTcxNzEy', 'Timestamp': '20240909171712', 'CheckoutRequestID': 'ws_CO_09092024201647258704909094'}"}
2024-09-09 17:17:12,902 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:17:14,347 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 429 221
2024-09-09 17:17:14,348 - INFO - {'updated': "Received response {'fault': {'faultstring': 'Spike arrest violation. Allowed rate : MessageRate{messagesPerPeriod=25, periodInMicroseconds=1000000, maxBurstMessageCount=2.5}', 'detail': {'errorcode': 'policies.ratelimit.SpikeArrestViolation'}}} for ws_CO_09092024201647258704909094 827142"}
2024-09-09 17:17:14,355 - WARNING - Too Many Requests: /api/v1/stk/query/
2024-09-09 17:17:17,632 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b3627420', 'CheckoutRequestID': 'ws_CO_09092024201647258704909094', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2026.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI991K1CRN'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909201707}, {'Name': 'PhoneNumber', 'Value': 254704909094}]}}}}"}
2024-09-09 17:17:17,632 - INFO - {'updated_data': 'callback data began'}
2024-09-09 17:17:17,632 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b3627420', 'CheckoutRequestID': 'ws_CO_09092024201647258704909094', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2026.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI991K1CRN'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909201707}, {'Name': 'PhoneNumber', 'Value': 254704909094}]}}}}}
2024-09-09 17:17:17,783 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 17:17:18,103 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 17:17:18,105 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 17:17:18,487 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 17:17:31,546 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:17:31,701 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:17:31,702 - INFO - there is a test coming
2024-09-09 17:17:31,702 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 17:17:31,747 - INFO - {'updated_data': 'the data is now as 254721714158'}
2024-09-09 17:17:31,747 - INFO - the data is now as 254721714158
2024-09-09 17:17:31,765 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 17:17:31,765 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 17:17:31,767 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:17:32,698 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:17:32,704 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer byrdIDsfbzlzlgSPJuSOSVOIXkcR'}"}
2024-09-09 17:17:32,704 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTcxNzMy', 'Timestamp': '20240909171732', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254721714158', 'PartyB': 827142, 'PhoneNumber': '254721714158', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-28681', 'TransactionDesc': 'Some payment'}
2024-09-09 17:17:32,708 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:17:34,178 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 17:17:34,185 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db14093330', 'CheckoutRequestID': 'ws_CO_09092024201733531721714158', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 17:17:55,095 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:17:55,279 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:17:55,280 - INFO - {'updated': 'initiated stk query for ws_CO_09092024201733531721714158 827142 '}
2024-09-09 17:17:55,345 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:17:59,283 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:17:59,285 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer QY3J6IbooerjgzeaembybhPkAXRb'}"}
2024-09-09 17:17:59,285 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTcxNzU1', 'Timestamp': '20240909171755', 'CheckoutRequestID': 'ws_CO_09092024201733531721714158'}"}
2024-09-09 17:17:59,286 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:18:38,060 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 17:18:38,061 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db14093330', 'CheckoutRequestID': 'ws_CO_09092024201733531721714158', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024201733531721714158 827142"}
2024-09-09 17:18:38,194 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 17:18:38,982 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 17:18:38,983 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 17:18:39,212 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:18:39,326 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 17:18:39,336 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:18:39,336 - INFO - {'updated': 'initiated stk query for ws_CO_09092024201733531721714158 827142 '}
2024-09-09 17:18:39,399 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:18:40,156 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:18:40,158 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer a2RhYuSgou2nkJ7AOu5df7Ij5ROT'}"}
2024-09-09 17:18:40,158 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTcxODM5', 'Timestamp': '20240909171839', 'CheckoutRequestID': 'ws_CO_09092024201733531721714158'}"}
2024-09-09 17:18:40,160 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:18:41,056 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 17:18:41,057 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db14093330', 'CheckoutRequestID': 'ws_CO_09092024201733531721714158', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024201733531721714158 827142"}
2024-09-09 17:18:41,176 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 17:18:41,772 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 17:18:41,774 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 17:18:42,448 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 17:19:55,571 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:19:55,753 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:19:55,754 - INFO - there is a test coming
2024-09-09 17:19:55,754 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 17:19:55,807 - INFO - {'updated_data': 'the data is now as 254725253195'}
2024-09-09 17:19:55,807 - INFO - the data is now as 254725253195
2024-09-09 17:19:55,822 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 17:19:55,822 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 17:19:55,823 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:19:56,589 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:19:56,593 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer kcQ8YLNwAnA1gbjaBdvTAqDT2GBJ'}"}
2024-09-09 17:19:56,593 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTcxOTU2', 'Timestamp': '20240909171956', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254725253195', 'PartyB': 899885, 'PhoneNumber': '254725253195', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA1623470LM-1725902395328', 'TransactionDesc': 'Some payment'}
2024-09-09 17:19:56,594 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:19:57,616 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-09 17:19:57,622 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6168875155', 'CheckoutRequestID': 'ws_CO_09092024201957367725253195', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 17:20:08,750 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:20:08,906 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:20:08,906 - INFO - {'updated': 'initiated stk query for ws_CO_09092024201957367725253195 899885 '}
2024-09-09 17:20:08,964 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:20:09,785 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:20:09,787 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer q3MNXfcEciU44TjI0pU6tYh9Voge'}"}
2024-09-09 17:20:09,787 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTcyMDA4', 'Timestamp': '20240909172008', 'CheckoutRequestID': 'ws_CO_09092024201957367725253195'}"}
2024-09-09 17:20:09,788 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:20:10,642 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-09 17:20:10,643 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6168875155', 'CheckoutRequestID': 'ws_CO_09092024201957367725253195', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024201957367725253195 899885"}
2024-09-09 17:20:10,751 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 17:20:11,070 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 17:20:11,072 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 17:20:11,444 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 17:22:37,342 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:22:37,479 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:22:37,480 - INFO - there is a test coming
2024-09-09 17:22:37,480 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 17:22:37,522 - INFO - {'updated_data': 'the data is now as 254726702151'}
2024-09-09 17:22:37,522 - INFO - the data is now as 254726702151
2024-09-09 17:22:37,538 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 17:22:37,538 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 17:22:37,539 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:22:43,225 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:22:43,227 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer NwBOuHURgJDErUA1BVyZ5jCYlxXe'}"}
2024-09-09 17:22:43,227 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTcyMjQz', 'Timestamp': '20240909172243', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3191', 'PartyA': '254726702151', 'PartyB': 827142, 'PhoneNumber': '254726702151', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-129065', 'TransactionDesc': 'Some payment'}
2024-09-09 17:22:43,228 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:22:45,108 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 17:22:45,114 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208792238494', 'CheckoutRequestID': 'ws_CO_09092024202243953726702151', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 17:25:14,255 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:25:14,382 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:25:14,383 - INFO - {'updated': 'initiated stk query for ws_CO_09092024202413196710461538 899885 '}
2024-09-09 17:25:14,457 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:25:15,328 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:25:15,330 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer zCTHwVRfGQ53fog5hnstGxUXGD9V'}"}
2024-09-09 17:25:15,330 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTcyNTE0', 'Timestamp': '20240909172514', 'CheckoutRequestID': 'ws_CO_09092024202413196710461538'}"}
2024-09-09 17:25:15,331 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:25:16,548 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-09 17:25:16,549 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e168650703', 'CheckoutRequestID': 'ws_CO_09092024202413196710461538', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024202413196710461538 899885"}
2024-09-09 17:25:16,682 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 17:25:16,976 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 17:25:16,977 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 17:25:17,628 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 17:26:06,590 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b914275850587384', 'CheckoutRequestID': 'ws_CO_09092024202555364710793213', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 32000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI961LS74A'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909202605}, {'Name': 'PhoneNumber', 'Value': 254710793213}]}}}}"}
2024-09-09 17:26:06,591 - INFO - {'updated_data': 'callback data began'}
2024-09-09 17:26:06,591 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b914275850587384', 'CheckoutRequestID': 'ws_CO_09092024202555364710793213', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 32000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI961LS74A'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909202605}, {'Name': 'PhoneNumber', 'Value': 254710793213}]}}}}}
2024-09-09 17:26:06,744 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 17:26:07,022 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 17:26:07,023 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 17:26:07,404 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 17:30:33,672 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:30:33,806 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:30:33,807 - INFO - {'updated': 'initiated stk query for ws_CO_09092024203022374757105301 827142 '}
2024-09-09 17:30:33,878 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:30:44,716 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 400 0
2024-09-09 17:30:44,725 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer '}"}
2024-09-09 17:30:44,725 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTczMDMz', 'Timestamp': '20240909173033', 'CheckoutRequestID': 'ws_CO_09092024203022374757105301'}"}
2024-09-09 17:30:44,726 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:31:21,882 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 404 174
2024-09-09 17:31:21,882 - INFO - {'updated': "Received response {'requestId': '', 'errorCode': '404.001.03', 'errorMessage': 'Invalid Access Token'} for ws_CO_09092024203022374757105301 827142"}
2024-09-09 17:31:21,885 - WARNING - Not Found: /api/v1/stk/query/
2024-09-09 17:38:57,087 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:38:57,206 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:38:57,207 - INFO - there is a test coming
2024-09-09 17:38:57,207 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 17:38:57,250 - INFO - {'updated_data': 'the data is now as 254110095544'}
2024-09-09 17:38:57,251 - INFO - the data is now as 254110095544
2024-09-09 17:38:57,277 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 17:38:57,277 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 17:38:57,278 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:38:58,218 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:38:58,220 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer kPLvYOZU2tunA764wRtpYXT8Alt7'}"}
2024-09-09 17:38:58,221 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTczODU4', 'Timestamp': '20240909173858', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '4769', 'PartyA': '254110095544', 'PartyB': 827142, 'PhoneNumber': '254110095544', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '201-788', 'TransactionDesc': 'Some payment'}
2024-09-09 17:38:58,222 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:38:59,365 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 17:38:59,372 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074603438', 'CheckoutRequestID': 'ws_CO_09092024203858923110095544', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 17:39:13,771 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:39:13,937 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:39:13,938 - INFO - there is a test coming
2024-09-09 17:39:13,938 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 17:39:13,987 - INFO - {'updated_data': 'the data is now as 254712893411'}
2024-09-09 17:39:13,987 - INFO - the data is now as 254712893411
2024-09-09 17:39:14,016 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 17:39:14,017 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 17:39:14,018 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:39:14,778 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:39:14,780 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer hXi10NehlOyrekvzSV63A9CeBxTI'}"}
2024-09-09 17:39:14,780 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTczOTE0', 'Timestamp': '20240909173914', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '30000', 'PartyA': '254712893411', 'PartyB': 899885, 'PhoneNumber': '254712893411', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA006869CP-1725903552225', 'TransactionDesc': 'Some payment'}
2024-09-09 17:39:14,782 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:39:42,923 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 341
2024-09-09 17:39:42,931 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b9142758505159233', 'CheckoutRequestID': 'ws_CO_09092024203936317712893411', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 17:45:11,828 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:45:11,977 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:45:11,978 - INFO - there is a test coming
2024-09-09 17:45:11,978 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 17:45:12,022 - INFO - {'updated_data': 'the data is now as 254721318977'}
2024-09-09 17:45:12,022 - INFO - the data is now as 254721318977
2024-09-09 17:45:12,038 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 17:45:12,038 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 17:45:12,040 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:45:12,860 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:45:12,869 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer rQTZIaMjTN8yyvUDHINxxgXyapgg'}"}
2024-09-09 17:45:12,869 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTc0NTEy', 'Timestamp': '20240909174512', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254721318977', 'PartyB': 827142, 'PhoneNumber': '254721318977', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-169663', 'TransactionDesc': 'Some payment'}
2024-09-09 17:45:12,871 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:45:13,949 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-09 17:45:13,956 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b3774902', 'CheckoutRequestID': 'ws_CO_09092024204513599721318977', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 17:46:22,074 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792301284', 'CheckoutRequestID': 'ws_CO_09092024204608038725161615', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI911PLGNP'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909204621}, {'Name': 'PhoneNumber', 'Value': 254725161615}]}}}}"}
2024-09-09 17:46:22,074 - INFO - {'updated_data': 'callback data began'}
2024-09-09 17:46:22,074 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792301284', 'CheckoutRequestID': 'ws_CO_09092024204608038725161615', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI911PLGNP'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909204621}, {'Name': 'PhoneNumber', 'Value': 254725161615}]}}}}}
2024-09-09 17:46:22,262 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 17:46:22,845 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 17:46:22,846 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 17:46:23,492 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 17:56:29,839 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:56:30,027 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:56:30,027 - INFO - there is a test coming
2024-09-09 17:56:30,027 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 17:56:30,078 - INFO - {'updated_data': 'the data is now as 254710323038'}
2024-09-09 17:56:30,078 - INFO - the data is now as 254710323038
2024-09-09 17:56:30,096 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 17:56:30,096 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 17:56:30,097 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:56:30,856 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:56:30,858 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ySdp4GGAAOQRvU2l7JtPLcomM4Gl'}"}
2024-09-09 17:56:30,858 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTc1NjMw', 'Timestamp': '20240909175630', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254710323038', 'PartyB': 827142, 'PhoneNumber': '254710323038', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-8576', 'TransactionDesc': 'Some payment'}
2024-09-09 17:56:30,859 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:56:34,212 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-09 17:56:34,219 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b3828413', 'CheckoutRequestID': 'ws_CO_09092024205632615710323038', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 17:57:29,460 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:57:29,634 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:57:29,635 - INFO - there is a test coming
2024-09-09 17:57:29,635 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 17:57:29,685 - INFO - {'updated_data': 'the data is now as 254720797524'}
2024-09-09 17:57:29,685 - INFO - the data is now as 254720797524
2024-09-09 17:57:29,716 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 17:57:29,717 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 17:57:29,719 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:57:30,501 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:57:30,504 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer h95DPthBDXEjJNEoAstJSAQGrVUm'}"}
2024-09-09 17:57:30,504 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTc1NzMw', 'Timestamp': '20240909175730', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '15000', 'PartyA': '254720797524', 'PartyB': 899885, 'PhoneNumber': '254720797524', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA1639606LM-1725904646225', 'TransactionDesc': 'Some payment'}
2024-09-09 17:57:30,506 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:57:31,673 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 17:57:31,679 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86644589', 'CheckoutRequestID': 'ws_CO_09092024205731210720797524', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 17:57:34,508 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6168974041', 'CheckoutRequestID': 'ws_CO_09092024205720420722916059', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI991RI5M1'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909205729}, {'Name': 'PhoneNumber', 'Value': 254722916059}]}}}}"}
2024-09-09 17:57:34,508 - INFO - {'updated_data': 'callback data began'}
2024-09-09 17:57:34,508 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6168974041', 'CheckoutRequestID': 'ws_CO_09092024205720420722916059', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI991RI5M1'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909205729}, {'Name': 'PhoneNumber', 'Value': 254722916059}]}}}}}
2024-09-09 17:57:34,699 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 17:57:35,308 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 17:57:35,310 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 17:57:35,961 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 17:57:53,065 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:57:53,195 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:57:53,196 - INFO - {'updated': 'initiated stk query for ws_CO_09092024205731210720797524 899885 '}
2024-09-09 17:57:53,259 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:57:54,052 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:57:54,054 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer IP4L3R6JsOXf7bJUVdNYVDquNOf0'}"}
2024-09-09 17:57:54,054 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTc1NzUz', 'Timestamp': '20240909175753', 'CheckoutRequestID': 'ws_CO_09092024205731210720797524'}"}
2024-09-09 17:57:54,055 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:57:54,912 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 17:57:54,913 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86644589', 'CheckoutRequestID': 'ws_CO_09092024205731210720797524', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024205731210720797524 899885"}
2024-09-09 17:57:55,038 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 17:57:55,319 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 17:57:55,321 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 17:57:55,977 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 17:58:06,182 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86644589', 'CheckoutRequestID': 'ws_CO_09092024205731210720797524', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 15000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI991RJ4UN'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909205741}, {'Name': 'PhoneNumber', 'Value': 254720797524}]}}}}"}
2024-09-09 17:58:06,183 - INFO - {'updated_data': 'callback data began'}
2024-09-09 17:58:06,183 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86644589', 'CheckoutRequestID': 'ws_CO_09092024205731210720797524', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 15000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI991RJ4UN'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909205741}, {'Name': 'PhoneNumber', 'Value': 254720797524}]}}}}}
2024-09-09 17:58:06,356 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 17:58:06,671 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 17:58:06,673 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 17:58:07,050 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 18:00:52,635 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:00:52,806 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 18:00:52,807 - INFO - there is a test coming
2024-09-09 18:00:52,807 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 18:00:52,855 - INFO - {'updated_data': 'the data is now as 254727388563'}
2024-09-09 18:00:52,855 - INFO - the data is now as 254727388563
2024-09-09 18:00:52,883 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 18:00:52,883 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 18:00:52,885 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:00:53,665 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 18:00:53,667 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer RJV6ROqU1x0eHm4JxxF1Euxoy2QX'}"}
2024-09-09 18:00:53,668 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTgwMDUz', 'Timestamp': '20240909180053', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '15130', 'PartyA': '254727388563', 'PartyB': 827142, 'PhoneNumber': '254727388563', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-50783', 'TransactionDesc': 'Some payment'}
2024-09-09 18:00:53,669 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:00:54,843 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 18:00:54,850 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208792338152', 'CheckoutRequestID': 'ws_CO_09092024210054367727388563', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 18:01:07,813 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:01:07,987 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 18:01:07,988 - INFO - {'updated': 'initiated stk query for ws_CO_09092024210054367727388563 827142 '}
2024-09-09 18:01:08,047 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:01:08,832 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 18:01:08,834 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 7Wi8Z9VLjlNPka5kGyAKi942eRfF'}"}
2024-09-09 18:01:08,835 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTgwMTA4', 'Timestamp': '20240909180108', 'CheckoutRequestID': 'ws_CO_09092024210054367727388563'}"}
2024-09-09 18:01:08,836 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:01:09,711 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-09 18:01:09,712 - INFO - {'updated': "Received response {'requestId': 'ws_CO_09092024210054367727388563', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_09092024210054367727388563 827142"}
2024-09-09 18:01:09,714 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-09 18:01:15,764 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:01:15,963 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 18:01:15,964 - INFO - {'updated': 'initiated stk query for ws_CO_09092024210054367727388563 827142 '}
2024-09-09 18:01:16,026 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:01:16,769 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 18:01:16,771 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer xHlDpzUoAbpwSNcI0KOfwXhcDeXo'}"}
2024-09-09 18:01:16,771 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTgwMTE2', 'Timestamp': '20240909180116', 'CheckoutRequestID': 'ws_CO_09092024210054367727388563'}"}
2024-09-09 18:01:16,772 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:01:17,561 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-09 18:01:17,561 - INFO - {'updated': "Received response {'requestId': 'ws_CO_09092024210054367727388563', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_09092024210054367727388563 827142"}
2024-09-09 18:01:17,564 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-09 18:01:26,001 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792338152', 'CheckoutRequestID': 'ws_CO_09092024210054367727388563', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-09 18:01:26,001 - INFO - {'updated_data': 'callback data began'}
2024-09-09 18:01:26,001 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792338152', 'CheckoutRequestID': 'ws_CO_09092024210054367727388563', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-09 18:01:26,151 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 18:01:26,445 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 18:01:26,446 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 18:01:26,778 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 18:01:35,774 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:01:35,918 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 18:01:35,919 - INFO - {'updated': 'initiated stk query for ws_CO_09092024210054367727388563 827142 '}
2024-09-09 18:01:35,981 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:01:36,715 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 18:01:36,717 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Tihvmy8oHukMKFaTGwmdNjApawGA'}"}
2024-09-09 18:01:36,717 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTgwMTM1', 'Timestamp': '20240909180135', 'CheckoutRequestID': 'ws_CO_09092024210054367727388563'}"}
2024-09-09 18:01:36,718 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:01:37,555 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-09 18:01:37,555 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208792338152', 'CheckoutRequestID': 'ws_CO_09092024210054367727388563', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_09092024210054367727388563 827142"}
2024-09-09 18:01:37,677 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 18:01:37,963 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 18:01:37,964 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 18:01:38,636 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 18:09:48,164 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:09:48,284 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 18:09:48,285 - INFO - {'updated': 'initiated stk query for ws_CO_09092024210925839745883316 899885 '}
2024-09-09 18:09:48,358 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:09:49,126 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 18:09:49,128 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer X0ywk3N3z5SdTHGghZFErCHqGkA6'}"}
2024-09-09 18:09:49,129 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTgwOTQ4', 'Timestamp': '20240909180948', 'CheckoutRequestID': 'ws_CO_09092024210925839745883316'}"}
2024-09-09 18:09:49,131 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:09:50,000 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-09 18:09:50,000 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169485440', 'CheckoutRequestID': 'ws_CO_09092024210925839745883316', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024210925839745883316 899885"}
2024-09-09 18:09:50,132 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 18:09:50,422 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 18:09:50,423 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 18:09:50,811 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 18:13:03,338 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:13:03,457 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 18:13:03,458 - INFO - there is a test coming
2024-09-09 18:13:03,458 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 18:13:03,506 - INFO - {'updated_data': 'the data is now as 254720162444'}
2024-09-09 18:13:03,506 - INFO - the data is now as 254720162444
2024-09-09 18:13:03,529 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 18:13:03,529 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 18:13:03,530 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:13:04,305 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 18:13:04,307 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer nlHOnKdOiGRaSs9muqx2aaFQzxCk'}"}
2024-09-09 18:13:04,307 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTgxMzA0', 'Timestamp': '20240909181304', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254720162444', 'PartyB': 827142, 'PhoneNumber': '254720162444', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-19260', 'TransactionDesc': 'Some payment'}
2024-09-09 18:13:04,314 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:13:05,236 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 18:13:05,250 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208792363324', 'CheckoutRequestID': 'ws_CO_09092024211305008720162444', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 18:13:13,780 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792363324', 'CheckoutRequestID': 'ws_CO_09092024211305008720162444', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI981U020U'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909211313}, {'Name': 'PhoneNumber', 'Value': 254720162444}]}}}}"}
2024-09-09 18:13:13,780 - INFO - {'updated_data': 'callback data began'}
2024-09-09 18:13:13,781 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792363324', 'CheckoutRequestID': 'ws_CO_09092024211305008720162444', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI981U020U'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909211313}, {'Name': 'PhoneNumber', 'Value': 254720162444}]}}}}}
2024-09-09 18:13:13,945 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 18:13:14,415 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 18:13:14,416 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 18:13:15,071 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 18:13:22,605 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074683573', 'CheckoutRequestID': 'ws_CO_09092024211313906713049995', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI901U0UKE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909211321}, {'Name': 'PhoneNumber', 'Value': 254713049995}]}}}}"}
2024-09-09 18:13:22,606 - INFO - {'updated_data': 'callback data began'}
2024-09-09 18:13:22,606 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074683573', 'CheckoutRequestID': 'ws_CO_09092024211313906713049995', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI901U0UKE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909211321}, {'Name': 'PhoneNumber', 'Value': 254713049995}]}}}}}
2024-09-09 18:13:22,786 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 18:13:23,048 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 18:13:23,049 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 18:13:23,379 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 18:13:25,553 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:13:25,775 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 18:13:25,776 - INFO - {'updated': 'initiated stk query for ws_CO_09092024211313906713049995 899885 '}
2024-09-09 18:13:25,842 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:13:26,585 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 18:13:26,587 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer sl0paWtherCIEOT4SQsXRvuMOpW7'}"}
2024-09-09 18:13:26,587 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTgxMzI1', 'Timestamp': '20240909181325', 'CheckoutRequestID': 'ws_CO_09092024211313906713049995'}"}
2024-09-09 18:13:26,589 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:13:27,359 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 18:13:27,359 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074683573', 'CheckoutRequestID': 'ws_CO_09092024211313906713049995', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024211313906713049995 899885"}
2024-09-09 18:13:27,470 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 18:13:27,752 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 18:13:27,754 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 18:13:28,455 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 18:14:18,838 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:14:18,964 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 18:14:18,964 - INFO - {'updated': 'initiated stk query for ws_CO_09092024211407587707876842 899885 '}
2024-09-09 18:14:19,027 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:14:19,800 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 18:14:19,802 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer n461jWMVZOP7HMgcOOPBTukAeueU'}"}
2024-09-09 18:14:19,802 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTgxNDE5', 'Timestamp': '20240909181419', 'CheckoutRequestID': 'ws_CO_09092024211407587707876842'}"}
2024-09-09 18:14:19,804 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:14:20,669 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-09 18:14:20,670 - INFO - {'updated': "Received response {'requestId': 'ws_CO_09092024211407587707876842', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_09092024211407587707876842 899885"}
2024-09-09 18:14:20,672 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-09 18:21:50,946 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:21:50,969 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-09 18:21:50,970 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-09 19:01:41,374 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:01:41,509 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:01:41,510 - INFO - there is a test coming
2024-09-09 19:01:41,510 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 19:01:41,563 - INFO - {'updated_data': 'the data is now as 254701094360'}
2024-09-09 19:01:41,563 - INFO - the data is now as 254701094360
2024-09-09 19:01:41,579 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 19:01:41,579 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 19:01:41,581 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:01:52,519 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:01:52,521 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Kf6poj2P53WyKiVOomjfwz1yWRr1'}"}
2024-09-09 19:01:52,522 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTkwMTUy', 'Timestamp': '20240909190152', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '200', 'PartyA': '254701094360', 'PartyB': 827142, 'PhoneNumber': '254701094360', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-24000', 'TransactionDesc': 'Some payment'}
2024-09-09 19:01:52,523 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:01:53,375 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-09 19:01:53,382 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e168871717', 'CheckoutRequestID': 'ws_CO_09092024220153046701094360', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 19:02:15,825 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:02:15,926 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:02:15,927 - INFO - {'updated': 'initiated stk query for ws_CO_09092024220153046701094360 827142 '}
2024-09-09 19:02:16,001 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:02:32,568 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:02:32,570 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer VWuAxwHf430d04GwO4S1Zcu9UpVc'}"}
2024-09-09 19:02:32,571 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTkwMjE2', 'Timestamp': '20240909190216', 'CheckoutRequestID': 'ws_CO_09092024220153046701094360'}"}
2024-09-09 19:02:32,577 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:02:35,265 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-09 19:02:35,266 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e168871717', 'CheckoutRequestID': 'ws_CO_09092024220153046701094360', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024220153046701094360 827142"}
2024-09-09 19:02:35,387 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 19:02:35,597 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 19:02:35,598 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 19:02:36,121 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 19:02:42,604 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee594498811', 'CheckoutRequestID': 'ws_CO_09092024220235144701094360', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-09 19:02:42,605 - INFO - {'updated_data': 'callback data began'}
2024-09-09 19:02:42,605 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee594498811', 'CheckoutRequestID': 'ws_CO_09092024220235144701094360', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-09 19:02:42,787 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 19:02:43,308 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 19:02:43,310 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 19:02:43,553 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 19:03:41,923 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169598273', 'CheckoutRequestID': 'ws_CO_09092024220318629717374087', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3562.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9420HE42'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909220331}, {'Name': 'PhoneNumber', 'Value': 254717374087}]}}}}"}
2024-09-09 19:03:41,924 - INFO - {'updated_data': 'callback data began'}
2024-09-09 19:03:41,924 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169598273', 'CheckoutRequestID': 'ws_CO_09092024220318629717374087', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3562.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9420HE42'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909220331}, {'Name': 'PhoneNumber', 'Value': 254717374087}]}}}}}
2024-09-09 19:03:42,081 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 19:03:42,605 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 19:03:42,606 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 19:03:42,826 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 19:18:40,718 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:18:40,874 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:18:40,875 - INFO - {'updated': 'initiated stk query for ws_CO_09092024221829593720477001 899885 '}
2024-09-09 19:18:40,955 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:18:41,593 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:18:41,595 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 1GeEhzvQNQJ81WplpqACshityNr6'}"}
2024-09-09 19:18:41,596 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTkxODQw', 'Timestamp': '20240909191840', 'CheckoutRequestID': 'ws_CO_09092024221829593720477001'}"}
2024-09-09 19:18:41,597 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:18:42,270 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-09 19:18:42,270 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169622563', 'CheckoutRequestID': 'ws_CO_09092024221829593720477001', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024221829593720477001 899885"}
2024-09-09 19:18:42,381 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 19:18:42,582 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 19:18:42,584 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 19:18:42,817 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 19:19:20,296 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:19:20,480 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:19:20,481 - INFO - there is a test coming
2024-09-09 19:19:20,491 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 19:19:20,538 - INFO - {'updated_data': 'the data is now as 254726994619'}
2024-09-09 19:19:20,538 - INFO - the data is now as 254726994619
2024-09-09 19:19:20,556 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 19:19:20,556 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 19:19:20,558 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:19:22,564 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:19:22,566 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer TKMtFslG21eAQMvPMHWYSGKGHLRS'}"}
2024-09-09 19:19:22,566 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTkxOTIy', 'Timestamp': '20240909191922', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254726994619', 'PartyB': 827142, 'PhoneNumber': '254726994619', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-156895', 'TransactionDesc': 'Some payment'}
2024-09-09 19:19:22,568 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:19:23,419 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-09 19:19:23,425 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169138302', 'CheckoutRequestID': 'ws_CO_09092024221923188726994619', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 19:19:34,401 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:19:34,648 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:19:34,649 - INFO - {'updated': 'initiated stk query for ws_CO_09092024221923188726994619 827142 '}
2024-09-09 19:19:34,732 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:19:35,303 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:19:35,305 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer sAHVO6DGGx8cmb6FyvlOl4GmGqy0'}"}
2024-09-09 19:19:35,305 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTkxOTM0', 'Timestamp': '20240909191934', 'CheckoutRequestID': 'ws_CO_09092024221923188726994619'}"}
2024-09-09 19:19:35,307 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:19:35,937 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-09 19:19:35,937 - INFO - {'updated': "Received response {'requestId': 'ws_CO_09092024221923188726994619', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_09092024221923188726994619 827142"}
2024-09-09 19:19:35,940 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-09 19:19:44,229 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:19:44,471 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:19:44,471 - INFO - {'updated': 'initiated stk query for ws_CO_09092024221923188726994619 827142 '}
2024-09-09 19:19:44,534 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:19:45,233 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:19:45,235 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ZKKWZxXet7Yq6GDvyianoF5TNNc2'}"}
2024-09-09 19:19:45,235 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTkxOTQ0', 'Timestamp': '20240909191944', 'CheckoutRequestID': 'ws_CO_09092024221923188726994619'}"}
2024-09-09 19:19:45,236 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:19:45,850 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-09 19:19:45,851 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169138302', 'CheckoutRequestID': 'ws_CO_09092024221923188726994619', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024221923188726994619 827142"}
2024-09-09 19:19:45,970 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 19:19:46,480 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 19:19:46,482 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 19:19:46,697 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 19:19:51,822 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:19:51,962 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:19:51,963 - INFO - there is a test coming
2024-09-09 19:19:51,963 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 19:19:52,005 - INFO - {'updated_data': 'the data is now as 254717821259'}
2024-09-09 19:19:52,005 - INFO - the data is now as 254717821259
2024-09-09 19:19:52,023 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 19:19:52,023 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 19:19:52,024 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:19:52,594 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:19:52,596 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer GPFYlkXO0aoGefWwfgU2BOtjIZRz'}"}
2024-09-09 19:19:52,596 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTkxOTUy', 'Timestamp': '20240909191952', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254717821259', 'PartyB': 827142, 'PhoneNumber': '254717821259', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-15636', 'TransactionDesc': 'Some payment'}
2024-09-09 19:19:52,597 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:19:53,338 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-09 19:19:53,344 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e168902221', 'CheckoutRequestID': 'ws_CO_09092024221953116717821259', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 19:20:01,251 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e168902221', 'CheckoutRequestID': 'ws_CO_09092024221953116717821259', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI93220VE9'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909222000}, {'Name': 'PhoneNumber', 'Value': 254717821259}]}}}}"}
2024-09-09 19:20:01,251 - INFO - {'updated_data': 'callback data began'}
2024-09-09 19:20:01,252 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e168902221', 'CheckoutRequestID': 'ws_CO_09092024221953116717821259', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI93220VE9'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909222000}, {'Name': 'PhoneNumber', 'Value': 254717821259}]}}}}}
2024-09-09 19:20:01,423 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 19:20:01,967 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 19:20:01,969 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 19:20:02,509 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 19:20:16,195 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169624864', 'CheckoutRequestID': 'ws_CO_09092024221958247792417136', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI93221QR5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909222015}, {'Name': 'PhoneNumber', 'Value': 254792417136}]}}}}"}
2024-09-09 19:20:16,195 - INFO - {'updated_data': 'callback data began'}
2024-09-09 19:20:16,195 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169624864', 'CheckoutRequestID': 'ws_CO_09092024221958247792417136', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI93221QR5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909222015}, {'Name': 'PhoneNumber', 'Value': 254792417136}]}}}}}
2024-09-09 19:20:16,364 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 19:20:16,854 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 19:20:16,856 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 19:20:17,094 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 19:20:21,422 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:20:21,547 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:20:21,547 - INFO - {'updated': 'initiated stk query for ws_CO_09092024221958247792417136 827142 '}
2024-09-09 19:20:21,619 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:20:22,275 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:20:22,277 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer N4EzCwkmTtliI7GZRBKTWDhI8vS5'}"}
2024-09-09 19:20:22,278 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTkyMDIx', 'Timestamp': '20240909192021', 'CheckoutRequestID': 'ws_CO_09092024221958247792417136'}"}
2024-09-09 19:20:22,280 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:20:22,929 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-09 19:20:22,930 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169624864', 'CheckoutRequestID': 'ws_CO_09092024221958247792417136', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024221958247792417136 827142"}
2024-09-09 19:20:23,052 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 19:20:23,284 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 19:20:23,285 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 19:20:23,820 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 19:20:34,394 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:20:34,410 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-09 19:20:34,411 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-09 19:20:58,985 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:20:59,124 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:20:59,125 - INFO - there is a test coming
2024-09-09 19:20:59,125 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 19:20:59,173 - INFO - {'updated_data': 'the data is now as 254110095544'}
2024-09-09 19:20:59,174 - INFO - the data is now as 254110095544
2024-09-09 19:20:59,196 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 19:20:59,196 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 19:20:59,197 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:20:59,895 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:20:59,897 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer XkHVpG1KhvgVGvkwt1OpPhmtXvkH'}"}
2024-09-09 19:20:59,897 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTkyMDU5', 'Timestamp': '20240909192059', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '4769', 'PartyA': '254110095544', 'PartyB': 827142, 'PhoneNumber': '254110095544', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '201-788', 'TransactionDesc': 'Some payment'}
2024-09-09 19:20:59,899 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:21:00,770 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 19:21:00,777 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074815769', 'CheckoutRequestID': 'ws_CO_09092024222100442110095544', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 19:21:16,557 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b9142758505613756', 'CheckoutRequestID': 'ws_CO_09092024222059557710323690', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI96224PGC'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909222115}, {'Name': 'PhoneNumber', 'Value': 254710323690}]}}}}"}
2024-09-09 19:21:16,557 - INFO - {'updated_data': 'callback data began'}
2024-09-09 19:21:16,557 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b9142758505613756', 'CheckoutRequestID': 'ws_CO_09092024222059557710323690', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI96224PGC'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909222115}, {'Name': 'PhoneNumber', 'Value': 254710323690}]}}}}}
2024-09-09 19:21:16,720 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 19:21:16,963 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 19:21:16,964 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 19:21:17,189 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 19:22:02,093 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc14649189', 'CheckoutRequestID': 'ws_CO_09092024222151081727984814', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI94226TDC'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909222201}, {'Name': 'PhoneNumber', 'Value': 254727984814}]}}}}"}
2024-09-09 19:22:02,094 - INFO - {'updated_data': 'callback data began'}
2024-09-09 19:22:02,094 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc14649189', 'CheckoutRequestID': 'ws_CO_09092024222151081727984814', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI94226TDC'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909222201}, {'Name': 'PhoneNumber', 'Value': 254727984814}]}}}}}
2024-09-09 19:22:02,265 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 19:22:02,337 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:22:02,470 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:22:02,471 - INFO - {'updated': 'initiated stk query for ws_CO_09092024222151081727984814 899885 '}
2024-09-09 19:22:02,540 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:22:02,769 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 19:22:02,770 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 19:22:03,109 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:22:03,112 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer toRUuzgWsJG7xT6lLeH02Deb0OlC'}"}
2024-09-09 19:22:03,112 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTkyMjAy', 'Timestamp': '20240909192202', 'CheckoutRequestID': 'ws_CO_09092024222151081727984814'}"}
2024-09-09 19:22:03,113 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:22:03,350 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 19:22:03,821 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 19:22:03,822 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc14649189', 'CheckoutRequestID': 'ws_CO_09092024222151081727984814', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024222151081727984814 899885"}
2024-09-09 19:22:03,949 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 19:22:04,149 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 19:22:04,150 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 19:22:04,380 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 19:24:45,670 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:24:45,836 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:24:45,837 - INFO - there is a test coming
2024-09-09 19:24:45,837 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 19:24:45,884 - INFO - {'updated_data': 'the data is now as 254740829828'}
2024-09-09 19:24:45,884 - INFO - the data is now as 254740829828
2024-09-09 19:24:45,902 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 19:24:45,902 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 19:24:45,903 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:24:46,748 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:24:46,750 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer nKCbmMdvggAOobYO6eK1ci67Ty81'}"}
2024-09-09 19:24:46,751 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTkyNDQ2', 'Timestamp': '20240909192446', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '200', 'PartyA': '254740829828', 'PartyB': 827142, 'PhoneNumber': '254740829828', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-27516', 'TransactionDesc': 'Some payment'}
2024-09-09 19:24:46,752 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:24:47,572 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-09 19:24:47,579 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169630899', 'CheckoutRequestID': 'ws_CO_09092024222447294740829828', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 19:29:24,653 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db14680210', 'CheckoutRequestID': 'ws_CO_09092024222908578798051372', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}"}
2024-09-09 19:29:24,653 - INFO - {'updated_data': 'callback data began'}
2024-09-09 19:29:24,653 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db14680210', 'CheckoutRequestID': 'ws_CO_09092024222908578798051372', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}}
2024-09-09 19:29:24,800 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 19:29:25,012 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 19:29:25,013 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 19:29:25,235 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 19:34:42,612 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074833511', 'CheckoutRequestID': 'ws_CO_09092024223434811798051372', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9823710K'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909223441}, {'Name': 'PhoneNumber', 'Value': 254798051372}]}}}}"}
2024-09-09 19:34:42,612 - INFO - {'updated_data': 'callback data began'}
2024-09-09 19:34:42,612 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074833511', 'CheckoutRequestID': 'ws_CO_09092024223434811798051372', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9823710K'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909223441}, {'Name': 'PhoneNumber', 'Value': 254798051372}]}}}}}
2024-09-09 19:34:42,777 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 19:34:43,165 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 19:34:43,166 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 19:34:43,700 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 19:46:40,005 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:46:40,168 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:46:40,169 - INFO - {'updated': 'initiated stk query for ws_CO_09092024224616625713633177 899885 '}
2024-09-09 19:46:40,251 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:46:40,838 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:46:40,840 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer AupKPATkxEymkqkrDKLkRct4WGTo'}"}
2024-09-09 19:46:40,841 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTk0NjQw', 'Timestamp': '20240909194640', 'CheckoutRequestID': 'ws_CO_09092024224616625713633177'}"}
2024-09-09 19:46:40,842 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:46:41,587 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 19:46:41,588 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc14719631', 'CheckoutRequestID': 'ws_CO_09092024224616625713633177', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024224616625713633177 899885"}
2024-09-09 19:46:41,726 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 19:46:41,955 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 19:46:41,957 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 19:46:42,204 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 19:47:14,324 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:47:14,538 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:47:14,539 - INFO - {'updated': 'initiated stk query for ws_CO_09092024224702329700909628 827142 '}
2024-09-09 19:47:14,604 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:47:15,269 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:47:15,271 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer gm5UcLFz9eUFwHbkC3wb2mTFOqJe'}"}
2024-09-09 19:47:15,272 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTk0NzE0', 'Timestamp': '20240909194714', 'CheckoutRequestID': 'ws_CO_09092024224702329700909628'}"}
2024-09-09 19:47:15,277 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:47:15,912 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-09 19:47:15,912 - INFO - {'updated': "Received response {'requestId': 'ws_CO_09092024224702329700909628', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_09092024224702329700909628 827142"}
2024-09-09 19:47:15,915 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-09 19:47:23,874 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:47:24,004 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:47:24,004 - INFO - {'updated': 'initiated stk query for ws_CO_09092024224702329700909628 827142 '}
2024-09-09 19:47:24,098 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:47:24,866 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:47:24,868 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 7dwilRbiOFy8RVGQvG4Zq1fROpRm'}"}
2024-09-09 19:47:24,868 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTk0NzI0', 'Timestamp': '20240909194724', 'CheckoutRequestID': 'ws_CO_09092024224702329700909628'}"}
2024-09-09 19:47:24,869 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:47:25,561 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 384
2024-09-09 19:47:25,562 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b9142758505688405', 'CheckoutRequestID': 'ws_CO_09092024224702329700909628', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024224702329700909628 827142"}
2024-09-09 19:47:26,601 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 19:47:26,798 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 19:47:26,800 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 19:47:27,026 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 19:48:21,330 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:48:21,451 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:48:21,451 - INFO - there is a test coming
2024-09-09 19:48:21,451 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 19:48:21,496 - INFO - {'updated_data': 'the data is now as 254722482830'}
2024-09-09 19:48:21,496 - INFO - the data is now as 254722482830
2024-09-09 19:48:21,513 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 19:48:21,513 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 19:48:21,522 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:48:22,101 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:48:22,103 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer bpo0e27rRomKGmM8c13J5GGeSH1d'}"}
2024-09-09 19:48:22,103 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTk0ODIy', 'Timestamp': '20240909194822', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254722482830', 'PartyB': 899885, 'PhoneNumber': '254722482830', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053368', 'TransactionDesc': 'Some payment'}
2024-09-09 19:48:22,105 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:48:22,835 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-09 19:48:22,841 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e168938176', 'CheckoutRequestID': 'ws_CO_09092024224822612722482830', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 20:10:14,201 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074874355', 'CheckoutRequestID': 'ws_CO_09092024231004445723878793', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}"}
2024-09-09 20:10:14,201 - INFO - {'updated_data': 'callback data began'}
2024-09-09 20:10:14,201 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074874355', 'CheckoutRequestID': 'ws_CO_09092024231004445723878793', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}}
2024-09-09 20:10:14,369 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 20:10:14,870 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 20:10:14,873 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 20:10:15,098 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 20:14:33,162 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 20:14:33,290 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 20:14:33,291 - INFO - {'updated': 'initiated stk query for ws_CO_09092024231421814723218088 899885 '}
2024-09-09 20:14:33,346 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 20:14:34,031 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 20:14:34,033 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer lPDKYNNVIclyW1kZ2id7RYIygagI'}"}
2024-09-09 20:14:34,033 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MjAxNDMz', 'Timestamp': '20240909201433', 'CheckoutRequestID': 'ws_CO_09092024231421814723218088'}"}
2024-09-09 20:14:34,034 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 20:14:34,757 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-09 20:14:34,757 - INFO - {'updated': "Received response {'requestId': 'ws_CO_09092024231421814723218088', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_09092024231421814723218088 899885"}
2024-09-09 20:14:34,760 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-09 20:28:55,617 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 20:28:55,783 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 20:28:55,784 - INFO - {'updated': 'initiated stk query for ws_CO_09092024193210996795509679 827142 '}
2024-09-09 20:28:55,842 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 20:28:56,422 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 20:28:56,424 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer CC4LYaDUNprbMYFgdN0hXFB2eqlY'}"}
2024-09-09 20:28:56,425 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MjAyODU1', 'Timestamp': '20240909202855', 'CheckoutRequestID': 'ws_CO_09092024193210996795509679'}"}
2024-09-09 20:28:56,426 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 20:28:57,171 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 389
2024-09-09 20:28:57,172 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169254496', 'CheckoutRequestID': 'ws_CO_09092024193210996795509679', 'ResultCode': '1', 'ResultDesc': 'The balance is insufficient for the transaction.'} for ws_CO_09092024193210996795509679 827142"}
2024-09-09 20:28:57,295 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 20:28:57,712 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 20:28:57,714 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 20:28:57,972 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 20:29:02,717 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc14813094', 'CheckoutRequestID': 'ws_CO_09092024232859941721622839', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-09 20:29:02,718 - INFO - {'updated_data': 'callback data began'}
2024-09-09 20:29:02,718 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc14813094', 'CheckoutRequestID': 'ws_CO_09092024232859941721622839', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-09 20:29:03,089 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 20:29:03,296 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 20:29:03,298 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 20:29:03,832 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 20:30:06,566 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 20:30:06,798 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 20:30:06,799 - INFO - there is a test coming
2024-09-09 20:30:06,799 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 20:30:06,847 - INFO - {'updated_data': 'the data is now as 254721622839'}
2024-09-09 20:30:06,847 - INFO - the data is now as 254721622839
2024-09-09 20:30:06,862 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 20:30:06,863 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 20:30:06,864 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 20:30:07,542 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 20:30:07,545 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer rwbXEIAGQ8smBEUxsH0oe6hRIqah'}"}
2024-09-09 20:30:07,545 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MjAzMDA3', 'Timestamp': '20240909203007', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5426', 'PartyA': '254721622839', 'PartyB': 827142, 'PhoneNumber': '254721622839', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '125-10449', 'TransactionDesc': 'Some payment'}
2024-09-09 20:30:07,546 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 20:30:08,402 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 20:30:08,409 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db14824354', 'CheckoutRequestID': 'ws_CO_09092024233008103721622839', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 20:41:46,237 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792582345', 'CheckoutRequestID': 'ws_CO_09092024234134267728723797', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-09 20:41:46,237 - INFO - {'updated_data': 'callback data began'}
2024-09-09 20:41:46,237 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792582345', 'CheckoutRequestID': 'ws_CO_09092024234134267728723797', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-09 20:41:46,417 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 20:41:47,108 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 20:41:47,109 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 20:41:47,349 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 20:42:31,458 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 20:42:31,618 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 20:42:31,619 - INFO - there is a test coming
2024-09-09 20:42:31,619 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 20:42:31,669 - INFO - {'updated_data': 'the data is now as 254723755443'}
2024-09-09 20:42:31,669 - INFO - the data is now as 254723755443
2024-09-09 20:42:31,701 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 20:42:31,701 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 20:42:31,715 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 20:42:33,726 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 20:42:33,728 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer rzpqZvyblOu8P0GtLn1u9HDEmRmD'}"}
2024-09-09 20:42:33,729 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MjA0MjMz', 'Timestamp': '20240909204233', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2500', 'PartyA': '254723755443', 'PartyB': 899885, 'PhoneNumber': '254723755443', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA001184CP-1725914549445', 'TransactionDesc': 'Some payment'}
2024-09-09 20:42:33,730 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 20:42:34,476 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-09 20:42:34,482 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee594757849', 'CheckoutRequestID': 'ws_CO_09092024234234270723755443', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 20:48:27,532 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc14848100', 'CheckoutRequestID': 'ws_CO_09092024234813814708946448', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9026QVP0'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909234826}, {'Name': 'PhoneNumber', 'Value': 254708946448}]}}}}"}
2024-09-09 20:48:27,532 - INFO - {'updated_data': 'callback data began'}
2024-09-09 20:48:27,532 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc14848100', 'CheckoutRequestID': 'ws_CO_09092024234813814708946448', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9026QVP0'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909234826}, {'Name': 'PhoneNumber', 'Value': 254708946448}]}}}}}
2024-09-09 20:48:27,689 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 20:48:28,078 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 20:48:28,079 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 20:48:28,286 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 20:48:35,728 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 20:48:35,857 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 20:48:35,858 - INFO - {'updated': 'initiated stk query for ws_CO_09092024234813814708946448 899885 '}
2024-09-09 20:48:35,929 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 20:48:36,546 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 20:48:36,548 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 1zXFEZJlVIb4grdBvIjzhEyEy2Zm'}"}
2024-09-09 20:48:36,549 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MjA0ODM1', 'Timestamp': '20240909204835', 'CheckoutRequestID': 'ws_CO_09092024234813814708946448'}"}
2024-09-09 20:48:36,550 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 20:48:37,209 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 20:48:37,210 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc14848100', 'CheckoutRequestID': 'ws_CO_09092024234813814708946448', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024234813814708946448 899885"}
2024-09-09 20:48:37,323 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 20:48:37,812 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 20:48:37,814 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 20:48:38,038 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 20:48:40,926 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 20:48:41,070 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 20:48:41,071 - INFO - {'updated': 'initiated stk query for ws_CO_09092024234813814708946448 899885 '}
2024-09-09 20:48:41,136 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 20:48:41,829 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 20:48:41,831 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Ajy7ZU4cJGPuec1Cb4qHT4eeTSpa'}"}
2024-09-09 20:48:41,832 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MjA0ODQx', 'Timestamp': '20240909204841', 'CheckoutRequestID': 'ws_CO_09092024234813814708946448'}"}
2024-09-09 20:48:41,833 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 20:48:42,476 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 20:48:42,477 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc14848100', 'CheckoutRequestID': 'ws_CO_09092024234813814708946448', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024234813814708946448 899885"}
2024-09-09 20:48:42,605 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 20:48:43,191 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 20:48:43,193 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 20:48:43,721 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 20:52:53,179 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 20:52:53,327 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 20:52:53,328 - INFO - there is a test coming
2024-09-09 20:52:53,328 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 20:52:53,373 - INFO - {'updated_data': 'the data is now as 254706113639'}
2024-09-09 20:52:53,374 - INFO - the data is now as 254706113639
2024-09-09 20:52:53,391 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 20:52:53,391 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 20:52:53,392 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 20:52:53,996 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 20:52:53,998 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer DgM88yJUH8ZpplgZYGmR61Qy9mRe'}"}
2024-09-09 20:52:53,998 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MjA1MjUz', 'Timestamp': '20240909205253', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254706113639', 'PartyB': 827142, 'PhoneNumber': '254706113639', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-20572', 'TransactionDesc': 'Some payment'}
2024-09-09 20:52:54,000 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 20:52:54,769 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-09 20:52:54,788 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b4407899', 'CheckoutRequestID': 'ws_CO_09092024235254534706113639', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 20:53:12,729 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b4407899', 'CheckoutRequestID': 'ws_CO_09092024235254534706113639', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9326VE8H'}, {'Name': 'TransactionDate', 'Value': 20240909235312}, {'Name': 'PhoneNumber', 'Value': 254706113639}]}}}}"}
2024-09-09 20:53:12,730 - INFO - {'updated_data': 'callback data began'}
2024-09-09 20:53:12,731 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b4407899', 'CheckoutRequestID': 'ws_CO_09092024235254534706113639', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9326VE8H'}, {'Name': 'TransactionDate', 'Value': 20240909235312}, {'Name': 'PhoneNumber', 'Value': 254706113639}]}}}}}
2024-09-09 20:53:12,893 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 20:53:13,085 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 20:53:13,087 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 20:53:13,615 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 21:06:41,023 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169730519', 'CheckoutRequestID': 'ws_CO_10092024000631968703314278', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 36140.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA7279L17'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910000640}, {'Name': 'PhoneNumber', 'Value': 254703314278}]}}}}"}
2024-09-09 21:06:41,023 - INFO - {'updated_data': 'callback data began'}
2024-09-09 21:06:41,023 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169730519', 'CheckoutRequestID': 'ws_CO_10092024000631968703314278', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 36140.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA7279L17'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910000640}, {'Name': 'PhoneNumber', 'Value': 254703314278}]}}}}}
2024-09-09 21:06:41,199 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 21:06:41,579 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 21:06:41,580 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 21:06:41,793 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 21:06:43,518 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 21:06:43,660 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 21:06:43,661 - INFO - {'updated': 'initiated stk query for ws_CO_10092024000631968703314278 899885 '}
2024-09-09 21:06:43,727 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 21:06:44,319 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 21:06:44,321 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 8mlZL4ll7UhPOGMnWhvAIfNu7XKB'}"}
2024-09-09 21:06:44,322 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MjEwNjQz', 'Timestamp': '20240909210643', 'CheckoutRequestID': 'ws_CO_10092024000631968703314278'}"}
2024-09-09 21:06:44,323 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 21:06:44,956 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-09 21:06:44,957 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169730519', 'CheckoutRequestID': 'ws_CO_10092024000631968703314278', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024000631968703314278 899885"}
2024-09-09 21:06:45,074 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 21:06:45,293 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 21:06:45,295 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 21:06:45,841 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 21:09:55,990 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 21:09:56,135 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 21:09:56,136 - INFO - there is a test coming
2024-09-09 21:09:56,136 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 21:09:56,180 - INFO - {'updated_data': 'the data is now as 254748712288'}
2024-09-09 21:09:56,180 - INFO - the data is now as 254748712288
2024-09-09 21:09:56,202 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 21:09:56,202 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 21:09:56,203 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 21:09:57,042 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 21:09:57,044 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer hkIJDdrtFJin6KKpl3TS4qVAEQJZ'}"}
2024-09-09 21:09:57,045 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MjEwOTU3', 'Timestamp': '20240909210957', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '489', 'PartyA': '254748712288', 'PartyB': 899885, 'PhoneNumber': '254748712288', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053337', 'TransactionDesc': 'Some payment'}
2024-09-09 21:09:57,046 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 21:09:57,847 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 21:09:57,860 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc14881191', 'CheckoutRequestID': 'ws_CO_10092024000957577748712288', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 21:10:08,830 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 21:10:08,988 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 21:10:08,988 - INFO - {'updated': 'initiated stk query for ws_CO_10092024000957577748712288 899885 '}
2024-09-09 21:10:09,044 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 21:10:09,620 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 21:10:09,622 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 1VnvwL7ggr3vac6f1DYCIGGwB6j5'}"}
2024-09-09 21:10:09,622 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MjExMDA5', 'Timestamp': '20240909211009', 'CheckoutRequestID': 'ws_CO_10092024000957577748712288'}"}
2024-09-09 21:10:09,624 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 21:10:10,281 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 388
2024-09-09 21:10:10,281 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc14881191', 'CheckoutRequestID': 'ws_CO_10092024000957577748712288', 'ResultCode': '1', 'ResultDesc': 'The balance is insufficient for the transaction.'} for ws_CO_10092024000957577748712288 899885"}
2024-09-09 21:10:10,423 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 21:10:10,618 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 21:10:10,619 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 21:10:11,166 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 21:11:43,050 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee594802472', 'CheckoutRequestID': 'ws_CO_10092024001125916701875081', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA127EAL7'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910001142}, {'Name': 'PhoneNumber', 'Value': 254701875081}]}}}}"}
2024-09-09 21:11:43,050 - INFO - {'updated_data': 'callback data began'}
2024-09-09 21:11:43,050 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee594802472', 'CheckoutRequestID': 'ws_CO_10092024001125916701875081', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA127EAL7'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910001142}, {'Name': 'PhoneNumber', 'Value': 254701875081}]}}}}}
2024-09-09 21:11:43,211 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 21:11:43,609 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 21:11:43,611 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 21:11:44,134 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 21:19:36,067 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 21:19:36,237 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 21:19:36,238 - INFO - {'updated': 'initiated stk query for ws_CO_10092024001923852723801238 899885 '}
2024-09-09 21:19:36,341 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 21:19:36,927 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 21:19:36,929 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer CVuvk7qNqO6wNDZo6I2zWytYVycI'}"}
2024-09-09 21:19:36,930 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MjExOTM2', 'Timestamp': '20240909211936', 'CheckoutRequestID': 'ws_CO_10092024001923852723801238'}"}
2024-09-09 21:19:36,931 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 21:19:37,584 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 21:19:37,584 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074928407', 'CheckoutRequestID': 'ws_CO_10092024001923852723801238', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024001923852723801238 899885"}
2024-09-09 21:19:37,701 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 21:19:38,196 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 21:19:38,197 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 21:19:38,738 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 21:21:30,146 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 21:21:30,268 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 21:21:30,269 - INFO - there is a test coming
2024-09-09 21:21:30,269 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 21:21:30,324 - INFO - {'updated_data': 'the data is now as 254723801238'}
2024-09-09 21:21:30,325 - INFO - the data is now as 254723801238
2024-09-09 21:21:30,344 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 21:21:30,345 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 21:21:30,346 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 21:21:31,188 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 21:21:31,190 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer PhIUbiGA3NHNRTwuY1iT1fAriyMl'}"}
2024-09-09 21:21:31,190 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MjEyMTMx', 'Timestamp': '20240909212131', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '50000', 'PartyA': '254723801238', 'PartyB': 899885, 'PhoneNumber': '254723801238', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053338', 'TransactionDesc': 'Some payment'}
2024-09-09 21:21:31,192 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 21:21:31,949 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-09 21:21:31,963 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169018320', 'CheckoutRequestID': 'ws_CO_10092024002131754723801238', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 21:33:34,493 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 21:33:34,646 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 21:33:34,646 - INFO - there is a test coming
2024-09-09 21:33:34,647 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 21:33:34,690 - INFO - {'updated_data': 'the data is now as 254703759125'}
2024-09-09 21:33:34,691 - INFO - the data is now as 254703759125
2024-09-09 21:33:34,718 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 21:33:34,719 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 21:33:34,720 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 21:33:35,502 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 21:33:35,504 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer DrXtci3fi50OPHhfXU7xDrrrfYST'}"}
2024-09-09 21:33:35,504 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MjEzMzM1', 'Timestamp': '20240909213335', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '300', 'PartyA': '254703759125', 'PartyB': 899885, 'PhoneNumber': '254703759125', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053375', 'TransactionDesc': 'Some payment'}
2024-09-09 21:33:35,505 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 21:33:36,303 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 341
2024-09-09 21:33:36,310 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b9142758505880009', 'CheckoutRequestID': 'ws_CO_10092024003336055703759125', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 21:34:46,733 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792619329', 'CheckoutRequestID': 'ws_CO_10092024003433895700418091', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}"}
2024-09-09 21:34:46,734 - INFO - {'updated_data': 'callback data began'}
2024-09-09 21:34:46,734 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792619329', 'CheckoutRequestID': 'ws_CO_10092024003433895700418091', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}}
2024-09-09 21:34:46,894 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 21:34:47,081 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 21:34:47,083 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 21:34:47,599 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 21:34:55,064 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 21:34:55,212 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 21:34:55,212 - INFO - there is a test coming
2024-09-09 21:34:55,212 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 21:34:55,266 - INFO - {'updated_data': 'the data is now as 254700418091'}
2024-09-09 21:34:55,267 - INFO - the data is now as 254700418091
2024-09-09 21:34:55,287 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 21:34:55,287 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 21:34:55,289 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 21:34:56,139 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 21:34:56,142 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer FJgFJKVitQEsRjYeOAGwACPeeDlf'}"}
2024-09-09 21:34:56,142 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MjEzNDU2', 'Timestamp': '20240909213456', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1400', 'PartyA': '254700418091', 'PartyB': 899885, 'PhoneNumber': '254700418091', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053340', 'TransactionDesc': 'Some payment'}
2024-09-09 21:34:56,143 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 21:34:57,062 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-09 21:34:57,068 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169749655', 'CheckoutRequestID': 'ws_CO_10092024003456723700418091', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 21:35:08,273 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 21:35:08,431 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 21:35:08,432 - INFO - {'updated': 'initiated stk query for ws_CO_10092024003456723700418091 899885 '}
2024-09-09 21:35:08,500 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 21:35:09,090 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 21:35:09,092 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer MyM5v8qgHPhDi0GwwfcpD8gjFfq1'}"}
2024-09-09 21:35:09,093 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MjEzNTA4', 'Timestamp': '20240909213508', 'CheckoutRequestID': 'ws_CO_10092024003456723700418091'}"}
2024-09-09 21:35:09,094 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 21:35:09,734 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-09 21:35:09,734 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024003456723700418091', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024003456723700418091 899885"}
2024-09-09 21:35:09,737 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-09 21:35:18,421 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169749655', 'CheckoutRequestID': 'ws_CO_10092024003456723700418091', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}"}
2024-09-09 21:35:18,421 - INFO - {'updated_data': 'callback data began'}
2024-09-09 21:35:18,421 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169749655', 'CheckoutRequestID': 'ws_CO_10092024003456723700418091', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}}
2024-09-09 21:35:18,598 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 21:35:19,099 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 21:35:19,101 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 21:35:19,334 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 22:39:11,554 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee594900707', 'CheckoutRequestID': 'ws_CO_10092024013902196710512487', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA728R59V'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910013910}, {'Name': 'PhoneNumber', 'Value': 254710512487}]}}}}"}
2024-09-09 22:39:11,555 - INFO - {'updated_data': 'callback data began'}
2024-09-09 22:39:11,556 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee594900707', 'CheckoutRequestID': 'ws_CO_10092024013902196710512487', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA728R59V'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910013910}, {'Name': 'PhoneNumber', 'Value': 254710512487}]}}}}}
2024-09-09 22:39:11,718 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 22:39:12,415 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 22:39:12,417 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 22:39:12,651 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 22:47:35,199 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b4540964', 'CheckoutRequestID': 'ws_CO_10092024014731290728091441', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-09 22:47:35,200 - INFO - {'updated_data': 'callback data began'}
2024-09-09 22:47:35,200 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b4540964', 'CheckoutRequestID': 'ws_CO_10092024014731290728091441', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-09 22:47:35,355 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 22:47:36,078 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 22:47:36,079 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 22:47:36,608 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 22:47:42,395 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 22:47:42,568 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 22:47:42,568 - INFO - {'updated': 'initiated stk query for ws_CO_10092024014731290728091441 899885 '}
2024-09-09 22:47:42,631 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 22:47:43,260 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 22:47:43,262 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer COgz7dzEvZdhk6vPtofcmn2toT8G'}"}
2024-09-09 22:47:43,262 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MjI0NzQy', 'Timestamp': '20240909224742', 'CheckoutRequestID': 'ws_CO_10092024014731290728091441'}"}
2024-09-09 22:47:43,264 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 22:47:43,886 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 375
2024-09-09 22:47:43,887 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b4540964', 'CheckoutRequestID': 'ws_CO_10092024014731290728091441', 'ResultCode': '1037', 'ResultDesc': 'DS timeout user cannot be reached'} for ws_CO_10092024014731290728091441 899885"}
2024-09-09 22:47:44,026 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 22:47:44,524 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 22:47:44,525 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 22:47:44,772 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 22:48:11,818 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 22:48:11,963 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 22:48:11,964 - INFO - there is a test coming
2024-09-09 22:48:11,964 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 22:48:12,012 - INFO - {'updated_data': 'the data is now as 254728091441'}
2024-09-09 22:48:12,013 - INFO - the data is now as 254728091441
2024-09-09 22:48:12,031 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 22:48:12,031 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 22:48:12,032 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 22:48:12,598 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 22:48:12,600 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer LbbOF3nG5avjytiY0JcA8M34ndRO'}"}
2024-09-09 22:48:12,600 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MjI0ODEy', 'Timestamp': '20240909224812', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254728091441', 'PartyB': 899885, 'PhoneNumber': '254728091441', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053376', 'TransactionDesc': 'Some payment'}
2024-09-09 22:48:12,606 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 22:48:13,372 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-09 22:48:13,380 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b4541523', 'CheckoutRequestID': 'ws_CO_10092024014813154728091441', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 22:48:22,993 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b4541523', 'CheckoutRequestID': 'ws_CO_10092024014813154728091441', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA528UH6H'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910014822}, {'Name': 'PhoneNumber', 'Value': 254728091441}]}}}}"}
2024-09-09 22:48:22,993 - INFO - {'updated_data': 'callback data began'}
2024-09-09 22:48:22,993 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b4541523', 'CheckoutRequestID': 'ws_CO_10092024014813154728091441', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA528UH6H'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910014822}, {'Name': 'PhoneNumber', 'Value': 254728091441}]}}}}}
2024-09-09 22:48:23,154 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 22:48:23,650 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 22:48:23,651 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 22:48:24,204 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 22:48:24,248 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 22:48:24,392 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 22:48:24,393 - INFO - {'updated': 'initiated stk query for ws_CO_10092024014813154728091441 899885 '}
2024-09-09 22:48:24,446 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 22:48:25,117 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 22:48:25,118 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 3hXJsvDbpcqllQV7DVFAfG2Ia6xq'}"}
2024-09-09 22:48:25,119 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MjI0ODI0', 'Timestamp': '20240909224824', 'CheckoutRequestID': 'ws_CO_10092024014813154728091441'}"}
2024-09-09 22:48:25,120 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 22:48:25,759 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-09 22:48:25,760 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b4541523', 'CheckoutRequestID': 'ws_CO_10092024014813154728091441', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024014813154728091441 899885"}
2024-09-09 22:48:25,878 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 22:48:26,369 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 22:48:26,370 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 22:48:26,896 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 00:11:29,957 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 00:11:30,135 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 00:11:30,136 - INFO - there is a test coming
2024-09-10 00:11:30,136 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 00:11:30,355 - INFO - {'updated_data': 'the data is now as 254798943951'}
2024-09-10 00:11:30,355 - INFO - the data is now as 254798943951
2024-09-10 00:11:30,467 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 00:11:30,467 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 00:11:30,469 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 00:11:31,435 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 00:11:31,437 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer W8nnPgNlqZ5cerj9jtStifGA9srb'}"}
2024-09-10 00:11:31,437 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDAxMTMx', 'Timestamp': '20240910001131', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254798943951', 'PartyB': 899885, 'PhoneNumber': '254798943951', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053377', 'TransactionDesc': 'Some payment'}
2024-09-10 00:11:31,439 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 00:11:32,229 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 00:11:32,235 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b515059332', 'CheckoutRequestID': 'ws_CO_10092024031132021798943951', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 00:11:39,160 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b515059332', 'CheckoutRequestID': 'ws_CO_10092024031132021798943951', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA129KQ7R'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910031138}, {'Name': 'PhoneNumber', 'Value': 254798943951}]}}}}"}
2024-09-10 00:11:39,162 - INFO - {'updated_data': 'callback data began'}
2024-09-10 00:11:39,162 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b515059332', 'CheckoutRequestID': 'ws_CO_10092024031132021798943951', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA129KQ7R'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910031138}, {'Name': 'PhoneNumber', 'Value': 254798943951}]}}}}}
2024-09-10 00:11:39,321 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 00:11:39,694 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 00:11:39,696 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 00:11:40,217 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 02:17:07,189 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 02:17:07,331 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 02:17:07,331 - INFO - {'updated': 'initiated stk query for ws_CO_10092024051646006723547510 899885 '}
2024-09-10 02:17:07,389 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 02:17:07,980 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 02:17:07,982 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer d9fOqynCsIdAcUMmyo2XcANkMcAF'}"}
2024-09-10 02:17:07,983 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDIxNzA3', 'Timestamp': '20240910021707', 'CheckoutRequestID': 'ws_CO_10092024051646006723547510'}"}
2024-09-10 02:17:07,984 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 02:17:08,720 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 02:17:08,720 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee595062468', 'CheckoutRequestID': 'ws_CO_10092024051646006723547510', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024051646006723547510 899885"}
2024-09-10 02:17:08,834 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 02:17:09,016 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 02:17:09,018 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 02:17:09,535 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 02:45:42,929 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 02:45:43,090 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 02:45:43,091 - INFO - there is a test coming
2024-09-10 02:45:43,091 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 02:45:43,154 - INFO - {'updated_data': 'the data is now as 254724098969'}
2024-09-10 02:45:43,154 - INFO - the data is now as 254724098969
2024-09-10 02:45:43,177 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 02:45:43,177 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 02:45:43,179 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 02:45:43,981 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 02:45:43,983 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer XA6QmBu1QYJSaDRfqmPpsdHk548x'}"}
2024-09-10 02:45:43,983 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDI0NTQz', 'Timestamp': '20240910024543', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '119982', 'PartyA': '254724098969', 'PartyB': 827142, 'PhoneNumber': '254724098969', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-126735', 'TransactionDesc': 'Some payment'}
2024-09-10 02:45:43,985 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 02:45:44,849 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 02:45:44,855 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169408091', 'CheckoutRequestID': 'ws_CO_10092024054544613724098969', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 02:53:50,909 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585051140059', 'CheckoutRequestID': 'ws_CO_10092024055339417722338001', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 15500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA92BE1LF'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910055350}, {'Name': 'PhoneNumber', 'Value': 254722338001}]}}}}"}
2024-09-10 02:53:50,909 - INFO - {'updated_data': 'callback data began'}
2024-09-10 02:53:50,909 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585051140059', 'CheckoutRequestID': 'ws_CO_10092024055339417722338001', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 15500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA92BE1LF'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910055350}, {'Name': 'PhoneNumber', 'Value': 254722338001}]}}}}}
2024-09-10 02:53:51,072 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 02:53:51,435 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 02:53:51,437 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 02:53:51,980 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 02:59:33,415 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 02:59:33,555 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 02:59:33,556 - INFO - {'updated': 'initiated stk query for ws_CO_10092024055922408794194907 827142 '}
2024-09-10 02:59:33,613 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 02:59:34,275 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 02:59:34,277 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Kz25Q1NKLvgz0XAPA77J64AVuJf0'}"}
2024-09-10 02:59:34,278 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDI1OTMz', 'Timestamp': '20240910025933', 'CheckoutRequestID': 'ws_CO_10092024055922408794194907'}"}
2024-09-10 02:59:34,279 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 02:59:34,942 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 367
2024-09-10 02:59:34,943 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b4731867', 'CheckoutRequestID': 'ws_CO_10092024055922408794194907', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_10092024055922408794194907 827142"}
2024-09-10 02:59:35,062 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 02:59:35,253 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 02:59:35,254 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 02:59:35,462 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 02:59:48,313 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 02:59:48,451 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 02:59:48,452 - INFO - there is a test coming
2024-09-10 02:59:48,452 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 02:59:48,492 - INFO - {'updated_data': 'the data is now as 254794194907'}
2024-09-10 02:59:48,492 - INFO - the data is now as 254794194907
2024-09-10 02:59:48,508 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 02:59:48,508 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 02:59:48,509 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 02:59:49,069 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 02:59:49,071 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer W8vGXGWGsorZ6Ci0EcAFkSPhHETR'}"}
2024-09-10 02:59:49,071 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDI1OTQ5', 'Timestamp': '20240910025949', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254794194907', 'PartyB': 827142, 'PhoneNumber': '254794194907', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-2492', 'TransactionDesc': 'Some payment'}
2024-09-10 02:59:49,072 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 02:59:49,904 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 02:59:49,915 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b515184564', 'CheckoutRequestID': 'ws_CO_10092024055949712794194907', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 03:09:35,937 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 03:09:36,078 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 03:09:36,079 - INFO - there is a test coming
2024-09-10 03:09:36,079 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 03:09:36,125 - INFO - {'updated_data': 'the data is now as 254700842886'}
2024-09-10 03:09:36,125 - INFO - the data is now as 254700842886
2024-09-10 03:09:36,143 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 03:09:36,143 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 03:09:36,144 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 03:09:36,911 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 03:09:36,913 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer tbV3pIh3uH1cI93PsFGxygfzX3Vi'}"}
2024-09-10 03:09:36,913 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDMwOTM2', 'Timestamp': '20240910030936', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254700842886', 'PartyB': 899885, 'PhoneNumber': '254700842886', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053346', 'TransactionDesc': 'Some payment'}
2024-09-10 03:09:36,915 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 03:09:37,663 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 03:09:37,669 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169420660', 'CheckoutRequestID': 'ws_CO_10092024060937442700842886', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 03:17:33,230 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169189202', 'CheckoutRequestID': 'ws_CO_10092024061722926722654337', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA92C6KZ9'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910061732}, {'Name': 'PhoneNumber', 'Value': 254722654337}]}}}}"}
2024-09-10 03:17:33,232 - INFO - {'updated_data': 'callback data began'}
2024-09-10 03:17:33,232 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169189202', 'CheckoutRequestID': 'ws_CO_10092024061722926722654337', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA92C6KZ9'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910061732}, {'Name': 'PhoneNumber', 'Value': 254722654337}]}}}}}
2024-09-10 03:17:33,392 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 03:17:34,066 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 03:17:34,067 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 03:17:34,289 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 03:18:14,251 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 03:18:14,385 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 03:18:14,386 - INFO - there is a test coming
2024-09-10 03:18:14,386 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 03:18:14,431 - INFO - {'updated_data': 'the data is now as 254733427108'}
2024-09-10 03:18:14,431 - INFO - the data is now as 254733427108
2024-09-10 03:18:14,455 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 03:18:14,455 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 03:18:14,456 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 03:18:15,143 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 03:18:15,146 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Jjlf1GGt8rPpSxMYuwBZajIJc1vq'}"}
2024-09-10 03:18:15,150 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDMxODE1', 'Timestamp': '20240910031815', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254733427108', 'PartyB': 827142, 'PhoneNumber': '254733427108', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-39048', 'TransactionDesc': 'Some payment'}
2024-09-10 03:18:15,153 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 03:18:15,869 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 03:18:15,883 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169189544', 'CheckoutRequestID': 'ws_CO_10092024061815664733427108', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 03:18:17,460 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169189544', 'CheckoutRequestID': 'ws_CO_10092024061815664733427108', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}"}
2024-09-10 03:18:17,460 - INFO - {'updated_data': 'callback data began'}
2024-09-10 03:18:17,460 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169189544', 'CheckoutRequestID': 'ws_CO_10092024061815664733427108', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}}
2024-09-10 03:18:17,637 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 03:18:17,818 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 03:18:17,819 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 03:18:18,336 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 03:21:44,022 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 03:21:44,203 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 03:21:44,205 - INFO - {'updated': 'initiated stk query for ws_CO_10092024062121995729841069 899885 '}
2024-09-10 03:21:44,266 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 03:21:44,855 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 03:21:44,858 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer kr9xjXG4fyllIgbUDxTcl9IVjH0g'}"}
2024-09-10 03:21:44,858 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDMyMTQ0', 'Timestamp': '20240910032144', 'CheckoutRequestID': 'ws_CO_10092024062121995729841069'}"}
2024-09-10 03:21:44,860 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 03:21:45,522 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 03:21:45,522 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc15203908', 'CheckoutRequestID': 'ws_CO_10092024062121995729841069', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024062121995729841069 899885"}
2024-09-10 03:21:45,663 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 03:21:45,857 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 03:21:45,858 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 03:21:46,071 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 03:25:56,163 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 03:25:56,302 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 03:25:56,303 - INFO - {'updated': 'initiated stk query for ws_CO_10092024062544914729933451 899885 '}
2024-09-10 03:25:56,375 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 03:25:57,082 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 03:25:57,085 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer nSOEGmDCAPE1SnijDR0INWlCg2aA'}"}
2024-09-10 03:25:57,085 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDMyNTU2', 'Timestamp': '20240910032556', 'CheckoutRequestID': 'ws_CO_10092024062544914729933451'}"}
2024-09-10 03:25:57,087 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 03:25:57,700 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 03:25:57,701 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b515214041', 'CheckoutRequestID': 'ws_CO_10092024062544914729933451', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024062544914729933451 899885"}
2024-09-10 03:25:57,815 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 03:25:58,005 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 03:25:58,007 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 03:25:58,528 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 03:30:45,516 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 03:30:45,673 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 03:30:45,673 - INFO - {'updated': 'initiated stk query for ws_CO_10092024063034243714024583 899885 '}
2024-09-10 03:30:45,732 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 03:30:46,307 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 03:30:46,309 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer k9TEgjgcmE3VTpHc7xOtMDVEmNSO'}"}
2024-09-10 03:30:46,310 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDMzMDQ1', 'Timestamp': '20240910033045', 'CheckoutRequestID': 'ws_CO_10092024063034243714024583'}"}
2024-09-10 03:30:46,311 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 03:30:47,123 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 03:30:47,124 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024063034243714024583', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024063034243714024583 899885"}
2024-09-10 03:30:47,126 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 05:20:27,445 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 05:20:27,597 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 05:20:27,597 - INFO - there is a test coming
2024-09-10 05:20:27,598 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 05:20:27,638 - INFO - {'updated_data': 'the data is now as 254712519504'}
2024-09-10 05:20:27,638 - INFO - the data is now as 254712519504
2024-09-10 05:20:27,655 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 05:20:27,655 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 05:20:27,656 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:20:28,214 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 05:20:28,216 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Cq1AQzrCAuIqTBrHpKA4cXq0teeE'}"}
2024-09-10 05:20:28,217 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDUyMDI4', 'Timestamp': '20240910052028', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10', 'PartyA': '254712519504', 'PartyB': 827142, 'PhoneNumber': '254712519504', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '405-1159', 'TransactionDesc': 'Some payment'}
2024-09-10 05:20:28,218 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:20:28,963 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 05:20:28,969 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585051387823', 'CheckoutRequestID': 'ws_CO_10092024082028745712519504', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 05:20:39,831 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 05:20:39,956 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 05:20:39,956 - INFO - {'updated': 'initiated stk query for ws_CO_10092024082028745712519504 827142 '}
2024-09-10 05:20:40,024 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:20:40,691 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 05:20:40,693 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer JxKiWV2Aqw92tX2HF3YzMtik1Gp6'}"}
2024-09-10 05:20:40,693 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDUyMDQw', 'Timestamp': '20240910052040', 'CheckoutRequestID': 'ws_CO_10092024082028745712519504'}"}
2024-09-10 05:20:40,695 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:20:41,340 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 05:20:41,340 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585051387823', 'CheckoutRequestID': 'ws_CO_10092024082028745712519504', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024082028745712519504 827142"}
2024-09-10 05:20:41,452 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 05:20:41,640 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 05:20:41,642 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 05:20:41,846 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 05:27:21,027 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 05:27:21,200 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 05:27:21,201 - INFO - {'updated': 'initiated stk query for ws_CO_10092024082709779725909110 827142 '}
2024-09-10 05:27:21,270 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:27:21,939 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 05:27:21,941 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer A3GrFEHiAdRmbjUuc59S53SuvTiH'}"}
2024-09-10 05:27:21,942 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDUyNzIx', 'Timestamp': '20240910052721', 'CheckoutRequestID': 'ws_CO_10092024082709779725909110'}"}
2024-09-10 05:27:21,948 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:27:22,584 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 05:27:22,584 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169293517', 'CheckoutRequestID': 'ws_CO_10092024082709779725909110', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024082709779725909110 827142"}
2024-09-10 05:27:22,703 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 05:27:23,068 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 05:27:23,069 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 05:27:23,286 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 05:28:18,313 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 05:28:18,467 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 05:28:18,468 - INFO - there is a test coming
2024-09-10 05:28:18,468 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 05:28:18,515 - INFO - {'updated_data': 'the data is now as 254725909110'}
2024-09-10 05:28:18,515 - INFO - the data is now as 254725909110
2024-09-10 05:28:18,531 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 05:28:18,531 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 05:28:18,533 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:28:19,128 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 05:28:19,130 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer VPJuzkBrFopJt9ZcxCN2rb8Ih0y4'}"}
2024-09-10 05:28:19,131 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDUyODE5', 'Timestamp': '20240910052819', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254725909110', 'PartyB': 827142, 'PhoneNumber': '254725909110', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-157941', 'TransactionDesc': 'Some payment'}
2024-09-10 05:28:19,132 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:28:20,106 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 05:28:20,113 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b4993232', 'CheckoutRequestID': 'ws_CO_10092024082819752725909110', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 05:29:26,457 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc15442947', 'CheckoutRequestID': 'ws_CO_10092024082917247720451393', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA62NSC4C'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910082925}, {'Name': 'PhoneNumber', 'Value': 254720451393}]}}}}"}
2024-09-10 05:29:26,458 - INFO - {'updated_data': 'callback data began'}
2024-09-10 05:29:26,458 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc15442947', 'CheckoutRequestID': 'ws_CO_10092024082917247720451393', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA62NSC4C'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910082925}, {'Name': 'PhoneNumber', 'Value': 254720451393}]}}}}}
2024-09-10 05:29:26,610 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 05:29:27,058 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 05:29:27,059 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 05:29:27,516 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 05:36:27,009 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 05:36:27,154 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 05:36:27,155 - INFO - there is a test coming
2024-09-10 05:36:27,155 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 05:36:27,196 - INFO - {'updated_data': 'the data is now as 254723434227'}
2024-09-10 05:36:27,196 - INFO - the data is now as 254723434227
2024-09-10 05:36:27,213 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 05:36:27,213 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 05:36:27,214 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:36:27,799 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 05:36:27,800 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 58wIPAlIcgFnBZK5bCyR4nHz0Rq6'}"}
2024-09-10 05:36:27,801 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDUzNjI3', 'Timestamp': '20240910053627', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '190', 'PartyA': '254723434227', 'PartyB': 827142, 'PhoneNumber': '254723434227', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '264-22802', 'TransactionDesc': 'Some payment'}
2024-09-10 05:36:27,802 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:36:28,593 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 05:36:28,598 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc15460379', 'CheckoutRequestID': 'ws_CO_10092024083628372723434227', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 05:37:12,327 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 05:37:12,467 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 05:37:12,467 - INFO - there is a test coming
2024-09-10 05:37:12,467 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 05:37:12,522 - INFO - {'updated_data': 'the data is now as 254723434227'}
2024-09-10 05:37:12,522 - INFO - the data is now as 254723434227
2024-09-10 05:37:12,538 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 05:37:12,538 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 05:37:12,539 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:37:13,123 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 05:37:13,125 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer K4Vxq0v5lIDwPHUN05LLXcd8LsMp'}"}
2024-09-10 05:37:13,125 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDUzNzEz', 'Timestamp': '20240910053713', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254723434227', 'PartyB': 827142, 'PhoneNumber': '254723434227', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-4230', 'TransactionDesc': 'Some payment'}
2024-09-10 05:37:13,126 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:37:13,858 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 05:37:13,864 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87208706', 'CheckoutRequestID': 'ws_CO_10092024083713647723434227', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 05:37:21,231 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87208706', 'CheckoutRequestID': 'ws_CO_10092024083713647723434227', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA02OPUWC'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910083720}, {'Name': 'PhoneNumber', 'Value': 254723434227}]}}}}"}
2024-09-10 05:37:21,231 - INFO - {'updated_data': 'callback data began'}
2024-09-10 05:37:21,231 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87208706', 'CheckoutRequestID': 'ws_CO_10092024083713647723434227', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA02OPUWC'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910083720}, {'Name': 'PhoneNumber', 'Value': 254723434227}]}}}}}
2024-09-10 05:37:21,407 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 05:37:21,862 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 05:37:21,863 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 05:37:22,071 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 05:37:24,718 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 05:37:24,838 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 05:37:24,839 - INFO - {'updated': 'initiated stk query for ws_CO_10092024083713647723434227 827142 '}
2024-09-10 05:37:24,890 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:37:25,446 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 05:37:25,448 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer PAMZoh0rvyNAhFfMF7LpZDJOtwgu'}"}
2024-09-10 05:37:25,448 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDUzNzI0', 'Timestamp': '20240910053724', 'CheckoutRequestID': 'ws_CO_10092024083713647723434227'}"}
2024-09-10 05:37:25,449 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:37:26,135 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 05:37:26,136 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87208706', 'CheckoutRequestID': 'ws_CO_10092024083713647723434227', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024083713647723434227 827142"}
2024-09-10 05:37:26,256 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 05:37:26,690 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 05:37:26,691 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 05:37:27,207 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 05:37:55,843 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 05:37:55,977 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 05:37:55,978 - INFO - there is a test coming
2024-09-10 05:37:55,978 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 05:37:56,026 - INFO - {'updated_data': 'the data is now as 254723434227'}
2024-09-10 05:37:56,026 - INFO - the data is now as 254723434227
2024-09-10 05:37:56,052 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 05:37:56,052 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 05:37:56,054 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:37:56,677 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 05:37:56,679 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer gELA7IaAf6cvpqx16MphPExgQyyv'}"}
2024-09-10 05:37:56,680 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDUzNzU2', 'Timestamp': '20240910053756', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '8040', 'PartyA': '254723434227', 'PartyB': 827142, 'PhoneNumber': '254723434227', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '169-15329', 'TransactionDesc': 'Some payment'}
2024-09-10 05:37:56,681 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:37:57,696 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 05:37:57,702 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5016717', 'CheckoutRequestID': 'ws_CO_10092024083757443723434227', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 05:38:05,078 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5016717', 'CheckoutRequestID': 'ws_CO_10092024083757443723434227', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 8040.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA32OSSRJ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910083804}, {'Name': 'PhoneNumber', 'Value': 254723434227}]}}}}"}
2024-09-10 05:38:05,078 - INFO - {'updated_data': 'callback data began'}
2024-09-10 05:38:05,078 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5016717', 'CheckoutRequestID': 'ws_CO_10092024083757443723434227', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 8040.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA32OSSRJ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910083804}, {'Name': 'PhoneNumber', 'Value': 254723434227}]}}}}}
2024-09-10 05:38:05,237 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 05:38:05,405 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 05:38:05,407 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 05:38:05,606 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 05:38:08,537 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 05:38:08,651 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 05:38:08,652 - INFO - {'updated': 'initiated stk query for ws_CO_10092024083757443723434227 827142 '}
2024-09-10 05:38:08,720 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:38:09,366 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 05:38:09,369 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer IYUw6aWB7O8ckt2eAa0LsNsIe5gX'}"}
2024-09-10 05:38:09,369 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDUzODA4', 'Timestamp': '20240910053808', 'CheckoutRequestID': 'ws_CO_10092024083757443723434227'}"}
2024-09-10 05:38:09,370 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:38:10,011 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 05:38:10,012 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5016717', 'CheckoutRequestID': 'ws_CO_10092024083757443723434227', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024083757443723434227 827142"}
2024-09-10 05:38:10,124 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 05:38:10,571 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 05:38:10,572 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 05:38:11,047 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 05:38:53,250 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169305113', 'CheckoutRequestID': 'ws_CO_10092024083846111723434227', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5163.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA72OW4E1'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910083852}, {'Name': 'PhoneNumber', 'Value': 254723434227}]}}}}"}
2024-09-10 05:38:53,251 - INFO - {'updated_data': 'callback data began'}
2024-09-10 05:38:53,251 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169305113', 'CheckoutRequestID': 'ws_CO_10092024083846111723434227', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5163.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA72OW4E1'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910083852}, {'Name': 'PhoneNumber', 'Value': 254723434227}]}}}}}
2024-09-10 05:38:53,406 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 05:38:53,891 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 05:38:53,893 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 05:38:54,080 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 05:39:44,138 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169305779', 'CheckoutRequestID': 'ws_CO_10092024083936575723434227', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA32P07V3'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910083943}, {'Name': 'PhoneNumber', 'Value': 254723434227}]}}}}"}
2024-09-10 05:39:44,139 - INFO - {'updated_data': 'callback data began'}
2024-09-10 05:39:44,139 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169305779', 'CheckoutRequestID': 'ws_CO_10092024083936575723434227', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA32P07V3'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910083943}, {'Name': 'PhoneNumber', 'Value': 254723434227}]}}}}}
2024-09-10 05:39:44,298 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 05:39:44,461 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 05:39:44,463 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 05:39:44,659 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 05:39:47,972 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 05:39:48,152 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 05:39:48,153 - INFO - {'updated': 'initiated stk query for ws_CO_10092024083936575723434227 827142 '}
2024-09-10 05:39:48,218 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:39:48,789 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 05:39:48,791 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer NkiJ3VCEvURxJez2nWcqC3wzdVv0'}"}
2024-09-10 05:39:48,791 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDUzOTQ4', 'Timestamp': '20240910053948', 'CheckoutRequestID': 'ws_CO_10092024083936575723434227'}"}
2024-09-10 05:39:48,793 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:39:49,416 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 05:39:49,417 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169305779', 'CheckoutRequestID': 'ws_CO_10092024083936575723434227', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024083936575723434227 827142"}
2024-09-10 05:39:49,546 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 05:39:49,718 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 05:39:49,720 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 05:39:49,910 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 05:48:57,116 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 05:48:57,281 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 05:48:57,282 - INFO - {'updated': 'initiated stk query for ws_CO_10092024084835984721511114 827142 '}
2024-09-10 05:48:57,336 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:48:57,907 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 05:48:57,910 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer sggGAhAxWKukALLhZtdHXUHZ7U3C'}"}
2024-09-10 05:48:57,910 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDU0ODU3', 'Timestamp': '20240910054857', 'CheckoutRequestID': 'ws_CO_10092024084835984721511114'}"}
2024-09-10 05:48:57,912 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:48:58,657 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 05:48:58,658 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075225630', 'CheckoutRequestID': 'ws_CO_10092024084835984721511114', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024084835984721511114 827142"}
2024-09-10 05:48:58,769 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 05:48:58,937 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 05:48:58,939 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 05:48:59,404 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 05:51:53,468 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 05:51:53,618 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 05:51:53,619 - INFO - {'updated': 'initiated stk query for ws_CO_10092024085142311721511114 827142 '}
2024-09-10 05:51:53,675 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:51:54,250 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 05:51:54,253 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer sFSYKsA9Ax96O2CeFiPJvJAmWx9p'}"}
2024-09-10 05:51:54,253 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDU1MTUz', 'Timestamp': '20240910055153', 'CheckoutRequestID': 'ws_CO_10092024085142311721511114'}"}
2024-09-10 05:51:54,254 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:51:54,984 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 05:51:54,985 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024085142311721511114', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024085142311721511114 827142"}
2024-09-10 05:51:54,988 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 05:52:03,436 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 05:52:03,614 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 05:52:03,615 - INFO - {'updated': 'initiated stk query for ws_CO_10092024085142311721511114 827142 '}
2024-09-10 05:52:03,670 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:52:04,229 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 05:52:04,233 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer e62ZidxVHRAjmjapT7U6kA27ioMA'}"}
2024-09-10 05:52:04,235 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDU1MjAz', 'Timestamp': '20240910055203', 'CheckoutRequestID': 'ws_CO_10092024085142311721511114'}"}
2024-09-10 05:52:04,239 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:52:04,872 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 05:52:04,872 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075228617', 'CheckoutRequestID': 'ws_CO_10092024085142311721511114', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024085142311721511114 827142"}
2024-09-10 05:52:04,992 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 05:52:05,450 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 05:52:05,451 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 05:52:05,639 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 05:53:06,440 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 05:53:06,595 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 05:53:06,596 - INFO - there is a test coming
2024-09-10 05:53:06,596 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 05:53:06,639 - INFO - {'updated_data': 'the data is now as 254722250336'}
2024-09-10 05:53:06,639 - INFO - the data is now as 254722250336
2024-09-10 05:53:06,655 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 05:53:06,655 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 05:53:06,656 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:53:07,410 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 05:53:07,412 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer UFWi2YDV2W6uI6V48nAgYEW8w9oL'}"}
2024-09-10 05:53:07,413 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDU1MzA3', 'Timestamp': '20240910055307', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5518', 'PartyA': '254722250336', 'PartyB': 827142, 'PhoneNumber': '254722250336', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-61096', 'TransactionDesc': 'Some payment'}
2024-09-10 05:53:07,414 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:53:08,165 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 05:53:08,176 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169319063', 'CheckoutRequestID': 'ws_CO_10092024085307939722250336', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 05:53:31,134 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 05:53:31,262 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 05:53:31,263 - INFO - {'updated': 'initiated stk query for ws_CO_10092024085320053721511114 827142 '}
2024-09-10 05:53:31,318 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:53:31,896 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 05:53:31,898 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Ddy1aAIA9R4LGVdncEXmHCh6GPIq'}"}
2024-09-10 05:53:31,898 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDU1MzMx', 'Timestamp': '20240910055331', 'CheckoutRequestID': 'ws_CO_10092024085320053721511114'}"}
2024-09-10 05:53:31,899 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:53:32,512 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 05:53:32,513 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024085320053721511114', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024085320053721511114 827142"}
2024-09-10 05:53:32,517 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 05:56:38,484 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075233496', 'CheckoutRequestID': 'ws_CO_10092024085629885724525990', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5659.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA22QZTVO'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910085637}, {'Name': 'PhoneNumber', 'Value': 254724525990}]}}}}"}
2024-09-10 05:56:38,485 - INFO - {'updated_data': 'callback data began'}
2024-09-10 05:56:38,485 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075233496', 'CheckoutRequestID': 'ws_CO_10092024085629885724525990', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5659.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA22QZTVO'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910085637}, {'Name': 'PhoneNumber', 'Value': 254724525990}]}}}}}
2024-09-10 05:56:38,701 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 05:56:39,148 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 05:56:39,149 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 05:56:39,619 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 05:56:41,249 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 05:56:41,387 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 05:56:41,388 - INFO - {'updated': 'initiated stk query for ws_CO_10092024085629885724525990 827142 '}
2024-09-10 05:56:41,450 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:56:42,048 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 05:56:42,050 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer bAdFAvyA5VNquG4jIicwwQMCQmYV'}"}
2024-09-10 05:56:42,051 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDU1NjQx', 'Timestamp': '20240910055641', 'CheckoutRequestID': 'ws_CO_10092024085629885724525990'}"}
2024-09-10 05:56:42,052 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:56:42,683 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 05:56:42,683 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075233496', 'CheckoutRequestID': 'ws_CO_10092024085629885724525990', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024085629885724525990 827142"}
2024-09-10 05:56:42,799 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 05:56:42,988 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 05:56:42,990 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 05:56:43,184 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 05:57:11,486 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 05:57:11,634 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 05:57:11,635 - INFO - there is a test coming
2024-09-10 05:57:11,635 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 05:57:11,679 - INFO - {'updated_data': 'the data is now as 254724525990'}
2024-09-10 05:57:11,679 - INFO - the data is now as 254724525990
2024-09-10 05:57:11,697 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 05:57:11,697 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 05:57:11,698 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:57:12,371 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 05:57:12,372 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer fPJ61HLcxsBjoct0yDW3kjyOyVKd'}"}
2024-09-10 05:57:12,373 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDU1NzEy', 'Timestamp': '20240910055712', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254724525990', 'PartyB': 827142, 'PhoneNumber': '254724525990', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '121-51683', 'TransactionDesc': 'Some payment'}
2024-09-10 05:57:12,380 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:57:13,136 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 05:57:13,143 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5063074', 'CheckoutRequestID': 'ws_CO_10092024085712926724525990', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 05:58:57,750 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc15514563', 'CheckoutRequestID': 'ws_CO_10092024085850207724525990', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA12R9L1B'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910085856}, {'Name': 'PhoneNumber', 'Value': 254724525990}]}}}}"}
2024-09-10 05:58:57,750 - INFO - {'updated_data': 'callback data began'}
2024-09-10 05:58:57,750 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc15514563', 'CheckoutRequestID': 'ws_CO_10092024085850207724525990', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA12R9L1B'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910085856}, {'Name': 'PhoneNumber', 'Value': 254724525990}]}}}}}
2024-09-10 05:58:57,919 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 05:58:58,354 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 05:58:58,355 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 05:58:58,542 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 05:59:01,442 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 05:59:01,596 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 05:59:01,597 - INFO - {'updated': 'initiated stk query for ws_CO_10092024085850207724525990 827142 '}
2024-09-10 05:59:01,657 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:59:02,236 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 05:59:02,238 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ZwU8cLcWgSd96G13JwkjluTjKqHX'}"}
2024-09-10 05:59:02,239 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDU1OTAx', 'Timestamp': '20240910055901', 'CheckoutRequestID': 'ws_CO_10092024085850207724525990'}"}
2024-09-10 05:59:02,240 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:59:02,865 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 05:59:02,866 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc15514563', 'CheckoutRequestID': 'ws_CO_10092024085850207724525990', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024085850207724525990 827142"}
2024-09-10 05:59:02,992 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 05:59:03,179 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 05:59:03,181 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 05:59:03,375 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:00:40,875 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:00:41,009 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:00:41,010 - INFO - there is a test coming
2024-09-10 06:00:41,010 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 06:00:41,060 - INFO - {'updated_data': 'the data is now as 254729842752'}
2024-09-10 06:00:41,060 - INFO - the data is now as 254729842752
2024-09-10 06:00:41,091 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 06:00:41,091 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 06:00:41,093 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:00:41,674 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:00:41,678 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer YIBeDT1WtkuU0mn96OOzg0n9fGUG'}"}
2024-09-10 06:00:41,678 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDYwMDQx', 'Timestamp': '20240910060041', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '6000', 'PartyA': '254729842752', 'PartyB': 827142, 'PhoneNumber': '254729842752', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-7351', 'TransactionDesc': 'Some payment'}
2024-09-10 06:00:41,680 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:00:42,405 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 06:00:42,411 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075237775', 'CheckoutRequestID': 'ws_CO_10092024090042202729842752', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 06:04:59,262 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b515533189', 'CheckoutRequestID': 'ws_CO_10092024090449307719347883', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA92RYKFV'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910090458}, {'Name': 'PhoneNumber', 'Value': 254719347883}]}}}}"}
2024-09-10 06:04:59,262 - INFO - {'updated_data': 'callback data began'}
2024-09-10 06:04:59,263 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b515533189', 'CheckoutRequestID': 'ws_CO_10092024090449307719347883', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA92RYKFV'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910090458}, {'Name': 'PhoneNumber', 'Value': 254719347883}]}}}}}
2024-09-10 06:04:59,413 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:05:00,000 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:05:00,004 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:05:00,462 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:05:00,615 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:05:00,761 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:05:00,762 - INFO - {'updated': 'initiated stk query for ws_CO_10092024090449307719347883 827142 '}
2024-09-10 06:05:00,830 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:05:01,438 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:05:01,440 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 4i2iiGahV840x60DULbXW7ngnZDC'}"}
2024-09-10 06:05:01,441 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDYwNTAw', 'Timestamp': '20240910060500', 'CheckoutRequestID': 'ws_CO_10092024090449307719347883'}"}
2024-09-10 06:05:01,442 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:05:02,081 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 06:05:02,081 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b515533189', 'CheckoutRequestID': 'ws_CO_10092024090449307719347883', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024090449307719347883 827142"}
2024-09-10 06:05:02,211 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:05:02,390 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:05:02,391 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:05:02,596 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:06:40,103 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:06:40,249 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:06:40,250 - INFO - {'updated': 'initiated stk query for ws_CO_10092024090628372719347883 827142 '}
2024-09-10 06:06:40,308 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:06:40,862 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:06:40,864 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer AeVpGGGiGwrmOvnHHeao0S4teGAi'}"}
2024-09-10 06:06:40,865 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDYwNjQw', 'Timestamp': '20240910060640', 'CheckoutRequestID': 'ws_CO_10092024090628372719347883'}"}
2024-09-10 06:06:40,866 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:06:41,616 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 06:06:41,617 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208792924203', 'CheckoutRequestID': 'ws_CO_10092024090628372719347883', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024090628372719347883 827142"}
2024-09-10 06:06:41,730 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:06:42,173 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:06:42,175 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:06:42,359 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:18:00,828 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:18:00,960 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:18:00,961 - INFO - {'updated': 'initiated stk query for ws_CO_10092024091748980723528017 899885 '}
2024-09-10 06:18:01,019 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:18:01,688 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:18:01,690 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer AjWrC9K5SlsqITBmUIKcn2RtHVr5'}"}
2024-09-10 06:18:01,690 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDYxODAx', 'Timestamp': '20240910061801', 'CheckoutRequestID': 'ws_CO_10092024091748980723528017'}"}
2024-09-10 06:18:01,691 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:18:02,425 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 06:18:02,425 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024091748980723528017', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024091748980723528017 899885"}
2024-09-10 06:18:02,428 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 06:18:06,064 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15568416', 'CheckoutRequestID': 'ws_CO_10092024091748980723528017', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-10 06:18:06,064 - INFO - {'updated_data': 'callback data began'}
2024-09-10 06:18:06,064 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15568416', 'CheckoutRequestID': 'ws_CO_10092024091748980723528017', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-10 06:18:06,224 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:18:06,403 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:18:06,404 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:18:06,593 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:18:11,039 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:18:11,211 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:18:11,212 - INFO - {'updated': 'initiated stk query for ws_CO_10092024091748980723528017 899885 '}
2024-09-10 06:18:11,272 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:18:12,038 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:18:12,040 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer M6IdJhHPwFh5A87fDNffCY5kzgIW'}"}
2024-09-10 06:18:12,040 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDYxODEx', 'Timestamp': '20240910061811', 'CheckoutRequestID': 'ws_CO_10092024091748980723528017'}"}
2024-09-10 06:18:12,041 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:18:12,761 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 376
2024-09-10 06:18:12,761 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15568416', 'CheckoutRequestID': 'ws_CO_10092024091748980723528017', 'ResultCode': '1037', 'ResultDesc': 'DS timeout user cannot be reached'} for ws_CO_10092024091748980723528017 899885"}
2024-09-10 06:18:12,881 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:18:13,046 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:18:13,048 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:18:13,235 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:18:13,402 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:18:13,422 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 06:18:13,423 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 06:19:58,010 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:19:58,170 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:19:58,171 - INFO - {'updated': 'initiated stk query for ws_CO_10092024091943953705140885 827142 '}
2024-09-10 06:19:58,234 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:19:58,823 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:19:58,826 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer CofosMhc39HndZcSoHwdhnINkH0P'}"}
2024-09-10 06:19:58,826 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDYxOTU4', 'Timestamp': '20240910061958', 'CheckoutRequestID': 'ws_CO_10092024091943953705140885'}"}
2024-09-10 06:19:58,837 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:19:59,485 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 06:19:59,485 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024091943953705140885', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024091943953705140885 827142"}
2024-09-10 06:19:59,488 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 06:28:10,498 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:28:10,659 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:28:10,660 - INFO - there is a test coming
2024-09-10 06:28:10,660 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 06:28:10,703 - INFO - {'updated_data': 'the data is now as 254110488289'}
2024-09-10 06:28:10,703 - INFO - the data is now as 254110488289
2024-09-10 06:28:10,720 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 06:28:10,720 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 06:28:10,722 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:28:11,288 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:28:11,290 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Bw2SImCw3vBGmy34whgCyFcoyExK'}"}
2024-09-10 06:28:11,290 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDYyODEx', 'Timestamp': '20240910062811', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254110488289', 'PartyB': 899885, 'PhoneNumber': '254110488289', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0624031-1725949681811', 'TransactionDesc': 'Some payment'}
2024-09-10 06:28:11,291 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:28:15,342 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 06:28:15,348 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc15585730', 'CheckoutRequestID': 'ws_CO_10092024092811823110488289', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 06:28:21,681 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:28:21,709 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 06:28:21,709 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 06:28:26,925 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc15585730', 'CheckoutRequestID': 'ws_CO_10092024092811823110488289', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA72US9T9'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910092826}, {'Name': 'PhoneNumber', 'Value': 254110488289}]}}}}"}
2024-09-10 06:28:26,926 - INFO - {'updated_data': 'callback data began'}
2024-09-10 06:28:26,926 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc15585730', 'CheckoutRequestID': 'ws_CO_10092024092811823110488289', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA72US9T9'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910092826}, {'Name': 'PhoneNumber', 'Value': 254110488289}]}}}}}
2024-09-10 06:28:27,080 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:28:27,249 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:28:27,251 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:28:27,705 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:29:21,184 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:29:21,342 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:29:21,342 - INFO - {'updated': 'initiated stk query for ws_CO_10092024092900135721226861 827142 '}
2024-09-10 06:29:21,491 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:29:22,081 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:29:22,083 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer oI4TXiKnXPDVzqqOI4AkICuiaJGo'}"}
2024-09-10 06:29:22,084 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDYyOTIx', 'Timestamp': '20240910062921', 'CheckoutRequestID': 'ws_CO_10092024092900135721226861'}"}
2024-09-10 06:29:22,085 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:29:22,713 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 389
2024-09-10 06:29:22,714 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169355390', 'CheckoutRequestID': 'ws_CO_10092024092900135721226861', 'ResultCode': '1', 'ResultDesc': 'The balance is insufficient for the transaction.'} for ws_CO_10092024092900135721226861 827142"}
2024-09-10 06:29:22,858 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:29:23,028 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:29:23,029 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:29:23,506 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:29:28,439 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:29:28,571 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:29:28,571 - INFO - there is a test coming
2024-09-10 06:29:28,571 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 06:29:28,610 - INFO - {'updated_data': 'the data is now as 254725441789'}
2024-09-10 06:29:28,610 - INFO - the data is now as 254725441789
2024-09-10 06:29:28,626 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 06:29:28,626 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 06:29:28,627 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:29:29,178 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:29:29,180 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 43ByzyKXpH239MeuZpJOmHP1pxpB'}"}
2024-09-10 06:29:29,180 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDYyOTI5', 'Timestamp': '20240910062929', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100000', 'PartyA': '254725441789', 'PartyB': 827142, 'PhoneNumber': '254725441789', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '124-923', 'TransactionDesc': 'Some payment'}
2024-09-10 06:29:29,181 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:29:30,329 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 06:29:30,335 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5141586', 'CheckoutRequestID': 'ws_CO_10092024092929796725441789', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 06:29:41,563 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:29:41,576 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 06:29:41,576 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 06:29:51,493 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:29:51,527 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 06:29:51,528 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 06:30:02,644 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:30:02,675 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 06:30:02,676 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 06:30:24,201 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc15590708', 'CheckoutRequestID': 'ws_CO_10092024093013048726167752', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 137.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA52V0S59'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910093023}, {'Name': 'PhoneNumber', 'Value': 254726167752}]}}}}"}
2024-09-10 06:30:24,201 - INFO - {'updated_data': 'callback data began'}
2024-09-10 06:30:24,201 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc15590708', 'CheckoutRequestID': 'ws_CO_10092024093013048726167752', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 137.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA52V0S59'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910093023}, {'Name': 'PhoneNumber', 'Value': 254726167752}]}}}}}
2024-09-10 06:30:24,365 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:30:24,811 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:30:24,813 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:30:25,285 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:30:43,260 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169593226', 'CheckoutRequestID': 'ws_CO_10092024093032478706940223', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 80000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA82V272O'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910093042}, {'Name': 'PhoneNumber', 'Value': 254706940223}]}}}}"}
2024-09-10 06:30:43,266 - INFO - {'updated_data': 'callback data began'}
2024-09-10 06:30:43,266 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169593226', 'CheckoutRequestID': 'ws_CO_10092024093032478706940223', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 80000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA82V272O'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910093042}, {'Name': 'PhoneNumber', 'Value': 254706940223}]}}}}}
2024-09-10 06:30:43,428 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:30:43,596 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:30:43,597 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:30:44,052 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:30:44,067 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:30:44,095 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 06:30:44,096 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 06:34:31,978 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170082771', 'CheckoutRequestID': 'ws_CO_10092024093421559722375085', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA82VITKI'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910093431}, {'Name': 'PhoneNumber', 'Value': 254722375085}]}}}}"}
2024-09-10 06:34:31,978 - INFO - {'updated_data': 'callback data began'}
2024-09-10 06:34:31,979 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170082771', 'CheckoutRequestID': 'ws_CO_10092024093421559722375085', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA82VITKI'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910093431}, {'Name': 'PhoneNumber', 'Value': 254722375085}]}}}}}
2024-09-10 06:34:32,136 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:34:32,584 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:34:32,586 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:34:33,064 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:38:34,872 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170086619', 'CheckoutRequestID': 'ws_CO_10092024093757255740245491', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA12W12M7'}, {'Name': 'TransactionDate', 'Value': 20240910093834}, {'Name': 'PhoneNumber', 'Value': 254740245491}]}}}}"}
2024-09-10 06:38:34,873 - INFO - {'updated_data': 'callback data began'}
2024-09-10 06:38:34,873 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170086619', 'CheckoutRequestID': 'ws_CO_10092024093757255740245491', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA12W12M7'}, {'Name': 'TransactionDate', 'Value': 20240910093834}, {'Name': 'PhoneNumber', 'Value': 254740245491}]}}}}}
2024-09-10 06:38:35,027 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:38:35,194 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:38:35,195 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:38:35,405 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:38:39,218 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:38:39,384 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:38:39,385 - INFO - {'updated': 'initiated stk query for ws_CO_10092024093757255740245491 899885 '}
2024-09-10 06:38:39,456 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:38:40,044 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:38:40,046 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Z4CwUpG2VfW2z0MVlaLGSuFIU9uM'}"}
2024-09-10 06:38:40,046 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDYzODM5', 'Timestamp': '20240910063839', 'CheckoutRequestID': 'ws_CO_10092024093757255740245491'}"}
2024-09-10 06:38:40,048 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:38:40,662 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 06:38:40,663 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170086619', 'CheckoutRequestID': 'ws_CO_10092024093757255740245491', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024093757255740245491 899885"}
2024-09-10 06:38:40,780 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:38:41,227 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:38:41,228 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:38:41,691 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:38:43,946 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:38:43,986 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 06:38:43,986 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 06:39:01,982 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:39:02,189 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:39:02,191 - INFO - {'updated': 'initiated stk query for ws_CO_10092024093830328703888510 899885 '}
2024-09-10 06:39:02,272 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:39:02,869 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:39:02,871 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer lYai7zIVC28glE53Zc0gUHfY9TtH'}"}
2024-09-10 06:39:02,872 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDYzOTAy', 'Timestamp': '20240910063902', 'CheckoutRequestID': 'ws_CO_10092024093830328703888510'}"}
2024-09-10 06:39:02,873 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:39:03,601 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 06:39:03,601 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170087321', 'CheckoutRequestID': 'ws_CO_10092024093830328703888510', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024093830328703888510 899885"}
2024-09-10 06:39:03,716 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:39:03,892 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:39:03,893 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:39:04,372 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:40:04,359 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:40:04,494 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:40:04,495 - INFO - there is a test coming
2024-09-10 06:40:04,495 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 06:40:04,540 - INFO - {'updated_data': 'the data is now as 254726451264'}
2024-09-10 06:40:04,540 - INFO - the data is now as 254726451264
2024-09-10 06:40:04,563 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 06:40:04,564 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 06:40:04,567 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:40:07,290 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:40:07,292 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer iGAm70lwAHrtrwbDIMwgcoyJPmbp'}"}
2024-09-10 06:40:07,292 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDY0MDA3', 'Timestamp': '20240910064007', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2600', 'PartyA': '254726451264', 'PartyB': 827142, 'PhoneNumber': '254726451264', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-127484', 'TransactionDesc': 'Some payment'}
2024-09-10 06:40:07,294 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:40:08,168 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 06:40:08,174 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170088821', 'CheckoutRequestID': 'ws_CO_10092024094007915726451264', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 06:40:19,175 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:40:19,305 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:40:19,306 - INFO - {'updated': 'initiated stk query for ws_CO_10092024094007915726451264 827142 '}
2024-09-10 06:40:19,371 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:40:20,137 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:40:20,139 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer KKrZD0GeCD8iKi9WRMB39PFoaTI7'}"}
2024-09-10 06:40:20,139 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDY0MDE5', 'Timestamp': '20240910064019', 'CheckoutRequestID': 'ws_CO_10092024094007915726451264'}"}
2024-09-10 06:40:20,140 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:40:20,764 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 06:40:20,765 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024094007915726451264', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024094007915726451264 827142"}
2024-09-10 06:40:20,767 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 06:40:43,332 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169367285', 'CheckoutRequestID': 'ws_CO_10092024094035453722555268', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 35000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA52WAM6X'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910094042}, {'Name': 'PhoneNumber', 'Value': 254722555268}]}}}}"}
2024-09-10 06:40:43,332 - INFO - {'updated_data': 'callback data began'}
2024-09-10 06:40:43,332 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169367285', 'CheckoutRequestID': 'ws_CO_10092024094035453722555268', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 35000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA52WAM6X'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910094042}, {'Name': 'PhoneNumber', 'Value': 254722555268}]}}}}}
2024-09-10 06:40:43,499 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:40:43,937 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:40:43,938 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:40:44,144 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:41:16,158 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170089872', 'CheckoutRequestID': 'ws_CO_10092024094106340720717129', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 50000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA92WCVEX'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910094115}, {'Name': 'PhoneNumber', 'Value': 254720717129}]}}}}"}
2024-09-10 06:41:16,158 - INFO - {'updated_data': 'callback data began'}
2024-09-10 06:41:16,158 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170089872', 'CheckoutRequestID': 'ws_CO_10092024094106340720717129', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 50000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA92WCVEX'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910094115}, {'Name': 'PhoneNumber', 'Value': 254720717129}]}}}}}
2024-09-10 06:41:16,316 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:41:16,485 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:41:16,486 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:41:16,967 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:41:59,565 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169368671', 'CheckoutRequestID': 'ws_CO_10092024094149746725950979', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA92WGCWP'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910094158}, {'Name': 'PhoneNumber', 'Value': 254725950979}]}}}}"}
2024-09-10 06:41:59,565 - INFO - {'updated_data': 'callback data began'}
2024-09-10 06:41:59,566 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169368671', 'CheckoutRequestID': 'ws_CO_10092024094149746725950979', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA92WGCWP'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910094158}, {'Name': 'PhoneNumber', 'Value': 254725950979}]}}}}}
2024-09-10 06:41:59,725 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:42:00,171 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:42:00,172 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:42:00,357 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:42:32,347 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:42:32,474 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:42:32,475 - INFO - there is a test coming
2024-09-10 06:42:32,475 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 06:42:32,520 - INFO - {'updated_data': 'the data is now as 254720077073'}
2024-09-10 06:42:32,520 - INFO - the data is now as 254720077073
2024-09-10 06:42:32,538 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 06:42:32,539 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 06:42:32,548 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:42:33,116 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:42:33,118 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer XScRyHw9wV2yX4wBY2mhwrgJFNPH'}"}
2024-09-10 06:42:33,118 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDY0MjMz', 'Timestamp': '20240910064233', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254720077073', 'PartyB': 827142, 'PhoneNumber': '254720077073', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-11934', 'TransactionDesc': 'Some payment'}
2024-09-10 06:42:33,119 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:42:33,934 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 06:42:33,940 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc15620327', 'CheckoutRequestID': 'ws_CO_10092024094233660720077073', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 06:43:38,051 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:43:38,266 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:43:38,267 - INFO - there is a test coming
2024-09-10 06:43:38,267 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 06:43:38,311 - INFO - {'updated_data': 'the data is now as 254720077073'}
2024-09-10 06:43:38,311 - INFO - the data is now as 254720077073
2024-09-10 06:43:38,340 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 06:43:38,340 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 06:43:38,341 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:43:38,936 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:43:38,938 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer KZpHOH9keXKNCoXnfEM91chr09Sd'}"}
2024-09-10 06:43:38,938 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDY0MzM4', 'Timestamp': '20240910064338', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3150', 'PartyA': '254720077073', 'PartyB': 827142, 'PhoneNumber': '254720077073', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-22878', 'TransactionDesc': 'Some payment'}
2024-09-10 06:43:38,940 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:43:39,708 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 06:43:39,715 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15631787', 'CheckoutRequestID': 'ws_CO_10092024094339455720077073', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 06:44:10,108 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:44:10,252 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:44:10,253 - INFO - {'updated': 'initiated stk query for ws_CO_10092024094007915726451264 827142 '}
2024-09-10 06:44:10,320 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:44:10,886 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:44:10,888 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer rlqvmK40zR5G5GOzBZXe6XSe6t6T'}"}
2024-09-10 06:44:10,888 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDY0NDEw', 'Timestamp': '20240910064410', 'CheckoutRequestID': 'ws_CO_10092024094007915726451264'}"}
2024-09-10 06:44:10,889 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:44:11,516 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 06:44:11,517 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170088821', 'CheckoutRequestID': 'ws_CO_10092024094007915726451264', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024094007915726451264 827142"}
2024-09-10 06:44:11,639 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:44:12,085 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:44:12,086 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:44:12,291 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:44:18,485 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:44:18,675 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:44:18,676 - INFO - {'updated': 'initiated stk query for ws_CO_10092024094007915726451264 827142 '}
2024-09-10 06:44:18,754 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:44:19,435 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:44:19,437 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer HTPi1HX9ZM6QMqdsqQz2CXLULp02'}"}
2024-09-10 06:44:19,438 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDY0NDE4', 'Timestamp': '20240910064418', 'CheckoutRequestID': 'ws_CO_10092024094007915726451264'}"}
2024-09-10 06:44:19,439 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:44:20,047 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 06:44:20,048 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170088821', 'CheckoutRequestID': 'ws_CO_10092024094007915726451264', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024094007915726451264 827142"}
2024-09-10 06:44:20,164 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:44:20,607 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:44:20,609 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:44:20,810 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:49:01,682 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169376213', 'CheckoutRequestID': 'ws_CO_10092024094848933723238283', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 12596.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA82XBJ2G'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910094901}, {'Name': 'PhoneNumber', 'Value': 254723238283}]}}}}"}
2024-09-10 06:49:01,682 - INFO - {'updated_data': 'callback data began'}
2024-09-10 06:49:01,682 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169376213', 'CheckoutRequestID': 'ws_CO_10092024094848933723238283', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 12596.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA82XBJ2G'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910094901}, {'Name': 'PhoneNumber', 'Value': 254723238283}]}}}}}
2024-09-10 06:49:01,865 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:49:02,497 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:49:02,499 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:49:02,982 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:51:40,393 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:51:40,583 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:51:40,583 - INFO - {'updated': 'initiated stk query for ws_CO_10092024095129157715155837 899885 '}
2024-09-10 06:51:40,658 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:51:41,234 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:51:41,236 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 7xZUdD1qBAPxQGAdkYSxhorypEoS'}"}
2024-09-10 06:51:41,236 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDY1MTQw', 'Timestamp': '20240910065140', 'CheckoutRequestID': 'ws_CO_10092024095129157715155837'}"}
2024-09-10 06:51:41,237 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:51:41,889 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 06:51:41,890 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5195248', 'CheckoutRequestID': 'ws_CO_10092024095129157715155837', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024095129157715155837 899885"}
2024-09-10 06:51:42,009 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:51:42,177 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:51:42,179 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:51:42,384 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:51:46,856 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:51:47,025 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:51:47,026 - INFO - {'updated': 'initiated stk query for ws_CO_10092024095135781741477302 899885 '}
2024-09-10 06:51:47,085 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:51:47,660 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:51:47,662 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer xGk5LWuY4vKmL81IjRYanHRB5PTL'}"}
2024-09-10 06:51:47,662 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDY1MTQ3', 'Timestamp': '20240910065147', 'CheckoutRequestID': 'ws_CO_10092024095135781741477302'}"}
2024-09-10 06:51:47,664 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:51:48,296 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 379
2024-09-10 06:51:48,297 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5195505', 'CheckoutRequestID': 'ws_CO_10092024095135781741477302', 'ResultCode': '2001', 'ResultDesc': 'The initiator information is invalid.'} for ws_CO_10092024095135781741477302 899885"}
2024-09-10 06:51:48,421 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:51:48,860 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:51:48,862 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:51:49,068 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:52:33,391 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075290922', 'CheckoutRequestID': 'ws_CO_10092024095213841721617974', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA02XR7TW'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910095232}, {'Name': 'PhoneNumber', 'Value': 254721617974}]}}}}"}
2024-09-10 06:52:33,392 - INFO - {'updated_data': 'callback data began'}
2024-09-10 06:52:33,392 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075290922', 'CheckoutRequestID': 'ws_CO_10092024095213841721617974', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA02XR7TW'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910095232}, {'Name': 'PhoneNumber', 'Value': 254721617974}]}}}}}
2024-09-10 06:52:33,559 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:52:33,998 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:52:33,999 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:52:34,477 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:52:39,534 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:52:39,652 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:52:39,653 - INFO - {'updated': 'initiated stk query for ws_CO_10092024095213841721617974 899885 '}
2024-09-10 06:52:39,720 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:52:40,298 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:52:40,300 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer sC8S6zYWGl647YQ4h5FSwtXCNvVB'}"}
2024-09-10 06:52:40,300 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDY1MjM5', 'Timestamp': '20240910065239', 'CheckoutRequestID': 'ws_CO_10092024095213841721617974'}"}
2024-09-10 06:52:40,302 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:52:41,063 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 06:52:41,063 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075290922', 'CheckoutRequestID': 'ws_CO_10092024095213841721617974', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024095213841721617974 899885"}
2024-09-10 06:52:41,177 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:52:41,634 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:52:41,636 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:52:42,076 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792971811', 'CheckoutRequestID': 'ws_CO_10092024095233286741477302', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA72XS2H5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910095241}, {'Name': 'PhoneNumber', 'Value': 254741477302}]}}}}"}
2024-09-10 06:52:42,076 - INFO - {'updated_data': 'callback data began'}
2024-09-10 06:52:42,076 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792971811', 'CheckoutRequestID': 'ws_CO_10092024095233286741477302', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA72XS2H5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910095241}, {'Name': 'PhoneNumber', 'Value': 254741477302}]}}}}}
2024-09-10 06:52:42,110 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:52:42,234 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:52:42,408 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:52:42,410 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:52:42,870 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:52:54,387 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:52:54,531 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:52:54,532 - INFO - {'updated': 'initiated stk query for ws_CO_10092024095233286741477302 899885 '}
2024-09-10 06:52:54,595 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:52:55,161 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:52:55,163 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer xEdNC2kwiKBfdnj5fsbsRD0c7uaL'}"}
2024-09-10 06:52:55,163 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDY1MjU0', 'Timestamp': '20240910065254', 'CheckoutRequestID': 'ws_CO_10092024095233286741477302'}"}
2024-09-10 06:52:55,164 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:52:55,824 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 06:52:55,825 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208792971811', 'CheckoutRequestID': 'ws_CO_10092024095233286741477302', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024095233286741477302 899885"}
2024-09-10 06:52:55,942 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:52:56,119 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:52:56,121 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:52:56,312 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:53:32,686 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:53:32,858 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:53:32,858 - INFO - {'updated': 'initiated stk query for ws_CO_10092024095314688769226627 899885 '}
2024-09-10 06:53:32,935 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:53:33,591 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:53:33,593 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer GzMG17akt578200oC4gIw9GLZdUh'}"}
2024-09-10 06:53:33,594 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDY1MzMy', 'Timestamp': '20240910065332', 'CheckoutRequestID': 'ws_CO_10092024095314688769226627'}"}
2024-09-10 06:53:33,595 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:53:34,231 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 06:53:34,232 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc15646209', 'CheckoutRequestID': 'ws_CO_10092024095314688769226627', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024095314688769226627 899885"}
2024-09-10 06:53:34,350 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:53:34,803 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:53:34,805 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:53:35,286 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:56:03,024 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:56:03,197 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:56:03,198 - INFO - there is a test coming
2024-09-10 06:56:03,199 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 06:56:03,246 - INFO - {'updated_data': 'the data is now as 254719661889'}
2024-09-10 06:56:03,247 - INFO - the data is now as 254719661889
2024-09-10 06:56:03,272 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 06:56:03,272 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 06:56:03,273 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:56:03,869 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:56:03,871 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer IssdfldtWwyV06X6e1yGRELLSDav'}"}
2024-09-10 06:56:03,871 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDY1NjAz', 'Timestamp': '20240910065603', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254719661889', 'PartyB': 827142, 'PhoneNumber': '254719661889', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-25895', 'TransactionDesc': 'Some payment'}
2024-09-10 06:56:03,873 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:56:04,667 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 06:56:04,673 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075294672', 'CheckoutRequestID': 'ws_CO_10092024095604398719661889', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 06:59:23,758 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075298157', 'CheckoutRequestID': 'ws_CO_10092024095912895727676473', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 30000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA42YLTGW'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910095923}, {'Name': 'PhoneNumber', 'Value': 254727676473}]}}}}"}
2024-09-10 06:59:23,759 - INFO - {'updated_data': 'callback data began'}
2024-09-10 06:59:23,759 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075298157', 'CheckoutRequestID': 'ws_CO_10092024095912895727676473', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 30000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA42YLTGW'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910095923}, {'Name': 'PhoneNumber', 'Value': 254727676473}]}}}}}
2024-09-10 06:59:23,918 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:59:24,134 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:59:24,135 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:59:24,344 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:59:37,973 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169623498', 'CheckoutRequestID': 'ws_CO_10092024095927752722356447', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA72YMJCX'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910095937}, {'Name': 'PhoneNumber', 'Value': 254722356447}]}}}}"}
2024-09-10 06:59:37,974 - INFO - {'updated_data': 'callback data began'}
2024-09-10 06:59:37,974 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169623498', 'CheckoutRequestID': 'ws_CO_10092024095927752722356447', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA72YMJCX'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910095937}, {'Name': 'PhoneNumber', 'Value': 254722356447}]}}}}}
2024-09-10 06:59:38,145 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:59:38,326 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:59:38,328 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:59:38,561 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:59:56,018 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:59:56,202 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:59:56,203 - INFO - there is a test coming
2024-09-10 06:59:56,203 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 06:59:56,246 - INFO - {'updated_data': 'the data is now as 254725752600'}
2024-09-10 06:59:56,246 - INFO - the data is now as 254725752600
2024-09-10 06:59:56,262 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 06:59:56,262 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 06:59:56,267 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:59:56,949 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:59:56,951 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer teXYa0XGcvEMxVPmcIiOHvV8Epw6'}"}
2024-09-10 06:59:56,951 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDY1OTU2', 'Timestamp': '20240910065956', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '40000', 'PartyA': '254725752600', 'PartyB': 899885, 'PhoneNumber': '254725752600', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA067672-1725951586448', 'TransactionDesc': 'Some payment'}
2024-09-10 06:59:56,952 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:59:57,823 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 06:59:57,830 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585051629570', 'CheckoutRequestID': 'ws_CO_10092024095957607725752600', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 07:00:08,244 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585051629570', 'CheckoutRequestID': 'ws_CO_10092024095957607725752600', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 40000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA92YP6H5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910100007}, {'Name': 'PhoneNumber', 'Value': 254725752600}]}}}}"}
2024-09-10 07:00:08,245 - INFO - {'updated_data': 'callback data began'}
2024-09-10 07:00:08,245 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585051629570', 'CheckoutRequestID': 'ws_CO_10092024095957607725752600', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 40000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA92YP6H5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910100007}, {'Name': 'PhoneNumber', 'Value': 254725752600}]}}}}}
2024-09-10 07:00:08,402 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:00:08,598 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:00:08,599 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:00:08,726 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:00:08,842 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:00:08,858 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:00:08,859 - INFO - {'updated': 'initiated stk query for ws_CO_10092024095957607725752600 899885 '}
2024-09-10 07:00:08,938 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:00:09,535 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:00:09,537 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 72mCI440P3IQE0VYfC8dicCVOMB1'}"}
2024-09-10 07:00:09,538 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDcwMDA4', 'Timestamp': '20240910070008', 'CheckoutRequestID': 'ws_CO_10092024095957607725752600'}"}
2024-09-10 07:00:09,539 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:00:10,284 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 07:00:10,285 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585051629570', 'CheckoutRequestID': 'ws_CO_10092024095957607725752600', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024095957607725752600 899885"}
2024-09-10 07:00:10,408 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:00:10,610 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:00:10,612 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:00:10,838 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:00:20,601 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:00:20,647 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 07:00:20,648 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 07:01:16,993 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:01:17,307 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:01:17,308 - INFO - there is a test coming
2024-09-10 07:01:17,308 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 07:01:17,356 - INFO - {'updated_data': 'the data is now as 254725806724'}
2024-09-10 07:01:17,356 - INFO - the data is now as 254725806724
2024-09-10 07:01:17,374 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 07:01:17,374 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 07:01:17,375 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:01:17,950 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:01:17,952 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 96dkFWX1Nna2iNgKloBAndCY3r0i'}"}
2024-09-10 07:01:17,953 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDcwMTE3', 'Timestamp': '20240910070117', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254725806724', 'PartyB': 899885, 'PhoneNumber': '254725806724', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053428', 'TransactionDesc': 'Some payment'}
2024-09-10 07:01:17,954 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:01:18,680 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 07:01:18,691 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208792981021', 'CheckoutRequestID': 'ws_CO_10092024100118486725806724', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 07:04:39,363 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792984750', 'CheckoutRequestID': 'ws_CO_10092024100436973725571210', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-10 07:04:39,364 - INFO - {'updated_data': 'callback data began'}
2024-09-10 07:04:39,364 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792984750', 'CheckoutRequestID': 'ws_CO_10092024100436973725571210', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-10 07:04:39,514 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:04:40,011 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:04:40,012 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:04:40,220 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:04:57,974 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:04:57,986 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 07:04:57,987 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 07:09:21,002 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:09:21,187 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:09:21,188 - INFO - {'updated': 'initiated stk query for ws_CO_10092024100909912717446607 827142 '}
2024-09-10 07:09:21,249 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:09:21,817 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:09:21,820 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer nbw2lt6aKGC9YkC0hqgwlCENiOjS'}"}
2024-09-10 07:09:21,820 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDcwOTIx', 'Timestamp': '20240910070921', 'CheckoutRequestID': 'ws_CO_10092024100909912717446607'}"}
2024-09-10 07:09:21,822 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:09:22,562 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-10 07:09:22,562 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15696261', 'CheckoutRequestID': 'ws_CO_10092024100909912717446607', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_10092024100909912717446607 827142"}
2024-09-10 07:09:22,681 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:09:23,138 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:09:23,139 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:09:23,334 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:09:34,648 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:09:34,808 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:09:34,809 - INFO - there is a test coming
2024-09-10 07:09:34,809 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 07:09:34,862 - INFO - {'updated_data': 'the data is now as 254705179857'}
2024-09-10 07:09:34,862 - INFO - the data is now as 254705179857
2024-09-10 07:09:34,878 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 07:09:34,878 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 07:09:34,879 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:09:35,540 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:09:35,541 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 2RpFmXmPvkpU4v20dmVkO5J4ZjkK'}"}
2024-09-10 07:09:35,542 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDcwOTM1', 'Timestamp': '20240910070935', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254705179857', 'PartyB': 827142, 'PhoneNumber': '254705179857', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-175312', 'TransactionDesc': 'Some payment'}
2024-09-10 07:09:35,543 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:09:36,321 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 07:09:36,328 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b515693814', 'CheckoutRequestID': 'ws_CO_10092024100936083705179857', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 07:11:04,886 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169399924', 'CheckoutRequestID': 'ws_CO_10092024101045246757766316', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1150.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA5302B1X'}, {'Name': 'TransactionDate', 'Value': 20240910101104}, {'Name': 'PhoneNumber', 'Value': 254757766316}]}}}}"}
2024-09-10 07:11:04,887 - INFO - {'updated_data': 'callback data began'}
2024-09-10 07:11:04,887 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169399924', 'CheckoutRequestID': 'ws_CO_10092024101045246757766316', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1150.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA5302B1X'}, {'Name': 'TransactionDate', 'Value': 20240910101104}, {'Name': 'PhoneNumber', 'Value': 254757766316}]}}}}}
2024-09-10 07:11:05,052 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:11:05,236 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:11:05,237 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:11:05,466 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:11:09,287 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:11:09,426 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:11:09,427 - INFO - {'updated': 'initiated stk query for ws_CO_10092024101045246757766316 899885 '}
2024-09-10 07:11:09,487 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:11:10,233 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:11:10,235 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer oiVh45N1nSSGcVwAD1mm8xh6KGm8'}"}
2024-09-10 07:11:10,236 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDcxMTA5', 'Timestamp': '20240910071109', 'CheckoutRequestID': 'ws_CO_10092024101045246757766316'}"}
2024-09-10 07:11:10,237 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:11:10,949 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 07:11:10,950 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169399924', 'CheckoutRequestID': 'ws_CO_10092024101045246757766316', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024101045246757766316 899885"}
2024-09-10 07:11:11,082 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:11:11,536 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:11:11,538 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:11:11,723 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:14:26,618 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:14:26,772 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:14:26,773 - INFO - {'updated': 'initiated stk query for ws_CO_10092024101415417717597018 827142 '}
2024-09-10 07:14:26,822 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:14:27,404 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:14:27,406 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 5sHZAKURAqaia8BAf0GlA0h7kPAo'}"}
2024-09-10 07:14:27,406 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDcxNDI2', 'Timestamp': '20240910071426', 'CheckoutRequestID': 'ws_CO_10092024101415417717597018'}"}
2024-09-10 07:14:27,407 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:14:28,203 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 07:14:28,204 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b515705094', 'CheckoutRequestID': 'ws_CO_10092024101415417717597018', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024101415417717597018 827142"}
2024-09-10 07:14:28,316 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:14:28,756 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:14:28,757 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:14:28,941 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:16:18,052 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:16:18,208 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:16:18,209 - INFO - there is a test coming
2024-09-10 07:16:18,209 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 07:16:18,267 - INFO - {'updated_data': 'the data is now as 254794750526'}
2024-09-10 07:16:18,267 - INFO - the data is now as 254794750526
2024-09-10 07:16:18,284 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 07:16:18,285 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 07:16:18,286 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:16:19,045 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:16:19,047 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer vdo7ad8eTBT23vTOrQatkgAH6JgO'}"}
2024-09-10 07:16:19,048 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDcxNjE5', 'Timestamp': '20240910071619', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254794750526', 'PartyB': 827142, 'PhoneNumber': '254794750526', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-28325', 'TransactionDesc': 'Some payment'}
2024-09-10 07:16:19,049 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:16:19,774 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 07:16:19,783 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee595624217', 'CheckoutRequestID': 'ws_CO_10092024101619581794750526', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 07:41:29,831 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585051737036', 'CheckoutRequestID': 'ws_CO_10092024104118863740881840', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5243.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA333XH2Z'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910104129}, {'Name': 'PhoneNumber', 'Value': 254740881840}]}}}}"}
2024-09-10 07:41:29,831 - INFO - {'updated_data': 'callback data began'}
2024-09-10 07:41:29,831 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585051737036', 'CheckoutRequestID': 'ws_CO_10092024104118863740881840', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5243.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA333XH2Z'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910104129}, {'Name': 'PhoneNumber', 'Value': 254740881840}]}}}}}
2024-09-10 07:41:30,024 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:41:30,198 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:41:30,200 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:41:30,387 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:43:23,301 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:43:23,427 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:43:23,428 - INFO - {'updated': 'initiated stk query for ws_CO_10092024104311380725796142 899885 '}
2024-09-10 07:43:23,488 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:43:24,072 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:43:24,074 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer mq0fUPqTuhUfw7D2TWJFV2dGMx7z'}"}
2024-09-10 07:43:24,075 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDc0MzIz', 'Timestamp': '20240910074323', 'CheckoutRequestID': 'ws_CO_10092024104311380725796142'}"}
2024-09-10 07:43:24,076 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:43:24,827 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 07:43:24,827 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169435999', 'CheckoutRequestID': 'ws_CO_10092024104311380725796142', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024104311380725796142 899885"}
2024-09-10 07:43:24,947 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:43:25,110 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:43:25,111 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:43:25,313 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:44:05,287 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:44:05,439 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:44:05,439 - INFO - there is a test coming
2024-09-10 07:44:05,439 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 07:44:05,490 - INFO - {'updated_data': 'the data is now as 254721864291'}
2024-09-10 07:44:05,491 - INFO - the data is now as 254721864291
2024-09-10 07:44:05,515 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 07:44:05,516 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 07:44:05,517 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:44:06,082 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:44:06,085 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer iQfTS5AKTx38dvMlyNf6kmUEaqPj'}"}
2024-09-10 07:44:06,085 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDc0NDA2', 'Timestamp': '20240910074406', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254721864291', 'PartyB': 827142, 'PhoneNumber': '254721864291', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-30925', 'TransactionDesc': 'Some payment'}
2024-09-10 07:44:06,086 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:44:06,934 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 07:44:06,942 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc15778941', 'CheckoutRequestID': 'ws_CO_10092024104406712721864291', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 07:44:27,415 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:44:27,563 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:44:27,564 - INFO - {'updated': 'initiated stk query for ws_CO_10092024104406712721864291 827142 '}
2024-09-10 07:44:27,616 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:44:28,186 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:44:28,188 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer E8S2MCfk3GUwcmlkMtQGVxppuKpV'}"}
2024-09-10 07:44:28,188 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDc0NDI3', 'Timestamp': '20240910074427', 'CheckoutRequestID': 'ws_CO_10092024104406712721864291'}"}
2024-09-10 07:44:28,189 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:44:28,837 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 07:44:28,837 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc15778941', 'CheckoutRequestID': 'ws_CO_10092024104406712721864291', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024104406712721864291 827142"}
2024-09-10 07:44:28,962 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:44:29,253 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:44:29,255 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:44:29,510 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:44:46,185 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:44:46,306 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:44:46,307 - INFO - there is a test coming
2024-09-10 07:44:46,307 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 07:44:46,352 - INFO - {'updated_data': 'the data is now as 254724823595'}
2024-09-10 07:44:46,352 - INFO - the data is now as 254724823595
2024-09-10 07:44:46,367 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 07:44:46,367 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 07:44:46,369 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:44:46,966 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:44:46,968 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer gUHNVszsynNvCGlKeITlJLWBL2pc'}"}
2024-09-10 07:44:46,969 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDc0NDQ2', 'Timestamp': '20240910074446', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254724823595', 'PartyB': 827142, 'PhoneNumber': '254724823595', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-3378', 'TransactionDesc': 'Some payment'}
2024-09-10 07:44:46,970 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:44:47,789 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 07:44:47,799 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208793029297', 'CheckoutRequestID': 'ws_CO_10092024104447569724823595', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 07:44:58,806 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:44:58,948 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:44:58,949 - INFO - {'updated': 'initiated stk query for ws_CO_10092024104447569724823595 827142 '}
2024-09-10 07:44:59,012 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:44:59,678 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:44:59,681 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 6KiNsCnQUbzkdSBLIfoXBhLIGAGO'}"}
2024-09-10 07:44:59,682 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDc0NDU5', 'Timestamp': '20240910074459', 'CheckoutRequestID': 'ws_CO_10092024104447569724823595'}"}
2024-09-10 07:44:59,684 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:45:00,423 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 07:45:00,424 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208793029297', 'CheckoutRequestID': 'ws_CO_10092024104447569724823595', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024104447569724823595 827142"}
2024-09-10 07:45:00,541 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:45:00,710 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:45:00,711 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:45:00,908 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:45:40,287 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:45:40,416 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:45:40,417 - INFO - {'updated': 'initiated stk query for ws_CO_10092024104528799723320906 827142 '}
2024-09-10 07:45:40,474 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:45:41,058 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:45:41,062 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 5vfoAeGfBDAH9gU7ReQqPRQ9mloZ'}"}
2024-09-10 07:45:41,063 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDc0NTQw', 'Timestamp': '20240910074540', 'CheckoutRequestID': 'ws_CO_10092024104528799723320906'}"}
2024-09-10 07:45:41,065 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:45:41,685 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 07:45:41,686 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b515785587', 'CheckoutRequestID': 'ws_CO_10092024104528799723320906', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024104528799723320906 827142"}
2024-09-10 07:45:41,800 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:45:41,965 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:45:41,967 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:45:42,444 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:46:37,148 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170160961', 'CheckoutRequestID': 'ws_CO_10092024104621305726702691', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 72615.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA734L103'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910104636}, {'Name': 'PhoneNumber', 'Value': 254726702691}]}}}}"}
2024-09-10 07:46:37,149 - INFO - {'updated_data': 'callback data began'}
2024-09-10 07:46:37,149 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170160961', 'CheckoutRequestID': 'ws_CO_10092024104621305726702691', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 72615.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA734L103'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910104636}, {'Name': 'PhoneNumber', 'Value': 254726702691}]}}}}}
2024-09-10 07:46:37,333 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:46:37,798 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:46:37,806 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:46:38,048 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:47:09,756 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:47:09,780 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 07:47:09,781 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 07:48:18,353 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:48:18,368 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 07:48:18,369 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 07:48:47,422 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:48:47,443 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 07:48:47,443 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 07:59:10,818 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:59:10,954 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:59:10,954 - INFO - {'updated': 'initiated stk query for ws_CO_10092024105858032727210361 827142 '}
2024-09-10 07:59:11,022 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:59:11,678 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:59:11,681 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer TDhn5zk7GLdwdrNJ6b7fVIHeD3ns'}"}
2024-09-10 07:59:11,681 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDc1OTEx', 'Timestamp': '20240910075911', 'CheckoutRequestID': 'ws_CO_10092024105858032727210361'}"}
2024-09-10 07:59:11,683 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:59:12,321 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 07:59:12,322 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585051782966', 'CheckoutRequestID': 'ws_CO_10092024105858032727210361', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024105858032727210361 827142"}
2024-09-10 07:59:12,445 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:59:12,632 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:59:12,634 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:59:12,885 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:00:53,508 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:00:53,664 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:00:53,664 - INFO - {'updated': 'initiated stk query for ws_CO_10092024110042457710104399 827142 '}
2024-09-10 08:00:53,720 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:00:54,386 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:00:54,388 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer SROg1ojIAoSeie0Ou2z3WG1oHzCb'}"}
2024-09-10 08:00:54,389 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDgwMDUz', 'Timestamp': '20240910080053', 'CheckoutRequestID': 'ws_CO_10092024110042457710104399'}"}
2024-09-10 08:00:54,390 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:00:55,019 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 08:00:55,020 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075365765', 'CheckoutRequestID': 'ws_CO_10092024110042457710104399', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024110042457710104399 827142"}
2024-09-10 08:00:55,141 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:00:55,507 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:00:55,509 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:00:56,040 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:02:07,210 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:02:07,411 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:02:07,411 - INFO - there is a test coming
2024-09-10 08:02:07,412 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 08:02:07,463 - INFO - {'updated_data': 'the data is now as 254714599118'}
2024-09-10 08:02:07,464 - INFO - the data is now as 254714599118
2024-09-10 08:02:07,480 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 08:02:07,480 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 08:02:07,482 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:02:08,052 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:02:08,056 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer obQLc258MlXgJNUzpG0vaFOPFbEk'}"}
2024-09-10 08:02:08,059 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDgwMjA4', 'Timestamp': '20240910080208', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '4500', 'PartyA': '254714599118', 'PartyB': 899885, 'PhoneNumber': '254714599118', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053973', 'TransactionDesc': 'Some payment'}
2024-09-10 08:02:08,061 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:02:08,888 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 08:02:08,895 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170177853', 'CheckoutRequestID': 'ws_CO_10092024110208653714599118', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 08:03:42,575 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:03:42,786 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:03:42,787 - INFO - there is a test coming
2024-09-10 08:03:42,787 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 08:03:42,834 - INFO - {'updated_data': 'the data is now as 254722725137'}
2024-09-10 08:03:42,835 - INFO - the data is now as 254722725137
2024-09-10 08:03:42,851 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 08:03:42,852 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 08:03:42,853 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:03:43,501 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:03:43,503 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 1O0526GPo4nRdLjCiPshDs5Vhc1y'}"}
2024-09-10 08:03:43,504 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDgwMzQz', 'Timestamp': '20240910080343', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '15000', 'PartyA': '254722725137', 'PartyB': 827142, 'PhoneNumber': '254722725137', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-10857', 'TransactionDesc': 'Some payment'}
2024-09-10 08:03:43,505 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:03:44,310 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 08:03:44,316 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87363032', 'CheckoutRequestID': 'ws_CO_10092024110344117722725137', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 08:03:51,213 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87363032', 'CheckoutRequestID': 'ws_CO_10092024110344117722725137', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 15000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA036S46S'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910110350}, {'Name': 'PhoneNumber', 'Value': 254722725137}]}}}}"}
2024-09-10 08:03:51,213 - INFO - {'updated_data': 'callback data began'}
2024-09-10 08:03:51,213 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87363032', 'CheckoutRequestID': 'ws_CO_10092024110344117722725137', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 15000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA036S46S'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910110350}, {'Name': 'PhoneNumber', 'Value': 254722725137}]}}}}}
2024-09-10 08:03:51,388 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:03:51,591 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:03:51,593 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:03:52,126 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:03:55,337 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:03:55,469 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:03:55,469 - INFO - {'updated': 'initiated stk query for ws_CO_10092024110344117722725137 827142 '}
2024-09-10 08:03:55,528 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:03:56,123 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:03:56,126 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Q2NdeVAJeooj3k8ni0Y2oaQAlECT'}"}
2024-09-10 08:03:56,127 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDgwMzU1', 'Timestamp': '20240910080355', 'CheckoutRequestID': 'ws_CO_10092024110344117722725137'}"}
2024-09-10 08:03:56,128 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:03:56,832 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 08:03:56,832 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87363032', 'CheckoutRequestID': 'ws_CO_10092024110344117722725137', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024110344117722725137 827142"}
2024-09-10 08:03:56,968 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:03:57,462 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:03:57,463 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:03:58,002 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:04:04,855 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075369136', 'CheckoutRequestID': 'ws_CO_10092024110349086743483083', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA636T2BK'}, {'Name': 'TransactionDate', 'Value': 20240910110404}, {'Name': 'PhoneNumber', 'Value': 254743483083}]}}}}"}
2024-09-10 08:04:04,855 - INFO - {'updated_data': 'callback data began'}
2024-09-10 08:04:04,856 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075369136', 'CheckoutRequestID': 'ws_CO_10092024110349086743483083', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA636T2BK'}, {'Name': 'TransactionDate', 'Value': 20240910110404}, {'Name': 'PhoneNumber', 'Value': 254743483083}]}}}}}
2024-09-10 08:04:05,015 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:04:05,217 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:04:05,219 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:04:05,441 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:04:08,330 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:04:08,508 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:04:08,509 - INFO - {'updated': 'initiated stk query for ws_CO_10092024110349086743483083 827142 '}
2024-09-10 08:04:08,569 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:04:09,136 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:04:09,138 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer gyn8U1bFRl4um0fLJasH4LrUJ6NQ'}"}
2024-09-10 08:04:09,139 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDgwNDA4', 'Timestamp': '20240910080408', 'CheckoutRequestID': 'ws_CO_10092024110349086743483083'}"}
2024-09-10 08:04:09,141 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:04:09,746 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 08:04:09,746 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075369136', 'CheckoutRequestID': 'ws_CO_10092024110349086743483083', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024110349086743483083 827142"}
2024-09-10 08:04:09,872 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:04:10,074 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:04:10,075 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:04:10,488 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:04:10,598 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:04:10,629 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:04:10,630 - INFO - {'updated': 'initiated stk query for ws_CO_10092024110349086743483083 827142 '}
2024-09-10 08:04:10,709 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:04:11,294 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:04:11,296 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 447jjC9f4C4gkr7PylelChNtJqKz'}"}
2024-09-10 08:04:11,296 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDgwNDEw', 'Timestamp': '20240910080410', 'CheckoutRequestID': 'ws_CO_10092024110349086743483083'}"}
2024-09-10 08:04:11,297 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:04:12,037 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 08:04:12,038 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075369136', 'CheckoutRequestID': 'ws_CO_10092024110349086743483083', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024110349086743483083 827142"}
2024-09-10 08:04:12,157 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:04:12,357 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:04:12,359 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:04:12,568 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:04:51,509 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:04:51,666 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:04:51,666 - INFO - there is a test coming
2024-09-10 08:04:51,667 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 08:04:51,713 - INFO - {'updated_data': 'the data is now as 254700298942'}
2024-09-10 08:04:51,713 - INFO - the data is now as 254700298942
2024-09-10 08:04:51,731 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 08:04:51,731 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 08:04:51,733 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:04:52,432 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:04:52,434 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 0Qf3zh7HmWpephE0oH4ZH1WbksXg'}"}
2024-09-10 08:04:52,435 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDgwNDUy', 'Timestamp': '20240910080452', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '7500', 'PartyA': '254700298942', 'PartyB': 827142, 'PhoneNumber': '254700298942', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '121-53171', 'TransactionDesc': 'Some payment'}
2024-09-10 08:04:52,436 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:04:53,175 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 08:04:53,185 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075370507', 'CheckoutRequestID': 'ws_CO_10092024110452939700298942', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 08:06:26,947 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:06:27,166 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:06:27,167 - INFO - there is a test coming
2024-09-10 08:06:27,167 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 08:06:27,207 - INFO - {'updated_data': 'the data is now as 254722725137'}
2024-09-10 08:06:27,208 - INFO - the data is now as 254722725137
2024-09-10 08:06:27,224 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 08:06:27,224 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 08:06:27,225 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:06:27,790 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:06:27,792 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer jiQA36A5kfz8UIq6ikcRRtbtzeEG'}"}
2024-09-10 08:06:27,792 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDgwNjI3', 'Timestamp': '20240910080627', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2586', 'PartyA': '254722725137', 'PartyB': 899885, 'PhoneNumber': '254722725137', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0601670-1725955586115', 'TransactionDesc': 'Some payment'}
2024-09-10 08:06:27,793 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:06:28,675 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 08:06:28,682 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87366397', 'CheckoutRequestID': 'ws_CO_10092024110628389722725137', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 08:06:35,357 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87366397', 'CheckoutRequestID': 'ws_CO_10092024110628389722725137', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2586.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA7374LCZ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910110634}, {'Name': 'PhoneNumber', 'Value': 254722725137}]}}}}"}
2024-09-10 08:06:35,357 - INFO - {'updated_data': 'callback data began'}
2024-09-10 08:06:35,358 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87366397', 'CheckoutRequestID': 'ws_CO_10092024110628389722725137', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2586.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA7374LCZ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910110634}, {'Name': 'PhoneNumber', 'Value': 254722725137}]}}}}}
2024-09-10 08:06:35,509 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:06:36,007 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:06:36,009 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:06:36,226 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:09:05,945 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc15844764', 'CheckoutRequestID': 'ws_CO_10092024110854577700788613', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 8200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA837GDJU'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910110905}, {'Name': 'PhoneNumber', 'Value': 254700788613}]}}}}"}
2024-09-10 08:09:05,945 - INFO - {'updated_data': 'callback data began'}
2024-09-10 08:09:05,946 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc15844764', 'CheckoutRequestID': 'ws_CO_10092024110854577700788613', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 8200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA837GDJU'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910110905}, {'Name': 'PhoneNumber', 'Value': 254700788613}]}}}}}
2024-09-10 08:09:06,106 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:09:06,619 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:09:06,621 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:09:07,151 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:09:13,736 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:09:13,894 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:09:13,895 - INFO - there is a test coming
2024-09-10 08:09:13,895 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 08:09:13,941 - INFO - {'updated_data': 'the data is now as 254714075750'}
2024-09-10 08:09:13,941 - INFO - the data is now as 254714075750
2024-09-10 08:09:13,959 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 08:09:13,959 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 08:09:13,972 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:09:14,572 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:09:14,574 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer UGEFh4IlIeE1rqmBKrUfLjLctnw1'}"}
2024-09-10 08:09:14,574 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDgwOTE0', 'Timestamp': '20240910080914', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254714075750', 'PartyB': 827142, 'PhoneNumber': '254714075750', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-172183', 'TransactionDesc': 'Some payment'}
2024-09-10 08:09:14,575 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:09:15,338 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 08:09:15,345 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169700155', 'CheckoutRequestID': 'ws_CO_10092024110915098714075750', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 08:10:41,162 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5401317', 'CheckoutRequestID': 'ws_CO_10092024111029816717791077', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5388.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA137NHBF'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910111040}, {'Name': 'PhoneNumber', 'Value': 254717791077}]}}}}"}
2024-09-10 08:10:41,162 - INFO - {'updated_data': 'callback data began'}
2024-09-10 08:10:41,162 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5401317', 'CheckoutRequestID': 'ws_CO_10092024111029816717791077', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5388.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA137NHBF'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910111040}, {'Name': 'PhoneNumber', 'Value': 254717791077}]}}}}}
2024-09-10 08:10:41,328 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:10:41,822 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:10:41,823 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:10:42,051 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:10:55,531 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee595767687', 'CheckoutRequestID': 'ws_CO_10092024111035868722725137', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-10 08:10:55,532 - INFO - {'updated_data': 'callback data began'}
2024-09-10 08:10:55,532 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee595767687', 'CheckoutRequestID': 'ws_CO_10092024111035868722725137', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-10 08:10:55,693 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:10:55,901 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:10:55,902 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:10:56,141 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:10:58,695 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:10:58,867 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:10:58,868 - INFO - {'updated': 'initiated stk query for ws_CO_10092024111035868722725137 899885 '}
2024-09-10 08:10:58,947 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:10:59,595 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:10:59,597 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer RlPphNrdV2MRzPM4kH9jwiwQmd5z'}"}
2024-09-10 08:10:59,597 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDgxMDU4', 'Timestamp': '20240910081058', 'CheckoutRequestID': 'ws_CO_10092024111035868722725137'}"}
2024-09-10 08:10:59,599 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:11:00,234 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 367
2024-09-10 08:11:00,235 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee595767687', 'CheckoutRequestID': 'ws_CO_10092024111035868722725137', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_10092024111035868722725137 899885"}
2024-09-10 08:11:00,362 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:11:00,552 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:11:00,553 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:11:00,765 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:11:01,811 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:11:01,824 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 08:11:01,825 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 08:11:27,456 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:11:27,468 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 08:11:27,469 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 08:11:56,635 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793058460', 'CheckoutRequestID': 'ws_CO_10092024111145546700298942', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA837TOVY'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910111155}, {'Name': 'PhoneNumber', 'Value': 254700298942}]}}}}"}
2024-09-10 08:11:56,635 - INFO - {'updated_data': 'callback data began'}
2024-09-10 08:11:56,635 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793058460', 'CheckoutRequestID': 'ws_CO_10092024111145546700298942', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA837TOVY'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910111155}, {'Name': 'PhoneNumber', 'Value': 254700298942}]}}}}}
2024-09-10 08:11:56,792 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:11:57,180 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:11:57,181 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:11:57,403 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:12:38,741 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:12:38,959 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:12:38,959 - INFO - {'updated': 'initiated stk query for ws_CO_10092024111227369796793076 827142 '}
2024-09-10 08:12:39,033 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:12:39,718 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:12:39,720 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer xYq3qFrM20vrxu1GAtkHBR2hUGrx'}"}
2024-09-10 08:12:39,721 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDgxMjM5', 'Timestamp': '20240910081239', 'CheckoutRequestID': 'ws_CO_10092024111227369796793076'}"}
2024-09-10 08:12:39,722 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:12:40,347 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 08:12:40,348 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024111227369796793076', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024111227369796793076 827142"}
2024-09-10 08:12:40,350 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 08:16:00,089 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793063075', 'CheckoutRequestID': 'ws_CO_10092024111550553728477552', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA538CIM7'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910111559}, {'Name': 'PhoneNumber', 'Value': 254728477552}]}}}}"}
2024-09-10 08:16:00,091 - INFO - {'updated_data': 'callback data began'}
2024-09-10 08:16:00,091 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793063075', 'CheckoutRequestID': 'ws_CO_10092024111550553728477552', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA538CIM7'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910111559}, {'Name': 'PhoneNumber', 'Value': 254728477552}]}}}}}
2024-09-10 08:16:00,311 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:16:00,839 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:16:00,840 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:16:01,052 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:16:03,053 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:16:03,204 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:16:03,206 - INFO - {'updated': 'initiated stk query for ws_CO_10092024111550553728477552 899885 '}
2024-09-10 08:16:03,265 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:16:04,061 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:16:04,063 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer YnzXBiUjjzmiLW35w1qPaQ87kBDl'}"}
2024-09-10 08:16:04,063 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDgxNjAz', 'Timestamp': '20240910081603', 'CheckoutRequestID': 'ws_CO_10092024111550553728477552'}"}
2024-09-10 08:16:04,064 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:16:04,769 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 08:16:04,770 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208793063075', 'CheckoutRequestID': 'ws_CO_10092024111550553728477552', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024111550553728477552 899885"}
2024-09-10 08:16:04,902 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:16:05,096 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:16:05,098 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:16:05,319 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:17:12,186 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793064330', 'CheckoutRequestID': 'ws_CO_10092024111656257721516575', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-10 08:17:12,187 - INFO - {'updated_data': 'callback data began'}
2024-09-10 08:17:12,187 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793064330', 'CheckoutRequestID': 'ws_CO_10092024111656257721516575', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-10 08:17:12,371 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:17:12,767 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:17:12,768 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:17:12,996 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:18:41,752 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15879711', 'CheckoutRequestID': 'ws_CO_10092024111831741796793076', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA138OYCP'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910111841}, {'Name': 'PhoneNumber', 'Value': 254796793076}]}}}}"}
2024-09-10 08:18:41,752 - INFO - {'updated_data': 'callback data began'}
2024-09-10 08:18:41,753 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15879711', 'CheckoutRequestID': 'ws_CO_10092024111831741796793076', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA138OYCP'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910111841}, {'Name': 'PhoneNumber', 'Value': 254796793076}]}}}}}
2024-09-10 08:18:41,918 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:18:42,131 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:18:42,132 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:18:42,345 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:18:46,445 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc15871935', 'CheckoutRequestID': 'ws_CO_10092024111833957723287204', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 122982.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA838PKGQ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910111846}, {'Name': 'PhoneNumber', 'Value': 254723287204}]}}}}"}
2024-09-10 08:18:46,445 - INFO - {'updated_data': 'callback data began'}
2024-09-10 08:18:46,445 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc15871935', 'CheckoutRequestID': 'ws_CO_10092024111833957723287204', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 122982.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA838PKGQ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910111846}, {'Name': 'PhoneNumber', 'Value': 254723287204}]}}}}}
2024-09-10 08:18:46,618 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:18:47,112 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:18:47,113 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:18:47,334 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:23:30,903 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:23:31,020 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:23:31,021 - INFO - {'updated': 'initiated stk query for ws_CO_10092024112309790728128445 827142 '}
2024-09-10 08:23:31,078 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:23:31,650 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:23:31,652 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer FXABbpxJnGeYwRzxSXtglvxQ4VAW'}"}
2024-09-10 08:23:31,653 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDgyMzMx', 'Timestamp': '20240910082331', 'CheckoutRequestID': 'ws_CO_10092024112309790728128445'}"}
2024-09-10 08:23:31,654 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:23:32,281 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 08:23:32,281 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024112309790728128445', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024112309790728128445 827142"}
2024-09-10 08:23:32,283 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 08:23:43,850 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:23:44,009 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:23:44,010 - INFO - {'updated': 'initiated stk query for ws_CO_10092024112309790728128445 827142 '}
2024-09-10 08:23:44,079 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:23:44,662 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:23:44,665 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer LBCcCOieL3EyX6pXZs4gSOoHQKj0'}"}
2024-09-10 08:23:44,665 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDgyMzQ0', 'Timestamp': '20240910082344', 'CheckoutRequestID': 'ws_CO_10092024112309790728128445'}"}
2024-09-10 08:23:44,667 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:23:45,391 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-10 08:23:45,391 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b515888470', 'CheckoutRequestID': 'ws_CO_10092024112309790728128445', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_10092024112309790728128445 827142"}
2024-09-10 08:23:45,539 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:23:45,736 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:23:45,737 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:23:45,992 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:23:54,233 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:23:54,398 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:23:54,399 - INFO - there is a test coming
2024-09-10 08:23:54,399 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 08:23:54,440 - INFO - {'updated_data': 'the data is now as 254728128445'}
2024-09-10 08:23:54,440 - INFO - the data is now as 254728128445
2024-09-10 08:23:54,456 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 08:23:54,456 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 08:23:54,458 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:23:55,144 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:23:55,149 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer g3fNkNm3VskNKpVYjFhbMu4EDsVf'}"}
2024-09-10 08:23:55,150 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDgyMzU1', 'Timestamp': '20240910082355', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '190', 'PartyA': '254728128445', 'PartyB': 827142, 'PhoneNumber': '254728128445', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '264-22063', 'TransactionDesc': 'Some payment'}
2024-09-10 08:23:55,151 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:23:55,940 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 08:23:55,949 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15894734', 'CheckoutRequestID': 'ws_CO_10092024112355682728128445', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 08:26:25,239 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:26:25,386 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:26:25,387 - INFO - there is a test coming
2024-09-10 08:26:25,387 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 08:26:25,431 - INFO - {'updated_data': 'the data is now as 254723318210'}
2024-09-10 08:26:25,431 - INFO - the data is now as 254723318210
2024-09-10 08:26:25,448 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 08:26:25,449 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 08:26:25,450 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:26:26,144 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:26:26,145 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 08xZVbV1dUccyN3GlPrrILvmhcYl'}"}
2024-09-10 08:26:26,146 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDgyNjI2', 'Timestamp': '20240910082626', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '7000', 'PartyA': '254723318210', 'PartyB': 899885, 'PhoneNumber': '254723318210', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053975', 'TransactionDesc': 'Some payment'}
2024-09-10 08:26:26,147 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:26:27,082 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 08:26:27,091 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5446038', 'CheckoutRequestID': 'ws_CO_10092024112626679723318210', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 08:29:37,073 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:29:37,212 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:29:37,213 - INFO - {'updated': 'initiated stk query for ws_CO_10092024112925499714173345 899885 '}
2024-09-10 08:29:37,272 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:29:37,893 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:29:37,895 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer HSYPB5TIrbZ56umFxZ3Wx3npLtTo'}"}
2024-09-10 08:29:37,896 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDgyOTM3', 'Timestamp': '20240910082937', 'CheckoutRequestID': 'ws_CO_10092024112925499714173345'}"}
2024-09-10 08:29:37,897 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:29:38,541 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 08:29:38,542 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024112925499714173345', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024112925499714173345 899885"}
2024-09-10 08:29:38,545 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 08:29:46,575 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:29:46,841 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:29:46,841 - INFO - {'updated': 'initiated stk query for ws_CO_10092024112925499714173345 899885 '}
2024-09-10 08:29:46,902 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:29:47,606 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:29:47,608 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 9gHdn2XnZeyXbd5MKfmCKdTIfAXo'}"}
2024-09-10 08:29:47,609 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDgyOTQ2', 'Timestamp': '20240910082946', 'CheckoutRequestID': 'ws_CO_10092024112925499714173345'}"}
2024-09-10 08:29:47,610 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:29:48,341 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 08:29:48,342 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024112925499714173345', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024112925499714173345 899885"}
2024-09-10 08:29:48,344 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 08:30:29,603 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170208093', 'CheckoutRequestID': 'ws_CO_10092024112925499714173345', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-10 08:30:29,604 - INFO - {'updated_data': 'callback data began'}
2024-09-10 08:30:29,604 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170208093', 'CheckoutRequestID': 'ws_CO_10092024112925499714173345', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-10 08:30:29,767 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:30:30,312 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:30:30,314 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:30:30,533 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:31:49,104 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:31:49,221 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:31:49,222 - INFO - {'updated': 'initiated stk query for ws_CO_10092024113137876701292412 827142 '}
2024-09-10 08:31:49,321 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:31:49,946 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:31:49,948 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer B8creKH33QnE2gyONGCdmB1AmIWL'}"}
2024-09-10 08:31:49,948 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDgzMTQ5', 'Timestamp': '20240910083149', 'CheckoutRequestID': 'ws_CO_10092024113137876701292412'}"}
2024-09-10 08:31:49,950 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:31:50,598 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 08:31:50,599 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075400511', 'CheckoutRequestID': 'ws_CO_10092024113137876701292412', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024113137876701292412 827142"}
2024-09-10 08:31:50,763 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:31:51,252 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:31:51,253 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:31:51,837 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:33:51,381 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:33:51,618 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:33:51,619 - INFO - there is a test coming
2024-09-10 08:33:51,619 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 08:33:51,668 - INFO - {'updated_data': 'the data is now as 254714173345'}
2024-09-10 08:33:51,668 - INFO - the data is now as 254714173345
2024-09-10 08:33:51,683 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 08:33:51,684 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 08:33:51,685 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:33:52,530 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:33:52,532 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer bGk33vsGYjAgIoz0upFkqXD70LRE'}"}
2024-09-10 08:33:52,533 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDgzMzUy', 'Timestamp': '20240910083352', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '37000', 'PartyA': '254714173345', 'PartyB': 899885, 'PhoneNumber': '254714173345', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA1628085LM-1725957229711', 'TransactionDesc': 'Some payment'}
2024-09-10 08:33:52,534 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:33:53,396 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 08:33:53,402 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169491742', 'CheckoutRequestID': 'ws_CO_10092024113353058714173345', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 08:34:51,984 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:34:52,148 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:34:52,149 - INFO - {'updated': 'initiated stk query for ws_CO_10092024113438761715684537 827142 '}
2024-09-10 08:34:52,211 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:34:52,915 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:34:52,918 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer coksaP4jl4tR1f7ZCgXeD3Z2oCbS'}"}
2024-09-10 08:34:52,918 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDgzNDUy', 'Timestamp': '20240910083452', 'CheckoutRequestID': 'ws_CO_10092024113438761715684537'}"}
2024-09-10 08:34:52,919 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:34:53,545 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 08:34:53,546 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5467937', 'CheckoutRequestID': 'ws_CO_10092024113438761715684537', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024113438761715684537 827142"}
2024-09-10 08:34:53,686 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:34:54,191 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:34:54,193 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:34:54,420 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:35:36,405 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5469555', 'CheckoutRequestID': 'ws_CO_10092024113518850721226861', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 17586.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA33AXLF1'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910113535}, {'Name': 'PhoneNumber', 'Value': 254721226861}]}}}}"}
2024-09-10 08:35:36,406 - INFO - {'updated_data': 'callback data began'}
2024-09-10 08:35:36,406 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5469555', 'CheckoutRequestID': 'ws_CO_10092024113518850721226861', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 17586.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA33AXLF1'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910113535}, {'Name': 'PhoneNumber', 'Value': 254721226861}]}}}}}
2024-09-10 08:35:36,564 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:35:36,795 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:35:36,796 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:35:37,038 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:35:40,057 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:35:40,244 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:35:40,245 - INFO - {'updated': 'initiated stk query for ws_CO_10092024113518850721226861 827142 '}
2024-09-10 08:35:40,309 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:35:40,917 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:35:40,918 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Q84NfuUAWd3fbRsBghImRmXKnBtI'}"}
2024-09-10 08:35:40,919 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDgzNTQw', 'Timestamp': '20240910083540', 'CheckoutRequestID': 'ws_CO_10092024113518850721226861'}"}
2024-09-10 08:35:40,920 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:35:41,637 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 08:35:41,638 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5469555', 'CheckoutRequestID': 'ws_CO_10092024113518850721226861', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024113518850721226861 827142"}
2024-09-10 08:35:41,752 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:35:42,264 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:35:42,265 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:35:42,482 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:36:16,005 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:36:16,550 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:36:16,551 - INFO - there is a test coming
2024-09-10 08:36:16,551 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 08:36:16,596 - INFO - {'updated_data': 'the data is now as 254722908066'}
2024-09-10 08:36:16,596 - INFO - the data is now as 254722908066
2024-09-10 08:36:16,614 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 08:36:16,615 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 08:36:16,616 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:36:17,235 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:36:17,237 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Ut09OuDfSiMalzphwJRnYPHqEIzB'}"}
2024-09-10 08:36:17,237 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDgzNjE3', 'Timestamp': '20240910083617', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '36000', 'PartyA': '254722908066', 'PartyB': 899885, 'PhoneNumber': '254722908066', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053441', 'TransactionDesc': 'Some payment'}
2024-09-10 08:36:17,238 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:36:18,077 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 08:36:18,084 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15928122', 'CheckoutRequestID': 'ws_CO_10092024113617765722908066', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 08:36:29,081 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:36:29,202 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:36:29,203 - INFO - {'updated': 'initiated stk query for ws_CO_10092024113617765722908066 899885 '}
2024-09-10 08:36:29,253 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:36:29,814 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:36:29,816 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer f6Bo9TG4hD7jcii8l34ixmoQMTMV'}"}
2024-09-10 08:36:29,816 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDgzNjI5', 'Timestamp': '20240910083629', 'CheckoutRequestID': 'ws_CO_10092024113617765722908066'}"}
2024-09-10 08:36:29,818 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:36:30,511 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 08:36:30,511 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15928122', 'CheckoutRequestID': 'ws_CO_10092024113617765722908066', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024113617765722908066 899885"}
2024-09-10 08:36:30,646 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:36:30,854 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:36:30,855 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:36:31,367 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:37:57,708 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:37:57,722 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 08:37:57,722 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 08:55:08,823 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:55:08,971 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:55:08,971 - INFO - {'updated': 'initiated stk query for ws_CO_10092024115446731741259469 899885 '}
2024-09-10 08:55:09,051 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:55:09,703 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:55:09,705 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer DCXig3mp1HMCHOd0bc9vYpHDStek'}"}
2024-09-10 08:55:09,705 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDg1NTA5', 'Timestamp': '20240910085509', 'CheckoutRequestID': 'ws_CO_10092024115446731741259469'}"}
2024-09-10 08:55:09,706 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:55:10,432 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 08:55:10,433 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87421103', 'CheckoutRequestID': 'ws_CO_10092024115446731741259469', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024115446731741259469 899885"}
2024-09-10 08:55:10,611 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:55:10,815 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:55:10,818 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:55:11,053 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:55:26,342 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075427770', 'CheckoutRequestID': 'ws_CO_10092024115512252728128445', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA53DJV3L'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910115525}, {'Name': 'PhoneNumber', 'Value': 254728128445}]}}}}"}
2024-09-10 08:55:26,342 - INFO - {'updated_data': 'callback data began'}
2024-09-10 08:55:26,342 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075427770', 'CheckoutRequestID': 'ws_CO_10092024115512252728128445', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA53DJV3L'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910115525}, {'Name': 'PhoneNumber', 'Value': 254728128445}]}}}}}
2024-09-10 08:55:26,496 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:55:26,694 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:55:26,695 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:55:26,912 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:55:33,656 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:55:33,791 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:55:33,792 - INFO - {'updated': 'initiated stk query for ws_CO_10092024115512252728128445 827142 '}
2024-09-10 08:55:33,857 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:55:34,448 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:55:34,450 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer pzzNz8mye4qElE7gorfqGDIEoxPx'}"}
2024-09-10 08:55:34,450 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDg1NTMz', 'Timestamp': '20240910085533', 'CheckoutRequestID': 'ws_CO_10092024115512252728128445'}"}
2024-09-10 08:55:34,452 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:55:35,251 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 08:55:35,251 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075427770', 'CheckoutRequestID': 'ws_CO_10092024115512252728128445', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024115512252728128445 827142"}
2024-09-10 08:55:35,380 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:55:35,575 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:55:35,576 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:55:36,093 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:56:03,342 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:56:03,497 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:56:03,498 - INFO - there is a test coming
2024-09-10 08:56:03,498 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 08:56:03,544 - INFO - {'updated_data': 'the data is now as 254711531000'}
2024-09-10 08:56:03,544 - INFO - the data is now as 254711531000
2024-09-10 08:56:03,562 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 08:56:03,563 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 08:56:03,564 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:56:04,156 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:56:04,158 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer iWyLQJR7YaqmAp5Gao2TuLrxM5PC'}"}
2024-09-10 08:56:04,158 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDg1NjA0', 'Timestamp': '20240910085604', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254711531000', 'PartyB': 899885, 'PhoneNumber': '254711531000', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054007', 'TransactionDesc': 'Some payment'}
2024-09-10 08:56:04,160 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:56:04,917 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 08:56:04,940 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169753145', 'CheckoutRequestID': 'ws_CO_10092024115604704711531000', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 09:09:07,801 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:09:07,927 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:09:07,928 - INFO - there is a test coming
2024-09-10 09:09:07,928 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 09:09:07,987 - INFO - {'updated_data': 'the data is now as 254708766467'}
2024-09-10 09:09:07,988 - INFO - the data is now as 254708766467
2024-09-10 09:09:08,005 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 09:09:08,006 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 09:09:08,007 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:09:08,595 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:09:08,597 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer mMu9q63E2OghQsGWTidQzE1pcCHP'}"}
2024-09-10 09:09:08,598 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDkwOTA4', 'Timestamp': '20240910090908', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254708766467', 'PartyB': 827142, 'PhoneNumber': '254708766467', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-118375', 'TransactionDesc': 'Some payment'}
2024-09-10 09:09:08,599 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:09:09,351 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 09:09:09,358 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208793123529', 'CheckoutRequestID': 'ws_CO_10092024120909118708766467', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 09:09:11,914 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793123529', 'CheckoutRequestID': 'ws_CO_10092024120909118708766467', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-10 09:09:11,915 - INFO - {'updated_data': 'callback data began'}
2024-09-10 09:09:11,915 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793123529', 'CheckoutRequestID': 'ws_CO_10092024120909118708766467', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-10 09:09:12,069 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:09:12,255 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:09:12,264 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:09:12,492 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:09:20,254 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:09:20,389 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:09:20,389 - INFO - {'updated': 'initiated stk query for ws_CO_10092024120909118708766467 827142 '}
2024-09-10 09:09:20,458 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:09:21,033 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:09:21,035 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer kAUNR2P3Crh0AuaHmMQc4UZ8RkgC'}"}
2024-09-10 09:09:21,036 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDkwOTIw', 'Timestamp': '20240910090920', 'CheckoutRequestID': 'ws_CO_10092024120909118708766467'}"}
2024-09-10 09:09:21,037 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:09:21,707 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-10 09:09:21,708 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208793123529', 'CheckoutRequestID': 'ws_CO_10092024120909118708766467', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_10092024120909118708766467 827142"}
2024-09-10 09:09:21,842 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:09:22,049 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:09:22,051 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:09:22,484 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:09:36,676 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:09:36,706 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 09:09:36,707 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 09:10:00,125 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516012928', 'CheckoutRequestID': 'ws_CO_10092024120944989720253767', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1600.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA03FHGTA'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910120956}, {'Name': 'PhoneNumber', 'Value': 254720253767}]}}}}"}
2024-09-10 09:10:00,126 - INFO - {'updated_data': 'callback data began'}
2024-09-10 09:10:00,126 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516012928', 'CheckoutRequestID': 'ws_CO_10092024120944989720253767', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1600.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA03FHGTA'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910120956}, {'Name': 'PhoneNumber', 'Value': 254720253767}]}}}}}
2024-09-10 09:10:00,312 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:10:00,850 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:10:00,851 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:10:01,083 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:10:25,286 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169769196', 'CheckoutRequestID': 'ws_CO_10092024121015231726068832', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA63FJXY2'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910121024}, {'Name': 'PhoneNumber', 'Value': 254726068832}]}}}}"}
2024-09-10 09:10:25,286 - INFO - {'updated_data': 'callback data began'}
2024-09-10 09:10:25,286 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169769196', 'CheckoutRequestID': 'ws_CO_10092024121015231726068832', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA63FJXY2'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910121024}, {'Name': 'PhoneNumber', 'Value': 254726068832}]}}}}}
2024-09-10 09:10:25,444 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:10:25,938 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:10:25,940 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:10:26,149 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:10:36,306 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:10:36,341 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 09:10:36,342 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 09:10:37,941 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:10:37,962 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 09:10:37,963 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 09:12:17,539 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:12:17,670 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:12:17,671 - INFO - {'updated': 'initiated stk query for ws_CO_10092024121116446723848598 827142 '}
2024-09-10 09:12:17,735 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:12:18,361 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:12:18,363 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer nfDpvVpkUQNoAPxp3qWjlg6L4GRP'}"}
2024-09-10 09:12:18,364 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDkxMjE3', 'Timestamp': '20240910091217', 'CheckoutRequestID': 'ws_CO_10092024121116446723848598'}"}
2024-09-10 09:12:18,365 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:12:18,995 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 09:12:18,995 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169770306', 'CheckoutRequestID': 'ws_CO_10092024121116446723848598', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024121116446723848598 827142"}
2024-09-10 09:12:19,111 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:12:19,599 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:12:19,601 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:12:19,833 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:13:45,526 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee595936791', 'CheckoutRequestID': 'ws_CO_10092024121332968720253767', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1599.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA53FZYAD'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910121344}, {'Name': 'PhoneNumber', 'Value': 254720253767}]}}}}"}
2024-09-10 09:13:45,527 - INFO - {'updated_data': 'callback data began'}
2024-09-10 09:13:45,527 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee595936791', 'CheckoutRequestID': 'ws_CO_10092024121332968720253767', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1599.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA53FZYAD'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910121344}, {'Name': 'PhoneNumber', 'Value': 254720253767}]}}}}}
2024-09-10 09:13:45,707 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:13:46,094 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:13:46,096 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:13:46,349 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:14:23,252 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:14:23,521 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:14:23,521 - INFO - there is a test coming
2024-09-10 09:14:23,522 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 09:14:23,574 - INFO - {'updated_data': 'the data is now as 254795004136'}
2024-09-10 09:14:23,575 - INFO - the data is now as 254795004136
2024-09-10 09:14:23,591 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 09:14:23,591 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 09:14:23,593 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:14:24,276 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:14:24,278 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer bmiUGVOuLD2zLLMIs7djuthMhRNU'}"}
2024-09-10 09:14:24,278 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDkxNDI0', 'Timestamp': '20240910091424', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5100', 'PartyA': '254795004136', 'PartyB': 827142, 'PhoneNumber': '254795004136', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-35296', 'TransactionDesc': 'Some payment'}
2024-09-10 09:14:24,279 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:14:25,041 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 09:14:25,055 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169773787', 'CheckoutRequestID': 'ws_CO_10092024121424811795004136', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 09:16:34,296 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:16:34,534 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:16:34,536 - INFO - there is a test coming
2024-09-10 09:16:34,536 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 09:16:34,583 - INFO - {'updated_data': 'the data is now as 254721993407'}
2024-09-10 09:16:34,583 - INFO - the data is now as 254721993407
2024-09-10 09:16:34,615 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 09:16:34,615 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 09:16:34,616 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:16:35,268 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:16:35,270 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 9nJpHc6JhD3rHD906NqAjNZGZqE3'}"}
2024-09-10 09:16:35,271 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDkxNjM1', 'Timestamp': '20240910091635', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254721993407', 'PartyB': 827142, 'PhoneNumber': '254721993407', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-21036', 'TransactionDesc': 'Some payment'}
2024-09-10 09:16:35,273 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:16:36,056 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 09:16:36,071 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee595945484', 'CheckoutRequestID': 'ws_CO_10092024121635819721993407', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 09:16:42,537 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:16:42,696 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:16:42,697 - INFO - {'updated': 'initiated stk query for ws_CO_10092024121630400721933259 899885 '}
2024-09-10 09:16:42,771 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:16:43,356 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:16:43,358 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 9DCoP4KmAg01GSHU4SCr0ZGA7wUs'}"}
2024-09-10 09:16:43,359 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDkxNjQy', 'Timestamp': '20240910091642', 'CheckoutRequestID': 'ws_CO_10092024121630400721933259'}"}
2024-09-10 09:16:43,360 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:16:43,983 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 09:16:43,984 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16027740', 'CheckoutRequestID': 'ws_CO_10092024121630400721933259', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024121630400721933259 899885"}
2024-09-10 09:16:44,114 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:16:44,521 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:16:44,522 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:16:45,057 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:16:47,556 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:16:47,752 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:16:47,752 - INFO - {'updated': 'initiated stk query for ws_CO_10092024121635819721993407 827142 '}
2024-09-10 09:16:47,832 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:16:48,409 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:16:48,411 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Q0lw1aAWmAXfPjT7ACRvtjPU7QTq'}"}
2024-09-10 09:16:48,411 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDkxNjQ3', 'Timestamp': '20240910091647', 'CheckoutRequestID': 'ws_CO_10092024121635819721993407'}"}
2024-09-10 09:16:48,412 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:16:49,116 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 09:16:49,117 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024121635819721993407', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024121635819721993407 827142"}
2024-09-10 09:16:49,120 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 09:18:31,316 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:18:31,453 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:18:31,453 - INFO - there is a test coming
2024-09-10 09:18:31,454 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 09:18:31,497 - INFO - {'updated_data': 'the data is now as 254798403247'}
2024-09-10 09:18:31,498 - INFO - the data is now as 254798403247
2024-09-10 09:18:31,515 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 09:18:31,515 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 09:18:31,517 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:18:32,191 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:18:32,193 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer GPZ3AsqPIozcVyeuoWX3UMoGZAdV'}"}
2024-09-10 09:18:32,194 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDkxODMy', 'Timestamp': '20240910091832', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254798403247', 'PartyB': 827142, 'PhoneNumber': '254798403247', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '121-47749', 'TransactionDesc': 'Some payment'}
2024-09-10 09:18:32,195 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:18:33,084 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 09:18:33,090 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16033323', 'CheckoutRequestID': 'ws_CO_10092024121832786798403247', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 09:19:10,266 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:19:10,387 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:19:10,388 - INFO - there is a test coming
2024-09-10 09:19:10,388 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 09:19:10,440 - INFO - {'updated_data': 'the data is now as 254798403247'}
2024-09-10 09:19:10,440 - INFO - the data is now as 254798403247
2024-09-10 09:19:10,463 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 09:19:10,464 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 09:19:10,465 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:19:11,047 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:19:11,049 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 6u9tldueHy4pX5AmIQPbqvGfpohv'}"}
2024-09-10 09:19:11,050 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDkxOTEx', 'Timestamp': '20240910091911', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2001', 'PartyA': '254798403247', 'PartyB': 827142, 'PhoneNumber': '254798403247', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-51', 'TransactionDesc': 'Some payment'}
2024-09-10 09:19:11,051 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:19:11,768 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 09:19:11,775 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516038638', 'CheckoutRequestID': 'ws_CO_10092024121911580798403247', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 09:19:15,917 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:19:15,945 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 09:19:15,946 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 09:26:53,732 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:26:53,985 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:26:53,986 - INFO - {'updated': 'initiated stk query for ws_CO_10092024122634681720670946 827142 '}
2024-09-10 09:26:54,059 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:26:54,675 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:26:54,677 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer xYdS9gTsrK4GBg8BHdkaylsMcCYA'}"}
2024-09-10 09:26:54,677 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDkyNjU0', 'Timestamp': '20240910092654', 'CheckoutRequestID': 'ws_CO_10092024122634681720670946'}"}
2024-09-10 09:26:54,678 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:26:55,324 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 09:26:55,325 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169786911', 'CheckoutRequestID': 'ws_CO_10092024122634681720670946', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024122634681720670946 827142"}
2024-09-10 09:26:55,444 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:26:55,628 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:26:55,630 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:26:56,290 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:30:31,913 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:30:32,065 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:30:32,066 - INFO - there is a test coming
2024-09-10 09:30:32,066 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 09:30:32,115 - INFO - {'updated_data': 'the data is now as 254726291966'}
2024-09-10 09:30:32,115 - INFO - the data is now as 254726291966
2024-09-10 09:30:32,134 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 09:30:32,134 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 09:30:32,136 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:30:32,922 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:30:32,925 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer z7TOKHH9qAAJwsLFO0poKJLycKPe'}"}
2024-09-10 09:30:32,925 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDkzMDMy', 'Timestamp': '20240910093032', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254726291966', 'PartyB': 827142, 'PhoneNumber': '254726291966', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-6637', 'TransactionDesc': 'Some payment'}
2024-09-10 09:30:32,926 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:30:33,829 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 09:30:33,835 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169791024', 'CheckoutRequestID': 'ws_CO_10092024123033451726291966', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 09:30:45,200 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169791024', 'CheckoutRequestID': 'ws_CO_10092024123033451726291966', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA83IAIAE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910123044}, {'Name': 'PhoneNumber', 'Value': 254726291966}]}}}}"}
2024-09-10 09:30:45,200 - INFO - {'updated_data': 'callback data began'}
2024-09-10 09:30:45,200 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169791024', 'CheckoutRequestID': 'ws_CO_10092024123033451726291966', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA83IAIAE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910123044}, {'Name': 'PhoneNumber', 'Value': 254726291966}]}}}}}
2024-09-10 09:30:45,363 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:30:45,583 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:30:45,584 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:30:45,820 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:30:50,719 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585052030948', 'CheckoutRequestID': 'ws_CO_10092024123037051701699666', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA33IANGX'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910123050}, {'Name': 'PhoneNumber', 'Value': 254701699666}]}}}}"}
2024-09-10 09:30:50,719 - INFO - {'updated_data': 'callback data began'}
2024-09-10 09:30:50,720 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585052030948', 'CheckoutRequestID': 'ws_CO_10092024123037051701699666', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA33IANGX'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910123050}, {'Name': 'PhoneNumber', 'Value': 254701699666}]}}}}}
2024-09-10 09:30:50,910 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:30:51,126 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:30:51,128 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:30:51,700 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:30:58,071 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:30:58,111 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 09:30:58,112 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 09:31:35,955 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:31:36,085 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:31:36,086 - INFO - {'updated': 'initiated stk query for ws_CO_10092024123044525714313124 827142 '}
2024-09-10 09:31:36,143 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:31:36,737 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:31:36,740 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer egVbHwuKugkFrXPJZzP7BPSNqojp'}"}
2024-09-10 09:31:36,740 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDkzMTM2', 'Timestamp': '20240910093136', 'CheckoutRequestID': 'ws_CO_10092024123044525714313124'}"}
2024-09-10 09:31:36,741 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:31:37,363 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 09:31:37,364 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170276825', 'CheckoutRequestID': 'ws_CO_10092024123044525714313124', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024123044525714313124 827142"}
2024-09-10 09:31:37,489 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:31:37,700 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:31:37,702 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:31:37,925 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:31:38,030 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:31:38,051 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 09:31:38,052 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 09:34:39,918 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:34:40,032 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:34:40,033 - INFO - {'updated': 'initiated stk query for ws_CO_10092024121731974721691202 899885 '}
2024-09-10 09:34:40,096 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:34:40,851 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:34:40,853 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer hxKrJSuOpAYrc2Q2lHZwkBOEkiHq'}"}
2024-09-10 09:34:40,853 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDkzNDQw', 'Timestamp': '20240910093440', 'CheckoutRequestID': 'ws_CO_10092024121731974721691202'}"}
2024-09-10 09:34:40,855 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:34:41,497 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 09:34:41,498 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16030693', 'CheckoutRequestID': 'ws_CO_10092024121731974721691202', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024121731974721691202 899885"}
2024-09-10 09:34:41,615 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:34:42,143 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:34:42,145 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:34:42,365 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:34:52,935 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:34:52,959 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 09:34:52,960 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 09:34:54,952 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:34:54,966 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 09:34:54,967 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 09:37:01,662 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:37:01,691 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 09:37:01,692 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 09:38:54,413 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596005002', 'CheckoutRequestID': 'ws_CO_10092024123841984710345758', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 14000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA93JE7J7'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910123853}, {'Name': 'PhoneNumber', 'Value': 254710345758}]}}}}"}
2024-09-10 09:38:54,413 - INFO - {'updated_data': 'callback data began'}
2024-09-10 09:38:54,413 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596005002', 'CheckoutRequestID': 'ws_CO_10092024123841984710345758', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 14000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA93JE7J7'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910123853}, {'Name': 'PhoneNumber', 'Value': 254710345758}]}}}}}
2024-09-10 09:38:54,598 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:38:54,803 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:38:54,804 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:38:55,357 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:41:14,281 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:41:14,439 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:41:14,440 - INFO - there is a test coming
2024-09-10 09:41:14,440 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 09:41:14,499 - INFO - {'updated_data': 'the data is now as 254701819662'}
2024-09-10 09:41:14,500 - INFO - the data is now as 254701819662
2024-09-10 09:41:14,523 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 09:41:14,523 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 09:41:14,524 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:41:15,120 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:41:15,122 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 5C9pcQk95lSKKFwcPowjX9OKz3hl'}"}
2024-09-10 09:41:15,123 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDk0MTE1', 'Timestamp': '20240910094115', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '4581', 'PartyA': '254701819662', 'PartyB': 827142, 'PhoneNumber': '254701819662', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-36654', 'TransactionDesc': 'Some payment'}
2024-09-10 09:41:15,124 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:41:16,007 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 09:41:16,014 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075478753', 'CheckoutRequestID': 'ws_CO_10092024124115739701819662', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 09:47:15,909 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170295196', 'CheckoutRequestID': 'ws_CO_10092024124700289725571210', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 800.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA73KJ401'}, {'Name': 'TransactionDate', 'Value': 20240910124715}, {'Name': 'PhoneNumber', 'Value': 254725571210}]}}}}"}
2024-09-10 09:47:15,910 - INFO - {'updated_data': 'callback data began'}
2024-09-10 09:47:15,910 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170295196', 'CheckoutRequestID': 'ws_CO_10092024124700289725571210', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 800.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA73KJ401'}, {'Name': 'TransactionDate', 'Value': 20240910124715}, {'Name': 'PhoneNumber', 'Value': 254725571210}]}}}}}
2024-09-10 09:47:16,067 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:47:16,469 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:47:16,470 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:47:17,010 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:50:10,147 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:50:10,333 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:50:10,334 - INFO - there is a test coming
2024-09-10 09:50:10,334 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 09:50:10,382 - INFO - {'updated_data': 'the data is now as 254742305719'}
2024-09-10 09:50:10,382 - INFO - the data is now as 254742305719
2024-09-10 09:50:10,400 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 09:50:10,400 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 09:50:10,401 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:50:11,054 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:50:11,056 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer h7fqzTDaaAe1El7hzGIYs7D3XKTD'}"}
2024-09-10 09:50:11,057 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDk1MDEx', 'Timestamp': '20240910095011', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254742305719', 'PartyB': 899885, 'PhoneNumber': '254742305719', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0626595-1725961809449', 'TransactionDesc': 'Some payment'}
2024-09-10 09:50:11,058 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:50:11,836 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 09:50:11,848 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169812991', 'CheckoutRequestID': 'ws_CO_10092024125011591742305719', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 09:50:20,685 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169812991', 'CheckoutRequestID': 'ws_CO_10092024125011591742305719', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA83KYEX4'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910125020}, {'Name': 'PhoneNumber', 'Value': 254742305719}]}}}}"}
2024-09-10 09:50:20,686 - INFO - {'updated_data': 'callback data began'}
2024-09-10 09:50:20,686 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169812991', 'CheckoutRequestID': 'ws_CO_10092024125011591742305719', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA83KYEX4'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910125020}, {'Name': 'PhoneNumber', 'Value': 254742305719}]}}}}}
2024-09-10 09:50:20,841 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:50:21,092 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:50:21,093 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:50:21,327 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:50:32,762 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:50:32,876 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:50:32,877 - INFO - {'updated': 'initiated stk query for ws_CO_10092024125011591742305719 899885 '}
2024-09-10 09:50:32,940 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:50:33,582 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:50:33,585 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ahGkoZ09SP2FWbLg4GBkeIZRPudI'}"}
2024-09-10 09:50:33,585 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDk1MDMy', 'Timestamp': '20240910095032', 'CheckoutRequestID': 'ws_CO_10092024125011591742305719'}"}
2024-09-10 09:50:33,586 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:50:34,181 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 09:50:34,182 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169812991', 'CheckoutRequestID': 'ws_CO_10092024125011591742305719', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024125011591742305719 899885"}
2024-09-10 09:50:34,344 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:50:34,533 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:50:34,535 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:50:34,755 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:53:13,251 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:53:13,363 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:53:13,365 - INFO - there is a test coming
2024-09-10 09:53:13,365 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 09:53:13,425 - INFO - {'updated_data': 'the data is now as 254710760319'}
2024-09-10 09:53:13,426 - INFO - the data is now as 254710760319
2024-09-10 09:53:13,442 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 09:53:13,442 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 09:53:13,443 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:53:14,059 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:53:14,061 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer JPcABup2W8JYrWlCGXsM1t9lv9uY'}"}
2024-09-10 09:53:14,061 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDk1MzE0', 'Timestamp': '20240910095314', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254710760319', 'PartyB': 827142, 'PhoneNumber': '254710760319', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-132135', 'TransactionDesc': 'Some payment'}
2024-09-10 09:53:14,063 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:53:14,856 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 09:53:14,867 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585052091159', 'CheckoutRequestID': 'ws_CO_10092024125314677710760319', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 09:53:45,630 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585052091159', 'CheckoutRequestID': 'ws_CO_10092024125314677710760319', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-10 09:53:45,630 - INFO - {'updated_data': 'callback data began'}
2024-09-10 09:53:45,630 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585052091159', 'CheckoutRequestID': 'ws_CO_10092024125314677710760319', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-10 09:53:45,782 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:53:46,216 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:53:46,217 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:53:46,487 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:54:15,132 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075493446', 'CheckoutRequestID': 'ws_CO_10092024125406485728810729', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA43LHTX6'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910125414}, {'Name': 'PhoneNumber', 'Value': 254728810729}]}}}}"}
2024-09-10 09:54:15,132 - INFO - {'updated_data': 'callback data began'}
2024-09-10 09:54:15,132 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075493446', 'CheckoutRequestID': 'ws_CO_10092024125406485728810729', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA43LHTX6'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910125414}, {'Name': 'PhoneNumber', 'Value': 254728810729}]}}}}}
2024-09-10 09:54:15,288 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:54:15,489 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:54:15,490 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:54:15,750 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:58:10,325 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585052103113', 'CheckoutRequestID': 'ws_CO_10092024125755677114296480', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA03M0P9Q'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910125809}, {'Name': 'PhoneNumber', 'Value': 254114296480}]}}}}"}
2024-09-10 09:58:10,325 - INFO - {'updated_data': 'callback data began'}
2024-09-10 09:58:10,325 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585052103113', 'CheckoutRequestID': 'ws_CO_10092024125755677114296480', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA03M0P9Q'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910125809}, {'Name': 'PhoneNumber', 'Value': 254114296480}]}}}}}
2024-09-10 09:58:10,475 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:58:10,979 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:58:10,981 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:58:11,499 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:58:13,311 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585052103324', 'CheckoutRequestID': 'ws_CO_10092024125759863726493051', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 12500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA43M1AK8'}, {'Name': 'TransactionDate', 'Value': 20240910125812}, {'Name': 'PhoneNumber', 'Value': 254726493051}]}}}}"}
2024-09-10 09:58:13,312 - INFO - {'updated_data': 'callback data began'}
2024-09-10 09:58:13,317 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585052103324', 'CheckoutRequestID': 'ws_CO_10092024125759863726493051', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 12500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA43M1AK8'}, {'Name': 'TransactionDate', 'Value': 20240910125812}, {'Name': 'PhoneNumber', 'Value': 254726493051}]}}}}}
2024-09-10 09:58:13,498 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:58:13,693 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:58:13,694 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:58:14,212 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:58:34,887 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:58:35,070 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:58:35,071 - INFO - {'updated': 'initiated stk query for ws_CO_10092024125755677114296480 899885 '}
2024-09-10 09:58:35,132 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:58:35,814 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:58:35,816 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer MBqSKKvpjEaUdzsyxGf3xLWXdiOW'}"}
2024-09-10 09:58:35,816 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDk1ODM1', 'Timestamp': '20240910095835', 'CheckoutRequestID': 'ws_CO_10092024125755677114296480'}"}
2024-09-10 09:58:35,818 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:58:36,467 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 09:58:36,468 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585052103113', 'CheckoutRequestID': 'ws_CO_10092024125755677114296480', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024125755677114296480 899885"}
2024-09-10 09:58:36,615 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:58:36,830 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:58:36,831 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:58:37,065 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:01:21,581 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:01:21,708 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:01:21,709 - INFO - there is a test coming
2024-09-10 10:01:21,709 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 10:01:21,774 - INFO - {'updated_data': 'the data is now as 254742954827'}
2024-09-10 10:01:21,775 - INFO - the data is now as 254742954827
2024-09-10 10:01:21,791 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 10:01:21,791 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 10:01:21,792 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:01:22,575 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:01:22,578 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer sXvupt5fQUyiiaDC0PD89VSYBm9s'}"}
2024-09-10 10:01:22,578 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTAwMTIy', 'Timestamp': '20240910100122', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5800', 'PartyA': '254742954827', 'PartyB': 899885, 'PhoneNumber': '254742954827', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054056', 'TransactionDesc': 'Some payment'}
2024-09-10 10:01:22,580 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:01:23,503 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 10:01:23,509 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169825236', 'CheckoutRequestID': 'ws_CO_10092024130123126742954827', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 10:01:34,515 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:01:34,696 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:01:34,696 - INFO - {'updated': 'initiated stk query for ws_CO_10092024130123126742954827 899885 '}
2024-09-10 10:01:34,776 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:01:35,368 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:01:35,370 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer nAAhfDkr7HcGAbDjnrsVzvR0lcaY'}"}
2024-09-10 10:01:35,377 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTAwMTM0', 'Timestamp': '20240910100134', 'CheckoutRequestID': 'ws_CO_10092024130123126742954827'}"}
2024-09-10 10:01:35,379 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:01:35,997 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 10:01:35,998 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024130123126742954827', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024130123126742954827 899885"}
2024-09-10 10:01:36,001 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 10:10:03,901 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:10:04,083 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:10:04,084 - INFO - there is a test coming
2024-09-10 10:10:04,084 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 10:10:04,138 - INFO - {'updated_data': 'the data is now as 254712927173'}
2024-09-10 10:10:04,139 - INFO - the data is now as 254712927173
2024-09-10 10:10:04,154 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 10:10:04,154 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 10:10:04,156 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:10:04,942 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:10:04,945 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer xB2vYXES6lhZr4dHOTzFgPHAkRcI'}"}
2024-09-10 10:10:04,945 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTAxMDA0', 'Timestamp': '20240910101004', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1500', 'PartyA': '254712927173', 'PartyB': 827142, 'PhoneNumber': '254712927173', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-24024', 'TransactionDesc': 'Some payment'}
2024-09-10 10:10:04,946 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:10:05,668 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 10:10:05,674 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596089330', 'CheckoutRequestID': 'ws_CO_10092024131005479712927173', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 10:10:36,604 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:10:36,737 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:10:36,738 - INFO - {'updated': 'initiated stk query for ws_CO_10092024131005479712927173 827142 '}
2024-09-10 10:10:36,799 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:10:37,388 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:10:37,390 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer GoMggaHcwbLaJo6Z1inApvt7QRi9'}"}
2024-09-10 10:10:37,390 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTAxMDM2', 'Timestamp': '20240910101036', 'CheckoutRequestID': 'ws_CO_10092024131005479712927173'}"}
2024-09-10 10:10:37,391 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:10:38,081 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 10:10:38,081 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596089330', 'CheckoutRequestID': 'ws_CO_10092024131005479712927173', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024131005479712927173 827142"}
2024-09-10 10:10:38,221 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:10:38,406 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:10:38,408 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:10:38,618 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:11:04,305 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169836165', 'CheckoutRequestID': 'ws_CO_10092024131052098720572961', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA93NSRUX'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910131103}, {'Name': 'PhoneNumber', 'Value': 254720572961}]}}}}"}
2024-09-10 10:11:04,306 - INFO - {'updated_data': 'callback data began'}
2024-09-10 10:11:04,306 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169836165', 'CheckoutRequestID': 'ws_CO_10092024131052098720572961', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA93NSRUX'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910131103}, {'Name': 'PhoneNumber', 'Value': 254720572961}]}}}}}
2024-09-10 10:11:04,458 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:11:04,948 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:11:04,951 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:11:05,478 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:11:10,906 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:11:11,042 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:11:11,043 - INFO - {'updated': 'initiated stk query for ws_CO_10092024131052098720572961 827142 '}
2024-09-10 10:11:11,105 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:11:11,689 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:11:11,691 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer A3aWdOsBdsUhxeKxzP0L7xAkRKZo'}"}
2024-09-10 10:11:11,692 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTAxMTEx', 'Timestamp': '20240910101111', 'CheckoutRequestID': 'ws_CO_10092024131052098720572961'}"}
2024-09-10 10:11:11,693 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:11:12,320 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 10:11:12,321 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169836165', 'CheckoutRequestID': 'ws_CO_10092024131052098720572961', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024131052098720572961 827142"}
2024-09-10 10:11:12,487 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:11:12,693 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:11:12,695 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:11:12,940 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:14:11,983 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596099911', 'CheckoutRequestID': 'ws_CO_10092024131401359705574420', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA53O896Z'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910131411}, {'Name': 'PhoneNumber', 'Value': 254705574420}]}}}}"}
2024-09-10 10:14:11,983 - INFO - {'updated_data': 'callback data began'}
2024-09-10 10:14:11,983 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596099911', 'CheckoutRequestID': 'ws_CO_10092024131401359705574420', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA53O896Z'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910131411}, {'Name': 'PhoneNumber', 'Value': 254705574420}]}}}}}
2024-09-10 10:14:12,146 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:14:12,353 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:14:12,354 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:14:12,574 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:17:22,262 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169607478', 'CheckoutRequestID': 'ws_CO_10092024131710710705574420', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-10 10:17:22,262 - INFO - {'updated_data': 'callback data began'}
2024-09-10 10:17:22,262 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169607478', 'CheckoutRequestID': 'ws_CO_10092024131710710705574420', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-10 10:17:22,440 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:17:22,944 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:17:22,945 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:17:23,506 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:17:45,428 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:17:45,595 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:17:45,596 - INFO - {'updated': 'initiated stk query for ws_CO_10092024131504532759946252 899885 '}
2024-09-10 10:17:45,657 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:17:46,325 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:17:46,327 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 7GpSZDFcCZRvmUl5AjGHGyyBlkhB'}"}
2024-09-10 10:17:46,328 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTAxNzQ1', 'Timestamp': '20240910101745', 'CheckoutRequestID': 'ws_CO_10092024131504532759946252'}"}
2024-09-10 10:17:46,333 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:17:46,965 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 10:17:46,966 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87510377', 'CheckoutRequestID': 'ws_CO_10092024131504532759946252', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024131504532759946252 899885"}
2024-09-10 10:17:47,104 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:17:47,597 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:17:47,599 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:17:47,813 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:18:10,878 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:18:11,049 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:18:11,050 - INFO - {'updated': 'initiated stk query for ws_CO_10092024131739727708399763 827142 '}
2024-09-10 10:18:11,128 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:18:11,763 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:18:11,765 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer D7z9e9DEiAsOgnJ0nWEqsQgSAqhN'}"}
2024-09-10 10:18:11,766 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTAxODEx', 'Timestamp': '20240910101811', 'CheckoutRequestID': 'ws_CO_10092024131739727708399763'}"}
2024-09-10 10:18:11,767 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:18:12,396 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 10:18:12,397 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169607983', 'CheckoutRequestID': 'ws_CO_10092024131739727708399763', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024131739727708399763 827142"}
2024-09-10 10:18:12,555 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:18:12,818 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:18:12,819 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:18:13,055 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:18:29,105 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:18:29,248 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:18:29,248 - INFO - there is a test coming
2024-09-10 10:18:29,249 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 10:18:29,289 - INFO - {'updated_data': 'the data is now as 254726255231'}
2024-09-10 10:18:29,290 - INFO - the data is now as 254726255231
2024-09-10 10:18:29,306 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 10:18:29,306 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 10:18:29,307 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:18:29,886 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:18:29,887 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer BAba8A53QR40gL9oVcKzNRHM4uM6'}"}
2024-09-10 10:18:29,888 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTAxODI5', 'Timestamp': '20240910101829', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254726255231', 'PartyB': 827142, 'PhoneNumber': '254726255231', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-25108', 'TransactionDesc': 'Some payment'}
2024-09-10 10:18:29,889 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:18:30,629 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 10:18:30,635 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16194692', 'CheckoutRequestID': 'ws_CO_10092024131830407726255231', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 10:20:49,858 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:20:49,990 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:20:49,991 - INFO - {'updated': 'initiated stk query for ws_CO_10092024132038742707624489 899885 '}
2024-09-10 10:20:50,066 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:20:50,693 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:20:50,697 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer sD65D2EPh2COxkGbP0Aqr3gRxRrs'}"}
2024-09-10 10:20:50,697 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTAyMDUw', 'Timestamp': '20240910102050', 'CheckoutRequestID': 'ws_CO_10092024132038742707624489'}"}
2024-09-10 10:20:50,699 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:20:51,432 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-10 10:20:51,433 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075523272', 'CheckoutRequestID': 'ws_CO_10092024132038742707624489', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_10092024132038742707624489 899885"}
2024-09-10 10:20:51,572 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:20:52,075 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:20:52,077 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:20:52,300 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:21:08,981 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:21:09,130 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:21:09,130 - INFO - there is a test coming
2024-09-10 10:21:09,130 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 10:21:09,179 - INFO - {'updated_data': 'the data is now as 254707624489'}
2024-09-10 10:21:09,179 - INFO - the data is now as 254707624489
2024-09-10 10:21:09,208 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 10:21:09,209 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 10:21:09,210 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:21:09,986 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:21:09,988 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer rAB9cw3cb9qYnirpDPufkF8K1qwe'}"}
2024-09-10 10:21:09,988 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTAyMTA5', 'Timestamp': '20240910102109', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254707624489', 'PartyB': 899885, 'PhoneNumber': '254707624489', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0618408-1725963667799', 'TransactionDesc': 'Some payment'}
2024-09-10 10:21:09,989 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:21:10,765 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 10:21:10,772 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db16210354', 'CheckoutRequestID': 'ws_CO_10092024132110521707624489', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 10:23:48,568 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:23:48,739 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:23:48,740 - INFO - {'updated': 'initiated stk query for ws_CO_10092024132335277719554128 827142 '}
2024-09-10 10:23:48,805 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:23:49,478 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:23:49,480 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer K4OlcdoFTr2y4jL1ZELky3ySfXFG'}"}
2024-09-10 10:23:49,481 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTAyMzQ4', 'Timestamp': '20240910102348', 'CheckoutRequestID': 'ws_CO_10092024132335277719554128'}"}
2024-09-10 10:23:49,482 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:23:50,114 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 10:23:50,115 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585052173140', 'CheckoutRequestID': 'ws_CO_10092024132335277719554128', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024132335277719554128 827142"}
2024-09-10 10:23:50,237 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:23:50,443 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:23:50,444 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:23:50,687 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:26:48,171 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:26:48,345 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:26:48,346 - INFO - {'updated': 'initiated stk query for ws_CO_10092024132636793701128661 827142 '}
2024-09-10 10:26:48,402 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:26:48,986 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:26:48,988 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Z0ZYI4oDg858FsyKKeod9j7QlnlA'}"}
2024-09-10 10:26:48,989 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTAyNjQ4', 'Timestamp': '20240910102648', 'CheckoutRequestID': 'ws_CO_10092024132636793701128661'}"}
2024-09-10 10:26:48,990 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:26:49,633 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 367
2024-09-10 10:26:49,634 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5769822', 'CheckoutRequestID': 'ws_CO_10092024132636793701128661', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_10092024132636793701128661 827142"}
2024-09-10 10:26:49,753 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:26:50,280 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:26:50,282 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:26:50,519 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:26:55,761 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87523734', 'CheckoutRequestID': 'ws_CO_10092024132642641725374037', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 39000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA33Q2L1P'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910132655}, {'Name': 'PhoneNumber', 'Value': 254725374037}]}}}}"}
2024-09-10 10:26:55,761 - INFO - {'updated_data': 'callback data began'}
2024-09-10 10:26:55,761 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87523734', 'CheckoutRequestID': 'ws_CO_10092024132642641725374037', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 39000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA33Q2L1P'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910132655}, {'Name': 'PhoneNumber', 'Value': 254725374037}]}}}}}
2024-09-10 10:26:55,978 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:26:56,467 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:26:56,469 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:26:56,693 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:27:04,625 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:27:04,758 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:27:04,759 - INFO - {'updated': 'initiated stk query for ws_CO_10092024132642641725374037 827142 '}
2024-09-10 10:27:04,837 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:27:05,420 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:27:05,422 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer hhv2uiciP7dOiLInqBX9pYUTtAfc'}"}
2024-09-10 10:27:05,423 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTAyNzA0', 'Timestamp': '20240910102704', 'CheckoutRequestID': 'ws_CO_10092024132642641725374037'}"}
2024-09-10 10:27:05,424 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:27:06,048 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 10:27:06,048 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87523734', 'CheckoutRequestID': 'ws_CO_10092024132642641725374037', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024132642641725374037 827142"}
2024-09-10 10:27:06,173 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:27:06,392 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:27:06,393 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:27:06,919 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:27:36,046 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:27:36,239 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:27:36,240 - INFO - there is a test coming
2024-09-10 10:27:36,240 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 10:27:36,282 - INFO - {'updated_data': 'the data is now as 254701128661'}
2024-09-10 10:27:36,283 - INFO - the data is now as 254701128661
2024-09-10 10:27:36,298 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 10:27:36,299 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 10:27:36,300 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:27:39,427 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:27:39,429 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer SxtuIj0sGTGtS61XhPhakL3dBV3X'}"}
2024-09-10 10:27:39,429 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTAyNzM5', 'Timestamp': '20240910102739', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254701128661', 'PartyB': 827142, 'PhoneNumber': '254701128661', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-21595', 'TransactionDesc': 'Some payment'}
2024-09-10 10:27:39,431 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:27:40,255 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 10:27:40,261 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db16227614', 'CheckoutRequestID': 'ws_CO_10092024132739963701128661', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 10:28:02,777 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:28:02,917 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:28:02,918 - INFO - {'updated': 'initiated stk query for ws_CO_10092024132739963701128661 827142 '}
2024-09-10 10:28:02,978 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:28:03,644 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:28:03,646 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 2K0CbaLmWiEPic6n2KkWMcJWzwcG'}"}
2024-09-10 10:28:03,647 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTAyODAy', 'Timestamp': '20240910102802', 'CheckoutRequestID': 'ws_CO_10092024132739963701128661'}"}
2024-09-10 10:28:03,648 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:28:04,278 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 10:28:04,278 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db16227614', 'CheckoutRequestID': 'ws_CO_10092024132739963701128661', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024132739963701128661 827142"}
2024-09-10 10:28:04,445 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:28:04,672 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:28:04,673 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:28:05,211 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:28:06,852 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:28:06,996 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:28:06,997 - INFO - {'updated': 'initiated stk query for ws_CO_10092024132739963701128661 827142 '}
2024-09-10 10:28:07,055 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:28:07,635 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:28:07,637 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer KxRdBLzGQSCuWrAFQ3Tk99T1Yznx'}"}
2024-09-10 10:28:07,638 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTAyODA3', 'Timestamp': '20240910102807', 'CheckoutRequestID': 'ws_CO_10092024132739963701128661'}"}
2024-09-10 10:28:07,640 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:28:08,379 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 10:28:08,380 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db16227614', 'CheckoutRequestID': 'ws_CO_10092024132739963701128661', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024132739963701128661 827142"}
2024-09-10 10:28:08,535 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:28:08,726 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:28:08,728 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:28:08,968 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:29:15,312 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:29:15,492 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:29:15,492 - INFO - there is a test coming
2024-09-10 10:29:15,492 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 10:29:15,553 - INFO - {'updated_data': 'the data is now as 254717201830'}
2024-09-10 10:29:15,554 - INFO - the data is now as 254717201830
2024-09-10 10:29:15,579 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 10:29:15,580 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 10:29:15,581 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:29:16,349 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:29:16,351 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 7k3jL08pptcccvQIATnOxm59mpqZ'}"}
2024-09-10 10:29:16,352 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTAyOTE2', 'Timestamp': '20240910102916', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1550', 'PartyA': '254717201830', 'PartyB': 827142, 'PhoneNumber': '254717201830', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-42312', 'TransactionDesc': 'Some payment'}
2024-09-10 10:29:16,353 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:29:21,818 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 10:29:21,824 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596140493', 'CheckoutRequestID': 'ws_CO_10092024132916973717201830', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 10:29:33,175 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:29:33,304 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:29:33,305 - INFO - {'updated': 'initiated stk query for ws_CO_10092024132916973717201830 827142 '}
2024-09-10 10:29:33,368 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:29:33,967 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:29:33,969 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer lRxnIXW3SRfmdQy5jqqccpf3px7a'}"}
2024-09-10 10:29:33,970 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTAyOTMz', 'Timestamp': '20240910102933', 'CheckoutRequestID': 'ws_CO_10092024132916973717201830'}"}
2024-09-10 10:29:33,976 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:29:34,583 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 10:29:34,584 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596140493', 'CheckoutRequestID': 'ws_CO_10092024132916973717201830', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024132916973717201830 827142"}
2024-09-10 10:29:34,720 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:29:35,247 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:29:35,249 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:29:35,769 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:30:23,170 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:30:23,424 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:30:23,425 - INFO - there is a test coming
2024-09-10 10:30:23,425 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 10:30:23,478 - INFO - {'updated_data': 'the data is now as 254745382955'}
2024-09-10 10:30:23,478 - INFO - the data is now as 254745382955
2024-09-10 10:30:23,494 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 10:30:23,494 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 10:30:23,496 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:30:24,079 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:30:24,081 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 3IKFMjAU16pBGtoeEnWz9zhdkN44'}"}
2024-09-10 10:30:24,082 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTAzMDI0', 'Timestamp': '20240910103024', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254745382955', 'PartyB': 899885, 'PhoneNumber': '254745382955', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053998', 'TransactionDesc': 'Some payment'}
2024-09-10 10:30:24,083 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:30:24,916 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 10:30:24,921 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208793214635', 'CheckoutRequestID': 'ws_CO_10092024133024706745382955', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 10:49:19,991 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:49:20,098 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:49:20,099 - INFO - there is a test coming
2024-09-10 10:49:20,099 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 10:49:20,150 - INFO - {'updated_data': 'the data is now as 254723388067'}
2024-09-10 10:49:20,150 - INFO - the data is now as 254723388067
2024-09-10 10:49:20,166 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 10:49:20,166 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 10:49:20,167 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:49:20,871 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:49:20,873 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer XAoFoAH1TFIRJnVnrWsGaxLBjGGA'}"}
2024-09-10 10:49:20,873 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTA0OTIw', 'Timestamp': '20240910104920', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5840', 'PartyA': '254723388067', 'PartyB': 827142, 'PhoneNumber': '254723388067', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-56', 'TransactionDesc': 'Some payment'}
2024-09-10 10:49:20,875 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:49:21,693 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 10:49:21,700 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170365385', 'CheckoutRequestID': 'ws_CO_10092024134921492723388067', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 10:50:51,429 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5834923', 'CheckoutRequestID': 'ws_CO_10092024135040503723388067', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 6618.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA93TKWAF'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910135050}, {'Name': 'PhoneNumber', 'Value': 254723388067}]}}}}"}
2024-09-10 10:50:51,429 - INFO - {'updated_data': 'callback data began'}
2024-09-10 10:50:51,430 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5834923', 'CheckoutRequestID': 'ws_CO_10092024135040503723388067', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 6618.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA93TKWAF'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910135050}, {'Name': 'PhoneNumber', 'Value': 254723388067}]}}}}}
2024-09-10 10:50:51,595 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:50:52,092 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:50:52,094 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:50:52,334 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:53:24,418 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169648066', 'CheckoutRequestID': 'ws_CO_10092024135315400705091521', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 7600.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA63TYC3K'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910135323}, {'Name': 'PhoneNumber', 'Value': 254705091521}]}}}}"}
2024-09-10 10:53:24,418 - INFO - {'updated_data': 'callback data began'}
2024-09-10 10:53:24,418 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169648066', 'CheckoutRequestID': 'ws_CO_10092024135315400705091521', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 7600.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA63TYC3K'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910135323}, {'Name': 'PhoneNumber', 'Value': 254705091521}]}}}}}
2024-09-10 10:53:24,583 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:53:24,785 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:53:24,786 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:53:24,998 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:55:16,149 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:55:16,316 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:55:16,317 - INFO - {'updated': 'initiated stk query for ws_CO_10092024135504796795758095 899885 '}
2024-09-10 10:55:16,417 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:55:17,255 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:55:17,257 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 67mYRJAKdMrOCyPf9NNp796nS5fR'}"}
2024-09-10 10:55:17,257 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTA1NTE2', 'Timestamp': '20240910105516', 'CheckoutRequestID': 'ws_CO_10092024135504796795758095'}"}
2024-09-10 10:55:17,259 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:55:17,885 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 10:55:17,886 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024135504796795758095', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024135504796795758095 899885"}
2024-09-10 10:55:17,888 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 10:55:26,212 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:55:26,390 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:55:26,391 - INFO - {'updated': 'initiated stk query for ws_CO_10092024135504796795758095 899885 '}
2024-09-10 10:55:26,451 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:55:27,037 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:55:27,039 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer qDGEp6vwcqvQyoeWl8QIH3lcIxPE'}"}
2024-09-10 10:55:27,039 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTA1NTI2', 'Timestamp': '20240910105526', 'CheckoutRequestID': 'ws_CO_10092024135504796795758095'}"}
2024-09-10 10:55:27,040 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:55:27,658 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 10:55:27,659 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87555365', 'CheckoutRequestID': 'ws_CO_10092024135504796795758095', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024135504796795758095 899885"}
2024-09-10 10:55:27,768 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:55:27,971 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:55:27,972 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:55:28,180 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:56:59,163 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516300818', 'CheckoutRequestID': 'ws_CO_10092024135656739737536467', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}"}
2024-09-10 10:56:59,163 - INFO - {'updated_data': 'callback data began'}
2024-09-10 10:56:59,163 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516300818', 'CheckoutRequestID': 'ws_CO_10092024135656739737536467', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}}
2024-09-10 10:56:59,327 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:56:59,531 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:56:59,533 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:56:59,757 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 11:03:14,677 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:03:14,856 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 11:03:14,857 - INFO - there is a test coming
2024-09-10 11:03:14,859 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 11:03:14,910 - INFO - {'updated_data': 'the data is now as 254714094647'}
2024-09-10 11:03:14,910 - INFO - the data is now as 254714094647
2024-09-10 11:03:14,930 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 11:03:14,930 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 11:03:14,931 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:03:15,516 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:03:15,518 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 7AalAZt4CBbeAVZpR8Yc3RAKRnp3'}"}
2024-09-10 11:03:15,519 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTEwMzE1', 'Timestamp': '20240910110315', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '200', 'PartyA': '254714094647', 'PartyB': 827142, 'PhoneNumber': '254714094647', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-30485', 'TransactionDesc': 'Some payment'}
2024-09-10 11:03:15,521 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:03:16,288 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 11:03:16,294 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169894515', 'CheckoutRequestID': 'ws_CO_10092024140316061714094647', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 11:06:41,746 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:06:41,884 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 11:06:41,884 - INFO - {'updated': 'initiated stk query for ws_CO_10092024140630182723369012 827142 '}
2024-09-10 11:06:41,946 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:06:42,574 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:06:42,576 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer RMwLgvcuWl09tRgGGavGuAPy6A8U'}"}
2024-09-10 11:06:42,576 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTEwNjQx', 'Timestamp': '20240910110641', 'CheckoutRequestID': 'ws_CO_10092024140630182723369012'}"}
2024-09-10 11:06:42,578 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:06:43,216 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 11:06:43,216 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596239577', 'CheckoutRequestID': 'ws_CO_10092024140630182723369012', 'ResultCode': '1', 'ResultDesc': 'The balance is insufficient for the transaction.'} for ws_CO_10092024140630182723369012 827142"}
2024-09-10 11:06:43,400 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 11:06:43,629 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 11:06:43,631 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 11:06:43,851 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 11:07:00,569 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db16330973', 'CheckoutRequestID': 'ws_CO_10092024140621525729759460', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-10 11:07:00,569 - INFO - {'updated_data': 'callback data began'}
2024-09-10 11:07:00,569 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db16330973', 'CheckoutRequestID': 'ws_CO_10092024140621525729759460', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-10 11:07:00,787 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 11:07:01,016 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 11:07:01,018 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 11:07:01,252 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 11:13:03,602 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:13:03,730 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 11:13:03,731 - INFO - there is a test coming
2024-09-10 11:13:03,731 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 11:13:03,791 - INFO - {'updated_data': 'the data is now as 254723369012'}
2024-09-10 11:13:03,791 - INFO - the data is now as 254723369012
2024-09-10 11:13:03,815 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 11:13:03,815 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 11:13:03,816 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:13:04,392 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:13:04,394 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer US4T4cD1KoM5GUTm8n15RYFeRv6V'}"}
2024-09-10 11:13:04,395 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTExMzA0', 'Timestamp': '20240910111304', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254723369012', 'PartyB': 827142, 'PhoneNumber': '254723369012', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-33256', 'TransactionDesc': 'Some payment'}
2024-09-10 11:13:04,396 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:13:06,788 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 11:13:06,796 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169905389', 'CheckoutRequestID': 'ws_CO_10092024141304929723369012', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 11:13:34,577 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:13:34,762 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 11:13:34,763 - INFO - there is a test coming
2024-09-10 11:13:34,763 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 11:13:34,808 - INFO - {'updated_data': 'the data is now as 254722818087'}
2024-09-10 11:13:34,808 - INFO - the data is now as 254722818087
2024-09-10 11:13:34,824 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 11:13:34,825 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 11:13:34,826 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:13:35,414 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:13:35,415 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer p7AdRAIxEHnzYX8ZUMdKVfZCiVM3'}"}
2024-09-10 11:13:35,416 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTExMzM1', 'Timestamp': '20240910111335', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254722818087', 'PartyB': 899885, 'PhoneNumber': '254722818087', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Order No . 14058', 'TransactionDesc': 'Some payment'}
2024-09-10 11:13:35,417 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:13:36,183 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 11:13:36,189 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5896095', 'CheckoutRequestID': 'ws_CO_10092024141335966722818087', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 11:21:05,249 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169679236', 'CheckoutRequestID': 'ws_CO_10092024142056961714182939', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA43XW4PC'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910142104}, {'Name': 'PhoneNumber', 'Value': 254714182939}]}}}}"}
2024-09-10 11:21:05,251 - INFO - {'updated_data': 'callback data began'}
2024-09-10 11:21:05,251 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169679236', 'CheckoutRequestID': 'ws_CO_10092024142056961714182939', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA43XW4PC'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910142104}, {'Name': 'PhoneNumber', 'Value': 254714182939}]}}}}}
2024-09-10 11:21:05,454 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 11:21:05,657 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 11:21:05,659 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 11:21:06,189 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 11:21:08,498 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:21:08,710 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 11:21:08,711 - INFO - {'updated': 'initiated stk query for ws_CO_10092024142056961714182939 827142 '}
2024-09-10 11:21:08,774 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:21:09,360 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:21:09,361 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer PiAPfuThPF8DHKGuFnZ2tFT1iwwn'}"}
2024-09-10 11:21:09,362 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTEyMTA4', 'Timestamp': '20240910112108', 'CheckoutRequestID': 'ws_CO_10092024142056961714182939'}"}
2024-09-10 11:21:09,363 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:21:10,018 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 11:21:10,018 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169679236', 'CheckoutRequestID': 'ws_CO_10092024142056961714182939', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024142056961714182939 827142"}
2024-09-10 11:21:10,136 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 11:21:10,334 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 11:21:10,336 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 11:21:10,589 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 11:26:03,463 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:26:03,639 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 11:26:03,640 - INFO - there is a test coming
2024-09-10 11:26:03,640 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 11:26:03,682 - INFO - {'updated_data': 'the data is now as 254729360305'}
2024-09-10 11:26:03,683 - INFO - the data is now as 254729360305
2024-09-10 11:26:03,709 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 11:26:03,709 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 11:26:03,710 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:26:04,471 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:26:04,474 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer lk6c9Nq5eYG7Ur84VuUs7spWBMpS'}"}
2024-09-10 11:26:04,474 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTEyNjA0', 'Timestamp': '20240910112604', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1530', 'PartyA': '254729360305', 'PartyB': 827142, 'PhoneNumber': '254729360305', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-52230', 'TransactionDesc': 'Some payment'}
2024-09-10 11:26:04,476 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:26:05,372 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 11:26:05,378 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169920351', 'CheckoutRequestID': 'ws_CO_10092024142605101729360305', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 11:26:26,286 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:26:26,431 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 11:26:26,432 - INFO - {'updated': 'initiated stk query for ws_CO_10092024142605101729360305 827142 '}
2024-09-10 11:26:26,488 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:26:27,067 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:26:27,072 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer IhsRfuuSduA7QYGSOOHyMjlrOcih'}"}
2024-09-10 11:26:27,072 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTEyNjI2', 'Timestamp': '20240910112626', 'CheckoutRequestID': 'ws_CO_10092024142605101729360305'}"}
2024-09-10 11:26:27,075 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:26:27,692 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 11:26:27,692 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169920351', 'CheckoutRequestID': 'ws_CO_10092024142605101729360305', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024142605101729360305 827142"}
2024-09-10 11:26:27,808 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 11:26:28,014 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 11:26:28,015 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 11:26:28,560 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 11:32:41,918 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:32:42,081 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 11:32:42,082 - INFO - {'updated': 'initiated stk query for ws_CO_10092024143230382720612070 827142 '}
2024-09-10 11:32:42,141 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:32:42,696 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:32:42,698 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer sgu3hyGt5PzBgAvVqrkP0UzcW9GS'}"}
2024-09-10 11:32:42,698 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTEzMjQy', 'Timestamp': '20240910113242', 'CheckoutRequestID': 'ws_CO_10092024143230382720612070'}"}
2024-09-10 11:32:42,700 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:32:43,325 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 11:32:43,326 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208793283570', 'CheckoutRequestID': 'ws_CO_10092024143230382720612070', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024143230382720612070 827142"}
2024-09-10 11:32:43,508 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 11:32:43,697 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 11:32:43,699 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 11:32:44,205 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 11:32:51,242 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:32:51,260 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 11:32:51,260 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 11:35:02,117 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:35:02,302 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 11:35:02,303 - INFO - {'updated': 'initiated stk query for ws_CO_10092024143436171722240818 899885 '}
2024-09-10 11:35:02,380 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:35:03,067 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:35:03,071 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer OrO9hE0j3gBToRaYHzsWwBn4BODa'}"}
2024-09-10 11:35:03,074 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTEzNTAy', 'Timestamp': '20240910113502', 'CheckoutRequestID': 'ws_CO_10092024143436171722240818'}"}
2024-09-10 11:35:03,075 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:35:03,837 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 11:35:03,838 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16398276', 'CheckoutRequestID': 'ws_CO_10092024143436171722240818', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024143436171722240818 899885"}
2024-09-10 11:35:03,970 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 11:35:04,170 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 11:35:04,171 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 11:35:04,390 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 11:35:05,726 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:35:05,885 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 11:35:05,886 - INFO - {'updated': 'initiated stk query for ws_CO_10092024143454101720612070 827142 '}
2024-09-10 11:35:06,042 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:35:06,713 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:35:06,715 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer OwWDu0V3mHAa5zNnyG6exhYjz8BG'}"}
2024-09-10 11:35:06,716 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTEzNTA2', 'Timestamp': '20240910113506', 'CheckoutRequestID': 'ws_CO_10092024143454101720612070'}"}
2024-09-10 11:35:06,717 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:35:07,353 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 11:35:07,354 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596314396', 'CheckoutRequestID': 'ws_CO_10092024143454101720612070', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024143454101720612070 827142"}
2024-09-10 11:35:07,718 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 11:35:07,909 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 11:35:07,910 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 11:35:08,490 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 11:36:05,034 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:36:05,179 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 11:36:05,179 - INFO - there is a test coming
2024-09-10 11:36:05,180 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 11:36:05,234 - INFO - {'updated_data': 'the data is now as 254705790335'}
2024-09-10 11:36:05,234 - INFO - the data is now as 254705790335
2024-09-10 11:36:05,258 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 11:36:05,259 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 11:36:05,260 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:36:05,850 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:36:05,852 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Wl9qLGRU27dCo9Qy9ln2yg3t5Ikk'}"}
2024-09-10 11:36:05,852 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTEzNjA1', 'Timestamp': '20240910113605', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254705790335', 'PartyB': 827142, 'PhoneNumber': '254705790335', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-34448', 'TransactionDesc': 'Some payment'}
2024-09-10 11:36:05,854 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:36:06,774 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 11:36:06,781 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170417254', 'CheckoutRequestID': 'ws_CO_10092024143606378705790335', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 11:36:21,993 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:36:22,205 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 11:36:22,206 - INFO - {'updated': 'initiated stk query for ws_CO_10092024143606378705790335 827142 '}
2024-09-10 11:36:22,269 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:36:22,849 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:36:22,851 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Vd6eAVegWDG0YiP1IS3oy7JnO2F8'}"}
2024-09-10 11:36:22,852 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTEzNjIy', 'Timestamp': '20240910113622', 'CheckoutRequestID': 'ws_CO_10092024143606378705790335'}"}
2024-09-10 11:36:22,853 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:36:23,560 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 11:36:23,561 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170417254', 'CheckoutRequestID': 'ws_CO_10092024143606378705790335', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024143606378705790335 827142"}
2024-09-10 11:36:23,691 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 11:36:23,902 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 11:36:23,904 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 11:36:24,437 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 11:36:28,487 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:36:28,496 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 11:36:28,497 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 11:37:32,734 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:37:32,858 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 11:37:32,859 - INFO - there is a test coming
2024-09-10 11:37:32,859 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 11:37:32,920 - INFO - {'updated_data': 'the data is now as 254721289543'}
2024-09-10 11:37:32,920 - INFO - the data is now as 254721289543
2024-09-10 11:37:32,938 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 11:37:32,938 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 11:37:32,940 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:37:33,549 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:37:33,551 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer O0MeZ6yL1mQid0eJmx2kUkXuJGtk'}"}
2024-09-10 11:37:33,551 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTEzNzMz', 'Timestamp': '20240910113733', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '20000', 'PartyA': '254721289543', 'PartyB': 899885, 'PhoneNumber': '254721289543', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054063', 'TransactionDesc': 'Some payment'}
2024-09-10 11:37:33,556 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:37:34,310 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 11:37:34,317 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169697348', 'CheckoutRequestID': 'ws_CO_10092024143734080721289543', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 11:41:03,449 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:41:03,585 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 11:41:03,586 - INFO - there is a test coming
2024-09-10 11:41:03,586 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 11:41:03,631 - INFO - {'updated_data': 'the data is now as 254719679807'}
2024-09-10 11:41:03,631 - INFO - the data is now as 254719679807
2024-09-10 11:41:03,646 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 11:41:03,646 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 11:41:03,647 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:41:04,401 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:41:04,403 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer NPysGMuk5VUrCHtcki76DGsnhxAz'}"}
2024-09-10 11:41:04,404 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTE0MTA0', 'Timestamp': '20240910114104', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '32596', 'PartyA': '254719679807', 'PartyB': 827142, 'PhoneNumber': '254719679807', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-92560', 'TransactionDesc': 'Some payment'}
2024-09-10 11:41:04,405 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:41:06,471 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 11:41:06,482 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87606541', 'CheckoutRequestID': 'ws_CO_10092024144104945719679807', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 11:41:20,805 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87606541', 'CheckoutRequestID': 'ws_CO_10092024144104945719679807', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-10 11:41:20,806 - INFO - {'updated_data': 'callback data began'}
2024-09-10 11:41:20,809 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87606541', 'CheckoutRequestID': 'ws_CO_10092024144104945719679807', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-10 11:41:20,971 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 11:41:21,454 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 11:41:21,455 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 11:41:21,968 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 11:41:27,358 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:41:27,481 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 11:41:27,482 - INFO - there is a test coming
2024-09-10 11:41:27,482 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 11:41:27,522 - INFO - {'updated_data': 'the data is now as 254710270394'}
2024-09-10 11:41:27,522 - INFO - the data is now as 254710270394
2024-09-10 11:41:27,539 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 11:41:27,539 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 11:41:27,540 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:41:28,115 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:41:28,116 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer cufFAmdx4zPUQBqNf4t9urjQNUmE'}"}
2024-09-10 11:41:28,117 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTE0MTI4', 'Timestamp': '20240910114128', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '500', 'PartyA': '254710270394', 'PartyB': 827142, 'PhoneNumber': '254710270394', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-3812', 'TransactionDesc': 'Some payment'}
2024-09-10 11:41:28,118 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:41:28,885 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 11:41:28,891 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170423106', 'CheckoutRequestID': 'ws_CO_10092024144128636710270394', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 11:41:44,350 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170423106', 'CheckoutRequestID': 'ws_CO_10092024144128636710270394', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}"}
2024-09-10 11:41:44,350 - INFO - {'updated_data': 'callback data began'}
2024-09-10 11:41:44,350 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170423106', 'CheckoutRequestID': 'ws_CO_10092024144128636710270394', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}}
2024-09-10 11:41:44,519 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 11:41:45,021 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 11:41:45,023 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 11:41:45,570 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 11:42:07,136 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516419171', 'CheckoutRequestID': 'ws_CO_10092024144135845723862184', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-10 11:42:07,137 - INFO - {'updated_data': 'callback data began'}
2024-09-10 11:42:07,137 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516419171', 'CheckoutRequestID': 'ws_CO_10092024144135845723862184', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-10 11:42:07,304 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 11:42:07,503 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 11:42:07,504 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 11:42:07,748 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 11:42:48,212 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:42:48,321 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 11:42:48,322 - INFO - {'updated': 'initiated stk query for ws_CO_10092024144236801719679807 827142 '}
2024-09-10 11:42:48,384 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:42:49,227 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:42:49,229 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer vA8DghAZAluz9dJAAzhYhrrDc2UU'}"}
2024-09-10 11:42:49,229 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTE0MjQ4', 'Timestamp': '20240910114248', 'CheckoutRequestID': 'ws_CO_10092024144236801719679807'}"}
2024-09-10 11:42:49,230 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:42:50,047 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 367
2024-09-10 11:42:50,048 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585052384593', 'CheckoutRequestID': 'ws_CO_10092024144236801719679807', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_10092024144236801719679807 827142"}
2024-09-10 11:42:50,171 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 11:42:50,771 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 11:42:50,772 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 11:42:51,105 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 11:42:57,349 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:42:57,499 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 11:42:57,500 - INFO - there is a test coming
2024-09-10 11:42:57,500 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 11:42:57,545 - INFO - {'updated_data': 'the data is now as 254712548848'}
2024-09-10 11:42:57,545 - INFO - the data is now as 254712548848
2024-09-10 11:42:57,570 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 11:42:57,570 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 11:42:57,571 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:42:58,327 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:42:58,331 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ATNxtKSkuOqRZcAm4GMEEZJnlMKY'}"}
2024-09-10 11:42:58,332 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTE0MjU4', 'Timestamp': '20240910114258', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254712548848', 'PartyB': 899885, 'PhoneNumber': '254712548848', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054105', 'TransactionDesc': 'Some payment'}
2024-09-10 11:42:58,333 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:42:59,329 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 11:42:59,380 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5974031', 'CheckoutRequestID': 'ws_CO_10092024144259115712548848', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 11:47:05,662 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585052396031', 'CheckoutRequestID': 'ws_CO_10092024144654599702844726', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA841J4M8'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910144705}, {'Name': 'PhoneNumber', 'Value': 254702844726}]}}}}"}
2024-09-10 11:47:05,663 - INFO - {'updated_data': 'callback data began'}
2024-09-10 11:47:05,663 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585052396031', 'CheckoutRequestID': 'ws_CO_10092024144654599702844726', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA841J4M8'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910144705}, {'Name': 'PhoneNumber', 'Value': 254702844726}]}}}}}
2024-09-10 11:47:05,873 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 11:47:06,331 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:47:06,386 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 11:47:06,387 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 11:47:06,566 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 11:47:06,567 - INFO - {'updated': 'initiated stk query for ws_CO_10092024144654599702844726 827142 '}
2024-09-10 11:47:06,638 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:47:06,948 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 11:47:07,225 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:47:07,227 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer bMNhZkI4ImXFol8R8wWeZe4k0j74'}"}
2024-09-10 11:47:07,228 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTE0NzA2', 'Timestamp': '20240910114706', 'CheckoutRequestID': 'ws_CO_10092024144654599702844726'}"}
2024-09-10 11:47:07,229 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:47:07,945 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 11:47:07,945 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585052396031', 'CheckoutRequestID': 'ws_CO_10092024144654599702844726', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024144654599702844726 827142"}
2024-09-10 11:47:08,062 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 11:47:08,292 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 11:47:08,293 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 11:47:08,511 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 11:47:08,710 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:47:08,868 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 11:47:08,869 - INFO - there is a test coming
2024-09-10 11:47:08,869 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 11:47:08,920 - INFO - {'updated_data': 'the data is now as 254722258830'}
2024-09-10 11:47:08,920 - INFO - the data is now as 254722258830
2024-09-10 11:47:08,938 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 11:47:08,938 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 11:47:08,940 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:47:09,508 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:47:09,510 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer PGMvmzznk5ZEnedFEyZrq1dsbLO5'}"}
2024-09-10 11:47:09,511 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTE0NzA5', 'Timestamp': '20240910114709', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3200', 'PartyA': '254722258830', 'PartyB': 827142, 'PhoneNumber': '254722258830', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '137-7473', 'TransactionDesc': 'Some payment'}
2024-09-10 11:47:09,512 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:47:10,486 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 11:47:10,492 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169943535', 'CheckoutRequestID': 'ws_CO_10092024144710044722258830', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 11:47:31,714 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87613693', 'CheckoutRequestID': 'ws_CO_10092024144717500729360305', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA741LLLJ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910144731}, {'Name': 'PhoneNumber', 'Value': 254729360305}]}}}}"}
2024-09-10 11:47:31,715 - INFO - {'updated_data': 'callback data began'}
2024-09-10 11:47:31,715 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87613693', 'CheckoutRequestID': 'ws_CO_10092024144717500729360305', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA741LLLJ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910144731}, {'Name': 'PhoneNumber', 'Value': 254729360305}]}}}}}
2024-09-10 11:47:31,890 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 11:47:32,101 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 11:47:32,102 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 11:47:32,632 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 11:48:01,379 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:48:01,536 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 11:48:01,537 - INFO - {'updated': 'initiated stk query for ws_CO_10092024144710044722258830 827142 '}
2024-09-10 11:48:01,599 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:48:02,167 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:48:02,169 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer EsyFAGUGAI9LzCY4mJQpg2Ev53IB'}"}
2024-09-10 11:48:02,169 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTE0ODAx', 'Timestamp': '20240910114801', 'CheckoutRequestID': 'ws_CO_10092024144710044722258830'}"}
2024-09-10 11:48:02,171 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:48:02,797 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 11:48:02,798 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169943535', 'CheckoutRequestID': 'ws_CO_10092024144710044722258830', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024144710044722258830 827142"}
2024-09-10 11:48:02,916 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 11:48:03,373 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 11:48:03,374 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 11:48:03,596 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 11:48:49,258 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16437038', 'CheckoutRequestID': 'ws_CO_10092024144841257711174848', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA441RS6I'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910144848}, {'Name': 'PhoneNumber', 'Value': 254711174848}]}}}}"}
2024-09-10 11:48:49,259 - INFO - {'updated_data': 'callback data began'}
2024-09-10 11:48:49,259 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16437038', 'CheckoutRequestID': 'ws_CO_10092024144841257711174848', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA441RS6I'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910144848}, {'Name': 'PhoneNumber', 'Value': 254711174848}]}}}}}
2024-09-10 11:48:49,417 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 11:48:49,607 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 11:48:49,609 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 11:48:50,145 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 11:48:52,475 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:48:52,677 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 11:48:52,678 - INFO - {'updated': 'initiated stk query for ws_CO_10092024144841257711174848 899885 '}
2024-09-10 11:48:52,738 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:48:53,336 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:48:53,338 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Fsn2Ad3SliKNfuFG8G96AmZG9jCV'}"}
2024-09-10 11:48:53,339 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTE0ODUy', 'Timestamp': '20240910114852', 'CheckoutRequestID': 'ws_CO_10092024144841257711174848'}"}
2024-09-10 11:48:53,340 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:48:54,074 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 11:48:54,075 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16437038', 'CheckoutRequestID': 'ws_CO_10092024144841257711174848', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024144841257711174848 899885"}
2024-09-10 11:48:54,194 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 11:48:54,742 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 11:48:54,743 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 11:48:55,265 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 11:49:19,999 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5990062', 'CheckoutRequestID': 'ws_CO_10092024144852704724771286', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA241U0L6'}, {'Name': 'TransactionDate', 'Value': 20240910144919}, {'Name': 'PhoneNumber', 'Value': 254724771286}]}}}}"}
2024-09-10 11:49:20,000 - INFO - {'updated_data': 'callback data began'}
2024-09-10 11:49:20,000 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5990062', 'CheckoutRequestID': 'ws_CO_10092024144852704724771286', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA241U0L6'}, {'Name': 'TransactionDate', 'Value': 20240910144919}, {'Name': 'PhoneNumber', 'Value': 254724771286}]}}}}}
2024-09-10 11:49:20,227 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 11:49:20,416 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 11:49:20,417 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 11:49:20,625 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 11:51:31,535 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:51:31,709 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 11:51:31,710 - INFO - {'updated': 'initiated stk query for ws_CO_10092024145119162702601754 827142 '}
2024-09-10 11:51:31,767 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:51:32,361 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:51:32,363 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer zhvKOsWRm0KKUxLwkFdcm3YALQEP'}"}
2024-09-10 11:51:32,363 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTE1MTMx', 'Timestamp': '20240910115131', 'CheckoutRequestID': 'ws_CO_10092024145119162702601754'}"}
2024-09-10 11:51:32,364 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:51:33,101 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 11:51:33,101 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170434560', 'CheckoutRequestID': 'ws_CO_10092024145119162702601754', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024145119162702601754 827142"}
2024-09-10 11:51:33,230 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 11:51:33,435 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 11:51:33,436 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 11:51:33,651 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 11:57:09,065 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169955225', 'CheckoutRequestID': 'ws_CO_10092024145657369706715697', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1001.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA842WXO8'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910145708}, {'Name': 'PhoneNumber', 'Value': 254706715697}]}}}}"}
2024-09-10 11:57:09,065 - INFO - {'updated_data': 'callback data began'}
2024-09-10 11:57:09,065 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169955225', 'CheckoutRequestID': 'ws_CO_10092024145657369706715697', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1001.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA842WXO8'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910145708}, {'Name': 'PhoneNumber', 'Value': 254706715697}]}}}}}
2024-09-10 11:57:09,228 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 11:57:09,414 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 11:57:09,416 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 11:57:09,943 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:00:14,428 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:00:14,581 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:00:14,581 - INFO - there is a test coming
2024-09-10 12:00:14,582 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 12:00:14,632 - INFO - {'updated_data': 'the data is now as 254714517112'}
2024-09-10 12:00:14,633 - INFO - the data is now as 254714517112
2024-09-10 12:00:14,664 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 12:00:14,664 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 12:00:14,665 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:00:15,243 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:00:15,245 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 3TW2sqmW7tCrAc2HfA3G1nZAIDmZ'}"}
2024-09-10 12:00:15,245 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTIwMDE1', 'Timestamp': '20240910120015', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254714517112', 'PartyB': 827142, 'PhoneNumber': '254714517112', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-46130', 'TransactionDesc': 'Some payment'}
2024-09-10 12:00:15,246 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:00:16,113 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 12:00:16,121 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585052432197', 'CheckoutRequestID': 'ws_CO_10092024150015863714517112', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 12:00:27,819 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585052432197', 'CheckoutRequestID': 'ws_CO_10092024150015863714517112', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA443CY4M'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910150027}, {'Name': 'PhoneNumber', 'Value': 254714517112}]}}}}"}
2024-09-10 12:00:27,820 - INFO - {'updated_data': 'callback data began'}
2024-09-10 12:00:27,820 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585052432197', 'CheckoutRequestID': 'ws_CO_10092024150015863714517112', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA443CY4M'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910150027}, {'Name': 'PhoneNumber', 'Value': 254714517112}]}}}}}
2024-09-10 12:00:28,069 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:00:28,579 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:00:28,580 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:00:29,121 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:00:32,528 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:00:32,711 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:00:32,713 - INFO - {'updated': 'initiated stk query for ws_CO_10092024150015863714517112 827142 '}
2024-09-10 12:00:32,767 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:00:33,344 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:00:33,346 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer gOgjn7xwiZtkLG6eGAuLiK4J5YUZ'}"}
2024-09-10 12:00:33,346 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTIwMDMy', 'Timestamp': '20240910120032', 'CheckoutRequestID': 'ws_CO_10092024150015863714517112'}"}
2024-09-10 12:00:33,347 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:00:33,968 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 12:00:33,969 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585052432197', 'CheckoutRequestID': 'ws_CO_10092024150015863714517112', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024150015863714517112 827142"}
2024-09-10 12:00:34,157 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:00:34,500 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:00:34,502 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:00:34,725 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:04:20,983 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:04:21,119 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:04:21,119 - INFO - there is a test coming
2024-09-10 12:04:21,119 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 12:04:21,168 - INFO - {'updated_data': 'the data is now as 254112646181'}
2024-09-10 12:04:21,168 - INFO - the data is now as 254112646181
2024-09-10 12:04:21,187 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 12:04:21,188 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 12:04:21,189 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:04:22,853 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:04:22,855 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 48SdlPdYP6DOmgVZacxIzuPGCYye'}"}
2024-09-10 12:04:22,856 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTIwNDIy', 'Timestamp': '20240910120422', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254112646181', 'PartyB': 827142, 'PhoneNumber': '254112646181', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-18097', 'TransactionDesc': 'Some payment'}
2024-09-10 12:04:22,857 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:04:25,800 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 12:04:25,805 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585052443641', 'CheckoutRequestID': 'ws_CO_10092024150423545112646181', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 12:04:36,419 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585052443641', 'CheckoutRequestID': 'ws_CO_10092024150423545112646181', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA243XASO'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910150435}, {'Name': 'PhoneNumber', 'Value': 254112646181}]}}}}"}
2024-09-10 12:04:36,420 - INFO - {'updated_data': 'callback data began'}
2024-09-10 12:04:36,420 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585052443641', 'CheckoutRequestID': 'ws_CO_10092024150423545112646181', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA243XASO'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910150435}, {'Name': 'PhoneNumber', 'Value': 254112646181}]}}}}}
2024-09-10 12:04:36,645 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:04:36,978 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:04:36,979 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:04:37,215 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:06:40,651 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:06:40,830 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:06:40,831 - INFO - there is a test coming
2024-09-10 12:06:40,831 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 12:06:40,874 - INFO - {'updated_data': 'the data is now as 254724586093'}
2024-09-10 12:06:40,874 - INFO - the data is now as 254724586093
2024-09-10 12:06:40,910 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 12:06:40,910 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 12:06:40,911 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:06:41,606 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:06:41,608 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer GDKtVd1EeqNhTC3wmCeO4Pb6IJDn'}"}
2024-09-10 12:06:41,609 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTIwNjQx', 'Timestamp': '20240910120641', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254724586093', 'PartyB': 899885, 'PhoneNumber': '254724586093', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054018', 'TransactionDesc': 'Some payment'}
2024-09-10 12:06:41,613 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:06:42,324 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 12:06:42,331 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169966666', 'CheckoutRequestID': 'ws_CO_10092024150642131724586093', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 12:08:27,825 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:08:27,952 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:08:27,952 - INFO - {'updated': 'initiated stk query for ws_CO_10092024150816506795798879 899885 '}
2024-09-10 12:08:28,002 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:08:28,709 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:08:28,711 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer aATZH72K9FvRmSWUA07TY7gVwBCd'}"}
2024-09-10 12:08:28,712 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTIwODI4', 'Timestamp': '20240910120828', 'CheckoutRequestID': 'ws_CO_10092024150816506795798879'}"}
2024-09-10 12:08:28,713 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:08:29,369 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 12:08:29,370 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024150816506795798879', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024150816506795798879 899885"}
2024-09-10 12:08:29,372 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 12:14:15,266 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516506677', 'CheckoutRequestID': 'ws_CO_10092024151404049723369012', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA7457KD3'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910151414}, {'Name': 'PhoneNumber', 'Value': 254723369012}]}}}}"}
2024-09-10 12:14:15,266 - INFO - {'updated_data': 'callback data began'}
2024-09-10 12:14:15,266 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516506677', 'CheckoutRequestID': 'ws_CO_10092024151404049723369012', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA7457KD3'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910151414}, {'Name': 'PhoneNumber', 'Value': 254723369012}]}}}}}
2024-09-10 12:14:15,427 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:14:15,947 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:14:15,949 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:14:16,472 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:14:16,595 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:14:16,742 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:14:16,742 - INFO - {'updated': 'initiated stk query for ws_CO_10092024151404049723369012 827142 '}
2024-09-10 12:14:16,803 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:14:17,354 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:14:17,356 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer kATOnGNyhr4rionwROa59q6JQ1ev'}"}
2024-09-10 12:14:17,356 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTIxNDE2', 'Timestamp': '20240910121416', 'CheckoutRequestID': 'ws_CO_10092024151404049723369012'}"}
2024-09-10 12:14:17,357 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:14:18,069 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 12:14:18,070 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516506677', 'CheckoutRequestID': 'ws_CO_10092024151404049723369012', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024151404049723369012 827142"}
2024-09-10 12:14:18,206 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:14:18,730 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:14:18,731 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:14:18,956 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:15:43,871 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:15:44,005 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:15:44,006 - INFO - there is a test coming
2024-09-10 12:15:44,006 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 12:15:44,151 - INFO - {'updated_data': 'the data is now as 254721934414'}
2024-09-10 12:15:44,151 - INFO - the data is now as 254721934414
2024-09-10 12:15:44,167 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 12:15:44,167 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 12:15:44,168 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:15:44,958 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:15:44,960 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer dDApqMKxhVPZBneiVkjex0PudwgY'}"}
2024-09-10 12:15:44,961 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTIxNTQ0', 'Timestamp': '20240910121544', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '9000', 'PartyA': '254721934414', 'PartyB': 899885, 'PhoneNumber': '254721934414', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Order No . 14061', 'TransactionDesc': 'Some payment'}
2024-09-10 12:15:44,962 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:15:46,154 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 12:15:46,166 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208793333376', 'CheckoutRequestID': 'ws_CO_10092024151545605721934414', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 12:16:02,104 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793333376', 'CheckoutRequestID': 'ws_CO_10092024151545605721934414', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 9000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA445GGU8'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910151601}, {'Name': 'PhoneNumber', 'Value': 254721934414}]}}}}"}
2024-09-10 12:16:02,104 - INFO - {'updated_data': 'callback data began'}
2024-09-10 12:16:02,104 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793333376', 'CheckoutRequestID': 'ws_CO_10092024151545605721934414', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 9000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA445GGU8'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910151601}, {'Name': 'PhoneNumber', 'Value': 254721934414}]}}}}}
2024-09-10 12:16:02,272 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:16:02,780 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:16:02,781 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:16:03,013 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:16:07,237 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:16:07,384 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:16:07,384 - INFO - {'updated': 'initiated stk query for ws_CO_10092024151545605721934414 899885 '}
2024-09-10 12:16:07,454 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:16:08,131 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:16:08,133 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer cSnOdfBnOPwEIAJx2SmMOR0G9JMs'}"}
2024-09-10 12:16:08,133 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTIxNjA3', 'Timestamp': '20240910121607', 'CheckoutRequestID': 'ws_CO_10092024151545605721934414'}"}
2024-09-10 12:16:08,134 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:16:08,775 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 12:16:08,775 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208793333376', 'CheckoutRequestID': 'ws_CO_10092024151545605721934414', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024151545605721934414 899885"}
2024-09-10 12:16:08,945 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:16:09,448 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:16:09,450 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:16:09,724 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:18:48,943 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:18:49,453 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:18:49,454 - INFO - there is a test coming
2024-09-10 12:18:49,454 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 12:18:49,511 - INFO - {'updated_data': 'the data is now as 254743366598'}
2024-09-10 12:18:49,512 - INFO - the data is now as 254743366598
2024-09-10 12:18:49,528 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 12:18:49,528 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 12:18:49,530 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:18:50,092 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:18:50,094 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer KghPOMCe3bZTsAzPgAUPRxs7jrJr'}"}
2024-09-10 12:18:50,095 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTIxODUw', 'Timestamp': '20240910121850', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '200', 'PartyA': '254743366598', 'PartyB': 899885, 'PhoneNumber': '254743366598', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0611078-1725970727730', 'TransactionDesc': 'Some payment'}
2024-09-10 12:18:50,096 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:18:53,745 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 12:18:53,753 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075657099', 'CheckoutRequestID': 'ws_CO_10092024151850744743366598', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 12:19:14,748 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:19:14,764 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 12:19:14,765 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 12:19:44,866 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:19:45,073 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:19:45,073 - INFO - {'updated': 'initiated stk query for ws_CO_10092024151850744743366598 899885 '}
2024-09-10 12:19:45,152 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:19:46,000 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:19:46,003 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer lAPs9BR5GGqzP03loA048zdNqIsz'}"}
2024-09-10 12:19:46,003 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTIxOTQ1', 'Timestamp': '20240910121945', 'CheckoutRequestID': 'ws_CO_10092024151850744743366598'}"}
2024-09-10 12:19:46,004 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:19:46,650 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 12:19:46,650 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075657099', 'CheckoutRequestID': 'ws_CO_10092024151850744743366598', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024151850744743366598 899885"}
2024-09-10 12:19:46,787 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:19:47,314 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:19:47,315 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:19:47,855 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:19:55,140 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:19:55,308 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:19:55,309 - INFO - {'updated': 'initiated stk query for ws_CO_10092024151842507715689386 827142 '}
2024-09-10 12:19:55,370 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:19:56,047 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:19:56,049 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer TTMCxL2lM1R2zkpx0N1uaG3BwYra'}"}
2024-09-10 12:19:56,050 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTIxOTU1', 'Timestamp': '20240910121955', 'CheckoutRequestID': 'ws_CO_10092024151842507715689386'}"}
2024-09-10 12:19:56,051 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:19:56,702 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 12:19:56,703 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6070925', 'CheckoutRequestID': 'ws_CO_10092024151842507715689386', 'ResultCode': '1', 'ResultDesc': 'The balance is insufficient for the transaction.'} for ws_CO_10092024151842507715689386 827142"}
2024-09-10 12:19:56,836 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:19:57,042 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:19:57,044 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:19:57,274 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:22:07,586 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16526906', 'CheckoutRequestID': 'ws_CO_10092024152155245722809505', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}"}
2024-09-10 12:22:07,586 - INFO - {'updated_data': 'callback data began'}
2024-09-10 12:22:07,586 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16526906', 'CheckoutRequestID': 'ws_CO_10092024152155245722809505', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}}
2024-09-10 12:22:07,741 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:22:07,927 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:22:07,929 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:22:08,141 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:22:52,050 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516531103', 'CheckoutRequestID': 'ws_CO_10092024152235681722809505', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 23559.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA946E2K3'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910152251}, {'Name': 'PhoneNumber', 'Value': 254722809505}]}}}}"}
2024-09-10 12:22:52,051 - INFO - {'updated_data': 'callback data began'}
2024-09-10 12:22:52,051 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516531103', 'CheckoutRequestID': 'ws_CO_10092024152235681722809505', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 23559.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA946E2K3'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910152251}, {'Name': 'PhoneNumber', 'Value': 254722809505}]}}}}}
2024-09-10 12:22:52,253 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:22:52,768 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:22:52,770 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:22:53,025 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:22:57,589 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:22:57,736 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:22:57,737 - INFO - {'updated': 'initiated stk query for ws_CO_10092024152235681722809505 827142 '}
2024-09-10 12:22:57,794 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:22:58,615 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:22:58,617 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer wPwomXpMu80RRcY3A9jApda6IqUz'}"}
2024-09-10 12:22:58,618 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTIyMjU3', 'Timestamp': '20240910122257', 'CheckoutRequestID': 'ws_CO_10092024152235681722809505'}"}
2024-09-10 12:22:58,619 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:22:59,266 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 12:22:59,267 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516531103', 'CheckoutRequestID': 'ws_CO_10092024152235681722809505', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024152235681722809505 827142"}
2024-09-10 12:22:59,396 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:22:59,911 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:22:59,913 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:23:00,440 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:28:01,239 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87661356', 'CheckoutRequestID': 'ws_CO_10092024152750834703752300', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 12391.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA4473AVO'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910152800}, {'Name': 'PhoneNumber', 'Value': 254703752300}]}}}}"}
2024-09-10 12:28:01,240 - INFO - {'updated_data': 'callback data began'}
2024-09-10 12:28:01,240 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87661356', 'CheckoutRequestID': 'ws_CO_10092024152750834703752300', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 12391.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA4473AVO'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910152800}, {'Name': 'PhoneNumber', 'Value': 254703752300}]}}}}}
2024-09-10 12:28:01,471 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:28:02,005 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:28:02,006 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:28:02,250 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:28:51,911 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16544591', 'CheckoutRequestID': 'ws_CO_10092024152830522716487914', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-10 12:28:51,912 - INFO - {'updated_data': 'callback data began'}
2024-09-10 12:28:51,912 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16544591', 'CheckoutRequestID': 'ws_CO_10092024152830522716487914', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-10 12:28:52,080 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:28:52,163 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:28:52,282 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:28:52,283 - INFO - {'updated': 'initiated stk query for ws_CO_10092024152830522716487914 827142 '}
2024-09-10 12:28:52,285 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:28:52,304 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:28:52,385 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:28:52,547 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:28:52,978 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:28:52,980 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 0IOJtOXWA1s7G408dxzlCpOvpZsr'}"}
2024-09-10 12:28:52,980 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTIyODUy', 'Timestamp': '20240910122852', 'CheckoutRequestID': 'ws_CO_10092024152830522716487914'}"}
2024-09-10 12:28:52,981 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:28:53,715 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-10 12:28:53,715 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16544591', 'CheckoutRequestID': 'ws_CO_10092024152830522716487914', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_10092024152830522716487914 827142"}
2024-09-10 12:28:53,916 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:28:54,118 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:28:54,119 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:28:54,640 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:29:14,469 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:29:14,628 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:29:14,629 - INFO - there is a test coming
2024-09-10 12:29:14,629 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 12:29:14,683 - INFO - {'updated_data': 'the data is now as 254722405846'}
2024-09-10 12:29:14,684 - INFO - the data is now as 254722405846
2024-09-10 12:29:14,705 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 12:29:14,706 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 12:29:14,707 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:29:15,363 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:29:15,365 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer k3tsn5ySRnWPYI2huUlpCbEiIQBw'}"}
2024-09-10 12:29:15,366 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTIyOTE1', 'Timestamp': '20240910122915', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '6759', 'PartyA': '254722405846', 'PartyB': 827142, 'PhoneNumber': '254722405846', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '125-12613', 'TransactionDesc': 'Some payment'}
2024-09-10 12:29:15,367 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:29:16,101 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 12:29:16,108 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169993416', 'CheckoutRequestID': 'ws_CO_10092024152915884722405846', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 12:50:44,705 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:50:44,845 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:50:44,846 - INFO - {'updated': 'initiated stk query for ws_CO_10092024155010373721553876 827142 '}
2024-09-10 12:50:44,905 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:50:45,613 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:50:45,616 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Q7XNjvAClAinRLgd0WilNNWTTlB5'}"}
2024-09-10 12:50:45,616 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTI1MDQ0', 'Timestamp': '20240910125044', 'CheckoutRequestID': 'ws_CO_10092024155010373721553876'}"}
2024-09-10 12:50:45,617 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:50:46,470 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 376
2024-09-10 12:50:46,470 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075693034', 'CheckoutRequestID': 'ws_CO_10092024155010373721553876', 'ResultCode': '1037', 'ResultDesc': 'DS timeout user cannot be reached'} for ws_CO_10092024155010373721553876 827142"}
2024-09-10 12:50:46,629 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:50:46,909 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:50:46,910 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:50:47,201 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:51:35,132 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:51:35,258 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:51:35,259 - INFO - there is a test coming
2024-09-10 12:51:35,259 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 12:51:35,307 - INFO - {'updated_data': 'the data is now as 254714381501'}
2024-09-10 12:51:35,308 - INFO - the data is now as 254714381501
2024-09-10 12:51:35,329 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 12:51:35,329 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 12:51:35,331 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:51:36,013 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:51:36,016 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer z7YDmOnmseGElGKVGqIYZFdC3zhm'}"}
2024-09-10 12:51:36,016 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTI1MTM2', 'Timestamp': '20240910125136', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254714381501', 'PartyB': 827142, 'PhoneNumber': '254714381501', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-21376', 'TransactionDesc': 'Some payment'}
2024-09-10 12:51:36,017 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:51:36,888 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 12:51:36,895 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169782666', 'CheckoutRequestID': 'ws_CO_10092024155136555714381501', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 13:05:06,311 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:05:06,505 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:05:06,506 - INFO - {'updated': 'initiated stk query for ws_CO_10092024160453153718159756 899885 '}
2024-09-10 13:05:06,573 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:05:07,139 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:05:07,141 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer lxq2ft0pAywkBPNiVA40fIQgr23g'}"}
2024-09-10 13:05:07,142 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTMwNTA2', 'Timestamp': '20240910130506', 'CheckoutRequestID': 'ws_CO_10092024160453153718159756'}"}
2024-09-10 13:05:07,143 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:05:07,928 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 13:05:07,928 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6201462', 'CheckoutRequestID': 'ws_CO_10092024160453153718159756', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024160453153718159756 899885"}
2024-09-10 13:05:08,083 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:05:08,290 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:05:08,291 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:05:08,874 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:12:50,517 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:12:50,672 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:12:50,673 - INFO - there is a test coming
2024-09-10 13:12:50,673 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 13:12:50,727 - INFO - {'updated_data': 'the data is now as 254705289286'}
2024-09-10 13:12:50,727 - INFO - the data is now as 254705289286
2024-09-10 13:12:50,754 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 13:12:50,754 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 13:12:50,755 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:12:51,424 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:12:51,426 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer VMax1w3rDu7V7Q7PO5gj9Q35dXcg'}"}
2024-09-10 13:12:51,427 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTMxMjUx', 'Timestamp': '20240910131251', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254705289286', 'PartyB': 899885, 'PhoneNumber': '254705289286', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA008251CP-1725973969521', 'TransactionDesc': 'Some payment'}
2024-09-10 13:12:51,428 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:12:52,280 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 13:12:52,290 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16669739', 'CheckoutRequestID': 'ws_CO_10092024161251963705289286', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 13:15:24,016 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170045634', 'CheckoutRequestID': 'ws_CO_10092024161511338725613093', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 15000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA04DIX4I'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910161523}, {'Name': 'PhoneNumber', 'Value': 254725613093}]}}}}"}
2024-09-10 13:15:24,016 - INFO - {'updated_data': 'callback data began'}
2024-09-10 13:15:24,017 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170045634', 'CheckoutRequestID': 'ws_CO_10092024161511338725613093', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 15000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA04DIX4I'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910161523}, {'Name': 'PhoneNumber', 'Value': 254725613093}]}}}}}
2024-09-10 13:15:24,225 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:15:24,626 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:15:24,629 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:15:24,851 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:15:26,084 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:15:26,355 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:15:26,356 - INFO - {'updated': 'initiated stk query for ws_CO_10092024161511338725613093 827142 '}
2024-09-10 13:15:26,412 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:15:26,971 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:15:26,972 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer UjXAXFshgCRkLAs3I0RE94ch2FXx'}"}
2024-09-10 13:15:26,973 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTMxNTI2', 'Timestamp': '20240910131526', 'CheckoutRequestID': 'ws_CO_10092024161511338725613093'}"}
2024-09-10 13:15:26,974 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:15:27,685 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 13:15:27,686 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170045634', 'CheckoutRequestID': 'ws_CO_10092024161511338725613093', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024161511338725613093 827142"}
2024-09-10 13:15:27,959 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:15:28,481 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:15:28,482 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:15:28,743 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:15:47,817 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:15:48,052 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:15:48,053 - INFO - there is a test coming
2024-09-10 13:15:48,053 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 13:15:48,095 - INFO - {'updated_data': 'the data is now as 254705242260'}
2024-09-10 13:15:48,095 - INFO - the data is now as 254705242260
2024-09-10 13:15:48,111 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 13:15:48,111 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 13:15:48,112 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:15:48,737 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:15:48,739 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer uG77RmPAxnIheT49247i0VUpGcJ1'}"}
2024-09-10 13:15:48,740 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTMxNTQ4', 'Timestamp': '20240910131548', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1417', 'PartyA': '254705242260', 'PartyB': 827142, 'PhoneNumber': '254705242260', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-2938', 'TransactionDesc': 'Some payment'}
2024-09-10 13:15:48,741 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:15:49,528 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 13:15:49,538 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170532845', 'CheckoutRequestID': 'ws_CO_10092024161549279705242260', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 13:16:08,585 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170532845', 'CheckoutRequestID': 'ws_CO_10092024161549279705242260', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-10 13:16:08,586 - INFO - {'updated_data': 'callback data began'}
2024-09-10 13:16:08,586 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170532845', 'CheckoutRequestID': 'ws_CO_10092024161549279705242260', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-10 13:16:08,759 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:16:09,267 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:16:09,268 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:16:09,501 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:16:11,124 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170046324', 'CheckoutRequestID': 'ws_CO_10092024161551037721992898', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 18000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA54DMPO7'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910161610}, {'Name': 'PhoneNumber', 'Value': 254721992898}]}}}}"}
2024-09-10 13:16:11,124 - INFO - {'updated_data': 'callback data began'}
2024-09-10 13:16:11,124 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170046324', 'CheckoutRequestID': 'ws_CO_10092024161551037721992898', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 18000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA54DMPO7'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910161610}, {'Name': 'PhoneNumber', 'Value': 254721992898}]}}}}}
2024-09-10 13:16:11,321 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:16:11,832 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:16:11,840 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:16:12,066 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:16:29,020 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:16:29,175 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:16:29,176 - INFO - {'updated': 'initiated stk query for ws_CO_10092024161547602700302651 899885 '}
2024-09-10 13:16:29,233 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:16:29,902 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:16:29,904 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer AN3qjKfL9jCalMEvcMWVYRt2piR2'}"}
2024-09-10 13:16:29,904 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTMxNjI5', 'Timestamp': '20240910131629', 'CheckoutRequestID': 'ws_CO_10092024161547602700302651'}"}
2024-09-10 13:16:29,905 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:16:30,560 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 13:16:30,561 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516680677', 'CheckoutRequestID': 'ws_CO_10092024161547602700302651', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024161547602700302651 899885"}
2024-09-10 13:16:30,691 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:16:31,213 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:16:31,214 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:16:31,748 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:16:32,192 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:16:32,214 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 13:16:32,215 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 13:16:50,820 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:16:50,993 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:16:50,994 - INFO - there is a test coming
2024-09-10 13:16:50,994 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 13:16:51,048 - INFO - {'updated_data': 'the data is now as 254725613093'}
2024-09-10 13:16:51,049 - INFO - the data is now as 254725613093
2024-09-10 13:16:51,090 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 13:16:51,091 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 13:16:51,092 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:16:51,688 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:16:51,690 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer GEV5yfanMpr82bX0FkfQc8CG0t65'}"}
2024-09-10 13:16:51,690 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTMxNjUx', 'Timestamp': '20240910131651', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '15000', 'PartyA': '254725613093', 'PartyB': 827142, 'PhoneNumber': '254725613093', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '132-2956', 'TransactionDesc': 'Some payment'}
2024-09-10 13:16:51,691 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:16:54,832 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 13:16:54,839 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170533934', 'CheckoutRequestID': 'ws_CO_10092024161652203725613093', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 13:17:05,628 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170533934', 'CheckoutRequestID': 'ws_CO_10092024161652203725613093', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 15000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA14DR4SZ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910161705}, {'Name': 'PhoneNumber', 'Value': 254725613093}]}}}}"}
2024-09-10 13:17:05,628 - INFO - {'updated_data': 'callback data began'}
2024-09-10 13:17:05,628 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170533934', 'CheckoutRequestID': 'ws_CO_10092024161652203725613093', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 15000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA14DR4SZ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910161705}, {'Name': 'PhoneNumber', 'Value': 254725613093}]}}}}}
2024-09-10 13:17:05,872 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:17:06,067 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:17:06,068 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:17:06,599 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:18:28,664 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:18:28,843 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:18:28,843 - INFO - there is a test coming
2024-09-10 13:18:28,844 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 13:18:28,889 - INFO - {'updated_data': 'the data is now as 254727468569'}
2024-09-10 13:18:28,890 - INFO - the data is now as 254727468569
2024-09-10 13:18:28,907 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 13:18:28,907 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 13:18:28,908 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:18:29,521 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:18:29,523 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer wqsmLRZG27fxhPctzUxjiy4OA7Gz'}"}
2024-09-10 13:18:29,523 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTMxODI5', 'Timestamp': '20240910131829', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254727468569', 'PartyB': 899885, 'PhoneNumber': '254727468569', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA1654379LM-1725974306988', 'TransactionDesc': 'Some payment'}
2024-09-10 13:18:29,524 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:18:31,790 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 13:18:31,796 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6239763', 'CheckoutRequestID': 'ws_CO_10092024161830137727468569', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 13:18:41,250 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6239763', 'CheckoutRequestID': 'ws_CO_10092024161830137727468569', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA64DYZ8C'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910161840}, {'Name': 'PhoneNumber', 'Value': 254727468569}]}}}}"}
2024-09-10 13:18:41,250 - INFO - {'updated_data': 'callback data began'}
2024-09-10 13:18:41,251 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6239763', 'CheckoutRequestID': 'ws_CO_10092024161830137727468569', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA64DYZ8C'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910161840}, {'Name': 'PhoneNumber', 'Value': 254727468569}]}}}}}
2024-09-10 13:18:41,456 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:18:41,661 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:18:41,663 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:18:41,905 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:18:49,395 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:18:49,552 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:18:49,553 - INFO - {'updated': 'initiated stk query for ws_CO_10092024161818322725613093 899885 '}
2024-09-10 13:18:49,617 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:18:50,270 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:18:50,272 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 4anuXgM4iGDnSzw8JfpHvU7QY73A'}"}
2024-09-10 13:18:50,272 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTMxODQ5', 'Timestamp': '20240910131849', 'CheckoutRequestID': 'ws_CO_10092024161818322725613093'}"}
2024-09-10 13:18:50,274 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:18:50,884 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 13:18:50,885 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024161818322725613093', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024161818322725613093 899885"}
2024-09-10 13:18:50,887 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 13:19:19,763 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:19:19,922 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:19:19,923 - INFO - {'updated': 'initiated stk query for ws_CO_10092024161818322725613093 899885 '}
2024-09-10 13:19:20,143 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:19:20,756 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:19:20,759 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ZEtW52AFHffkiWTg0NuBuqr3Tb5v'}"}
2024-09-10 13:19:20,759 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTMxOTIw', 'Timestamp': '20240910131920', 'CheckoutRequestID': 'ws_CO_10092024161818322725613093'}"}
2024-09-10 13:19:20,761 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:19:21,464 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 375
2024-09-10 13:19:21,464 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6239274', 'CheckoutRequestID': 'ws_CO_10092024161818322725613093', 'ResultCode': '1037', 'ResultDesc': 'DS timeout user cannot be reached'} for ws_CO_10092024161818322725613093 899885"}
2024-09-10 13:19:21,586 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:19:21,789 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:19:21,794 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:19:22,358 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:21:50,124 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:21:50,260 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:21:50,261 - INFO - {'updated': 'initiated stk query for ws_CO_10092024162138586725247626 827142 '}
2024-09-10 13:21:50,325 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:21:51,005 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:21:51,013 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ByJ6JSoSt5jgx6X6mExeeCSr8XAU'}"}
2024-09-10 13:21:51,014 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTMyMTUw', 'Timestamp': '20240910132150', 'CheckoutRequestID': 'ws_CO_10092024162138586725247626'}"}
2024-09-10 13:21:51,015 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:21:51,630 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 13:21:51,630 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516697031', 'CheckoutRequestID': 'ws_CO_10092024162138586725247626', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024162138586725247626 827142"}
2024-09-10 13:21:51,753 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:21:52,259 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:21:52,261 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:21:52,497 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:21:52,532 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:21:52,685 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:21:52,685 - INFO - {'updated': 'initiated stk query for ws_CO_10092024162101419712302951 899885 '}
2024-09-10 13:21:52,740 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:21:53,305 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:21:53,307 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ELXWwjGP0IGSsnfKWRSklAa135vT'}"}
2024-09-10 13:21:53,307 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTMyMTUy', 'Timestamp': '20240910132152', 'CheckoutRequestID': 'ws_CO_10092024162101419712302951'}"}
2024-09-10 13:21:53,309 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:21:54,049 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 388
2024-09-10 13:21:54,050 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16693070', 'CheckoutRequestID': 'ws_CO_10092024162101419712302951', 'ResultCode': '1', 'ResultDesc': 'The balance is insufficient for the transaction.'} for ws_CO_10092024162101419712302951 899885"}
2024-09-10 13:21:54,178 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:21:54,371 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:21:54,372 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:21:54,893 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:22:27,839 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:22:27,984 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:22:27,985 - INFO - there is a test coming
2024-09-10 13:22:27,985 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 13:22:28,026 - INFO - {'updated_data': 'the data is now as 254722987774'}
2024-09-10 13:22:28,026 - INFO - the data is now as 254722987774
2024-09-10 13:22:28,040 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 13:22:28,040 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 13:22:28,041 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:22:28,771 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:22:28,773 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 0Lec5JrmnmQQ6pWmEsVNyEP47KuC'}"}
2024-09-10 13:22:28,774 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTMyMjI4', 'Timestamp': '20240910132228', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254722987774', 'PartyB': 827142, 'PhoneNumber': '254722987774', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '201-255', 'TransactionDesc': 'Some payment'}
2024-09-10 13:22:28,775 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:22:29,626 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 13:22:29,632 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87723751', 'CheckoutRequestID': 'ws_CO_10092024162229416722987774', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 13:22:40,440 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87723751', 'CheckoutRequestID': 'ws_CO_10092024162229416722987774', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA74EJ3R5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910162239}, {'Name': 'PhoneNumber', 'Value': 254722987774}]}}}}"}
2024-09-10 13:22:40,441 - INFO - {'updated_data': 'callback data began'}
2024-09-10 13:22:40,441 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87723751', 'CheckoutRequestID': 'ws_CO_10092024162229416722987774', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA74EJ3R5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910162239}, {'Name': 'PhoneNumber', 'Value': 254722987774}]}}}}}
2024-09-10 13:22:40,686 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:22:40,886 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:22:40,888 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:22:41,475 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:24:04,969 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:24:05,108 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:24:05,109 - INFO - {'updated': 'initiated stk query for ws_CO_10092024162353918770187518 827142 '}
2024-09-10 13:24:05,178 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:24:05,789 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:24:05,791 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ngxsToeB8rd9uYzz3QMXejhAhRMt'}"}
2024-09-10 13:24:05,791 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTMyNDA1', 'Timestamp': '20240910132405', 'CheckoutRequestID': 'ws_CO_10092024162353918770187518'}"}
2024-09-10 13:24:05,793 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:24:06,577 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 379
2024-09-10 13:24:06,577 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6254764', 'CheckoutRequestID': 'ws_CO_10092024162353918770187518', 'ResultCode': '2001', 'ResultDesc': 'The initiator information is invalid.'} for ws_CO_10092024162353918770187518 827142"}
2024-09-10 13:24:06,756 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:24:06,968 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:24:06,970 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:24:07,187 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:24:26,647 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:24:26,792 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:24:26,793 - INFO - there is a test coming
2024-09-10 13:24:26,793 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 13:24:26,831 - INFO - {'updated_data': 'the data is now as 254727099307'}
2024-09-10 13:24:26,831 - INFO - the data is now as 254727099307
2024-09-10 13:24:26,845 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 13:24:26,845 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 13:24:26,846 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:24:27,413 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:24:27,414 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer O0ip94JqY0dkWvXzG5P0GpPOyMZf'}"}
2024-09-10 13:24:27,415 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTMyNDI3', 'Timestamp': '20240910132427', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '6000', 'PartyA': '254727099307', 'PartyB': 827142, 'PhoneNumber': '254727099307', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-15284', 'TransactionDesc': 'Some payment'}
2024-09-10 13:24:27,416 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:24:28,275 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 13:24:28,281 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208793412982', 'CheckoutRequestID': 'ws_CO_10092024162428036727099307', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 13:24:36,582 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:24:36,826 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:24:36,827 - INFO - {'updated': 'initiated stk query for ws_CO_10092024162419362722987774 899885 '}
2024-09-10 13:24:36,901 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:24:37,589 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:24:37,592 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer lzhsC4k6HZ4wO7BZWyXaZUO8GQrV'}"}
2024-09-10 13:24:37,593 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTMyNDM2', 'Timestamp': '20240910132436', 'CheckoutRequestID': 'ws_CO_10092024162419362722987774'}"}
2024-09-10 13:24:37,594 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:24:38,285 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 13:24:38,285 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516704637', 'CheckoutRequestID': 'ws_CO_10092024162419362722987774', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024162419362722987774 899885"}
2024-09-10 13:24:38,436 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:24:38,618 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:24:38,620 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:24:38,821 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:24:39,039 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:24:39,066 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 13:24:39,066 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 13:24:56,210 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:24:56,373 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:24:56,374 - INFO - there is a test coming
2024-09-10 13:24:56,374 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 13:24:56,420 - INFO - {'updated_data': 'the data is now as 254714781120'}
2024-09-10 13:24:56,420 - INFO - the data is now as 254714781120
2024-09-10 13:24:56,438 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 13:24:56,438 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 13:24:56,439 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:24:57,036 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:24:57,038 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 3bVXaUekrZQfHOZYAj7sAGyiQlPh'}"}
2024-09-10 13:24:57,038 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTMyNDU3', 'Timestamp': '20240910132457', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254714781120', 'PartyB': 827142, 'PhoneNumber': '254714781120', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-19895', 'TransactionDesc': 'Some payment'}
2024-09-10 13:24:57,039 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:24:57,785 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 13:24:57,791 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87726588', 'CheckoutRequestID': 'ws_CO_10092024162457565714781120', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 13:25:08,924 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:25:08,940 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 13:25:08,941 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 13:25:09,201 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:25:09,228 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 13:25:09,229 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 13:25:18,748 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:25:18,878 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:25:18,879 - INFO - {'updated': 'initiated stk query for ws_CO_10092024162457565714781120 827142 '}
2024-09-10 13:25:18,937 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:25:19,509 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:25:19,511 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 4Sj6otyCLFoooWnr00Kd8ASK6mjM'}"}
2024-09-10 13:25:19,511 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTMyNTE4', 'Timestamp': '20240910132518', 'CheckoutRequestID': 'ws_CO_10092024162457565714781120'}"}
2024-09-10 13:25:19,512 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:25:20,124 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 13:25:20,124 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87726588', 'CheckoutRequestID': 'ws_CO_10092024162457565714781120', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024162457565714781120 827142"}
2024-09-10 13:25:20,255 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:25:20,760 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:25:20,762 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:25:21,291 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:25:42,361 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:25:42,490 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:25:42,491 - INFO - there is a test coming
2024-09-10 13:25:42,491 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 13:25:42,535 - INFO - {'updated_data': 'the data is now as 254722987774'}
2024-09-10 13:25:42,535 - INFO - the data is now as 254722987774
2024-09-10 13:25:42,560 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 13:25:42,561 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 13:25:42,562 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:25:43,321 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:25:43,323 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer EG7yAzHHawJoeVMl4Pb9rtHzHxDF'}"}
2024-09-10 13:25:43,323 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTMyNTQz', 'Timestamp': '20240910132543', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254722987774', 'PartyB': 899885, 'PhoneNumber': '254722987774', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0601561-1725974741595', 'TransactionDesc': 'Some payment'}
2024-09-10 13:25:43,324 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:25:44,245 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 13:25:44,252 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170544114', 'CheckoutRequestID': 'ws_CO_10092024162543998722987774', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 13:26:36,439 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596623649', 'CheckoutRequestID': 'ws_CO_10092024162623943727099307', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-10 13:26:36,440 - INFO - {'updated_data': 'callback data began'}
2024-09-10 13:26:36,440 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596623649', 'CheckoutRequestID': 'ws_CO_10092024162623943727099307', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-10 13:26:36,634 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:26:37,165 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:26:37,166 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:26:37,418 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:26:43,871 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:26:44,017 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:26:44,018 - INFO - there is a test coming
2024-09-10 13:26:44,018 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 13:26:44,131 - INFO - {'updated_data': 'the data is now as 254725247626'}
2024-09-10 13:26:44,131 - INFO - the data is now as 254725247626
2024-09-10 13:26:44,154 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 13:26:44,155 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 13:26:44,156 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:26:44,796 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:26:44,798 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ZuBfDFaD5Z1l0EuSYpKSBkvmeeEk'}"}
2024-09-10 13:26:44,798 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTMyNjQ0', 'Timestamp': '20240910132644', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3050', 'PartyA': '254725247626', 'PartyB': 827142, 'PhoneNumber': '254725247626', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-18384', 'TransactionDesc': 'Some payment'}
2024-09-10 13:26:44,800 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:26:45,775 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 13:26:45,781 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6263388', 'CheckoutRequestID': 'ws_CO_10092024162645316725247626', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 13:27:54,919 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:27:55,080 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:27:55,081 - INFO - {'updated': 'initiated stk query for ws_CO_10092024162723119725247626 827142 '}
2024-09-10 13:27:55,156 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:27:55,734 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:27:55,737 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 0OMc1hozn8iBsJXaZwLlGaJUE6px'}"}
2024-09-10 13:27:55,738 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTMyNzU1', 'Timestamp': '20240910132755', 'CheckoutRequestID': 'ws_CO_10092024162723119725247626'}"}
2024-09-10 13:27:55,739 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:27:56,373 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 13:27:56,374 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024162723119725247626', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024162723119725247626 827142"}
2024-09-10 13:27:56,377 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 13:28:10,823 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596626411', 'CheckoutRequestID': 'ws_CO_10092024162723119725247626', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3050.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA24FBI3G'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910162810}, {'Name': 'PhoneNumber', 'Value': 254725247626}]}}}}"}
2024-09-10 13:28:10,824 - INFO - {'updated_data': 'callback data began'}
2024-09-10 13:28:10,824 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596626411', 'CheckoutRequestID': 'ws_CO_10092024162723119725247626', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3050.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA24FBI3G'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910162810}, {'Name': 'PhoneNumber', 'Value': 254725247626}]}}}}}
2024-09-10 13:28:11,005 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:28:11,222 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:28:11,225 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:28:11,482 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:28:24,425 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:28:24,538 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:28:24,539 - INFO - {'updated': 'initiated stk query for ws_CO_10092024162723119725247626 827142 '}
2024-09-10 13:28:24,595 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:28:25,179 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:28:25,181 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer RI1LeE4KDVnjKrmABqFDQhYzuGEE'}"}
2024-09-10 13:28:25,181 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTMyODI0', 'Timestamp': '20240910132824', 'CheckoutRequestID': 'ws_CO_10092024162723119725247626'}"}
2024-09-10 13:28:25,183 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:28:25,807 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 13:28:25,807 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596626411', 'CheckoutRequestID': 'ws_CO_10092024162723119725247626', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024162723119725247626 827142"}
2024-09-10 13:28:25,930 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:28:26,441 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:28:26,442 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:28:26,992 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:28:27,082 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:28:27,099 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 13:28:27,099 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 13:28:58,422 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87731310', 'CheckoutRequestID': 'ws_CO_10092024162849820710613973', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA74FFV4D'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910162857}, {'Name': 'PhoneNumber', 'Value': 254710613973}]}}}}"}
2024-09-10 13:28:58,422 - INFO - {'updated_data': 'callback data began'}
2024-09-10 13:28:58,422 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87731310', 'CheckoutRequestID': 'ws_CO_10092024162849820710613973', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA74FFV4D'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910162857}, {'Name': 'PhoneNumber', 'Value': 254710613973}]}}}}}
2024-09-10 13:28:58,608 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:28:58,827 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:28:58,828 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:28:59,368 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:29:01,971 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:29:02,095 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:29:02,096 - INFO - {'updated': 'initiated stk query for ws_CO_10092024162849820710613973 827142 '}
2024-09-10 13:29:02,180 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:29:02,763 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:29:02,765 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer DvHuhbBp8rccLASKUGnsxq4ijbR3'}"}
2024-09-10 13:29:02,766 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTMyOTAy', 'Timestamp': '20240910132902', 'CheckoutRequestID': 'ws_CO_10092024162849820710613973'}"}
2024-09-10 13:29:02,767 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:29:03,409 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 13:29:03,409 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87731310', 'CheckoutRequestID': 'ws_CO_10092024162849820710613973', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024162849820710613973 827142"}
2024-09-10 13:29:03,607 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:29:03,817 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:29:03,818 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:29:04,051 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:30:51,355 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6274700', 'CheckoutRequestID': 'ws_CO_10092024163034798798691209', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA84FPA5O'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910163047}, {'Name': 'PhoneNumber', 'Value': 254798691209}]}}}}"}
2024-09-10 13:30:51,355 - INFO - {'updated_data': 'callback data began'}
2024-09-10 13:30:51,355 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6274700', 'CheckoutRequestID': 'ws_CO_10092024163034798798691209', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA84FPA5O'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910163047}, {'Name': 'PhoneNumber', 'Value': 254798691209}]}}}}}
2024-09-10 13:30:51,529 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:30:51,776 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:30:51,778 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:30:51,994 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:31:18,287 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:31:18,428 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:31:18,428 - INFO - {'updated': 'initiated stk query for ws_CO_10092024163034798798691209 899885 '}
2024-09-10 13:31:18,511 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:31:19,194 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:31:19,195 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 08aaGkGL0Ry9G96k5W7sMAcsgM69'}"}
2024-09-10 13:31:19,196 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTMzMTE4', 'Timestamp': '20240910133118', 'CheckoutRequestID': 'ws_CO_10092024163034798798691209'}"}
2024-09-10 13:31:19,197 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:31:19,918 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 13:31:19,919 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6274700', 'CheckoutRequestID': 'ws_CO_10092024163034798798691209', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024163034798798691209 899885"}
2024-09-10 13:31:20,079 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:31:20,284 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:31:20,285 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:31:20,864 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:32:51,219 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:32:51,437 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:32:51,438 - INFO - there is a test coming
2024-09-10 13:32:51,438 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 13:32:51,479 - INFO - {'updated_data': 'the data is now as 254725779008'}
2024-09-10 13:32:51,479 - INFO - the data is now as 254725779008
2024-09-10 13:32:51,494 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 13:32:51,495 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 13:32:51,496 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:32:52,244 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:32:52,246 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer CINlgolsDHFx1FMty3SBFPGB0HVf'}"}
2024-09-10 13:32:52,246 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTMzMjUy', 'Timestamp': '20240910133252', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '42511', 'PartyA': '254725779008', 'PartyB': 827142, 'PhoneNumber': '254725779008', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-152167', 'TransactionDesc': 'Some payment'}
2024-09-10 13:32:52,248 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:32:53,516 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 13:32:53,524 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170066143', 'CheckoutRequestID': 'ws_CO_10092024163252880725779008', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 13:33:13,166 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:33:13,330 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:33:13,330 - INFO - {'updated': 'initiated stk query for ws_CO_10092024163252880725779008 827142 '}
2024-09-10 13:33:13,401 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:33:13,970 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:33:13,973 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer RnzZYD0M2DxduJfQc3OEZAvzHxPU'}"}
2024-09-10 13:33:13,973 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTMzMzEz', 'Timestamp': '20240910133313', 'CheckoutRequestID': 'ws_CO_10092024163252880725779008'}"}
2024-09-10 13:33:13,975 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:33:14,601 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 389
2024-09-10 13:33:14,602 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170066143', 'CheckoutRequestID': 'ws_CO_10092024163252880725779008', 'ResultCode': '1', 'ResultDesc': 'The balance is insufficient for the transaction.'} for ws_CO_10092024163252880725779008 827142"}
2024-09-10 13:33:14,805 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:33:15,033 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:33:15,034 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:33:15,256 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:33:28,322 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:33:28,465 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:33:28,466 - INFO - there is a test coming
2024-09-10 13:33:28,466 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 13:33:28,508 - INFO - {'updated_data': 'the data is now as 254728762300'}
2024-09-10 13:33:28,508 - INFO - the data is now as 254728762300
2024-09-10 13:33:28,525 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 13:33:28,525 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 13:33:28,526 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:33:29,106 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:33:29,108 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer QuAeBK2Apaa2Y0G6SkAA5WhQbO3T'}"}
2024-09-10 13:33:29,109 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTMzMzI5', 'Timestamp': '20240910133329', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3230', 'PartyA': '254728762300', 'PartyB': 827142, 'PhoneNumber': '254728762300', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-37749', 'TransactionDesc': 'Some payment'}
2024-09-10 13:33:29,109 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:33:29,982 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 13:33:29,988 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075743532', 'CheckoutRequestID': 'ws_CO_10092024163329726728762300', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 13:33:44,382 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:33:44,420 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 13:33:44,421 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 13:34:09,879 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596645796', 'CheckoutRequestID': 'ws_CO_10092024163359652726334626', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 604.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA84G6MJ6'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910163408}, {'Name': 'PhoneNumber', 'Value': 254726334626}]}}}}"}
2024-09-10 13:34:09,880 - INFO - {'updated_data': 'callback data began'}
2024-09-10 13:34:09,880 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596645796', 'CheckoutRequestID': 'ws_CO_10092024163359652726334626', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 604.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA84G6MJ6'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910163408}, {'Name': 'PhoneNumber', 'Value': 254726334626}]}}}}}
2024-09-10 13:34:10,057 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:34:10,253 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:34:10,255 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:34:10,463 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:34:20,728 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:34:20,947 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:34:20,948 - INFO - {'updated': 'initiated stk query for ws_CO_10092024163359652726334626 827142 '}
2024-09-10 13:34:21,015 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:34:21,694 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:34:21,697 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer tNRtCxSVHFGGWbBUSXiLjpgGBVyy'}"}
2024-09-10 13:34:21,697 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTMzNDIx', 'Timestamp': '20240910133421', 'CheckoutRequestID': 'ws_CO_10092024163359652726334626'}"}
2024-09-10 13:34:21,701 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:34:22,361 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 13:34:22,362 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596645796', 'CheckoutRequestID': 'ws_CO_10092024163359652726334626', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024163359652726334626 827142"}
2024-09-10 13:34:22,490 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:34:22,711 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:34:22,713 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:34:22,938 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:34:46,650 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:34:46,814 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:34:46,815 - INFO - there is a test coming
2024-09-10 13:34:46,815 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 13:34:46,869 - INFO - {'updated_data': 'the data is now as 254726334626'}
2024-09-10 13:34:46,869 - INFO - the data is now as 254726334626
2024-09-10 13:34:46,886 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 13:34:46,886 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 13:34:46,887 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:34:47,463 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:34:47,465 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer AITwoPhXRGfFNsAPmzMAHf0prck4'}"}
2024-09-10 13:34:47,465 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTMzNDQ3', 'Timestamp': '20240910133447', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254726334626', 'PartyB': 827142, 'PhoneNumber': '254726334626', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-19473', 'TransactionDesc': 'Some payment'}
2024-09-10 13:34:47,467 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:34:51,443 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 13:34:51,449 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516734696', 'CheckoutRequestID': 'ws_CO_10092024163448011726334626', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 13:34:53,708 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:34:53,867 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:34:53,868 - INFO - there is a test coming
2024-09-10 13:34:53,868 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 13:34:53,935 - INFO - {'updated_data': 'the data is now as 254722469681'}
2024-09-10 13:34:53,936 - INFO - the data is now as 254722469681
2024-09-10 13:34:53,976 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 13:34:53,976 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 13:34:53,977 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:34:54,623 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:34:54,624 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer L7PAJkUskx9odS2eniL9ZyZN2u9G'}"}
2024-09-10 13:34:54,625 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTMzNDU0', 'Timestamp': '20240910133454', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '44250', 'PartyA': '254722469681', 'PartyB': 827142, 'PhoneNumber': '254722469681', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-77645', 'TransactionDesc': 'Some payment'}
2024-09-10 13:34:54,626 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:34:55,621 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 13:34:55,635 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169832830', 'CheckoutRequestID': 'ws_CO_10092024163455136722469681', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 13:35:01,720 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516734696', 'CheckoutRequestID': 'ws_CO_10092024163448011726334626', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA54GB6WB'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910163500}, {'Name': 'PhoneNumber', 'Value': 254726334626}]}}}}"}
2024-09-10 13:35:01,720 - INFO - {'updated_data': 'callback data began'}
2024-09-10 13:35:01,721 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516734696', 'CheckoutRequestID': 'ws_CO_10092024163448011726334626', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA54GB6WB'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910163500}, {'Name': 'PhoneNumber', 'Value': 254726334626}]}}}}}
2024-09-10 13:35:01,891 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:35:02,244 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:35:02,246 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:35:02,765 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:42:00,447 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:42:00,683 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:42:00,684 - INFO - {'updated': 'initiated stk query for ws_CO_10092024164138759112832870 827142 '}
2024-09-10 13:42:00,782 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:42:01,352 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:42:01,356 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer MraVV6BgWal19bQSIDq9nXugEm2L'}"}
2024-09-10 13:42:01,357 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTM0MjAw', 'Timestamp': '20240910134200', 'CheckoutRequestID': 'ws_CO_10092024164138759112832870'}"}
2024-09-10 13:42:01,360 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:42:02,123 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 404 174
2024-09-10 13:42:02,124 - INFO - {'updated': "Received response {'requestId': '', 'errorCode': '404.001.03', 'errorMessage': 'Invalid Access Token'} for ws_CO_10092024164138759112832870 827142"}
2024-09-10 13:42:02,126 - WARNING - Not Found: /api/v1/stk/query/
2024-09-10 13:43:01,723 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:43:01,932 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:43:01,933 - INFO - {'updated': 'initiated stk query for ws_CO_10092024164247973112832870 827142 '}
2024-09-10 13:43:02,019 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:43:02,607 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:43:02,609 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer oiJMcdtpBECFAotgBacQ9PMeCeCJ'}"}
2024-09-10 13:43:02,609 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTM0MzAy', 'Timestamp': '20240910134302', 'CheckoutRequestID': 'ws_CO_10092024164247973112832870'}"}
2024-09-10 13:43:02,610 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:43:03,238 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 13:43:03,239 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024164247973112832870', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024164247973112832870 827142"}
2024-09-10 13:43:03,242 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 13:43:12,503 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:43:12,674 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:43:12,675 - INFO - there is a test coming
2024-09-10 13:43:12,675 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 13:43:12,725 - INFO - {'updated_data': 'the data is now as 254725613093'}
2024-09-10 13:43:12,725 - INFO - the data is now as 254725613093
2024-09-10 13:43:12,744 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 13:43:12,745 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 13:43:12,747 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:43:13,410 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:43:13,412 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 51ymRmaCRZdUyKt4V1AIG7gPSMog'}"}
2024-09-10 13:43:13,412 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTM0MzEz', 'Timestamp': '20240910134313', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254725613093', 'PartyB': 899885, 'PhoneNumber': '254725613093', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054072', 'TransactionDesc': 'Some payment'}
2024-09-10 13:43:13,413 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:43:14,309 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 13:43:14,316 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db16764307', 'CheckoutRequestID': 'ws_CO_10092024164314059725613093', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 13:43:25,274 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:43:25,397 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:43:25,397 - INFO - {'updated': 'initiated stk query for ws_CO_10092024164314059725613093 899885 '}
2024-09-10 13:43:25,446 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:43:26,101 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:43:26,103 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer YomLgcUPFGk1tC1pSxwONYrH9AvL'}"}
2024-09-10 13:43:26,103 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTM0MzI1', 'Timestamp': '20240910134325', 'CheckoutRequestID': 'ws_CO_10092024164314059725613093'}"}
2024-09-10 13:43:26,105 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:43:26,820 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 13:43:26,821 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db16764307', 'CheckoutRequestID': 'ws_CO_10092024164314059725613093', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024164314059725613093 899885"}
2024-09-10 13:43:26,980 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:43:27,525 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:43:27,527 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:43:27,747 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:45:43,093 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:45:43,255 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:45:43,256 - INFO - there is a test coming
2024-09-10 13:45:43,256 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 13:45:43,313 - INFO - {'updated_data': 'the data is now as 254728313960'}
2024-09-10 13:45:43,313 - INFO - the data is now as 254728313960
2024-09-10 13:45:43,332 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 13:45:43,332 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 13:45:43,333 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:45:43,916 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:45:43,918 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer o5KIkeG6RNqCak24E2y8n0OHgFKY'}"}
2024-09-10 13:45:43,919 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTM0NTQz', 'Timestamp': '20240910134543', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '23000', 'PartyA': '254728313960', 'PartyB': 899885, 'PhoneNumber': '254728313960', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054121', 'TransactionDesc': 'Some payment'}
2024-09-10 13:45:43,920 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:45:44,772 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 13:45:44,778 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16763853', 'CheckoutRequestID': 'ws_CO_10092024164544568728313960', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 13:51:05,827 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:51:05,992 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:51:05,992 - INFO - {'updated': 'initiated stk query for ws_CO_10092024165054636713733206 899885 '}
2024-09-10 13:51:06,084 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:51:06,755 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:51:06,757 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer W1G9Itd6bYcqHuWqRxzMUIW67tEM'}"}
2024-09-10 13:51:06,757 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTM1MTA2', 'Timestamp': '20240910135106', 'CheckoutRequestID': 'ws_CO_10092024165054636713733206'}"}
2024-09-10 13:51:06,758 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:51:07,400 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 13:51:07,402 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075763162', 'CheckoutRequestID': 'ws_CO_10092024165054636713733206', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024165054636713733206 899885"}
2024-09-10 13:51:07,539 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:51:08,116 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:51:08,117 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:51:08,647 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:56:44,170 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16795207', 'CheckoutRequestID': 'ws_CO_10092024165634312716213672', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 6854.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA34JK7KN'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910165643}, {'Name': 'PhoneNumber', 'Value': 254716213672}]}}}}"}
2024-09-10 13:56:44,171 - INFO - {'updated_data': 'callback data began'}
2024-09-10 13:56:44,171 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16795207', 'CheckoutRequestID': 'ws_CO_10092024165634312716213672', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 6854.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA34JK7KN'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910165643}, {'Name': 'PhoneNumber', 'Value': 254716213672}]}}}}}
2024-09-10 13:56:44,333 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:56:44,519 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:56:44,521 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:56:44,749 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:56:55,440 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:56:55,607 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:56:55,608 - INFO - {'updated': 'initiated stk query for ws_CO_10092024165634312716213672 827142 '}
2024-09-10 13:56:55,673 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:56:56,246 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:56:56,248 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer iAKvflSSgaXCAGhLc2dM4N1qnT4v'}"}
2024-09-10 13:56:56,248 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTM1NjU1', 'Timestamp': '20240910135655', 'CheckoutRequestID': 'ws_CO_10092024165634312716213672'}"}
2024-09-10 13:56:56,250 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:56:56,872 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 13:56:56,873 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16795207', 'CheckoutRequestID': 'ws_CO_10092024165634312716213672', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024165634312716213672 827142"}
2024-09-10 13:57:01,434 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:57:01,650 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:57:01,655 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:57:02,221 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:57:57,017 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:57:57,395 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:57:57,396 - INFO - there is a test coming
2024-09-10 13:57:57,396 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 13:57:57,458 - INFO - {'updated_data': 'the data is now as 254715298200'}
2024-09-10 13:57:57,459 - INFO - the data is now as 254715298200
2024-09-10 13:57:57,476 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 13:57:57,476 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 13:57:57,478 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:57:58,051 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:57:58,053 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer MAhqADskATzXzSAPpkejHIlDScxP'}"}
2024-09-10 13:57:58,054 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTM1NzU4', 'Timestamp': '20240910135758', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254715298200', 'PartyB': 827142, 'PhoneNumber': '254715298200', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '403-2426', 'TransactionDesc': 'Some payment'}
2024-09-10 13:57:58,055 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:57:58,808 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 13:57:58,815 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169859525', 'CheckoutRequestID': 'ws_CO_10092024165758559715298200', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 14:04:29,876 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:04:30,040 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:04:30,040 - INFO - {'updated': 'initiated stk query for ws_CO_10092024170418640707078676 899885 '}
2024-09-10 14:04:30,119 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:04:30,905 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:04:30,907 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 2PAGHuqAqARNTW05GbVeE7aPHJEz'}"}
2024-09-10 14:04:30,907 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTQwNDMw', 'Timestamp': '20240910140430', 'CheckoutRequestID': 'ws_CO_10092024170418640707078676'}"}
2024-09-10 14:04:30,908 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:04:31,664 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 14:04:31,665 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024170418640707078676', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024170418640707078676 899885"}
2024-09-10 14:04:31,668 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 14:06:05,016 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:06:05,203 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:06:05,204 - INFO - there is a test coming
2024-09-10 14:06:05,204 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 14:06:05,253 - INFO - {'updated_data': 'the data is now as 254700375108'}
2024-09-10 14:06:05,253 - INFO - the data is now as 254700375108
2024-09-10 14:06:05,269 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 14:06:05,269 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 14:06:05,270 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:06:05,826 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:06:05,828 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Gr06lG4WVz8XQGk3BnVzjiSUOysu'}"}
2024-09-10 14:06:05,829 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTQwNjA1', 'Timestamp': '20240910140605', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254700375108', 'PartyB': 899885, 'PhoneNumber': '254700375108', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054073', 'TransactionDesc': 'Some payment'}
2024-09-10 14:06:05,830 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:06:07,110 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 14:06:07,115 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208793461544', 'CheckoutRequestID': 'ws_CO_10092024170606389700375108', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 14:06:47,995 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6377621', 'CheckoutRequestID': 'ws_CO_10092024170623903727710741', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 25000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA24L3SGK'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910170647}, {'Name': 'PhoneNumber', 'Value': 254727710741}]}}}}"}
2024-09-10 14:06:47,996 - INFO - {'updated_data': 'callback data began'}
2024-09-10 14:06:47,996 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6377621', 'CheckoutRequestID': 'ws_CO_10092024170623903727710741', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 25000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA24L3SGK'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910170647}, {'Name': 'PhoneNumber', 'Value': 254727710741}]}}}}}
2024-09-10 14:06:48,169 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:06:48,366 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:06:48,367 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:06:48,604 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 14:06:50,207 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:06:50,402 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:06:50,403 - INFO - {'updated': 'initiated stk query for ws_CO_10092024170623903727710741 827142 '}
2024-09-10 14:06:50,532 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:06:51,122 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:06:51,124 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer A7C2Gnfh9xjfVkH29TvXdRJfWB8p'}"}
2024-09-10 14:06:51,124 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTQwNjUw', 'Timestamp': '20240910140650', 'CheckoutRequestID': 'ws_CO_10092024170623903727710741'}"}
2024-09-10 14:06:51,125 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:06:51,835 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 14:06:51,835 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6377621', 'CheckoutRequestID': 'ws_CO_10092024170623903727710741', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024170623903727710741 827142"}
2024-09-10 14:06:51,958 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:06:52,170 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:06:52,172 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:06:52,531 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 14:08:29,365 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075783348', 'CheckoutRequestID': 'ws_CO_10092024170813744725941611', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA74LDCAH'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910170828}, {'Name': 'PhoneNumber', 'Value': 254725941611}]}}}}"}
2024-09-10 14:08:29,365 - INFO - {'updated_data': 'callback data began'}
2024-09-10 14:08:29,365 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075783348', 'CheckoutRequestID': 'ws_CO_10092024170813744725941611', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA74LDCAH'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910170828}, {'Name': 'PhoneNumber', 'Value': 254725941611}]}}}}}
2024-09-10 14:08:29,522 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:08:29,725 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:08:29,726 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:08:29,937 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 14:08:35,175 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:08:35,331 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:08:35,332 - INFO - {'updated': 'initiated stk query for ws_CO_10092024170813744725941611 827142 '}
2024-09-10 14:08:35,433 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:08:36,094 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:08:36,096 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Z97LuPHd0Z7VlDS0bVmxwAcW9jbc'}"}
2024-09-10 14:08:36,097 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTQwODM1', 'Timestamp': '20240910140835', 'CheckoutRequestID': 'ws_CO_10092024170813744725941611'}"}
2024-09-10 14:08:36,098 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:08:36,718 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 14:08:36,719 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075783348', 'CheckoutRequestID': 'ws_CO_10092024170813744725941611', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024170813744725941611 827142"}
2024-09-10 14:08:36,873 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:08:37,072 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:08:37,074 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:08:37,610 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 14:08:55,517 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:08:55,700 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:08:55,701 - INFO - there is a test coming
2024-09-10 14:08:55,701 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 14:08:55,776 - INFO - {'updated_data': 'the data is now as 254720447655'}
2024-09-10 14:08:55,776 - INFO - the data is now as 254720447655
2024-09-10 14:08:55,795 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 14:08:55,795 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 14:08:55,796 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:08:56,382 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:08:56,384 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Mx2Ado7awY1u8fWSB9yW5wVChGiR'}"}
2024-09-10 14:08:56,384 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTQwODU2', 'Timestamp': '20240910140856', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '400', 'PartyA': '254720447655', 'PartyB': 827142, 'PhoneNumber': '254720447655', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-174758', 'TransactionDesc': 'Some payment'}
2024-09-10 14:08:56,385 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:08:57,121 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 14:08:57,128 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16831004', 'CheckoutRequestID': 'ws_CO_10092024170856906720447655', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 14:09:09,319 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16831004', 'CheckoutRequestID': 'ws_CO_10092024170856906720447655', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 400.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA24LH1PY'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910170908}, {'Name': 'PhoneNumber', 'Value': 254720447655}]}}}}"}
2024-09-10 14:09:09,320 - INFO - {'updated_data': 'callback data began'}
2024-09-10 14:09:09,320 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16831004', 'CheckoutRequestID': 'ws_CO_10092024170856906720447655', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 400.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA24LH1PY'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910170908}, {'Name': 'PhoneNumber', 'Value': 254720447655}]}}}}}
2024-09-10 14:09:09,589 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:09:09,803 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:09:09,805 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:09:10,030 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 14:09:10,109 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:09:10,287 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:09:10,287 - INFO - {'updated': 'initiated stk query for ws_CO_10092024170856906720447655 827142 '}
2024-09-10 14:09:10,355 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:09:11,050 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:09:11,053 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 6eHUxggA9ONbFsfsOx6n8aVacC7P'}"}
2024-09-10 14:09:11,054 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTQwOTEw', 'Timestamp': '20240910140910', 'CheckoutRequestID': 'ws_CO_10092024170856906720447655'}"}
2024-09-10 14:09:11,055 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:09:11,685 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 14:09:11,685 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16831004', 'CheckoutRequestID': 'ws_CO_10092024170856906720447655', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024170856906720447655 827142"}
2024-09-10 14:09:11,849 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:09:12,398 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:09:12,399 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:09:12,662 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 14:10:29,843 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:10:30,035 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:10:30,036 - INFO - there is a test coming
2024-09-10 14:10:30,036 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 14:10:30,087 - INFO - {'updated_data': 'the data is now as 254727710741'}
2024-09-10 14:10:30,087 - INFO - the data is now as 254727710741
2024-09-10 14:10:30,113 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 14:10:30,113 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 14:10:30,114 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:10:30,717 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:10:30,719 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer zPNmeA3r6K1zrWQcrMRkYv7CKlfb'}"}
2024-09-10 14:10:30,720 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTQxMDMw', 'Timestamp': '20240910141030', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254727710741', 'PartyB': 827142, 'PhoneNumber': '254727710741', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-27848', 'TransactionDesc': 'Some payment'}
2024-09-10 14:10:30,721 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:10:31,750 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 14:10:31,757 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169874101', 'CheckoutRequestID': 'ws_CO_10092024171031507727710741', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 14:10:41,104 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:10:41,226 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:10:41,227 - INFO - there is a test coming
2024-09-10 14:10:41,227 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 14:10:41,273 - INFO - {'updated_data': 'the data is now as 254706561429'}
2024-09-10 14:10:41,274 - INFO - the data is now as 254706561429
2024-09-10 14:10:41,289 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 14:10:41,290 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 14:10:41,291 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:10:41,957 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:10:41,960 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer qHF7l2ZVnIgk6OmcsauLnnoNG6u1'}"}
2024-09-10 14:10:41,960 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTQxMDQx', 'Timestamp': '20240910141041', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1500', 'PartyA': '254706561429', 'PartyB': 827142, 'PhoneNumber': '254706561429', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-2133', 'TransactionDesc': 'Some payment'}
2024-09-10 14:10:41,962 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:10:43,101 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 14:10:43,108 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585052798521', 'CheckoutRequestID': 'ws_CO_10092024171042588706561429', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 14:12:34,269 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:12:34,447 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:12:34,447 - INFO - {'updated': 'initiated stk query for ws_CO_10092024171212731798958384 899885 '}
2024-09-10 14:12:34,523 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:12:35,181 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:12:35,183 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer WF2kXG5nWynn4vwgB621yvsq0zoq'}"}
2024-09-10 14:12:35,184 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTQxMjM0', 'Timestamp': '20240910141234', 'CheckoutRequestID': 'ws_CO_10092024171212731798958384'}"}
2024-09-10 14:12:35,185 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:12:35,839 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 14:12:35,839 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87781271', 'CheckoutRequestID': 'ws_CO_10092024171212731798958384', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024171212731798958384 899885"}
2024-09-10 14:12:35,962 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:12:36,499 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:12:36,501 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:12:37,026 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 14:13:27,941 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:13:28,058 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:13:28,059 - INFO - {'updated': 'initiated stk query for ws_CO_10092024171316409794179552 899885 '}
2024-09-10 14:13:28,113 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:13:28,697 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:13:28,699 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer RgDN3BCxNGLm6HB2Z0tV4E5JGS6l'}"}
2024-09-10 14:13:28,699 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTQxMzI4', 'Timestamp': '20240910141328', 'CheckoutRequestID': 'ws_CO_10092024171316409794179552'}"}
2024-09-10 14:13:28,701 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:13:29,315 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 14:13:29,315 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6396559', 'CheckoutRequestID': 'ws_CO_10092024171316409794179552', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024171316409794179552 899885"}
2024-09-10 14:13:29,509 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:13:29,717 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:13:29,718 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:13:30,325 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 14:13:38,988 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585052806404', 'CheckoutRequestID': 'ws_CO_10092024171328011798721960', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA24M66DG'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910171338}, {'Name': 'PhoneNumber', 'Value': 254798721960}]}}}}"}
2024-09-10 14:13:38,988 - INFO - {'updated_data': 'callback data began'}
2024-09-10 14:13:38,988 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585052806404', 'CheckoutRequestID': 'ws_CO_10092024171328011798721960', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA24M66DG'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910171338}, {'Name': 'PhoneNumber', 'Value': 254798721960}]}}}}}
2024-09-10 14:13:39,162 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:13:39,364 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:13:39,366 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:13:39,579 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 14:14:05,441 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:14:05,456 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 14:14:05,457 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 14:15:32,726 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:15:32,876 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:15:32,877 - INFO - there is a test coming
2024-09-10 14:15:32,877 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 14:15:32,926 - INFO - {'updated_data': 'the data is now as 254729377958'}
2024-09-10 14:15:32,926 - INFO - the data is now as 254729377958
2024-09-10 14:15:32,943 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 14:15:32,944 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 14:15:32,945 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:15:33,508 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:15:33,510 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer sAVCnvLqeERlbMR0zZ1xAir8X2F4'}"}
2024-09-10 14:15:33,511 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTQxNTMz', 'Timestamp': '20240910141533', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254729377958', 'PartyB': 827142, 'PhoneNumber': '254729377958', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '120-10272', 'TransactionDesc': 'Some payment'}
2024-09-10 14:15:33,512 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:15:34,385 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 14:15:34,392 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16849858', 'CheckoutRequestID': 'ws_CO_10092024171534110729377958', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 14:16:20,559 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6405137', 'CheckoutRequestID': 'ws_CO_10092024171613094729377958', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA74MLGPT'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910171619}, {'Name': 'PhoneNumber', 'Value': 254729377958}]}}}}"}
2024-09-10 14:16:20,559 - INFO - {'updated_data': 'callback data began'}
2024-09-10 14:16:20,559 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6405137', 'CheckoutRequestID': 'ws_CO_10092024171613094729377958', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA74MLGPT'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910171619}, {'Name': 'PhoneNumber', 'Value': 254729377958}]}}}}}
2024-09-10 14:16:20,906 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:16:21,134 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:16:21,136 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:16:21,355 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 14:16:43,114 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:16:43,347 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:16:43,348 - INFO - {'updated': 'initiated stk query for ws_CO_10092024171630443725941611 827142 '}
2024-09-10 14:16:43,411 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:16:44,085 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:16:44,087 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 1n3FwjXhToNXNNwly9ySr3Kvi57r'}"}
2024-09-10 14:16:44,087 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTQxNjQz', 'Timestamp': '20240910141643', 'CheckoutRequestID': 'ws_CO_10092024171630443725941611'}"}
2024-09-10 14:16:44,089 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:16:44,850 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 14:16:44,850 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024171630443725941611', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024171630443725941611 827142"}
2024-09-10 14:16:44,853 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 14:16:46,627 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516854519', 'CheckoutRequestID': 'ws_CO_10092024171630443725941611', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5050.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA54MO4V5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910171645}, {'Name': 'PhoneNumber', 'Value': 254725941611}]}}}}"}
2024-09-10 14:16:46,627 - INFO - {'updated_data': 'callback data began'}
2024-09-10 14:16:46,627 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516854519', 'CheckoutRequestID': 'ws_CO_10092024171630443725941611', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5050.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA54MO4V5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910171645}, {'Name': 'PhoneNumber', 'Value': 254725941611}]}}}}}
2024-09-10 14:16:46,809 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:16:47,016 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:16:47,017 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:16:47,571 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 14:17:31,031 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:17:31,217 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:17:31,218 - INFO - there is a test coming
2024-09-10 14:17:31,218 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 14:17:31,263 - INFO - {'updated_data': 'the data is now as 254723831641'}
2024-09-10 14:17:31,264 - INFO - the data is now as 254723831641
2024-09-10 14:17:31,282 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 14:17:31,283 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 14:17:31,284 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:17:31,858 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:17:31,860 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer O9NqiAuGeI5c4wPiBFiWvAC1pcKY'}"}
2024-09-10 14:17:31,860 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTQxNzMx', 'Timestamp': '20240910141731', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254723831641', 'PartyB': 827142, 'PhoneNumber': '254723831641', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '168-134', 'TransactionDesc': 'Some payment'}
2024-09-10 14:17:31,861 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:17:32,628 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 14:17:32,636 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170604608', 'CheckoutRequestID': 'ws_CO_10092024171732380723831641', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 14:17:44,527 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:17:44,710 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:17:44,711 - INFO - {'updated': 'initiated stk query for ws_CO_10092024171732380723831641 827142 '}
2024-09-10 14:17:44,800 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:17:45,384 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:17:45,386 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer P21wfGfIStrH7j8PYc2hZdEDfJKL'}"}
2024-09-10 14:17:45,386 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTQxNzQ0', 'Timestamp': '20240910141744', 'CheckoutRequestID': 'ws_CO_10092024171732380723831641'}"}
2024-09-10 14:17:45,388 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:17:46,012 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 14:17:46,013 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170604608', 'CheckoutRequestID': 'ws_CO_10092024171732380723831641', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024171732380723831641 827142"}
2024-09-10 14:17:46,213 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:17:46,409 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:17:46,410 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:17:46,631 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 14:25:28,595 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:25:28,737 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:25:28,738 - INFO - there is a test coming
2024-09-10 14:25:28,738 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 14:25:28,786 - INFO - {'updated_data': 'the data is now as 254721960132'}
2024-09-10 14:25:28,787 - INFO - the data is now as 254721960132
2024-09-10 14:25:28,803 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 14:25:28,803 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 14:25:28,805 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:25:29,528 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:25:29,530 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ggCtaRdvB1TNkHkKAfWcPYFf4BVr'}"}
2024-09-10 14:25:29,530 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTQyNTI5', 'Timestamp': '20240910142529', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254721960132', 'PartyB': 899885, 'PhoneNumber': '254721960132', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054075', 'TransactionDesc': 'Some payment'}
2024-09-10 14:25:29,531 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:25:30,616 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 14:25:30,626 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208793485149', 'CheckoutRequestID': 'ws_CO_10092024172530164721960132', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 14:25:44,439 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:25:44,576 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:25:44,576 - INFO - {'updated': 'initiated stk query for ws_CO_10092024172530164721960132 899885 '}
2024-09-10 14:25:44,693 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:25:45,380 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:25:45,383 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer OEzp50YWmqG8n1zbzVMj1Uei5HWs'}"}
2024-09-10 14:25:45,383 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTQyNTQ0', 'Timestamp': '20240910142544', 'CheckoutRequestID': 'ws_CO_10092024172530164721960132'}"}
2024-09-10 14:25:45,384 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:25:46,081 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 14:25:46,082 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208793485149', 'CheckoutRequestID': 'ws_CO_10092024172530164721960132', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024172530164721960132 899885"}
2024-09-10 14:25:46,205 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:25:46,435 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:25:46,437 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:25:46,725 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 14:50:34,215 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075834779', 'CheckoutRequestID': 'ws_CO_10092024175026194704519969', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5069.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA34SG33J'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910175033}, {'Name': 'PhoneNumber', 'Value': 254704519969}]}}}}"}
2024-09-10 14:50:34,216 - INFO - {'updated_data': 'callback data began'}
2024-09-10 14:50:34,216 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075834779', 'CheckoutRequestID': 'ws_CO_10092024175026194704519969', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5069.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA34SG33J'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910175033}, {'Name': 'PhoneNumber', 'Value': 254704519969}]}}}}}
2024-09-10 14:50:34,401 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:50:34,675 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:50:34,677 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:50:35,319 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 14:51:27,908 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:51:28,081 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:51:28,082 - INFO - there is a test coming
2024-09-10 14:51:28,082 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 14:51:28,141 - INFO - {'updated_data': 'the data is now as 254717511502'}
2024-09-10 14:51:28,141 - INFO - the data is now as 254717511502
2024-09-10 14:51:28,156 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 14:51:28,156 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 14:51:28,157 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:51:28,992 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:51:28,994 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer KXfAx8WplAyDoflrnG3y9frkL3Ct'}"}
2024-09-10 14:51:28,994 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTQ1MTI4', 'Timestamp': '20240910145128', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1500', 'PartyA': '254717511502', 'PartyB': 827142, 'PhoneNumber': '254717511502', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-18969', 'TransactionDesc': 'Some payment'}
2024-09-10 14:51:28,995 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:51:29,899 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 14:51:29,904 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585052914464', 'CheckoutRequestID': 'ws_CO_10092024175129677717511502', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 14:51:38,371 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585052914464', 'CheckoutRequestID': 'ws_CO_10092024175129677717511502', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA74SMZKX'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910175137}, {'Name': 'PhoneNumber', 'Value': 254717511502}]}}}}"}
2024-09-10 14:51:38,371 - INFO - {'updated_data': 'callback data began'}
2024-09-10 14:51:38,372 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585052914464', 'CheckoutRequestID': 'ws_CO_10092024175129677717511502', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA74SMZKX'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910175137}, {'Name': 'PhoneNumber', 'Value': 254717511502}]}}}}}
2024-09-10 14:51:38,579 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:51:39,051 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:51:39,052 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:51:39,405 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 14:51:40,871 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:51:41,083 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:51:41,084 - INFO - {'updated': 'initiated stk query for ws_CO_10092024175129677717511502 827142 '}
2024-09-10 14:51:41,162 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:51:41,901 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:51:41,903 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 1HX8YElUsMBl6ALlQtiK8S9cap35'}"}
2024-09-10 14:51:41,903 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTQ1MTQx', 'Timestamp': '20240910145141', 'CheckoutRequestID': 'ws_CO_10092024175129677717511502'}"}
2024-09-10 14:51:41,904 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:51:42,670 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 14:51:42,670 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585052914464', 'CheckoutRequestID': 'ws_CO_10092024175129677717511502', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024175129677717511502 827142"}
2024-09-10 14:51:42,823 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:51:43,140 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:51:43,142 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:51:43,484 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 14:52:18,561 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:52:18,774 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:52:18,775 - INFO - there is a test coming
2024-09-10 14:52:18,775 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 14:52:18,827 - INFO - {'updated_data': 'the data is now as 254717511502'}
2024-09-10 14:52:18,827 - INFO - the data is now as 254717511502
2024-09-10 14:52:18,853 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 14:52:18,853 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 14:52:18,854 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:52:19,677 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:52:19,680 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer rycjSqNmeTMkxYMDYpVdgw0lEF3H'}"}
2024-09-10 14:52:19,681 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTQ1MjE5', 'Timestamp': '20240910145219', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1500', 'PartyA': '254717511502', 'PartyB': 899885, 'PhoneNumber': '254717511502', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054035', 'TransactionDesc': 'Some payment'}
2024-09-10 14:52:19,686 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:52:20,713 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 14:52:20,723 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170647742', 'CheckoutRequestID': 'ws_CO_10092024175220456717511502', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 14:54:26,735 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:54:26,872 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:54:26,872 - INFO - there is a test coming
2024-09-10 14:54:26,873 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 14:54:26,915 - INFO - {'updated_data': 'the data is now as 254704519969'}
2024-09-10 14:54:26,915 - INFO - the data is now as 254704519969
2024-09-10 14:54:26,931 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 14:54:26,931 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 14:54:26,932 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:54:27,846 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:54:27,847 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer gwAPrZSU3O25n0NG8BJHbUenRoLr'}"}
2024-09-10 14:54:27,848 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTQ1NDI3', 'Timestamp': '20240910145427', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '25000', 'PartyA': '254704519969', 'PartyB': 899885, 'PhoneNumber': '254704519969', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA000256CP-1725980063958', 'TransactionDesc': 'Some payment'}
2024-09-10 14:54:27,849 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:54:28,789 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 14:54:28,795 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596876010', 'CheckoutRequestID': 'ws_CO_10092024175428564704519969', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 14:54:30,342 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:54:30,520 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:54:30,521 - INFO - there is a test coming
2024-09-10 14:54:30,521 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 14:54:30,565 - INFO - {'updated_data': 'the data is now as 254726017444'}
2024-09-10 14:54:30,565 - INFO - the data is now as 254726017444
2024-09-10 14:54:30,582 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 14:54:30,583 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 14:54:30,584 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:54:31,467 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:54:31,469 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer mPFxJ38MgDfyBYTfRqHCbyAZ9onA'}"}
2024-09-10 14:54:31,470 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTQ1NDMx', 'Timestamp': '20240910145431', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254726017444', 'PartyB': 827142, 'PhoneNumber': '254726017444', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-14022', 'TransactionDesc': 'Some payment'}
2024-09-10 14:54:31,471 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:54:32,496 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 14:54:32,509 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516963390', 'CheckoutRequestID': 'ws_CO_10092024175432272726017444', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 14:54:43,998 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:54:44,140 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:54:44,141 - INFO - {'updated': 'initiated stk query for ws_CO_10092024175432272726017444 827142 '}
2024-09-10 14:54:44,203 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:54:44,963 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:54:44,965 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer QAj5OCcfocaTMtAMu7KWWgbNZ2yT'}"}
2024-09-10 14:54:44,965 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTQ1NDQ0', 'Timestamp': '20240910145444', 'CheckoutRequestID': 'ws_CO_10092024175432272726017444'}"}
2024-09-10 14:54:44,967 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:54:45,876 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 14:54:45,877 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516963390', 'CheckoutRequestID': 'ws_CO_10092024175432272726017444', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024175432272726017444 827142"}
2024-09-10 14:54:46,039 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:54:46,334 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:54:46,335 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:54:47,011 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 14:54:50,047 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:54:50,243 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:54:50,254 - INFO - there is a test coming
2024-09-10 14:54:50,254 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 14:54:50,315 - INFO - {'updated_data': 'the data is now as 254700362387'}
2024-09-10 14:54:50,315 - INFO - the data is now as 254700362387
2024-09-10 14:54:50,335 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 14:54:50,335 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 14:54:50,336 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:54:51,101 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:54:51,107 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer M0yHZKCvpdwfYCAbnowhMooCYMmk'}"}
2024-09-10 14:54:51,108 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTQ1NDUx', 'Timestamp': '20240910145451', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254700362387', 'PartyB': 827142, 'PhoneNumber': '254700362387', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-22108', 'TransactionDesc': 'Some payment'}
2024-09-10 14:54:51,109 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:54:52,051 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 14:54:52,062 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596877145', 'CheckoutRequestID': 'ws_CO_10092024175451813700362387', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 14:55:41,585 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:55:41,731 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:55:41,732 - INFO - there is a test coming
2024-09-10 14:55:41,732 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 14:55:41,779 - INFO - {'updated_data': 'the data is now as 254700362387'}
2024-09-10 14:55:41,779 - INFO - the data is now as 254700362387
2024-09-10 14:55:41,795 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 14:55:41,795 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 14:55:41,796 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:55:42,565 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:55:42,567 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer HbcAHWM6ksWdy5Awlb27krKTOfh2'}"}
2024-09-10 14:55:42,568 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTQ1NTQy', 'Timestamp': '20240910145542', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254700362387', 'PartyB': 827142, 'PhoneNumber': '254700362387', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-22108', 'TransactionDesc': 'Some payment'}
2024-09-10 14:55:42,569 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:55:46,211 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 14:55:46,218 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169929660', 'CheckoutRequestID': 'ws_CO_10092024175543373700362387', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 14:55:55,591 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169929660', 'CheckoutRequestID': 'ws_CO_10092024175543373700362387', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA84TEMEK'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910175554}, {'Name': 'PhoneNumber', 'Value': 254700362387}]}}}}"}
2024-09-10 14:55:55,592 - INFO - {'updated_data': 'callback data began'}
2024-09-10 14:55:55,592 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169929660', 'CheckoutRequestID': 'ws_CO_10092024175543373700362387', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA84TEMEK'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910175554}, {'Name': 'PhoneNumber', 'Value': 254700362387}]}}}}}
2024-09-10 14:55:55,766 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:55:56,339 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:55:56,340 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:55:56,981 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 14:56:05,086 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:56:05,228 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:56:05,229 - INFO - {'updated': 'initiated stk query for ws_CO_10092024175553075110238201 827142 '}
2024-09-10 14:56:05,307 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:56:06,052 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:56:06,054 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer nIGsgjmvmMPrdy2Gl1PKn5p7lz6X'}"}
2024-09-10 14:56:06,054 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTQ1NjA1', 'Timestamp': '20240910145605', 'CheckoutRequestID': 'ws_CO_10092024175553075110238201'}"}
2024-09-10 14:56:06,056 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:56:06,904 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 14:56:06,905 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585052927358', 'CheckoutRequestID': 'ws_CO_10092024175553075110238201', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024175553075110238201 827142"}
2024-09-10 14:56:07,037 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:56:07,344 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:56:07,346 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:56:08,038 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:04:50,882 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516994160', 'CheckoutRequestID': 'ws_CO_10092024180440172743912071', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA24V1HMM'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910180450}, {'Name': 'PhoneNumber', 'Value': 254743912071}]}}}}"}
2024-09-10 15:04:50,882 - INFO - {'updated_data': 'callback data began'}
2024-09-10 15:04:50,882 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516994160', 'CheckoutRequestID': 'ws_CO_10092024180440172743912071', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA24V1HMM'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910180450}, {'Name': 'PhoneNumber', 'Value': 254743912071}]}}}}}
2024-09-10 15:04:51,041 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:04:51,325 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:04:51,326 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:04:51,991 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:06:37,503 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:06:37,678 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:06:37,679 - INFO - there is a test coming
2024-09-10 15:06:37,679 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 15:06:37,738 - INFO - {'updated_data': 'the data is now as 254701387844'}
2024-09-10 15:06:37,738 - INFO - the data is now as 254701387844
2024-09-10 15:06:37,755 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 15:06:37,755 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 15:06:37,756 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:06:38,496 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:06:38,498 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 8zqNAAHmkt3rglDCxwh8DODjILy7'}"}
2024-09-10 15:06:38,499 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTUwNjM4', 'Timestamp': '20240910150638', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254701387844', 'PartyB': 899885, 'PhoneNumber': '254701387844', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054128', 'TransactionDesc': 'Some payment'}
2024-09-10 15:06:38,500 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:06:39,457 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 15:06:39,464 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87848381', 'CheckoutRequestID': 'ws_CO_10092024180639254701387844', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 15:08:59,994 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585052966278', 'CheckoutRequestID': 'ws_CO_10092024180843937705976423', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA54VT9MF'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910180859}, {'Name': 'PhoneNumber', 'Value': 254705976423}]}}}}"}
2024-09-10 15:08:59,994 - INFO - {'updated_data': 'callback data began'}
2024-09-10 15:08:59,994 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585052966278', 'CheckoutRequestID': 'ws_CO_10092024180843937705976423', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA54VT9MF'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910180859}, {'Name': 'PhoneNumber', 'Value': 254705976423}]}}}}}
2024-09-10 15:09:00,220 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:09:00,518 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:09:00,520 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:09:00,878 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:12:12,719 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:12:12,861 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:12:12,862 - INFO - there is a test coming
2024-09-10 15:12:12,862 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 15:12:12,905 - INFO - {'updated_data': 'the data is now as 254768384261'}
2024-09-10 15:12:12,906 - INFO - the data is now as 254768384261
2024-09-10 15:12:12,921 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 15:12:12,922 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 15:12:12,923 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:12:13,723 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:12:13,725 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer H0IlW8FxhaScKVVwEAlxSz3QArnO'}"}
2024-09-10 15:12:13,725 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTUxMjEz', 'Timestamp': '20240910151213', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '500', 'PartyA': '254768384261', 'PartyB': 899885, 'PhoneNumber': '254768384261', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA1597528LM-1725981131648', 'TransactionDesc': 'Some payment'}
2024-09-10 15:12:13,727 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:12:14,747 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 15:12:14,758 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6568914', 'CheckoutRequestID': 'ws_CO_10092024181214513768384261', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 15:12:26,151 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:12:26,265 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:12:26,266 - INFO - {'updated': 'initiated stk query for ws_CO_10092024181214513768384261 899885 '}
2024-09-10 15:12:26,322 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:12:27,008 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:12:27,010 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer rHF4OLXZcZTLZUBW3JOzsdI2qIXt'}"}
2024-09-10 15:12:27,010 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTUxMjI2', 'Timestamp': '20240910151226', 'CheckoutRequestID': 'ws_CO_10092024181214513768384261'}"}
2024-09-10 15:12:27,011 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:12:27,757 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 15:12:27,757 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6568914', 'CheckoutRequestID': 'ws_CO_10092024181214513768384261', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024181214513768384261 899885"}
2024-09-10 15:12:27,886 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:12:28,157 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:12:28,158 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:12:28,470 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:14:34,404 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:14:34,550 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:14:34,551 - INFO - there is a test coming
2024-09-10 15:14:34,551 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 15:14:34,664 - INFO - {'updated_data': 'the data is now as 254725749804'}
2024-09-10 15:14:34,664 - INFO - the data is now as 254725749804
2024-09-10 15:14:34,681 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 15:14:34,681 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 15:14:34,682 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:14:35,436 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:14:35,438 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer VW5YDyi5foW7bkuGcQuVqRbmAypB'}"}
2024-09-10 15:14:35,439 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTUxNDM1', 'Timestamp': '20240910151435', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254725749804', 'PartyB': 899885, 'PhoneNumber': '254725749804', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA92775076CP', 'TransactionDesc': 'Some payment'}
2024-09-10 15:14:35,440 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:14:36,377 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 15:14:36,384 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585052984374', 'CheckoutRequestID': 'ws_CO_10092024181436159725749804', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 15:14:38,364 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:14:38,520 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:14:38,521 - INFO - {'updated': 'initiated stk query for ws_CO_10092024181426789701054980 899885 '}
2024-09-10 15:14:38,584 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:14:39,349 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:14:39,355 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer sbHLino1VoVUbfYYJ5UGXOKdytx3'}"}
2024-09-10 15:14:39,356 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTUxNDM4', 'Timestamp': '20240910151438', 'CheckoutRequestID': 'ws_CO_10092024181426789701054980'}"}
2024-09-10 15:14:39,357 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:14:40,167 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 15:14:40,168 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db17029922', 'CheckoutRequestID': 'ws_CO_10092024181426789701054980', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024181426789701054980 899885"}
2024-09-10 15:14:40,311 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:14:41,493 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:14:41,495 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:14:42,155 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:25:35,268 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:25:35,459 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:25:35,460 - INFO - there is a test coming
2024-09-10 15:25:35,460 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 15:25:35,525 - INFO - {'updated_data': 'the data is now as 254700418091'}
2024-09-10 15:25:35,525 - INFO - the data is now as 254700418091
2024-09-10 15:25:35,579 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 15:25:35,579 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 15:25:35,581 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:25:36,421 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:25:36,423 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 54SriG6cV5PzCKPTj9MtPEQtmzt1'}"}
2024-09-10 15:25:36,424 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTUyNTM2', 'Timestamp': '20240910152536', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '800', 'PartyA': '254700418091', 'PartyB': 899885, 'PhoneNumber': '254700418091', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054134', 'TransactionDesc': 'Some payment'}
2024-09-10 15:25:36,425 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:25:37,421 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 15:25:37,427 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b517058187', 'CheckoutRequestID': 'ws_CO_10092024182537140700418091', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 15:25:49,490 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:25:49,659 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:25:49,660 - INFO - there is a test coming
2024-09-10 15:25:49,660 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 15:25:49,706 - INFO - {'updated_data': 'the data is now as 254722669311'}
2024-09-10 15:25:49,706 - INFO - the data is now as 254722669311
2024-09-10 15:25:49,723 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 15:25:49,724 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 15:25:49,725 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:25:50,470 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:25:50,472 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer QKDMzoarKch9kMUoidBJZyg5Q2dL'}"}
2024-09-10 15:25:50,472 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTUyNTUw', 'Timestamp': '20240910152550', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '300', 'PartyA': '254722669311', 'PartyB': 899885, 'PhoneNumber': '254722669311', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054135', 'TransactionDesc': 'Some payment'}
2024-09-10 15:25:50,473 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:25:51,451 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 15:25:51,458 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585053018719', 'CheckoutRequestID': 'ws_CO_10092024182551186722669311', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 15:25:53,354 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:25:53,569 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:25:53,570 - INFO - {'updated': 'initiated stk query for ws_CO_10092024182538244743898088 899885 '}
2024-09-10 15:25:53,643 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:25:54,351 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:25:54,354 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer xZtHzRawjve2ELyBgAss0bcai6XI'}"}
2024-09-10 15:25:54,354 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTUyNTUz', 'Timestamp': '20240910152553', 'CheckoutRequestID': 'ws_CO_10092024182538244743898088'}"}
2024-09-10 15:25:54,355 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:25:55,125 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 15:25:55,126 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170689173', 'CheckoutRequestID': 'ws_CO_10092024182538244743898088', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024182538244743898088 899885"}
2024-09-10 15:25:55,287 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:25:55,570 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:25:55,572 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:25:56,194 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:31:08,154 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:31:08,277 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:31:08,278 - INFO - there is a test coming
2024-09-10 15:31:08,278 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 15:31:08,331 - INFO - {'updated_data': 'the data is now as 254725347312'}
2024-09-10 15:31:08,331 - INFO - the data is now as 254725347312
2024-09-10 15:31:08,348 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 15:31:08,349 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 15:31:08,350 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:31:09,067 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:31:09,070 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer d9aQotPIyt4Og8DANBEj7GoJwooJ'}"}
2024-09-10 15:31:09,070 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTUzMTA5', 'Timestamp': '20240910153109', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '112920', 'PartyA': '254725347312', 'PartyB': 827142, 'PhoneNumber': '254725347312', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-29143', 'TransactionDesc': 'Some payment'}
2024-09-10 15:31:09,072 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:31:10,101 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 15:31:10,107 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db17081061', 'CheckoutRequestID': 'ws_CO_10092024183109756725347312', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 15:35:41,822 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:35:41,954 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:35:41,958 - INFO - there is a test coming
2024-09-10 15:35:41,958 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 15:35:42,006 - INFO - {'updated_data': 'the data is now as 254727217894'}
2024-09-10 15:35:42,007 - INFO - the data is now as 254727217894
2024-09-10 15:35:42,030 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 15:35:42,030 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 15:35:42,031 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:35:42,775 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:35:42,780 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 0H0759A6oenwWBNA74ISJI7l2FDP'}"}
2024-09-10 15:35:42,781 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTUzNTQy', 'Timestamp': '20240910153542', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254727217894', 'PartyB': 827142, 'PhoneNumber': '254727217894', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-43453', 'TransactionDesc': 'Some payment'}
2024-09-10 15:35:42,782 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:35:43,794 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 15:35:43,800 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6641899', 'CheckoutRequestID': 'ws_CO_10092024183543603727217894', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 15:35:53,162 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6641899', 'CheckoutRequestID': 'ws_CO_10092024183543603727217894', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA0512F98'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910183552}, {'Name': 'PhoneNumber', 'Value': 254727217894}]}}}}"}
2024-09-10 15:35:53,163 - INFO - {'updated_data': 'callback data began'}
2024-09-10 15:35:53,163 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6641899', 'CheckoutRequestID': 'ws_CO_10092024183543603727217894', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA0512F98'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910183552}, {'Name': 'PhoneNumber', 'Value': 254727217894}]}}}}}
2024-09-10 15:35:53,353 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:35:53,972 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:35:53,973 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:35:54,669 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:35:55,631 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:35:55,799 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:35:55,800 - INFO - {'updated': 'initiated stk query for ws_CO_10092024183543603727217894 827142 '}
2024-09-10 15:35:55,862 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:35:56,686 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:35:56,688 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Rg0TJn9AkpNAC8WG1GArzEVGOyfn'}"}
2024-09-10 15:35:56,689 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTUzNTU1', 'Timestamp': '20240910153555', 'CheckoutRequestID': 'ws_CO_10092024183543603727217894'}"}
2024-09-10 15:35:56,690 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:35:57,499 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 15:35:57,500 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6641899', 'CheckoutRequestID': 'ws_CO_10092024183543603727217894', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024183543603727217894 827142"}
2024-09-10 15:35:57,622 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:35:57,915 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:35:57,917 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:35:58,259 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:36:03,565 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:36:03,725 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:36:03,726 - INFO - there is a test coming
2024-09-10 15:36:03,726 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 15:36:03,772 - INFO - {'updated_data': 'the data is now as 254700418091'}
2024-09-10 15:36:03,773 - INFO - the data is now as 254700418091
2024-09-10 15:36:03,799 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 15:36:03,799 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 15:36:03,801 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:36:04,576 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:36:04,578 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer QMZLx7U1xjkaso5RDrEcDAQfYEZr'}"}
2024-09-10 15:36:04,579 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTUzNjA0', 'Timestamp': '20240910153604', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3042', 'PartyA': '254700418091', 'PartyB': 827142, 'PhoneNumber': '254700418091', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-14651', 'TransactionDesc': 'Some payment'}
2024-09-10 15:36:04,580 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:36:05,626 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 15:36:05,644 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208793573227', 'CheckoutRequestID': 'ws_CO_10092024183605265700418091', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 15:36:46,446 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:36:46,587 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:36:46,588 - INFO - there is a test coming
2024-09-10 15:36:46,588 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 15:36:46,653 - INFO - {'updated_data': 'the data is now as 254727217894'}
2024-09-10 15:36:46,653 - INFO - the data is now as 254727217894
2024-09-10 15:36:46,679 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 15:36:46,679 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 15:36:46,680 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:36:47,417 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:36:47,419 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer hMlIJILS6sPuwQJH6EjDRe4631vr'}"}
2024-09-10 15:36:47,419 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTUzNjQ3', 'Timestamp': '20240910153647', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254727217894', 'PartyB': 827142, 'PhoneNumber': '254727217894', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-43453', 'TransactionDesc': 'Some payment'}
2024-09-10 15:36:47,421 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:36:48,320 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 15:36:48,327 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc17091922', 'CheckoutRequestID': 'ws_CO_10092024183648115727217894', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 15:36:57,445 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc17091922', 'CheckoutRequestID': 'ws_CO_10092024183648115727217894', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-10 15:36:57,445 - INFO - {'updated_data': 'callback data began'}
2024-09-10 15:36:57,445 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc17091922', 'CheckoutRequestID': 'ws_CO_10092024183648115727217894', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-10 15:36:57,623 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:36:57,894 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:36:57,896 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:36:58,256 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:38:46,880 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:38:47,066 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:38:47,067 - INFO - there is a test coming
2024-09-10 15:38:47,067 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 15:38:47,124 - INFO - {'updated_data': 'the data is now as 254710888868'}
2024-09-10 15:38:47,124 - INFO - the data is now as 254710888868
2024-09-10 15:38:47,143 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 15:38:47,144 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 15:38:47,145 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:38:48,095 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:38:48,097 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer nx8qNiDFAwh6xrvceaTdbInPPzhn'}"}
2024-09-10 15:38:48,098 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTUzODQ4', 'Timestamp': '20240910153848', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '200', 'PartyA': '254710888868', 'PartyB': 827142, 'PhoneNumber': '254710888868', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-39704', 'TransactionDesc': 'Some payment'}
2024-09-10 15:38:48,099 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:38:49,187 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 15:38:49,197 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b517099782', 'CheckoutRequestID': 'ws_CO_10092024183848894710888868', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 15:42:17,863 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:42:18,007 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:42:18,007 - INFO - there is a test coming
2024-09-10 15:42:18,008 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 15:42:18,058 - INFO - {'updated_data': 'the data is now as 254733743780'}
2024-09-10 15:42:18,058 - INFO - the data is now as 254733743780
2024-09-10 15:42:18,083 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 15:42:18,083 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 15:42:18,085 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:42:19,038 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:42:19,040 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 28n4FGaNXexTOM2mPTUqsPueGUCh'}"}
2024-09-10 15:42:19,040 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTU0MjE5', 'Timestamp': '20240910154219', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '18044', 'PartyA': '254733743780', 'PartyB': 827142, 'PhoneNumber': '254733743780', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-26896', 'TransactionDesc': 'Some payment'}
2024-09-10 15:42:19,042 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:42:19,951 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 15:42:19,958 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170224226', 'CheckoutRequestID': 'ws_CO_10092024184219743733743780', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 15:42:56,292 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87894262', 'CheckoutRequestID': 'ws_CO_10092024184245201795391356', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}"}
2024-09-10 15:42:56,292 - INFO - {'updated_data': 'callback data began'}
2024-09-10 15:42:56,292 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87894262', 'CheckoutRequestID': 'ws_CO_10092024184245201795391356', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}}
2024-09-10 15:42:56,473 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:42:56,764 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:42:56,765 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:42:57,131 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:43:13,802 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:43:13,946 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:43:13,947 - INFO - there is a test coming
2024-09-10 15:43:13,947 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 15:43:14,014 - INFO - {'updated_data': 'the data is now as 254795391356'}
2024-09-10 15:43:14,015 - INFO - the data is now as 254795391356
2024-09-10 15:43:14,045 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 15:43:14,046 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 15:43:14,047 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:43:14,796 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:43:14,798 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer tsAEcT1AOIEwFiIbGdVVRyESWewS'}"}
2024-09-10 15:43:14,798 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTU0MzE0', 'Timestamp': '20240910154314', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '500', 'PartyA': '254795391356', 'PartyB': 827142, 'PhoneNumber': '254795391356', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-25052', 'TransactionDesc': 'Some payment'}
2024-09-10 15:43:14,800 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:43:15,884 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 15:43:15,891 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169989599', 'CheckoutRequestID': 'ws_CO_10092024184315489795391356', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 15:43:21,270 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169989599', 'CheckoutRequestID': 'ws_CO_10092024184315489795391356', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-10 15:43:21,272 - INFO - {'updated_data': 'callback data began'}
2024-09-10 15:43:21,272 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169989599', 'CheckoutRequestID': 'ws_CO_10092024184315489795391356', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-10 15:43:21,468 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:43:22,074 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:43:22,075 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:43:22,220 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:43:22,359 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:43:22,360 - INFO - there is a test coming
2024-09-10 15:43:22,360 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 15:43:22,415 - INFO - {'updated_data': 'the data is now as 254733743780'}
2024-09-10 15:43:22,415 - INFO - the data is now as 254733743780
2024-09-10 15:43:22,433 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 15:43:22,434 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 15:43:22,435 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:43:22,872 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:43:23,153 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:43:23,155 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer HNIk4XnTyff3ZFsjk9x2ubIX12Vh'}"}
2024-09-10 15:43:23,156 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTU0MzIz', 'Timestamp': '20240910154323', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '17966', 'PartyA': '254733743780', 'PartyB': 827142, 'PhoneNumber': '254733743780', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-26891', 'TransactionDesc': 'Some payment'}
2024-09-10 15:43:23,157 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:43:24,141 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 15:43:24,148 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87895100', 'CheckoutRequestID': 'ws_CO_10092024184323822733743780', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 15:43:25,874 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87895100', 'CheckoutRequestID': 'ws_CO_10092024184323822733743780', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}"}
2024-09-10 15:43:25,874 - INFO - {'updated_data': 'callback data began'}
2024-09-10 15:43:25,875 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87895100', 'CheckoutRequestID': 'ws_CO_10092024184323822733743780', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}}
2024-09-10 15:43:26,101 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:43:26,719 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:43:26,721 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:43:27,318 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:43:37,039 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:43:37,052 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 15:43:37,052 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 15:43:39,553 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170225914', 'CheckoutRequestID': 'ws_CO_10092024184337730733743780', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}"}
2024-09-10 15:43:39,553 - INFO - {'updated_data': 'callback data began'}
2024-09-10 15:43:39,553 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170225914', 'CheckoutRequestID': 'ws_CO_10092024184337730733743780', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}}
2024-09-10 15:43:39,789 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:43:40,075 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:43:40,076 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:43:40,735 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:43:43,234 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:43:43,369 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:43:43,370 - INFO - there is a test coming
2024-09-10 15:43:43,370 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 15:43:43,420 - INFO - {'updated_data': 'the data is now as 254795391356'}
2024-09-10 15:43:43,420 - INFO - the data is now as 254795391356
2024-09-10 15:43:43,445 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 15:43:43,445 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 15:43:43,446 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:43:44,285 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:43:44,287 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer KglWqoAMO4cIGMwiYxYokSdX6eP1'}"}
2024-09-10 15:43:44,288 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTU0MzQ0', 'Timestamp': '20240910154344', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '400', 'PartyA': '254795391356', 'PartyB': 827142, 'PhoneNumber': '254795391356', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-25052', 'TransactionDesc': 'Some payment'}
2024-09-10 15:43:44,289 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:43:45,308 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 15:43:45,315 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b517116465', 'CheckoutRequestID': 'ws_CO_10092024184345078795391356', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 15:44:45,832 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585053078978', 'CheckoutRequestID': 'ws_CO_10092024184437089743610658', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA152XGN7'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910184445}, {'Name': 'PhoneNumber', 'Value': 254743610658}]}}}}"}
2024-09-10 15:44:45,832 - INFO - {'updated_data': 'callback data began'}
2024-09-10 15:44:45,832 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585053078978', 'CheckoutRequestID': 'ws_CO_10092024184437089743610658', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA152XGN7'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910184445}, {'Name': 'PhoneNumber', 'Value': 254743610658}]}}}}}
2024-09-10 15:44:46,023 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:44:46,598 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:44:46,600 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:44:46,943 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:44:49,913 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:44:50,080 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:44:50,081 - INFO - {'updated': 'initiated stk query for ws_CO_10092024184437089743610658 827142 '}
2024-09-10 15:44:50,159 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:44:50,930 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:44:50,932 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 5bmC0YpuqJ2BD3vbQ0teJpBPFOX1'}"}
2024-09-10 15:44:50,933 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTU0NDUw', 'Timestamp': '20240910154450', 'CheckoutRequestID': 'ws_CO_10092024184437089743610658'}"}
2024-09-10 15:44:50,934 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:44:51,748 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 15:44:51,749 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585053078978', 'CheckoutRequestID': 'ws_CO_10092024184437089743610658', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024184437089743610658 827142"}
2024-09-10 15:44:51,901 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:44:52,494 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:44:52,496 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:44:52,850 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:48:36,762 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:48:36,884 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:48:36,885 - INFO - {'updated': 'initiated stk query for ws_CO_10092024184814961724427110 899885 '}
2024-09-10 15:48:36,985 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:48:37,719 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:48:37,721 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ELxgirKRNBVBp2cbUAyDTaJ0DPg5'}"}
2024-09-10 15:48:37,722 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTU0ODM2', 'Timestamp': '20240910154836', 'CheckoutRequestID': 'ws_CO_10092024184814961724427110'}"}
2024-09-10 15:48:37,723 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:48:38,612 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 15:48:38,613 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585053091661', 'CheckoutRequestID': 'ws_CO_10092024184814961724427110', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024184814961724427110 899885"}
2024-09-10 15:48:38,774 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:48:39,370 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:48:39,371 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:48:39,714 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:48:44,436 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:48:44,641 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:48:44,643 - INFO - {'updated': 'initiated stk query for ws_CO_10092024184804002726466697 899885 '}
2024-09-10 15:48:44,717 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:48:45,569 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:48:45,578 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ezuCR5VliU2Ys8AlmoxTZBWW2qtv'}"}
2024-09-10 15:48:45,581 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTU0ODQ0', 'Timestamp': '20240910154844', 'CheckoutRequestID': 'ws_CO_10092024184804002726466697'}"}
2024-09-10 15:48:45,585 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:48:46,444 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 15:48:46,444 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6682967', 'CheckoutRequestID': 'ws_CO_10092024184804002726466697', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024184804002726466697 899885"}
2024-09-10 15:48:46,641 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:48:46,919 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:48:46,921 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:48:47,277 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:50:40,726 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:50:40,881 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:50:40,882 - INFO - there is a test coming
2024-09-10 15:50:40,882 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 15:50:40,947 - INFO - {'updated_data': 'the data is now as 254703652995'}
2024-09-10 15:50:40,948 - INFO - the data is now as 254703652995
2024-09-10 15:50:40,964 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 15:50:40,964 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 15:50:40,965 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:50:41,703 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:50:41,705 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ZI99gs4UUj653vvPKOkx7AogwUI9'}"}
2024-09-10 15:50:41,706 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTU1MDQx', 'Timestamp': '20240910155041', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254703652995', 'PartyB': 827142, 'PhoneNumber': '254703652995', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-31297', 'TransactionDesc': 'Some payment'}
2024-09-10 15:50:41,707 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:50:46,273 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 15:50:46,279 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6692316', 'CheckoutRequestID': 'ws_CO_10092024185042494703652995', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 15:59:00,548 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585053130478', 'CheckoutRequestID': 'ws_CO_10092024185842529721790720', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-10 15:59:00,548 - INFO - {'updated_data': 'callback data began'}
2024-09-10 15:59:00,548 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585053130478', 'CheckoutRequestID': 'ws_CO_10092024185842529721790720', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-10 15:59:00,735 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:59:01,012 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:59:01,013 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:59:01,358 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:59:36,077 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:59:36,266 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:59:36,267 - INFO - there is a test coming
2024-09-10 15:59:36,267 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 15:59:36,311 - INFO - {'updated_data': 'the data is now as 254721790720'}
2024-09-10 15:59:36,311 - INFO - the data is now as 254721790720
2024-09-10 15:59:36,354 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 15:59:36,355 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 15:59:36,417 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:59:37,156 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:59:37,158 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer EsfTmvn9kQ0ay57yQUbkGQIlf2Ge'}"}
2024-09-10 15:59:37,158 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTU1OTM3', 'Timestamp': '20240910155937', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '50000', 'PartyA': '254721790720', 'PartyB': 899885, 'PhoneNumber': '254721790720', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054139', 'TransactionDesc': 'Some payment'}
2024-09-10 15:59:37,159 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:59:38,319 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 15:59:38,338 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee597086145', 'CheckoutRequestID': 'ws_CO_10092024185938077721790720', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 15:59:49,449 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:59:49,661 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:59:49,662 - INFO - {'updated': 'initiated stk query for ws_CO_10092024185938077721790720 899885 '}
2024-09-10 15:59:49,729 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:59:50,510 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:59:50,512 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer mip9SyHAR5XB81vfJk35pyKH3Rae'}"}
2024-09-10 15:59:50,512 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTU1OTQ5', 'Timestamp': '20240910155949', 'CheckoutRequestID': 'ws_CO_10092024185938077721790720'}"}
2024-09-10 15:59:50,513 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:59:51,414 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 15:59:51,414 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee597086145', 'CheckoutRequestID': 'ws_CO_10092024185938077721790720', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024185938077721790720 899885"}
2024-09-10 15:59:51,533 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:59:52,125 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:59:52,127 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:59:52,788 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 16:04:35,074 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793613207', 'CheckoutRequestID': 'ws_CO_10092024190432599790645254', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-10 16:04:35,074 - INFO - {'updated_data': 'callback data began'}
2024-09-10 16:04:35,074 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793613207', 'CheckoutRequestID': 'ws_CO_10092024190432599790645254', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-10 16:04:35,325 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 16:04:36,099 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 16:04:36,101 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 16:04:36,770 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 16:05:08,363 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 16:05:08,382 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 16:05:08,382 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 16:07:31,224 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 16:07:31,549 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 16:07:31,550 - INFO - {'updated': 'initiated stk query for ws_CO_10092024190659751114296480 899885 '}
2024-09-10 16:07:31,621 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:07:32,361 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 16:07:32,364 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer d6httoJ3O2IwZWRHHl0nDfDnEJRi'}"}
2024-09-10 16:07:32,364 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTYwNzMx', 'Timestamp': '20240910160731', 'CheckoutRequestID': 'ws_CO_10092024190659751114296480'}"}
2024-09-10 16:07:32,365 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:07:33,238 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 16:07:33,238 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc17197960', 'CheckoutRequestID': 'ws_CO_10092024190659751114296480', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024190659751114296480 899885"}
2024-09-10 16:07:33,369 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 16:07:33,960 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 16:07:33,962 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 16:07:34,306 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 16:07:39,088 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 16:07:39,256 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 16:07:39,257 - INFO - {'updated': 'initiated stk query for ws_CO_10092024190727160733743780 827142 '}
2024-09-10 16:07:39,338 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:07:40,105 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 16:07:40,107 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Aup8u3UcbVKi8iR33J5EAjAxPMdg'}"}
2024-09-10 16:07:40,107 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTYwNzM5', 'Timestamp': '20240910160739', 'CheckoutRequestID': 'ws_CO_10092024190727160733743780'}"}
2024-09-10 16:07:40,109 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:07:40,994 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 381
2024-09-10 16:07:40,995 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170746360', 'CheckoutRequestID': 'ws_CO_10092024190727160733743780', 'ResultCode': '2001', 'ResultDesc': 'The initiator information is invalid.'} for ws_CO_10092024190727160733743780 827142"}
2024-09-10 16:07:41,121 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 16:07:41,401 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 16:07:41,403 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 16:07:41,771 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 16:09:08,015 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee597118260', 'CheckoutRequestID': 'ws_CO_10092024190858000726618736', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 600.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA558HXT3'}, {'Name': 'TransactionDate', 'Value': 20240910190907}, {'Name': 'PhoneNumber', 'Value': 254726618736}]}}}}"}
2024-09-10 16:09:08,017 - INFO - {'updated_data': 'callback data began'}
2024-09-10 16:09:08,017 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee597118260', 'CheckoutRequestID': 'ws_CO_10092024190858000726618736', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 600.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA558HXT3'}, {'Name': 'TransactionDate', 'Value': 20240910190907}, {'Name': 'PhoneNumber', 'Value': 254726618736}]}}}}}
2024-09-10 16:09:08,213 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 16:09:08,502 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 16:09:08,504 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 16:09:08,847 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 16:11:36,860 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 16:11:37,003 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 16:11:37,004 - INFO - there is a test coming
2024-09-10 16:11:37,004 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 16:11:37,046 - INFO - {'updated_data': 'the data is now as 254714960388'}
2024-09-10 16:11:37,046 - INFO - the data is now as 254714960388
2024-09-10 16:11:37,064 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 16:11:37,064 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 16:11:37,065 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:11:37,945 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 16:11:37,947 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer XWr4OemI4ZJG2uO5SQbk6qZ0NFre'}"}
2024-09-10 16:11:37,947 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTYxMTM3', 'Timestamp': '20240910161137', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '17000', 'PartyA': '254714960388', 'PartyB': 899885, 'PhoneNumber': '254714960388', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054042', 'TransactionDesc': 'Some payment'}
2024-09-10 16:11:37,949 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:11:38,917 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 16:11:38,931 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585053175297', 'CheckoutRequestID': 'ws_CO_10092024191138682714960388', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 16:11:55,794 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585053175297', 'CheckoutRequestID': 'ws_CO_10092024191138682714960388', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 17000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA1595VGZ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910191155}, {'Name': 'PhoneNumber', 'Value': 254714960388}]}}}}"}
2024-09-10 16:11:55,794 - INFO - {'updated_data': 'callback data began'}
2024-09-10 16:11:55,794 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585053175297', 'CheckoutRequestID': 'ws_CO_10092024191138682714960388', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 17000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA1595VGZ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910191155}, {'Name': 'PhoneNumber', 'Value': 254714960388}]}}}}}
2024-09-10 16:11:55,958 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 16:11:56,464 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 16:11:56,466 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 16:11:56,878 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 16:11:59,996 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 16:12:00,163 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 16:12:00,163 - INFO - {'updated': 'initiated stk query for ws_CO_10092024191138682714960388 899885 '}
2024-09-10 16:12:00,281 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:12:01,059 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 16:12:01,061 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer tHp81oI0yCjKghiIerisMGIOUXmU'}"}
2024-09-10 16:12:01,061 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTYxMjAw', 'Timestamp': '20240910161200', 'CheckoutRequestID': 'ws_CO_10092024191138682714960388'}"}
2024-09-10 16:12:01,062 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:12:01,979 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 16:12:01,979 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585053175297', 'CheckoutRequestID': 'ws_CO_10092024191138682714960388', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024191138682714960388 899885"}
2024-09-10 16:12:02,121 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 16:12:02,745 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 16:12:02,746 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 16:12:03,104 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 16:13:38,984 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b517222547', 'CheckoutRequestID': 'ws_CO_10092024191329584740691589', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA659KV92'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910191338}, {'Name': 'PhoneNumber', 'Value': 254740691589}]}}}}"}
2024-09-10 16:13:38,984 - INFO - {'updated_data': 'callback data began'}
2024-09-10 16:13:38,985 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b517222547', 'CheckoutRequestID': 'ws_CO_10092024191329584740691589', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA659KV92'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910191338}, {'Name': 'PhoneNumber', 'Value': 254740691589}]}}}}}
2024-09-10 16:13:39,176 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 16:13:39,479 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 16:13:39,481 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 16:13:39,852 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 16:13:40,739 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 16:13:40,888 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 16:13:40,889 - INFO - {'updated': 'initiated stk query for ws_CO_10092024191329584740691589 827142 '}
2024-09-10 16:13:40,959 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:13:41,685 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 16:13:41,687 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer GrGMS7PefbazQ8Ab8aelFJlzN2zJ'}"}
2024-09-10 16:13:41,687 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTYxMzQw', 'Timestamp': '20240910161340', 'CheckoutRequestID': 'ws_CO_10092024191329584740691589'}"}
2024-09-10 16:13:41,688 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:13:42,554 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 16:13:42,554 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b517222547', 'CheckoutRequestID': 'ws_CO_10092024191329584740691589', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024191329584740691589 827142"}
2024-09-10 16:13:42,691 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 16:13:43,269 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 16:13:43,270 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 16:13:43,611 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 16:13:48,913 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b517223275', 'CheckoutRequestID': 'ws_CO_10092024191340879700335979', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA859M76E'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910191348}, {'Name': 'PhoneNumber', 'Value': 254700335979}]}}}}"}
2024-09-10 16:13:48,914 - INFO - {'updated_data': 'callback data began'}
2024-09-10 16:13:48,914 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b517223275', 'CheckoutRequestID': 'ws_CO_10092024191340879700335979', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA859M76E'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910191348}, {'Name': 'PhoneNumber', 'Value': 254700335979}]}}}}}
2024-09-10 16:13:49,067 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 16:13:49,336 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 16:13:49,337 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 16:13:49,977 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 16:13:51,986 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 16:13:52,158 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 16:13:52,159 - INFO - {'updated': 'initiated stk query for ws_CO_10092024191340879700335979 827142 '}
2024-09-10 16:13:52,218 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:13:53,090 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 16:13:53,092 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer q2U5HG7ugwlQaS9nU7Fl5Rtxhq3P'}"}
2024-09-10 16:13:53,092 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTYxMzUy', 'Timestamp': '20240910161352', 'CheckoutRequestID': 'ws_CO_10092024191340879700335979'}"}
2024-09-10 16:13:53,093 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:13:53,885 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 16:13:53,886 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b517223275', 'CheckoutRequestID': 'ws_CO_10092024191340879700335979', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024191340879700335979 827142"}
2024-09-10 16:13:54,081 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 16:13:54,346 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 16:13:54,347 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 16:13:54,978 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 16:14:28,453 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 16:14:28,598 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 16:14:28,599 - INFO - there is a test coming
2024-09-10 16:14:28,599 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 16:14:28,640 - INFO - {'updated_data': 'the data is now as 254700335979'}
2024-09-10 16:14:28,640 - INFO - the data is now as 254700335979
2024-09-10 16:14:28,683 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 16:14:28,683 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 16:14:28,684 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:14:29,414 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 16:14:29,416 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ehnqpQLJjueW2B5HYzwTjnAxQAWU'}"}
2024-09-10 16:14:29,416 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTYxNDI5', 'Timestamp': '20240910161429', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1310', 'PartyA': '254700335979', 'PartyB': 827142, 'PhoneNumber': '254700335979', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-1483', 'TransactionDesc': 'Some payment'}
2024-09-10 16:14:29,417 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:14:30,435 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 16:14:30,441 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585053185951', 'CheckoutRequestID': 'ws_CO_10092024191430193700335979', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 16:14:37,418 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 16:14:37,430 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 16:14:37,431 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 16:14:38,449 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585053185951', 'CheckoutRequestID': 'ws_CO_10092024191430193700335979', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1310.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA759T12L'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910191438}, {'Name': 'PhoneNumber', 'Value': 254700335979}]}}}}"}
2024-09-10 16:14:38,450 - INFO - {'updated_data': 'callback data began'}
2024-09-10 16:14:38,450 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585053185951', 'CheckoutRequestID': 'ws_CO_10092024191430193700335979', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1310.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA759T12L'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910191438}, {'Name': 'PhoneNumber', 'Value': 254700335979}]}}}}}
2024-09-10 16:14:38,636 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 16:14:39,206 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 16:14:39,208 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 16:14:39,870 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 16:14:41,351 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 16:14:41,528 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 16:14:41,529 - INFO - {'updated': 'initiated stk query for ws_CO_10092024191430193700335979 827142 '}
2024-09-10 16:14:41,605 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:14:42,382 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 16:14:42,384 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Jym8SXUnKZOfK4MWT2OGOe1AG8e9'}"}
2024-09-10 16:14:42,384 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTYxNDQx', 'Timestamp': '20240910161441', 'CheckoutRequestID': 'ws_CO_10092024191430193700335979'}"}
2024-09-10 16:14:42,385 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:14:43,160 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 16:14:43,161 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585053185951', 'CheckoutRequestID': 'ws_CO_10092024191430193700335979', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024191430193700335979 827142"}
2024-09-10 16:14:43,296 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 16:14:43,566 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 16:14:43,567 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 16:14:44,231 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 16:15:36,775 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 16:15:37,029 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 16:15:37,030 - INFO - there is a test coming
2024-09-10 16:15:37,031 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 16:15:37,102 - INFO - {'updated_data': 'the data is now as 254700335979'}
2024-09-10 16:15:37,102 - INFO - the data is now as 254700335979
2024-09-10 16:15:37,129 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 16:15:37,129 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 16:15:37,131 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:15:37,901 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 16:15:37,907 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 4OkjA0jVyh1eh7z6eyTSOzCIdelw'}"}
2024-09-10 16:15:37,908 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTYxNTM3', 'Timestamp': '20240910161537', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254700335979', 'PartyB': 827142, 'PhoneNumber': '254700335979', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-1488', 'TransactionDesc': 'Some payment'}
2024-09-10 16:15:37,909 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:15:39,061 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 16:15:39,067 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208793628965', 'CheckoutRequestID': 'ws_CO_10092024191538625700335979', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 16:18:13,474 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793632443', 'CheckoutRequestID': 'ws_CO_10092024191758929722842985', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 25000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA35ANZJ1'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910191812}, {'Name': 'PhoneNumber', 'Value': 254722842985}]}}}}"}
2024-09-10 16:18:13,474 - INFO - {'updated_data': 'callback data began'}
2024-09-10 16:18:13,475 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793632443', 'CheckoutRequestID': 'ws_CO_10092024191758929722842985', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 25000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA35ANZJ1'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910191812}, {'Name': 'PhoneNumber', 'Value': 254722842985}]}}}}}
2024-09-10 16:18:13,669 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 16:18:14,477 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 16:18:14,479 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 16:18:15,166 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 16:19:16,217 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 16:19:16,378 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 16:19:16,379 - INFO - there is a test coming
2024-09-10 16:19:16,379 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 16:19:16,436 - INFO - {'updated_data': 'the data is now as 254721336478'}
2024-09-10 16:19:16,436 - INFO - the data is now as 254721336478
2024-09-10 16:19:16,455 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 16:19:16,455 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 16:19:16,456 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:19:17,367 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 16:19:17,369 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer syHUsja3WbnTBbIcYr4SNLS46yQW'}"}
2024-09-10 16:19:17,370 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTYxOTE3', 'Timestamp': '20240910161917', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '200', 'PartyA': '254721336478', 'PartyB': 899885, 'PhoneNumber': '254721336478', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054043', 'TransactionDesc': 'Some payment'}
2024-09-10 16:19:17,371 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:19:18,312 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 16:19:18,318 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170763366', 'CheckoutRequestID': 'ws_CO_10092024191918088721336478', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 17:03:06,334 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:03:06,491 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:03:06,492 - INFO - {'updated': 'initiated stk query for ws_CO_10092024200251521717123984 899885 '}
2024-09-10 17:03:06,559 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:03:07,384 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:03:07,387 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer sGqVdAXYfAMRyDJyKrwNygZGceFJ'}"}
2024-09-10 17:03:07,387 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTcwMzA2', 'Timestamp': '20240910170306', 'CheckoutRequestID': 'ws_CO_10092024200251521717123984'}"}
2024-09-10 17:03:07,388 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:03:08,376 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 17:03:08,376 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc17415937', 'CheckoutRequestID': 'ws_CO_10092024200251521717123984', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024200251521717123984 899885"}
2024-09-10 17:03:08,515 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 17:03:08,795 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 17:03:08,797 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 17:03:09,135 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:03:09,638 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc17415937', 'CheckoutRequestID': 'ws_CO_10092024200251521717123984', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA95KOJPL'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910200303}, {'Name': 'PhoneNumber', 'Value': 254717123984}]}}}}"}
2024-09-10 17:03:09,638 - INFO - {'updated_data': 'callback data began'}
2024-09-10 17:03:09,639 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc17415937', 'CheckoutRequestID': 'ws_CO_10092024200251521717123984', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA95KOJPL'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910200303}, {'Name': 'PhoneNumber', 'Value': 254717123984}]}}}}}
2024-09-10 17:03:09,803 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 17:03:10,093 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 17:03:10,095 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 17:03:10,762 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:03:58,918 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:03:59,040 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:03:59,041 - INFO - there is a test coming
2024-09-10 17:03:59,041 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 17:03:59,107 - INFO - {'updated_data': 'the data is now as 254722317145'}
2024-09-10 17:03:59,108 - INFO - the data is now as 254722317145
2024-09-10 17:03:59,126 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 17:03:59,126 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 17:03:59,128 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:03:59,900 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:03:59,902 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer OtjWMH2fhlG2vVwzkjwKrvuELnAK'}"}
2024-09-10 17:03:59,903 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTcwMzU5', 'Timestamp': '20240910170359', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254722317145', 'PartyB': 827142, 'PhoneNumber': '254722317145', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-18753', 'TransactionDesc': 'Some payment'}
2024-09-10 17:03:59,908 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:05:04,981 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 17:05:04,988 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6973689', 'CheckoutRequestID': 'ws_CO_10092024200501893722317145', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 17:05:14,693 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6973689', 'CheckoutRequestID': 'ws_CO_10092024200501893722317145', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA55L44S3'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910200513}, {'Name': 'PhoneNumber', 'Value': 254722317145}]}}}}"}
2024-09-10 17:05:14,694 - INFO - {'updated_data': 'callback data began'}
2024-09-10 17:05:14,694 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6973689', 'CheckoutRequestID': 'ws_CO_10092024200501893722317145', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA55L44S3'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910200513}, {'Name': 'PhoneNumber', 'Value': 254722317145}]}}}}}
2024-09-10 17:05:14,855 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 17:05:15,136 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 17:05:15,138 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 17:05:15,803 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:05:23,718 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:05:23,746 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 17:05:23,747 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 17:05:59,655 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:05:59,697 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 17:05:59,698 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 17:13:24,435 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:13:24,587 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:13:24,588 - INFO - there is a test coming
2024-09-10 17:13:24,588 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 17:13:24,628 - INFO - {'updated_data': 'the data is now as 254715669157'}
2024-09-10 17:13:24,628 - INFO - the data is now as 254715669157
2024-09-10 17:13:24,643 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 17:13:24,643 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 17:13:24,644 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:13:25,397 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:13:25,398 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer NcCkezOe9rmSUHareiaXwTMlQSOl'}"}
2024-09-10 17:13:25,399 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTcxMzI1', 'Timestamp': '20240910171325', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254715669157', 'PartyB': 827142, 'PhoneNumber': '254715669157', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '169-13496', 'TransactionDesc': 'Some payment'}
2024-09-10 17:13:25,400 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:13:28,621 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 17:13:28,627 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076056660', 'CheckoutRequestID': 'ws_CO_10092024201326327715669157', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 17:13:43,198 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076056660', 'CheckoutRequestID': 'ws_CO_10092024201326327715669157', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA05MRO3Y'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910201334}, {'Name': 'PhoneNumber', 'Value': 254715669157}]}}}}"}
2024-09-10 17:13:43,202 - INFO - {'updated_data': 'callback data began'}
2024-09-10 17:13:43,202 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076056660', 'CheckoutRequestID': 'ws_CO_10092024201326327715669157', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA05MRO3Y'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910201334}, {'Name': 'PhoneNumber', 'Value': 254715669157}]}}}}}
2024-09-10 17:13:43,367 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 17:13:44,175 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 17:13:44,176 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 17:13:44,548 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:20:32,425 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:20:32,573 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:20:32,574 - INFO - {'updated': 'initiated stk query for ws_CO_10092024202019160791394431 899885 '}
2024-09-10 17:20:32,642 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:20:46,785 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 400 0
2024-09-10 17:20:46,787 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer '}"}
2024-09-10 17:20:46,787 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTcyMDMy', 'Timestamp': '20240910172032', 'CheckoutRequestID': 'ws_CO_10092024202019160791394431'}"}
2024-09-10 17:20:46,788 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:20:47,597 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 404 174
2024-09-10 17:20:47,598 - INFO - {'updated': "Received response {'requestId': '', 'errorCode': '404.001.03', 'errorMessage': 'Invalid Access Token'} for ws_CO_10092024202019160791394431 899885"}
2024-09-10 17:20:47,600 - WARNING - Not Found: /api/v1/stk/query/
2024-09-10 17:21:53,147 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:21:53,301 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:21:53,301 - INFO - {'updated': 'initiated stk query for ws_CO_10092024202101893725742226 827142 '}
2024-09-10 17:21:53,362 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:21:54,093 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:21:54,094 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer qGGveUHH2QVtLJXnoH4kEqufAOGo'}"}
2024-09-10 17:21:54,095 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTcyMTUz', 'Timestamp': '20240910172153', 'CheckoutRequestID': 'ws_CO_10092024202101893725742226'}"}
2024-09-10 17:21:54,096 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:21:54,824 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 528
2024-09-10 17:21:54,825 - INFO - {'updated': "Received response {'fault': {'faultstring': 'Failed to submit task to thread pool. Error = java.util.concurrent.RejectedExecutionException: Task java.util.concurrent.FutureTask@35a2ef68[Not completed, task = java.util.concurrent.Executors$RunnableAdapter@5ad10f11[Wrapped task = com.apigee.threadpool.QueueMetricsAwareTask@607e72e8]] rejected from java.util.concurrent.ThreadPoolExecutor@82972f8[Running, pool size = 100, active threads = 100, queued tasks = 1000, completed tasks = 160840615]', 'detail': {'errorcode': 'threadpool.ExecutionFailed'}}} for ws_CO_10092024202101893725742226 827142"}
2024-09-10 17:21:54,827 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 17:23:13,959 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:23:14,122 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:23:14,122 - INFO - there is a test coming
2024-09-10 17:23:14,123 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 17:23:14,173 - INFO - {'updated_data': 'the data is now as 254725742226'}
2024-09-10 17:23:14,174 - INFO - the data is now as 254725742226
2024-09-10 17:23:14,199 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 17:23:14,200 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 17:23:14,202 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:23:15,792 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:23:15,794 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer LZxcaolkA3iVWaNjZHgsovVGgaWR'}"}
2024-09-10 17:23:15,797 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTcyMzE1', 'Timestamp': '20240910172315', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '9827', 'PartyA': '254725742226', 'PartyB': 827142, 'PhoneNumber': '254725742226', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-114508', 'TransactionDesc': 'Some payment'}
2024-09-10 17:23:15,798 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:25:49,239 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 503 95
2024-09-10 17:25:49,241 - INFO -  th data is {'code': 500, 'message': {'status': 'Failed', 'message': 'Error connecting'}}
2024-09-10 17:25:49,242 - ERROR - Internal Server Error: /api/v1/stk/
2024-09-10 17:26:20,762 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:26:20,891 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:26:20,892 - INFO - {'updated': 'initiated stk query for ws_CO_10092024202539292722693861 827142 '}
2024-09-10 17:26:20,950 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:26:21,683 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:26:21,685 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer g1FCYz2htUBADHu6AcjT4aPG4quD'}"}
2024-09-10 17:26:21,685 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTcyNjIw', 'Timestamp': '20240910172620', 'CheckoutRequestID': 'ws_CO_10092024202539292722693861'}"}
2024-09-10 17:26:21,687 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:26:23,554 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 17:26:23,555 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170177052', 'CheckoutRequestID': 'ws_CO_10092024202539292722693861', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024202539292722693861 827142"}
2024-09-10 17:26:23,691 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 17:26:23,694 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170898985', 'CheckoutRequestID': 'ws_CO_10092024202531938717379630', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA45P2EMG'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910202541}, {'Name': 'PhoneNumber', 'Value': 254717379630}]}}}}"}
2024-09-10 17:26:23,694 - INFO - {'updated_data': 'callback data began'}
2024-09-10 17:26:23,694 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170898985', 'CheckoutRequestID': 'ws_CO_10092024202531938717379630', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA45P2EMG'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910202541}, {'Name': 'PhoneNumber', 'Value': 254717379630}]}}}}}
2024-09-10 17:26:23,898 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 17:26:23,901 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:26:23,941 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 17:26:23,942 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 17:26:23,974 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170177052', 'CheckoutRequestID': 'ws_CO_10092024202539292722693861', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 7000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA65P3XP0'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910202552}, {'Name': 'PhoneNumber', 'Value': 254722693861}]}}}}"}
2024-09-10 17:26:23,974 - INFO - {'updated_data': 'callback data began'}
2024-09-10 17:26:23,974 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170177052', 'CheckoutRequestID': 'ws_CO_10092024202539292722693861', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 7000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA65P3XP0'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910202552}, {'Name': 'PhoneNumber', 'Value': 254722693861}]}}}}}
2024-09-10 17:26:24,170 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 17:26:24,171 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 17:26:24,182 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 17:26:24,199 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 17:26:24,200 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 17:26:24,469 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 17:26:24,470 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 17:26:24,549 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:26:24,550 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:26:25,135 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:26:41,996 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:26:42,172 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:26:42,173 - INFO - {'updated': 'initiated stk query for ws_CO_10092024202531938717379630 827142 '}
2024-09-10 17:26:42,264 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:26:43,673 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:26:43,675 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer zlpWIrmUzuzA3VOfUmnfdSEKMRtC'}"}
2024-09-10 17:26:43,676 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTcyNjQy', 'Timestamp': '20240910172642', 'CheckoutRequestID': 'ws_CO_10092024202531938717379630'}"}
2024-09-10 17:26:43,677 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:26:44,473 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 17:26:44,473 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170898985', 'CheckoutRequestID': 'ws_CO_10092024202531938717379630', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024202531938717379630 827142"}
2024-09-10 17:26:44,611 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 17:26:44,615 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:26:44,753 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:26:44,754 - INFO - {'updated': 'initiated stk query for ws_CO_10092024202531938717379630 827142 '}
2024-09-10 17:26:44,826 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:26:45,212 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 17:26:45,213 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 17:26:45,532 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:26:45,534 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Ti8wM5EfnqZksGKGRreWxjuIdd6O'}"}
2024-09-10 17:26:45,535 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTcyNjQ0', 'Timestamp': '20240910172644', 'CheckoutRequestID': 'ws_CO_10092024202531938717379630'}"}
2024-09-10 17:26:45,542 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:26:45,877 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:29:22,598 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 503 95
2024-09-10 17:29:22,601 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 17:33:16,322 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:33:16,463 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:33:16,464 - INFO - there is a test coming
2024-09-10 17:33:16,464 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 17:33:16,516 - INFO - {'updated_data': 'the data is now as 254797125776'}
2024-09-10 17:33:16,517 - INFO - the data is now as 254797125776
2024-09-10 17:33:16,535 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 17:33:16,536 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 17:33:16,537 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:33:17,186 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:33:17,188 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer bVdNAHAsrY3vLLumLorU6G7DOA9H'}"}
2024-09-10 17:33:17,189 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTczMzE3', 'Timestamp': '20240910173317', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '31103', 'PartyA': '254797125776', 'PartyB': 827142, 'PhoneNumber': '254797125776', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-152033', 'TransactionDesc': 'Some payment'}
2024-09-10 17:33:17,190 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:33:20,516 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 17:33:20,523 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee597437992', 'CheckoutRequestID': 'ws_CO_10092024203319638797125776', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 17:33:41,595 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:33:41,717 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:33:41,718 - INFO - {'updated': 'initiated stk query for ws_CO_10092024203319638797125776 827142 '}
2024-09-10 17:33:41,775 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:33:42,499 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:33:42,501 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer pYxIr6bj2JQq5YTG0XiJDcQeZz3s'}"}
2024-09-10 17:33:42,502 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTczMzQx', 'Timestamp': '20240910173341', 'CheckoutRequestID': 'ws_CO_10092024203319638797125776'}"}
2024-09-10 17:33:42,503 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:33:43,148 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 17:33:43,148 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee597437992', 'CheckoutRequestID': 'ws_CO_10092024203319638797125776', 'ResultCode': '1', 'ResultDesc': 'The balance is insufficient for the transaction.'} for ws_CO_10092024203319638797125776 827142"}
2024-09-10 17:33:43,306 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 17:33:44,027 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 17:33:44,029 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 17:33:44,609 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:34:52,224 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:34:52,395 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:34:52,396 - INFO - {'updated': 'initiated stk query for ws_CO_10092024203417316758197738 899885 '}
2024-09-10 17:34:52,451 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:34:53,015 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:34:53,017 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer HPr6KG0O9rV7mlB1EC4oqpH2G4Zl'}"}
2024-09-10 17:34:53,018 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTczNDUy', 'Timestamp': '20240910173452', 'CheckoutRequestID': 'ws_CO_10092024203417316758197738'}"}
2024-09-10 17:34:53,019 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:34:53,660 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 17:34:53,661 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170923494', 'CheckoutRequestID': 'ws_CO_10092024203417316758197738', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024203417316758197738 899885"}
2024-09-10 17:34:53,794 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 17:34:54,310 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 17:34:54,311 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 17:34:54,568 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:36:53,470 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:36:53,651 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:36:53,651 - INFO - there is a test coming
2024-09-10 17:36:53,652 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 17:36:53,694 - INFO - {'updated_data': 'the data is now as 254703472850'}
2024-09-10 17:36:53,694 - INFO - the data is now as 254703472850
2024-09-10 17:36:53,710 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 17:36:53,710 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 17:36:53,712 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:36:54,567 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:36:54,569 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer dqlmp0KhBssvDUEolkUJGqNrbfkw'}"}
2024-09-10 17:36:54,570 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTczNjU0', 'Timestamp': '20240910173654', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254703472850', 'PartyB': 827142, 'PhoneNumber': '254703472850', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-13062', 'TransactionDesc': 'Some payment'}
2024-09-10 17:36:54,571 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:36:55,660 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 17:36:55,666 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88113223', 'CheckoutRequestID': 'ws_CO_10092024203655215703472850', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 17:37:10,817 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88113223', 'CheckoutRequestID': 'ws_CO_10092024203655215703472850', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA95R677R'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910203708}, {'Name': 'PhoneNumber', 'Value': 254703472850}]}}}}"}
2024-09-10 17:37:10,818 - INFO - {'updated_data': 'callback data began'}
2024-09-10 17:37:10,818 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88113223', 'CheckoutRequestID': 'ws_CO_10092024203655215703472850', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA95R677R'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910203708}, {'Name': 'PhoneNumber', 'Value': 254703472850}]}}}}}
2024-09-10 17:37:10,981 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 17:37:11,166 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 17:37:11,172 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 17:37:11,418 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:38:30,599 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:38:30,841 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:38:30,841 - INFO - there is a test coming
2024-09-10 17:38:30,841 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 17:38:30,923 - INFO - {'updated_data': 'the data is now as 254722973511'}
2024-09-10 17:38:30,923 - INFO - the data is now as 254722973511
2024-09-10 17:38:30,995 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 17:38:30,996 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 17:38:30,997 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:38:31,602 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:38:31,604 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 7XVXW3CAJYxYLpOMVcYqSgAxCjU6'}"}
2024-09-10 17:38:31,605 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTczODMx', 'Timestamp': '20240910173831', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '132764', 'PartyA': '254722973511', 'PartyB': 827142, 'PhoneNumber': '254722973511', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-48888', 'TransactionDesc': 'Some payment'}
2024-09-10 17:38:31,606 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:38:33,016 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 17:38:33,024 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170212833', 'CheckoutRequestID': 'ws_CO_10092024203832230722973511', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 17:41:04,124 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:41:04,287 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:41:04,288 - INFO - {'updated': 'initiated stk query for ws_CO_10092024204052140725090103 899885 '}
2024-09-10 17:41:04,368 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:41:05,032 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:41:05,034 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer S5NCIEAioAzbNSL0HoBRTVXI5ijU'}"}
2024-09-10 17:41:05,034 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTc0MTA0', 'Timestamp': '20240910174104', 'CheckoutRequestID': 'ws_CO_10092024204052140725090103'}"}
2024-09-10 17:41:05,036 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:41:05,743 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 17:41:05,744 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208793812754', 'CheckoutRequestID': 'ws_CO_10092024204052140725090103', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024204052140725090103 899885"}
2024-09-10 17:41:05,955 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 17:41:06,454 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 17:41:06,456 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 17:41:06,682 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:41:09,058 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793812754', 'CheckoutRequestID': 'ws_CO_10092024204052140725090103', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 65000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA15RV8RD'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910204101}, {'Name': 'PhoneNumber', 'Value': 254725090103}]}}}}"}
2024-09-10 17:41:09,058 - INFO - {'updated_data': 'callback data began'}
2024-09-10 17:41:09,058 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793812754', 'CheckoutRequestID': 'ws_CO_10092024204052140725090103', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 65000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA15RV8RD'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910204101}, {'Name': 'PhoneNumber', 'Value': 254725090103}]}}}}}
2024-09-10 17:41:09,226 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 17:41:09,430 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 17:41:09,431 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 17:41:09,960 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:43:18,863 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:43:18,981 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:43:18,982 - INFO - there is a test coming
2024-09-10 17:43:18,982 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 17:43:19,034 - INFO - {'updated_data': 'the data is now as 254743785732'}
2024-09-10 17:43:19,035 - INFO - the data is now as 254743785732
2024-09-10 17:43:19,090 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 17:43:19,090 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 17:43:19,092 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:43:19,659 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:43:19,661 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer dtkCHw6Ncy2X1aRzFgAFL9UIsQ8P'}"}
2024-09-10 17:43:19,662 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTc0MzE5', 'Timestamp': '20240910174319', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254743785732', 'PartyB': 899885, 'PhoneNumber': '254743785732', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054201', 'TransactionDesc': 'Some payment'}
2024-09-10 17:43:19,663 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:43:20,706 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 17:43:20,713 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170948584', 'CheckoutRequestID': 'ws_CO_10092024204320214743785732', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 17:43:28,203 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:43:28,358 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:43:28,359 - INFO - {'updated': 'initiated stk query for ws_CO_10092024204317013728765884 827142 '}
2024-09-10 17:43:28,409 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:43:28,981 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:43:28,983 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 7m8QqpIouhJhQcGgRBHGALhF7eZp'}"}
2024-09-10 17:43:28,984 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTc0MzI4', 'Timestamp': '20240910174328', 'CheckoutRequestID': 'ws_CO_10092024204317013728765884'}"}
2024-09-10 17:43:28,984 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:43:36,221 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 429 221
2024-09-10 17:43:36,222 - INFO - {'updated': "Received response {'fault': {'faultstring': 'Spike arrest violation. Allowed rate : MessageRate{messagesPerPeriod=25, periodInMicroseconds=1000000, maxBurstMessageCount=2.5}', 'detail': {'errorcode': 'policies.ratelimit.SpikeArrestViolation'}}} for ws_CO_10092024204317013728765884 827142"}
2024-09-10 17:43:36,224 - WARNING - Too Many Requests: /api/v1/stk/query/
2024-09-10 17:48:02,318 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:48:02,501 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:48:02,502 - INFO - {'updated': 'initiated stk query for ws_CO_10092024204749288713299519 899885 '}
2024-09-10 17:48:02,569 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:48:03,144 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:48:03,146 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer jyT0PzGLPA6YX3EthhPY4z7W2gyE'}"}
2024-09-10 17:48:03,146 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTc0ODAy', 'Timestamp': '20240910174802', 'CheckoutRequestID': 'ws_CO_10092024204749288713299519'}"}
2024-09-10 17:48:03,147 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:48:03,776 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 17:48:03,776 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024204749288713299519', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024204749288713299519 899885"}
2024-09-10 17:48:03,779 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 17:52:20,634 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:52:20,769 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:52:20,769 - INFO - there is a test coming
2024-09-10 17:52:20,769 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 17:52:20,810 - INFO - {'updated_data': 'the data is now as 254720398511'}
2024-09-10 17:52:20,810 - INFO - the data is now as 254720398511
2024-09-10 17:52:20,834 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 17:52:20,834 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 17:52:20,835 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:52:21,515 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:52:21,517 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer VLcQidMoKEY2AAxopK0VZMPz24xs'}"}
2024-09-10 17:52:21,518 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTc1MjIx', 'Timestamp': '20240910175221', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254720398511', 'PartyB': 827142, 'PhoneNumber': '254720398511', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-28710', 'TransactionDesc': 'Some payment'}
2024-09-10 17:52:21,521 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:52:23,197 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 17:52:23,203 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170249871', 'CheckoutRequestID': 'ws_CO_10092024205222141720398511', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 17:56:25,825 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:56:26,004 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:56:26,004 - INFO - {'updated': 'initiated stk query for ws_CO_10092024205603317706813228 827142 '}
2024-09-10 17:56:26,084 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:56:26,745 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:56:26,747 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer jH3ANXKClkjfOr7kwO004pdWR52y'}"}
2024-09-10 17:56:26,747 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTc1NjI2', 'Timestamp': '20240910175626', 'CheckoutRequestID': 'ws_CO_10092024205603317706813228'}"}
2024-09-10 17:56:26,748 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:56:27,394 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 17:56:27,394 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88165062', 'CheckoutRequestID': 'ws_CO_10092024205603317706813228', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024205603317706813228 827142"}
2024-09-10 17:56:27,564 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 17:56:27,757 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 17:56:27,758 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 17:56:27,982 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:57:33,191 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:57:33,343 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:57:33,344 - INFO - {'updated': 'initiated stk query for ws_CO_10092024205721486722973511 827142 '}
2024-09-10 17:57:33,423 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:57:34,097 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:57:34,099 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer SBQcqBGe8wlyBOx0Gd5ywsoOjYfe'}"}
2024-09-10 17:57:34,100 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTc1NzMz', 'Timestamp': '20240910175733', 'CheckoutRequestID': 'ws_CO_10092024205721486722973511'}"}
2024-09-10 17:57:34,103 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:57:54,634 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 388
2024-09-10 17:57:54,635 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208793856996', 'CheckoutRequestID': 'ws_CO_10092024205721486722973511', 'ResultCode': '1', 'ResultDesc': 'The balance is insufficient for the transaction.'} for ws_CO_10092024205721486722973511 827142"}
2024-09-10 17:57:54,809 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 17:57:55,004 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 17:57:55,006 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 17:57:55,213 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:58:22,422 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:58:22,682 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:58:22,683 - INFO - there is a test coming
2024-09-10 17:58:22,686 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 17:58:22,735 - INFO - {'updated_data': 'the data is now as 254712548848'}
2024-09-10 17:58:22,736 - INFO - the data is now as 254712548848
2024-09-10 17:58:22,754 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 17:58:22,755 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 17:58:22,756 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:58:23,468 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:58:23,470 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 7DzaHJDONBTXjbqTOsq6T1d29R1r'}"}
2024-09-10 17:58:23,471 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTc1ODIz', 'Timestamp': '20240910175823', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254712548848', 'PartyB': 899885, 'PhoneNumber': '254712548848', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054204', 'TransactionDesc': 'Some payment'}
2024-09-10 17:58:23,472 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:59:44,527 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 17:59:44,533 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b517627434', 'CheckoutRequestID': 'ws_CO_10092024205942244712548848', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 18:00:36,851 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 18:00:36,983 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 18:00:36,984 - INFO - {'updated': 'initiated stk query for ws_CO_10092024210008482701648555 827142 '}
2024-09-10 18:00:37,074 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:00:37,659 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 18:00:37,661 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 6lYFRiTLCXeV5eQcAjEo0GTt3fGe'}"}
2024-09-10 18:00:37,662 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTgwMDM3', 'Timestamp': '20240910180037', 'CheckoutRequestID': 'ws_CO_10092024210008482701648555'}"}
2024-09-10 18:00:37,663 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:00:38,660 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 18:00:38,660 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b7189697', 'CheckoutRequestID': 'ws_CO_10092024210008482701648555', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024210008482701648555 827142"}
2024-09-10 18:00:38,942 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 18:00:39,137 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 18:00:39,138 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 18:00:39,678 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 18:00:47,995 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 18:00:48,118 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 18:00:48,119 - INFO - there is a test coming
2024-09-10 18:00:48,119 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 18:00:48,161 - INFO - {'updated_data': 'the data is now as 254719608573'}
2024-09-10 18:00:48,162 - INFO - the data is now as 254719608573
2024-09-10 18:00:48,178 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 18:00:48,178 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 18:00:48,179 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:00:48,753 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 18:00:48,756 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer vrNGobkXBv8FINjcHMszKTi2VRvC'}"}
2024-09-10 18:00:48,756 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTgwMDQ4', 'Timestamp': '20240910180048', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5200', 'PartyA': '254719608573', 'PartyB': 827142, 'PhoneNumber': '254719608573', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-29230', 'TransactionDesc': 'Some payment'}
2024-09-10 18:00:48,758 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:00:49,908 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 18:00:49,914 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170507847', 'CheckoutRequestID': 'ws_CO_10092024210049291719608573', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 18:01:30,280 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170507847', 'CheckoutRequestID': 'ws_CO_10092024210049291719608573', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA55V8OGB'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910210103}, {'Name': 'PhoneNumber', 'Value': 254719608573}]}}}}"}
2024-09-10 18:01:30,280 - INFO - {'updated_data': 'callback data began'}
2024-09-10 18:01:30,280 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170507847', 'CheckoutRequestID': 'ws_CO_10092024210049291719608573', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA55V8OGB'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910210103}, {'Name': 'PhoneNumber', 'Value': 254719608573}]}}}}}
2024-09-10 18:01:30,469 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 18:01:31,209 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 18:01:31,210 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 18:01:31,523 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 18:01:48,781 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 18:01:48,962 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 18:01:48,963 - INFO - there is a test coming
2024-09-10 18:01:48,963 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 18:01:49,014 - INFO - {'updated_data': 'the data is now as 254710148253'}
2024-09-10 18:01:49,014 - INFO - the data is now as 254710148253
2024-09-10 18:01:49,035 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 18:01:49,035 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 18:01:49,036 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:01:49,759 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 18:01:49,761 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 8UCFHZ1RGB1nAFJyoAjMfcpNYGrz'}"}
2024-09-10 18:01:49,762 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTgwMTQ5', 'Timestamp': '20240910180149', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254710148253', 'PartyB': 899885, 'PhoneNumber': '254710148253', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054205', 'TransactionDesc': 'Some payment'}
2024-09-10 18:01:49,763 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:01:50,984 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 18:01:50,990 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc17639854', 'CheckoutRequestID': 'ws_CO_10092024210150489710148253', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 18:02:51,213 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 18:02:51,363 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 18:02:51,363 - INFO - there is a test coming
2024-09-10 18:02:51,364 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 18:02:51,433 - INFO - {'updated_data': 'the data is now as 254713299519'}
2024-09-10 18:02:51,433 - INFO - the data is now as 254713299519
2024-09-10 18:02:51,455 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 18:02:51,456 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 18:02:51,457 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:02:54,186 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 18:02:54,197 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer WuF58UU97QVLsTbibcTkVU6IzwbM'}"}
2024-09-10 18:02:54,198 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTgwMjU0', 'Timestamp': '20240910180254', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254713299519', 'PartyB': 899885, 'PhoneNumber': '254713299519', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Order No . 14014', 'TransactionDesc': 'Some payment'}
2024-09-10 18:02:54,203 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:02:56,964 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 18:02:56,972 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b7201982', 'CheckoutRequestID': 'ws_CO_10092024210254790713299519', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 18:05:47,024 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 18:05:47,217 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 18:05:47,218 - INFO - there is a test coming
2024-09-10 18:05:47,218 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 18:05:47,272 - INFO - {'updated_data': 'the data is now as 254713923413'}
2024-09-10 18:05:47,272 - INFO - the data is now as 254713923413
2024-09-10 18:05:47,290 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 18:05:47,290 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 18:05:47,291 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:05:47,996 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 18:05:47,998 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer gZ2Rnzu3QdJvX3LARk5jWeF5j7FY'}"}
2024-09-10 18:05:47,999 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTgwNTQ3', 'Timestamp': '20240910180547', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254713923413', 'PartyB': 827142, 'PhoneNumber': '254713923413', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-22906', 'TransactionDesc': 'Some payment'}
2024-09-10 18:05:48,000 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:05:49,026 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 18:05:49,033 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170285097', 'CheckoutRequestID': 'ws_CO_10092024210548648713923413', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 18:09:29,855 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 18:09:29,977 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 18:09:29,978 - INFO - {'updated': 'initiated stk query for ws_CO_10092024210857483799317975 899885 '}
2024-09-10 18:09:30,046 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:09:30,923 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 18:09:30,925 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer gskcAQ6foyCZStCsX6Oc2GcCZdiN'}"}
2024-09-10 18:09:30,925 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTgwOTMw', 'Timestamp': '20240910180930', 'CheckoutRequestID': 'ws_CO_10092024210857483799317975'}"}
2024-09-10 18:09:30,935 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:09:32,451 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 18:09:32,451 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170294176', 'CheckoutRequestID': 'ws_CO_10092024210857483799317975', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024210857483799317975 899885"}
2024-09-10 18:09:32,705 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 18:09:33,169 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 18:09:33,171 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 18:09:33,378 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 18:09:35,885 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170294176', 'CheckoutRequestID': 'ws_CO_10092024210857483799317975', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 30000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA15WIBE1'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910210907}, {'Name': 'PhoneNumber', 'Value': 254799317975}]}}}}"}
2024-09-10 18:09:35,885 - INFO - {'updated_data': 'callback data began'}
2024-09-10 18:09:35,885 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170294176', 'CheckoutRequestID': 'ws_CO_10092024210857483799317975', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 30000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA15WIBE1'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910210907}, {'Name': 'PhoneNumber', 'Value': 254799317975}]}}}}}
2024-09-10 18:09:36,085 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 18:09:36,299 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 18:09:36,300 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 18:09:36,526 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 18:10:45,106 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88203158', 'CheckoutRequestID': 'ws_CO_10092024211015097701746976', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA85WPHXQ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910211025}, {'Name': 'PhoneNumber', 'Value': 254701746976}]}}}}"}
2024-09-10 18:10:45,107 - INFO - {'updated_data': 'callback data began'}
2024-09-10 18:10:45,107 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88203158', 'CheckoutRequestID': 'ws_CO_10092024211015097701746976', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA85WPHXQ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910211025}, {'Name': 'PhoneNumber', 'Value': 254701746976}]}}}}}
2024-09-10 18:10:45,283 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 18:10:45,781 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 18:10:45,783 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 18:10:46,009 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 18:40:22,619 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 18:40:22,742 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 18:40:22,743 - INFO - {'updated': 'initiated stk query for ws_CO_10092024214010997718775622 827142 '}
2024-09-10 18:40:22,805 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:40:23,467 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 18:40:23,469 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer SU2bh7ZzUApJvBtGX1s7IIQZruC2'}"}
2024-09-10 18:40:23,469 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTg0MDIy', 'Timestamp': '20240910184022', 'CheckoutRequestID': 'ws_CO_10092024214010997718775622'}"}
2024-09-10 18:40:23,470 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:40:24,203 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 18:40:24,204 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024214010997718775622', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024214010997718775622 827142"}
2024-09-10 18:40:24,205 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 18:41:12,706 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 18:41:12,874 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 18:41:12,875 - INFO - {'updated': 'initiated stk query for ws_CO_10092024214010997718775622 827142 '}
2024-09-10 18:41:12,934 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:41:13,511 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 18:41:13,514 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer disysVP1dGeGoAGLHnnJOEFbAtN8'}"}
2024-09-10 18:41:13,514 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTg0MTEy', 'Timestamp': '20240910184112', 'CheckoutRequestID': 'ws_CO_10092024214010997718775622'}"}
2024-09-10 18:41:13,515 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:41:14,247 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 18:41:14,248 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee597731398', 'CheckoutRequestID': 'ws_CO_10092024214010997718775622', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024214010997718775622 827142"}
2024-09-10 18:41:14,395 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 18:41:14,580 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 18:41:14,582 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 18:41:14,793 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 18:42:41,538 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 18:42:41,699 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 18:42:41,700 - INFO - {'updated': 'initiated stk query for ws_CO_10092024214229847718775622 827142 '}
2024-09-10 18:42:41,817 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:42:42,577 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 18:42:42,579 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer B7j2n17YIEXijxthVanmwdQllaoU'}"}
2024-09-10 18:42:42,579 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTg0MjQx', 'Timestamp': '20240910184241', 'CheckoutRequestID': 'ws_CO_10092024214229847718775622'}"}
2024-09-10 18:42:42,581 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:42:43,751 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 18:42:43,752 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024214229847718775622', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024214229847718775622 827142"}
2024-09-10 18:42:43,755 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 19:07:28,092 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:07:28,248 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:07:28,249 - INFO - there is a test coming
2024-09-10 19:07:28,249 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 19:07:28,293 - INFO - {'updated_data': 'the data is now as 254711677810'}
2024-09-10 19:07:28,293 - INFO - the data is now as 254711677810
2024-09-10 19:07:28,316 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 19:07:28,316 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 19:07:28,317 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:07:29,336 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:07:29,337 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer p90j1RGujjxaUsSEcCvcjAD8mQOg'}"}
2024-09-10 19:07:29,338 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTkwNzI5', 'Timestamp': '20240910190729', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '23464', 'PartyA': '254711677810', 'PartyB': 899885, 'PhoneNumber': '254711677810', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054097', 'TransactionDesc': 'Some payment'}
2024-09-10 19:07:29,339 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:07:30,419 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 341
2024-09-10 19:07:30,433 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a318447038', 'CheckoutRequestID': 'ws_CO_10092024220730142711677810', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 19:09:08,687 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171155660', 'CheckoutRequestID': 'ws_CO_10092024220856813721949580', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2750.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA864CUBK'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910220908}, {'Name': 'PhoneNumber', 'Value': 254721949580}]}}}}"}
2024-09-10 19:09:08,695 - INFO - {'updated_data': 'callback data began'}
2024-09-10 19:09:08,695 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171155660', 'CheckoutRequestID': 'ws_CO_10092024220856813721949580', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2750.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA864CUBK'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910220908}, {'Name': 'PhoneNumber', 'Value': 254721949580}]}}}}}
2024-09-10 19:09:08,856 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:09:09,510 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:09:09,512 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:09:09,843 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:09:16,812 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88338016', 'CheckoutRequestID': 'ws_CO_10092024220903975721710014', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA664DMA6'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910220916}, {'Name': 'PhoneNumber', 'Value': 254721710014}]}}}}"}
2024-09-10 19:09:16,812 - INFO - {'updated_data': 'callback data began'}
2024-09-10 19:09:16,812 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88338016', 'CheckoutRequestID': 'ws_CO_10092024220903975721710014', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA664DMA6'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910220916}, {'Name': 'PhoneNumber', 'Value': 254721710014}]}}}}}
2024-09-10 19:09:16,978 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:09:17,244 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:09:17,245 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:09:17,552 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:18:57,889 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88354233', 'CheckoutRequestID': 'ws_CO_10092024221844753794264555', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 30.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA9659WXJ'}, {'Name': 'TransactionDate', 'Value': 20240910221857}, {'Name': 'PhoneNumber', 'Value': 254794264555}]}}}}"}
2024-09-10 19:18:57,890 - INFO - {'updated_data': 'callback data began'}
2024-09-10 19:18:57,890 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88354233', 'CheckoutRequestID': 'ws_CO_10092024221844753794264555', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 30.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA9659WXJ'}, {'Name': 'TransactionDate', 'Value': 20240910221857}, {'Name': 'PhoneNumber', 'Value': 254794264555}]}}}}}
2024-09-10 19:18:58,093 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:18:58,284 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:18:58,286 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:18:58,802 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:19:05,416 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:19:05,571 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:19:05,571 - INFO - {'updated': 'initiated stk query for ws_CO_10092024221844753794264555 827142 '}
2024-09-10 19:19:05,640 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:19:06,207 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:19:06,209 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer XgP6LkbuAvGnz92ArpoR6CAaePvo'}"}
2024-09-10 19:19:06,209 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTkxOTA1', 'Timestamp': '20240910191905', 'CheckoutRequestID': 'ws_CO_10092024221844753794264555'}"}
2024-09-10 19:19:06,211 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:19:06,952 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 19:19:06,952 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88354233', 'CheckoutRequestID': 'ws_CO_10092024221844753794264555', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024221844753794264555 827142"}
2024-09-10 19:19:07,079 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:19:07,356 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:19:07,358 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:19:07,594 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:23:35,993 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:23:36,156 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:23:36,157 - INFO - {'updated': 'initiated stk query for ws_CO_10092024222324802723342998 827142 '}
2024-09-10 19:23:36,212 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:23:36,781 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:23:36,783 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Ki2lmJYhGrHsnQha4gekBuw9JAFA'}"}
2024-09-10 19:23:36,783 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTkyMzM2', 'Timestamp': '20240910192336', 'CheckoutRequestID': 'ws_CO_10092024222324802723342998'}"}
2024-09-10 19:23:36,784 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:23:37,399 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 19:23:37,400 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024222324802723342998', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024222324802723342998 827142"}
2024-09-10 19:23:37,403 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 19:24:50,621 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:24:50,783 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:24:50,783 - INFO - {'updated': 'initiated stk query for ws_CO_10092024222439444723494571 827142 '}
2024-09-10 19:24:50,874 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:24:51,563 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:24:51,565 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer bsvVxPaZ4Yl6Dtj9FAaduANfCouA'}"}
2024-09-10 19:24:51,565 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTkyNDUw', 'Timestamp': '20240910192450', 'CheckoutRequestID': 'ws_CO_10092024222439444723494571'}"}
2024-09-10 19:24:51,567 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:24:52,161 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 19:24:52,161 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024222439444723494571', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024222439444723494571 827142"}
2024-09-10 19:24:52,164 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 19:26:54,739 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170696062', 'CheckoutRequestID': 'ws_CO_10092024222644607724653690', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA465YSRO'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910222654}, {'Name': 'PhoneNumber', 'Value': 254724653690}]}}}}"}
2024-09-10 19:26:54,739 - INFO - {'updated_data': 'callback data began'}
2024-09-10 19:26:54,739 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170696062', 'CheckoutRequestID': 'ws_CO_10092024222644607724653690', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA465YSRO'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910222654}, {'Name': 'PhoneNumber', 'Value': 254724653690}]}}}}}
2024-09-10 19:26:54,929 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:26:55,126 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:26:55,128 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:26:55,665 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:27:15,987 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88366167', 'CheckoutRequestID': 'ws_CO_10092024222653891746574009', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-10 19:27:15,988 - INFO - {'updated_data': 'callback data began'}
2024-09-10 19:27:15,988 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88366167', 'CheckoutRequestID': 'ws_CO_10092024222653891746574009', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-10 19:27:16,177 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:27:16,668 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:27:16,671 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:27:16,901 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:27:17,066 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:27:17,241 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:27:17,242 - INFO - {'updated': 'initiated stk query for ws_CO_10092024222653891746574009 899885 '}
2024-09-10 19:27:17,324 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:27:17,927 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:27:17,929 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer PwBUwL38n6jkbp3ny6jaLv8BVGNd'}"}
2024-09-10 19:27:17,929 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTkyNzE3', 'Timestamp': '20240910192717', 'CheckoutRequestID': 'ws_CO_10092024222653891746574009'}"}
2024-09-10 19:27:17,930 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:27:18,559 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-10 19:27:18,560 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88366167', 'CheckoutRequestID': 'ws_CO_10092024222653891746574009', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_10092024222653891746574009 899885"}
2024-09-10 19:27:18,708 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:27:18,906 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:27:18,908 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:27:19,207 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:28:33,593 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:28:33,711 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:28:33,711 - INFO - there is a test coming
2024-09-10 19:28:33,711 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 19:28:33,753 - INFO - {'updated_data': 'the data is now as 254798241100'}
2024-09-10 19:28:33,753 - INFO - the data is now as 254798241100
2024-09-10 19:28:33,768 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 19:28:33,769 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 19:28:33,770 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:28:34,439 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:28:34,441 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer TpYv9YwlL9HVHNV9LHJKaxe4IyAW'}"}
2024-09-10 19:28:34,442 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTkyODM0', 'Timestamp': '20240910192834', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '500', 'PartyA': '254798241100', 'PartyB': 827142, 'PhoneNumber': '254798241100', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-48656', 'TransactionDesc': 'Some payment'}
2024-09-10 19:28:34,443 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:28:35,197 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 19:28:35,210 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171186650', 'CheckoutRequestID': 'ws_CO_10092024222834986798241100', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 19:28:49,219 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:28:49,368 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:28:49,369 - INFO - there is a test coming
2024-09-10 19:28:49,369 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 19:28:49,418 - INFO - {'updated_data': 'the data is now as 254746574009'}
2024-09-10 19:28:49,418 - INFO - the data is now as 254746574009
2024-09-10 19:28:49,434 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 19:28:49,435 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 19:28:49,436 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:28:50,021 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:28:50,023 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer T35v8hxjXrInj7XpH5zAWLIirscI'}"}
2024-09-10 19:28:50,024 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTkyODUw', 'Timestamp': '20240910192850', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254746574009', 'PartyB': 899885, 'PhoneNumber': '254746574009', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054214', 'TransactionDesc': 'Some payment'}
2024-09-10 19:28:50,025 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:28:50,887 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 19:28:50,893 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170463215', 'CheckoutRequestID': 'ws_CO_10092024222850633746574009', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 19:29:04,662 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170463215', 'CheckoutRequestID': 'ws_CO_10092024222850633746574009', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA1665HUR'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910222904}, {'Name': 'PhoneNumber', 'Value': 254746574009}]}}}}"}
2024-09-10 19:29:04,662 - INFO - {'updated_data': 'callback data began'}
2024-09-10 19:29:04,662 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170463215', 'CheckoutRequestID': 'ws_CO_10092024222850633746574009', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA1665HUR'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910222904}, {'Name': 'PhoneNumber', 'Value': 254746574009}]}}}}}
2024-09-10 19:29:04,819 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:29:05,319 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:29:05,321 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:29:05,554 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:30:03,729 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:30:03,744 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 19:30:03,745 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 19:32:49,860 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:32:50,073 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:32:50,073 - INFO - {'updated': 'initiated stk query for ws_CO_10092024223238677700112406 827142 '}
2024-09-10 19:32:50,154 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:32:50,755 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:32:50,757 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer GBXCvHBNhEDEqbGp6SpnGeKEe0Yr'}"}
2024-09-10 19:32:50,758 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTkzMjUw', 'Timestamp': '20240910193250', 'CheckoutRequestID': 'ws_CO_10092024223238677700112406'}"}
2024-09-10 19:32:50,759 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:32:51,412 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 19:32:51,413 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc18051093', 'CheckoutRequestID': 'ws_CO_10092024223238677700112406', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024223238677700112406 827142"}
2024-09-10 19:32:51,542 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:32:51,731 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:32:51,732 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:32:52,241 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:33:32,150 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:33:32,320 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:33:32,321 - INFO - {'updated': 'initiated stk query for ws_CO_10092024223230815710461538 899885 '}
2024-09-10 19:33:32,387 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:33:32,938 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:33:32,941 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer fsmQASYK3JCxgGkAevx93mNgRHkd'}"}
2024-09-10 19:33:32,941 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTkzMzMy', 'Timestamp': '20240910193332', 'CheckoutRequestID': 'ws_CO_10092024223230815710461538'}"}
2024-09-10 19:33:32,942 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:33:33,562 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 19:33:33,563 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208794063137', 'CheckoutRequestID': 'ws_CO_10092024223230815710461538', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024223230815710461538 899885"}
2024-09-10 19:33:33,727 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:33:33,920 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:33:33,922 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:33:34,466 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:33:35,077 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:33:35,091 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 19:33:35,091 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 19:35:25,396 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585054027359', 'CheckoutRequestID': 'ws_CO_10092024223511849703168002', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA266NGC4'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910223524}, {'Name': 'PhoneNumber', 'Value': 254703168002}]}}}}"}
2024-09-10 19:35:25,396 - INFO - {'updated_data': 'callback data began'}
2024-09-10 19:35:25,396 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585054027359', 'CheckoutRequestID': 'ws_CO_10092024223511849703168002', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA266NGC4'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910223524}, {'Name': 'PhoneNumber', 'Value': 254703168002}]}}}}}
2024-09-10 19:35:25,619 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:35:25,833 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:35:25,834 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:35:26,069 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:35:42,240 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88378101', 'CheckoutRequestID': 'ws_CO_10092024223522433724808486', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA366O8TF'}, {'Name': 'TransactionDate', 'Value': 20240910223541}, {'Name': 'PhoneNumber', 'Value': 254724808486}]}}}}"}
2024-09-10 19:35:42,241 - INFO - {'updated_data': 'callback data began'}
2024-09-10 19:35:42,241 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88378101', 'CheckoutRequestID': 'ws_CO_10092024223522433724808486', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA366O8TF'}, {'Name': 'TransactionDate', 'Value': 20240910223541}, {'Name': 'PhoneNumber', 'Value': 254724808486}]}}}}}
2024-09-10 19:35:42,417 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:35:42,990 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:35:42,992 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:35:43,229 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:35:43,332 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:35:43,481 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:35:43,482 - INFO - {'updated': 'initiated stk query for ws_CO_10092024223511849703168002 899885 '}
2024-09-10 19:35:43,561 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:35:44,155 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:35:44,157 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer uMiAPkm0KO9N1r9wRcq1HaqqVItU'}"}
2024-09-10 19:35:44,157 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTkzNTQz', 'Timestamp': '20240910193543', 'CheckoutRequestID': 'ws_CO_10092024223511849703168002'}"}
2024-09-10 19:35:44,159 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:35:44,767 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 19:35:44,767 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585054027359', 'CheckoutRequestID': 'ws_CO_10092024223511849703168002', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024223511849703168002 899885"}
2024-09-10 19:35:44,891 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:35:45,107 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:35:45,110 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:35:45,326 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:36:46,469 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88380077', 'CheckoutRequestID': 'ws_CO_10092024223637935746574009', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA666QZYO'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910223645}, {'Name': 'PhoneNumber', 'Value': 254746574009}]}}}}"}
2024-09-10 19:36:46,470 - INFO - {'updated_data': 'callback data began'}
2024-09-10 19:36:46,470 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88380077', 'CheckoutRequestID': 'ws_CO_10092024223637935746574009', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA666QZYO'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910223645}, {'Name': 'PhoneNumber', 'Value': 254746574009}]}}}}}
2024-09-10 19:36:46,649 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:36:47,160 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:36:47,161 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:36:47,399 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:36:49,027 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:36:49,146 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:36:49,147 - INFO - {'updated': 'initiated stk query for ws_CO_10092024223637935746574009 899885 '}
2024-09-10 19:36:49,213 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:36:49,773 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:36:49,775 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer D2QN5bEVsVLacixAsC0ldYBTAAv1'}"}
2024-09-10 19:36:49,776 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTkzNjQ5', 'Timestamp': '20240910193649', 'CheckoutRequestID': 'ws_CO_10092024223637935746574009'}"}
2024-09-10 19:36:49,777 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:36:50,405 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 19:36:50,406 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88380077', 'CheckoutRequestID': 'ws_CO_10092024223637935746574009', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024223637935746574009 899885"}
2024-09-10 19:36:50,539 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:36:50,734 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:36:50,736 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:36:51,004 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:37:02,661 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:37:02,823 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:37:02,823 - INFO - {'updated': 'initiated stk query for ws_CO_10092024223650864712077876 827142 '}
2024-09-10 19:37:02,901 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:37:03,465 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:37:03,467 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Zdqmg71n0wZXBrqwIsJlX7KiVCsw'}"}
2024-09-10 19:37:03,468 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTkzNzAy', 'Timestamp': '20240910193702', 'CheckoutRequestID': 'ws_CO_10092024223650864712077876'}"}
2024-09-10 19:37:03,469 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:37:04,141 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 19:37:04,142 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024223650864712077876', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024223650864712077876 827142"}
2024-09-10 19:37:04,144 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 19:37:17,025 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170474632', 'CheckoutRequestID': 'ws_CO_10092024223650864712077876', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA866S56M'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910223716}, {'Name': 'PhoneNumber', 'Value': 254712077876}]}}}}"}
2024-09-10 19:37:17,026 - INFO - {'updated_data': 'callback data began'}
2024-09-10 19:37:17,026 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170474632', 'CheckoutRequestID': 'ws_CO_10092024223650864712077876', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA866S56M'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910223716}, {'Name': 'PhoneNumber', 'Value': 254712077876}]}}}}}
2024-09-10 19:37:17,202 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:37:17,771 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:37:17,772 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:37:17,985 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:37:41,883 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:37:42,052 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:37:42,053 - INFO - {'updated': 'initiated stk query for ws_CO_10092024223650864712077876 827142 '}
2024-09-10 19:37:42,117 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:37:42,881 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:37:42,883 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ltXdFuXVBBTvTpFmYMqO2GvPWK5j'}"}
2024-09-10 19:37:42,884 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTkzNzQy', 'Timestamp': '20240910193742', 'CheckoutRequestID': 'ws_CO_10092024223650864712077876'}"}
2024-09-10 19:37:42,885 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:37:43,574 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 19:37:43,574 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170474632', 'CheckoutRequestID': 'ws_CO_10092024223650864712077876', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024223650864712077876 827142"}
2024-09-10 19:37:43,725 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:37:44,294 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:37:44,296 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:37:44,501 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:37:59,345 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:37:59,511 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:37:59,512 - INFO - there is a test coming
2024-09-10 19:37:59,512 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 19:37:59,632 - INFO - {'updated_data': 'the data is now as 254727814297'}
2024-09-10 19:37:59,633 - INFO - the data is now as 254727814297
2024-09-10 19:37:59,665 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 19:37:59,665 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 19:37:59,667 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:38:00,232 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:38:00,234 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer AY7ayQqzSqBr5c2FvxIuCTbC0BBh'}"}
2024-09-10 19:38:00,235 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTkzODAw', 'Timestamp': '20240910193800', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254727814297', 'PartyB': 827142, 'PhoneNumber': '254727814297', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-19125', 'TransactionDesc': 'Some payment'}
2024-09-10 19:38:00,237 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:38:00,971 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 19:38:00,978 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076388748', 'CheckoutRequestID': 'ws_CO_10092024223800759727814297', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 19:42:22,900 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:42:23,046 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:42:23,047 - INFO - there is a test coming
2024-09-10 19:42:23,047 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 19:42:23,100 - INFO - {'updated_data': 'the data is now as 254721628460'}
2024-09-10 19:42:23,100 - INFO - the data is now as 254721628460
2024-09-10 19:42:23,125 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 19:42:23,125 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 19:42:23,127 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:42:23,850 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:42:23,852 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer MVaqtn4b24Clad5VCXQS6GJTmdak'}"}
2024-09-10 19:42:23,853 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTk0MjIz', 'Timestamp': '20240910194223', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '20080', 'PartyA': '254721628460', 'PartyB': 827142, 'PhoneNumber': '254721628460', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '125-14690', 'TransactionDesc': 'Some payment'}
2024-09-10 19:42:23,854 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:42:24,628 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 19:42:24,634 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518085820', 'CheckoutRequestID': 'ws_CO_10092024224224393721628460', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 19:42:46,270 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518085820', 'CheckoutRequestID': 'ws_CO_10092024224224393721628460', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20080.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA7676WVF'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910224245}, {'Name': 'PhoneNumber', 'Value': 254721628460}]}}}}"}
2024-09-10 19:42:46,270 - INFO - {'updated_data': 'callback data began'}
2024-09-10 19:42:46,271 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518085820', 'CheckoutRequestID': 'ws_CO_10092024224224393721628460', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20080.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA7676WVF'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910224245}, {'Name': 'PhoneNumber', 'Value': 254721628460}]}}}}}
2024-09-10 19:42:46,471 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:42:46,983 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:42:46,985 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:42:47,523 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:43:43,273 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:43:43,454 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:43:43,455 - INFO - there is a test coming
2024-09-10 19:43:43,455 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 19:43:43,500 - INFO - {'updated_data': 'the data is now as 254721628460'}
2024-09-10 19:43:43,500 - INFO - the data is now as 254721628460
2024-09-10 19:43:43,524 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 19:43:43,524 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 19:43:43,525 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:43:44,216 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:43:44,218 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer DLzmAc4AuFYI5HYSa9HVw2piLzlJ'}"}
2024-09-10 19:43:44,219 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTk0MzQ0', 'Timestamp': '20240910194344', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '22083', 'PartyA': '254721628460', 'PartyB': 827142, 'PhoneNumber': '254721628460', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '125-14691', 'TransactionDesc': 'Some payment'}
2024-09-10 19:43:44,220 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:43:46,994 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 19:43:47,001 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208794078633', 'CheckoutRequestID': 'ws_CO_10092024224344716721628460', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 19:43:47,184 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:43:47,325 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:43:47,326 - INFO - {'updated': 'initiated stk query for ws_CO_10092024224335875703495721 827142 '}
2024-09-10 19:43:47,384 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:43:47,963 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:43:47,965 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer oXsDlA42eXCNpm4IFmkGuT5Jsz5z'}"}
2024-09-10 19:43:47,965 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTk0MzQ3', 'Timestamp': '20240910194347', 'CheckoutRequestID': 'ws_CO_10092024224335875703495721'}"}
2024-09-10 19:43:47,967 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:43:48,598 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 19:43:48,599 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024224335875703495721', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024224335875703495721 827142"}
2024-09-10 19:43:48,601 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 19:43:57,636 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:43:57,789 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:43:57,790 - INFO - {'updated': 'initiated stk query for ws_CO_10092024224344716721628460 827142 '}
2024-09-10 19:43:57,867 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:43:58,569 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:43:58,571 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 3VoHNKaNE6Nd3XHwykAbKQVWUa2F'}"}
2024-09-10 19:43:58,572 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTk0MzU3', 'Timestamp': '20240910194357', 'CheckoutRequestID': 'ws_CO_10092024224344716721628460'}"}
2024-09-10 19:43:58,573 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:43:59,337 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 19:43:59,338 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208794078633', 'CheckoutRequestID': 'ws_CO_10092024224344716721628460', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024224344716721628460 827142"}
2024-09-10 19:43:59,452 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:43:59,646 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:43:59,648 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:44:00,181 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:44:41,527 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:44:41,551 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 19:44:41,551 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 19:44:47,547 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:44:47,671 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:44:47,672 - INFO - there is a test coming
2024-09-10 19:44:47,672 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 19:44:47,744 - INFO - {'updated_data': 'the data is now as 254721628460'}
2024-09-10 19:44:47,744 - INFO - the data is now as 254721628460
2024-09-10 19:44:47,767 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 19:44:47,768 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 19:44:47,769 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:44:48,370 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:44:48,373 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer w98OGcRwzy5wAdEqOJeDRF6QA3qA'}"}
2024-09-10 19:44:48,373 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTk0NDQ4', 'Timestamp': '20240910194448', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '22083', 'PartyA': '254721628460', 'PartyB': 827142, 'PhoneNumber': '254721628460', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '125-14689', 'TransactionDesc': 'Some payment'}
2024-09-10 19:44:48,377 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:44:49,149 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 19:44:49,156 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88391173', 'CheckoutRequestID': 'ws_CO_10092024224448900721628460', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 19:45:00,070 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:45:00,208 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:45:00,209 - INFO - {'updated': 'initiated stk query for ws_CO_10092024224448900721628460 827142 '}
2024-09-10 19:45:00,288 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:45:00,856 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:45:00,858 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer beJ8lfTd42efTyovOX23GCYCrYqv'}"}
2024-09-10 19:45:00,859 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTk0NTAw', 'Timestamp': '20240910194500', 'CheckoutRequestID': 'ws_CO_10092024224448900721628460'}"}
2024-09-10 19:45:00,860 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:45:01,535 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 19:45:01,536 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88391173', 'CheckoutRequestID': 'ws_CO_10092024224448900721628460', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024224448900721628460 827142"}
2024-09-10 19:45:01,704 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:45:02,227 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:45:02,228 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:45:02,825 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:45:33,256 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585054057889', 'CheckoutRequestID': 'ws_CO_10092024224500453716098478', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}"}
2024-09-10 19:45:33,257 - INFO - {'updated_data': 'callback data began'}
2024-09-10 19:45:33,257 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585054057889', 'CheckoutRequestID': 'ws_CO_10092024224500453716098478', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}}
2024-09-10 19:45:33,420 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:45:33,622 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:45:33,624 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:45:34,153 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:45:45,023 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:45:45,167 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:45:45,167 - INFO - there is a test coming
2024-09-10 19:45:45,168 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 19:45:45,225 - INFO - {'updated_data': 'the data is now as 254721628460'}
2024-09-10 19:45:45,225 - INFO - the data is now as 254721628460
2024-09-10 19:45:45,240 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 19:45:45,241 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 19:45:45,242 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:45:45,926 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:45:45,928 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer lKtVD3G7zFJVWImHZ3QkC2AfGJuA'}"}
2024-09-10 19:45:45,929 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTk0NTQ1', 'Timestamp': '20240910194545', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '22083', 'PartyA': '254721628460', 'PartyB': 827142, 'PhoneNumber': '254721628460', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '125-14692', 'TransactionDesc': 'Some payment'}
2024-09-10 19:45:45,933 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:45:47,961 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 19:45:47,967 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171210180', 'CheckoutRequestID': 'ws_CO_10092024224546454721628460', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 19:46:00,535 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171210180', 'CheckoutRequestID': 'ws_CO_10092024224546454721628460', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 22083.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA067EUPI'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910224559}, {'Name': 'PhoneNumber', 'Value': 254721628460}]}}}}"}
2024-09-10 19:46:00,535 - INFO - {'updated_data': 'callback data began'}
2024-09-10 19:46:00,535 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171210180', 'CheckoutRequestID': 'ws_CO_10092024224546454721628460', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 22083.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA067EUPI'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910224559}, {'Name': 'PhoneNumber', 'Value': 254721628460}]}}}}}
2024-09-10 19:46:00,714 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:46:00,905 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:46:00,906 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:46:01,161 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:48:51,025 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc18100746', 'CheckoutRequestID': 'ws_CO_10092024224842804113161720', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1104.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA867LKAO'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910224850}, {'Name': 'PhoneNumber', 'Value': 254113161720}]}}}}"}
2024-09-10 19:48:51,025 - INFO - {'updated_data': 'callback data began'}
2024-09-10 19:48:51,025 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc18100746', 'CheckoutRequestID': 'ws_CO_10092024224842804113161720', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1104.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA867LKAO'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910224850}, {'Name': 'PhoneNumber', 'Value': 254113161720}]}}}}}
2024-09-10 19:48:51,194 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:48:51,390 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:48:51,391 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:48:51,641 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:50:44,179 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:50:44,320 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:50:44,321 - INFO - {'updated': 'initiated stk query for ws_CO_10092024225031214724644293 827142 '}
2024-09-10 19:50:44,382 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:50:44,974 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:50:44,976 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 4NG0QXZ3ME1Za8e04UyaJJfQYK7A'}"}
2024-09-10 19:50:44,976 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTk1MDQ0', 'Timestamp': '20240910195044', 'CheckoutRequestID': 'ws_CO_10092024225031214724644293'}"}
2024-09-10 19:50:44,977 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:50:45,588 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 19:50:45,588 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585054073403', 'CheckoutRequestID': 'ws_CO_10092024225031214724644293', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024225031214724644293 827142"}
2024-09-10 19:50:45,719 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:50:45,907 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:50:45,908 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:50:46,115 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:50:47,443 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:50:47,563 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:50:47,564 - INFO - there is a test coming
2024-09-10 19:50:47,564 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 19:50:47,610 - INFO - {'updated_data': 'the data is now as 254724762691'}
2024-09-10 19:50:47,610 - INFO - the data is now as 254724762691
2024-09-10 19:50:47,660 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 19:50:47,665 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 19:50:47,667 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:50:48,345 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:50:48,347 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer CAEsZO3eE3TTLoxGQQbYWWGEdn6h'}"}
2024-09-10 19:50:48,348 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTk1MDQ4', 'Timestamp': '20240910195048', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '200', 'PartyA': '254724762691', 'PartyB': 827142, 'PhoneNumber': '254724762691', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-22383', 'TransactionDesc': 'Some payment'}
2024-09-10 19:50:48,349 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:50:49,197 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 19:50:49,203 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88398372', 'CheckoutRequestID': 'ws_CO_10092024225048857724762691', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 19:51:07,585 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88398372', 'CheckoutRequestID': 'ws_CO_10092024225048857724762691', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}"}
2024-09-10 19:51:07,585 - INFO - {'updated_data': 'callback data began'}
2024-09-10 19:51:07,585 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88398372', 'CheckoutRequestID': 'ws_CO_10092024225048857724762691', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}}
2024-09-10 19:51:07,792 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:51:08,182 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:51:08,184 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:51:08,718 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:53:51,785 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:53:51,974 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:53:51,974 - INFO - there is a test coming
2024-09-10 19:53:51,974 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 19:53:52,021 - INFO - {'updated_data': 'the data is now as 254759771245'}
2024-09-10 19:53:52,022 - INFO - the data is now as 254759771245
2024-09-10 19:53:52,052 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 19:53:52,053 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 19:53:52,070 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:53:52,828 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:53:52,830 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer BI2Dj3m93AFnRsOM6xw5ntKEiPaw'}"}
2024-09-10 19:53:52,831 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTk1MzUy', 'Timestamp': '20240910195352', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '400', 'PartyA': '254759771245', 'PartyB': 827142, 'PhoneNumber': '254759771245', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '432-46', 'TransactionDesc': 'Some payment'}
2024-09-10 19:53:52,832 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:53:53,618 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 19:53:53,624 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170731732', 'CheckoutRequestID': 'ws_CO_10092024225353376759771245', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 19:54:14,643 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:54:14,800 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:54:14,801 - INFO - {'updated': 'initiated stk query for ws_CO_10092024225353376759771245 827142 '}
2024-09-10 19:54:14,856 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:54:15,669 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:54:15,670 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer jcjXz0Wz2FlsxWT2Gl9AIWGiOi6S'}"}
2024-09-10 19:54:15,671 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTk1NDE0', 'Timestamp': '20240910195414', 'CheckoutRequestID': 'ws_CO_10092024225353376759771245'}"}
2024-09-10 19:54:15,672 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:54:16,319 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 19:54:16,320 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170731732', 'CheckoutRequestID': 'ws_CO_10092024225353376759771245', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024225353376759771245 827142"}
2024-09-10 19:54:16,436 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:54:16,947 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:54:16,950 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:54:17,180 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:57:27,266 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:57:27,423 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:57:27,424 - INFO - {'updated': 'initiated stk query for ws_CO_10092024225716140715710221 827142 '}
2024-09-10 19:57:27,502 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:57:28,093 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:57:28,095 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ADhgh3VJtuQiiwMwWuQGm0Xmk5QS'}"}
2024-09-10 19:57:28,095 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTk1NzI3', 'Timestamp': '20240910195727', 'CheckoutRequestID': 'ws_CO_10092024225716140715710221'}"}
2024-09-10 19:57:28,096 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:57:28,703 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 19:57:28,704 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024225716140715710221', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024225716140715710221 827142"}
2024-09-10 19:57:28,706 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 20:00:09,638 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88408040', 'CheckoutRequestID': 'ws_CO_10092024230000896715710221', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-10 20:00:09,639 - INFO - {'updated_data': 'callback data began'}
2024-09-10 20:00:09,639 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88408040', 'CheckoutRequestID': 'ws_CO_10092024230000896715710221', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-10 20:00:09,799 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 20:00:09,990 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 20:00:09,992 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 20:00:10,216 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 20:00:12,090 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 20:00:12,221 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 20:00:12,222 - INFO - {'updated': 'initiated stk query for ws_CO_10092024230000896715710221 827142 '}
2024-09-10 20:00:12,285 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:00:12,883 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 20:00:12,885 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer yyeGnRyIflKfwoVX31n3Xgjerb9P'}"}
2024-09-10 20:00:12,885 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMjAwMDEy', 'Timestamp': '20240910200012', 'CheckoutRequestID': 'ws_CO_10092024230000896715710221'}"}
2024-09-10 20:00:12,886 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:00:13,568 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-10 20:00:13,568 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88408040', 'CheckoutRequestID': 'ws_CO_10092024230000896715710221', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_10092024230000896715710221 827142"}
2024-09-10 20:00:13,703 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 20:00:13,890 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 20:00:13,892 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 20:00:14,121 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 20:00:50,625 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 20:00:50,772 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 20:00:50,772 - INFO - there is a test coming
2024-09-10 20:00:50,772 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 20:00:50,829 - INFO - {'updated_data': 'the data is now as 254715710221'}
2024-09-10 20:00:50,830 - INFO - the data is now as 254715710221
2024-09-10 20:00:50,855 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 20:00:50,855 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 20:00:50,856 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:00:51,444 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 20:00:51,446 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Fm1ioodQpmZn7bZR7zkiPhQlu3F3'}"}
2024-09-10 20:00:51,447 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMjAwMDUx', 'Timestamp': '20240910200051', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254715710221', 'PartyB': 827142, 'PhoneNumber': '254715710221', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-149668', 'TransactionDesc': 'Some payment'}
2024-09-10 20:00:51,448 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:00:55,982 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 20:00:55,998 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171226884', 'CheckoutRequestID': 'ws_CO_10092024230051966715710221', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 20:04:07,259 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 20:04:07,410 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 20:04:07,411 - INFO - there is a test coming
2024-09-10 20:04:07,411 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 20:04:07,464 - INFO - {'updated_data': 'the data is now as 254720568623'}
2024-09-10 20:04:07,464 - INFO - the data is now as 254720568623
2024-09-10 20:04:07,489 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 20:04:07,489 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 20:04:07,491 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:04:08,405 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 20:04:08,408 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 67pmtaoyZu1d2AXLWxkNh94HGlqy'}"}
2024-09-10 20:04:08,408 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMjAwNDA4', 'Timestamp': '20240910200408', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254720568623', 'PartyB': 827142, 'PhoneNumber': '254720568623', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-19029', 'TransactionDesc': 'Some payment'}
2024-09-10 20:04:08,410 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:04:09,290 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 20:04:09,296 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee598059250', 'CheckoutRequestID': 'ws_CO_10092024230409049720568623', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 20:04:21,457 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee598059250', 'CheckoutRequestID': 'ws_CO_10092024230409049720568623', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA368IBCN'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910230420}, {'Name': 'PhoneNumber', 'Value': 254720568623}]}}}}"}
2024-09-10 20:04:21,458 - INFO - {'updated_data': 'callback data began'}
2024-09-10 20:04:21,458 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee598059250', 'CheckoutRequestID': 'ws_CO_10092024230409049720568623', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA368IBCN'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910230420}, {'Name': 'PhoneNumber', 'Value': 254720568623}]}}}}}
2024-09-10 20:04:21,652 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 20:04:22,039 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 20:04:22,041 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 20:04:22,271 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 20:09:42,930 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 20:09:43,075 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 20:09:43,075 - INFO - there is a test coming
2024-09-10 20:09:43,076 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 20:09:43,128 - INFO - {'updated_data': 'the data is now as 254710758178'}
2024-09-10 20:09:43,128 - INFO - the data is now as 254710758178
2024-09-10 20:09:43,146 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 20:09:43,146 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 20:09:43,148 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:09:43,985 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 20:09:43,987 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer tG596qQOx3z2iOzIjVWxmK49gOTa'}"}
2024-09-10 20:09:43,988 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMjAwOTQz', 'Timestamp': '20240910200943', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1500', 'PartyA': '254710758178', 'PartyB': 899885, 'PhoneNumber': '254710758178', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054252', 'TransactionDesc': 'Some payment'}
2024-09-10 20:09:43,989 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:09:44,714 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 20:09:44,721 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518156769', 'CheckoutRequestID': 'ws_CO_10092024230944508710758178', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 20:09:54,273 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518156769', 'CheckoutRequestID': 'ws_CO_10092024230944508710758178', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA868SGZU'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910230953}, {'Name': 'PhoneNumber', 'Value': 254710758178}]}}}}"}
2024-09-10 20:09:54,273 - INFO - {'updated_data': 'callback data began'}
2024-09-10 20:09:54,273 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518156769', 'CheckoutRequestID': 'ws_CO_10092024230944508710758178', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA868SGZU'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910230953}, {'Name': 'PhoneNumber', 'Value': 254710758178}]}}}}}
2024-09-10 20:09:54,511 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 20:09:54,898 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 20:09:54,900 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 20:09:55,117 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 20:09:55,654 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 20:09:55,822 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 20:09:55,822 - INFO - {'updated': 'initiated stk query for ws_CO_10092024230944508710758178 899885 '}
2024-09-10 20:09:55,878 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:09:56,462 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 20:09:56,465 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer m3MaUYdN65YZLMEXG37NyEcxGAaR'}"}
2024-09-10 20:09:56,465 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMjAwOTU1', 'Timestamp': '20240910200955', 'CheckoutRequestID': 'ws_CO_10092024230944508710758178'}"}
2024-09-10 20:09:56,466 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:09:57,116 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 20:09:57,117 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518156769', 'CheckoutRequestID': 'ws_CO_10092024230944508710758178', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024230944508710758178 899885"}
2024-09-10 20:09:57,237 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 20:09:57,427 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 20:09:57,428 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 20:09:57,691 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 20:14:21,315 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 20:14:21,482 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 20:14:21,483 - INFO - there is a test coming
2024-09-10 20:14:21,483 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 20:14:21,527 - INFO - {'updated_data': 'the data is now as 254720568623'}
2024-09-10 20:14:21,528 - INFO - the data is now as 254720568623
2024-09-10 20:14:21,598 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 20:14:21,598 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 20:14:21,600 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:14:22,351 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 20:14:22,353 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 5QMin5izWWqLvYGVfmWZ1c0TSCHj'}"}
2024-09-10 20:14:22,353 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMjAxNDIy', 'Timestamp': '20240910201422', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '54432', 'PartyA': '254720568623', 'PartyB': 827142, 'PhoneNumber': '254720568623', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-19029', 'TransactionDesc': 'Some payment'}
2024-09-10 20:14:22,355 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:14:23,134 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 20:14:23,141 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170752980', 'CheckoutRequestID': 'ws_CO_10092024231422892720568623', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 20:14:34,344 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170752980', 'CheckoutRequestID': 'ws_CO_10092024231422892720568623', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-10 20:14:34,345 - INFO - {'updated_data': 'callback data began'}
2024-09-10 20:14:34,345 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170752980', 'CheckoutRequestID': 'ws_CO_10092024231422892720568623', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-10 20:14:34,543 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 20:14:35,037 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 20:14:35,038 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 20:14:35,265 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 20:18:40,356 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 20:18:40,497 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 20:18:40,497 - INFO - there is a test coming
2024-09-10 20:18:40,498 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 20:18:40,562 - INFO - {'updated_data': 'the data is now as 254702797215'}
2024-09-10 20:18:40,563 - INFO - the data is now as 254702797215
2024-09-10 20:18:40,581 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 20:18:40,581 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 20:18:40,582 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:18:41,202 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 20:18:41,204 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer F2e78lUkKplvF1jyQ3D2KKIO42Ru'}"}
2024-09-10 20:18:41,204 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMjAxODQx', 'Timestamp': '20240910201841', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254702797215', 'PartyB': 827142, 'PhoneNumber': '254702797215', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '169-15518', 'TransactionDesc': 'Some payment'}
2024-09-10 20:18:41,205 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:18:41,935 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 20:18:41,942 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170756702', 'CheckoutRequestID': 'ws_CO_10092024231841752702797215', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 20:18:54,583 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170756702', 'CheckoutRequestID': 'ws_CO_10092024231841752702797215', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA4697IDG'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910231853}, {'Name': 'PhoneNumber', 'Value': 254702797215}]}}}}"}
2024-09-10 20:18:54,584 - INFO - {'updated_data': 'callback data began'}
2024-09-10 20:18:54,584 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170756702', 'CheckoutRequestID': 'ws_CO_10092024231841752702797215', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA4697IDG'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910231853}, {'Name': 'PhoneNumber', 'Value': 254702797215}]}}}}}
2024-09-10 20:18:54,749 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 20:18:55,264 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 20:18:55,266 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 20:18:55,473 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 20:27:59,042 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 20:27:59,201 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 20:27:59,202 - INFO - {'updated': 'initiated stk query for ws_CO_10092024232748028727071021 827142 '}
2024-09-10 20:27:59,258 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:27:59,820 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 20:27:59,825 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 7PzzM98W7hoB3e10Ndlhs4YYy0xM'}"}
2024-09-10 20:27:59,826 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMjAyNzU5', 'Timestamp': '20240910202759', 'CheckoutRequestID': 'ws_CO_10092024232748028727071021'}"}
2024-09-10 20:27:59,837 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:28:00,467 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 20:28:00,468 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc18192304', 'CheckoutRequestID': 'ws_CO_10092024232748028727071021', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024232748028727071021 827142"}
2024-09-10 20:28:00,592 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 20:28:01,333 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 20:28:01,334 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 20:28:01,889 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 20:41:02,783 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 20:41:02,932 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 20:41:02,932 - INFO - there is a test coming
2024-09-10 20:41:02,932 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 20:41:02,981 - INFO - {'updated_data': 'the data is now as 254729067687'}
2024-09-10 20:41:02,982 - INFO - the data is now as 254729067687
2024-09-10 20:41:03,000 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 20:41:03,000 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 20:41:03,001 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:41:03,779 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 20:41:03,781 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer lJdrG8KvvPlu5oPPlV9Qq4f2tig1'}"}
2024-09-10 20:41:03,783 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMjA0MTAz', 'Timestamp': '20240910204103', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '15018', 'PartyA': '254729067687', 'PartyB': 827142, 'PhoneNumber': '254729067687', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-106349', 'TransactionDesc': 'Some payment'}
2024-09-10 20:41:03,785 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:41:04,677 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 20:41:04,683 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee598134118', 'CheckoutRequestID': 'ws_CO_10092024234104437729067687', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 20:41:17,307 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee598134118', 'CheckoutRequestID': 'ws_CO_10092024234104437729067687', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 15018.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA56A0R1L'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910234116}, {'Name': 'PhoneNumber', 'Value': 254729067687}]}}}}"}
2024-09-10 20:41:17,308 - INFO - {'updated_data': 'callback data began'}
2024-09-10 20:41:17,308 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee598134118', 'CheckoutRequestID': 'ws_CO_10092024234104437729067687', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 15018.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA56A0R1L'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910234116}, {'Name': 'PhoneNumber', 'Value': 254729067687}]}}}}}
2024-09-10 20:41:17,582 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 20:41:17,792 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 20:41:17,794 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 20:41:18,359 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 20:43:37,034 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 20:43:37,187 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 20:43:37,188 - INFO - there is a test coming
2024-09-10 20:43:37,189 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 20:43:37,253 - INFO - {'updated_data': 'the data is now as 254729067687'}
2024-09-10 20:43:37,253 - INFO - the data is now as 254729067687
2024-09-10 20:43:37,273 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 20:43:37,273 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 20:43:37,275 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:43:38,078 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 20:43:38,080 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 2ZAY8AsK0GZ4CsCj2GKDGIxM2VYm'}"}
2024-09-10 20:43:38,080 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMjA0MzM4', 'Timestamp': '20240910204338', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '15000', 'PartyA': '254729067687', 'PartyB': 827142, 'PhoneNumber': '254729067687', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-156858', 'TransactionDesc': 'Some payment'}
2024-09-10 20:43:38,082 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:43:38,849 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 20:43:38,855 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518222612', 'CheckoutRequestID': 'ws_CO_10092024234338612729067687', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 20:43:49,696 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 20:43:49,834 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 20:43:49,835 - INFO - {'updated': 'initiated stk query for ws_CO_10092024234338612729067687 827142 '}
2024-09-10 20:43:49,901 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:43:50,478 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 20:43:50,480 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer rfBeYxl9a1AAhRkrAMzL9dMBlddp'}"}
2024-09-10 20:43:50,481 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMjA0MzQ5', 'Timestamp': '20240910204349', 'CheckoutRequestID': 'ws_CO_10092024234338612729067687'}"}
2024-09-10 20:43:50,482 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:43:51,202 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 20:43:51,202 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518222612', 'CheckoutRequestID': 'ws_CO_10092024234338612729067687', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024234338612729067687 827142"}
2024-09-10 20:43:51,347 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 20:43:51,539 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 20:43:51,540 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 20:43:52,066 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 20:44:16,278 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171264978', 'CheckoutRequestID': 'ws_CO_10092024234401634721115820', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 700.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA46A46AI'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910234415}, {'Name': 'PhoneNumber', 'Value': 254721115820}]}}}}"}
2024-09-10 20:44:16,279 - INFO - {'updated_data': 'callback data began'}
2024-09-10 20:44:16,279 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171264978', 'CheckoutRequestID': 'ws_CO_10092024234401634721115820', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 700.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA46A46AI'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910234415}, {'Name': 'PhoneNumber', 'Value': 254721115820}]}}}}}
2024-09-10 20:44:16,442 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 20:44:16,636 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 20:44:16,637 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 20:44:17,215 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 20:44:22,905 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 20:44:23,105 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 20:44:23,105 - INFO - {'updated': 'initiated stk query for ws_CO_10092024234401634721115820 899885 '}
2024-09-10 20:44:23,175 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:44:23,768 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 20:44:23,770 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer eEyCVxZtk98nLCV9jbAugrgtMKLb'}"}
2024-09-10 20:44:23,771 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMjA0NDIz', 'Timestamp': '20240910204423', 'CheckoutRequestID': 'ws_CO_10092024234401634721115820'}"}
2024-09-10 20:44:23,772 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:44:24,416 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 20:44:24,417 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171264978', 'CheckoutRequestID': 'ws_CO_10092024234401634721115820', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024234401634721115820 899885"}
2024-09-10 20:44:24,543 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 20:44:24,745 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 20:44:24,746 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 20:44:24,972 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 20:49:21,482 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a318723506', 'CheckoutRequestID': 'ws_CO_10092024234913254720761513', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA26A9BW4'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910234920}, {'Name': 'PhoneNumber', 'Value': 254720761513}]}}}}"}
2024-09-10 20:49:21,486 - INFO - {'updated_data': 'callback data began'}
2024-09-10 20:49:21,487 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a318723506', 'CheckoutRequestID': 'ws_CO_10092024234913254720761513', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA26A9BW4'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910234920}, {'Name': 'PhoneNumber', 'Value': 254720761513}]}}}}}
2024-09-10 20:49:21,751 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 20:49:22,162 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 20:49:22,163 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 20:49:22,403 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 20:49:24,429 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 20:49:24,554 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 20:49:24,555 - INFO - {'updated': 'initiated stk query for ws_CO_10092024234913254720761513 827142 '}
2024-09-10 20:49:24,606 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:49:25,166 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 20:49:25,167 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer mATvdEzxTevXyM8gFOo4AAzcF8VI'}"}
2024-09-10 20:49:25,168 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMjA0OTI0', 'Timestamp': '20240910204924', 'CheckoutRequestID': 'ws_CO_10092024234913254720761513'}"}
2024-09-10 20:49:25,168 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:49:25,812 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 384
2024-09-10 20:49:25,813 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'a5e9-4493-bf74-289c5402a318723506', 'CheckoutRequestID': 'ws_CO_10092024234913254720761513', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024234913254720761513 827142"}
2024-09-10 20:49:25,931 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 20:49:26,423 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 20:49:26,424 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 20:49:26,938 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 20:50:15,888 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 20:50:16,132 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 20:50:16,133 - INFO - {'updated': 'initiated stk query for ws_CO_10092024235004604720761513 827142 '}
2024-09-10 20:50:16,204 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:50:16,791 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 20:50:16,793 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer hBoLrlKb6RUxsQOAt6dizYwl1PTJ'}"}
2024-09-10 20:50:16,794 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMjA1MDE2', 'Timestamp': '20240910205016', 'CheckoutRequestID': 'ws_CO_10092024235004604720761513'}"}
2024-09-10 20:50:16,796 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:50:17,432 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 20:50:17,432 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024235004604720761513', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024235004604720761513 827142"}
2024-09-10 20:50:17,435 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 20:50:25,913 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 20:50:26,066 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 20:50:26,067 - INFO - {'updated': 'initiated stk query for ws_CO_10092024235004604720761513 827142 '}
2024-09-10 20:50:26,134 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:50:26,731 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 20:50:26,733 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer jcTS567Fbw13FYlpLhnGY3VS95Oz'}"}
2024-09-10 20:50:26,733 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMjA1MDI2', 'Timestamp': '20240910205026', 'CheckoutRequestID': 'ws_CO_10092024235004604720761513'}"}
2024-09-10 20:50:26,734 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:50:27,350 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 20:50:27,351 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518233153', 'CheckoutRequestID': 'ws_CO_10092024235004604720761513', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024235004604720761513 827142"}
2024-09-10 20:50:27,509 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 20:50:27,695 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 20:50:27,696 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 20:50:27,908 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 20:55:03,447 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 20:55:03,667 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 20:55:03,667 - INFO - there is a test coming
2024-09-10 20:55:03,667 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 20:55:03,713 - INFO - {'updated_data': 'the data is now as 254721727231'}
2024-09-10 20:55:03,714 - INFO - the data is now as 254721727231
2024-09-10 20:55:03,731 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 20:55:03,731 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 20:55:03,732 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:55:04,328 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 20:55:04,330 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer UcxSFPlPNRjAk5EXiByfDjxZ3QpH'}"}
2024-09-10 20:55:04,331 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMjA1NTA0', 'Timestamp': '20240910205504', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254721727231', 'PartyB': 827142, 'PhoneNumber': '254721727231', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-172476', 'TransactionDesc': 'Some payment'}
2024-09-10 20:55:04,332 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:55:05,058 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 20:55:05,064 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b7797103', 'CheckoutRequestID': 'ws_CO_10092024235504866721727231', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 20:55:25,979 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 20:55:26,151 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 20:55:26,152 - INFO - {'updated': 'initiated stk query for ws_CO_10092024235504866721727231 827142 '}
2024-09-10 20:55:26,242 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:55:26,811 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 20:55:26,812 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer uaaEQ9Ye8kD2wAl76JNx84SnsFb0'}"}
2024-09-10 20:55:26,813 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMjA1NTI2', 'Timestamp': '20240910205526', 'CheckoutRequestID': 'ws_CO_10092024235504866721727231'}"}
2024-09-10 20:55:26,814 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:55:27,419 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 20:55:27,419 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b7797103', 'CheckoutRequestID': 'ws_CO_10092024235504866721727231', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024235504866721727231 827142"}
2024-09-10 20:55:27,577 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 20:55:27,778 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 20:55:27,780 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 20:55:27,983 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 21:01:34,514 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 21:01:34,682 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 21:01:34,683 - INFO - there is a test coming
2024-09-10 21:01:34,683 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 21:01:34,792 - INFO - {'updated_data': 'the data is now as 254740370742'}
2024-09-10 21:01:34,792 - INFO - the data is now as 254740370742
2024-09-10 21:01:34,825 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 21:01:34,825 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 21:01:34,827 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 21:01:38,990 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 21:01:38,992 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 7ll1WhwKXQS6Z7ycOGiHGh79g555'}"}
2024-09-10 21:01:38,993 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMjEwMTM4', 'Timestamp': '20240910210138', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '400', 'PartyA': '254740370742', 'PartyB': 899885, 'PhoneNumber': '254740370742', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054254', 'TransactionDesc': 'Some payment'}
2024-09-10 21:01:38,999 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 21:01:39,747 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 21:01:39,753 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b7806701', 'CheckoutRequestID': 'ws_CO_11092024000139530740370742', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 21:01:51,644 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 21:01:51,864 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 21:01:51,865 - INFO - {'updated': 'initiated stk query for ws_CO_11092024000139530740370742 899885 '}
2024-09-10 21:01:51,933 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 21:01:52,634 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 21:01:52,636 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer WArOLpBYF1q9hgLu9wKbKGOA5EIw'}"}
2024-09-10 21:01:52,636 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMjEwMTUx', 'Timestamp': '20240910210151', 'CheckoutRequestID': 'ws_CO_11092024000139530740370742'}"}
2024-09-10 21:01:52,638 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 21:01:53,283 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 21:01:53,283 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b7806701', 'CheckoutRequestID': 'ws_CO_11092024000139530740370742', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024000139530740370742 899885"}
2024-09-10 21:01:53,458 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 21:01:53,656 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 21:01:53,658 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 21:01:53,869 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 21:05:43,394 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 21:05:43,563 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 21:05:43,563 - INFO - there is a test coming
2024-09-10 21:05:43,563 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 21:05:43,611 - INFO - {'updated_data': 'the data is now as 254112052031'}
2024-09-10 21:05:43,611 - INFO - the data is now as 254112052031
2024-09-10 21:05:43,627 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 21:05:43,627 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 21:05:43,629 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 21:05:44,396 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 21:05:44,398 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer iHO3GnR5kdWk2SbDD78VAroOjnv9'}"}
2024-09-10 21:05:44,399 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMjEwNTQ0', 'Timestamp': '20240910210544', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254112052031', 'PartyB': 827142, 'PhoneNumber': '254112052031', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-22742', 'TransactionDesc': 'Some payment'}
2024-09-10 21:05:44,400 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 21:05:45,151 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 21:05:45,158 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171281630', 'CheckoutRequestID': 'ws_CO_11092024000544933112052031', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 21:25:52,057 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 21:25:52,388 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 21:25:52,388 - INFO - {'updated': 'initiated stk query for ws_CO_11092024002540617707479146 899885 '}
2024-09-10 21:25:52,461 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 21:25:53,036 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 21:25:53,038 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer nAVzzopOs2r7M1tVDxTUo3nYAjWH'}"}
2024-09-10 21:25:53,039 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMjEyNTUy', 'Timestamp': '20240910212552', 'CheckoutRequestID': 'ws_CO_11092024002540617707479146'}"}
2024-09-10 21:25:53,040 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 21:25:53,741 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 21:25:53,741 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024002540617707479146', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024002540617707479146 899885"}
2024-09-10 21:25:53,744 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 21:59:04,364 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 21:59:04,520 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 21:59:04,521 - INFO - {'updated': 'initiated stk query for ws_CO_11092024005853268718159756 899885 '}
2024-09-10 21:59:04,579 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 21:59:05,254 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 21:59:05,256 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer WVdmBD2emonCWMzuzWCBCvNFeGnu'}"}
2024-09-10 21:59:05,256 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMjE1OTA0', 'Timestamp': '20240910215904', 'CheckoutRequestID': 'ws_CO_11092024005853268718159756'}"}
2024-09-10 21:59:05,258 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 21:59:05,972 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 21:59:05,972 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170827351', 'CheckoutRequestID': 'ws_CO_11092024005853268718159756', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024005853268718159756 899885"}
2024-09-10 21:59:06,118 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 21:59:06,313 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 21:59:06,315 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 21:59:06,526 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 22:00:45,484 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 22:00:45,622 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 22:00:45,622 - INFO - there is a test coming
2024-09-10 22:00:45,623 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 22:00:45,724 - INFO - {'updated_data': 'the data is now as 254708614269'}
2024-09-10 22:00:45,725 - INFO - the data is now as 254708614269
2024-09-10 22:00:45,742 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 22:00:45,742 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 22:00:45,744 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 22:00:46,305 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 22:00:46,307 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer eJrLHavxE4qeE0L3oUAz5i9ArI5O'}"}
2024-09-10 22:00:46,308 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMjIwMDQ2', 'Timestamp': '20240910220046', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254708614269', 'PartyB': 899885, 'PhoneNumber': '254708614269', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Order No . 14065', 'TransactionDesc': 'Some payment'}
2024-09-10 22:00:46,309 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 22:00:47,058 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 22:00:47,070 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170592137', 'CheckoutRequestID': 'ws_CO_11092024010046832708614269', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 22:01:22,158 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794186977', 'CheckoutRequestID': 'ws_CO_11092024010113267723220235', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3165.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB56BU9K9'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911010121}, {'Name': 'PhoneNumber', 'Value': 254723220235}]}}}}"}
2024-09-10 22:01:22,159 - INFO - {'updated_data': 'callback data began'}
2024-09-10 22:01:22,159 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794186977', 'CheckoutRequestID': 'ws_CO_11092024010113267723220235', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3165.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB56BU9K9'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911010121}, {'Name': 'PhoneNumber', 'Value': 254723220235}]}}}}}
2024-09-10 22:01:22,528 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 22:01:22,715 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 22:01:22,717 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 22:01:23,239 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 22:26:20,557 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88512227', 'CheckoutRequestID': 'ws_CO_11092024012610387702181139', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB86C57TE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911012619}, {'Name': 'PhoneNumber', 'Value': 254702181139}]}}}}"}
2024-09-10 22:26:20,557 - INFO - {'updated_data': 'callback data began'}
2024-09-10 22:26:20,557 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88512227', 'CheckoutRequestID': 'ws_CO_11092024012610387702181139', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB86C57TE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911012619}, {'Name': 'PhoneNumber', 'Value': 254702181139}]}}}}}
2024-09-10 22:26:20,765 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 22:26:20,958 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 22:26:20,960 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 22:26:21,175 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 22:27:10,419 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 22:27:10,569 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 22:27:10,570 - INFO - {'updated': 'initiated stk query for ws_CO_11092024012659410728059851 899885 '}
2024-09-10 22:27:10,626 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 22:27:11,268 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 22:27:11,270 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ezV8OKdUwNc4XDSCd3ibe5pvbccF'}"}
2024-09-10 22:27:11,270 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMjIyNzEw', 'Timestamp': '20240910222710', 'CheckoutRequestID': 'ws_CO_11092024012659410728059851'}"}
2024-09-10 22:27:11,271 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 22:27:11,921 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 22:27:11,923 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024012659410728059851', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024012659410728059851 899885"}
2024-09-10 22:27:11,925 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 22:34:32,563 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794204432', 'CheckoutRequestID': 'ws_CO_11092024013424413721770472', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB46C7VF8'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911013431}, {'Name': 'PhoneNumber', 'Value': 254721770472}]}}}}"}
2024-09-10 22:34:32,564 - INFO - {'updated_data': 'callback data began'}
2024-09-10 22:34:32,564 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794204432', 'CheckoutRequestID': 'ws_CO_11092024013424413721770472', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB46C7VF8'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911013431}, {'Name': 'PhoneNumber', 'Value': 254721770472}]}}}}}
2024-09-10 22:34:32,833 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 22:34:33,518 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 22:34:33,520 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 22:34:33,729 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 22:45:17,469 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 22:45:17,640 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 22:45:17,641 - INFO - there is a test coming
2024-09-10 22:45:17,641 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 22:45:17,694 - INFO - {'updated_data': 'the data is now as 254724175274'}
2024-09-10 22:45:17,694 - INFO - the data is now as 254724175274
2024-09-10 22:45:17,722 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 22:45:17,722 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 22:45:17,724 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 22:45:18,508 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 22:45:18,510 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 2uh8FGqQMoBkJVlPB9xwhSxqWTsg'}"}
2024-09-10 22:45:18,511 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMjI0NTE4', 'Timestamp': '20240910224518', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '15000', 'PartyA': '254724175274', 'PartyB': 899885, 'PhoneNumber': '254724175274', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0620528-1726008316246', 'TransactionDesc': 'Some payment'}
2024-09-10 22:45:18,512 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 22:45:19,281 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 22:45:19,288 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170615203', 'CheckoutRequestID': 'ws_CO_11092024014519029724175274', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 22:47:01,476 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 22:47:01,635 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 22:47:01,636 - INFO - there is a test coming
2024-09-10 22:47:01,636 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 22:47:01,684 - INFO - {'updated_data': 'the data is now as 254798943951'}
2024-09-10 22:47:01,684 - INFO - the data is now as 254798943951
2024-09-10 22:47:01,701 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 22:47:01,702 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 22:47:01,703 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 22:47:02,371 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 22:47:02,373 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer XoprQK95pAEQuuW7RAlyzAMGxHR7'}"}
2024-09-10 22:47:02,373 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMjI0NzAy', 'Timestamp': '20240910224702', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254798943951', 'PartyB': 899885, 'PhoneNumber': '254798943951', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054258', 'TransactionDesc': 'Some payment'}
2024-09-10 22:47:02,375 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 22:47:03,152 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 22:47:03,168 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518365946', 'CheckoutRequestID': 'ws_CO_11092024014702911798943951', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 22:48:08,561 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585054331318', 'CheckoutRequestID': 'ws_CO_11092024014759774724175274', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 15000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB36CCMHJ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911014807}, {'Name': 'PhoneNumber', 'Value': 254724175274}]}}}}"}
2024-09-10 22:48:08,561 - INFO - {'updated_data': 'callback data began'}
2024-09-10 22:48:08,561 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585054331318', 'CheckoutRequestID': 'ws_CO_11092024014759774724175274', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 15000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB36CCMHJ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911014807}, {'Name': 'PhoneNumber', 'Value': 254724175274}]}}}}}
2024-09-10 22:48:08,752 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 22:48:08,952 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 22:48:08,954 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 22:48:09,488 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 22:48:11,308 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 22:48:11,458 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 22:48:11,459 - INFO - {'updated': 'initiated stk query for ws_CO_11092024014759774724175274 827142 '}
2024-09-10 22:48:11,519 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 22:48:12,106 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 22:48:12,108 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Ti0nRglzckuyQ4aj6WjBvnHLpZOB'}"}
2024-09-10 22:48:12,108 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMjI0ODEx', 'Timestamp': '20240910224811', 'CheckoutRequestID': 'ws_CO_11092024014759774724175274'}"}
2024-09-10 22:48:12,109 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 22:48:12,741 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 22:48:12,742 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585054331318', 'CheckoutRequestID': 'ws_CO_11092024014759774724175274', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024014759774724175274 827142"}
2024-09-10 22:48:12,856 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 22:48:13,361 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 22:48:13,363 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 22:48:13,566 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 22:48:15,009 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 22:48:15,241 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 22:48:15,242 - INFO - {'updated': 'initiated stk query for ws_CO_11092024014804012798943951 899885 '}
2024-09-10 22:48:15,321 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 22:48:16,053 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 22:48:16,055 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer E8fmh29keRSrnjisxSb6I6QG3WQv'}"}
2024-09-10 22:48:16,056 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMjI0ODE1', 'Timestamp': '20240910224815', 'CheckoutRequestID': 'ws_CO_11092024014804012798943951'}"}
2024-09-10 22:48:16,057 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 22:48:16,755 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 22:48:16,756 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024014804012798943951', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024014804012798943951 899885"}
2024-09-10 22:48:16,758 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 23:17:22,770 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee598305701', 'CheckoutRequestID': 'ws_CO_11092024021707878721115820', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB26CLXMS'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911021722}, {'Name': 'PhoneNumber', 'Value': 254721115820}]}}}}"}
2024-09-10 23:17:22,770 - INFO - {'updated_data': 'callback data began'}
2024-09-10 23:17:22,771 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee598305701', 'CheckoutRequestID': 'ws_CO_11092024021707878721115820', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB26CLXMS'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911021722}, {'Name': 'PhoneNumber', 'Value': 254721115820}]}}}}}
2024-09-10 23:17:22,980 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 23:17:23,678 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 23:17:23,680 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 23:17:24,193 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 00:04:10,819 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076564469', 'CheckoutRequestID': 'ws_CO_11092024030356797711760133', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB56D0CXV'}, {'Name': 'TransactionDate', 'Value': 20240911030410}, {'Name': 'PhoneNumber', 'Value': 254711760133}]}}}}"}
2024-09-11 00:04:10,820 - INFO - {'updated_data': 'callback data began'}
2024-09-11 00:04:10,820 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076564469', 'CheckoutRequestID': 'ws_CO_11092024030356797711760133', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB56D0CXV'}, {'Name': 'TransactionDate', 'Value': 20240911030410}, {'Name': 'PhoneNumber', 'Value': 254711760133}]}}}}}
2024-09-11 00:04:11,001 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 00:04:11,313 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 00:04:11,315 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 00:04:11,848 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 00:30:25,968 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170662474', 'CheckoutRequestID': 'ws_CO_11092024033013589741967921', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB66D89YG'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911033025}, {'Name': 'PhoneNumber', 'Value': 254741967921}]}}}}"}
2024-09-11 00:30:25,968 - INFO - {'updated_data': 'callback data began'}
2024-09-11 00:30:25,968 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170662474', 'CheckoutRequestID': 'ws_CO_11092024033013589741967921', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB66D89YG'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911033025}, {'Name': 'PhoneNumber', 'Value': 254741967921}]}}}}}
2024-09-11 00:30:26,122 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 00:30:26,802 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 00:30:26,803 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 00:30:27,019 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 01:02:00,109 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585054429865', 'CheckoutRequestID': 'ws_CO_11092024040144696703314278', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1400.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB96DH945'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911040159}, {'Name': 'PhoneNumber', 'Value': 254703314278}]}}}}"}
2024-09-11 01:02:00,110 - INFO - {'updated_data': 'callback data began'}
2024-09-11 01:02:00,110 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585054429865', 'CheckoutRequestID': 'ws_CO_11092024040144696703314278', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1400.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB96DH945'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911040159}, {'Name': 'PhoneNumber', 'Value': 254703314278}]}}}}}
2024-09-11 01:02:00,267 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 01:02:00,630 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 01:02:00,631 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 01:02:00,845 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 01:02:25,833 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518465511', 'CheckoutRequestID': 'ws_CO_11092024040213330721271252', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB76DH0CT'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911040225}, {'Name': 'PhoneNumber', 'Value': 254721271252}]}}}}"}
2024-09-11 01:02:25,833 - INFO - {'updated_data': 'callback data began'}
2024-09-11 01:02:25,834 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518465511', 'CheckoutRequestID': 'ws_CO_11092024040213330721271252', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB76DH0CT'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911040225}, {'Name': 'PhoneNumber', 'Value': 254721271252}]}}}}}
2024-09-11 01:02:25,984 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 01:02:26,489 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 01:02:26,490 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 01:02:26,691 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 01:02:27,881 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 01:02:28,021 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 01:02:28,021 - INFO - {'updated': 'initiated stk query for ws_CO_11092024040213330721271252 899885 '}
2024-09-11 01:02:28,072 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 01:02:28,627 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 01:02:28,628 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer a3UDwsGW0qAev3AhR6ESwKPHFX0n'}"}
2024-09-11 01:02:28,629 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDEwMjI4', 'Timestamp': '20240911010228', 'CheckoutRequestID': 'ws_CO_11092024040213330721271252'}"}
2024-09-11 01:02:28,630 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 01:02:29,261 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 01:02:29,261 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518465511', 'CheckoutRequestID': 'ws_CO_11092024040213330721271252', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024040213330721271252 899885"}
2024-09-11 01:02:29,372 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 01:02:29,566 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 01:02:29,567 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 01:02:29,762 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 01:32:40,392 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 01:32:40,552 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 01:32:40,553 - INFO - there is a test coming
2024-09-11 01:32:40,553 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 01:32:40,596 - INFO - {'updated_data': 'the data is now as 254713179180'}
2024-09-11 01:32:40,597 - INFO - the data is now as 254713179180
2024-09-11 01:32:40,612 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 01:32:40,613 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 01:32:40,614 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 01:32:41,391 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 01:32:41,395 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 5uDTlQHZvGkVrj3zUUqhZAVVkJ76'}"}
2024-09-11 01:32:41,396 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDEzMjQx', 'Timestamp': '20240911013241', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '7288', 'PartyA': '254713179180', 'PartyB': 827142, 'PhoneNumber': '254713179180', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '121-56151', 'TransactionDesc': 'Some payment'}
2024-09-11 01:32:41,398 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 01:32:42,234 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 01:32:42,240 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88596509', 'CheckoutRequestID': 'ws_CO_11092024043242031713179180', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 01:33:03,262 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 01:33:03,507 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 01:33:03,507 - INFO - {'updated': 'initiated stk query for ws_CO_11092024043242031713179180 827142 '}
2024-09-11 01:33:03,589 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 01:33:04,197 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 01:33:04,199 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer F0WHtjvPjoltPvTR6vuVC5tIG6GV'}"}
2024-09-11 01:33:04,199 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDEzMzAz', 'Timestamp': '20240911013303', 'CheckoutRequestID': 'ws_CO_11092024043242031713179180'}"}
2024-09-11 01:33:04,200 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 01:33:04,821 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 01:33:04,822 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024043242031713179180', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024043242031713179180 827142"}
2024-09-11 01:33:04,825 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 02:01:05,911 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 02:01:06,065 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 02:01:06,066 - INFO - {'updated': 'initiated stk query for ws_CO_11092024050054747722325579 827142 '}
2024-09-11 02:01:06,159 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 02:01:06,858 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 02:01:06,860 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ZHqyrSxpXmW5ZwhroBV4saoPjBGo'}"}
2024-09-11 02:01:06,860 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDIwMTA2', 'Timestamp': '20240911020106', 'CheckoutRequestID': 'ws_CO_11092024050054747722325579'}"}
2024-09-11 02:01:06,861 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 02:01:07,617 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 02:01:07,617 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024050054747722325579', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024050054747722325579 827142"}
2024-09-11 02:01:07,620 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 02:09:59,754 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 02:09:59,939 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 02:09:59,940 - INFO - {'updated': 'initiated stk query for ws_CO_11092024050944871792789045 899885 '}
2024-09-11 02:10:00,004 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 02:10:00,677 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 02:10:00,679 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 2MJVdmGduFSifsrEoMQVJQUlipB8'}"}
2024-09-11 02:10:00,680 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDIxMDAw', 'Timestamp': '20240911021000', 'CheckoutRequestID': 'ws_CO_11092024050944871792789045'}"}
2024-09-11 02:10:00,681 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 02:10:01,450 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 02:10:01,451 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88613491', 'CheckoutRequestID': 'ws_CO_11092024050944871792789045', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024050944871792789045 899885"}
2024-09-11 02:10:01,567 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 02:10:01,754 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 02:10:01,755 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 02:10:01,978 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 02:28:48,782 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 02:28:48,955 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 02:28:48,956 - INFO - there is a test coming
2024-09-11 02:28:48,956 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 02:28:49,003 - INFO - {'updated_data': 'the data is now as 254717201830'}
2024-09-11 02:28:49,003 - INFO - the data is now as 254717201830
2024-09-11 02:28:49,019 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 02:28:49,019 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 02:28:49,020 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 02:28:49,867 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 02:28:49,869 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer zJenQB9e4DAw84TjG2KBndXG25o9'}"}
2024-09-11 02:28:49,869 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDIyODQ5', 'Timestamp': '20240911022849', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1550', 'PartyA': '254717201830', 'PartyB': 827142, 'PhoneNumber': '254717201830', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-42312', 'TransactionDesc': 'Some payment'}
2024-09-11 02:28:49,871 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 02:28:50,604 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 02:28:50,613 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181020037', 'CheckoutRequestID': 'ws_CO_11092024052850399717201830', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 03:00:31,565 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518556638', 'CheckoutRequestID': 'ws_CO_11092024060021641791509919', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB26F3RTC'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911060030}, {'Name': 'PhoneNumber', 'Value': 254791509919}]}}}}"}
2024-09-11 03:00:31,565 - INFO - {'updated_data': 'callback data began'}
2024-09-11 03:00:31,566 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518556638', 'CheckoutRequestID': 'ws_CO_11092024060021641791509919', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB26F3RTC'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911060030}, {'Name': 'PhoneNumber', 'Value': 254791509919}]}}}}}
2024-09-11 03:00:31,721 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 03:00:32,095 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 03:00:32,097 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 03:00:32,318 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 03:00:33,066 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 03:00:33,245 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 03:00:33,245 - INFO - {'updated': 'initiated stk query for ws_CO_11092024060021641791509919 827142 '}
2024-09-11 03:00:33,303 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:00:33,996 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 03:00:33,998 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer WJPgTXSVFQyjSuBd95G5SuN3Ur0R'}"}
2024-09-11 03:00:33,999 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDMwMDMz', 'Timestamp': '20240911030033', 'CheckoutRequestID': 'ws_CO_11092024060021641791509919'}"}
2024-09-11 03:00:34,000 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:00:34,673 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 03:00:34,674 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518556638', 'CheckoutRequestID': 'ws_CO_11092024060021641791509919', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024060021641791509919 827142"}
2024-09-11 03:00:34,813 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 03:00:35,314 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 03:00:35,315 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 03:00:35,530 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 03:44:41,534 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 03:44:41,680 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 03:44:41,681 - INFO - {'updated': 'initiated stk query for ws_CO_11092024064420290722666102 899885 '}
2024-09-11 03:44:41,753 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:44:42,345 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 03:44:42,352 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer GrdOKZ4C4SX9RlqZAmCuaAp2n38B'}"}
2024-09-11 03:44:42,354 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDM0NDQx', 'Timestamp': '20240911034441', 'CheckoutRequestID': 'ws_CO_11092024064420290722666102'}"}
2024-09-11 03:44:42,356 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:44:43,097 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 03:44:43,097 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208794354811', 'CheckoutRequestID': 'ws_CO_11092024064420290722666102', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024064420290722666102 899885"}
2024-09-11 03:44:43,220 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 03:44:43,399 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 03:44:43,401 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 03:44:43,617 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 03:44:45,548 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 03:44:45,720 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 03:44:45,720 - INFO - {'updated': 'initiated stk query for ws_CO_11092024064434384740168548 827142 '}
2024-09-11 03:44:45,788 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:44:46,342 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 03:44:46,344 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer CyiBFQLxWtFDQwRCfGJ3j8fHxGAU'}"}
2024-09-11 03:44:46,344 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDM0NDQ1', 'Timestamp': '20240911034445', 'CheckoutRequestID': 'ws_CO_11092024064434384740168548'}"}
2024-09-11 03:44:46,346 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:44:46,980 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 03:44:46,980 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076673307', 'CheckoutRequestID': 'ws_CO_11092024064434384740168548', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024064434384740168548 827142"}
2024-09-11 03:44:47,101 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 03:44:47,282 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 03:44:47,286 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 03:44:47,491 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 03:53:46,992 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 03:53:47,142 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 03:53:47,142 - INFO - there is a test coming
2024-09-11 03:53:47,142 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 03:53:47,183 - INFO - {'updated_data': 'the data is now as 254792656687'}
2024-09-11 03:53:47,183 - INFO - the data is now as 254792656687
2024-09-11 03:53:47,198 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 03:53:47,198 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 03:53:47,199 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:53:47,970 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 03:53:47,973 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer vTJEpfGWQr9NOYIBKwSab7EZ9hoc'}"}
2024-09-11 03:53:47,974 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDM1MzQ3', 'Timestamp': '20240911035347', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '200', 'PartyA': '254792656687', 'PartyB': 899885, 'PhoneNumber': '254792656687', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA008333CP-1726026826336', 'TransactionDesc': 'Some payment'}
2024-09-11 03:53:47,975 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:53:48,879 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 03:53:48,884 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee598542445', 'CheckoutRequestID': 'ws_CO_11092024065348611792656687', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 04:06:49,600 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 04:06:49,747 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 04:06:49,748 - INFO - {'updated': 'initiated stk query for ws_CO_11092024070635370743889743 827142 '}
2024-09-11 04:06:49,812 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:06:50,401 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 04:06:50,403 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ru757JOS9iI2XqP1fQ1iV89lwPfs'}"}
2024-09-11 04:06:50,403 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDQwNjQ5', 'Timestamp': '20240911040649', 'CheckoutRequestID': 'ws_CO_11092024070635370743889743'}"}
2024-09-11 04:06:50,405 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:06:51,043 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 04:06:51,044 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024070635370743889743', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024070635370743889743 827142"}
2024-09-11 04:06:51,046 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 04:09:42,784 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88685326', 'CheckoutRequestID': 'ws_CO_11092024070933045743889743', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB66J2M4S'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911070942}, {'Name': 'PhoneNumber', 'Value': 254743889743}]}}}}"}
2024-09-11 04:09:42,784 - INFO - {'updated_data': 'callback data began'}
2024-09-11 04:09:42,784 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88685326', 'CheckoutRequestID': 'ws_CO_11092024070933045743889743', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB66J2M4S'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911070942}, {'Name': 'PhoneNumber', 'Value': 254743889743}]}}}}}
2024-09-11 04:09:42,954 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 04:09:43,137 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 04:09:43,141 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 04:09:43,350 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 04:10:43,387 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8210758', 'CheckoutRequestID': 'ws_CO_11092024071035755799174341', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 04:10:43,387 - INFO - {'updated_data': 'callback data began'}
2024-09-11 04:10:43,388 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8210758', 'CheckoutRequestID': 'ws_CO_11092024071035755799174341', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 04:10:43,566 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 04:10:43,940 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 04:10:43,942 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 04:10:44,143 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 04:16:38,334 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8220956', 'CheckoutRequestID': 'ws_CO_11092024071616414725571210', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 800.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB76JNW0H'}, {'Name': 'TransactionDate', 'Value': 20240911071635}, {'Name': 'PhoneNumber', 'Value': 254725571210}]}}}}"}
2024-09-11 04:16:38,334 - INFO - {'updated_data': 'callback data began'}
2024-09-11 04:16:38,334 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8220956', 'CheckoutRequestID': 'ws_CO_11092024071616414725571210', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 800.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB76JNW0H'}, {'Name': 'TransactionDate', 'Value': 20240911071635}, {'Name': 'PhoneNumber', 'Value': 254725571210}]}}}}}
2024-09-11 04:16:38,501 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 04:16:38,871 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 04:16:38,873 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 04:16:39,085 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 04:21:21,790 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 04:21:21,952 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 04:21:21,953 - INFO - there is a test coming
2024-09-11 04:21:21,953 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 04:21:22,003 - INFO - {'updated_data': 'the data is now as 254743157528'}
2024-09-11 04:21:22,003 - INFO - the data is now as 254743157528
2024-09-11 04:21:22,022 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 04:21:22,022 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 04:21:22,023 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:21:22,609 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 04:21:22,611 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer sHjMMA5HhsC1cl6lWa8SP51NciVe'}"}
2024-09-11 04:21:22,612 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDQyMTIy', 'Timestamp': '20240911042122', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '200', 'PartyA': '254743157528', 'PartyB': 827142, 'PhoneNumber': '254743157528', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-154749', 'TransactionDesc': 'Some payment'}
2024-09-11 04:21:22,613 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:21:23,471 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 04:21:23,488 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88695166', 'CheckoutRequestID': 'ws_CO_11092024072123250743157528', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 04:23:09,538 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518677633', 'CheckoutRequestID': 'ws_CO_11092024072301517723831641', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 280.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB36K8U4F'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911072308}, {'Name': 'PhoneNumber', 'Value': 254723831641}]}}}}"}
2024-09-11 04:23:09,538 - INFO - {'updated_data': 'callback data began'}
2024-09-11 04:23:09,538 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518677633', 'CheckoutRequestID': 'ws_CO_11092024072301517723831641', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 280.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB36K8U4F'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911072308}, {'Name': 'PhoneNumber', 'Value': 254723831641}]}}}}}
2024-09-11 04:23:09,704 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 04:23:10,354 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 04:23:10,355 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 04:23:10,568 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 04:23:55,243 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 04:23:55,394 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 04:23:55,409 - INFO - there is a test coming
2024-09-11 04:23:55,409 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 04:23:55,461 - INFO - {'updated_data': 'the data is now as 254769226627'}
2024-09-11 04:23:55,461 - INFO - the data is now as 254769226627
2024-09-11 04:23:55,477 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 04:23:55,477 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 04:23:55,478 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:23:56,084 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 04:23:56,086 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer G5gIODVbL6A3n3g1qcoIloebFk5C'}"}
2024-09-11 04:23:56,086 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDQyMzU2', 'Timestamp': '20240911042356', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254769226627', 'PartyB': 899885, 'PhoneNumber': '254769226627', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA1666861CP-1726028634271', 'TransactionDesc': 'Some payment'}
2024-09-11 04:23:56,087 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:23:56,888 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 04:23:56,896 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518679194', 'CheckoutRequestID': 'ws_CO_11092024072356671769226627', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 04:25:07,359 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 04:25:08,002 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 04:25:08,003 - INFO - {'updated': 'initiated stk query for ws_CO_11092024072356671769226627 899885 '}
2024-09-11 04:25:08,074 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:25:08,660 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 04:25:08,663 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Uoa311tdIf4R4qoJl1niZJQA6n5A'}"}
2024-09-11 04:25:08,665 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDQyNTA4', 'Timestamp': '20240911042508', 'CheckoutRequestID': 'ws_CO_11092024072356671769226627'}"}
2024-09-11 04:25:08,667 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:25:10,046 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-11 04:25:10,047 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518679194', 'CheckoutRequestID': 'ws_CO_11092024072356671769226627', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_11092024072356671769226627 899885"}
2024-09-11 04:25:10,225 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 04:25:10,414 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 04:25:10,416 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 04:25:10,958 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 04:31:26,935 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 04:31:27,105 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 04:31:27,105 - INFO - {'updated': 'initiated stk query for ws_CO_11092024073115825719550191 827142 '}
2024-09-11 04:31:27,159 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:31:27,842 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 04:31:27,844 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer XGxi6P0bSf0c6roAWnH6muzBuV1n'}"}
2024-09-11 04:31:27,844 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDQzMTI3', 'Timestamp': '20240911043127', 'CheckoutRequestID': 'ws_CO_11092024073115825719550191'}"}
2024-09-11 04:31:27,845 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:31:28,525 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 04:31:28,526 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076709615', 'CheckoutRequestID': 'ws_CO_11092024073115825719550191', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024073115825719550191 827142"}
2024-09-11 04:31:28,666 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 04:31:28,854 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 04:31:28,855 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 04:31:29,071 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 04:36:26,043 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 04:36:26,168 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 04:36:26,169 - INFO - {'updated': 'initiated stk query for ws_CO_11092024073614949726849640 899885 '}
2024-09-11 04:36:26,219 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:36:26,896 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 04:36:26,898 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer DvZztFIs371zS0cAkASM3SCp8bCD'}"}
2024-09-11 04:36:26,898 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDQzNjI2', 'Timestamp': '20240911043626', 'CheckoutRequestID': 'ws_CO_11092024073614949726849640'}"}
2024-09-11 04:36:26,899 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:36:27,636 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 04:36:27,637 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171038558', 'CheckoutRequestID': 'ws_CO_11092024073614949726849640', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024073614949726849640 899885"}
2024-09-11 04:36:27,760 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 04:36:28,121 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 04:36:28,122 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 04:36:28,327 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 04:36:34,531 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 04:36:34,663 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 04:36:34,664 - INFO - there is a test coming
2024-09-11 04:36:34,664 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 04:36:34,705 - INFO - {'updated_data': 'the data is now as 254723703945'}
2024-09-11 04:36:34,705 - INFO - the data is now as 254723703945
2024-09-11 04:36:34,721 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 04:36:34,722 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 04:36:34,723 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:36:35,316 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 04:36:35,318 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer IXaTGpqoARIRZf6sLTpT5rYo4aFL'}"}
2024-09-11 04:36:35,319 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDQzNjM1', 'Timestamp': '20240911043635', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '12000', 'PartyA': '254723703945', 'PartyB': 827142, 'PhoneNumber': '254723703945', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-5158', 'TransactionDesc': 'Some payment'}
2024-09-11 04:36:35,320 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:36:38,213 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 04:36:38,219 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585054668988', 'CheckoutRequestID': 'ws_CO_11092024073635865723703945', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 04:36:59,079 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 04:36:59,231 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 04:36:59,232 - INFO - {'updated': 'initiated stk query for ws_CO_11092024073635865723703945 827142 '}
2024-09-11 04:36:59,295 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:36:59,903 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 04:36:59,905 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer XGqESLXunQD1vQwpxnkgeqCHpN0G'}"}
2024-09-11 04:36:59,905 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDQzNjU5', 'Timestamp': '20240911043659', 'CheckoutRequestID': 'ws_CO_11092024073635865723703945'}"}
2024-09-11 04:36:59,906 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:37:00,632 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 04:37:00,633 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585054668988', 'CheckoutRequestID': 'ws_CO_11092024073635865723703945', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024073635865723703945 827142"}
2024-09-11 04:37:00,758 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 04:37:01,262 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 04:37:01,263 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 04:37:01,794 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 04:37:28,800 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 04:37:28,948 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 04:37:28,949 - INFO - {'updated': 'initiated stk query for ws_CO_11092024073717531721871827 827142 '}
2024-09-11 04:37:28,998 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:37:29,564 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 04:37:29,566 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer r1uTbxb0d73rdptBhGDD9eZykHSO'}"}
2024-09-11 04:37:29,566 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDQzNzI4', 'Timestamp': '20240911043728', 'CheckoutRequestID': 'ws_CO_11092024073717531721871827'}"}
2024-09-11 04:37:29,567 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:37:30,198 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 04:37:30,198 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171527244', 'CheckoutRequestID': 'ws_CO_11092024073717531721871827', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024073717531721871827 827142"}
2024-09-11 04:37:30,347 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 04:37:30,533 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 04:37:30,535 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 04:37:31,094 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 04:37:54,779 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 04:37:54,925 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 04:37:54,926 - INFO - there is a test coming
2024-09-11 04:37:54,927 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 04:37:54,982 - INFO - {'updated_data': 'the data is now as 254797076798'}
2024-09-11 04:37:54,982 - INFO - the data is now as 254797076798
2024-09-11 04:37:54,998 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 04:37:54,998 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 04:37:55,000 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:37:55,568 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 04:37:55,570 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ajrTcwpn7cCwj6SiTEHgE7KYs3Tt'}"}
2024-09-11 04:37:55,570 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDQzNzU1', 'Timestamp': '20240911043755', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254797076798', 'PartyB': 827142, 'PhoneNumber': '254797076798', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-2944', 'TransactionDesc': 'Some payment'}
2024-09-11 04:37:55,572 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:37:56,378 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 04:37:56,384 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076715655', 'CheckoutRequestID': 'ws_CO_11092024073756175797076798', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 04:42:01,246 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8270871', 'CheckoutRequestID': 'ws_CO_11092024074152984705574420', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 04:42:01,247 - INFO - {'updated_data': 'callback data began'}
2024-09-11 04:42:01,247 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8270871', 'CheckoutRequestID': 'ws_CO_11092024074152984705574420', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 04:42:01,404 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 04:42:01,784 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 04:42:01,785 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 04:42:02,008 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 04:43:43,874 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794402235', 'CheckoutRequestID': 'ws_CO_11092024074333375705574420', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}"}
2024-09-11 04:43:43,874 - INFO - {'updated_data': 'callback data began'}
2024-09-11 04:43:43,874 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794402235', 'CheckoutRequestID': 'ws_CO_11092024074333375705574420', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}}
2024-09-11 04:43:44,025 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 04:43:44,240 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 04:43:44,241 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 04:43:44,783 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 04:44:31,653 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 04:44:31,808 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 04:44:31,809 - INFO - {'updated': 'initiated stk query for ws_CO_11092024074340399727933900 827142 '}
2024-09-11 04:44:31,870 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:44:32,458 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 04:44:32,459 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer V2Ok2zZdxqosfC6I6a6G0x1vCxS9'}"}
2024-09-11 04:44:32,460 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDQ0NDMx', 'Timestamp': '20240911044431', 'CheckoutRequestID': 'ws_CO_11092024074340399727933900'}"}
2024-09-11 04:44:32,461 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:44:33,079 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 04:44:33,080 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171532502', 'CheckoutRequestID': 'ws_CO_11092024074340399727933900', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024074340399727933900 827142"}
2024-09-11 04:44:33,207 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 04:44:33,390 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 04:44:33,391 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 04:44:33,904 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 04:46:28,308 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 04:46:28,332 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 04:46:28,333 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 04:51:59,314 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 04:51:59,547 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 04:51:59,548 - INFO - there is a test coming
2024-09-11 04:51:59,548 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 04:51:59,604 - INFO - {'updated_data': 'the data is now as 254726875138'}
2024-09-11 04:51:59,605 - INFO - the data is now as 254726875138
2024-09-11 04:51:59,627 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 04:51:59,627 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 04:51:59,628 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:52:00,382 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 04:52:00,384 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer MA1DiFnVnnVz2mFc5pvcGP7Cdt5h'}"}
2024-09-11 04:52:00,385 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDQ1MjAw', 'Timestamp': '20240911045200', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '60000', 'PartyA': '254726875138', 'PartyB': 899885, 'PhoneNumber': '254726875138', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054238', 'TransactionDesc': 'Some payment'}
2024-09-11 04:52:00,386 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:52:01,153 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 04:52:01,159 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585054701125', 'CheckoutRequestID': 'ws_CO_11092024075200931726875138', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 04:52:33,158 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 04:52:33,354 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 04:52:33,355 - INFO - {'updated': 'initiated stk query for ws_CO_11092024075222113720856658 899885 '}
2024-09-11 04:52:33,419 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:52:34,017 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 04:52:34,019 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 75T39jXoLVoia6NlNTAcJ8HuE4CV'}"}
2024-09-11 04:52:34,019 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDQ1MjMz', 'Timestamp': '20240911045233', 'CheckoutRequestID': 'ws_CO_11092024075222113720856658'}"}
2024-09-11 04:52:34,021 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:52:34,767 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 04:52:34,768 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585054701840', 'CheckoutRequestID': 'ws_CO_11092024075222113720856658', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024075222113720856658 899885"}
2024-09-11 04:52:34,890 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 04:52:35,082 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 04:52:35,084 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 04:52:35,290 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 04:52:58,307 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 04:52:58,491 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 04:52:58,491 - INFO - there is a test coming
2024-09-11 04:52:58,491 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 04:52:58,546 - INFO - {'updated_data': 'the data is now as 254725489815'}
2024-09-11 04:52:58,546 - INFO - the data is now as 254725489815
2024-09-11 04:52:58,576 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 04:52:58,576 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 04:52:58,578 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:52:59,141 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 04:52:59,143 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer HwveSd4AG10Bslzild0CVgZclw2d'}"}
2024-09-11 04:52:59,144 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDQ1MjU5', 'Timestamp': '20240911045259', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254725489815', 'PartyB': 827142, 'PhoneNumber': '254725489815', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-29023', 'TransactionDesc': 'Some payment'}
2024-09-11 04:52:59,145 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:52:59,877 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 04:52:59,888 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171053077', 'CheckoutRequestID': 'ws_CO_11092024075259673725489815', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 04:53:39,192 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171053491', 'CheckoutRequestID': 'ws_CO_11092024075326937724942758', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 15200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB06NA82G'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911075338}, {'Name': 'PhoneNumber', 'Value': 254724942758}]}}}}"}
2024-09-11 04:53:39,192 - INFO - {'updated_data': 'callback data began'}
2024-09-11 04:53:39,192 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171053491', 'CheckoutRequestID': 'ws_CO_11092024075326937724942758', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 15200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB06NA82G'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911075338}, {'Name': 'PhoneNumber', 'Value': 254724942758}]}}}}}
2024-09-11 04:53:39,360 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 04:53:39,841 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 04:53:39,843 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 04:53:40,362 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 04:58:20,176 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 04:58:20,369 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 04:58:20,370 - INFO - {'updated': 'initiated stk query for ws_CO_11092024075806754799174341 899885 '}
2024-09-11 04:58:20,451 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:58:21,047 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 04:58:21,049 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 5XfTWunvhKNcIEIsekjWAOFxgnsG'}"}
2024-09-11 04:58:21,049 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDQ1ODIw', 'Timestamp': '20240911045820', 'CheckoutRequestID': 'ws_CO_11092024075806754799174341'}"}
2024-09-11 04:58:21,050 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:58:21,791 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 04:58:21,791 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171545442', 'CheckoutRequestID': 'ws_CO_11092024075806754799174341', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024075806754799174341 899885"}
2024-09-11 04:58:21,914 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 04:58:22,106 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 04:58:22,107 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 04:58:22,323 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:00:33,744 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:00:33,886 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:00:33,887 - INFO - there is a test coming
2024-09-11 05:00:33,887 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 05:00:33,933 - INFO - {'updated_data': 'the data is now as 254702544258'}
2024-09-11 05:00:33,933 - INFO - the data is now as 254702544258
2024-09-11 05:00:33,950 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 05:00:33,950 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 05:00:33,951 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:00:34,549 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:00:34,551 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer LM8j4jYpcQQvGzSWy7a8pkVQ2iOc'}"}
2024-09-11 05:00:34,552 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDUwMDM0', 'Timestamp': '20240911050034', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254702544258', 'PartyB': 827142, 'PhoneNumber': '254702544258', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-50884', 'TransactionDesc': 'Some payment'}
2024-09-11 05:00:34,553 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:00:35,572 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 05:00:35,578 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8310633', 'CheckoutRequestID': 'ws_CO_11092024080035078702544258', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 05:00:51,629 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8310633', 'CheckoutRequestID': 'ws_CO_11092024080035078702544258', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB56O1KOZ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911080051}, {'Name': 'PhoneNumber', 'Value': 254702544258}]}}}}"}
2024-09-11 05:00:51,629 - INFO - {'updated_data': 'callback data began'}
2024-09-11 05:00:51,630 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8310633', 'CheckoutRequestID': 'ws_CO_11092024080035078702544258', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB56O1KOZ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911080051}, {'Name': 'PhoneNumber', 'Value': 254702544258}]}}}}}
2024-09-11 05:00:51,796 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:00:52,313 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:00:52,314 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:00:52,833 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:00:53,181 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:00:53,330 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:00:53,331 - INFO - {'updated': 'initiated stk query for ws_CO_11092024080038477728179166 899885 '}
2024-09-11 05:00:53,394 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:00:53,980 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:00:53,983 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 66nrp0EUfMzvEwc8WCYyGywD9MZ4'}"}
2024-09-11 05:00:53,983 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDUwMDUz', 'Timestamp': '20240911050053', 'CheckoutRequestID': 'ws_CO_11092024080038477728179166'}"}
2024-09-11 05:00:53,984 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:00:54,710 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 05:00:54,710 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024080038477728179166', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024080038477728179166 899885"}
2024-09-11 05:00:54,713 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 05:00:56,181 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:00:56,330 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:00:56,330 - INFO - {'updated': 'initiated stk query for ws_CO_11092024080035078702544258 827142 '}
2024-09-11 05:00:56,420 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:00:56,993 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:00:56,995 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer UBN0bxsFKKASdfKoZZHmE9neDniA'}"}
2024-09-11 05:00:56,996 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDUwMDU2', 'Timestamp': '20240911050056', 'CheckoutRequestID': 'ws_CO_11092024080035078702544258'}"}
2024-09-11 05:00:56,997 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:00:57,726 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 05:00:57,726 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8310633', 'CheckoutRequestID': 'ws_CO_11092024080035078702544258', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024080035078702544258 827142"}
2024-09-11 05:00:57,847 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:00:58,031 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:00:58,032 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:00:58,240 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:00:59,598 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:00:59,775 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:00:59,776 - INFO - {'updated': 'initiated stk query for ws_CO_11092024080038477728179166 899885 '}
2024-09-11 05:00:59,843 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:01:00,420 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:01:00,422 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 7Dy3khRVGAiQQnYjYMRpjK7SvBiz'}"}
2024-09-11 05:01:00,423 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDUwMDU5', 'Timestamp': '20240911050059', 'CheckoutRequestID': 'ws_CO_11092024080038477728179166'}"}
2024-09-11 05:01:00,424 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:01:01,080 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 05:01:01,081 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024080038477728179166', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024080038477728179166 899885"}
2024-09-11 05:01:01,084 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 05:18:09,304 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8349067', 'CheckoutRequestID': 'ws_CO_11092024081757312724467923', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3578.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB66PYE5M'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911081808}, {'Name': 'PhoneNumber', 'Value': 254724467923}]}}}}"}
2024-09-11 05:18:09,312 - INFO - {'updated_data': 'callback data began'}
2024-09-11 05:18:09,312 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8349067', 'CheckoutRequestID': 'ws_CO_11092024081757312724467923', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3578.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB66PYE5M'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911081808}, {'Name': 'PhoneNumber', 'Value': 254724467923}]}}}}}
2024-09-11 05:18:09,505 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:18:09,705 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:18:09,707 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:18:09,932 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:20:16,654 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:20:16,915 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:20:16,915 - INFO - there is a test coming
2024-09-11 05:20:16,916 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 05:20:16,964 - INFO - {'updated_data': 'the data is now as 254791485420'}
2024-09-11 05:20:16,965 - INFO - the data is now as 254791485420
2024-09-11 05:20:16,983 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 05:20:16,983 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 05:20:16,984 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:20:17,651 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:20:17,653 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer cYraDxdes1fVGLcLo95AqSJM9x2Y'}"}
2024-09-11 05:20:17,653 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDUyMDE3', 'Timestamp': '20240911052017', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1320', 'PartyA': '254791485420', 'PartyB': 827142, 'PhoneNumber': '254791485420', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-2829', 'TransactionDesc': 'Some payment'}
2024-09-11 05:20:17,654 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:20:18,410 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 05:20:18,416 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee598714844', 'CheckoutRequestID': 'ws_CO_11092024082018206791485420', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 05:27:02,239 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:27:02,373 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:27:02,374 - INFO - {'updated': 'initiated stk query for ws_CO_11092024082631003720892277 827142 '}
2024-09-11 05:27:02,434 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:27:03,045 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:27:03,048 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer vdTByx5MKWXO3PmR0fPrzJ19bzVB'}"}
2024-09-11 05:27:03,048 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDUyNzAy', 'Timestamp': '20240911052702', 'CheckoutRequestID': 'ws_CO_11092024082631003720892277'}"}
2024-09-11 05:27:03,056 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:27:03,679 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 05:27:03,679 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076760249', 'CheckoutRequestID': 'ws_CO_11092024082631003720892277', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024082631003720892277 827142"}
2024-09-11 05:27:03,880 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:27:04,278 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:27:04,279 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:27:04,481 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:27:31,564 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:27:32,394 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:27:32,395 - INFO - there is a test coming
2024-09-11 05:27:32,395 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 05:27:32,445 - INFO - {'updated_data': 'the data is now as 254722929205'}
2024-09-11 05:27:32,445 - INFO - the data is now as 254722929205
2024-09-11 05:27:32,474 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 05:27:32,474 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 05:27:32,475 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:27:33,046 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:27:33,048 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 2rsTpUuj5sYFlUpyglGV27hFBpbw'}"}
2024-09-11 05:27:33,049 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDUyNzMz', 'Timestamp': '20240911052733', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254722929205', 'PartyB': 827142, 'PhoneNumber': '254722929205', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-25202', 'TransactionDesc': 'Some payment'}
2024-09-11 05:27:33,050 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:27:33,851 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 05:27:33,858 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8370093', 'CheckoutRequestID': 'ws_CO_11092024082733612722929205', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 05:27:54,796 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:27:54,945 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:27:54,945 - INFO - {'updated': 'initiated stk query for ws_CO_11092024082733612722929205 827142 '}
2024-09-11 05:27:55,001 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:27:55,583 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:27:55,584 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 9Za7VOOfZJhMkHGIsADO8V1XTs8b'}"}
2024-09-11 05:27:55,585 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDUyNzU1', 'Timestamp': '20240911052755', 'CheckoutRequestID': 'ws_CO_11092024082733612722929205'}"}
2024-09-11 05:27:55,586 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:27:56,340 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 05:27:56,341 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024082733612722929205', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024082733612722929205 827142"}
2024-09-11 05:27:56,343 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 05:42:55,042 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:42:55,201 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:42:55,202 - INFO - there is a test coming
2024-09-11 05:42:55,202 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 05:42:55,254 - INFO - {'updated_data': 'the data is now as 254714075750'}
2024-09-11 05:42:55,254 - INFO - the data is now as 254714075750
2024-09-11 05:42:55,275 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 05:42:55,275 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 05:42:55,276 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:42:56,030 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:42:56,032 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer VkpAOPmF5bdCkzxm44orTFlzszAy'}"}
2024-09-11 05:42:56,032 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDU0MjU2', 'Timestamp': '20240911054256', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254714075750', 'PartyB': 827142, 'PhoneNumber': '254714075750', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-172183', 'TransactionDesc': 'Some payment'}
2024-09-11 05:42:56,033 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:42:56,858 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 05:42:56,865 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585054815212', 'CheckoutRequestID': 'ws_CO_11092024084256568714075750', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 05:47:24,934 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:47:25,116 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:47:25,117 - INFO - there is a test coming
2024-09-11 05:47:25,117 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 05:47:25,156 - INFO - {'updated_data': 'the data is now as 254719801447'}
2024-09-11 05:47:25,156 - INFO - the data is now as 254719801447
2024-09-11 05:47:25,178 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 05:47:25,178 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 05:47:25,183 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:47:25,919 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:47:25,921 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer vEAlsea8T83TkZoR3MbNKqgsFnCe'}"}
2024-09-11 05:47:25,930 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDU0NzI1', 'Timestamp': '20240911054725', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254719801447', 'PartyB': 827142, 'PhoneNumber': '254719801447', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-20983', 'TransactionDesc': 'Some payment'}
2024-09-11 05:47:25,932 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:47:26,787 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 05:47:26,793 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585054825986', 'CheckoutRequestID': 'ws_CO_11092024084726579719801447', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 05:48:03,286 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:48:03,417 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:48:03,417 - INFO - {'updated': 'initiated stk query for ws_CO_11092024084726579719801447 827142 '}
2024-09-11 05:48:03,483 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:48:04,068 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:48:04,070 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer XAM5A0hf38dE7sGyc97d71ZSB0Y2'}"}
2024-09-11 05:48:04,070 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDU0ODAz', 'Timestamp': '20240911054803', 'CheckoutRequestID': 'ws_CO_11092024084726579719801447'}"}
2024-09-11 05:48:04,071 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:48:04,706 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 05:48:04,709 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585054825986', 'CheckoutRequestID': 'ws_CO_11092024084726579719801447', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024084726579719801447 827142"}
2024-09-11 05:48:04,825 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:48:05,009 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:48:05,010 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:48:05,221 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:48:10,971 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171105551', 'CheckoutRequestID': 'ws_CO_11092024084748841723984371', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 9241.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB96TFDLZ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911084810}, {'Name': 'PhoneNumber', 'Value': 254723984371}]}}}}"}
2024-09-11 05:48:10,972 - INFO - {'updated_data': 'callback data began'}
2024-09-11 05:48:10,972 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171105551', 'CheckoutRequestID': 'ws_CO_11092024084748841723984371', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 9241.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB96TFDLZ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911084810}, {'Name': 'PhoneNumber', 'Value': 254723984371}]}}}}}
2024-09-11 05:48:11,142 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:48:11,329 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:48:11,330 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:48:11,533 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:50:43,772 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:50:43,946 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:50:43,947 - INFO - there is a test coming
2024-09-11 05:50:43,947 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 05:50:44,004 - INFO - {'updated_data': 'the data is now as 254713626849'}
2024-09-11 05:50:44,005 - INFO - the data is now as 254713626849
2024-09-11 05:50:44,023 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 05:50:44,023 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 05:50:44,024 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:50:44,630 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:50:44,633 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer MTwfWl1emAdmipPURIKPWfiRWrMF'}"}
2024-09-11 05:50:44,634 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDU1MDQ0', 'Timestamp': '20240911055044', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '6000', 'PartyA': '254713626849', 'PartyB': 827142, 'PhoneNumber': '254713626849', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-172677', 'TransactionDesc': 'Some payment'}
2024-09-11 05:50:44,635 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:50:45,397 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 05:50:45,404 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171596238', 'CheckoutRequestID': 'ws_CO_11092024085045181713626849', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 05:52:31,666 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:52:31,830 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:52:31,830 - INFO - there is a test coming
2024-09-11 05:52:31,831 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 05:52:31,879 - INFO - {'updated_data': 'the data is now as 254719801447'}
2024-09-11 05:52:31,879 - INFO - the data is now as 254719801447
2024-09-11 05:52:31,913 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 05:52:31,914 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 05:52:31,915 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:52:32,782 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:52:32,784 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer u3ceWmL4oUdKBvQN7FZtiHGXT0AN'}"}
2024-09-11 05:52:32,784 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDU1MjMy', 'Timestamp': '20240911055232', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2100', 'PartyA': '254719801447', 'PartyB': 827142, 'PhoneNumber': '254719801447', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '121-38098', 'TransactionDesc': 'Some payment'}
2024-09-11 05:52:32,786 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:52:33,566 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 05:52:33,573 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208794468104', 'CheckoutRequestID': 'ws_CO_11092024085233330719801447', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 05:52:44,158 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794468104', 'CheckoutRequestID': 'ws_CO_11092024085233330719801447', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB76TYN4B'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911085243}, {'Name': 'PhoneNumber', 'Value': 254719801447}]}}}}"}
2024-09-11 05:52:44,158 - INFO - {'updated_data': 'callback data began'}
2024-09-11 05:52:44,158 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794468104', 'CheckoutRequestID': 'ws_CO_11092024085233330719801447', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB76TYN4B'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911085243}, {'Name': 'PhoneNumber', 'Value': 254719801447}]}}}}}
2024-09-11 05:52:44,333 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:52:44,841 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:52:44,842 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:52:45,365 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:52:54,407 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:52:54,564 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:52:54,565 - INFO - {'updated': 'initiated stk query for ws_CO_11092024085233330719801447 827142 '}
2024-09-11 05:52:54,619 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:52:55,188 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:52:55,191 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer UKY2COCqmaj2Ag5Agz6PCGqMkkgR'}"}
2024-09-11 05:52:55,192 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDU1MjU0', 'Timestamp': '20240911055254', 'CheckoutRequestID': 'ws_CO_11092024085233330719801447'}"}
2024-09-11 05:52:55,193 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:52:55,825 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 05:52:55,825 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208794468104', 'CheckoutRequestID': 'ws_CO_11092024085233330719801447', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024085233330719801447 827142"}
2024-09-11 05:52:55,950 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:52:56,143 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:52:56,144 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:52:56,366 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:54:42,944 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:54:43,101 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:54:43,102 - INFO - there is a test coming
2024-09-11 05:54:43,103 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 05:54:43,150 - INFO - {'updated_data': 'the data is now as 254724617643'}
2024-09-11 05:54:43,151 - INFO - the data is now as 254724617643
2024-09-11 05:54:43,170 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 05:54:43,170 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 05:54:43,171 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:54:43,763 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:54:43,765 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer M2SrGfE87y5hAeHAGHlHGiAtOtUp'}"}
2024-09-11 05:54:43,765 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDU1NDQz', 'Timestamp': '20240911055443', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254724617643', 'PartyB': 899885, 'PhoneNumber': '254724617643', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054247', 'TransactionDesc': 'Some payment'}
2024-09-11 05:54:43,767 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:54:44,595 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 05:54:44,602 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181372157', 'CheckoutRequestID': 'ws_CO_11092024085444294724617643', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 05:54:55,442 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:54:55,600 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:54:55,601 - INFO - {'updated': 'initiated stk query for ws_CO_11092024085444294724617643 899885 '}
2024-09-11 05:54:55,658 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:54:56,224 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:54:56,226 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer UtvZMZQGc7SPnSKLkWk8F3bOhKAD'}"}
2024-09-11 05:54:56,227 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDU1NDU1', 'Timestamp': '20240911055455', 'CheckoutRequestID': 'ws_CO_11092024085444294724617643'}"}
2024-09-11 05:54:56,228 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:54:56,964 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 05:54:56,964 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024085444294724617643', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024085444294724617643 899885"}
2024-09-11 05:54:56,970 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 05:55:39,341 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:55:39,481 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:55:39,484 - INFO - {'updated': 'initiated stk query for ws_CO_11092024085452671721453628 899885 '}
2024-09-11 05:55:39,569 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:55:40,177 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:55:40,179 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 6lA4hcsZTdIXaxP6G22GwwRqwZbd'}"}
2024-09-11 05:55:40,180 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDU1NTM5', 'Timestamp': '20240911055539', 'CheckoutRequestID': 'ws_CO_11092024085452671721453628'}"}
2024-09-11 05:55:40,186 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:55:40,926 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 05:55:40,927 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585054843824', 'CheckoutRequestID': 'ws_CO_11092024085452671721453628', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024085452671721453628 899885"}
2024-09-11 05:55:41,045 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:55:41,565 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:55:41,566 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:55:42,110 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:57:50,803 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:57:50,939 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:57:50,940 - INFO - there is a test coming
2024-09-11 05:57:50,940 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 05:57:50,986 - INFO - {'updated_data': 'the data is now as 254725716745'}
2024-09-11 05:57:50,986 - INFO - the data is now as 254725716745
2024-09-11 05:57:51,011 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 05:57:51,012 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 05:57:51,013 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:57:51,613 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:57:51,616 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer KZLQIyE3rBk0ZZrjW9rkvAfkI8Ec'}"}
2024-09-11 05:57:51,618 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDU1NzUx', 'Timestamp': '20240911055751', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254725716745', 'PartyB': 827142, 'PhoneNumber': '254725716745', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-4585', 'TransactionDesc': 'Some payment'}
2024-09-11 05:57:51,619 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:57:52,454 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 05:57:52,460 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208794473415', 'CheckoutRequestID': 'ws_CO_11092024085752232725716745', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 05:58:14,187 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:58:14,398 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:58:14,399 - INFO - {'updated': 'initiated stk query for ws_CO_11092024085752232725716745 827142 '}
2024-09-11 05:58:14,464 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:58:15,036 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:58:15,038 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer QS3yqzT0FafpHygrGwWru9JnuSGe'}"}
2024-09-11 05:58:15,038 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDU1ODE0', 'Timestamp': '20240911055814', 'CheckoutRequestID': 'ws_CO_11092024085752232725716745'}"}
2024-09-11 05:58:15,040 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:58:15,687 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 05:58:15,688 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208794473415', 'CheckoutRequestID': 'ws_CO_11092024085752232725716745', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024085752232725716745 827142"}
2024-09-11 05:58:15,814 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:58:16,310 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:58:16,312 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:58:16,532 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:03:41,330 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585054864779', 'CheckoutRequestID': 'ws_CO_11092024090332136799995723', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 900.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB96V8CG1'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911090340}, {'Name': 'PhoneNumber', 'Value': 254799995723}]}}}}"}
2024-09-11 06:03:41,330 - INFO - {'updated_data': 'callback data began'}
2024-09-11 06:03:41,330 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585054864779', 'CheckoutRequestID': 'ws_CO_11092024090332136799995723', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 900.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB96V8CG1'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911090340}, {'Name': 'PhoneNumber', 'Value': 254799995723}]}}}}}
2024-09-11 06:03:41,494 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:03:41,863 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:03:41,865 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:03:42,081 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:03:43,878 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:03:44,061 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:03:44,062 - INFO - {'updated': 'initiated stk query for ws_CO_11092024090332136799995723 899885 '}
2024-09-11 06:03:44,242 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:03:44,837 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:03:44,839 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer oQiSG5JFd5i4S5pzwKINqMI2g8K9'}"}
2024-09-11 06:03:44,840 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDYwMzQ0', 'Timestamp': '20240911060344', 'CheckoutRequestID': 'ws_CO_11092024090332136799995723'}"}
2024-09-11 06:03:44,841 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:03:45,473 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 06:03:45,474 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585054864779', 'CheckoutRequestID': 'ws_CO_11092024090332136799995723', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024090332136799995723 899885"}
2024-09-11 06:03:45,591 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:03:46,092 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:03:46,093 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:03:46,304 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:05:08,306 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171122582', 'CheckoutRequestID': 'ws_CO_11092024090457515701485064', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB16VEB13'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911090506}, {'Name': 'PhoneNumber', 'Value': 254701485064}]}}}}"}
2024-09-11 06:05:08,307 - INFO - {'updated_data': 'callback data began'}
2024-09-11 06:05:08,307 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171122582', 'CheckoutRequestID': 'ws_CO_11092024090457515701485064', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB16VEB13'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911090506}, {'Name': 'PhoneNumber', 'Value': 254701485064}]}}}}}
2024-09-11 06:05:08,488 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:05:08,596 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:05:08,774 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:05:08,775 - INFO - {'updated': 'initiated stk query for ws_CO_11092024090457515701485064 899885 '}
2024-09-11 06:05:08,840 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:05:08,980 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:05:08,981 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:05:09,212 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:05:09,505 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:05:09,507 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer F9CObuAyTe077jJeMRCk5KsAXgfD'}"}
2024-09-11 06:05:09,507 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDYwNTA4', 'Timestamp': '20240911060508', 'CheckoutRequestID': 'ws_CO_11092024090457515701485064'}"}
2024-09-11 06:05:09,509 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:05:10,156 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 06:05:10,156 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171122582', 'CheckoutRequestID': 'ws_CO_11092024090457515701485064', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024090457515701485064 899885"}
2024-09-11 06:05:10,288 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:05:10,498 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:05:10,500 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:05:10,714 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:06:03,643 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:06:03,782 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:06:03,783 - INFO - there is a test coming
2024-09-11 06:06:03,783 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 06:06:03,828 - INFO - {'updated_data': 'the data is now as 254725533187'}
2024-09-11 06:06:03,828 - INFO - the data is now as 254725533187
2024-09-11 06:06:03,845 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 06:06:03,846 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 06:06:03,847 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:06:04,420 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:06:04,423 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Gnf4slkA9zl81ZfbBT1qXOLT3Cei'}"}
2024-09-11 06:06:04,423 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDYwNjA0', 'Timestamp': '20240911060604', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '163', 'PartyA': '254725533187', 'PartyB': 827142, 'PhoneNumber': '254725533187', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '264-6693', 'TransactionDesc': 'Some payment'}
2024-09-11 06:06:04,425 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:06:05,304 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 06:06:05,310 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88793298', 'CheckoutRequestID': 'ws_CO_11092024090605072725533187', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 06:06:05,558 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:06:05,753 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:06:05,754 - INFO - there is a test coming
2024-09-11 06:06:05,754 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 06:06:05,801 - INFO - {'updated_data': 'the data is now as 254720975661'}
2024-09-11 06:06:05,801 - INFO - the data is now as 254720975661
2024-09-11 06:06:05,818 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 06:06:05,818 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 06:06:05,820 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:06:06,472 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:06:06,474 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 0AHWiwzGS3MMYptKFU1Z4oGIEosR'}"}
2024-09-11 06:06:06,475 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDYwNjA2', 'Timestamp': '20240911060606', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2500', 'PartyA': '254720975661', 'PartyB': 827142, 'PhoneNumber': '254720975661', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-41401', 'TransactionDesc': 'Some payment'}
2024-09-11 06:06:06,476 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:06:07,434 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 06:06:07,440 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181399372', 'CheckoutRequestID': 'ws_CO_11092024090607097720975661', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 06:06:16,827 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:06:16,964 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:06:16,964 - INFO - {'updated': 'initiated stk query for ws_CO_11092024090605072725533187 827142 '}
2024-09-11 06:06:17,030 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:06:17,599 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:06:17,601 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer KHyMFOYI2IwLeWsP1RKy2PJzyytE'}"}
2024-09-11 06:06:17,602 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDYwNjE3', 'Timestamp': '20240911060617', 'CheckoutRequestID': 'ws_CO_11092024090605072725533187'}"}
2024-09-11 06:06:17,605 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:06:18,366 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 06:06:18,367 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88793298', 'CheckoutRequestID': 'ws_CO_11092024090605072725533187', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024090605072725533187 827142"}
2024-09-11 06:06:18,501 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:06:18,690 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:06:18,691 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:06:18,917 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:06:25,481 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8462209', 'CheckoutRequestID': 'ws_CO_11092024090609932722815302', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 12088.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB16VJTCJ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911090624}, {'Name': 'PhoneNumber', 'Value': 254722815302}]}}}}"}
2024-09-11 06:06:25,481 - INFO - {'updated_data': 'callback data began'}
2024-09-11 06:06:25,481 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8462209', 'CheckoutRequestID': 'ws_CO_11092024090609932722815302', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 12088.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB16VJTCJ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911090624}, {'Name': 'PhoneNumber', 'Value': 254722815302}]}}}}}
2024-09-11 06:06:25,639 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:06:25,823 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:06:25,824 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:06:26,030 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:06:49,331 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:06:49,350 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-11 06:06:49,351 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 06:07:29,959 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171125171', 'CheckoutRequestID': 'ws_CO_11092024090720081712734735', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 6000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB76VOGGJ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911090729}, {'Name': 'PhoneNumber', 'Value': 254712734735}]}}}}"}
2024-09-11 06:07:29,960 - INFO - {'updated_data': 'callback data began'}
2024-09-11 06:07:29,960 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171125171', 'CheckoutRequestID': 'ws_CO_11092024090720081712734735', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 6000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB76VOGGJ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911090729}, {'Name': 'PhoneNumber', 'Value': 254712734735}]}}}}}
2024-09-11 06:07:30,143 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:07:30,326 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:07:30,327 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:07:30,839 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:08:54,313 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:08:54,510 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:08:54,511 - INFO - {'updated': 'initiated stk query for ws_CO_11092024090843105722784965 899885 '}
2024-09-11 06:08:54,567 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:08:55,141 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:08:55,143 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer XJMYLmFiwVwpkGpUyk9JeRdxZ2V3'}"}
2024-09-11 06:08:55,143 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDYwODU0', 'Timestamp': '20240911060854', 'CheckoutRequestID': 'ws_CO_11092024090843105722784965'}"}
2024-09-11 06:08:55,150 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:08:55,827 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 06:08:55,828 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024090843105722784965', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024090843105722784965 899885"}
2024-09-11 06:08:55,840 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 06:10:33,348 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:10:33,503 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:10:33,504 - INFO - there is a test coming
2024-09-11 06:10:33,504 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 06:10:33,547 - INFO - {'updated_data': 'the data is now as 254720123110'}
2024-09-11 06:10:33,548 - INFO - the data is now as 254720123110
2024-09-11 06:10:33,571 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 06:10:33,571 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 06:10:33,572 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:10:34,260 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:10:34,262 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer jrWLGhEGfdKDAOq9XErEGEesQkbQ'}"}
2024-09-11 06:10:34,262 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDYxMDM0', 'Timestamp': '20240911061034', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254720123110', 'PartyB': 827142, 'PhoneNumber': '254720123110', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-163657', 'TransactionDesc': 'Some payment'}
2024-09-11 06:10:34,264 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:10:35,137 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 06:10:35,143 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181409977', 'CheckoutRequestID': 'ws_CO_11092024091034893720123110', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 06:10:46,135 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:10:46,168 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 06:10:46,169 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 06:14:31,791 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:14:31,921 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:14:31,922 - INFO - {'updated': 'initiated stk query for ws_CO_11092024091420566757356318 827142 '}
2024-09-11 06:14:31,986 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:14:32,651 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:14:32,652 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer s42ocQibOR8bPHQWeTNDQGbWZqpZ'}"}
2024-09-11 06:14:32,653 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDYxNDMx', 'Timestamp': '20240911061431', 'CheckoutRequestID': 'ws_CO_11092024091420566757356318'}"}
2024-09-11 06:14:32,654 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:14:33,389 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 367
2024-09-11 06:14:33,390 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181419030', 'CheckoutRequestID': 'ws_CO_11092024091420566757356318', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_11092024091420566757356318 827142"}
2024-09-11 06:14:33,530 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:14:33,718 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:14:33,719 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:14:34,241 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:14:38,140 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8482383', 'CheckoutRequestID': 'ws_CO_11092024091428601723400897', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3840.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB56WIR8T'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911091437}, {'Name': 'PhoneNumber', 'Value': 254723400897}]}}}}"}
2024-09-11 06:14:38,140 - INFO - {'updated_data': 'callback data began'}
2024-09-11 06:14:38,140 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8482383', 'CheckoutRequestID': 'ws_CO_11092024091428601723400897', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3840.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB56WIR8T'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911091437}, {'Name': 'PhoneNumber', 'Value': 254723400897}]}}}}}
2024-09-11 06:14:38,304 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:14:38,500 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:14:38,501 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:14:38,707 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:14:40,973 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:14:41,107 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:14:41,108 - INFO - {'updated': 'initiated stk query for ws_CO_11092024091428601723400897 827142 '}
2024-09-11 06:14:41,164 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:14:41,756 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:14:41,758 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer pT8lj56TMiIC4Iy1adf6FtHpq61O'}"}
2024-09-11 06:14:41,758 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDYxNDQx', 'Timestamp': '20240911061441', 'CheckoutRequestID': 'ws_CO_11092024091428601723400897'}"}
2024-09-11 06:14:41,760 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:14:42,414 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 06:14:42,415 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8482383', 'CheckoutRequestID': 'ws_CO_11092024091428601723400897', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024091428601723400897 827142"}
2024-09-11 06:14:42,529 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:14:42,712 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:14:42,713 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:14:42,919 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:16:17,184 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585054893808', 'CheckoutRequestID': 'ws_CO_11092024091608036723400897', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3840.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB56WPE8Z'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911091616}, {'Name': 'PhoneNumber', 'Value': 254723400897}]}}}}"}
2024-09-11 06:16:17,184 - INFO - {'updated_data': 'callback data began'}
2024-09-11 06:16:17,185 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585054893808', 'CheckoutRequestID': 'ws_CO_11092024091608036723400897', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3840.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB56WPE8Z'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911091616}, {'Name': 'PhoneNumber', 'Value': 254723400897}]}}}}}
2024-09-11 06:16:17,358 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:16:17,540 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:16:17,542 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:16:18,060 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:16:20,272 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:16:20,419 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:16:20,420 - INFO - {'updated': 'initiated stk query for ws_CO_11092024091608036723400897 827142 '}
2024-09-11 06:16:20,485 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:16:21,066 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:16:21,068 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer LThA5dw7yByJbnhuC3tlE2ciuRSG'}"}
2024-09-11 06:16:21,068 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDYxNjIw', 'Timestamp': '20240911061620', 'CheckoutRequestID': 'ws_CO_11092024091608036723400897'}"}
2024-09-11 06:16:21,069 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:16:21,680 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 06:16:21,681 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585054893808', 'CheckoutRequestID': 'ws_CO_11092024091608036723400897', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024091608036723400897 827142"}
2024-09-11 06:16:21,802 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:16:22,327 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:16:22,328 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:16:22,529 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:17:22,978 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:17:23,124 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:17:23,125 - INFO - there is a test coming
2024-09-11 06:17:23,125 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 06:17:23,176 - INFO - {'updated_data': 'the data is now as 254721276174'}
2024-09-11 06:17:23,176 - INFO - the data is now as 254721276174
2024-09-11 06:17:23,192 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 06:17:23,192 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 06:17:23,194 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:17:24,025 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:17:24,027 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 6jKoSS8lpRsJQEexbAOBpIVv9F0A'}"}
2024-09-11 06:17:24,028 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDYxNzI0', 'Timestamp': '20240911061724', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254721276174', 'PartyB': 899885, 'PhoneNumber': '254721276174', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA1647560LM-1726035442752', 'TransactionDesc': 'Some payment'}
2024-09-11 06:17:24,029 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:17:24,852 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 06:17:24,859 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171623219', 'CheckoutRequestID': 'ws_CO_11092024091724608721276174', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 06:19:06,702 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:19:06,822 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:19:06,823 - INFO - {'updated': 'initiated stk query for ws_CO_11092024091853003723400897 827142 '}
2024-09-11 06:19:06,898 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:19:07,497 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:19:07,499 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer GeWXYydNPMZ3vG5v9NGTVg5DBo9k'}"}
2024-09-11 06:19:07,499 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDYxOTA2', 'Timestamp': '20240911061906', 'CheckoutRequestID': 'ws_CO_11092024091853003723400897'}"}
2024-09-11 06:19:07,500 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:19:08,157 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 355
2024-09-11 06:19:08,159 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171624935', 'CheckoutRequestID': 'ws_CO_11092024091853003723400897', 'ResultCode': '17', 'ResultDesc': 'Rule limited.'} for ws_CO_11092024091853003723400897 827142"}
2024-09-11 06:19:08,279 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:19:08,492 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:19:08,493 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:19:09,160 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:19:27,579 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:19:27,614 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 06:19:27,616 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 06:19:57,576 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:19:57,760 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:19:57,761 - INFO - there is a test coming
2024-09-11 06:19:57,761 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 06:19:57,802 - INFO - {'updated_data': 'the data is now as 254723400897'}
2024-09-11 06:19:57,803 - INFO - the data is now as 254723400897
2024-09-11 06:19:57,819 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 06:19:57,819 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 06:19:57,820 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:19:58,414 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:19:58,416 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer QGwADydHiomA1MB0PyPwCMVT52Rw'}"}
2024-09-11 06:19:58,417 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDYxOTU4', 'Timestamp': '20240911061958', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2760', 'PartyA': '254723400897', 'PartyB': 827142, 'PhoneNumber': '254723400897', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-5955', 'TransactionDesc': 'Some payment'}
2024-09-11 06:19:58,418 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:19:59,237 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 06:19:59,243 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181432254', 'CheckoutRequestID': 'ws_CO_11092024091958942723400897', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 06:20:32,005 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181432254', 'CheckoutRequestID': 'ws_CO_11092024091958942723400897', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-11 06:20:32,005 - INFO - {'updated_data': 'callback data began'}
2024-09-11 06:20:32,005 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181432254', 'CheckoutRequestID': 'ws_CO_11092024091958942723400897', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-11 06:20:32,164 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:20:32,349 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:20:32,353 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:20:32,574 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:20:43,769 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:20:43,877 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:20:43,878 - INFO - {'updated': 'initiated stk query for ws_CO_11092024091958942723400897 827142 '}
2024-09-11 06:20:43,972 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:20:44,587 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:20:44,589 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 4gDxxsGpBCatuhFJXfjWrF789cNu'}"}
2024-09-11 06:20:44,590 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDYyMDQz', 'Timestamp': '20240911062043', 'CheckoutRequestID': 'ws_CO_11092024091958942723400897'}"}
2024-09-11 06:20:44,592 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:20:45,221 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 375
2024-09-11 06:20:45,222 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181432254', 'CheckoutRequestID': 'ws_CO_11092024091958942723400897', 'ResultCode': '1037', 'ResultDesc': 'DS timeout user cannot be reached'} for ws_CO_11092024091958942723400897 827142"}
2024-09-11 06:20:45,366 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:20:45,554 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:20:45,555 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:20:46,083 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:20:58,109 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:20:58,242 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:20:58,243 - INFO - there is a test coming
2024-09-11 06:20:58,243 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 06:20:58,301 - INFO - {'updated_data': 'the data is now as 254723927481'}
2024-09-11 06:20:58,302 - INFO - the data is now as 254723927481
2024-09-11 06:20:58,321 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 06:20:58,322 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 06:20:58,323 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:20:58,921 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:20:58,923 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ZKKHwQwrMb7xIC3rneEiOekx7cSA'}"}
2024-09-11 06:20:58,923 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDYyMDU4', 'Timestamp': '20240911062058', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254723927481', 'PartyB': 899885, 'PhoneNumber': '254723927481', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054182', 'TransactionDesc': 'Some payment'}
2024-09-11 06:20:58,925 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:20:59,754 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 06:20:59,760 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee598857433', 'CheckoutRequestID': 'ws_CO_11092024092059449723927481', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 06:21:12,650 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee598857433', 'CheckoutRequestID': 'ws_CO_11092024092059449723927481', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB56XAE7F'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911092112}, {'Name': 'PhoneNumber', 'Value': 254723927481}]}}}}"}
2024-09-11 06:21:12,651 - INFO - {'updated_data': 'callback data began'}
2024-09-11 06:21:12,651 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee598857433', 'CheckoutRequestID': 'ws_CO_11092024092059449723927481', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB56XAE7F'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911092112}, {'Name': 'PhoneNumber', 'Value': 254723927481}]}}}}}
2024-09-11 06:21:12,839 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:21:13,339 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:21:13,340 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:21:14,784 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:23:10,417 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:23:10,552 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:23:10,553 - INFO - there is a test coming
2024-09-11 06:23:10,553 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 06:23:10,599 - INFO - {'updated_data': 'the data is now as 254720619887'}
2024-09-11 06:23:10,600 - INFO - the data is now as 254720619887
2024-09-11 06:23:10,615 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 06:23:10,615 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 06:23:10,617 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:23:11,317 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:23:11,319 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer aarhjGc5S5I1OViuGMnNkYrhskTX'}"}
2024-09-11 06:23:11,319 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDYyMzEx', 'Timestamp': '20240911062311', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254720619887', 'PartyB': 827142, 'PhoneNumber': '254720619887', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-32849', 'TransactionDesc': 'Some payment'}
2024-09-11 06:23:11,320 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:23:12,048 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 06:23:12,055 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88810180', 'CheckoutRequestID': 'ws_CO_11092024092311827720619887', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 06:23:27,741 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88810180', 'CheckoutRequestID': 'ws_CO_11092024092311827720619887', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-11 06:23:27,741 - INFO - {'updated_data': 'callback data began'}
2024-09-11 06:23:27,741 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88810180', 'CheckoutRequestID': 'ws_CO_11092024092311827720619887', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-11 06:23:27,895 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:23:28,099 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:23:28,100 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:23:28,460 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:23:32,898 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:23:33,028 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:23:33,029 - INFO - {'updated': 'initiated stk query for ws_CO_11092024092311827720619887 827142 '}
2024-09-11 06:23:33,095 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:23:33,703 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:23:33,705 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer WRYvIv0WtxOklz3AHoDllLCqtcRE'}"}
2024-09-11 06:23:33,705 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDYyMzMz', 'Timestamp': '20240911062333', 'CheckoutRequestID': 'ws_CO_11092024092311827720619887'}"}
2024-09-11 06:23:33,706 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:23:34,340 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 376
2024-09-11 06:23:34,341 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88810180', 'CheckoutRequestID': 'ws_CO_11092024092311827720619887', 'ResultCode': '1037', 'ResultDesc': 'DS timeout user cannot be reached'} for ws_CO_11092024092311827720619887 827142"}
2024-09-11 06:23:34,465 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:23:34,667 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:23:34,669 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:23:34,887 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:24:15,684 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:24:15,810 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:24:15,811 - INFO - there is a test coming
2024-09-11 06:24:15,811 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 06:24:15,853 - INFO - {'updated_data': 'the data is now as 254723315918'}
2024-09-11 06:24:15,853 - INFO - the data is now as 254723315918
2024-09-11 06:24:15,874 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 06:24:15,874 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 06:24:15,875 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:24:16,443 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:24:16,445 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer LIOhADPHTey1AEMXGTJ6KeeABN9N'}"}
2024-09-11 06:24:16,446 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDYyNDE2', 'Timestamp': '20240911062416', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '8000', 'PartyA': '254723315918', 'PartyB': 899885, 'PhoneNumber': '254723315918', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054250', 'TransactionDesc': 'Some payment'}
2024-09-11 06:24:16,447 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:24:17,185 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 06:24:17,191 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518949489', 'CheckoutRequestID': 'ws_CO_11092024092416973723315918', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 06:24:29,290 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518949489', 'CheckoutRequestID': 'ws_CO_11092024092416973723315918', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 8000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB86XOBRM'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911092428}, {'Name': 'PhoneNumber', 'Value': 254723315918}]}}}}"}
2024-09-11 06:24:29,291 - INFO - {'updated_data': 'callback data began'}
2024-09-11 06:24:29,291 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518949489', 'CheckoutRequestID': 'ws_CO_11092024092416973723315918', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 8000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB86XOBRM'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911092428}, {'Name': 'PhoneNumber', 'Value': 254723315918}]}}}}}
2024-09-11 06:24:29,454 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:24:29,953 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:24:29,954 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:24:30,221 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:24:59,736 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:24:59,903 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:24:59,903 - INFO - there is a test coming
2024-09-11 06:24:59,904 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 06:24:59,951 - INFO - {'updated_data': 'the data is now as 254720619887'}
2024-09-11 06:24:59,952 - INFO - the data is now as 254720619887
2024-09-11 06:24:59,988 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 06:24:59,988 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 06:24:59,990 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:25:00,565 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:25:00,567 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer qLsf9zdbiDnGPAv3XiynUDocjaqm'}"}
2024-09-11 06:25:00,567 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDYyNTAw', 'Timestamp': '20240911062500', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254720619887', 'PartyB': 827142, 'PhoneNumber': '254720619887', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-32849', 'TransactionDesc': 'Some payment'}
2024-09-11 06:25:00,568 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:25:01,326 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 06:25:01,334 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee598867328', 'CheckoutRequestID': 'ws_CO_11092024092501111720619887', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 06:29:21,130 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171146710', 'CheckoutRequestID': 'ws_CO_11092024092912985728509235', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB16Y9L1P'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911092920}, {'Name': 'PhoneNumber', 'Value': 254728509235}]}}}}"}
2024-09-11 06:29:21,131 - INFO - {'updated_data': 'callback data began'}
2024-09-11 06:29:21,131 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171146710', 'CheckoutRequestID': 'ws_CO_11092024092912985728509235', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB16Y9L1P'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911092920}, {'Name': 'PhoneNumber', 'Value': 254728509235}]}}}}}
2024-09-11 06:29:21,332 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:29:21,534 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:29:21,536 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:29:21,774 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:29:24,232 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:29:24,410 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:29:24,411 - INFO - {'updated': 'initiated stk query for ws_CO_11092024092912985728509235 827142 '}
2024-09-11 06:29:24,477 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:29:25,146 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:29:25,148 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer NXHOsDvCJmXuuuU1ZtDuUpL5pYkj'}"}
2024-09-11 06:29:25,148 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDYyOTI0', 'Timestamp': '20240911062924', 'CheckoutRequestID': 'ws_CO_11092024092912985728509235'}"}
2024-09-11 06:29:25,149 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:29:25,873 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 06:29:25,874 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171146710', 'CheckoutRequestID': 'ws_CO_11092024092912985728509235', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024092912985728509235 827142"}
2024-09-11 06:29:25,999 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:29:26,193 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:29:26,194 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:29:26,434 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:30:39,319 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:30:39,441 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:30:39,442 - INFO - there is a test coming
2024-09-11 06:30:39,443 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 06:30:39,487 - INFO - {'updated_data': 'the data is now as 254720384268'}
2024-09-11 06:30:39,487 - INFO - the data is now as 254720384268
2024-09-11 06:30:39,506 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 06:30:39,506 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 06:30:39,508 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:30:40,353 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:30:40,355 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer FVSGZYIGnIANWEPYAaM6v9GguxOF'}"}
2024-09-11 06:30:40,356 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDYzMDQw', 'Timestamp': '20240911063040', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '4027', 'PartyA': '254720384268', 'PartyB': 827142, 'PhoneNumber': '254720384268', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-21602', 'TransactionDesc': 'Some payment'}
2024-09-11 06:30:40,357 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:30:41,127 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 06:30:41,139 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171636391', 'CheckoutRequestID': 'ws_CO_11092024093040908720384268', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 06:30:54,497 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171636391', 'CheckoutRequestID': 'ws_CO_11092024093040908720384268', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4027.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB96YG8F5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911093053}, {'Name': 'PhoneNumber', 'Value': 254720384268}]}}}}"}
2024-09-11 06:30:54,497 - INFO - {'updated_data': 'callback data began'}
2024-09-11 06:30:54,497 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171636391', 'CheckoutRequestID': 'ws_CO_11092024093040908720384268', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4027.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB96YG8F5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911093053}, {'Name': 'PhoneNumber', 'Value': 254720384268}]}}}}}
2024-09-11 06:30:54,667 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:30:55,056 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:30:55,057 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:30:55,272 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:39:43,307 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:39:43,438 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:39:43,438 - INFO - {'updated': 'initiated stk query for ws_CO_11092024093931662720408450 827142 '}
2024-09-11 06:39:43,496 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:39:44,186 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:39:44,188 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Y7HTNJoCQPJpUWvY4aXIirJzsN9F'}"}
2024-09-11 06:39:44,194 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDYzOTQz', 'Timestamp': '20240911063943', 'CheckoutRequestID': 'ws_CO_11092024093931662720408450'}"}
2024-09-11 06:39:44,195 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:39:44,957 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 06:39:44,958 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee598903760', 'CheckoutRequestID': 'ws_CO_11092024093931662720408450', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024093931662720408450 827142"}
2024-09-11 06:39:45,074 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:39:45,590 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:39:45,592 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:39:46,125 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:40:15,568 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:40:15,712 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:40:15,712 - INFO - there is a test coming
2024-09-11 06:40:15,713 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 06:40:15,757 - INFO - {'updated_data': 'the data is now as 254723400897'}
2024-09-11 06:40:15,757 - INFO - the data is now as 254723400897
2024-09-11 06:40:15,775 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 06:40:15,775 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 06:40:15,777 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:40:16,342 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:40:16,344 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer NSCFvJjbKFfU57X3Cjl2Gnzc1ubH'}"}
2024-09-11 06:40:16,345 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDY0MDE2', 'Timestamp': '20240911064016', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2760', 'PartyA': '254723400897', 'PartyB': 827142, 'PhoneNumber': '254723400897', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-5955', 'TransactionDesc': 'Some payment'}
2024-09-11 06:40:16,346 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:40:17,090 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 06:40:17,096 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585054954089', 'CheckoutRequestID': 'ws_CO_11092024094016884723400897', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 06:43:12,600 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170923662', 'CheckoutRequestID': 'ws_CO_11092024094241565722495015', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-11 06:43:12,602 - INFO - {'updated_data': 'callback data began'}
2024-09-11 06:43:12,614 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170923662', 'CheckoutRequestID': 'ws_CO_11092024094241565722495015', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-11 06:43:12,779 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:43:13,476 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:43:13,478 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:43:14,085 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:43:35,758 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:43:35,895 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:43:35,896 - INFO - {'updated': 'initiated stk query for ws_CO_11092024094314431722495015 827142 '}
2024-09-11 06:43:35,977 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:43:36,649 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:43:36,651 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer nrgeMcbuQtfMaD2xcQuyRlzh85lb'}"}
2024-09-11 06:43:36,652 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDY0MzM1', 'Timestamp': '20240911064335', 'CheckoutRequestID': 'ws_CO_11092024094314431722495015'}"}
2024-09-11 06:43:36,653 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:43:37,265 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 06:43:37,265 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024094314431722495015', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024094314431722495015 827142"}
2024-09-11 06:43:37,268 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 06:47:16,431 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:47:16,737 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:47:16,738 - INFO - there is a test coming
2024-09-11 06:47:16,738 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 06:47:16,780 - INFO - {'updated_data': 'the data is now as 254718204284'}
2024-09-11 06:47:16,781 - INFO - the data is now as 254718204284
2024-09-11 06:47:16,797 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 06:47:16,797 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 06:47:16,799 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:47:17,408 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:47:17,410 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 58K1AY1MTcw7eZeGfzqf9hSw72V5'}"}
2024-09-11 06:47:17,411 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDY0NzE3', 'Timestamp': '20240911064717', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2500', 'PartyA': '254718204284', 'PartyB': 827142, 'PhoneNumber': '254718204284', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-87142', 'TransactionDesc': 'Some payment'}
2024-09-11 06:47:17,412 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:47:18,257 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 06:47:18,265 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076841609', 'CheckoutRequestID': 'ws_CO_11092024094718031718204284', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 06:47:28,262 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076841609', 'CheckoutRequestID': 'ws_CO_11092024094718031718204284', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB470GV78'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911094727}, {'Name': 'PhoneNumber', 'Value': 254718204284}]}}}}"}
2024-09-11 06:47:28,262 - INFO - {'updated_data': 'callback data began'}
2024-09-11 06:47:28,263 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076841609', 'CheckoutRequestID': 'ws_CO_11092024094718031718204284', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB470GV78'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911094727}, {'Name': 'PhoneNumber', 'Value': 254718204284}]}}}}}
2024-09-11 06:47:28,426 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:47:28,851 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:47:28,852 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:47:29,068 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:47:52,852 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170929024', 'CheckoutRequestID': 'ws_CO_11092024094742829710902270', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB670IMJA'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911094752}, {'Name': 'PhoneNumber', 'Value': 254710902270}]}}}}"}
2024-09-11 06:47:52,853 - INFO - {'updated_data': 'callback data began'}
2024-09-11 06:47:52,854 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170929024', 'CheckoutRequestID': 'ws_CO_11092024094742829710902270', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB670IMJA'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911094752}, {'Name': 'PhoneNumber', 'Value': 254710902270}]}}}}}
2024-09-11 06:47:53,027 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:47:53,212 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:47:53,213 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:47:53,434 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:48:04,276 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:48:04,424 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:48:04,424 - INFO - {'updated': 'initiated stk query for ws_CO_11092024094742829710902270 827142 '}
2024-09-11 06:48:04,492 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:48:05,377 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:48:05,380 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer MDoHvdUrUGukXOBcm8NU8Geo83S8'}"}
2024-09-11 06:48:05,380 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDY0ODA0', 'Timestamp': '20240911064804', 'CheckoutRequestID': 'ws_CO_11092024094742829710902270'}"}
2024-09-11 06:48:05,381 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:48:06,011 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 06:48:06,011 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170929024', 'CheckoutRequestID': 'ws_CO_11092024094742829710902270', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024094742829710902270 827142"}
2024-09-11 06:48:06,154 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:48:06,654 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:48:06,656 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:48:06,885 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:48:22,566 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:48:22,742 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:48:22,743 - INFO - there is a test coming
2024-09-11 06:48:22,743 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 06:48:22,787 - INFO - {'updated_data': 'the data is now as 254720123031'}
2024-09-11 06:48:22,788 - INFO - the data is now as 254720123031
2024-09-11 06:48:22,805 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 06:48:22,805 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 06:48:22,807 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:48:23,366 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:48:23,368 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer jmnVfXcLRvOephr604teAXPRzaQi'}"}
2024-09-11 06:48:23,369 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDY0ODIz', 'Timestamp': '20240911064823', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '200000', 'PartyA': '254720123031', 'PartyB': 827142, 'PhoneNumber': '254720123031', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-27074', 'TransactionDesc': 'Some payment'}
2024-09-11 06:48:23,370 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:48:24,210 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 06:48:24,216 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076842676', 'CheckoutRequestID': 'ws_CO_11092024094823892720123031', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 06:50:34,004 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee598931942', 'CheckoutRequestID': 'ws_CO_11092024095018415726826489', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB870UC86'}, {'Name': 'TransactionDate', 'Value': 20240911095033}, {'Name': 'PhoneNumber', 'Value': 254726826489}]}}}}"}
2024-09-11 06:50:34,005 - INFO - {'updated_data': 'callback data began'}
2024-09-11 06:50:34,005 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee598931942', 'CheckoutRequestID': 'ws_CO_11092024095018415726826489', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB870UC86'}, {'Name': 'TransactionDate', 'Value': 20240911095033}, {'Name': 'PhoneNumber', 'Value': 254726826489}]}}}}}
2024-09-11 06:50:34,163 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:50:35,379 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:50:35,381 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:50:35,604 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:50:38,442 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:50:38,606 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:50:38,607 - INFO - there is a test coming
2024-09-11 06:50:38,608 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 06:50:38,652 - INFO - {'updated_data': 'the data is now as 254795417056'}
2024-09-11 06:50:38,653 - INFO - the data is now as 254795417056
2024-09-11 06:50:38,679 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 06:50:38,680 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 06:50:38,681 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:50:39,293 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:50:39,295 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Xcp1IYU2qfHXTJmJqLQOA99Op7EM'}"}
2024-09-11 06:50:39,299 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDY1MDM5', 'Timestamp': '20240911065039', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '30100', 'PartyA': '254795417056', 'PartyB': 899885, 'PhoneNumber': '254795417056', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054303', 'TransactionDesc': 'Some payment'}
2024-09-11 06:50:39,300 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:50:40,260 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 06:50:40,268 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170931874', 'CheckoutRequestID': 'ws_CO_11092024095039848795417056', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 06:51:00,326 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170931874', 'CheckoutRequestID': 'ws_CO_11092024095039848795417056', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 30100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB470W0DC'}, {'Name': 'TransactionDate', 'Value': 20240911095059}, {'Name': 'PhoneNumber', 'Value': 254795417056}]}}}}"}
2024-09-11 06:51:00,326 - INFO - {'updated_data': 'callback data began'}
2024-09-11 06:51:00,326 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170931874', 'CheckoutRequestID': 'ws_CO_11092024095039848795417056', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 30100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB470W0DC'}, {'Name': 'TransactionDate', 'Value': 20240911095059}, {'Name': 'PhoneNumber', 'Value': 254795417056}]}}}}}
2024-09-11 06:51:00,480 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:51:00,659 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:51:00,660 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:51:01,193 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:51:01,235 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:51:01,386 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:51:01,387 - INFO - {'updated': 'initiated stk query for ws_CO_11092024095039848795417056 899885 '}
2024-09-11 06:51:01,454 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:51:02,130 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:51:02,132 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer VbKoGAy5C2RH4Sbws999q1pR4rOq'}"}
2024-09-11 06:51:02,132 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDY1MTAx', 'Timestamp': '20240911065101', 'CheckoutRequestID': 'ws_CO_11092024095039848795417056'}"}
2024-09-11 06:51:02,134 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:51:02,802 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 06:51:02,803 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170931874', 'CheckoutRequestID': 'ws_CO_11092024095039848795417056', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024095039848795417056 899885"}
2024-09-11 06:51:02,922 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:51:03,140 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:51:03,141 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:51:03,372 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:56:49,449 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:56:49,590 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:56:49,591 - INFO - there is a test coming
2024-09-11 06:56:49,591 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 06:56:49,639 - INFO - {'updated_data': 'the data is now as 254708216512'}
2024-09-11 06:56:49,639 - INFO - the data is now as 254708216512
2024-09-11 06:56:49,654 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 06:56:49,655 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 06:56:49,656 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:56:50,239 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:56:50,241 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer aVj4G3xBQpn37RkYPQj3CEHNdNmf'}"}
2024-09-11 06:56:50,242 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDY1NjUw', 'Timestamp': '20240911065650', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254708216512', 'PartyB': 827142, 'PhoneNumber': '254708216512', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-30874', 'TransactionDesc': 'Some payment'}
2024-09-11 06:56:50,243 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:56:50,983 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 06:56:50,989 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19029672', 'CheckoutRequestID': 'ws_CO_11092024095650751708216512', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 07:01:27,178 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170943561', 'CheckoutRequestID': 'ws_CO_11092024100118588722765584', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB9726KM7'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911100126}, {'Name': 'PhoneNumber', 'Value': 254722765584}]}}}}"}
2024-09-11 07:01:27,179 - INFO - {'updated_data': 'callback data began'}
2024-09-11 07:01:27,179 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170943561', 'CheckoutRequestID': 'ws_CO_11092024100118588722765584', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB9726KM7'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911100126}, {'Name': 'PhoneNumber', 'Value': 254722765584}]}}}}}
2024-09-11 07:01:27,374 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:01:27,878 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:01:27,879 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:01:28,096 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:01:29,784 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:01:29,986 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:01:29,986 - INFO - {'updated': 'initiated stk query for ws_CO_11092024100118588722765584 827142 '}
2024-09-11 07:01:30,042 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:01:30,740 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:01:30,741 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 3JZttWPgqH4B7qNz8zCFRuUsu8JA'}"}
2024-09-11 07:01:30,742 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDcwMTMw', 'Timestamp': '20240911070130', 'CheckoutRequestID': 'ws_CO_11092024100118588722765584'}"}
2024-09-11 07:01:30,743 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:01:31,535 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 07:01:31,535 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170943561', 'CheckoutRequestID': 'ws_CO_11092024100118588722765584', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024100118588722765584 827142"}
2024-09-11 07:01:31,658 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:01:32,217 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:01:32,219 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:01:32,439 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:02:35,337 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88851705', 'CheckoutRequestID': 'ws_CO_11092024100225625711365434', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB072BBP4'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911100234}, {'Name': 'PhoneNumber', 'Value': 254711365434}]}}}}"}
2024-09-11 07:02:35,337 - INFO - {'updated_data': 'callback data began'}
2024-09-11 07:02:35,337 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88851705', 'CheckoutRequestID': 'ws_CO_11092024100225625711365434', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB072BBP4'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911100234}, {'Name': 'PhoneNumber', 'Value': 254711365434}]}}}}}
2024-09-11 07:02:35,518 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:02:35,709 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:02:35,711 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:02:35,924 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:02:38,261 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:02:38,450 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:02:38,451 - INFO - {'updated': 'initiated stk query for ws_CO_11092024100225625711365434 827142 '}
2024-09-11 07:02:38,526 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:02:39,194 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:02:39,196 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 16daCEqvA4kBtv1DhFGOEEbGsBF1'}"}
2024-09-11 07:02:39,197 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDcwMjM4', 'Timestamp': '20240911070238', 'CheckoutRequestID': 'ws_CO_11092024100225625711365434'}"}
2024-09-11 07:02:39,198 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:02:39,871 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 07:02:39,872 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88851705', 'CheckoutRequestID': 'ws_CO_11092024100225625711365434', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024100225625711365434 827142"}
2024-09-11 07:02:40,009 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:02:40,200 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:02:40,202 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:02:40,403 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:03:14,333 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:03:14,544 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:03:14,545 - INFO - there is a test coming
2024-09-11 07:03:14,545 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 07:03:14,595 - INFO - {'updated_data': 'the data is now as 254795913350'}
2024-09-11 07:03:14,595 - INFO - the data is now as 254795913350
2024-09-11 07:03:14,625 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 07:03:14,625 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 07:03:14,626 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:03:15,407 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:03:15,409 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 1Fh9AvVh2vHsIFQrzFnIrAd9cw1V'}"}
2024-09-11 07:03:15,410 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDcwMzE1', 'Timestamp': '20240911070315', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254795913350', 'PartyB': 827142, 'PhoneNumber': '254795913350', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '169-7487', 'TransactionDesc': 'Some payment'}
2024-09-11 07:03:15,411 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:03:16,134 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 07:03:16,141 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19045850', 'CheckoutRequestID': 'ws_CO_11092024100315932795913350', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 07:08:32,285 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19058091', 'CheckoutRequestID': 'ws_CO_11092024100814668745195041', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB7731RK9'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911100831}, {'Name': 'PhoneNumber', 'Value': 254745195041}]}}}}"}
2024-09-11 07:08:32,285 - INFO - {'updated_data': 'callback data began'}
2024-09-11 07:08:32,285 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19058091', 'CheckoutRequestID': 'ws_CO_11092024100814668745195041', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB7731RK9'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911100831}, {'Name': 'PhoneNumber', 'Value': 254745195041}]}}}}}
2024-09-11 07:08:32,454 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:08:32,651 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:08:32,653 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:08:34,184 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:08:35,762 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:08:35,953 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:08:35,954 - INFO - {'updated': 'initiated stk query for ws_CO_11092024100814668745195041 899885 '}
2024-09-11 07:08:36,010 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:08:36,678 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:08:36,681 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer MEYQMi3KJdJxr2A4BWJDM9ffENwq'}"}
2024-09-11 07:08:36,681 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDcwODM2', 'Timestamp': '20240911070836', 'CheckoutRequestID': 'ws_CO_11092024100814668745195041'}"}
2024-09-11 07:08:36,682 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:08:37,407 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 07:08:37,407 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19058091', 'CheckoutRequestID': 'ws_CO_11092024100814668745195041', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024100814668745195041 899885"}
2024-09-11 07:08:37,538 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:08:38,059 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:08:38,061 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:08:38,279 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:09:00,538 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519063687', 'CheckoutRequestID': 'ws_CO_11092024100850622727923253', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 9100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB17342K5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911100900}, {'Name': 'PhoneNumber', 'Value': 254727923253}]}}}}"}
2024-09-11 07:09:00,538 - INFO - {'updated_data': 'callback data began'}
2024-09-11 07:09:00,538 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519063687', 'CheckoutRequestID': 'ws_CO_11092024100850622727923253', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 9100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB17342K5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911100900}, {'Name': 'PhoneNumber', 'Value': 254727923253}]}}}}}
2024-09-11 07:09:00,699 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:09:00,919 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:09:00,921 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:09:01,143 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:14:03,833 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:14:03,972 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:14:03,973 - INFO - there is a test coming
2024-09-11 07:14:03,973 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 07:14:04,038 - INFO - {'updated_data': 'the data is now as 254718664521'}
2024-09-11 07:14:04,039 - INFO - the data is now as 254718664521
2024-09-11 07:14:04,059 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 07:14:04,059 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 07:14:04,060 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:14:04,664 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:14:04,666 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer fOdeu7gvP5rWvqNxDX0tWq9kNkAX'}"}
2024-09-11 07:14:04,666 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDcxNDA0', 'Timestamp': '20240911071404', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '50000', 'PartyA': '254718664521', 'PartyB': 899885, 'PhoneNumber': '254718664521', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054186', 'TransactionDesc': 'Some payment'}
2024-09-11 07:14:04,667 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:14:05,401 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 07:14:05,407 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171682427', 'CheckoutRequestID': 'ws_CO_11092024101405214718664521', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 07:15:37,507 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:15:37,623 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:15:37,624 - INFO - {'updated': 'initiated stk query for ws_CO_11092024101414548718464457 899885 '}
2024-09-11 07:15:37,692 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:15:38,272 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:15:38,274 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer lU695otCy7rHj46Y2Mf39mjQhCxx'}"}
2024-09-11 07:15:38,275 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDcxNTM3', 'Timestamp': '20240911071537', 'CheckoutRequestID': 'ws_CO_11092024101414548718464457'}"}
2024-09-11 07:15:38,276 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:15:38,925 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 07:15:38,926 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19072903', 'CheckoutRequestID': 'ws_CO_11092024101414548718464457', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024101414548718464457 899885"}
2024-09-11 07:15:39,045 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:15:39,233 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:15:39,234 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:15:39,988 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:20:03,159 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88869857', 'CheckoutRequestID': 'ws_CO_11092024101956464724506127', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 07:20:03,160 - INFO - {'updated_data': 'callback data began'}
2024-09-11 07:20:03,160 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88869857', 'CheckoutRequestID': 'ws_CO_11092024101956464724506127', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 07:20:03,339 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:20:43,074 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 522 7045
2024-09-11 07:35:43,202 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8687323', 'CheckoutRequestID': 'ws_CO_11092024103532812702387282', 'ResultCode': 3, 'ResultDesc': 'Declined due to limit rule: greater than the maximum transaction amount.'}}}"}
2024-09-11 07:35:43,202 - INFO - {'updated_data': 'callback data began'}
2024-09-11 07:35:43,202 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8687323', 'CheckoutRequestID': 'ws_CO_11092024103532812702387282', 'ResultCode': 3, 'ResultDesc': 'Declined due to limit rule: greater than the maximum transaction amount.'}}}}
2024-09-11 07:35:43,383 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:35:43,905 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:35:43,918 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:35:44,142 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:36:15,099 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076893712', 'CheckoutRequestID': 'ws_CO_11092024103607544702387282', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 150000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB676IV04'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911103614}, {'Name': 'PhoneNumber', 'Value': 254702387282}]}}}}"}
2024-09-11 07:36:15,100 - INFO - {'updated_data': 'callback data began'}
2024-09-11 07:36:15,100 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076893712', 'CheckoutRequestID': 'ws_CO_11092024103607544702387282', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 150000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB676IV04'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911103614}, {'Name': 'PhoneNumber', 'Value': 254702387282}]}}}}}
2024-09-11 07:36:15,268 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:36:15,452 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:36:15,456 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:36:15,677 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:36:18,712 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:36:18,886 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:36:18,887 - INFO - {'updated': 'initiated stk query for ws_CO_11092024103607544702387282 899885 '}
2024-09-11 07:36:19,078 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:36:19,801 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:36:19,803 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer EAsrD5l46JAz1IQ0PAU01fKwQVoG'}"}
2024-09-11 07:36:19,803 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDczNjE5', 'Timestamp': '20240911073619', 'CheckoutRequestID': 'ws_CO_11092024103607544702387282'}"}
2024-09-11 07:36:19,805 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:36:20,592 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 07:36:20,593 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076893712', 'CheckoutRequestID': 'ws_CO_11092024103607544702387282', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024103607544702387282 899885"}
2024-09-11 07:36:20,716 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:36:20,903 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:36:20,905 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:36:21,153 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:36:46,664 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:36:46,794 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:36:46,798 - INFO - there is a test coming
2024-09-11 07:36:46,802 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 07:36:46,851 - INFO - {'updated_data': 'the data is now as 254702387282'}
2024-09-11 07:36:46,852 - INFO - the data is now as 254702387282
2024-09-11 07:36:46,869 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 07:36:46,869 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 07:36:46,871 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:36:47,447 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:36:47,449 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer kmnWARbrpw6Gw5QTUes0287z2W2c'}"}
2024-09-11 07:36:47,450 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDczNjQ3', 'Timestamp': '20240911073647', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '200000', 'PartyA': '254702387282', 'PartyB': 899885, 'PhoneNumber': '254702387282', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054287', 'TransactionDesc': 'Some payment'}
2024-09-11 07:36:47,451 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:36:48,230 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 07:36:48,237 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171706898', 'CheckoutRequestID': 'ws_CO_11092024103647976702387282', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 07:38:24,588 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:38:24,603 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 07:38:24,604 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 07:38:33,946 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:38:34,280 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:38:34,282 - INFO - {'updated': 'initiated stk query for ws_CO_11092024103821815714699386 899885 '}
2024-09-11 07:38:34,352 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:38:34,924 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:38:34,926 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer mGfhAHipr9iNYBoVAsJPKsD6Tl75'}"}
2024-09-11 07:38:34,927 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDczODM0', 'Timestamp': '20240911073834', 'CheckoutRequestID': 'ws_CO_11092024103821815714699386'}"}
2024-09-11 07:38:34,928 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:38:35,551 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 07:38:35,552 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170983168', 'CheckoutRequestID': 'ws_CO_11092024103821815714699386', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024103821815714699386 899885"}
2024-09-11 07:38:35,671 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:38:35,859 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:38:35,860 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:38:36,079 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:40:23,297 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585055107943', 'CheckoutRequestID': 'ws_CO_11092024104016361729326778', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB4771P7M'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911104022}, {'Name': 'PhoneNumber', 'Value': 254729326778}]}}}}"}
2024-09-11 07:40:23,297 - INFO - {'updated_data': 'callback data began'}
2024-09-11 07:40:23,297 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585055107943', 'CheckoutRequestID': 'ws_CO_11092024104016361729326778', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB4771P7M'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911104022}, {'Name': 'PhoneNumber', 'Value': 254729326778}]}}}}}
2024-09-11 07:40:23,476 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:40:23,687 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:40:23,688 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:40:23,934 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:40:25,190 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:40:25,356 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:40:25,357 - INFO - there is a test coming
2024-09-11 07:40:25,357 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 07:40:25,406 - INFO - {'updated_data': 'the data is now as 254722570437'}
2024-09-11 07:40:25,406 - INFO - the data is now as 254722570437
2024-09-11 07:40:25,423 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 07:40:25,424 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 07:40:25,426 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:40:25,986 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:40:25,988 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer GTV3n1sFpiqaZ9A05zETC8Q4nuM1'}"}
2024-09-11 07:40:25,988 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDc0MDI1', 'Timestamp': '20240911074025', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254722570437', 'PartyB': 899885, 'PhoneNumber': '254722570437', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054313', 'TransactionDesc': 'Some payment'}
2024-09-11 07:40:25,989 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:40:26,893 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 07:40:26,899 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170985546', 'CheckoutRequestID': 'ws_CO_11092024104026611722570437', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 07:40:45,851 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170985714', 'CheckoutRequestID': 'ws_CO_11092024104033240717327534', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB17737H5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911104043}, {'Name': 'PhoneNumber', 'Value': 254717327534}]}}}}"}
2024-09-11 07:40:45,851 - INFO - {'updated_data': 'callback data began'}
2024-09-11 07:40:45,851 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170985714', 'CheckoutRequestID': 'ws_CO_11092024104033240717327534', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB17737H5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911104043}, {'Name': 'PhoneNumber', 'Value': 254717327534}]}}}}}
2024-09-11 07:40:46,005 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:40:46,516 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:40:46,517 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:40:46,739 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:42:53,233 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794582861', 'CheckoutRequestID': 'ws_CO_11092024104244004727606471', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB177CMAX'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911104252}, {'Name': 'PhoneNumber', 'Value': 254727606471}]}}}}"}
2024-09-11 07:42:53,233 - INFO - {'updated_data': 'callback data began'}
2024-09-11 07:42:53,233 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794582861', 'CheckoutRequestID': 'ws_CO_11092024104244004727606471', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB177CMAX'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911104252}, {'Name': 'PhoneNumber', 'Value': 254727606471}]}}}}}
2024-09-11 07:42:53,410 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:42:53,791 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:42:53,792 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:42:54,000 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:42:55,927 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:42:56,063 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:42:56,063 - INFO - {'updated': 'initiated stk query for ws_CO_11092024104244004727606471 899885 '}
2024-09-11 07:42:56,119 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:42:56,813 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:42:56,814 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer M2bfAfSsGlAaXIfiq8y8YqAlhCSW'}"}
2024-09-11 07:42:56,815 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDc0MjU2', 'Timestamp': '20240911074256', 'CheckoutRequestID': 'ws_CO_11092024104244004727606471'}"}
2024-09-11 07:42:56,816 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:42:57,464 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 07:42:57,464 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208794582861', 'CheckoutRequestID': 'ws_CO_11092024104244004727606471', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024104244004727606471 899885"}
2024-09-11 07:42:57,593 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:42:58,092 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:42:58,093 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:42:58,324 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:46:53,702 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:46:53,851 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:46:53,852 - INFO - there is a test coming
2024-09-11 07:46:53,852 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 07:46:53,897 - INFO - {'updated_data': 'the data is now as 254721115820'}
2024-09-11 07:46:53,897 - INFO - the data is now as 254721115820
2024-09-11 07:46:53,912 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 07:46:53,912 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 07:46:53,913 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:46:54,526 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:46:54,528 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer fa9QqpJG7jYPdX0F2TSkqAHSPxax'}"}
2024-09-11 07:46:54,528 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDc0NjU0', 'Timestamp': '20240911074654', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254721115820', 'PartyB': 899885, 'PhoneNumber': '254721115820', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054289', 'TransactionDesc': 'Some payment'}
2024-09-11 07:46:54,530 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:46:55,412 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 07:46:55,419 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585055124968', 'CheckoutRequestID': 'ws_CO_11092024104655155721115820', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 07:49:15,452 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:49:15,630 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:49:15,631 - INFO - there is a test coming
2024-09-11 07:49:15,631 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 07:49:15,675 - INFO - {'updated_data': 'the data is now as 254716472383'}
2024-09-11 07:49:15,675 - INFO - the data is now as 254716472383
2024-09-11 07:49:15,700 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 07:49:15,701 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 07:49:15,702 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:49:16,368 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:49:16,370 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer DK6K9omwXvy609ay22JOPFDYo2Ae'}"}
2024-09-11 07:49:16,370 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDc0OTE2', 'Timestamp': '20240911074916', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '200', 'PartyA': '254716472383', 'PartyB': 827142, 'PhoneNumber': '254716472383', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '99919-1271', 'TransactionDesc': 'Some payment'}
2024-09-11 07:49:16,372 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:49:17,259 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 07:49:17,266 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519166692', 'CheckoutRequestID': 'ws_CO_11092024104916907716472383', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 07:49:21,101 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8722263', 'CheckoutRequestID': 'ws_CO_11092024104909451712774355', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB6785UCE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911104920}, {'Name': 'PhoneNumber', 'Value': 254712774355}]}}}}"}
2024-09-11 07:49:21,102 - INFO - {'updated_data': 'callback data began'}
2024-09-11 07:49:21,102 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8722263', 'CheckoutRequestID': 'ws_CO_11092024104909451712774355', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB6785UCE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911104920}, {'Name': 'PhoneNumber', 'Value': 254712774355}]}}}}}
2024-09-11 07:49:21,272 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:49:21,692 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:49:21,693 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:49:21,925 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:49:28,692 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:49:28,860 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:49:28,861 - INFO - there is a test coming
2024-09-11 07:49:28,861 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 07:49:28,972 - INFO - {'updated_data': 'the data is now as 254722564266'}
2024-09-11 07:49:28,972 - INFO - the data is now as 254722564266
2024-09-11 07:49:28,987 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 07:49:28,987 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 07:49:28,988 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:49:29,545 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:49:29,547 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer MqJOrlSg3EArFJp9slj7sK3UBhGF'}"}
2024-09-11 07:49:29,547 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDc0OTI5', 'Timestamp': '20240911074929', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254722564266', 'PartyB': 827142, 'PhoneNumber': '254722564266', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-14016', 'TransactionDesc': 'Some payment'}
2024-09-11 07:49:29,548 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:49:30,370 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 07:49:30,376 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519167191', 'CheckoutRequestID': 'ws_CO_11092024104930064722564266', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 07:50:19,153 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:50:19,308 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:50:19,309 - INFO - there is a test coming
2024-09-11 07:50:19,309 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 07:50:19,370 - INFO - {'updated_data': 'the data is now as 254702044385'}
2024-09-11 07:50:19,370 - INFO - the data is now as 254702044385
2024-09-11 07:50:19,393 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 07:50:19,393 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 07:50:19,394 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:50:20,076 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:50:20,081 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 2WACrHVppGw3P6DVDjQDjnZcY78q'}"}
2024-09-11 07:50:20,081 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDc1MDIw', 'Timestamp': '20240911075020', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '500', 'PartyA': '254702044385', 'PartyB': 827142, 'PhoneNumber': '254702044385', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '405-1484', 'TransactionDesc': 'Some payment'}
2024-09-11 07:50:20,084 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:50:20,908 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 07:50:20,915 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170996044', 'CheckoutRequestID': 'ws_CO_11092024105020691702044385', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 07:50:31,851 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:50:32,057 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:50:32,058 - INFO - {'updated': 'initiated stk query for ws_CO_11092024105020691702044385 827142 '}
2024-09-11 07:50:32,115 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:50:32,767 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:50:32,769 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 8CjTqMNxGJwAxSJl6Ua3CCnMpxGm'}"}
2024-09-11 07:50:32,770 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDc1MDMy', 'Timestamp': '20240911075032', 'CheckoutRequestID': 'ws_CO_11092024105020691702044385'}"}
2024-09-11 07:50:32,771 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:50:33,464 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 07:50:33,464 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024105020691702044385', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024105020691702044385 827142"}
2024-09-11 07:50:33,476 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 07:55:04,698 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:55:04,854 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:55:04,854 - INFO - there is a test coming
2024-09-11 07:55:04,854 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 07:55:04,899 - INFO - {'updated_data': 'the data is now as 254722775538'}
2024-09-11 07:55:04,899 - INFO - the data is now as 254722775538
2024-09-11 07:55:04,915 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 07:55:04,915 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 07:55:04,916 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:55:05,520 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:55:05,522 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer viylOk8rbyp3XA2OU0l9SswftgZu'}"}
2024-09-11 07:55:05,523 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDc1NTA1', 'Timestamp': '20240911075505', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2002', 'PartyA': '254722775538', 'PartyB': 827142, 'PhoneNumber': '254722775538', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-1943', 'TransactionDesc': 'Some payment'}
2024-09-11 07:55:05,524 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:55:06,309 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 07:55:06,321 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19177244', 'CheckoutRequestID': 'ws_CO_11092024105506074722775538', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 07:55:29,317 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:55:29,490 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:55:29,490 - INFO - there is a test coming
2024-09-11 07:55:29,491 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 07:55:29,531 - INFO - {'updated_data': 'the data is now as 254703115400'}
2024-09-11 07:55:29,531 - INFO - the data is now as 254703115400
2024-09-11 07:55:29,548 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 07:55:29,548 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 07:55:29,549 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:55:30,137 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:55:30,139 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer wLkZEgjzyvkPWI1JV3Bos6nay4SG'}"}
2024-09-11 07:55:30,139 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDc1NTMw', 'Timestamp': '20240911075530', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1500', 'PartyA': '254703115400', 'PartyB': 827142, 'PhoneNumber': '254703115400', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-26161', 'TransactionDesc': 'Some payment'}
2024-09-11 07:55:30,140 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:55:30,896 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 07:55:30,903 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19178312', 'CheckoutRequestID': 'ws_CO_11092024105530664703115400', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 07:55:41,261 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:55:41,638 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:55:41,639 - INFO - there is a test coming
2024-09-11 07:55:41,639 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 07:55:41,697 - INFO - {'updated_data': 'the data is now as 254727210361'}
2024-09-11 07:55:41,697 - INFO - the data is now as 254727210361
2024-09-11 07:55:41,737 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 07:55:41,737 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 07:55:41,742 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:55:42,322 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:55:42,324 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer o8BJgLHQAfWHn7gB2u54pZc6jrYQ'}"}
2024-09-11 07:55:42,325 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDc1NTQy', 'Timestamp': '20240911075542', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254727210361', 'PartyB': 827142, 'PhoneNumber': '254727210361', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-8053', 'TransactionDesc': 'Some payment'}
2024-09-11 07:55:42,326 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:55:43,155 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 07:55:43,161 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171727044', 'CheckoutRequestID': 'ws_CO_11092024105542963727210361', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 07:55:54,059 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171727044', 'CheckoutRequestID': 'ws_CO_11092024105542963727210361', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB078ZLL8'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911105550}, {'Name': 'PhoneNumber', 'Value': 254727210361}]}}}}"}
2024-09-11 07:55:54,059 - INFO - {'updated_data': 'callback data began'}
2024-09-11 07:55:54,059 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171727044', 'CheckoutRequestID': 'ws_CO_11092024105542963727210361', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB078ZLL8'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911105550}, {'Name': 'PhoneNumber', 'Value': 254727210361}]}}}}}
2024-09-11 07:55:54,223 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:55:57,201 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:55:57,221 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 07:55:57,222 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 07:56:13,811 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:56:13,830 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 07:56:13,831 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 07:56:33,470 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 522 7045
2024-09-11 07:56:38,455 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:56:38,691 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:56:38,692 - INFO - there is a test coming
2024-09-11 07:56:38,692 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 07:56:38,744 - INFO - {'updated_data': 'the data is now as 254722775538'}
2024-09-11 07:56:38,744 - INFO - the data is now as 254722775538
2024-09-11 07:56:38,767 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 07:56:38,767 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 07:56:38,769 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:56:39,644 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:56:39,646 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer CWJI41IyoRDnOwkq8IgSusXP7aJC'}"}
2024-09-11 07:56:39,647 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDc1NjM5', 'Timestamp': '20240911075639', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254722775538', 'PartyB': 827142, 'PhoneNumber': '254722775538', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '121-39974', 'TransactionDesc': 'Some payment'}
2024-09-11 07:56:39,648 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:56:40,476 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 07:56:40,521 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88909626', 'CheckoutRequestID': 'ws_CO_11092024105640173722775538', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 08:01:25,828 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:01:26,014 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:01:26,015 - INFO - there is a test coming
2024-09-11 08:01:26,015 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 08:01:26,056 - INFO - {'updated_data': 'the data is now as 254768858487'}
2024-09-11 08:01:26,057 - INFO - the data is now as 254768858487
2024-09-11 08:01:26,074 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 08:01:26,074 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 08:01:26,075 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:01:26,741 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:01:26,743 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 150lmKHtKb5QOmva9GFGZ46yJPc0'}"}
2024-09-11 08:01:26,743 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDgwMTI2', 'Timestamp': '20240911080126', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254768858487', 'PartyB': 827142, 'PhoneNumber': '254768858487', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-40139', 'TransactionDesc': 'Some payment'}
2024-09-11 08:01:26,744 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:01:27,444 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 08:01:27,457 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171733756', 'CheckoutRequestID': 'ws_CO_11092024110127244768858487', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 08:01:51,852 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:01:51,972 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:01:51,973 - INFO - {'updated': 'initiated stk query for ws_CO_11092024110130385790424135 827142 '}
2024-09-11 08:01:52,035 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:01:52,720 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:01:52,722 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer zorGRuL5xM4B8amdbFzhXAvyKUok'}"}
2024-09-11 08:01:52,723 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDgwMTUy', 'Timestamp': '20240911080152', 'CheckoutRequestID': 'ws_CO_11092024110130385790424135'}"}
2024-09-11 08:01:52,725 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:01:53,348 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 08:01:53,348 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024110130385790424135', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024110130385790424135 827142"}
2024-09-11 08:01:53,351 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 08:02:33,139 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:02:33,305 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:02:33,306 - INFO - {'updated': 'initiated stk query for ws_CO_11092024110130385790424135 827142 '}
2024-09-11 08:02:33,366 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:02:33,945 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:02:33,947 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer YGKIeJg8GTXEw9wVMAy3iPZXB2vz'}"}
2024-09-11 08:02:33,948 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDgwMjMz', 'Timestamp': '20240911080233', 'CheckoutRequestID': 'ws_CO_11092024110130385790424135'}"}
2024-09-11 08:02:33,949 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:02:34,573 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 369
2024-09-11 08:02:34,573 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171008577', 'CheckoutRequestID': 'ws_CO_11092024110130385790424135', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_11092024110130385790424135 827142"}
2024-09-11 08:02:34,695 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 08:02:34,880 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 08:02:34,882 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 08:02:35,112 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 08:03:00,480 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:03:00,629 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:03:00,630 - INFO - there is a test coming
2024-09-11 08:03:00,630 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 08:03:00,683 - INFO - {'updated_data': 'the data is now as 254790424135'}
2024-09-11 08:03:00,684 - INFO - the data is now as 254790424135
2024-09-11 08:03:00,703 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 08:03:00,703 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 08:03:00,704 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:03:01,277 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:03:01,280 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer HRi7OdTLKCWWgojQwy3UvyjpiRQU'}"}
2024-09-11 08:03:01,280 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDgwMzAx', 'Timestamp': '20240911080301', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254790424135', 'PartyB': 827142, 'PhoneNumber': '254790424135', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-4570', 'TransactionDesc': 'Some payment'}
2024-09-11 08:03:01,282 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:03:02,121 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 08:03:02,127 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19198725', 'CheckoutRequestID': 'ws_CO_11092024110301913790424135', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 08:04:09,296 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:04:09,508 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:04:09,508 - INFO - {'updated': 'initiated stk query for ws_CO_11092024110336838706089471 899885 '}
2024-09-11 08:04:09,577 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:04:10,177 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:04:10,179 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer BfgrZgPl7ODzEAmulSZPunTvn3NW'}"}
2024-09-11 08:04:10,180 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDgwNDA5', 'Timestamp': '20240911080409', 'CheckoutRequestID': 'ws_CO_11092024110336838706089471'}"}
2024-09-11 08:04:10,181 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:04:10,822 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 08:04:10,823 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88918056', 'CheckoutRequestID': 'ws_CO_11092024110336838706089471', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024110336838706089471 899885"}
2024-09-11 08:04:10,950 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 08:04:11,168 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 08:04:11,169 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 08:04:11,714 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 08:06:02,801 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171013513', 'CheckoutRequestID': 'ws_CO_11092024110547907794054471', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 25000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB27A9CGI'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911110602}, {'Name': 'PhoneNumber', 'Value': 254794054471}]}}}}"}
2024-09-11 08:06:02,801 - INFO - {'updated_data': 'callback data began'}
2024-09-11 08:06:02,801 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171013513', 'CheckoutRequestID': 'ws_CO_11092024110547907794054471', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 25000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB27A9CGI'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911110602}, {'Name': 'PhoneNumber', 'Value': 254794054471}]}}}}}
2024-09-11 08:06:02,975 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 08:06:03,479 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 08:06:03,480 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 08:06:03,705 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 08:06:21,456 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:06:21,619 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:06:21,619 - INFO - there is a test coming
2024-09-11 08:06:21,620 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 08:06:21,665 - INFO - {'updated_data': 'the data is now as 254722772159'}
2024-09-11 08:06:21,666 - INFO - the data is now as 254722772159
2024-09-11 08:06:21,690 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 08:06:21,690 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 08:06:21,702 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:06:22,289 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:06:22,290 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer f1kmch6JE4eyna63sXxFGGASb2Yi'}"}
2024-09-11 08:06:22,291 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDgwNjIy', 'Timestamp': '20240911080622', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '7000', 'PartyA': '254722772159', 'PartyB': 827142, 'PhoneNumber': '254722772159', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '148-784', 'TransactionDesc': 'Some payment'}
2024-09-11 08:06:22,292 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:06:23,108 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 08:06:23,114 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171739590', 'CheckoutRequestID': 'ws_CO_11092024110622818722772159', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 08:06:35,012 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171739590', 'CheckoutRequestID': 'ws_CO_11092024110622818722772159', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 08:06:35,012 - INFO - {'updated_data': 'callback data began'}
2024-09-11 08:06:35,012 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171739590', 'CheckoutRequestID': 'ws_CO_11092024110622818722772159', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 08:06:35,189 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 08:06:35,370 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 08:06:35,372 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 08:06:35,612 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 08:06:45,022 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171014519', 'CheckoutRequestID': 'ws_CO_11092024110633537706089471', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB57ACHSB'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911110644}, {'Name': 'PhoneNumber', 'Value': 254706089471}]}}}}"}
2024-09-11 08:06:45,022 - INFO - {'updated_data': 'callback data began'}
2024-09-11 08:06:45,022 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171014519', 'CheckoutRequestID': 'ws_CO_11092024110633537706089471', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB57ACHSB'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911110644}, {'Name': 'PhoneNumber', 'Value': 254706089471}]}}}}}
2024-09-11 08:06:45,204 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 08:06:45,592 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 08:06:45,593 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 08:06:45,804 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 08:06:55,270 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076927502', 'CheckoutRequestID': 'ws_CO_11092024110647802714443674', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB87ADE0Y'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911110654}, {'Name': 'PhoneNumber', 'Value': 254714443674}]}}}}"}
2024-09-11 08:06:55,270 - INFO - {'updated_data': 'callback data began'}
2024-09-11 08:06:55,270 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076927502', 'CheckoutRequestID': 'ws_CO_11092024110647802714443674', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB87ADE0Y'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911110654}, {'Name': 'PhoneNumber', 'Value': 254714443674}]}}}}}
2024-09-11 08:06:55,446 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 08:06:55,964 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 08:06:55,966 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 08:06:56,197 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 08:12:06,281 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19221684', 'CheckoutRequestID': 'ws_CO_11092024111147227725574259', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 600.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB77B0PN1'}, {'Name': 'TransactionDate', 'Value': 20240911111205}, {'Name': 'PhoneNumber', 'Value': 254725574259}]}}}}"}
2024-09-11 08:12:06,282 - INFO - {'updated_data': 'callback data began'}
2024-09-11 08:12:06,282 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19221684', 'CheckoutRequestID': 'ws_CO_11092024111147227725574259', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 600.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB77B0PN1'}, {'Name': 'TransactionDate', 'Value': 20240911111205}, {'Name': 'PhoneNumber', 'Value': 254725574259}]}}}}}
2024-09-11 08:12:06,449 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 08:12:07,135 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 08:12:07,137 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 08:12:07,355 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 08:18:50,364 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:18:50,549 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:18:50,550 - INFO - {'updated': 'initiated stk query for ws_CO_11092024111830660720247286 899885 '}
2024-09-11 08:18:50,607 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:18:51,248 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:18:51,250 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer nC6PaLiY2Q6zDqWVjlcd1oozkTO7'}"}
2024-09-11 08:18:51,251 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDgxODUw', 'Timestamp': '20240911081850', 'CheckoutRequestID': 'ws_CO_11092024111830660720247286'}"}
2024-09-11 08:18:51,252 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:18:51,875 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 08:18:51,875 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208794622914', 'CheckoutRequestID': 'ws_CO_11092024111830660720247286', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024111830660720247286 899885"}
2024-09-11 08:18:53,321 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 08:18:53,521 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 08:18:53,522 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 08:18:53,755 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 08:19:19,300 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171028819', 'CheckoutRequestID': 'ws_CO_11092024111909221721252324', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 6200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB17BXROT'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911111918}, {'Name': 'PhoneNumber', 'Value': 254721252324}]}}}}"}
2024-09-11 08:19:19,300 - INFO - {'updated_data': 'callback data began'}
2024-09-11 08:19:19,301 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171028819', 'CheckoutRequestID': 'ws_CO_11092024111909221721252324', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 6200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB17BXROT'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911111918}, {'Name': 'PhoneNumber', 'Value': 254721252324}]}}}}}
2024-09-11 08:22:45,992 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794627239', 'CheckoutRequestID': 'ws_CO_11092024112236606722547007', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}"}
2024-09-11 08:22:45,992 - INFO - {'updated_data': 'callback data began'}
2024-09-11 08:22:45,992 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794627239', 'CheckoutRequestID': 'ws_CO_11092024112236606722547007', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}}
2024-09-11 08:22:46,173 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 08:22:46,544 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 08:22:46,545 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 08:22:46,781 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 08:22:47,767 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:22:47,924 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:22:47,925 - INFO - {'updated': 'initiated stk query for ws_CO_11092024112236606722547007 899885 '}
2024-09-11 08:22:47,983 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:22:48,585 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:22:48,587 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer B3zXpifaRQiiE43xnKvhHLtuR8P9'}"}
2024-09-11 08:22:48,587 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDgyMjQ3', 'Timestamp': '20240911082247', 'CheckoutRequestID': 'ws_CO_11092024112236606722547007'}"}
2024-09-11 08:22:48,588 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:22:49,206 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 380
2024-09-11 08:22:49,206 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208794627239', 'CheckoutRequestID': 'ws_CO_11092024112236606722547007', 'ResultCode': '2001', 'ResultDesc': 'The initiator information is invalid.'} for ws_CO_11092024112236606722547007 899885"}
2024-09-11 08:22:49,343 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 08:22:49,555 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 08:22:49,556 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 08:22:49,805 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 08:27:22,673 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:27:22,846 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:27:22,847 - INFO - there is a test coming
2024-09-11 08:27:22,847 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 08:27:22,914 - INFO - {'updated_data': 'the data is now as 254724859647'}
2024-09-11 08:27:22,914 - INFO - the data is now as 254724859647
2024-09-11 08:27:22,931 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 08:27:22,931 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 08:27:22,933 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:27:23,522 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:27:23,524 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Aic8qgV8dgW5hhWB3nOsssvYt9A1'}"}
2024-09-11 08:27:23,525 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDgyNzIz', 'Timestamp': '20240911082723', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '50000', 'PartyA': '254724859647', 'PartyB': 827142, 'PhoneNumber': '254724859647', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-24742', 'TransactionDesc': 'Some payment'}
2024-09-11 08:27:23,527 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:27:24,355 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 08:27:24,361 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88945582', 'CheckoutRequestID': 'ws_CO_11092024112724162724859647', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 08:28:36,234 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:28:36,396 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:28:36,396 - INFO - {'updated': 'initiated stk query for ws_CO_11092024112824442723006248 827142 '}
2024-09-11 08:28:36,470 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:28:37,135 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:28:37,137 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer YxRMASm6AR2PjYWw6XoX49MThzdb'}"}
2024-09-11 08:28:37,137 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDgyODM2', 'Timestamp': '20240911082836', 'CheckoutRequestID': 'ws_CO_11092024112824442723006248'}"}
2024-09-11 08:28:37,139 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:28:37,760 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 08:28:37,761 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171040182', 'CheckoutRequestID': 'ws_CO_11092024112824442723006248', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024112824442723006248 827142"}
2024-09-11 08:28:37,895 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 08:28:38,422 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 08:28:38,423 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 08:28:38,646 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 08:29:17,954 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:29:18,128 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:29:18,129 - INFO - there is a test coming
2024-09-11 08:29:18,129 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 08:29:18,192 - INFO - {'updated_data': 'the data is now as 254702723514'}
2024-09-11 08:29:18,192 - INFO - the data is now as 254702723514
2024-09-11 08:29:18,210 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 08:29:18,210 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 08:29:18,211 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:29:18,887 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:29:18,889 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer lGNUgjbyqy0i0pGC4YJqlmDDRE6c'}"}
2024-09-11 08:29:18,890 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDgyOTE4', 'Timestamp': '20240911082918', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2500', 'PartyA': '254702723514', 'PartyB': 827142, 'PhoneNumber': '254702723514', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-81901', 'TransactionDesc': 'Some payment'}
2024-09-11 08:29:18,891 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:29:21,541 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 08:29:21,551 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181762976', 'CheckoutRequestID': 'ws_CO_11092024112919481702723514', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 08:29:49,826 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181762976', 'CheckoutRequestID': 'ws_CO_11092024112919481702723514', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB37DAHID'}, {'Name': 'TransactionDate', 'Value': 20240911112943}, {'Name': 'PhoneNumber', 'Value': 254702723514}]}}}}"}
2024-09-11 08:29:49,827 - INFO - {'updated_data': 'callback data began'}
2024-09-11 08:29:49,827 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181762976', 'CheckoutRequestID': 'ws_CO_11092024112919481702723514', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB37DAHID'}, {'Name': 'TransactionDate', 'Value': 20240911112943}, {'Name': 'PhoneNumber', 'Value': 254702723514}]}}}}}
2024-09-11 08:29:50,013 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 08:29:50,515 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 08:29:50,519 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 08:29:51,106 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 08:30:22,150 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:30:22,399 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:30:22,400 - INFO - there is a test coming
2024-09-11 08:30:22,400 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 08:30:22,441 - INFO - {'updated_data': 'the data is now as 254721929993'}
2024-09-11 08:30:22,441 - INFO - the data is now as 254721929993
2024-09-11 08:30:22,457 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 08:30:22,458 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 08:30:22,459 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:30:23,247 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:30:23,248 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer mrU5lxECGJNcHpyeoI8AsfYzPC1B'}"}
2024-09-11 08:30:23,249 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDgzMDIz', 'Timestamp': '20240911083023', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '216', 'PartyA': '254721929993', 'PartyB': 827142, 'PhoneNumber': '254721929993', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '264-5520', 'TransactionDesc': 'Some payment'}
2024-09-11 08:30:23,261 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:30:24,088 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 08:30:24,094 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519273165', 'CheckoutRequestID': 'ws_CO_11092024113023818721929993', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 08:30:36,597 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:30:36,826 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:30:36,827 - INFO - {'updated': 'initiated stk query for ws_CO_11092024113023818721929993 827142 '}
2024-09-11 08:30:36,895 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:30:37,521 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:30:37,523 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer agoCKEGUkkgDJzAAK1kxM6Yfdxsj'}"}
2024-09-11 08:30:37,524 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDgzMDM2', 'Timestamp': '20240911083036', 'CheckoutRequestID': 'ws_CO_11092024113023818721929993'}"}
2024-09-11 08:30:37,525 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:30:38,208 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 08:30:38,209 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519273165', 'CheckoutRequestID': 'ws_CO_11092024113023818721929993', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024113023818721929993 827142"}
2024-09-11 08:30:38,334 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 08:30:38,828 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 08:30:38,830 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 08:30:39,055 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 08:31:48,116 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:31:48,256 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:31:48,257 - INFO - there is a test coming
2024-09-11 08:31:48,257 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 08:31:48,302 - INFO - {'updated_data': 'the data is now as 254724859647'}
2024-09-11 08:31:48,303 - INFO - the data is now as 254724859647
2024-09-11 08:31:48,318 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 08:31:48,318 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 08:31:48,320 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:31:48,934 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:31:48,936 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer S6lSQnDRk1JfjHwPncMRlOYJ1tkV'}"}
2024-09-11 08:31:48,937 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDgzMTQ4', 'Timestamp': '20240911083148', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '99999', 'PartyA': '254724859647', 'PartyB': 827142, 'PhoneNumber': '254724859647', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-979', 'TransactionDesc': 'Some payment'}
2024-09-11 08:31:48,949 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:31:49,750 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 08:31:49,756 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88951922', 'CheckoutRequestID': 'ws_CO_11092024113149561724859647', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 08:32:10,904 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:32:11,079 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:32:11,079 - INFO - {'updated': 'initiated stk query for ws_CO_11092024113149561724859647 827142 '}
2024-09-11 08:32:11,140 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:32:11,708 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:32:11,710 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ADddHVGRjRDTyFkmHoTVOSdrdeyQ'}"}
2024-09-11 08:32:11,710 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDgzMjEx', 'Timestamp': '20240911083211', 'CheckoutRequestID': 'ws_CO_11092024113149561724859647'}"}
2024-09-11 08:32:11,712 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:32:12,360 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 08:32:12,361 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88951922', 'CheckoutRequestID': 'ws_CO_11092024113149561724859647', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024113149561724859647 827142"}
2024-09-11 08:32:12,484 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 08:32:13,007 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 08:32:13,009 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 08:32:13,234 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 08:32:55,654 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:32:55,800 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:32:55,800 - INFO - there is a test coming
2024-09-11 08:32:55,800 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 08:32:55,847 - INFO - {'updated_data': 'the data is now as 254722530614'}
2024-09-11 08:32:55,847 - INFO - the data is now as 254722530614
2024-09-11 08:32:55,863 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 08:32:55,864 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 08:32:55,865 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:32:56,429 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:32:56,431 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer a0c9uRtw9E4uJWvmy4wtxEsatT7p'}"}
2024-09-11 08:32:56,431 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDgzMjU2', 'Timestamp': '20240911083256', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254722530614', 'PartyB': 827142, 'PhoneNumber': '254722530614', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-38034', 'TransactionDesc': 'Some payment'}
2024-09-11 08:32:56,432 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:32:57,199 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 08:32:57,205 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88953088', 'CheckoutRequestID': 'ws_CO_11092024113256936722530614', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 08:34:30,334 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599198525', 'CheckoutRequestID': 'ws_CO_11092024113417398721103396', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 60000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB37DWU29'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911113429}, {'Name': 'PhoneNumber', 'Value': 254721103396}]}}}}"}
2024-09-11 08:34:30,334 - INFO - {'updated_data': 'callback data began'}
2024-09-11 08:34:30,334 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599198525', 'CheckoutRequestID': 'ws_CO_11092024113417398721103396', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 60000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB37DWU29'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911113429}, {'Name': 'PhoneNumber', 'Value': 254721103396}]}}}}}
2024-09-11 08:34:30,497 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 08:34:31,065 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 08:34:31,067 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 08:34:31,299 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 08:34:47,995 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:34:48,151 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:34:48,152 - INFO - there is a test coming
2024-09-11 08:34:48,152 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 08:34:48,197 - INFO - {'updated_data': 'the data is now as 254724114085'}
2024-09-11 08:34:48,198 - INFO - the data is now as 254724114085
2024-09-11 08:34:48,216 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 08:34:48,216 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 08:34:48,217 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:34:48,804 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:34:48,806 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer JeqjVD0vifxGq3sEHyHFWyOOmZWd'}"}
2024-09-11 08:34:48,806 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDgzNDQ4', 'Timestamp': '20240911083448', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '200', 'PartyA': '254724114085', 'PartyB': 899885, 'PhoneNumber': '254724114085', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054193', 'TransactionDesc': 'Some payment'}
2024-09-11 08:34:48,808 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:34:50,086 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 08:34:50,092 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171285474', 'CheckoutRequestID': 'ws_CO_11092024113449388724114085', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 08:34:52,607 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:34:52,638 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-11 08:34:52,639 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 08:37:23,508 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19287424', 'CheckoutRequestID': 'ws_CO_11092024113716367799805524', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB57EAGMV'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911113722}, {'Name': 'PhoneNumber', 'Value': 254799805524}]}}}}"}
2024-09-11 08:37:23,508 - INFO - {'updated_data': 'callback data began'}
2024-09-11 08:37:23,508 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19287424', 'CheckoutRequestID': 'ws_CO_11092024113716367799805524', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB57EAGMV'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911113722}, {'Name': 'PhoneNumber', 'Value': 254799805524}]}}}}}
2024-09-11 08:37:23,666 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 08:37:23,866 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 08:37:23,867 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 08:37:24,398 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 08:42:01,955 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:42:02,132 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:42:02,133 - INFO - there is a test coming
2024-09-11 08:42:02,133 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 08:42:02,180 - INFO - {'updated_data': 'the data is now as 254114296480'}
2024-09-11 08:42:02,180 - INFO - the data is now as 254114296480
2024-09-11 08:42:02,197 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 08:42:02,197 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 08:42:02,199 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:42:02,791 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:42:02,794 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer kEAH2euvRVJE3Lt0PSWvODkwjPmv'}"}
2024-09-11 08:42:02,794 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDg0MjAy', 'Timestamp': '20240911084202', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1051', 'PartyA': '254114296480', 'PartyB': 827142, 'PhoneNumber': '254114296480', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-2408', 'TransactionDesc': 'Some payment'}
2024-09-11 08:42:02,796 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:42:03,625 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 08:42:03,637 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171782124', 'CheckoutRequestID': 'ws_CO_11092024114203423114296480', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 08:42:05,328 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585055266396', 'CheckoutRequestID': 'ws_CO_11092024114143749728428242', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}"}
2024-09-11 08:42:05,329 - INFO - {'updated_data': 'callback data began'}
2024-09-11 08:42:05,329 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585055266396', 'CheckoutRequestID': 'ws_CO_11092024114143749728428242', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}}
2024-09-11 08:42:05,489 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 08:42:05,988 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 08:42:05,990 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 08:42:06,207 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 08:42:14,063 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171782124', 'CheckoutRequestID': 'ws_CO_11092024114203423114296480', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1051.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB47EWQ1E'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911114213}, {'Name': 'PhoneNumber', 'Value': 254114296480}]}}}}"}
2024-09-11 08:42:14,063 - INFO - {'updated_data': 'callback data began'}
2024-09-11 08:42:14,063 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171782124', 'CheckoutRequestID': 'ws_CO_11092024114203423114296480', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1051.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB47EWQ1E'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911114213}, {'Name': 'PhoneNumber', 'Value': 254114296480}]}}}}}
2024-09-11 08:42:14,227 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 08:42:14,798 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 08:42:14,800 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 08:42:15,355 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 08:42:15,638 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:42:15,870 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:42:15,871 - INFO - {'updated': 'initiated stk query for ws_CO_11092024114203423114296480 827142 '}
2024-09-11 08:42:15,925 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:42:16,494 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:42:16,496 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ziGb4z4aZTYhpqMbUQramQOvevTf'}"}
2024-09-11 08:42:16,497 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDg0MjE1', 'Timestamp': '20240911084215', 'CheckoutRequestID': 'ws_CO_11092024114203423114296480'}"}
2024-09-11 08:42:16,498 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:42:17,126 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 08:42:17,127 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171782124', 'CheckoutRequestID': 'ws_CO_11092024114203423114296480', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024114203423114296480 827142"}
2024-09-11 08:42:17,247 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 08:42:17,582 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 08:42:17,584 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 08:42:17,849 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 08:44:06,123 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:44:06,279 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:44:06,280 - INFO - there is a test coming
2024-09-11 08:44:06,280 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 08:44:06,328 - INFO - {'updated_data': 'the data is now as 254745865946'}
2024-09-11 08:44:06,328 - INFO - the data is now as 254745865946
2024-09-11 08:44:06,346 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 08:44:06,346 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 08:44:06,348 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:44:07,051 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:44:07,053 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer QHwfm2ALZGWyrLGUNILIlzmCOXAa'}"}
2024-09-11 08:44:07,054 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDg0NDA3', 'Timestamp': '20240911084407', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254745865946', 'PartyB': 899885, 'PhoneNumber': '254745865946', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Order No . 13035', 'TransactionDesc': 'Some payment'}
2024-09-11 08:44:07,055 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:44:07,908 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 08:44:07,914 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171295796', 'CheckoutRequestID': 'ws_CO_11092024114407606745865946', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 08:44:16,568 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171295796', 'CheckoutRequestID': 'ws_CO_11092024114407606745865946', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB87F63AW'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911114415}, {'Name': 'PhoneNumber', 'Value': 254745865946}]}}}}"}
2024-09-11 08:44:16,569 - INFO - {'updated_data': 'callback data began'}
2024-09-11 08:44:16,569 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171295796', 'CheckoutRequestID': 'ws_CO_11092024114407606745865946', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB87F63AW'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911114415}, {'Name': 'PhoneNumber', 'Value': 254745865946}]}}}}}
2024-09-11 08:44:16,731 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 08:44:17,115 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 08:44:17,116 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 08:44:17,339 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 08:44:19,591 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:44:19,819 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:44:19,820 - INFO - {'updated': 'initiated stk query for ws_CO_11092024114407606745865946 899885 '}
2024-09-11 08:44:19,879 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:44:20,482 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:44:20,484 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer VqJklRs2tv9MDuu00WH3FGYx01Cu'}"}
2024-09-11 08:44:20,484 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDg0NDE5', 'Timestamp': '20240911084419', 'CheckoutRequestID': 'ws_CO_11092024114407606745865946'}"}
2024-09-11 08:44:20,485 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:44:21,122 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 08:44:21,122 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171295796', 'CheckoutRequestID': 'ws_CO_11092024114407606745865946', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024114407606745865946 899885"}
2024-09-11 08:44:21,257 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 08:44:21,446 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 08:44:21,447 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 08:44:21,672 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 08:44:54,690 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:44:54,817 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:44:54,818 - INFO - there is a test coming
2024-09-11 08:44:54,818 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 08:44:54,861 - INFO - {'updated_data': 'the data is now as 254717136466'}
2024-09-11 08:44:54,861 - INFO - the data is now as 254717136466
2024-09-11 08:44:54,879 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 08:44:54,879 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 08:44:54,880 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:44:55,590 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:44:55,592 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 7iG1j1irKtz6ipSP6PBjc9ohkVhU'}"}
2024-09-11 08:44:55,593 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDg0NDU1', 'Timestamp': '20240911084455', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '98000', 'PartyA': '254717136466', 'PartyB': 899885, 'PhoneNumber': '254717136466', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054194', 'TransactionDesc': 'Some payment'}
2024-09-11 08:44:55,594 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:44:56,415 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 08:44:56,422 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076972269', 'CheckoutRequestID': 'ws_CO_11092024114456228717136466', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 08:45:10,408 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:45:10,566 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:45:10,566 - INFO - {'updated': 'initiated stk query for ws_CO_11092024114456228717136466 899885 '}
2024-09-11 08:45:10,621 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:45:11,205 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:45:11,206 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Kaox8CtOAwK9Xz5j3j62obkG0iHL'}"}
2024-09-11 08:45:11,207 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDg0NTEw', 'Timestamp': '20240911084510', 'CheckoutRequestID': 'ws_CO_11092024114456228717136466'}"}
2024-09-11 08:45:11,208 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:45:11,851 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 08:45:11,852 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024114456228717136466', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024114456228717136466 899885"}
2024-09-11 08:45:11,854 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 08:45:14,955 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:45:15,765 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:45:15,766 - INFO - {'updated': 'initiated stk query for ws_CO_11092024114502715721691202 899885 '}
2024-09-11 08:45:15,855 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:45:16,444 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:45:16,446 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Q9ADH4L5Sr6B4bDbWqMGsKAtFEND'}"}
2024-09-11 08:45:16,446 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDg0NTE1', 'Timestamp': '20240911084515', 'CheckoutRequestID': 'ws_CO_11092024114502715721691202'}"}
2024-09-11 08:45:16,448 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:45:17,179 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 08:45:17,179 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024114502715721691202', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024114502715721691202 899885"}
2024-09-11 08:45:17,182 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 08:48:40,969 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519320032', 'CheckoutRequestID': 'ws_CO_11092024114831556725368679', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2539.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB67FR7IW'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911114839}, {'Name': 'PhoneNumber', 'Value': 254725368679}]}}}}"}
2024-09-11 08:48:40,970 - INFO - {'updated_data': 'callback data began'}
2024-09-11 08:48:40,970 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519320032', 'CheckoutRequestID': 'ws_CO_11092024114831556725368679', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2539.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB67FR7IW'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911114839}, {'Name': 'PhoneNumber', 'Value': 254725368679}]}}}}}
2024-09-11 08:48:41,137 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 08:48:41,353 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 08:48:41,354 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 08:48:41,910 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 08:48:47,145 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:48:47,505 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:48:47,506 - INFO - {'updated': 'initiated stk query for ws_CO_11092024114827150724892594 827142 '}
2024-09-11 08:48:47,568 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:48:48,187 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:48:48,189 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 5y1AfoHHNXqhrMGBKCcuXuBfskzt'}"}
2024-09-11 08:48:48,189 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDg0ODQ3', 'Timestamp': '20240911084847', 'CheckoutRequestID': 'ws_CO_11092024114827150724892594'}"}
2024-09-11 08:48:48,190 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:48:48,927 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 08:48:48,928 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076976357', 'CheckoutRequestID': 'ws_CO_11092024114827150724892594', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024114827150724892594 827142"}
2024-09-11 08:48:49,060 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 08:48:49,182 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:48:49,206 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 08:48:49,207 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 08:48:49,270 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 08:48:49,271 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 08:48:49,496 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 08:49:01,157 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:49:01,180 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-11 08:49:01,181 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 08:50:15,971 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:50:16,144 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:50:16,144 - INFO - there is a test coming
2024-09-11 08:50:16,145 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 08:50:16,190 - INFO - {'updated_data': 'the data is now as 254722768978'}
2024-09-11 08:50:16,190 - INFO - the data is now as 254722768978
2024-09-11 08:50:16,207 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 08:50:16,207 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 08:50:16,208 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:50:16,783 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:50:16,786 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer zoWLIR1Z1GGKJINj2Zb61jrlL1tO'}"}
2024-09-11 08:50:16,786 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDg1MDE2', 'Timestamp': '20240911085016', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '60000', 'PartyA': '254722768978', 'PartyB': 827142, 'PhoneNumber': '254722768978', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-27509', 'TransactionDesc': 'Some payment'}
2024-09-11 08:50:16,788 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:50:17,527 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 08:50:17,533 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585055288720', 'CheckoutRequestID': 'ws_CO_11092024115017316722768978', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 08:52:16,167 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:52:16,337 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:52:16,338 - INFO - {'updated': 'initiated stk query for ws_CO_11092024115204426725368679 827142 '}
2024-09-11 08:52:16,431 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:52:17,007 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:52:17,009 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer I23XinJMEXp9eJVyrHZVn4nlpvcb'}"}
2024-09-11 08:52:17,009 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDg1MjE2', 'Timestamp': '20240911085216', 'CheckoutRequestID': 'ws_CO_11092024115204426725368679'}"}
2024-09-11 08:52:17,011 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:52:17,768 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 08:52:17,769 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599244941', 'CheckoutRequestID': 'ws_CO_11092024115204426725368679', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024115204426725368679 827142"}
2024-09-11 08:52:17,901 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 08:52:18,093 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 08:52:18,094 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 08:52:18,347 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:04:27,722 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171318721', 'CheckoutRequestID': 'ws_CO_11092024120419148719168491', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB97HS6QZ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911120427}, {'Name': 'PhoneNumber', 'Value': 254719168491}]}}}}"}
2024-09-11 09:04:27,722 - INFO - {'updated_data': 'callback data began'}
2024-09-11 09:04:27,722 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171318721', 'CheckoutRequestID': 'ws_CO_11092024120419148719168491', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB97HS6QZ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911120427}, {'Name': 'PhoneNumber', 'Value': 254719168491}]}}}}}
2024-09-11 09:04:27,877 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:04:28,278 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:04:28,279 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:04:28,492 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:04:35,549 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:04:35,791 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:04:35,792 - INFO - there is a test coming
2024-09-11 09:04:35,792 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 09:04:35,836 - INFO - {'updated_data': 'the data is now as 254725815080'}
2024-09-11 09:04:35,837 - INFO - the data is now as 254725815080
2024-09-11 09:04:35,863 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 09:04:35,863 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 09:04:35,864 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:04:36,485 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:04:36,489 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer e1o45poikvRoSqmnwnECNDaoN0VN'}"}
2024-09-11 09:04:36,493 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDkwNDM2', 'Timestamp': '20240911090436', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '6000', 'PartyA': '254725815080', 'PartyB': 899885, 'PhoneNumber': '254725815080', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054296', 'TransactionDesc': 'Some payment'}
2024-09-11 09:04:36,495 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:04:37,267 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 09:04:37,274 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181854555', 'CheckoutRequestID': 'ws_CO_11092024120437021725815080', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 09:04:38,126 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:04:38,280 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:04:38,281 - INFO - {'updated': 'initiated stk query for ws_CO_11092024120419148719168491 899885 '}
2024-09-11 09:04:38,345 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:04:38,923 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:04:38,925 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer rRSw3BlFjpgn4beuHBelQ7FCAH2v'}"}
2024-09-11 09:04:38,925 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDkwNDM4', 'Timestamp': '20240911090438', 'CheckoutRequestID': 'ws_CO_11092024120419148719168491'}"}
2024-09-11 09:04:38,926 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:04:39,641 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 09:04:39,642 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171318721', 'CheckoutRequestID': 'ws_CO_11092024120419148719168491', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024120419148719168491 899885"}
2024-09-11 09:04:39,760 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:04:39,966 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:04:39,967 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:04:40,199 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:04:40,371 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:04:40,513 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:04:40,514 - INFO - {'updated': 'initiated stk query for ws_CO_11092024120419148719168491 899885 '}
2024-09-11 09:04:40,573 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:04:41,195 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:04:41,197 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 3Q5YpIIGGMjPGp4IaJqwNAGfX4kO'}"}
2024-09-11 09:04:41,197 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDkwNDQw', 'Timestamp': '20240911090440', 'CheckoutRequestID': 'ws_CO_11092024120419148719168491'}"}
2024-09-11 09:04:41,199 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:04:41,841 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 09:04:41,841 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171318721', 'CheckoutRequestID': 'ws_CO_11092024120419148719168491', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024120419148719168491 899885"}
2024-09-11 09:04:41,961 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:04:42,145 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:04:42,147 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:04:42,694 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:05:19,305 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:05:19,490 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:05:19,491 - INFO - {'updated': 'initiated stk query for ws_CO_11092024120437675110013701 899885 '}
2024-09-11 09:05:19,583 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:05:20,149 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:05:20,151 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer kBdMQIcdO4nwJ1gRlbDGUGmPucXN'}"}
2024-09-11 09:05:20,151 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDkwNTE5', 'Timestamp': '20240911090519', 'CheckoutRequestID': 'ws_CO_11092024120437675110013701'}"}
2024-09-11 09:05:20,153 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:05:20,750 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 09:05:20,751 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171807661', 'CheckoutRequestID': 'ws_CO_11092024120437675110013701', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024120437675110013701 899885"}
2024-09-11 09:05:20,877 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:05:21,078 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:05:21,080 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:05:21,329 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:06:21,123 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:06:21,279 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:06:21,279 - INFO - there is a test coming
2024-09-11 09:06:21,279 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 09:06:21,321 - INFO - {'updated_data': 'the data is now as 254729901217'}
2024-09-11 09:06:21,321 - INFO - the data is now as 254729901217
2024-09-11 09:06:21,337 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 09:06:21,337 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 09:06:21,338 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:06:21,899 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:06:21,901 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer GKKCfrN2p0vk8Y1irhPfxGKkEOce'}"}
2024-09-11 09:06:21,901 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDkwNjIx', 'Timestamp': '20240911090621', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3485', 'PartyA': '254729901217', 'PartyB': 827142, 'PhoneNumber': '254729901217', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-22548', 'TransactionDesc': 'Some payment'}
2024-09-11 09:06:21,903 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:06:22,648 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 09:06:22,654 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19363473', 'CheckoutRequestID': 'ws_CO_11092024120622433729901217', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 09:07:28,049 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88991322', 'CheckoutRequestID': 'ws_CO_11092024120715477700296971', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB97I6ER7'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911120727}, {'Name': 'PhoneNumber', 'Value': 254700296971}]}}}}"}
2024-09-11 09:07:28,049 - INFO - {'updated_data': 'callback data began'}
2024-09-11 09:07:28,049 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88991322', 'CheckoutRequestID': 'ws_CO_11092024120715477700296971', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB97I6ER7'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911120727}, {'Name': 'PhoneNumber', 'Value': 254700296971}]}}}}}
2024-09-11 09:07:28,204 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:07:28,411 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:07:28,412 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:07:28,630 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:07:44,399 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:07:44,549 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:07:44,550 - INFO - there is a test coming
2024-09-11 09:07:44,550 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 09:07:44,605 - INFO - {'updated_data': 'the data is now as 254729901217'}
2024-09-11 09:07:44,605 - INFO - the data is now as 254729901217
2024-09-11 09:07:44,629 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 09:07:44,630 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 09:07:44,640 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:07:45,203 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:07:45,205 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer VtsjwqAhlHxHNQ8wOuAnmV1Atvre'}"}
2024-09-11 09:07:45,205 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDkwNzQ1', 'Timestamp': '20240911090745', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2345', 'PartyA': '254729901217', 'PartyB': 827142, 'PhoneNumber': '254729901217', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-22543', 'TransactionDesc': 'Some payment'}
2024-09-11 09:07:45,206 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:07:46,074 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 09:07:46,080 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171085148', 'CheckoutRequestID': 'ws_CO_11092024120745852729901217', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 09:08:07,063 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:08:07,206 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:08:07,207 - INFO - {'updated': 'initiated stk query for ws_CO_11092024120745852729901217 827142 '}
2024-09-11 09:08:07,273 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:08:07,882 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:08:07,884 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer lpO7m6UoSs0DrTGAlwGRJIWmOhFb'}"}
2024-09-11 09:08:07,884 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDkwODA3', 'Timestamp': '20240911090807', 'CheckoutRequestID': 'ws_CO_11092024120745852729901217'}"}
2024-09-11 09:08:07,886 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:08:08,514 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 09:08:08,515 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024120745852729901217', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024120745852729901217 827142"}
2024-09-11 09:08:08,517 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 09:08:16,977 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:08:17,170 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:08:17,171 - INFO - {'updated': 'initiated stk query for ws_CO_11092024120745852729901217 827142 '}
2024-09-11 09:08:17,226 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:08:17,821 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:08:17,823 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer YRmJlwaW5GlAq7UX8LsI5aqxAbL5'}"}
2024-09-11 09:08:17,824 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDkwODE3', 'Timestamp': '20240911090817', 'CheckoutRequestID': 'ws_CO_11092024120745852729901217'}"}
2024-09-11 09:08:17,825 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:08:18,546 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 09:08:18,547 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171085148', 'CheckoutRequestID': 'ws_CO_11092024120745852729901217', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024120745852729901217 827142"}
2024-09-11 09:08:18,664 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:08:18,858 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:08:18,860 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:08:19,089 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:10:48,878 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:10:49,069 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:10:49,070 - INFO - {'updated': 'initiated stk query for ws_CO_11092024121037728725102770 827142 '}
2024-09-11 09:10:49,140 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:10:49,704 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:10:49,706 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer NPuS40JYMw7Wp1Zezli2HdozKxeU'}"}
2024-09-11 09:10:49,706 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDkxMDQ5', 'Timestamp': '20240911091049', 'CheckoutRequestID': 'ws_CO_11092024121037728725102770'}"}
2024-09-11 09:10:49,707 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:10:50,325 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 09:10:50,326 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024121037728725102770', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024121037728725102770 827142"}
2024-09-11 09:10:50,328 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 09:10:58,963 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:10:59,093 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:10:59,094 - INFO - {'updated': 'initiated stk query for ws_CO_11092024121037728725102770 827142 '}
2024-09-11 09:10:59,155 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:10:59,717 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:10:59,719 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Sr7VA7TgNZkE0PfoArahh4u3WKAI'}"}
2024-09-11 09:10:59,720 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDkxMDU5', 'Timestamp': '20240911091059', 'CheckoutRequestID': 'ws_CO_11092024121037728725102770'}"}
2024-09-11 09:10:59,721 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:11:00,346 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 09:11:00,347 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599292517', 'CheckoutRequestID': 'ws_CO_11092024121037728725102770', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024121037728725102770 827142"}
2024-09-11 09:11:00,477 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:11:00,696 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:11:00,698 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:11:01,148 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:12:16,057 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:12:16,219 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:12:16,220 - INFO - there is a test coming
2024-09-11 09:12:16,220 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 09:12:16,263 - INFO - {'updated_data': 'the data is now as 254721535909'}
2024-09-11 09:12:16,263 - INFO - the data is now as 254721535909
2024-09-11 09:12:16,282 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 09:12:16,282 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 09:12:16,283 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:12:17,156 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:12:17,159 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ppUJS5kJp5sYiGPtzAR8IlDQfEzF'}"}
2024-09-11 09:12:17,159 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDkxMjE3', 'Timestamp': '20240911091217', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '320000', 'PartyA': '254721535909', 'PartyB': 827142, 'PhoneNumber': '254721535909', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-20946', 'TransactionDesc': 'Some payment'}
2024-09-11 09:12:17,160 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:12:17,958 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 09:12:17,964 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8936740', 'CheckoutRequestID': 'ws_CO_11092024121217724721535909', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 09:12:29,173 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:12:29,345 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:12:29,346 - INFO - {'updated': 'initiated stk query for ws_CO_11092024121217724721535909 827142 '}
2024-09-11 09:12:29,402 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:12:29,991 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:12:29,992 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 7WrsBD4NrvTrg9R3sY1C34FfA2cx'}"}
2024-09-11 09:12:29,993 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDkxMjI5', 'Timestamp': '20240911091229', 'CheckoutRequestID': 'ws_CO_11092024121217724721535909'}"}
2024-09-11 09:12:29,994 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:12:30,622 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 411
2024-09-11 09:12:30,622 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8936740', 'CheckoutRequestID': 'ws_CO_11092024121217724721535909', 'ResultCode': '3', 'ResultDesc': 'Declined due to limit rule: greater than the maximum transaction amount.'} for ws_CO_11092024121217724721535909 827142"}
2024-09-11 09:12:30,757 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:12:31,273 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:12:31,275 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:12:31,497 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:12:52,755 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:12:52,924 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:12:52,925 - INFO - {'updated': 'initiated stk query for ws_CO_11092024121241514724892594 827142 '}
2024-09-11 09:12:52,987 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:12:53,549 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:12:53,551 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer vrRSbgY6Rr5JyfHHZY25GgHUHNEX'}"}
2024-09-11 09:12:53,551 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDkxMjUy', 'Timestamp': '20240911091252', 'CheckoutRequestID': 'ws_CO_11092024121241514724892594'}"}
2024-09-11 09:12:53,552 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:12:54,309 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 09:12:54,310 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024121241514724892594', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024121241514724892594 827142"}
2024-09-11 09:12:54,313 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 09:17:26,305 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:17:26,441 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:17:26,442 - INFO - {'updated': 'initiated stk query for ws_CO_11092024121712971726996484 827142 '}
2024-09-11 09:17:26,520 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:17:27,182 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:17:27,189 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 7RyNM0AAkqGEkAFx5Ha1BB2ekHKv'}"}
2024-09-11 09:17:27,190 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDkxNzI2', 'Timestamp': '20240911091726', 'CheckoutRequestID': 'ws_CO_11092024121712971726996484'}"}
2024-09-11 09:17:27,194 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:17:27,912 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 09:17:27,913 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171332939', 'CheckoutRequestID': 'ws_CO_11092024121712971726996484', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024121712971726996484 827142"}
2024-09-11 09:17:28,031 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:17:28,225 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:17:28,226 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:17:28,427 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:25:42,272 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:25:42,537 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:25:42,537 - INFO - there is a test coming
2024-09-11 09:25:42,537 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 09:25:42,589 - INFO - {'updated_data': 'the data is now as 254716599177'}
2024-09-11 09:25:42,589 - INFO - the data is now as 254716599177
2024-09-11 09:25:42,607 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 09:25:42,607 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 09:25:42,608 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:25:43,180 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:25:43,182 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer z2IcRhwHYjZyMFEeRSOlO7p2EIfn'}"}
2024-09-11 09:25:43,182 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDkyNTQz', 'Timestamp': '20240911092543', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '20000', 'PartyA': '254716599177', 'PartyB': 827142, 'PhoneNumber': '254716599177', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '405-1961', 'TransactionDesc': 'Some payment'}
2024-09-11 09:25:43,183 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:25:43,905 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 09:25:43,911 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8971476', 'CheckoutRequestID': 'ws_CO_11092024122543724716599177', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 09:27:04,644 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599333452', 'CheckoutRequestID': 'ws_CO_11092024122642099114449748', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 09:27:04,644 - INFO - {'updated_data': 'callback data began'}
2024-09-11 09:27:04,644 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599333452', 'CheckoutRequestID': 'ws_CO_11092024122642099114449748', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 09:27:04,808 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:27:05,020 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:27:05,022 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:27:05,283 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:27:45,835 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:27:46,000 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:27:46,001 - INFO - {'updated': 'initiated stk query for ws_CO_11092024122734573729555240 827142 '}
2024-09-11 09:27:46,071 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:27:46,691 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:27:46,693 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer VcQZtNFVOatfgUGTvaCxGJrhTs0S'}"}
2024-09-11 09:27:46,693 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDkyNzQ2', 'Timestamp': '20240911092746', 'CheckoutRequestID': 'ws_CO_11092024122734573729555240'}"}
2024-09-11 09:27:46,694 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:27:47,414 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 09:27:47,415 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208794702870', 'CheckoutRequestID': 'ws_CO_11092024122734573729555240', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024122734573729555240 827142"}
2024-09-11 09:27:47,550 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:27:47,732 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:27:47,733 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:27:48,286 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:27:56,350 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171107921', 'CheckoutRequestID': 'ws_CO_11092024122746079712412129', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1700.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB37KVAEV'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911122754}, {'Name': 'PhoneNumber', 'Value': 254712412129}]}}}}"}
2024-09-11 09:27:56,350 - INFO - {'updated_data': 'callback data began'}
2024-09-11 09:27:56,350 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171107921', 'CheckoutRequestID': 'ws_CO_11092024122746079712412129', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1700.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB37KVAEV'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911122754}, {'Name': 'PhoneNumber', 'Value': 254712412129}]}}}}}
2024-09-11 09:27:56,541 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:27:56,734 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:27:56,736 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:27:56,955 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:27:57,612 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:27:57,741 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:27:57,742 - INFO - {'updated': 'initiated stk query for ws_CO_11092024122746079712412129 899885 '}
2024-09-11 09:27:57,808 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:27:58,472 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:27:58,474 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer FmTZvPaVu8yAKuENE97Rq75QkYwN'}"}
2024-09-11 09:27:58,475 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDkyNzU3', 'Timestamp': '20240911092757', 'CheckoutRequestID': 'ws_CO_11092024122746079712412129'}"}
2024-09-11 09:27:58,476 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:27:59,106 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 09:27:59,107 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171107921', 'CheckoutRequestID': 'ws_CO_11092024122746079712412129', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024122746079712412129 899885"}
2024-09-11 09:27:59,230 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:27:59,421 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:27:59,422 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:27:59,652 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:28:09,118 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:28:09,312 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:28:09,313 - INFO - there is a test coming
2024-09-11 09:28:09,313 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 09:28:09,359 - INFO - {'updated_data': 'the data is now as 254114449748'}
2024-09-11 09:28:09,360 - INFO - the data is now as 254114449748
2024-09-11 09:28:09,381 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 09:28:09,382 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 09:28:09,383 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:28:09,934 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:28:09,936 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer NWp0hED7iugKFwZaO96W5XXPgqvS'}"}
2024-09-11 09:28:09,936 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDkyODA5', 'Timestamp': '20240911092809', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254114449748', 'PartyB': 899885, 'PhoneNumber': '254114449748', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054326', 'TransactionDesc': 'Some payment'}
2024-09-11 09:28:09,938 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:28:12,547 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 09:28:12,553 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519422794', 'CheckoutRequestID': 'ws_CO_11092024122811842114449748', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 09:28:33,336 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:28:33,483 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:28:33,484 - INFO - {'updated': 'initiated stk query for ws_CO_11092024122811842114449748 899885 '}
2024-09-11 09:28:33,538 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:28:34,111 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:28:34,114 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 8XyoAVMVSMYoEK0UJWJQ8mRGkAsY'}"}
2024-09-11 09:28:34,114 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDkyODMz', 'Timestamp': '20240911092833', 'CheckoutRequestID': 'ws_CO_11092024122811842114449748'}"}
2024-09-11 09:28:34,116 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:28:34,846 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-11 09:28:34,847 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519422794', 'CheckoutRequestID': 'ws_CO_11092024122811842114449748', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_11092024122811842114449748 899885"}
2024-09-11 09:28:34,981 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:28:35,173 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:28:35,175 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:28:35,705 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:30:39,553 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:30:39,722 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:30:39,722 - INFO - {'updated': 'initiated stk query for ws_CO_11092024123017960114449748 899885 '}
2024-09-11 09:30:39,798 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:30:40,469 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:30:40,471 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer kVfPWZvcVd1HlktXQ7RBm4Y25GGL'}"}
2024-09-11 09:30:40,472 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDkzMDM5', 'Timestamp': '20240911093039', 'CheckoutRequestID': 'ws_CO_11092024123017960114449748'}"}
2024-09-11 09:30:40,474 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:30:41,160 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 09:30:41,161 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19424941', 'CheckoutRequestID': 'ws_CO_11092024123017960114449748', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024123017960114449748 899885"}
2024-09-11 09:30:41,282 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:30:41,495 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:30:41,496 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:30:42,042 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:30:51,755 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794706901', 'CheckoutRequestID': 'ws_CO_11092024123036900720655886', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB37L9H6N'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911123051}, {'Name': 'PhoneNumber', 'Value': 254720655886}]}}}}"}
2024-09-11 09:30:51,755 - INFO - {'updated_data': 'callback data began'}
2024-09-11 09:30:51,755 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794706901', 'CheckoutRequestID': 'ws_CO_11092024123036900720655886', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB37L9H6N'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911123051}, {'Name': 'PhoneNumber', 'Value': 254720655886}]}}}}}
2024-09-11 09:30:51,925 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:30:52,113 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:30:52,114 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:30:52,371 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:31:08,647 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:31:08,830 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:31:08,831 - INFO - {'updated': 'initiated stk query for ws_CO_11092024123036900720655886 827142 '}
2024-09-11 09:31:08,886 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:31:15,755 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:31:15,758 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer a5B1cixtG882gyYbQAmFID52WRHG'}"}
2024-09-11 09:31:15,758 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDkzMTA4', 'Timestamp': '20240911093108', 'CheckoutRequestID': 'ws_CO_11092024123036900720655886'}"}
2024-09-11 09:31:15,760 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:31:16,470 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 09:31:16,470 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208794706901', 'CheckoutRequestID': 'ws_CO_11092024123036900720655886', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024123036900720655886 827142"}
2024-09-11 09:31:16,615 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:31:16,825 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:31:16,826 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:31:17,290 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:33:00,836 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:33:00,988 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:33:00,989 - INFO - there is a test coming
2024-09-11 09:33:00,989 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 09:33:01,033 - INFO - {'updated_data': 'the data is now as 254728852798'}
2024-09-11 09:33:01,034 - INFO - the data is now as 254728852798
2024-09-11 09:33:01,049 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 09:33:01,049 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 09:33:01,050 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:33:03,836 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:33:03,838 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 9eTo0tnvGonNfniv3LO7ajHxcUHm'}"}
2024-09-11 09:33:03,839 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDkzMzAz', 'Timestamp': '20240911093303', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5300', 'PartyA': '254728852798', 'PartyB': 827142, 'PhoneNumber': '254728852798', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '169-15428', 'TransactionDesc': 'Some payment'}
2024-09-11 09:33:03,840 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:33:04,680 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 09:33:04,699 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171840426', 'CheckoutRequestID': 'ws_CO_11092024123304457728852798', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 09:33:14,649 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171840426', 'CheckoutRequestID': 'ws_CO_11092024123304457728852798', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5300.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB27LL3VE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911123314}, {'Name': 'PhoneNumber', 'Value': 254728852798}]}}}}"}
2024-09-11 09:33:14,650 - INFO - {'updated_data': 'callback data began'}
2024-09-11 09:33:14,650 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171840426', 'CheckoutRequestID': 'ws_CO_11092024123304457728852798', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5300.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB27LL3VE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911123314}, {'Name': 'PhoneNumber', 'Value': 254728852798}]}}}}}
2024-09-11 09:33:14,837 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:33:15,527 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:33:15,528 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:33:15,529 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:33:15,657 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:33:15,658 - INFO - {'updated': 'initiated stk query for ws_CO_11092024123304457728852798 827142 '}
2024-09-11 09:33:15,738 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:33:15,749 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:33:16,340 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:33:16,342 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer EYUBleMHJdzFbZuEo7eL04ZZmWXr'}"}
2024-09-11 09:33:16,342 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDkzMzE1', 'Timestamp': '20240911093315', 'CheckoutRequestID': 'ws_CO_11092024123304457728852798'}"}
2024-09-11 09:33:16,344 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:33:17,008 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 09:33:17,008 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171840426', 'CheckoutRequestID': 'ws_CO_11092024123304457728852798', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024123304457728852798 827142"}
2024-09-11 09:33:17,136 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:33:17,666 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:33:17,668 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:33:17,940 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:33:38,253 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:33:38,457 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:33:38,457 - INFO - there is a test coming
2024-09-11 09:33:38,458 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 09:33:38,503 - INFO - {'updated_data': 'the data is now as 254799457530'}
2024-09-11 09:33:38,503 - INFO - the data is now as 254799457530
2024-09-11 09:33:38,540 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 09:33:38,541 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 09:33:38,542 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:33:39,136 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:33:39,138 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer idgSqANwofBfRQhzUMzsZX7vcl7L'}"}
2024-09-11 09:33:39,138 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDkzMzM5', 'Timestamp': '20240911093339', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '4000', 'PartyA': '254799457530', 'PartyB': 899885, 'PhoneNumber': '254799457530', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0623628-1726047216815', 'TransactionDesc': 'Some payment'}
2024-09-11 09:33:39,140 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:33:40,023 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 09:33:40,029 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519435974', 'CheckoutRequestID': 'ws_CO_11092024123339762799457530', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 09:36:13,512 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:36:13,648 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:36:13,649 - INFO - {'updated': 'initiated stk query for ws_CO_11092024123601998799457530 899885 '}
2024-09-11 09:36:13,718 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:36:14,317 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:36:14,320 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Ctrr4Gs9E09OmNpOxGfolGrj23w3'}"}
2024-09-11 09:36:14,320 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDkzNjEz', 'Timestamp': '20240911093613', 'CheckoutRequestID': 'ws_CO_11092024123601998799457530'}"}
2024-09-11 09:36:14,321 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:36:15,031 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 09:36:15,031 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024123601998799457530', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024123601998799457530 899885"}
2024-09-11 09:36:15,034 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 09:36:27,247 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:36:27,402 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:36:27,403 - INFO - there is a test coming
2024-09-11 09:36:27,403 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 09:36:27,446 - INFO - {'updated_data': 'the data is now as 254722948355'}
2024-09-11 09:36:27,447 - INFO - the data is now as 254722948355
2024-09-11 09:36:27,462 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 09:36:27,462 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 09:36:27,463 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:36:28,019 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:36:28,020 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 6tGs9y0jB6b3CGdDc1xPILR8axaV'}"}
2024-09-11 09:36:28,021 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDkzNjI4', 'Timestamp': '20240911093628', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '250113', 'PartyA': '254722948355', 'PartyB': 827142, 'PhoneNumber': '254722948355', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '168-420', 'TransactionDesc': 'Some payment'}
2024-09-11 09:36:28,022 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:36:28,881 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 09:36:28,886 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208794713875', 'CheckoutRequestID': 'ws_CO_11092024123628624722948355', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 09:36:41,400 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794713875', 'CheckoutRequestID': 'ws_CO_11092024123628624722948355', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 09:36:41,400 - INFO - {'updated_data': 'callback data began'}
2024-09-11 09:36:41,400 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794713875', 'CheckoutRequestID': 'ws_CO_11092024123628624722948355', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 09:36:41,589 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:36:41,780 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:36:41,782 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:36:42,001 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:37:09,428 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8999404', 'CheckoutRequestID': 'ws_CO_11092024123702065720655886', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 09:37:09,429 - INFO - {'updated_data': 'callback data began'}
2024-09-11 09:37:09,429 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8999404', 'CheckoutRequestID': 'ws_CO_11092024123702065720655886', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 09:37:09,625 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:37:10,129 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:37:10,131 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:37:10,356 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:37:23,004 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:37:23,179 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:37:23,180 - INFO - there is a test coming
2024-09-11 09:37:23,180 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 09:37:23,250 - INFO - {'updated_data': 'the data is now as 254703380604'}
2024-09-11 09:37:23,250 - INFO - the data is now as 254703380604
2024-09-11 09:37:23,269 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 09:37:23,270 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 09:37:23,271 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:37:23,926 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:37:23,928 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer psIGafMTrQiKE0jAkdxqBA4EmLEO'}"}
2024-09-11 09:37:23,928 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDkzNzIz', 'Timestamp': '20240911093723', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '24764', 'PartyA': '254703380604', 'PartyB': 827142, 'PhoneNumber': '254703380604', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-25172', 'TransactionDesc': 'Some payment'}
2024-09-11 09:37:23,929 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:37:24,871 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 09:37:24,877 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171357000', 'CheckoutRequestID': 'ws_CO_11092024123724625703380604', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 09:37:35,881 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:37:36,012 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:37:36,013 - INFO - {'updated': 'initiated stk query for ws_CO_11092024123724625703380604 827142 '}
2024-09-11 09:37:36,075 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:37:36,758 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:37:36,763 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer KHZvSvmLHJqkGzm8By8WDAOSPFLw'}"}
2024-09-11 09:37:36,764 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDkzNzM2', 'Timestamp': '20240911093736', 'CheckoutRequestID': 'ws_CO_11092024123724625703380604'}"}
2024-09-11 09:37:36,765 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:37:37,422 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 09:37:37,423 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171357000', 'CheckoutRequestID': 'ws_CO_11092024123724625703380604', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024123724625703380604 827142"}
2024-09-11 09:37:37,544 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:37:37,748 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:37:37,750 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:37:37,994 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:20:34,596 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19554315', 'CheckoutRequestID': 'ws_CO_11092024132028711722332886', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 10:20:34,596 - INFO - {'updated_data': 'callback data began'}
2024-09-11 10:20:34,596 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19554315', 'CheckoutRequestID': 'ws_CO_11092024132028711722332886', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 10:20:34,753 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:20:34,938 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:20:34,945 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:20:35,180 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:20:54,911 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:20:55,064 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:20:55,065 - INFO - there is a test coming
2024-09-11 10:20:55,065 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 10:20:55,113 - INFO - {'updated_data': 'the data is now as 254729262626'}
2024-09-11 10:20:55,113 - INFO - the data is now as 254729262626
2024-09-11 10:20:55,137 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 10:20:55,138 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 10:20:55,139 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:20:55,718 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:20:55,720 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer foAcoAlmWTaK7OnRR1a3806tnPG0'}"}
2024-09-11 10:20:55,721 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTAyMDU1', 'Timestamp': '20240911102055', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '4864', 'PartyA': '254729262626', 'PartyB': 827142, 'PhoneNumber': '254729262626', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-108609', 'TransactionDesc': 'Some payment'}
2024-09-11 10:20:55,724 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:20:56,493 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 10:20:56,499 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077081368', 'CheckoutRequestID': 'ws_CO_11092024132056266729262626', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 10:21:09,923 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077081368', 'CheckoutRequestID': 'ws_CO_11092024132056266729262626', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4864.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB27S1R7M'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911132109}, {'Name': 'PhoneNumber', 'Value': 254729262626}]}}}}"}
2024-09-11 10:21:09,923 - INFO - {'updated_data': 'callback data began'}
2024-09-11 10:21:09,923 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077081368', 'CheckoutRequestID': 'ws_CO_11092024132056266729262626', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4864.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB27S1R7M'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911132109}, {'Name': 'PhoneNumber', 'Value': 254729262626}]}}}}}
2024-09-11 10:21:10,095 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:21:10,289 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:21:10,291 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:21:10,506 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:22:14,944 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585055524298', 'CheckoutRequestID': 'ws_CO_11092024132204425759013116', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB07S6ZT0'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911132214}, {'Name': 'PhoneNumber', 'Value': 254759013116}]}}}}"}
2024-09-11 10:22:14,945 - INFO - {'updated_data': 'callback data began'}
2024-09-11 10:22:14,945 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585055524298', 'CheckoutRequestID': 'ws_CO_11092024132204425759013116', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB07S6ZT0'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911132214}, {'Name': 'PhoneNumber', 'Value': 254759013116}]}}}}}
2024-09-11 10:22:15,112 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:22:15,316 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:22:15,317 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:22:15,560 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:22:15,828 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:22:15,954 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:22:15,955 - INFO - {'updated': 'initiated stk query for ws_CO_11092024132204425759013116 899885 '}
2024-09-11 10:22:16,027 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:22:16,581 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:22:16,583 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer AHFGmQmkJatAIzT0F7qO55ZV2Aol'}"}
2024-09-11 10:22:16,584 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTAyMjE2', 'Timestamp': '20240911102216', 'CheckoutRequestID': 'ws_CO_11092024132204425759013116'}"}
2024-09-11 10:22:16,585 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:22:17,185 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 10:22:17,185 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585055524298', 'CheckoutRequestID': 'ws_CO_11092024132204425759013116', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024132204425759013116 899885"}
2024-09-11 10:22:17,306 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:22:17,506 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:22:17,508 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:22:18,034 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:22:23,901 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:22:24,046 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:22:24,047 - INFO - there is a test coming
2024-09-11 10:22:24,047 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 10:22:24,091 - INFO - {'updated_data': 'the data is now as 254703380604'}
2024-09-11 10:22:24,091 - INFO - the data is now as 254703380604
2024-09-11 10:22:24,109 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 10:22:24,109 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 10:22:24,110 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:22:24,783 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:22:24,786 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer A5as8NmJAGG3FEB8UdChdREdTu6l'}"}
2024-09-11 10:22:24,786 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTAyMjI0', 'Timestamp': '20240911102224', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '12010', 'PartyA': '254703380604', 'PartyB': 827142, 'PhoneNumber': '254703380604', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-41712', 'TransactionDesc': 'Some payment'}
2024-09-11 10:22:24,787 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:22:25,633 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 10:22:25,640 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208794765555', 'CheckoutRequestID': 'ws_CO_11092024132225406703380604', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 10:23:21,060 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:23:21,267 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:23:21,268 - INFO - there is a test coming
2024-09-11 10:23:21,268 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 10:23:21,319 - INFO - {'updated_data': 'the data is now as 254703380604'}
2024-09-11 10:23:21,319 - INFO - the data is now as 254703380604
2024-09-11 10:23:21,337 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 10:23:21,337 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 10:23:21,338 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:23:21,969 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:23:21,971 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 4Dz9ybzu6rGgAYnvGteofc6ZJIww'}"}
2024-09-11 10:23:21,972 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTAyMzIx', 'Timestamp': '20240911102321', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '7000', 'PartyA': '254703380604', 'PartyB': 827142, 'PhoneNumber': '254703380604', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-50870', 'TransactionDesc': 'Some payment'}
2024-09-11 10:23:21,973 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:23:22,841 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 10:23:22,847 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171408138', 'CheckoutRequestID': 'ws_CO_11092024132322602703380604', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 10:27:34,475 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9130781', 'CheckoutRequestID': 'ws_CO_11092024132724017720436270', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5049.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB87SYBAS'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911132733}, {'Name': 'PhoneNumber', 'Value': 254720436270}]}}}}"}
2024-09-11 10:27:34,476 - INFO - {'updated_data': 'callback data began'}
2024-09-11 10:27:34,476 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9130781', 'CheckoutRequestID': 'ws_CO_11092024132724017720436270', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5049.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB87SYBAS'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911132733}, {'Name': 'PhoneNumber', 'Value': 254720436270}]}}}}}
2024-09-11 10:27:34,636 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:27:34,822 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:27:34,823 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:27:35,048 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:27:42,716 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:27:42,861 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:27:42,862 - INFO - there is a test coming
2024-09-11 10:27:42,862 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 10:27:42,907 - INFO - {'updated_data': 'the data is now as 254722491492'}
2024-09-11 10:27:42,908 - INFO - the data is now as 254722491492
2024-09-11 10:27:42,943 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 10:27:42,943 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 10:27:42,944 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:27:43,525 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:27:43,527 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer fyWwHzPNPbZuDC0i6KG5lh8rv6Gr'}"}
2024-09-11 10:27:43,527 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTAyNzQz', 'Timestamp': '20240911102743', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '4000', 'PartyA': '254722491492', 'PartyB': 827142, 'PhoneNumber': '254722491492', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-27057', 'TransactionDesc': 'Some payment'}
2024-09-11 10:27:43,528 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:27:44,296 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 10:27:44,303 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171901483', 'CheckoutRequestID': 'ws_CO_11092024132744046722491492', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 10:29:37,566 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:29:37,827 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:29:37,828 - INFO - there is a test coming
2024-09-11 10:29:37,828 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 10:29:37,871 - INFO - {'updated_data': 'the data is now as 254722332886'}
2024-09-11 10:29:37,871 - INFO - the data is now as 254722332886
2024-09-11 10:29:37,887 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 10:29:37,887 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 10:29:37,888 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:29:38,476 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:29:38,478 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Y5Y0B9XLqe5yDFrLOGJAE8UnsSbQ'}"}
2024-09-11 10:29:38,479 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTAyOTM4', 'Timestamp': '20240911102938', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254722332886', 'PartyB': 827142, 'PhoneNumber': '254722332886', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '169-12094', 'TransactionDesc': 'Some payment'}
2024-09-11 10:29:38,481 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:29:39,226 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 10:29:39,236 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208794772869', 'CheckoutRequestID': 'ws_CO_11092024132938984722332886', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 10:29:50,081 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:29:50,245 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:29:50,246 - INFO - {'updated': 'initiated stk query for ws_CO_11092024132938984722332886 827142 '}
2024-09-11 10:29:50,325 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:29:50,902 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:29:50,904 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 9I0ejqx8SIPwt3AGcWlQXiUC6vP5'}"}
2024-09-11 10:29:50,904 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTAyOTUw', 'Timestamp': '20240911102950', 'CheckoutRequestID': 'ws_CO_11092024132938984722332886'}"}
2024-09-11 10:29:50,906 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:29:51,525 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 10:29:51,526 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208794772869', 'CheckoutRequestID': 'ws_CO_11092024132938984722332886', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024132938984722332886 827142"}
2024-09-11 10:29:51,660 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:29:51,848 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:29:51,849 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:29:52,088 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:30:00,680 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:30:00,838 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:30:00,839 - INFO - there is a test coming
2024-09-11 10:30:00,839 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 10:30:00,896 - INFO - {'updated_data': 'the data is now as 254728610103'}
2024-09-11 10:30:00,896 - INFO - the data is now as 254728610103
2024-09-11 10:30:00,915 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 10:30:00,915 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 10:30:00,916 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:30:01,476 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:30:01,477 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 2nQwUADNlAfZ4QRZsLZVZGxLp8OZ'}"}
2024-09-11 10:30:01,478 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTAzMDAx', 'Timestamp': '20240911103001', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254728610103', 'PartyB': 827142, 'PhoneNumber': '254728610103', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-153991', 'TransactionDesc': 'Some payment'}
2024-09-11 10:30:01,479 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:30:02,432 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 10:30:02,438 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077090979', 'CheckoutRequestID': 'ws_CO_11092024133002138728610103', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 10:30:21,713 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077090979', 'CheckoutRequestID': 'ws_CO_11092024133002138728610103', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB17TCNLT'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911133021}, {'Name': 'PhoneNumber', 'Value': 254728610103}]}}}}"}
2024-09-11 10:30:21,713 - INFO - {'updated_data': 'callback data began'}
2024-09-11 10:30:21,713 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077090979', 'CheckoutRequestID': 'ws_CO_11092024133002138728610103', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB17TCNLT'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911133021}, {'Name': 'PhoneNumber', 'Value': 254728610103}]}}}}}
2024-09-11 10:30:21,891 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:30:22,093 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:30:22,095 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:30:22,364 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:31:46,242 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:31:46,369 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:31:46,369 - INFO - {'updated': 'initiated stk query for ws_CO_11092024133134999728610103 827142 '}
2024-09-11 10:31:46,451 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:31:47,018 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:31:47,020 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer AnLKlaifs78kMVzdZGOLYOoc6wEg'}"}
2024-09-11 10:31:47,020 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTAzMTQ2', 'Timestamp': '20240911103146', 'CheckoutRequestID': 'ws_CO_11092024133134999728610103'}"}
2024-09-11 10:31:47,021 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:31:47,644 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 10:31:47,645 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024133134999728610103', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024133134999728610103 827142"}
2024-09-11 10:31:47,647 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 10:36:09,420 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:36:09,580 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:36:09,581 - INFO - {'updated': 'initiated stk query for ws_CO_11092024133536685718159756 899885 '}
2024-09-11 10:36:09,637 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:36:10,228 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:36:10,230 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer kJYOfITXAv9Gc5dqG3z40dBCCzSi'}"}
2024-09-11 10:36:10,230 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTAzNjA5', 'Timestamp': '20240911103609', 'CheckoutRequestID': 'ws_CO_11092024133536685718159756'}"}
2024-09-11 10:36:10,231 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:36:10,976 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 10:36:10,976 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519599410', 'CheckoutRequestID': 'ws_CO_11092024133536685718159756', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024133536685718159756 899885"}
2024-09-11 10:36:18,323 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:36:18,811 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:36:18,812 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:36:19,349 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:36:33,935 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599515386', 'CheckoutRequestID': 'ws_CO_11092024133619606722665895', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB77U8SDL'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911133633}, {'Name': 'PhoneNumber', 'Value': 254722665895}]}}}}"}
2024-09-11 10:36:33,936 - INFO - {'updated_data': 'callback data began'}
2024-09-11 10:36:33,936 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599515386', 'CheckoutRequestID': 'ws_CO_11092024133619606722665895', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB77U8SDL'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911133633}, {'Name': 'PhoneNumber', 'Value': 254722665895}]}}}}}
2024-09-11 10:36:39,053 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:36:39,250 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:36:39,251 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:36:39,779 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:36:46,593 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:36:46,751 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:36:46,752 - INFO - {'updated': 'initiated stk query for ws_CO_11092024133619606722665895 827142 '}
2024-09-11 10:36:46,810 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:36:47,407 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:36:47,409 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer iBPtBtgc2j9vTbtiACfG1m8rl4j9'}"}
2024-09-11 10:36:47,409 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTAzNjQ2', 'Timestamp': '20240911103646', 'CheckoutRequestID': 'ws_CO_11092024133619606722665895'}"}
2024-09-11 10:36:47,411 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:36:48,026 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 10:36:48,027 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599515386', 'CheckoutRequestID': 'ws_CO_11092024133619606722665895', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024133619606722665895 827142"}
2024-09-11 10:36:50,645 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:36:50,884 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:36:51,013 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:36:51,014 - INFO - there is a test coming
2024-09-11 10:36:51,014 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 10:36:51,062 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:36:51,064 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:36:51,081 - INFO - {'updated_data': 'the data is now as 254796292093'}
2024-09-11 10:36:51,081 - INFO - the data is now as 254796292093
2024-09-11 10:36:51,102 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 10:36:51,102 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 10:36:51,103 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:36:51,284 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:36:51,667 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:36:51,669 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer VycwGHCKK6szABqnms4Uc6ArtC8y'}"}
2024-09-11 10:36:51,670 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTAzNjUx', 'Timestamp': '20240911103651', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254796292093', 'PartyB': 899885, 'PhoneNumber': '254796292093', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA60213885CP', 'TransactionDesc': 'Some payment'}
2024-09-11 10:36:51,671 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:36:52,455 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 10:37:01,370 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599517049', 'CheckoutRequestID': 'ws_CO_11092024133652193796292093', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 10:37:25,546 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9159194', 'CheckoutRequestID': 'ws_CO_11092024133716476717360493', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB27UDBQK'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911133724}, {'Name': 'PhoneNumber', 'Value': 254717360493}]}}}}"}
2024-09-11 10:37:25,547 - INFO - {'updated_data': 'callback data began'}
2024-09-11 10:37:25,547 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9159194', 'CheckoutRequestID': 'ws_CO_11092024133716476717360493', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB27UDBQK'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911133724}, {'Name': 'PhoneNumber', 'Value': 254717360493}]}}}}}
2024-09-11 10:37:25,715 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:37:26,215 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:37:26,217 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:37:26,547 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:37:34,764 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:37:34,910 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:37:34,911 - INFO - {'updated': 'initiated stk query for ws_CO_11092024133716476717360493 827142 '}
2024-09-11 10:37:34,975 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:37:35,562 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:37:35,564 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer G9Bpwam6vHCtM2N7ZXHQFgLelRoG'}"}
2024-09-11 10:37:35,565 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTAzNzM0', 'Timestamp': '20240911103734', 'CheckoutRequestID': 'ws_CO_11092024133716476717360493'}"}
2024-09-11 10:37:35,566 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:37:36,208 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 10:37:36,209 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9159194', 'CheckoutRequestID': 'ws_CO_11092024133716476717360493', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024133716476717360493 827142"}
2024-09-11 10:37:36,332 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:37:36,547 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:37:36,548 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:37:36,769 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:47:37,259 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182123763', 'CheckoutRequestID': 'ws_CO_11092024134731984721213699', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 10:47:37,259 - INFO - {'updated_data': 'callback data began'}
2024-09-11 10:47:37,259 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182123763', 'CheckoutRequestID': 'ws_CO_11092024134731984721213699', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 10:47:37,443 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:47:37,649 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:47:37,650 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:47:37,888 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:47:48,246 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:47:48,405 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:47:48,405 - INFO - {'updated': 'initiated stk query for ws_CO_11092024134737028722759137 827142 '}
2024-09-11 10:47:48,483 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:47:49,049 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:47:49,051 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer w2ihSXTzbqN8sbKko1X3itmttjA6'}"}
2024-09-11 10:47:49,052 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTA0NzQ4', 'Timestamp': '20240911104748', 'CheckoutRequestID': 'ws_CO_11092024134737028722759137'}"}
2024-09-11 10:47:49,053 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:47:49,660 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 10:47:49,661 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024134737028722759137', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024134737028722759137 827142"}
2024-09-11 10:47:49,663 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 10:47:58,245 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:47:58,412 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:47:58,413 - INFO - {'updated': 'initiated stk query for ws_CO_11092024134737028722759137 827142 '}
2024-09-11 10:47:58,483 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:47:59,069 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:47:59,071 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 2F8wWApvbhAgPq8ldl8T2Eyc1MG2'}"}
2024-09-11 10:47:59,072 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTA0NzU4', 'Timestamp': '20240911104758', 'CheckoutRequestID': 'ws_CO_11092024134737028722759137'}"}
2024-09-11 10:47:59,073 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:47:59,743 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 369
2024-09-11 10:47:59,744 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171198698', 'CheckoutRequestID': 'ws_CO_11092024134737028722759137', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_11092024134737028722759137 827142"}
2024-09-11 10:47:59,893 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:48:00,113 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:48:00,128 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:48:00,699 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:48:26,846 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:48:27,036 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:48:27,037 - INFO - there is a test coming
2024-09-11 10:48:27,037 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 10:48:27,081 - INFO - {'updated_data': 'the data is now as 254712868960'}
2024-09-11 10:48:27,081 - INFO - the data is now as 254712868960
2024-09-11 10:48:27,102 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 10:48:27,103 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 10:48:27,104 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:48:27,677 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:48:27,679 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer YlvGfXkVbpeHvm86K1w23FrGtrBx'}"}
2024-09-11 10:48:27,680 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTA0ODI3', 'Timestamp': '20240911104827', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '25000', 'PartyA': '254712868960', 'PartyB': 899885, 'PhoneNumber': '254712868960', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054412', 'TransactionDesc': 'Some payment'}
2024-09-11 10:48:27,681 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:48:30,004 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 10:48:30,032 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208794795032', 'CheckoutRequestID': 'ws_CO_11092024134828238712868960', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 10:48:39,925 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794795032', 'CheckoutRequestID': 'ws_CO_11092024134828238712868960', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 25000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB17VYM9X'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911134839}, {'Name': 'PhoneNumber', 'Value': 254712868960}]}}}}"}
2024-09-11 10:48:39,927 - INFO - {'updated_data': 'callback data began'}
2024-09-11 10:48:39,934 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794795032', 'CheckoutRequestID': 'ws_CO_11092024134828238712868960', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 25000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB17VYM9X'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911134839}, {'Name': 'PhoneNumber', 'Value': 254712868960}]}}}}}
2024-09-11 10:48:40,103 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:48:40,617 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:48:40,618 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:48:40,844 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:48:43,003 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:48:43,141 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:48:43,142 - INFO - {'updated': 'initiated stk query for ws_CO_11092024134828238712868960 899885 '}
2024-09-11 10:48:43,199 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:48:43,760 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:48:43,762 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer wwD0WClx8Dv2hjnLqhVHm2l4gHLO'}"}
2024-09-11 10:48:43,763 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTA0ODQz', 'Timestamp': '20240911104843', 'CheckoutRequestID': 'ws_CO_11092024134828238712868960'}"}
2024-09-11 10:48:43,764 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:48:44,397 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 10:48:44,397 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208794795032', 'CheckoutRequestID': 'ws_CO_11092024134828238712868960', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024134828238712868960 899885"}
2024-09-11 10:48:44,524 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:48:44,644 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89106127', 'CheckoutRequestID': 'ws_CO_11092024134834701722885250', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB17VZ2FB'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911134844}, {'Name': 'PhoneNumber', 'Value': 254722885250}]}}}}"}
2024-09-11 10:48:44,644 - INFO - {'updated_data': 'callback data began'}
2024-09-11 10:48:44,644 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89106127', 'CheckoutRequestID': 'ws_CO_11092024134834701722885250', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB17VZ2FB'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911134844}, {'Name': 'PhoneNumber', 'Value': 254722885250}]}}}}}
2024-09-11 10:48:44,720 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:48:44,722 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:48:44,814 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:48:44,949 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:48:45,299 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:48:45,300 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:48:45,531 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:56:56,807 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:56:56,930 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:56:56,930 - INFO - there is a test coming
2024-09-11 10:56:56,930 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 10:56:56,973 - INFO - {'updated_data': 'the data is now as 254723834163'}
2024-09-11 10:56:56,973 - INFO - the data is now as 254723834163
2024-09-11 10:56:56,989 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 10:56:56,989 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 10:56:56,991 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:56:57,680 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:56:57,682 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer NMNGyAGxV9aONLc9iWft9IUfcfO7'}"}
2024-09-11 10:56:57,683 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTA1NjU3', 'Timestamp': '20240911105657', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2500', 'PartyA': '254723834163', 'PartyB': 899885, 'PhoneNumber': '254723834163', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054415', 'TransactionDesc': 'Some payment'}
2024-09-11 10:56:57,689 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:56:58,390 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 10:56:58,397 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208794804032', 'CheckoutRequestID': 'ws_CO_11092024135658208723834163', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 10:57:09,414 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:57:09,603 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:57:09,603 - INFO - there is a test coming
2024-09-11 10:57:09,604 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 10:57:09,652 - INFO - {'updated_data': 'the data is now as 254724867193'}
2024-09-11 10:57:09,653 - INFO - the data is now as 254724867193
2024-09-11 10:57:09,685 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 10:57:09,686 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 10:57:09,687 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:57:10,381 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:57:10,383 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer njxojL0YGAFIuOkruAiGL1ZZqg4v'}"}
2024-09-11 10:57:10,384 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTA1NzEw', 'Timestamp': '20240911105710', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254724867193', 'PartyB': 899885, 'PhoneNumber': '254724867193', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054359', 'TransactionDesc': 'Some payment'}
2024-09-11 10:57:10,385 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:57:11,169 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 10:57:11,178 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182149269', 'CheckoutRequestID': 'ws_CO_11092024135710939724867193', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 10:57:22,280 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:57:22,301 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-11 10:57:22,302 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 10:58:22,080 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:58:22,241 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:58:22,242 - INFO - there is a test coming
2024-09-11 10:58:22,242 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 10:58:22,287 - INFO - {'updated_data': 'the data is now as 254713757720'}
2024-09-11 10:58:22,287 - INFO - the data is now as 254713757720
2024-09-11 10:58:22,305 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 10:58:22,306 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 10:58:22,307 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:58:22,947 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:58:22,950 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer lLe6IxmFqwI9F0XarDiQZXKDhMV3'}"}
2024-09-11 10:58:22,950 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTA1ODIy', 'Timestamp': '20240911105822', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '500', 'PartyA': '254713757720', 'PartyB': 899885, 'PhoneNumber': '254713757720', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054416', 'TransactionDesc': 'Some payment'}
2024-09-11 10:58:22,952 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:58:23,812 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 10:58:23,818 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171936699', 'CheckoutRequestID': 'ws_CO_11092024135823564713757720', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 11:03:04,731 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171941509', 'CheckoutRequestID': 'ws_CO_11092024140245644713377447', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB07XYHUE'}, {'Name': 'TransactionDate', 'Value': 20240911140304}, {'Name': 'PhoneNumber', 'Value': 254713377447}]}}}}"}
2024-09-11 11:03:04,731 - INFO - {'updated_data': 'callback data began'}
2024-09-11 11:03:04,731 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171941509', 'CheckoutRequestID': 'ws_CO_11092024140245644713377447', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB07XYHUE'}, {'Name': 'TransactionDate', 'Value': 20240911140304}, {'Name': 'PhoneNumber', 'Value': 254713377447}]}}}}}
2024-09-11 11:03:04,910 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:03:05,608 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:03:05,610 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:03:06,134 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:03:07,330 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:03:07,483 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:03:07,483 - INFO - there is a test coming
2024-09-11 11:03:07,484 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 11:03:07,530 - INFO - {'updated_data': 'the data is now as 254721115820'}
2024-09-11 11:03:07,530 - INFO - the data is now as 254721115820
2024-09-11 11:03:07,558 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 11:03:07,559 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 11:03:07,560 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:03:08,128 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:03:08,130 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 8SF47PArcYWJGH0pBDB9eustneY1'}"}
2024-09-11 11:03:08,131 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTEwMzA4', 'Timestamp': '20240911110308', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '250', 'PartyA': '254721115820', 'PartyB': 899885, 'PhoneNumber': '254721115820', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054360', 'TransactionDesc': 'Some payment'}
2024-09-11 11:03:08,132 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:03:08,941 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 11:03:08,947 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519672954', 'CheckoutRequestID': 'ws_CO_11092024140308757721115820', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 11:03:20,333 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:03:20,350 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-11 11:03:20,350 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 11:04:02,159 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:04:02,198 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 11:04:02,199 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 11:04:10,935 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:04:11,107 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:04:11,107 - INFO - {'updated': 'initiated stk query for ws_CO_11092024140349975722948355 827142 '}
2024-09-11 11:04:11,170 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:04:11,766 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:04:11,768 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer xSmu3DnF7t0aBUrVUZ6hwLenErm3'}"}
2024-09-11 11:04:11,769 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTEwNDEx', 'Timestamp': '20240911110411', 'CheckoutRequestID': 'ws_CO_11092024140349975722948355'}"}
2024-09-11 11:04:11,770 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:04:12,535 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 11:04:12,536 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024140349975722948355', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024140349975722948355 827142"}
2024-09-11 11:04:12,538 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 11:04:20,830 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:04:20,943 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:04:20,944 - INFO - {'updated': 'initiated stk query for ws_CO_11092024140349975722948355 827142 '}
2024-09-11 11:04:21,005 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:04:21,572 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:04:21,574 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer xuUGZDrmvxGNmCKrIGCeZPOfbGak'}"}
2024-09-11 11:04:21,575 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTEwNDIx', 'Timestamp': '20240911110421', 'CheckoutRequestID': 'ws_CO_11092024140349975722948355'}"}
2024-09-11 11:04:21,576 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:04:22,180 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 11:04:22,181 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024140349975722948355', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024140349975722948355 827142"}
2024-09-11 11:04:22,183 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 11:04:23,813 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:04:23,838 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-11 11:04:23,839 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 11:04:27,928 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171216411', 'CheckoutRequestID': 'ws_CO_11092024140349975722948355', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}"}
2024-09-11 11:04:27,928 - INFO - {'updated_data': 'callback data began'}
2024-09-11 11:04:27,928 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171216411', 'CheckoutRequestID': 'ws_CO_11092024140349975722948355', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}}
2024-09-11 11:04:28,085 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:04:28,269 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:04:28,270 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:04:28,482 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:04:29,319 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585055638642', 'CheckoutRequestID': 'ws_CO_11092024140413216713287096', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB37Y5J9T'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911140428}, {'Name': 'PhoneNumber', 'Value': 254713287096}]}}}}"}
2024-09-11 11:04:29,319 - INFO - {'updated_data': 'callback data began'}
2024-09-11 11:04:29,319 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585055638642', 'CheckoutRequestID': 'ws_CO_11092024140413216713287096', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB37Y5J9T'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911140428}, {'Name': 'PhoneNumber', 'Value': 254713287096}]}}}}}
2024-09-11 11:04:29,476 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:04:29,670 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:04:29,671 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:04:30,197 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:05:12,142 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:05:12,296 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:05:12,297 - INFO - there is a test coming
2024-09-11 11:05:12,297 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 11:05:12,345 - INFO - {'updated_data': 'the data is now as 254725505432'}
2024-09-11 11:05:12,345 - INFO - the data is now as 254725505432
2024-09-11 11:05:12,360 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 11:05:12,360 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 11:05:12,361 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:05:12,939 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:05:12,941 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer vvHA31iD7Ws6B3Gq0iEYmz8XQV0w'}"}
2024-09-11 11:05:12,942 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTEwNTEy', 'Timestamp': '20240911110512', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '103917', 'PartyA': '254725505432', 'PartyB': 827142, 'PhoneNumber': '254725505432', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-94015', 'TransactionDesc': 'Some payment'}
2024-09-11 11:05:12,943 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:05:13,701 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 11:05:13,708 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171944036', 'CheckoutRequestID': 'ws_CO_11092024140513452725505432', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 11:05:21,382 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599592476', 'CheckoutRequestID': 'ws_CO_11092024140511015715153677', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 11:05:21,382 - INFO - {'updated_data': 'callback data began'}
2024-09-11 11:05:21,382 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599592476', 'CheckoutRequestID': 'ws_CO_11092024140511015715153677', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 11:05:21,554 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:05:22,032 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:05:22,050 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:05:22,051 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:05:22,173 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:05:22,174 - INFO - there is a test coming
2024-09-11 11:05:22,174 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 11:05:22,217 - INFO - {'updated_data': 'the data is now as 254713287096'}
2024-09-11 11:05:22,217 - INFO - the data is now as 254713287096
2024-09-11 11:05:22,233 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 11:05:22,233 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 11:05:22,235 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:05:22,266 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:05:22,800 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:05:22,803 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer fgrwKUFsxsh4lESHkpskjm4PnsHO'}"}
2024-09-11 11:05:22,803 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTEwNTIy', 'Timestamp': '20240911110522', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254713287096', 'PartyB': 827142, 'PhoneNumber': '254713287096', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '121-58474', 'TransactionDesc': 'Some payment'}
2024-09-11 11:05:22,805 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:05:23,624 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 11:05:23,634 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171944169', 'CheckoutRequestID': 'ws_CO_11092024140523347713287096', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 11:05:24,710 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:05:24,861 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:05:24,862 - INFO - {'updated': 'initiated stk query for ws_CO_11092024140513452725505432 827142 '}
2024-09-11 11:05:24,937 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:05:25,613 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:05:25,616 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer IC9YK6ur2ViVlEnMwsZLaaIGLWLR'}"}
2024-09-11 11:05:25,617 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTEwNTI0', 'Timestamp': '20240911110524', 'CheckoutRequestID': 'ws_CO_11092024140513452725505432'}"}
2024-09-11 11:05:25,620 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:05:26,250 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 11:05:26,250 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024140513452725505432', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024140513452725505432 827142"}
2024-09-11 11:05:26,253 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 11:07:04,717 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:07:04,866 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:07:04,866 - INFO - there is a test coming
2024-09-11 11:07:04,866 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 11:07:04,914 - INFO - {'updated_data': 'the data is now as 254715400883'}
2024-09-11 11:07:04,914 - INFO - the data is now as 254715400883
2024-09-11 11:07:04,931 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 11:07:04,932 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 11:07:04,933 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:07:05,523 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:07:05,525 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 0QNoJIGjG1wdLhqgalyUGJDOhCD9'}"}
2024-09-11 11:07:05,525 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTEwNzA1', 'Timestamp': '20240911110705', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '35000', 'PartyA': '254715400883', 'PartyB': 827142, 'PhoneNumber': '254715400883', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '121-25268', 'TransactionDesc': 'Some payment'}
2024-09-11 11:07:05,527 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:07:06,259 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 11:07:06,265 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89125800', 'CheckoutRequestID': 'ws_CO_11092024140706045715400883', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 11:07:18,467 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89125800', 'CheckoutRequestID': 'ws_CO_11092024140706045715400883', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 35000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB57YJB1X'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911140717}, {'Name': 'PhoneNumber', 'Value': 254715400883}]}}}}"}
2024-09-11 11:07:18,467 - INFO - {'updated_data': 'callback data began'}
2024-09-11 11:07:18,468 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89125800', 'CheckoutRequestID': 'ws_CO_11092024140706045715400883', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 35000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB57YJB1X'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911140717}, {'Name': 'PhoneNumber', 'Value': 254715400883}]}}}}}
2024-09-11 11:07:18,637 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:07:18,820 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:07:18,821 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:07:19,346 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:07:41,372 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171946256', 'CheckoutRequestID': 'ws_CO_11092024140732032729270221', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB47YL426'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911140740}, {'Name': 'PhoneNumber', 'Value': 254729270221}]}}}}"}
2024-09-11 11:07:41,373 - INFO - {'updated_data': 'callback data began'}
2024-09-11 11:07:41,373 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171946256', 'CheckoutRequestID': 'ws_CO_11092024140732032729270221', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB47YL426'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911140740}, {'Name': 'PhoneNumber', 'Value': 254729270221}]}}}}}
2024-09-11 11:07:41,534 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:07:42,065 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:07:42,066 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:07:42,298 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:07:53,900 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:07:54,054 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:07:54,055 - INFO - {'updated': 'initiated stk query for ws_CO_11092024140732032729270221 827142 '}
2024-09-11 11:07:54,128 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:07:54,683 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:07:54,685 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer BjZxGQGXTawuyqvdAjIkgdYlmClD'}"}
2024-09-11 11:07:54,685 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTEwNzU0', 'Timestamp': '20240911110754', 'CheckoutRequestID': 'ws_CO_11092024140732032729270221'}"}
2024-09-11 11:07:54,687 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:07:55,313 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 11:07:55,313 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171946256', 'CheckoutRequestID': 'ws_CO_11092024140732032729270221', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024140732032729270221 827142"}
2024-09-11 11:07:55,444 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:07:55,941 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:07:55,942 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:07:56,176 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:08:00,264 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:08:00,280 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 11:08:00,281 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 11:08:19,911 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519685782', 'CheckoutRequestID': 'ws_CO_11092024140806582724823595', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 11:08:19,913 - INFO - {'updated_data': 'callback data began'}
2024-09-11 11:08:19,913 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519685782', 'CheckoutRequestID': 'ws_CO_11092024140806582724823595', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 11:08:20,517 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:08:20,942 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:08:20,943 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:08:21,161 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:08:39,019 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:08:39,167 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:08:39,168 - INFO - there is a test coming
2024-09-11 11:08:39,168 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 11:08:39,212 - INFO - {'updated_data': 'the data is now as 254729270221'}
2024-09-11 11:08:39,212 - INFO - the data is now as 254729270221
2024-09-11 11:08:39,230 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 11:08:39,230 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 11:08:39,231 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:08:39,819 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:08:39,821 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ClTFCckHSXHhMHc4eP4W5fRBH8ut'}"}
2024-09-11 11:08:39,822 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTEwODM5', 'Timestamp': '20240911110839', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '6000', 'PartyA': '254729270221', 'PartyB': 827142, 'PhoneNumber': '254729270221', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-23792', 'TransactionDesc': 'Some payment'}
2024-09-11 11:08:39,823 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:08:40,658 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 11:08:40,665 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171459031', 'CheckoutRequestID': 'ws_CO_11092024140840377729270221', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 11:10:28,946 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:10:29,191 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:10:29,192 - INFO - there is a test coming
2024-09-11 11:10:29,192 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 11:10:29,233 - INFO - {'updated_data': 'the data is now as 254700433552'}
2024-09-11 11:10:29,234 - INFO - the data is now as 254700433552
2024-09-11 11:10:29,248 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 11:10:29,248 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 11:10:29,249 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:10:29,833 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:10:29,835 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer TRNgrmctXc12dD6QTKL180kgIpbb'}"}
2024-09-11 11:10:29,835 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTExMDI5', 'Timestamp': '20240911111029', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254700433552', 'PartyB': 827142, 'PhoneNumber': '254700433552', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-174541', 'TransactionDesc': 'Some payment'}
2024-09-11 11:10:29,836 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:10:30,581 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 11:10:30,588 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519692120', 'CheckoutRequestID': 'ws_CO_11092024141030352700433552', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 11:10:39,245 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:10:39,471 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:10:39,472 - INFO - there is a test coming
2024-09-11 11:10:39,472 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 11:10:39,517 - INFO - {'updated_data': 'the data is now as 254798570246'}
2024-09-11 11:10:39,518 - INFO - the data is now as 254798570246
2024-09-11 11:10:39,537 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 11:10:39,537 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 11:10:39,538 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:10:40,260 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:10:40,262 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Cncj1SCAAoCIze3VrGWGvGJAkAtq'}"}
2024-09-11 11:10:40,262 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTExMDQw', 'Timestamp': '20240911111040', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254798570246', 'PartyB': 827142, 'PhoneNumber': '254798570246', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-41148', 'TransactionDesc': 'Some payment'}
2024-09-11 11:10:40,266 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:10:41,115 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 11:10:41,125 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208794819249', 'CheckoutRequestID': 'ws_CO_11092024141040900798570246', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 11:17:48,640 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:17:48,805 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:17:48,806 - INFO - {'updated': 'initiated stk query for ws_CO_11092024141737417717650987 899885 '}
2024-09-11 11:17:48,860 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:17:49,707 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:17:49,709 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer VT1IimSDpJ6boXSX0AhZjm7tDtaP'}"}
2024-09-11 11:17:49,710 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTExNzQ4', 'Timestamp': '20240911111748', 'CheckoutRequestID': 'ws_CO_11092024141737417717650987'}"}
2024-09-11 11:17:49,711 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:17:50,356 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 11:17:50,357 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599625444', 'CheckoutRequestID': 'ws_CO_11092024141737417717650987', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024141737417717650987 899885"}
2024-09-11 11:17:50,476 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:17:50,682 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:17:50,683 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:17:50,968 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:20:04,458 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:20:04,571 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:20:04,572 - INFO - there is a test coming
2024-09-11 11:20:04,572 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 11:20:04,615 - INFO - {'updated_data': 'the data is now as 254722397592'}
2024-09-11 11:20:04,615 - INFO - the data is now as 254722397592
2024-09-11 11:20:04,631 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 11:20:04,632 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 11:20:04,633 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:20:05,199 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:20:05,201 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer tFgDFJACBnuODZHKTcA4Zppso02C'}"}
2024-09-11 11:20:05,201 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTEyMDA1', 'Timestamp': '20240911112005', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254722397592', 'PartyB': 827142, 'PhoneNumber': '254722397592', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-21036', 'TransactionDesc': 'Some payment'}
2024-09-11 11:20:05,203 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:20:05,959 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 11:20:05,965 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182210983', 'CheckoutRequestID': 'ws_CO_11092024142005758722397592', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 11:29:56,194 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171245017', 'CheckoutRequestID': 'ws_CO_11092024142946636726845964', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}"}
2024-09-11 11:29:56,194 - INFO - {'updated_data': 'callback data began'}
2024-09-11 11:29:56,194 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171245017', 'CheckoutRequestID': 'ws_CO_11092024142946636726845964', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}}
2024-09-11 11:29:56,418 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:29:56,935 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:29:56,937 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:29:57,466 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:29:58,938 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:29:59,053 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:29:59,053 - INFO - {'updated': 'initiated stk query for ws_CO_11092024142946636726845964 899885 '}
2024-09-11 11:29:59,111 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:29:59,705 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:29:59,707 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer MJRx7d8N8TyXhEsbUP0HCHnacJi6'}"}
2024-09-11 11:29:59,708 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTEyOTU5', 'Timestamp': '20240911112959', 'CheckoutRequestID': 'ws_CO_11092024142946636726845964'}"}
2024-09-11 11:29:59,709 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:30:00,406 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 381
2024-09-11 11:30:00,407 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171245017', 'CheckoutRequestID': 'ws_CO_11092024142946636726845964', 'ResultCode': '2001', 'ResultDesc': 'The initiator information is invalid.'} for ws_CO_11092024142946636726845964 899885"}
2024-09-11 11:30:00,527 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:30:00,737 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:30:00,739 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:30:00,994 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:36:35,573 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077165044', 'CheckoutRequestID': 'ws_CO_11092024143626016713287096', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB882GHVO'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911143634}, {'Name': 'PhoneNumber', 'Value': 254713287096}]}}}}"}
2024-09-11 11:36:35,573 - INFO - {'updated_data': 'callback data began'}
2024-09-11 11:36:35,573 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077165044', 'CheckoutRequestID': 'ws_CO_11092024143626016713287096', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB882GHVO'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911143634}, {'Name': 'PhoneNumber', 'Value': 254713287096}]}}}}}
2024-09-11 11:36:35,748 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:36:35,936 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:36:35,937 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:36:36,158 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:44:21,782 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:44:21,955 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:44:21,955 - INFO - {'updated': 'initiated stk query for ws_CO_11092024144400785799733295 827142 '}
2024-09-11 11:44:22,034 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:44:22,612 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:44:22,614 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 0j485RudS5iivJPH8kwDJYNibRIr'}"}
2024-09-11 11:44:22,615 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTE0NDIy', 'Timestamp': '20240911114422', 'CheckoutRequestID': 'ws_CO_11092024144400785799733295'}"}
2024-09-11 11:44:22,616 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:44:23,261 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 11:44:23,262 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171260514', 'CheckoutRequestID': 'ws_CO_11092024144400785799733295', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024144400785799733295 827142"}
2024-09-11 11:44:23,394 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:44:23,969 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:44:23,970 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:44:24,530 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:47:16,376 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077176507', 'CheckoutRequestID': 'ws_CO_11092024144708271726845964', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}"}
2024-09-11 11:47:16,376 - INFO - {'updated_data': 'callback data began'}
2024-09-11 11:47:16,377 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077176507', 'CheckoutRequestID': 'ws_CO_11092024144708271726845964', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}}
2024-09-11 11:47:16,548 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:47:17,061 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:47:17,063 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:47:17,302 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:47:30,892 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:47:31,068 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:47:31,068 - INFO - there is a test coming
2024-09-11 11:47:31,069 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 11:47:31,113 - INFO - {'updated_data': 'the data is now as 254795366198'}
2024-09-11 11:47:31,113 - INFO - the data is now as 254795366198
2024-09-11 11:47:31,140 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 11:47:31,140 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 11:47:31,142 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:47:31,744 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:47:31,746 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer VKz8t2u2wpwqstteGVfvTDKO5xIp'}"}
2024-09-11 11:47:31,747 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTE0NzMx', 'Timestamp': '20240911114731', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254795366198', 'PartyB': 827142, 'PhoneNumber': '254795366198', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-25831', 'TransactionDesc': 'Some payment'}
2024-09-11 11:47:31,748 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:47:32,692 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 11:47:32,698 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077176904', 'CheckoutRequestID': 'ws_CO_11092024144732330795366198', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 11:53:27,912 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:53:28,049 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:53:28,050 - INFO - there is a test coming
2024-09-11 11:53:28,050 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 11:53:28,090 - INFO - {'updated_data': 'the data is now as 254723859256'}
2024-09-11 11:53:28,091 - INFO - the data is now as 254723859256
2024-09-11 11:53:28,113 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 11:53:28,113 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 11:53:28,114 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:53:28,764 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:53:28,766 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer GANJQWElZJ88CyrHgddi7lhGLxAB'}"}
2024-09-11 11:53:28,766 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTE1MzI4', 'Timestamp': '20240911115328', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '99000', 'PartyA': '254723859256', 'PartyB': 899885, 'PhoneNumber': '254723859256', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0626534-1726055602829', 'TransactionDesc': 'Some payment'}
2024-09-11 11:53:28,767 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:53:29,938 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 11:53:29,943 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519809733', 'CheckoutRequestID': 'ws_CO_11092024145329298723859256', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 11:53:34,834 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519809163', 'CheckoutRequestID': 'ws_CO_11092024145317518793635905', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB184P2LB'}, {'Name': 'TransactionDate', 'Value': 20240911145334}, {'Name': 'PhoneNumber', 'Value': 254793635905}]}}}}"}
2024-09-11 11:53:34,834 - INFO - {'updated_data': 'callback data began'}
2024-09-11 11:53:34,835 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519809163', 'CheckoutRequestID': 'ws_CO_11092024145317518793635905', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB184P2LB'}, {'Name': 'TransactionDate', 'Value': 20240911145334}, {'Name': 'PhoneNumber', 'Value': 254793635905}]}}}}}
2024-09-11 11:53:34,996 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:53:35,492 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:53:35,493 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:53:35,710 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:53:42,383 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519809733', 'CheckoutRequestID': 'ws_CO_11092024145329298723859256', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 99000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB484Q1R8'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911145342}, {'Name': 'PhoneNumber', 'Value': 254723859256}]}}}}"}
2024-09-11 11:53:42,383 - INFO - {'updated_data': 'callback data began'}
2024-09-11 11:53:42,383 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519809733', 'CheckoutRequestID': 'ws_CO_11092024145329298723859256', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 99000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB484Q1R8'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911145342}, {'Name': 'PhoneNumber', 'Value': 254723859256}]}}}}}
2024-09-11 11:53:42,557 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:53:42,747 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:53:42,749 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:53:43,041 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:53:48,816 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:53:48,958 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:53:48,959 - INFO - {'updated': 'initiated stk query for ws_CO_11092024145317518793635905 827142 '}
2024-09-11 11:53:49,013 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:53:49,603 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:53:49,604 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer VPruIxY5s3O4AwWSerhWwxRQgM2y'}"}
2024-09-11 11:53:49,605 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTE1MzQ5', 'Timestamp': '20240911115349', 'CheckoutRequestID': 'ws_CO_11092024145317518793635905'}"}
2024-09-11 11:53:49,607 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:53:50,330 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 11:53:50,331 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519809163', 'CheckoutRequestID': 'ws_CO_11092024145317518793635905', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024145317518793635905 827142"}
2024-09-11 11:53:50,445 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:53:50,956 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:53:50,957 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:53:51,171 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:54:38,039 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:54:38,186 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:54:38,187 - INFO - there is a test coming
2024-09-11 11:54:38,187 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 11:54:38,231 - INFO - {'updated_data': 'the data is now as 254725509065'}
2024-09-11 11:54:38,231 - INFO - the data is now as 254725509065
2024-09-11 11:54:38,254 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 11:54:38,254 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 11:54:38,255 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:54:38,841 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:54:38,842 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer OgLr669kkssI2J6CZtx2IeY9NGaL'}"}
2024-09-11 11:54:38,843 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTE1NDM4', 'Timestamp': '20240911115438', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2422', 'PartyA': '254725509065', 'PartyB': 827142, 'PhoneNumber': '254725509065', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-25510', 'TransactionDesc': 'Some payment'}
2024-09-11 11:54:38,844 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:54:39,648 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 11:54:39,658 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519813079', 'CheckoutRequestID': 'ws_CO_11092024145439356725509065', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 11:56:25,908 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794868472', 'CheckoutRequestID': 'ws_CO_11092024145612672713149535', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB78533JT'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911145625}, {'Name': 'PhoneNumber', 'Value': 254713149535}]}}}}"}
2024-09-11 11:56:25,908 - INFO - {'updated_data': 'callback data began'}
2024-09-11 11:56:25,908 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794868472', 'CheckoutRequestID': 'ws_CO_11092024145612672713149535', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB78533JT'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911145625}, {'Name': 'PhoneNumber', 'Value': 254713149535}]}}}}}
2024-09-11 11:56:26,059 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:56:26,255 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:56:26,256 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:56:26,475 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:57:14,594 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:57:14,739 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:57:14,740 - INFO - there is a test coming
2024-09-11 11:57:14,740 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 11:57:14,793 - INFO - {'updated_data': 'the data is now as 254729476502'}
2024-09-11 11:57:14,794 - INFO - the data is now as 254729476502
2024-09-11 11:57:14,811 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 11:57:14,811 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 11:57:14,812 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:57:15,382 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:57:15,384 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer s7JEAD6n4Q0qnQgulmPSnMq6EtVx'}"}
2024-09-11 11:57:15,384 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTE1NzE1', 'Timestamp': '20240911115715', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '400000', 'PartyA': '254729476502', 'PartyB': 827142, 'PhoneNumber': '254729476502', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-11413', 'TransactionDesc': 'Some payment'}
2024-09-11 11:57:15,385 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:57:16,627 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 11:57:16,633 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585055782869', 'CheckoutRequestID': 'ws_CO_11092024145715906729476502', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 11:57:28,376 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585055782869', 'CheckoutRequestID': 'ws_CO_11092024145715906729476502', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 11:57:28,376 - INFO - {'updated_data': 'callback data began'}
2024-09-11 11:57:28,376 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585055782869', 'CheckoutRequestID': 'ws_CO_11092024145715906729476502', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 11:57:28,570 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:57:29,087 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:57:29,088 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:57:29,324 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:58:01,335 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:58:01,556 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:58:01,557 - INFO - {'updated': 'initiated stk query for ws_CO_11092024145749896729476502 827142 '}
2024-09-11 11:58:01,634 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:58:02,216 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:58:02,220 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer mEhp3etwH0MEgCGFBeug4YZZmtAx'}"}
2024-09-11 11:58:02,221 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTE1ODAx', 'Timestamp': '20240911115801', 'CheckoutRequestID': 'ws_CO_11092024145749896729476502'}"}
2024-09-11 11:58:02,222 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:58:02,857 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 11:58:02,857 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024145749896729476502', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024145749896729476502 827142"}
2024-09-11 11:58:02,859 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 11:58:06,283 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519822109', 'CheckoutRequestID': 'ws_CO_11092024145749896729476502', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}"}
2024-09-11 11:58:06,283 - INFO - {'updated_data': 'callback data began'}
2024-09-11 11:58:06,283 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519822109', 'CheckoutRequestID': 'ws_CO_11092024145749896729476502', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}}
2024-09-11 11:58:06,447 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:58:06,952 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:58:06,953 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:58:07,187 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:58:11,257 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:58:11,385 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:58:11,386 - INFO - {'updated': 'initiated stk query for ws_CO_11092024145749896729476502 827142 '}
2024-09-11 11:58:11,442 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:58:11,995 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:58:11,998 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer tPtQS3C556D1wp5iUGf0MWmycaWP'}"}
2024-09-11 11:58:11,998 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTE1ODEx', 'Timestamp': '20240911115811', 'CheckoutRequestID': 'ws_CO_11092024145749896729476502'}"}
2024-09-11 11:58:11,999 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:58:12,626 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 388
2024-09-11 11:58:12,627 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519822109', 'CheckoutRequestID': 'ws_CO_11092024145749896729476502', 'ResultCode': '1', 'ResultDesc': 'The balance is insufficient for the transaction.'} for ws_CO_11092024145749896729476502 827142"}
2024-09-11 11:58:12,764 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:58:12,962 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:58:12,963 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:58:13,173 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:59:37,370 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077189651', 'CheckoutRequestID': 'ws_CO_11092024145926962708172943', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}"}
2024-09-11 11:59:37,370 - INFO - {'updated_data': 'callback data began'}
2024-09-11 11:59:37,370 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077189651', 'CheckoutRequestID': 'ws_CO_11092024145926962708172943', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}}
2024-09-11 11:59:37,526 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:59:37,725 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:59:37,726 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:59:37,949 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:59:40,061 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:59:40,212 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:59:40,213 - INFO - {'updated': 'initiated stk query for ws_CO_11092024145926962708172943 899885 '}
2024-09-11 11:59:40,277 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:59:40,832 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:59:40,834 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 6xvgv5ThqR6pO0PAI5eBraBYTurO'}"}
2024-09-11 11:59:40,834 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTE1OTQw', 'Timestamp': '20240911115940', 'CheckoutRequestID': 'ws_CO_11092024145926962708172943'}"}
2024-09-11 11:59:40,835 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:59:41,473 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 388
2024-09-11 11:59:41,474 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077189651', 'CheckoutRequestID': 'ws_CO_11092024145926962708172943', 'ResultCode': '1', 'ResultDesc': 'The balance is insufficient for the transaction.'} for ws_CO_11092024145926962708172943 899885"}
2024-09-11 11:59:41,621 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:59:41,830 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:59:41,834 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:59:42,074 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:59:44,916 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:59:45,093 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:59:45,094 - INFO - there is a test coming
2024-09-11 11:59:45,094 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 11:59:45,141 - INFO - {'updated_data': 'the data is now as 254725834139'}
2024-09-11 11:59:45,141 - INFO - the data is now as 254725834139
2024-09-11 11:59:45,157 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 11:59:45,157 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 11:59:45,158 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:59:45,738 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:59:45,739 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer uykhQdPXZItk07UN8SnIkvDv93rk'}"}
2024-09-11 11:59:45,740 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTE1OTQ1', 'Timestamp': '20240911115945', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254725834139', 'PartyB': 827142, 'PhoneNumber': '254725834139', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '121-61633', 'TransactionDesc': 'Some payment'}
2024-09-11 11:59:45,741 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:59:46,735 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 11:59:46,741 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9383559', 'CheckoutRequestID': 'ws_CO_11092024145946396725834139', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 12:00:54,147 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89184675', 'CheckoutRequestID': 'ws_CO_11092024150040941729476502', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB885NX7W'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911150052}, {'Name': 'PhoneNumber', 'Value': 254729476502}]}}}}"}
2024-09-11 12:00:54,148 - INFO - {'updated_data': 'callback data began'}
2024-09-11 12:00:54,148 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89184675', 'CheckoutRequestID': 'ws_CO_11092024150040941729476502', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB885NX7W'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911150052}, {'Name': 'PhoneNumber', 'Value': 254729476502}]}}}}}
2024-09-11 12:00:54,329 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:00:54,527 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:00:54,529 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:00:55,055 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:07:57,686 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077199604', 'CheckoutRequestID': 'ws_CO_11092024150752808708172943', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 12:07:57,686 - INFO - {'updated_data': 'callback data began'}
2024-09-11 12:07:57,686 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077199604', 'CheckoutRequestID': 'ws_CO_11092024150752808708172943', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 12:07:57,883 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:07:58,474 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:07:58,475 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:07:58,682 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:08:55,219 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:08:55,437 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:08:55,438 - INFO - there is a test coming
2024-09-11 12:08:55,438 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 12:08:55,480 - INFO - {'updated_data': 'the data is now as 254706508953'}
2024-09-11 12:08:55,480 - INFO - the data is now as 254706508953
2024-09-11 12:08:55,496 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 12:08:55,496 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 12:08:55,498 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:08:56,085 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:08:56,087 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 49rsKvznpGFt3JHIPPjjAc3OoZbT'}"}
2024-09-11 12:08:56,087 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTIwODU2', 'Timestamp': '20240911120856', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '200', 'PartyA': '254706508953', 'PartyB': 899885, 'PhoneNumber': '254706508953', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA008664CP-1726056533531', 'TransactionDesc': 'Some payment'}
2024-09-11 12:08:56,088 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:08:56,899 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 12:08:56,914 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9408346', 'CheckoutRequestID': 'ws_CO_11092024150856634706508953', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 12:09:27,674 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:09:27,858 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:09:27,859 - INFO - there is a test coming
2024-09-11 12:09:27,859 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 12:09:27,897 - INFO - {'updated_data': 'the data is now as 254707904172'}
2024-09-11 12:09:27,898 - INFO - the data is now as 254707904172
2024-09-11 12:09:27,912 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 12:09:27,912 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 12:09:27,913 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:09:28,498 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:09:28,499 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 8GfOrFiAsm5cRksezSHvkZbsFfll'}"}
2024-09-11 12:09:28,500 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTIwOTI4', 'Timestamp': '20240911120928', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2600', 'PartyA': '254707904172', 'PartyB': 827142, 'PhoneNumber': '254707904172', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-48043', 'TransactionDesc': 'Some payment'}
2024-09-11 12:09:28,501 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:09:29,275 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 12:09:29,281 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171288590', 'CheckoutRequestID': 'ws_CO_11092024150929030707904172', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 12:09:37,293 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:09:37,456 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:09:37,457 - INFO - there is a test coming
2024-09-11 12:09:37,457 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 12:09:37,504 - INFO - {'updated_data': 'the data is now as 254725772470'}
2024-09-11 12:09:37,504 - INFO - the data is now as 254725772470
2024-09-11 12:09:37,522 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 12:09:37,522 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 12:09:37,523 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:09:38,187 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:09:38,192 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Au0OTw7cUGG5vbbHjPpWvuifcMPm'}"}
2024-09-11 12:09:38,192 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTIwOTM4', 'Timestamp': '20240911120938', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254725772470', 'PartyB': 827142, 'PhoneNumber': '254725772470', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-144432', 'TransactionDesc': 'Some payment'}
2024-09-11 12:09:38,194 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:09:38,947 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 12:09:38,956 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077201439', 'CheckoutRequestID': 'ws_CO_11092024150938707725772470', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 12:10:01,385 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077201439', 'CheckoutRequestID': 'ws_CO_11092024150938707725772470', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB086U344'}, {'Name': 'TransactionDate', 'Value': 20240911150958}, {'Name': 'PhoneNumber', 'Value': 254725772470}]}}}}"}
2024-09-11 12:10:01,385 - INFO - {'updated_data': 'callback data began'}
2024-09-11 12:10:01,385 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077201439', 'CheckoutRequestID': 'ws_CO_11092024150938707725772470', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB086U344'}, {'Name': 'TransactionDate', 'Value': 20240911150958}, {'Name': 'PhoneNumber', 'Value': 254725772470}]}}}}}
2024-09-11 12:10:01,777 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:10:02,213 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:10:02,215 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:10:02,444 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:10:09,930 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519855706', 'CheckoutRequestID': 'ws_CO_11092024150958370706508953', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}"}
2024-09-11 12:10:09,932 - INFO - {'updated_data': 'callback data began'}
2024-09-11 12:10:09,932 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519855706', 'CheckoutRequestID': 'ws_CO_11092024150958370706508953', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}}
2024-09-11 12:10:10,085 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:10:10,297 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:10:10,298 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:10:10,446 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:10:10,471 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 12:10:10,471 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 12:10:10,515 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:16:38,778 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:16:38,965 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:16:38,966 - INFO - {'updated': 'initiated stk query for ws_CO_11092024151626950720580534 827142 '}
2024-09-11 12:16:39,034 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:16:39,623 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:16:39,625 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer dHeIOrPStBCAPvsjzqSszabHAlrv'}"}
2024-09-11 12:16:39,626 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTIxNjM5', 'Timestamp': '20240911121639', 'CheckoutRequestID': 'ws_CO_11092024151626950720580534'}"}
2024-09-11 12:16:39,627 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:16:40,260 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 12:16:40,261 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024151626950720580534', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024151626950720580534 827142"}
2024-09-11 12:16:40,264 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 12:16:49,097 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:16:49,253 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:16:49,254 - INFO - {'updated': 'initiated stk query for ws_CO_11092024151626950720580534 827142 '}
2024-09-11 12:16:49,313 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:16:50,087 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:16:50,089 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer zRdAoLT7nxnDREIaJWrAp8fkKmiJ'}"}
2024-09-11 12:16:50,090 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTIxNjQ5', 'Timestamp': '20240911121649', 'CheckoutRequestID': 'ws_CO_11092024151626950720580534'}"}
2024-09-11 12:16:50,091 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:16:50,737 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 12:16:50,738 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024151626950720580534', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024151626950720580534 827142"}
2024-09-11 12:16:50,740 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 12:16:50,915 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519873085', 'CheckoutRequestID': 'ws_CO_11092024151626950720580534', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 8000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB787QOJ3'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911151650}, {'Name': 'PhoneNumber', 'Value': 254720580534}]}}}}"}
2024-09-11 12:16:50,915 - INFO - {'updated_data': 'callback data began'}
2024-09-11 12:16:50,915 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519873085', 'CheckoutRequestID': 'ws_CO_11092024151626950720580534', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 8000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB787QOJ3'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911151650}, {'Name': 'PhoneNumber', 'Value': 254720580534}]}}}}}
2024-09-11 12:16:51,071 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:16:51,267 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:16:51,269 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:16:51,511 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:16:58,571 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:16:58,699 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:16:58,700 - INFO - {'updated': 'initiated stk query for ws_CO_11092024151626950720580534 827142 '}
2024-09-11 12:16:58,761 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:16:59,466 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:16:59,468 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer s86AuguGQ96DRb8n0z68f8i1b6wA'}"}
2024-09-11 12:16:59,468 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTIxNjU4', 'Timestamp': '20240911121658', 'CheckoutRequestID': 'ws_CO_11092024151626950720580534'}"}
2024-09-11 12:16:59,469 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:17:00,115 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 12:17:00,115 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519873085', 'CheckoutRequestID': 'ws_CO_11092024151626950720580534', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024151626950720580534 827142"}
2024-09-11 12:17:00,293 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:17:00,486 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:17:00,487 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:17:01,029 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:19:40,139 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:19:40,284 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:19:40,284 - INFO - there is a test coming
2024-09-11 12:19:40,285 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 12:19:40,335 - INFO - {'updated_data': 'the data is now as 254711763074'}
2024-09-11 12:19:40,335 - INFO - the data is now as 254711763074
2024-09-11 12:19:40,352 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 12:19:40,352 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 12:19:40,353 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:19:41,029 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:19:41,031 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 8SgPRlt6oArQnevGcthltOasboGU'}"}
2024-09-11 12:19:41,031 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTIxOTQx', 'Timestamp': '20240911121941', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '20000', 'PartyA': '254711763074', 'PartyB': 899885, 'PhoneNumber': '254711763074', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054428', 'TransactionDesc': 'Some payment'}
2024-09-11 12:19:41,033 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:19:42,356 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 12:19:42,362 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599795521', 'CheckoutRequestID': 'ws_CO_11092024151941654711763074', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 12:19:53,378 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:19:53,529 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:19:53,530 - INFO - {'updated': 'initiated stk query for ws_CO_11092024151941654711763074 899885 '}
2024-09-11 12:19:53,594 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:19:54,273 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:19:54,275 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer YpUJlB2SJRSmWVgetzB5SmKPw6Df'}"}
2024-09-11 12:19:54,276 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTIxOTUz', 'Timestamp': '20240911121953', 'CheckoutRequestID': 'ws_CO_11092024151941654711763074'}"}
2024-09-11 12:19:54,281 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:19:54,915 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 12:19:54,916 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024151941654711763074', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024151941654711763074 899885"}
2024-09-11 12:19:54,918 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 12:20:32,560 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:20:32,766 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:20:32,766 - INFO - {'updated': 'initiated stk query for ws_CO_11092024152019022720580534 827142 '}
2024-09-11 12:20:32,821 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:20:33,617 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:20:33,620 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 2hkUZc2Hkga47RbOqM7Ahyxxdaz2'}"}
2024-09-11 12:20:33,621 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTIyMDMy', 'Timestamp': '20240911122032', 'CheckoutRequestID': 'ws_CO_11092024152019022720580534'}"}
2024-09-11 12:20:33,622 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:20:34,332 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 12:20:34,333 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172026752', 'CheckoutRequestID': 'ws_CO_11092024152019022720580534', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024152019022720580534 827142"}
2024-09-11 12:20:34,471 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:20:34,665 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:20:34,667 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:20:34,878 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:21:54,042 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519887451', 'CheckoutRequestID': 'ws_CO_11092024152145844710100699', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 50000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB588EZ0P'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911152153}, {'Name': 'PhoneNumber', 'Value': 254710100699}]}}}}"}
2024-09-11 12:21:54,047 - INFO - {'updated_data': 'callback data began'}
2024-09-11 12:21:54,048 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519887451', 'CheckoutRequestID': 'ws_CO_11092024152145844710100699', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 50000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB588EZ0P'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911152153}, {'Name': 'PhoneNumber', 'Value': 254710100699}]}}}}}
2024-09-11 12:21:54,225 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:21:54,660 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:21:54,662 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:21:54,886 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:21:57,091 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:21:57,267 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:21:57,268 - INFO - {'updated': 'initiated stk query for ws_CO_11092024152145844710100699 899885 '}
2024-09-11 12:21:57,332 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:21:57,933 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:21:57,935 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 6oSxfiziJ2GBiAl4ty5Eq2LAufTI'}"}
2024-09-11 12:21:57,935 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTIyMTU3', 'Timestamp': '20240911122157', 'CheckoutRequestID': 'ws_CO_11092024152145844710100699'}"}
2024-09-11 12:21:57,936 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:21:58,556 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 12:21:58,556 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519887451', 'CheckoutRequestID': 'ws_CO_11092024152145844710100699', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024152145844710100699 899885"}
2024-09-11 12:21:58,698 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:21:58,889 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:21:58,890 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:21:59,423 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:22:18,825 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:22:19,102 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:22:19,103 - INFO - there is a test coming
2024-09-11 12:22:19,103 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 12:22:19,150 - INFO - {'updated_data': 'the data is now as 254729730720'}
2024-09-11 12:22:19,150 - INFO - the data is now as 254729730720
2024-09-11 12:22:19,168 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 12:22:19,168 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 12:22:19,169 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:22:19,731 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:22:19,733 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer eYuf5Of3lo4NzJbTpwFL8jhPmA53'}"}
2024-09-11 12:22:19,734 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTIyMjE5', 'Timestamp': '20240911122219', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3300', 'PartyA': '254729730720', 'PartyB': 827142, 'PhoneNumber': '254729730720', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-66039', 'TransactionDesc': 'Some payment'}
2024-09-11 12:22:19,735 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:22:20,561 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 12:22:20,573 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077215474', 'CheckoutRequestID': 'ws_CO_11092024152220339729730720', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 12:24:11,540 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:24:11,716 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:24:11,716 - INFO - there is a test coming
2024-09-11 12:24:11,717 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 12:24:19,242 - INFO - {'updated_data': 'the data is now as 254722948355'}
2024-09-11 12:24:19,243 - INFO - the data is now as 254722948355
2024-09-11 12:24:19,272 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 12:24:19,272 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 12:24:19,273 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:24:19,867 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:24:19,869 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer PemKVLh5tmylr0wWG1qAOIU4BXEQ'}"}
2024-09-11 12:24:19,869 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTIyNDE5', 'Timestamp': '20240911122419', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '113', 'PartyA': '254722948355', 'PartyB': 827142, 'PhoneNumber': '254722948355', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '168-420', 'TransactionDesc': 'Some payment'}
2024-09-11 12:24:19,870 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:24:21,023 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 12:24:34,135 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182386308', 'CheckoutRequestID': 'ws_CO_11092024152420433722948355', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 12:25:00,771 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:25:00,785 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 12:25:00,785 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 12:29:57,985 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:29:58,154 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:29:58,155 - INFO - there is a test coming
2024-09-11 12:29:58,155 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 12:30:21,662 - INFO - {'updated_data': 'the data is now as 254722654030'}
2024-09-11 12:30:21,663 - INFO - the data is now as 254722654030
2024-09-11 12:30:21,684 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 12:30:21,684 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 12:30:21,685 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:30:22,306 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:30:22,308 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ZNQPeXkZSK4oOzcpWEaRGcPpTZHR'}"}
2024-09-11 12:30:22,308 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTIzMDIy', 'Timestamp': '20240911123022', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100000', 'PartyA': '254722654030', 'PartyB': 899885, 'PhoneNumber': '254722654030', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054451', 'TransactionDesc': 'Some payment'}
2024-09-11 12:30:22,310 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:30:23,139 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 12:30:23,146 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171311502', 'CheckoutRequestID': 'ws_CO_11092024153022934722654030', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 12:34:14,043 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:34:14,208 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:34:14,209 - INFO - there is a test coming
2024-09-11 12:34:14,209 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 12:35:39,949 - INFO - {'updated_data': 'the data is now as 254711519466'}
2024-09-11 12:35:39,957 - INFO - the data is now as 254711519466
2024-09-11 12:35:39,995 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 12:35:39,997 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 12:35:40,005 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:35:40,598 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:35:40,601 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer jH4EjwnGxGikGfVgHd2tIyCZncdu'}"}
2024-09-11 12:35:40,602 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTIzNTQw', 'Timestamp': '20240911123540', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '20000', 'PartyA': '254711519466', 'PartyB': 827142, 'PhoneNumber': '254711519466', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-61555', 'TransactionDesc': 'Some payment'}
2024-09-11 12:35:40,603 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:35:41,380 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 12:35:41,387 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171554558', 'CheckoutRequestID': 'ws_CO_11092024153541145711519466', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 12:35:52,443 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:35:52,599 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:35:52,600 - INFO - {'updated': 'initiated stk query for ws_CO_11092024153541146706979718 899885 '}
2024-09-11 12:35:52,669 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:35:53,243 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:35:53,245 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ijXHwVnjsnzJGJNXB5fXTIxFGHVt'}"}
2024-09-11 12:35:53,245 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTIzNTUy', 'Timestamp': '20240911123552', 'CheckoutRequestID': 'ws_CO_11092024153541146706979718'}"}
2024-09-11 12:35:53,246 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:35:53,898 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 12:35:53,899 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172043368', 'CheckoutRequestID': 'ws_CO_11092024153541146706979718', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024153541146706979718 899885"}
2024-09-11 12:35:54,045 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:35:54,281 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:35:54,282 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:35:54,379 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:35:54,552 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:35:54,554 - INFO - {'updated': 'initiated stk query for ws_CO_11092024153541256700042204 899885 '}
2024-09-11 12:35:54,613 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:35:54,808 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:35:55,273 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:35:55,275 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Ac6RiR18Cumsl6ptkDkyJYP0BOrZ'}"}
2024-09-11 12:35:55,276 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTIzNTU0', 'Timestamp': '20240911123554', 'CheckoutRequestID': 'ws_CO_11092024153541256700042204'}"}
2024-09-11 12:35:55,277 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:35:55,891 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 12:35:55,892 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024153541256700042204', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024153541256700042204 899885"}
2024-09-11 12:35:55,894 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 12:36:00,515 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182415692', 'CheckoutRequestID': 'ws_CO_11092024153541256700042204', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 26500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB08AAWSW'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911153559}, {'Name': 'PhoneNumber', 'Value': 254700042204}]}}}}"}
2024-09-11 12:36:00,516 - INFO - {'updated_data': 'callback data began'}
2024-09-11 12:36:00,516 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182415692', 'CheckoutRequestID': 'ws_CO_11092024153541256700042204', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 26500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB08AAWSW'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911153559}, {'Name': 'PhoneNumber', 'Value': 254700042204}]}}}}}
2024-09-11 12:36:00,721 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:36:01,214 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:36:01,215 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:36:01,437 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:36:03,689 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:36:03,834 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:36:03,835 - INFO - {'updated': 'initiated stk query for ws_CO_11092024153541256700042204 899885 '}
2024-09-11 12:36:03,902 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:36:04,465 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:36:04,468 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer fKS5ghtMEJrtI5IponAusnOBBa4T'}"}
2024-09-11 12:36:04,468 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTIzNjAz', 'Timestamp': '20240911123603', 'CheckoutRequestID': 'ws_CO_11092024153541256700042204'}"}
2024-09-11 12:36:04,471 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:36:05,056 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 429 221
2024-09-11 12:36:05,057 - INFO - {'updated': "Received response {'fault': {'faultstring': 'Spike arrest violation. Allowed rate : MessageRate{messagesPerPeriod=25, periodInMicroseconds=1000000, maxBurstMessageCount=2.5}', 'detail': {'errorcode': 'policies.ratelimit.SpikeArrestViolation'}}} for ws_CO_11092024153541256700042204 899885"}
2024-09-11 12:36:05,060 - WARNING - Too Many Requests: /api/v1/stk/query/
2024-09-11 12:36:48,372 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9481882', 'CheckoutRequestID': 'ws_CO_11092024153634607723363164', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB48AEPCK'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911153647}, {'Name': 'PhoneNumber', 'Value': 254723363164}]}}}}"}
2024-09-11 12:36:48,372 - INFO - {'updated_data': 'callback data began'}
2024-09-11 12:36:48,372 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9481882', 'CheckoutRequestID': 'ws_CO_11092024153634607723363164', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB48AEPCK'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911153647}, {'Name': 'PhoneNumber', 'Value': 254723363164}]}}}}}
2024-09-11 12:36:48,550 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:36:49,054 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:36:49,055 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:36:49,273 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:45:59,423 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:45:59,578 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:45:59,579 - INFO - there is a test coming
2024-09-11 12:45:59,580 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 12:45:59,643 - INFO - {'updated_data': 'the data is now as 254729730720'}
2024-09-11 12:45:59,643 - INFO - the data is now as 254729730720
2024-09-11 12:45:59,675 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 12:45:59,675 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 12:45:59,676 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:46:00,281 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:46:00,283 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ku9Gjq6c6PIUHiXYpsCxq0GGJ4dY'}"}
2024-09-11 12:46:00,284 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTI0NjAw', 'Timestamp': '20240911124600', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '9900', 'PartyA': '254729730720', 'PartyB': 827142, 'PhoneNumber': '254729730720', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-66039', 'TransactionDesc': 'Some payment'}
2024-09-11 12:46:00,286 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:46:01,079 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 12:46:01,125 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519951401', 'CheckoutRequestID': 'ws_CO_11092024154600846729730720', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 12:46:11,354 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519951401', 'CheckoutRequestID': 'ws_CO_11092024154600846729730720', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 9900.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB98BNUGL'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911154610}, {'Name': 'PhoneNumber', 'Value': 254729730720}]}}}}"}
2024-09-11 12:46:11,354 - INFO - {'updated_data': 'callback data began'}
2024-09-11 12:46:11,354 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519951401', 'CheckoutRequestID': 'ws_CO_11092024154600846729730720', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 9900.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB98BNUGL'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911154610}, {'Name': 'PhoneNumber', 'Value': 254729730720}]}}}}}
2024-09-11 12:46:11,538 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:46:12,049 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:46:12,050 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:46:12,074 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:46:12,239 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:46:12,240 - INFO - {'updated': 'initiated stk query for ws_CO_11092024154600846729730720 827142 '}
2024-09-11 12:46:12,285 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:46:12,303 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:46:12,889 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:46:12,890 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer OoR8re04kYgQTY791v6RrAtFIEvf'}"}
2024-09-11 12:46:12,891 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTI0NjEy', 'Timestamp': '20240911124612', 'CheckoutRequestID': 'ws_CO_11092024154600846729730720'}"}
2024-09-11 12:46:12,892 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:46:13,535 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 12:46:13,535 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519951401', 'CheckoutRequestID': 'ws_CO_11092024154600846729730720', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024154600846729730720 827142"}
2024-09-11 12:46:13,661 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:46:13,866 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:46:13,868 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:46:14,081 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:50:11,318 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:50:11,523 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:50:11,524 - INFO - there is a test coming
2024-09-11 12:50:11,524 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 12:50:11,580 - INFO - {'updated_data': 'the data is now as 254791924177'}
2024-09-11 12:50:11,581 - INFO - the data is now as 254791924177
2024-09-11 12:50:11,598 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 12:50:11,598 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 12:50:11,599 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:50:12,170 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:50:12,172 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer IotL3QnHArkdvNe2jvNo4kzsCmWT'}"}
2024-09-11 12:50:12,173 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTI1MDEy', 'Timestamp': '20240911125012', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254791924177', 'PartyB': 827142, 'PhoneNumber': '254791924177', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-53284', 'TransactionDesc': 'Some payment'}
2024-09-11 12:50:12,174 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:50:13,304 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 12:50:13,310 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19959848', 'CheckoutRequestID': 'ws_CO_11092024155012807791924177', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 12:56:17,149 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:56:17,373 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:56:17,374 - INFO - {'updated': 'initiated stk query for ws_CO_11092024155605928706508953 899885 '}
2024-09-11 12:56:17,434 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:56:18,005 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:56:18,007 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer eVf0CfeEhP3v33pCtEsMxGzWNgha'}"}
2024-09-11 12:56:18,007 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTI1NjE3', 'Timestamp': '20240911125617', 'CheckoutRequestID': 'ws_CO_11092024155605928706508953'}"}
2024-09-11 12:56:18,011 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:56:18,650 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 12:56:18,651 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024155605928706508953', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024155605928706508953 899885"}
2024-09-11 12:56:18,653 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 12:57:06,874 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89246148', 'CheckoutRequestID': 'ws_CO_11092024155655701720051548', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 30000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB78D4PTD'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911155706}, {'Name': 'PhoneNumber', 'Value': 254720051548}]}}}}"}
2024-09-11 12:57:06,874 - INFO - {'updated_data': 'callback data began'}
2024-09-11 12:57:06,874 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89246148', 'CheckoutRequestID': 'ws_CO_11092024155655701720051548', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 30000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB78D4PTD'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911155706}, {'Name': 'PhoneNumber', 'Value': 254720051548}]}}}}}
2024-09-11 12:57:07,039 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:57:07,536 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:57:07,537 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:57:07,775 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:57:08,296 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89246235', 'CheckoutRequestID': 'ws_CO_11092024155700731726844704', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 12:57:08,296 - INFO - {'updated_data': 'callback data began'}
2024-09-11 12:57:08,296 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89246235', 'CheckoutRequestID': 'ws_CO_11092024155700731726844704', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 12:57:08,477 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:57:09,002 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:57:09,004 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:57:09,222 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:57:22,119 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:57:22,135 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-11 12:57:22,136 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 12:57:37,419 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:57:37,689 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:57:37,690 - INFO - there is a test coming
2024-09-11 12:57:37,690 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 12:57:37,747 - INFO - {'updated_data': 'the data is now as 254721769199'}
2024-09-11 12:57:37,747 - INFO - the data is now as 254721769199
2024-09-11 12:57:37,764 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 12:57:37,764 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 12:57:37,766 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:57:38,335 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:57:38,337 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer o9CxCW5GW52jQ0FHJhmz01fuJWiq'}"}
2024-09-11 12:57:38,337 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTI1NzM4', 'Timestamp': '20240911125738', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '80000', 'PartyA': '254721769199', 'PartyB': 827142, 'PhoneNumber': '254721769199', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-20566', 'TransactionDesc': 'Some payment'}
2024-09-11 12:57:38,338 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:57:39,074 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 12:57:39,081 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599895664', 'CheckoutRequestID': 'ws_CO_11092024155738859721769199', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 12:57:40,831 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599895664', 'CheckoutRequestID': 'ws_CO_11092024155738859721769199', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 12:57:40,831 - INFO - {'updated_data': 'callback data began'}
2024-09-11 12:57:40,831 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599895664', 'CheckoutRequestID': 'ws_CO_11092024155738859721769199', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 12:57:40,991 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:57:41,197 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:57:41,199 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:57:41,738 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:57:59,745 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:57:59,913 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:57:59,914 - INFO - {'updated': 'initiated stk query for ws_CO_11092024155738859721769199 827142 '}
2024-09-11 12:57:59,975 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:58:00,649 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:58:00,651 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer dJfRcCWWsA8H1G59pMVpEV8K7bAk'}"}
2024-09-11 12:58:00,652 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTI1NzU5', 'Timestamp': '20240911125759', 'CheckoutRequestID': 'ws_CO_11092024155738859721769199'}"}
2024-09-11 12:58:00,653 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:58:01,343 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 367
2024-09-11 12:58:01,344 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599895664', 'CheckoutRequestID': 'ws_CO_11092024155738859721769199', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_11092024155738859721769199 827142"}
2024-09-11 12:58:01,489 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:58:01,682 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:58:01,684 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:58:01,913 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:58:02,155 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:58:02,294 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:58:02,295 - INFO - {'updated': 'initiated stk query for ws_CO_11092024155700731726844704 827142 '}
2024-09-11 12:58:02,369 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:58:02,928 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:58:02,930 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer a4atbWmwQTaSF93UTQwxpN1BIxHB'}"}
2024-09-11 12:58:02,930 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTI1ODAy', 'Timestamp': '20240911125802', 'CheckoutRequestID': 'ws_CO_11092024155700731726844704'}"}
2024-09-11 12:58:02,931 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:58:03,577 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-11 12:58:03,578 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89246235', 'CheckoutRequestID': 'ws_CO_11092024155700731726844704', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_11092024155700731726844704 827142"}
2024-09-11 12:58:03,720 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:58:04,230 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:58:04,232 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:58:04,437 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:58:09,471 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:58:09,632 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:58:09,633 - INFO - there is a test coming
2024-09-11 12:58:09,635 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 12:58:09,690 - INFO - {'updated_data': 'the data is now as 254721769199'}
2024-09-11 12:58:09,690 - INFO - the data is now as 254721769199
2024-09-11 12:58:09,707 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 12:58:09,707 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 12:58:09,708 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:58:10,376 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:58:10,379 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer YrEmtvA4qYImuQeAA5bI4GYvSsya'}"}
2024-09-11 12:58:10,379 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTI1ODEw', 'Timestamp': '20240911125810', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '80000', 'PartyA': '254721769199', 'PartyB': 827142, 'PhoneNumber': '254721769199', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-20566', 'TransactionDesc': 'Some payment'}
2024-09-11 12:58:10,381 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:58:11,260 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 12:58:11,266 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585055945818', 'CheckoutRequestID': 'ws_CO_11092024155811005721769199', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 12:58:59,894 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:59:00,040 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:59:00,041 - INFO - there is a test coming
2024-09-11 12:59:00,041 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 12:59:00,098 - INFO - {'updated_data': 'the data is now as 254726141009'}
2024-09-11 12:59:00,099 - INFO - the data is now as 254726141009
2024-09-11 12:59:00,117 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 12:59:00,117 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 12:59:00,118 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:59:00,710 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:59:00,713 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer cxGRnV9nGcLGbXqEFEKCBquQAJnH'}"}
2024-09-11 12:59:00,713 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTI1OTAw', 'Timestamp': '20240911125900', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3500', 'PartyA': '254726141009', 'PartyB': 827142, 'PhoneNumber': '254726141009', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-9907', 'TransactionDesc': 'Some payment'}
2024-09-11 12:59:00,714 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:59:01,585 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 12:59:01,591 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585055947972', 'CheckoutRequestID': 'ws_CO_11092024155901334726141009', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 12:59:12,639 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:59:12,866 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:59:12,867 - INFO - {'updated': 'initiated stk query for ws_CO_11092024155901334726141009 827142 '}
2024-09-11 12:59:12,929 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:59:13,545 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:59:13,548 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer OWOZNLQadI3Slbhuxv7pcVqDiWZr'}"}
2024-09-11 12:59:13,548 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTI1OTEy', 'Timestamp': '20240911125912', 'CheckoutRequestID': 'ws_CO_11092024155901334726141009'}"}
2024-09-11 12:59:13,550 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:59:14,202 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 12:59:14,203 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585055947972', 'CheckoutRequestID': 'ws_CO_11092024155901334726141009', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024155901334726141009 827142"}
2024-09-11 12:59:14,346 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:59:14,561 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:59:14,742 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:59:14,743 - INFO - {'updated': 'initiated stk query for ws_CO_11092024155903486721769199 827142 '}
2024-09-11 12:59:14,802 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:59:14,861 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:59:14,862 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:59:15,375 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:59:15,377 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer xiL3kAs6kKcpc3nec4rhbwWXHhZi'}"}
2024-09-11 12:59:15,377 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTI1OTE0', 'Timestamp': '20240911125914', 'CheckoutRequestID': 'ws_CO_11092024155903486721769199'}"}
2024-09-11 12:59:15,392 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:59:15,414 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:59:16,105 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 429 221
2024-09-11 12:59:16,105 - INFO - {'updated': "Received response {'fault': {'faultstring': 'Spike arrest violation. Allowed rate : MessageRate{messagesPerPeriod=25, periodInMicroseconds=1000000, maxBurstMessageCount=2.5}', 'detail': {'errorcode': 'policies.ratelimit.SpikeArrestViolation'}}} for ws_CO_11092024155903486721769199 827142"}
2024-09-11 12:59:16,108 - WARNING - Too Many Requests: /api/v1/stk/query/
2024-09-11 13:00:38,141 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:00:38,244 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:00:38,245 - INFO - {'updated': 'initiated stk query for ws_CO_11092024160025678706508953 899885 '}
2024-09-11 13:00:38,318 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:00:38,978 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:00:38,980 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 5oUoAu6x4KA9HzXATbDOVIYLB2Ub'}"}
2024-09-11 13:00:38,980 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTMwMDM4', 'Timestamp': '20240911130038', 'CheckoutRequestID': 'ws_CO_11092024160025678706508953'}"}
2024-09-11 13:00:38,981 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:00:39,600 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 13:00:39,601 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024160025678706508953', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024160025678706508953 899885"}
2024-09-11 13:00:39,603 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 13:00:52,086 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9546129', 'CheckoutRequestID': 'ws_CO_11092024160039455722863371', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1432.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB08DMWTQ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911160051}, {'Name': 'PhoneNumber', 'Value': 254722863371}]}}}}"}
2024-09-11 13:00:52,086 - INFO - {'updated_data': 'callback data began'}
2024-09-11 13:00:52,086 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9546129', 'CheckoutRequestID': 'ws_CO_11092024160039455722863371', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1432.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB08DMWTQ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911160051}, {'Name': 'PhoneNumber', 'Value': 254722863371}]}}}}}
2024-09-11 13:00:52,280 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:00:52,496 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:00:52,505 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:00:52,726 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:04:35,859 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:04:35,989 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:04:35,990 - INFO - there is a test coming
2024-09-11 13:04:35,990 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 13:04:36,050 - INFO - {'updated_data': 'the data is now as 254726141009'}
2024-09-11 13:04:36,050 - INFO - the data is now as 254726141009
2024-09-11 13:04:36,067 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 13:04:36,068 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 13:04:36,069 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:04:36,769 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:04:36,771 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer SY8MIZyhJm5z7GjBYE7AImCkD1AU'}"}
2024-09-11 13:04:36,771 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTMwNDM2', 'Timestamp': '20240911130436', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '4500', 'PartyA': '254726141009', 'PartyB': 827142, 'PhoneNumber': '254726141009', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-9895', 'TransactionDesc': 'Some payment'}
2024-09-11 13:04:36,772 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:04:37,569 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 13:04:37,575 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182492600', 'CheckoutRequestID': 'ws_CO_11092024160437309726141009', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 13:04:48,773 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:04:48,960 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:04:48,960 - INFO - {'updated': 'initiated stk query for ws_CO_11092024160437309726141009 827142 '}
2024-09-11 13:04:49,018 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:04:49,692 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:04:49,693 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 9YArfd1yw6jGzErGguUNjHmGBt2L'}"}
2024-09-11 13:04:49,694 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTMwNDQ5', 'Timestamp': '20240911130449', 'CheckoutRequestID': 'ws_CO_11092024160437309726141009'}"}
2024-09-11 13:04:49,695 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:04:50,338 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 13:04:50,339 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182492600', 'CheckoutRequestID': 'ws_CO_11092024160437309726141009', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024160437309726141009 827142"}
2024-09-11 13:04:50,455 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:04:50,970 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:04:50,972 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:04:51,201 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:06:43,096 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:06:43,230 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:06:43,231 - INFO - there is a test coming
2024-09-11 13:06:43,231 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 13:06:43,277 - INFO - {'updated_data': 'the data is now as 254722378805'}
2024-09-11 13:06:43,278 - INFO - the data is now as 254722378805
2024-09-11 13:06:43,295 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 13:06:43,296 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 13:06:43,297 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:06:43,889 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:06:43,891 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 59oNdGvAHW4KwXh467TvTInajcB4'}"}
2024-09-11 13:06:43,891 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTMwNjQz', 'Timestamp': '20240911130643', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '11000', 'PartyA': '254722378805', 'PartyB': 827142, 'PhoneNumber': '254722378805', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-29891', 'TransactionDesc': 'Some payment'}
2024-09-11 13:06:43,892 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:06:47,214 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 13:06:47,222 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077263472', 'CheckoutRequestID': 'ws_CO_11092024160644500722378805', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 13:07:22,542 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171588898', 'CheckoutRequestID': 'ws_CO_11092024160713963722113892', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 50000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB38EHY5F'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911160721}, {'Name': 'PhoneNumber', 'Value': 254722113892}]}}}}"}
2024-09-11 13:07:22,543 - INFO - {'updated_data': 'callback data began'}
2024-09-11 13:07:22,543 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171588898', 'CheckoutRequestID': 'ws_CO_11092024160713963722113892', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 50000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB38EHY5F'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911160721}, {'Name': 'PhoneNumber', 'Value': 254722113892}]}}}}}
2024-09-11 13:07:22,725 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:07:22,924 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:07:22,926 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:07:23,156 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:07:25,257 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:07:25,386 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:07:25,387 - INFO - {'updated': 'initiated stk query for ws_CO_11092024160713963722113892 899885 '}
2024-09-11 13:07:25,447 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:07:26,015 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:07:26,017 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer WFWBirSBe4XeseOhJjI42ABkjb6w'}"}
2024-09-11 13:07:26,017 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTMwNzI1', 'Timestamp': '20240911130725', 'CheckoutRequestID': 'ws_CO_11092024160713963722113892'}"}
2024-09-11 13:07:26,018 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:07:26,687 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 13:07:26,688 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171588898', 'CheckoutRequestID': 'ws_CO_11092024160713963722113892', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024160713963722113892 899885"}
2024-09-11 13:07:26,821 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:07:27,027 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:07:27,029 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:07:27,287 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:08:00,146 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:08:00,298 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:08:00,299 - INFO - there is a test coming
2024-09-11 13:08:00,299 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 13:08:00,348 - INFO - {'updated_data': 'the data is now as 254720057634'}
2024-09-11 13:08:00,350 - INFO - the data is now as 254720057634
2024-09-11 13:08:00,368 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 13:08:00,368 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 13:08:00,370 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:08:00,982 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:08:00,984 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer r1H3SoHn0S2GqW6Wtl0SIVI5yfrZ'}"}
2024-09-11 13:08:00,984 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTMwODAw', 'Timestamp': '20240911130800', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '4000', 'PartyA': '254720057634', 'PartyB': 827142, 'PhoneNumber': '254720057634', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-137160', 'TransactionDesc': 'Some payment'}
2024-09-11 13:08:00,985 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:08:05,292 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 13:08:05,298 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20006699', 'CheckoutRequestID': 'ws_CO_11092024160801852720057634', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 13:08:55,565 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89258754', 'CheckoutRequestID': 'ws_CO_11092024160835700720958942', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB18EPF8V'}, {'Name': 'TransactionDate', 'Value': 20240911160854}, {'Name': 'PhoneNumber', 'Value': 254720958942}]}}}}"}
2024-09-11 13:08:55,565 - INFO - {'updated_data': 'callback data began'}
2024-09-11 13:08:55,565 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89258754', 'CheckoutRequestID': 'ws_CO_11092024160835700720958942', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB18EPF8V'}, {'Name': 'TransactionDate', 'Value': 20240911160854}, {'Name': 'PhoneNumber', 'Value': 254720958942}]}}}}}
2024-09-11 13:08:55,734 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:08:55,938 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:08:55,941 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:08:56,227 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:10:56,364 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077267733', 'CheckoutRequestID': 'ws_CO_11092024161046608720369423', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 15000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB58EYX79'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911161054}, {'Name': 'PhoneNumber', 'Value': 254720369423}]}}}}"}
2024-09-11 13:10:56,364 - INFO - {'updated_data': 'callback data began'}
2024-09-11 13:10:56,364 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077267733', 'CheckoutRequestID': 'ws_CO_11092024161046608720369423', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 15000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB58EYX79'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911161054}, {'Name': 'PhoneNumber', 'Value': 254720369423}]}}}}}
2024-09-11 13:10:56,538 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:10:57,032 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:10:57,034 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:10:57,564 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:11:18,499 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182508700', 'CheckoutRequestID': 'ws_CO_11092024161044006720958942', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 13:11:18,499 - INFO - {'updated_data': 'callback data began'}
2024-09-11 13:11:18,499 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182508700', 'CheckoutRequestID': 'ws_CO_11092024161044006720958942', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 13:11:18,701 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:11:19,212 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:11:19,213 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:11:19,754 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:11:48,939 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:11:49,081 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:11:49,082 - INFO - {'updated': 'initiated stk query for ws_CO_11092024161047317707952215 899885 '}
2024-09-11 13:11:49,142 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:11:49,725 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:11:49,727 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ISmG3WdypGdSee7fAnmQ5ljbVpBT'}"}
2024-09-11 13:11:49,728 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTMxMTQ5', 'Timestamp': '20240911131149', 'CheckoutRequestID': 'ws_CO_11092024161047317707952215'}"}
2024-09-11 13:11:49,729 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:11:50,367 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 13:11:50,368 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599930234', 'CheckoutRequestID': 'ws_CO_11092024161047317707952215', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024161047317707952215 899885"}
2024-09-11 13:11:50,499 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:11:50,703 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:11:50,705 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:11:50,937 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:13:25,720 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794952998', 'CheckoutRequestID': 'ws_CO_11092024161316498722332886', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB78FBBWP'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911161325}, {'Name': 'PhoneNumber', 'Value': 254722332886}]}}}}"}
2024-09-11 13:13:25,720 - INFO - {'updated_data': 'callback data began'}
2024-09-11 13:13:25,720 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794952998', 'CheckoutRequestID': 'ws_CO_11092024161316498722332886', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB78FBBWP'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911161325}, {'Name': 'PhoneNumber', 'Value': 254722332886}]}}}}}
2024-09-11 13:13:25,902 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:13:26,178 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:13:26,179 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:13:26,400 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:13:28,003 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:13:28,172 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:13:28,173 - INFO - {'updated': 'initiated stk query for ws_CO_11092024161316498722332886 827142 '}
2024-09-11 13:13:28,229 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:13:28,810 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:13:28,812 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer X97w2qoH7xxBqjOWrkfMqjUNShzW'}"}
2024-09-11 13:13:28,812 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTMxMzI4', 'Timestamp': '20240911131328', 'CheckoutRequestID': 'ws_CO_11092024161316498722332886'}"}
2024-09-11 13:13:28,813 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:13:29,531 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 13:13:29,532 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208794952998', 'CheckoutRequestID': 'ws_CO_11092024161316498722332886', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024161316498722332886 827142"}
2024-09-11 13:13:29,663 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:13:29,858 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:13:29,860 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:13:30,057 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:17:18,198 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9589203', 'CheckoutRequestID': 'ws_CO_11092024161701335721477060', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5640.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB68FUAOO'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911161717}, {'Name': 'PhoneNumber', 'Value': 254721477060}]}}}}"}
2024-09-11 13:17:18,199 - INFO - {'updated_data': 'callback data began'}
2024-09-11 13:17:18,199 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9589203', 'CheckoutRequestID': 'ws_CO_11092024161701335721477060', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5640.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB68FUAOO'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911161717}, {'Name': 'PhoneNumber', 'Value': 254721477060}]}}}}}
2024-09-11 13:17:18,385 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:17:18,574 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:17:18,575 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:17:18,792 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:17:36,333 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:17:36,568 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:17:36,568 - INFO - {'updated': 'initiated stk query for ws_CO_11092024161701335721477060 827142 '}
2024-09-11 13:17:36,635 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:17:37,242 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:17:37,244 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer DF1vQi6C2RN871p186C2wrP4UEwj'}"}
2024-09-11 13:17:37,244 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTMxNzM2', 'Timestamp': '20240911131736', 'CheckoutRequestID': 'ws_CO_11092024161701335721477060'}"}
2024-09-11 13:17:37,245 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:17:37,913 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 13:17:37,914 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9589203', 'CheckoutRequestID': 'ws_CO_11092024161701335721477060', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024161701335721477060 827142"}
2024-09-11 13:17:38,044 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:17:38,235 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:17:38,237 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:17:38,475 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:17:46,647 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:17:46,819 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:17:46,819 - INFO - there is a test coming
2024-09-11 13:17:46,819 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 13:17:46,863 - INFO - {'updated_data': 'the data is now as 254723052054'}
2024-09-11 13:17:46,863 - INFO - the data is now as 254723052054
2024-09-11 13:17:46,881 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 13:17:46,882 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 13:17:46,883 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:17:47,543 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:17:47,545 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer QEjbStySkLC2REX1GyQ5PVfv1cFf'}"}
2024-09-11 13:17:47,545 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTMxNzQ3', 'Timestamp': '20240911131747', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '247204', 'PartyA': '254723052054', 'PartyB': 827142, 'PhoneNumber': '254723052054', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-39527', 'TransactionDesc': 'Some payment'}
2024-09-11 13:17:47,546 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:17:48,422 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 13:17:48,428 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171599744', 'CheckoutRequestID': 'ws_CO_11092024161748194723052054', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 13:20:59,378 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:20:59,554 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:20:59,555 - INFO - there is a test coming
2024-09-11 13:20:59,555 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 13:20:59,601 - INFO - {'updated_data': 'the data is now as 254713633177'}
2024-09-11 13:20:59,601 - INFO - the data is now as 254713633177
2024-09-11 13:20:59,618 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 13:20:59,619 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 13:20:59,620 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:21:00,209 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:21:00,212 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer CX2ocUSAK3SFJ5rCyNTlfbUFAAha'}"}
2024-09-11 13:21:00,212 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTMyMTAw', 'Timestamp': '20240911132100', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254713633177', 'PartyB': 899885, 'PhoneNumber': '254713633177', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054434', 'TransactionDesc': 'Some payment'}
2024-09-11 13:21:00,214 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:21:00,941 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 13:21:00,947 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171603456', 'CheckoutRequestID': 'ws_CO_11092024162100746713633177', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 13:22:44,145 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599961638', 'CheckoutRequestID': 'ws_CO_11092024162230584723052054', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 17000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB98GL7WP'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911162243}, {'Name': 'PhoneNumber', 'Value': 254723052054}]}}}}"}
2024-09-11 13:22:44,153 - INFO - {'updated_data': 'callback data began'}
2024-09-11 13:22:44,153 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599961638', 'CheckoutRequestID': 'ws_CO_11092024162230584723052054', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 17000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB98GL7WP'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911162243}, {'Name': 'PhoneNumber', 'Value': 254723052054}]}}}}}
2024-09-11 13:22:44,314 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:22:44,505 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:22:44,506 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:22:44,738 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:23:10,187 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:23:10,380 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:23:10,381 - INFO - there is a test coming
2024-09-11 13:23:10,381 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 13:23:10,424 - INFO - {'updated_data': 'the data is now as 254721477060'}
2024-09-11 13:23:10,424 - INFO - the data is now as 254721477060
2024-09-11 13:23:10,443 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 13:23:10,443 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 13:23:10,444 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:23:11,130 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:23:11,133 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 71Y9x8LV4zX6HXdJD1BGMnByncyr'}"}
2024-09-11 13:23:11,133 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTMyMzEx', 'Timestamp': '20240911132311', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5640', 'PartyA': '254721477060', 'PartyB': 827142, 'PhoneNumber': '254721477060', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-27909', 'TransactionDesc': 'Some payment'}
2024-09-11 13:23:11,135 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:23:11,920 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 13:23:11,926 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b520049938', 'CheckoutRequestID': 'ws_CO_11092024162311671721477060', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 13:25:10,533 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:25:10,658 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:25:10,659 - INFO - there is a test coming
2024-09-11 13:25:10,659 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 13:25:10,709 - INFO - {'updated_data': 'the data is now as 254721684537'}
2024-09-11 13:25:10,709 - INFO - the data is now as 254721684537
2024-09-11 13:25:10,725 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 13:25:10,725 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 13:25:10,726 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:25:11,382 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:25:11,384 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer AjMGOWW9bjEXIEDhp2MaEGNhA042'}"}
2024-09-11 13:25:11,384 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTMyNTEx', 'Timestamp': '20240911132511', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '8381', 'PartyA': '254721684537', 'PartyB': 827142, 'PhoneNumber': '254721684537', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-38338', 'TransactionDesc': 'Some payment'}
2024-09-11 13:25:11,385 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:25:12,249 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 13:25:12,269 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208794966059', 'CheckoutRequestID': 'ws_CO_11092024162512008721684537', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 13:26:45,804 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:26:45,975 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:26:45,976 - INFO - there is a test coming
2024-09-11 13:26:45,976 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 13:26:46,024 - INFO - {'updated_data': 'the data is now as 254708147272'}
2024-09-11 13:26:46,024 - INFO - the data is now as 254708147272
2024-09-11 13:26:46,051 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 13:26:46,051 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 13:26:46,053 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:26:46,676 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:26:46,678 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 0p3snrCOm6zZzFverEGozMOZtkNg'}"}
2024-09-11 13:26:46,678 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTMyNjQ2', 'Timestamp': '20240911132646', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254708147272', 'PartyB': 899885, 'PhoneNumber': '254708147272', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054457', 'TransactionDesc': 'Some payment'}
2024-09-11 13:26:46,680 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:26:47,619 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 13:26:47,625 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077285133', 'CheckoutRequestID': 'ws_CO_11092024162647239708147272', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 13:42:44,103 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9659023', 'CheckoutRequestID': 'ws_CO_11092024164241496725750305', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 13:42:44,103 - INFO - {'updated_data': 'callback data began'}
2024-09-11 13:42:44,103 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9659023', 'CheckoutRequestID': 'ws_CO_11092024164241496725750305', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 13:42:44,258 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:42:44,469 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:42:44,472 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:42:44,686 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:42:53,208 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:42:53,415 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:42:53,416 - INFO - {'updated': 'initiated stk query for ws_CO_11092024164241496725750305 827142 '}
2024-09-11 13:42:53,490 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:42:54,175 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:42:54,177 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer CWFiEuJdebNFAE4ytiMS35iZfGFd'}"}
2024-09-11 13:42:54,178 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTM0MjUz', 'Timestamp': '20240911134253', 'CheckoutRequestID': 'ws_CO_11092024164241496725750305'}"}
2024-09-11 13:42:54,179 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:42:55,021 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 367
2024-09-11 13:42:55,022 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9659023', 'CheckoutRequestID': 'ws_CO_11092024164241496725750305', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_11092024164241496725750305 827142"}
2024-09-11 13:42:55,179 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:42:55,377 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:42:55,378 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:42:55,617 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:43:16,368 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:43:16,498 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:43:16,499 - INFO - there is a test coming
2024-09-11 13:43:16,499 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 13:43:16,545 - INFO - {'updated_data': 'the data is now as 254726470561'}
2024-09-11 13:43:16,545 - INFO - the data is now as 254726470561
2024-09-11 13:43:16,561 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 13:43:16,561 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 13:43:16,562 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:43:17,356 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:43:17,358 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer OMAR1Gh1eoIW1aUMSOnKAqRvsB1k'}"}
2024-09-11 13:43:17,358 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTM0MzE3', 'Timestamp': '20240911134317', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254726470561', 'PartyB': 827142, 'PhoneNumber': '254726470561', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-165086', 'TransactionDesc': 'Some payment'}
2024-09-11 13:43:17,360 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:43:18,109 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 13:43:18,115 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077302857', 'CheckoutRequestID': 'ws_CO_11092024164317894726470561', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 13:55:07,687 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:55:07,837 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:55:07,838 - INFO - {'updated': 'initiated stk query for ws_CO_11092024165456539115003409 827142 '}
2024-09-11 13:55:07,912 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:55:08,545 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:55:08,548 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer NflKK1pN1BY5jKolm5dtIuCSkJ3m'}"}
2024-09-11 13:55:08,548 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTM1NTA3', 'Timestamp': '20240911135507', 'CheckoutRequestID': 'ws_CO_11092024165456539115003409'}"}
2024-09-11 13:55:08,549 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:55:09,296 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-11 13:55:09,297 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b520135446', 'CheckoutRequestID': 'ws_CO_11092024165456539115003409', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_11092024165456539115003409 827142"}
2024-09-11 13:55:09,442 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:55:09,642 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:55:09,643 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:55:09,880 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:57:31,222 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:57:31,405 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:57:31,406 - INFO - there is a test coming
2024-09-11 13:57:31,406 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 13:57:31,458 - INFO - {'updated_data': 'the data is now as 254702148555'}
2024-09-11 13:57:31,458 - INFO - the data is now as 254702148555
2024-09-11 13:57:31,474 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 13:57:31,474 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 13:57:31,475 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:57:32,139 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:57:32,141 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 6mtG582OKq4vI7uIibtK7GDYLTKQ'}"}
2024-09-11 13:57:32,142 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTM1NzMy', 'Timestamp': '20240911135732', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254702148555', 'PartyB': 899885, 'PhoneNumber': '254702148555', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054465', 'TransactionDesc': 'Some payment'}
2024-09-11 13:57:32,143 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:57:33,059 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 13:57:33,071 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208795001569', 'CheckoutRequestID': 'ws_CO_11092024165732812702148555', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 13:58:48,902 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172133535', 'CheckoutRequestID': 'ws_CO_11092024165838802704453287', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB58LURF9'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911165848}, {'Name': 'PhoneNumber', 'Value': 254704453287}]}}}}"}
2024-09-11 13:58:48,902 - INFO - {'updated_data': 'callback data began'}
2024-09-11 13:58:48,903 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172133535', 'CheckoutRequestID': 'ws_CO_11092024165838802704453287', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB58LURF9'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911165848}, {'Name': 'PhoneNumber', 'Value': 254704453287}]}}}}}
2024-09-11 13:58:49,071 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:58:49,609 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:58:49,610 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:58:49,828 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:00:10,848 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b520149780', 'CheckoutRequestID': 'ws_CO_11092024170004337740168548', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 350.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB88M214Q'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911170010}, {'Name': 'PhoneNumber', 'Value': 254740168548}]}}}}"}
2024-09-11 14:00:10,849 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:00:10,849 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b520149780', 'CheckoutRequestID': 'ws_CO_11092024170004337740168548', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 350.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB88M214Q'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911170010}, {'Name': 'PhoneNumber', 'Value': 254740168548}]}}}}}
2024-09-11 14:00:11,014 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:00:11,442 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:00:11,444 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:00:11,722 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:03:01,747 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:03:01,893 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:03:01,894 - INFO - there is a test coming
2024-09-11 14:03:01,894 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 14:03:01,947 - INFO - {'updated_data': 'the data is now as 254721389177'}
2024-09-11 14:03:01,947 - INFO - the data is now as 254721389177
2024-09-11 14:03:01,965 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 14:03:01,965 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 14:03:01,967 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:03:02,542 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:03:02,544 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer AsQn6GB2UQGwn3OAoaYal69NU9dn'}"}
2024-09-11 14:03:02,545 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQwMzAy', 'Timestamp': '20240911140302', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1002', 'PartyA': '254721389177', 'PartyB': 827142, 'PhoneNumber': '254721389177', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-4259', 'TransactionDesc': 'Some payment'}
2024-09-11 14:03:02,546 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:03:03,359 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 14:03:03,373 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89317569', 'CheckoutRequestID': 'ws_CO_11092024170303130721389177', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 14:03:22,172 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89317569', 'CheckoutRequestID': 'ws_CO_11092024170303130721389177', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1002.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB78MJLS9'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911170321}, {'Name': 'PhoneNumber', 'Value': 254721389177}]}}}}"}
2024-09-11 14:03:22,172 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:03:22,172 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89317569', 'CheckoutRequestID': 'ws_CO_11092024170303130721389177', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1002.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB78MJLS9'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911170321}, {'Name': 'PhoneNumber', 'Value': 254721389177}]}}}}}
2024-09-11 14:03:22,330 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:03:22,869 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:03:22,871 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:03:23,417 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:15:07,372 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20187816', 'CheckoutRequestID': 'ws_CO_11092024171456881706772103', 'ResultCode': 3, 'ResultDesc': 'Declined due to limit rule: greater than the maximum transaction amount.'}}}"}
2024-09-11 14:15:07,373 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:15:07,373 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20187816', 'CheckoutRequestID': 'ws_CO_11092024171456881706772103', 'ResultCode': 3, 'ResultDesc': 'Declined due to limit rule: greater than the maximum transaction amount.'}}}}
2024-09-11 14:15:07,540 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:15:07,763 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:15:07,764 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:15:08,005 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:15:08,585 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:15:08,872 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:15:08,873 - INFO - {'updated': 'initiated stk query for ws_CO_11092024171456881706772103 899885 '}
2024-09-11 14:15:08,976 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:15:09,567 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:15:09,569 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer DQJy79Y6QcoESnu8VIPZSzvgY15c'}"}
2024-09-11 14:15:09,570 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTQxNTA4', 'Timestamp': '20240911141508', 'CheckoutRequestID': 'ws_CO_11092024171456881706772103'}"}
2024-09-11 14:15:09,571 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:15:10,231 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 412
2024-09-11 14:15:10,232 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20187816', 'CheckoutRequestID': 'ws_CO_11092024171456881706772103', 'ResultCode': '3', 'ResultDesc': 'Declined due to limit rule: greater than the maximum transaction amount.'} for ws_CO_11092024171456881706772103 899885"}
2024-09-11 14:15:10,376 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:15:10,655 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:15:10,657 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:15:11,186 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:17:30,844 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:17:31,009 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:17:31,009 - INFO - {'updated': 'initiated stk query for ws_CO_11092024171709603701568074 827142 '}
2024-09-11 14:17:31,086 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:17:31,706 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:17:31,708 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Qlr2rqkfYNygYTBGvf6K8EQMod5A'}"}
2024-09-11 14:17:31,709 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQxNzMx', 'Timestamp': '20240911141731', 'CheckoutRequestID': 'ws_CO_11092024171709603701568074'}"}
2024-09-11 14:17:31,710 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:17:32,368 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 14:17:32,369 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024171709603701568074', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024171709603701568074 827142"}
2024-09-11 14:17:32,371 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 14:17:40,533 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5910109213', 'CheckoutRequestID': 'ws_CO_11092024171709603701568074', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-11 14:17:40,533 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:17:40,534 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5910109213', 'CheckoutRequestID': 'ws_CO_11092024171709603701568074', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-11 14:17:40,788 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:17:40,995 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:17:40,996 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:17:41,527 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:17:43,303 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795024481', 'CheckoutRequestID': 'ws_CO_11092024171734058706772103', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 150000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB98OSPR7'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911171742}, {'Name': 'PhoneNumber', 'Value': 254706772103}]}}}}"}
2024-09-11 14:17:43,303 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:17:43,303 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795024481', 'CheckoutRequestID': 'ws_CO_11092024171734058706772103', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 150000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB98OSPR7'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911171742}, {'Name': 'PhoneNumber', 'Value': 254706772103}]}}}}}
2024-09-11 14:17:43,472 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:17:44,012 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:17:44,014 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:17:44,253 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:17:44,254 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:17:44,386 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:17:44,386 - INFO - {'updated': 'initiated stk query for ws_CO_11092024171709603701568074 827142 '}
2024-09-11 14:17:44,450 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:17:45,033 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:17:45,035 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer eCjHLGkgHkNlEEUoHP1PrFM0avnG'}"}
2024-09-11 14:17:45,036 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQxNzQ0', 'Timestamp': '20240911141744', 'CheckoutRequestID': 'ws_CO_11092024171709603701568074'}"}
2024-09-11 14:17:45,037 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:17:45,747 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 376
2024-09-11 14:17:45,747 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5910109213', 'CheckoutRequestID': 'ws_CO_11092024171709603701568074', 'ResultCode': '1037', 'ResultDesc': 'DS timeout user cannot be reached'} for ws_CO_11092024171709603701568074 827142"}
2024-09-11 14:17:45,888 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:17:46,428 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:17:46,429 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:17:46,673 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:18:38,097 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171667485', 'CheckoutRequestID': 'ws_CO_11092024171816137721388380', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 14:18:38,097 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:18:38,098 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171667485', 'CheckoutRequestID': 'ws_CO_11092024171816137721388380', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 14:18:38,301 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:18:38,701 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:18:38,702 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:18:38,930 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:18:48,901 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:18:49,017 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:18:49,018 - INFO - there is a test coming
2024-09-11 14:18:49,018 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 14:18:49,076 - INFO - {'updated_data': 'the data is now as 254724465587'}
2024-09-11 14:18:49,077 - INFO - the data is now as 254724465587
2024-09-11 14:18:49,110 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 14:18:49,110 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 14:18:49,112 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:18:49,758 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:18:49,760 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 0gTkY6A3Ys1yY8mDUkNAXeFRiALA'}"}
2024-09-11 14:18:49,760 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTQxODQ5', 'Timestamp': '20240911141849', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '500', 'PartyA': '254724465587', 'PartyB': 899885, 'PhoneNumber': '254724465587', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054501', 'TransactionDesc': 'Some payment'}
2024-09-11 14:18:49,761 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:18:51,108 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 14:18:51,116 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171430075', 'CheckoutRequestID': 'ws_CO_11092024171850299724465587', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 14:19:06,992 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171430075', 'CheckoutRequestID': 'ws_CO_11092024171850299724465587', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB28P0AS6'}, {'Name': 'TransactionDate', 'Value': 20240911171906}, {'Name': 'PhoneNumber', 'Value': 254724465587}]}}}}"}
2024-09-11 14:19:06,993 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:19:06,993 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171430075', 'CheckoutRequestID': 'ws_CO_11092024171850299724465587', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB28P0AS6'}, {'Name': 'TransactionDate', 'Value': 20240911171906}, {'Name': 'PhoneNumber', 'Value': 254724465587}]}}}}}
2024-09-11 14:19:07,171 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:19:07,376 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:19:07,378 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:19:07,595 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:19:08,677 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:19:08,853 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:19:08,854 - INFO - there is a test coming
2024-09-11 14:19:08,854 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 14:19:08,904 - INFO - {'updated_data': 'the data is now as 254714024583'}
2024-09-11 14:19:08,905 - INFO - the data is now as 254714024583
2024-09-11 14:19:08,923 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 14:19:08,923 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 14:19:08,924 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:19:09,510 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:19:09,512 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer k5xZO16qGwGjkKL3kWOAGrwWhXLB'}"}
2024-09-11 14:19:09,513 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTQxOTA5', 'Timestamp': '20240911141909', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '6000', 'PartyA': '254714024583', 'PartyB': 899885, 'PhoneNumber': '254714024583', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054470', 'TransactionDesc': 'Some payment'}
2024-09-11 14:19:09,514 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:19:10,645 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 14:19:10,672 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585056163898', 'CheckoutRequestID': 'ws_CO_11092024171910078714024583', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 14:20:42,999 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:20:43,185 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:20:43,185 - INFO - there is a test coming
2024-09-11 14:20:43,185 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 14:20:43,248 - INFO - {'updated_data': 'the data is now as 254724465587'}
2024-09-11 14:20:43,248 - INFO - the data is now as 254724465587
2024-09-11 14:20:43,263 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 14:20:43,263 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 14:20:43,265 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:20:44,013 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:20:44,015 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer lmhY9E2Nd8ZAASPZItc8nHxvhRWX'}"}
2024-09-11 14:20:44,016 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTQyMDQ0', 'Timestamp': '20240911142044', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '500', 'PartyA': '254724465587', 'PartyB': 899885, 'PhoneNumber': '254724465587', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054383', 'TransactionDesc': 'Some payment'}
2024-09-11 14:20:44,023 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:20:45,065 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 14:20:45,071 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9762766', 'CheckoutRequestID': 'ws_CO_11092024172044749724465587', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 14:24:09,290 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:24:09,437 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:24:09,437 - INFO - there is a test coming
2024-09-11 14:24:09,438 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 14:24:09,493 - INFO - {'updated_data': 'the data is now as 254701568074'}
2024-09-11 14:24:09,493 - INFO - the data is now as 254701568074
2024-09-11 14:24:09,510 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 14:24:09,510 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 14:24:09,511 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:24:10,122 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:24:10,124 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer LG0VYC3UMkIxwZrnlRs8N6EbRSqY'}"}
2024-09-11 14:24:10,124 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQyNDEw', 'Timestamp': '20240911142410', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '500', 'PartyA': '254701568074', 'PartyB': 827142, 'PhoneNumber': '254701568074', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '100203-1271', 'TransactionDesc': 'Some payment'}
2024-09-11 14:24:10,126 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:24:12,006 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 14:24:12,013 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171436249', 'CheckoutRequestID': 'ws_CO_11092024172410651701568074', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 14:24:23,125 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:24:23,289 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:24:23,289 - INFO - {'updated': 'initiated stk query for ws_CO_11092024172410651701568074 827142 '}
2024-09-11 14:24:23,376 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:24:23,967 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:24:23,970 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer oW1xTfaGdv50y6wYd0cJ2hA9yA9w'}"}
2024-09-11 14:24:23,970 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQyNDIz', 'Timestamp': '20240911142423', 'CheckoutRequestID': 'ws_CO_11092024172410651701568074'}"}
2024-09-11 14:24:23,972 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:24:24,612 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 14:24:24,613 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024172410651701568074', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024172410651701568074 827142"}
2024-09-11 14:24:24,616 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 14:24:42,356 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171436249', 'CheckoutRequestID': 'ws_CO_11092024172410651701568074', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}"}
2024-09-11 14:24:42,356 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:24:42,356 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171436249', 'CheckoutRequestID': 'ws_CO_11092024172410651701568074', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}}
2024-09-11 14:24:42,538 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:24:42,937 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:24:42,938 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:24:43,259 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:28:04,369 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:28:04,564 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:28:04,565 - INFO - there is a test coming
2024-09-11 14:28:04,565 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 14:28:04,610 - INFO - {'updated_data': 'the data is now as 254719339949'}
2024-09-11 14:28:04,610 - INFO - the data is now as 254719339949
2024-09-11 14:28:04,628 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 14:28:04,628 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 14:28:04,629 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:28:05,338 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:28:05,340 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer LIZVGszjcNZzki41g8rj5jcjsAAu'}"}
2024-09-11 14:28:05,341 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTQyODA1', 'Timestamp': '20240911142805', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254719339949', 'PartyB': 899885, 'PhoneNumber': '254719339949', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054471', 'TransactionDesc': 'Some payment'}
2024-09-11 14:28:05,342 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:28:08,850 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 14:28:08,857 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182718139', 'CheckoutRequestID': 'ws_CO_11092024172805887719339949', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 14:30:29,840 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:30:30,013 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:30:30,014 - INFO - {'updated': 'initiated stk query for ws_CO_11092024172938584703888510 899885 '}
2024-09-11 14:30:30,074 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:30:30,758 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:30:30,760 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer dkOnWSAVhOoAlKwfJ4raU8b1K1l2'}"}
2024-09-11 14:30:30,761 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTQzMDMw', 'Timestamp': '20240911143030', 'CheckoutRequestID': 'ws_CO_11092024172938584703888510'}"}
2024-09-11 14:30:30,762 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:30:31,549 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 14:30:31,549 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585056192310', 'CheckoutRequestID': 'ws_CO_11092024172938584703888510', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024172938584703888510 899885"}
2024-09-11 14:30:31,676 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:30:31,905 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:30:31,907 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:30:32,152 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:30:32,199 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:30:32,329 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:30:32,330 - INFO - there is a test coming
2024-09-11 14:30:32,330 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 14:30:32,377 - INFO - {'updated_data': 'the data is now as 254705099923'}
2024-09-11 14:30:32,378 - INFO - the data is now as 254705099923
2024-09-11 14:30:32,393 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 14:30:32,393 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 14:30:32,394 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:30:32,957 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:30:32,959 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer jDt0pPcJycSNSZAZ1J2rie55m7xb'}"}
2024-09-11 14:30:32,959 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTQzMDMy', 'Timestamp': '20240911143032', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '7000', 'PartyA': '254705099923', 'PartyB': 899885, 'PhoneNumber': '254705099923', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054504', 'TransactionDesc': 'Some payment'}
2024-09-11 14:30:32,961 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:30:33,725 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 14:30:33,731 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172170360', 'CheckoutRequestID': 'ws_CO_11092024173033502705099923', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 14:30:44,532 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:30:44,894 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:30:44,895 - INFO - {'updated': 'initiated stk query for ws_CO_11092024173033502705099923 899885 '}
2024-09-11 14:30:44,961 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:30:45,544 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:30:45,546 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Tr5uSWC6OvjzbO6OGvZKvNFPAHFr'}"}
2024-09-11 14:30:45,547 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTQzMDQ0', 'Timestamp': '20240911143044', 'CheckoutRequestID': 'ws_CO_11092024173033502705099923'}"}
2024-09-11 14:30:45,549 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:30:46,256 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 369
2024-09-11 14:30:46,257 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172170360', 'CheckoutRequestID': 'ws_CO_11092024173033502705099923', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_11092024173033502705099923 899885"}
2024-09-11 14:30:46,409 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:30:46,625 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:30:46,627 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:30:46,854 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:30:54,632 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:30:54,798 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:30:54,799 - INFO - there is a test coming
2024-09-11 14:30:54,799 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 14:30:54,844 - INFO - {'updated_data': 'the data is now as 254705099923'}
2024-09-11 14:30:54,844 - INFO - the data is now as 254705099923
2024-09-11 14:30:54,860 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 14:30:54,860 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 14:30:54,862 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:30:55,517 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:30:55,519 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer TkmsqoBEdyBuxpqnVwkxOgp8UxUw'}"}
2024-09-11 14:30:55,519 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTQzMDU1', 'Timestamp': '20240911143055', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '7000', 'PartyA': '254705099923', 'PartyB': 899885, 'PhoneNumber': '254705099923', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054504', 'TransactionDesc': 'Some payment'}
2024-09-11 14:30:55,529 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:30:56,263 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 14:30:56,274 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5910146573', 'CheckoutRequestID': 'ws_CO_11092024173056059705099923', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 14:41:58,059 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:41:58,974 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:41:58,975 - INFO - there is a test coming
2024-09-11 14:41:58,975 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 14:41:59,017 - INFO - {'updated_data': 'the data is now as 254703897057'}
2024-09-11 14:41:59,018 - INFO - the data is now as 254703897057
2024-09-11 14:41:59,039 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 14:41:59,040 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 14:41:59,043 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:41:59,707 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:41:59,709 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer yxKjeYbori9jLIgIkJcM6GLFs7YA'}"}
2024-09-11 14:41:59,710 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQ0MTU5', 'Timestamp': '20240911144159', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '551', 'PartyA': '254703897057', 'PartyB': 827142, 'PhoneNumber': '254703897057', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '123-1776', 'TransactionDesc': 'Some payment'}
2024-09-11 14:41:59,711 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:42:00,565 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 14:42:00,571 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20262183', 'CheckoutRequestID': 'ws_CO_11092024174200337703897057', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 14:42:07,987 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20262183', 'CheckoutRequestID': 'ws_CO_11092024174200337703897057', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 551.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB98SUE77'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911174206}, {'Name': 'PhoneNumber', 'Value': 254703897057}]}}}}"}
2024-09-11 14:42:07,987 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:42:07,987 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20262183', 'CheckoutRequestID': 'ws_CO_11092024174200337703897057', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 551.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB98SUE77'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911174206}, {'Name': 'PhoneNumber', 'Value': 254703897057}]}}}}}
2024-09-11 14:42:08,163 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:42:08,351 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:42:08,353 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:42:08,577 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:42:11,470 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:42:11,628 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:42:11,629 - INFO - {'updated': 'initiated stk query for ws_CO_11092024174200337703897057 827142 '}
2024-09-11 14:42:11,694 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:42:12,292 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:42:12,294 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Lc6YPARknA1rlo1oABiWaQJwIHoA'}"}
2024-09-11 14:42:12,294 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQ0MjEx', 'Timestamp': '20240911144211', 'CheckoutRequestID': 'ws_CO_11092024174200337703897057'}"}
2024-09-11 14:42:12,295 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:42:12,943 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 14:42:12,944 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20262183', 'CheckoutRequestID': 'ws_CO_11092024174200337703897057', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024174200337703897057 827142"}
2024-09-11 14:42:13,094 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:42:13,330 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:42:13,332 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:42:13,547 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:46:09,187 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:46:09,322 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:46:09,323 - INFO - there is a test coming
2024-09-11 14:46:09,323 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 14:46:09,367 - INFO - {'updated_data': 'the data is now as 254720845346'}
2024-09-11 14:46:09,368 - INFO - the data is now as 254720845346
2024-09-11 14:46:09,385 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 14:46:09,385 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 14:46:09,386 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:46:09,990 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:46:09,992 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 6nIcQw4DRKmAKM8Hk2jpV0n5f9ic'}"}
2024-09-11 14:46:09,993 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTQ0NjA5', 'Timestamp': '20240911144609', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254720845346', 'PartyB': 899885, 'PhoneNumber': '254720845346', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054506', 'TransactionDesc': 'Some payment'}
2024-09-11 14:46:09,994 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:46:11,030 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 14:46:11,036 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20273442', 'CheckoutRequestID': 'ws_CO_11092024174610520720845346', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 14:46:22,741 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:46:22,913 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:46:22,914 - INFO - {'updated': 'initiated stk query for ws_CO_11092024174610520720845346 899885 '}
2024-09-11 14:46:22,981 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:46:23,568 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:46:23,570 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer flYwc3QvSy87rlW4nc52cxvUVzs0'}"}
2024-09-11 14:46:23,571 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTQ0NjIy', 'Timestamp': '20240911144622', 'CheckoutRequestID': 'ws_CO_11092024174610520720845346'}"}
2024-09-11 14:46:23,572 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:46:24,349 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 14:46:24,349 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20273442', 'CheckoutRequestID': 'ws_CO_11092024174610520720845346', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024174610520720845346 899885"}
2024-09-11 14:46:24,477 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:46:24,986 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:46:24,987 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:46:25,236 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:47:27,766 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:47:27,969 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:47:27,970 - INFO - there is a test coming
2024-09-11 14:47:27,971 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 14:47:28,014 - INFO - {'updated_data': 'the data is now as 254712788966'}
2024-09-11 14:47:28,014 - INFO - the data is now as 254712788966
2024-09-11 14:47:28,031 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 14:47:28,031 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 14:47:28,032 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:47:28,792 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:47:28,794 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer NgBcB9Uyv95eyXMYwWOJ4D83Mu0K'}"}
2024-09-11 14:47:28,794 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQ0NzI4', 'Timestamp': '20240911144728', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2400', 'PartyA': '254712788966', 'PartyB': 827142, 'PhoneNumber': '254712788966', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-16569', 'TransactionDesc': 'Some payment'}
2024-09-11 14:47:28,795 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:47:29,658 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 14:47:29,664 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172188896', 'CheckoutRequestID': 'ws_CO_11092024174729400712788966', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 14:47:40,730 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:47:40,845 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:47:40,846 - INFO - there is a test coming
2024-09-11 14:47:40,846 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 14:47:40,886 - INFO - {'updated_data': 'the data is now as 254717226694'}
2024-09-11 14:47:40,886 - INFO - the data is now as 254717226694
2024-09-11 14:47:40,916 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 14:47:40,916 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 14:47:40,918 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:47:41,612 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:47:41,614 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 0jaBuCtyHd1TT4VwebAiGSlsyFqU'}"}
2024-09-11 14:47:41,615 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQ0NzQx', 'Timestamp': '20240911144741', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254717226694', 'PartyB': 827142, 'PhoneNumber': '254717226694', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-4707', 'TransactionDesc': 'Some payment'}
2024-09-11 14:47:41,616 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:47:42,589 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 14:47:42,596 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171462220', 'CheckoutRequestID': 'ws_CO_11092024174742354717226694', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 14:48:33,904 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:48:33,936 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 14:48:33,937 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 14:48:42,377 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:48:42,406 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-11 14:48:42,406 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 14:48:58,754 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:48:58,872 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:48:58,873 - INFO - {'updated': 'initiated stk query for ws_CO_11092024174827539725808100 827142 '}
2024-09-11 14:48:58,927 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:48:59,716 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:48:59,719 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer nUxTnohfKhtrFssjqXIe2fLdq9gC'}"}
2024-09-11 14:48:59,720 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQ0ODU4', 'Timestamp': '20240911144858', 'CheckoutRequestID': 'ws_CO_11092024174827539725808100'}"}
2024-09-11 14:48:59,721 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:49:00,350 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 14:49:00,351 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077376092', 'CheckoutRequestID': 'ws_CO_11092024174827539725808100', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024174827539725808100 827142"}
2024-09-11 14:49:00,476 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:49:01,005 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:49:01,007 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:49:01,244 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:56:30,016 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:56:30,283 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:56:30,284 - INFO - {'updated': 'initiated stk query for ws_CO_11092024175605652724892594 827142 '}
2024-09-11 14:56:30,346 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:56:31,127 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:56:31,138 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer u6K0nKqbZEjZGearngdJb2JIX9cJ'}"}
2024-09-11 14:56:31,141 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQ1NjMw', 'Timestamp': '20240911145630', 'CheckoutRequestID': 'ws_CO_11092024175605652724892594'}"}
2024-09-11 14:56:31,142 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:56:31,885 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 14:56:31,886 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9861032', 'CheckoutRequestID': 'ws_CO_11092024175605652724892594', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024175605652724892594 827142"}
2024-09-11 14:56:32,021 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:56:32,246 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:56:32,248 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:56:32,524 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:57:35,046 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89380506', 'CheckoutRequestID': 'ws_CO_11092024175723254713536644', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB58VKNTJ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911175734}, {'Name': 'PhoneNumber', 'Value': 254713536644}]}}}}"}
2024-09-11 14:57:35,047 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:57:35,047 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89380506', 'CheckoutRequestID': 'ws_CO_11092024175723254713536644', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB58VKNTJ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911175734}, {'Name': 'PhoneNumber', 'Value': 254713536644}]}}}}}
2024-09-11 14:57:35,217 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:57:35,642 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:57:35,644 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:57:35,863 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:57:47,844 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:57:47,969 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:57:47,969 - INFO - there is a test coming
2024-09-11 14:57:47,970 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 14:57:48,019 - INFO - {'updated_data': 'the data is now as 254740740110'}
2024-09-11 14:57:48,020 - INFO - the data is now as 254740740110
2024-09-11 14:57:48,045 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 14:57:48,046 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 14:57:48,047 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:57:48,641 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:57:48,643 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer H6OtdQNMJB5nAhWIYM89xfA9GncA'}"}
2024-09-11 14:57:48,644 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQ1NzQ4', 'Timestamp': '20240911145748', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254740740110', 'PartyB': 827142, 'PhoneNumber': '254740740110', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-19624', 'TransactionDesc': 'Some payment'}
2024-09-11 14:57:48,645 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:57:49,655 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 14:57:49,669 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20307507', 'CheckoutRequestID': 'ws_CO_11092024175749322740740110', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 14:58:03,114 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20307507', 'CheckoutRequestID': 'ws_CO_11092024175749322740740110', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB08VNJ36'}, {'Name': 'TransactionDate', 'Value': 20240911175802}, {'Name': 'PhoneNumber', 'Value': 254740740110}]}}}}"}
2024-09-11 14:58:03,115 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:58:03,115 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20307507', 'CheckoutRequestID': 'ws_CO_11092024175749322740740110', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB08VNJ36'}, {'Name': 'TransactionDate', 'Value': 20240911175802}, {'Name': 'PhoneNumber', 'Value': 254740740110}]}}}}}
2024-09-11 14:58:03,305 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:58:03,574 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:58:03,575 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:58:03,888 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:58:07,774 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171474736', 'CheckoutRequestID': 'ws_CO_11092024175751564728468660', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 650.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB28VO3GU'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911175807}, {'Name': 'PhoneNumber', 'Value': 254728468660}]}}}}"}
2024-09-11 14:58:07,775 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:58:07,775 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171474736', 'CheckoutRequestID': 'ws_CO_11092024175751564728468660', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 650.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB28VO3GU'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911175807}, {'Name': 'PhoneNumber', 'Value': 254728468660}]}}}}}
2024-09-11 14:58:07,932 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:58:08,500 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:58:08,501 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:58:08,806 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:58:21,016 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077388299', 'CheckoutRequestID': 'ws_CO_11092024175802030723390706', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4054.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB48VPJ24'}, {'Name': 'TransactionDate', 'Value': 20240911175820}, {'Name': 'PhoneNumber', 'Value': 254723390706}]}}}}"}
2024-09-11 14:58:21,017 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:58:21,017 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077388299', 'CheckoutRequestID': 'ws_CO_11092024175802030723390706', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4054.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB48VPJ24'}, {'Name': 'TransactionDate', 'Value': 20240911175820}, {'Name': 'PhoneNumber', 'Value': 254723390706}]}}}}}
2024-09-11 14:58:21,196 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:58:21,423 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:58:21,424 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:58:21,665 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:58:24,590 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:58:24,623 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-11 14:58:24,624 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 14:58:53,263 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:58:53,430 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:58:53,430 - INFO - {'updated': 'initiated stk query for ws_CO_11092024175802030723390706 827142 '}
2024-09-11 14:58:53,496 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:58:54,067 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:58:54,071 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer pahzja0E2yQGGqUpplcsRZiPepcE'}"}
2024-09-11 14:58:54,072 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQ1ODUz', 'Timestamp': '20240911145853', 'CheckoutRequestID': 'ws_CO_11092024175802030723390706'}"}
2024-09-11 14:58:54,073 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:58:54,674 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 14:58:54,675 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077388299', 'CheckoutRequestID': 'ws_CO_11092024175802030723390706', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024175802030723390706 827142"}
2024-09-11 14:58:54,802 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:58:55,026 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:58:55,028 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:58:55,240 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:59:04,520 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5910225300', 'CheckoutRequestID': 'ws_CO_11092024175853301721821115', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 41000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB88VU7ZM'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911175903}, {'Name': 'PhoneNumber', 'Value': 254721821115}]}}}}"}
2024-09-11 14:59:04,521 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:59:04,521 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5910225300', 'CheckoutRequestID': 'ws_CO_11092024175853301721821115', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 41000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB88VU7ZM'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911175903}, {'Name': 'PhoneNumber', 'Value': 254721821115}]}}}}}
2024-09-11 14:59:04,685 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:59:04,902 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:59:04,912 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:59:05,163 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 15:04:47,504 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 15:04:47,687 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 15:04:47,688 - INFO - there is a test coming
2024-09-11 15:04:47,688 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 15:04:47,751 - INFO - {'updated_data': 'the data is now as 254727023479'}
2024-09-11 15:04:47,751 - INFO - the data is now as 254727023479
2024-09-11 15:04:47,766 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 15:04:47,766 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 15:04:47,768 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:04:48,402 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 15:04:48,404 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer yQRVVM6uQqYG0tqKUYc1LEpANA37'}"}
2024-09-11 15:04:48,404 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTUwNDQ4', 'Timestamp': '20240911150448', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254727023479', 'PartyB': 827142, 'PhoneNumber': '254727023479', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-2358', 'TransactionDesc': 'Some payment'}
2024-09-11 15:04:48,406 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:04:49,175 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 15:04:49,181 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077396797', 'CheckoutRequestID': 'ws_CO_11092024180448951727023479', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 15:04:58,566 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 15:04:58,781 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 15:04:58,781 - INFO - {'updated': 'initiated stk query for ws_CO_11092024180435501740740110 827142 '}
2024-09-11 15:04:58,849 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:04:59,465 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 15:04:59,467 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer auoMsV8RbLJmbn7WTebljhaBGOqo'}"}
2024-09-11 15:04:59,468 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTUwNDU4', 'Timestamp': '20240911150458', 'CheckoutRequestID': 'ws_CO_11092024180435501740740110'}"}
2024-09-11 15:04:59,469 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:05:00,143 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 15:05:00,143 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208795079429', 'CheckoutRequestID': 'ws_CO_11092024180435501740740110', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024180435501740740110 827142"}
2024-09-11 15:05:00,281 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 15:05:00,809 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 15:05:00,810 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 15:05:01,050 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 15:05:48,233 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 15:05:48,400 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 15:05:48,400 - INFO - there is a test coming
2024-09-11 15:05:48,401 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 15:05:48,460 - INFO - {'updated_data': 'the data is now as 254702994773'}
2024-09-11 15:05:48,461 - INFO - the data is now as 254702994773
2024-09-11 15:05:48,480 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 15:05:48,481 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 15:05:48,486 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:05:49,313 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 15:05:49,314 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer he51WDSA55l05HSVu2rbkwD0JYyX'}"}
2024-09-11 15:05:49,315 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTUwNTQ5', 'Timestamp': '20240911150549', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '25000', 'PartyA': '254702994773', 'PartyB': 899885, 'PhoneNumber': '254702994773', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054482', 'TransactionDesc': 'Some payment'}
2024-09-11 15:05:49,316 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:05:50,074 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 15:05:50,081 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208795080810', 'CheckoutRequestID': 'ws_CO_11092024180549860702994773', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 15:06:00,431 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795080810', 'CheckoutRequestID': 'ws_CO_11092024180549860702994773', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 25000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB08X3IQM'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911180559}, {'Name': 'PhoneNumber', 'Value': 254702994773}]}}}}"}
2024-09-11 15:06:00,432 - INFO - {'updated_data': 'callback data began'}
2024-09-11 15:06:00,432 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795080810', 'CheckoutRequestID': 'ws_CO_11092024180549860702994773', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 25000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB08X3IQM'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911180559}, {'Name': 'PhoneNumber', 'Value': 254702994773}]}}}}}
2024-09-11 15:06:00,593 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 15:06:00,820 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 15:06:00,821 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 15:06:01,140 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 15:06:02,834 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 15:06:04,263 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 15:06:04,264 - INFO - {'updated': 'initiated stk query for ws_CO_11092024180551423768179410 827142 '}
2024-09-11 15:06:04,320 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:06:04,989 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 15:06:04,991 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer tpjKH1pqeIrz5xthlGZeWgUT6miE'}"}
2024-09-11 15:06:04,991 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTUwNjA0', 'Timestamp': '20240911150604', 'CheckoutRequestID': 'ws_CO_11092024180551423768179410'}"}
2024-09-11 15:06:04,993 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:06:05,704 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 389
2024-09-11 15:06:05,705 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171484532', 'CheckoutRequestID': 'ws_CO_11092024180551423768179410', 'ResultCode': '1', 'ResultDesc': 'The balance is insufficient for the transaction.'} for ws_CO_11092024180551423768179410 827142"}
2024-09-11 15:06:05,845 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 15:06:06,094 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 15:06:06,097 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 15:06:06,370 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 15:06:11,722 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 15:06:11,871 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 15:06:11,872 - INFO - {'updated': 'initiated stk query for ws_CO_11092024180558876721679436 899885 '}
2024-09-11 15:06:11,938 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:06:12,605 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 15:06:12,607 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer hsSjtaYKOMcXt8T1I96PHjaIuUJx'}"}
2024-09-11 15:06:12,608 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTUwNjEx', 'Timestamp': '20240911150611', 'CheckoutRequestID': 'ws_CO_11092024180558876721679436'}"}
2024-09-11 15:06:12,609 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:06:13,402 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 15:06:13,402 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024180558876721679436', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024180558876721679436 899885"}
2024-09-11 15:06:13,405 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 15:06:51,947 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 15:06:51,962 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 15:06:51,963 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 15:07:09,630 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 15:07:09,788 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 15:07:09,789 - INFO - there is a test coming
2024-09-11 15:07:09,789 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 15:07:09,832 - INFO - {'updated_data': 'the data is now as 254724672918'}
2024-09-11 15:07:09,833 - INFO - the data is now as 254724672918
2024-09-11 15:07:09,853 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 15:07:09,853 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 15:07:09,855 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:07:10,539 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 15:07:10,541 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer e5OxHjK2a1r53Prkyq8Imzl84cLc'}"}
2024-09-11 15:07:10,541 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTUwNzEw', 'Timestamp': '20240911150710', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1001', 'PartyA': '254724672918', 'PartyB': 827142, 'PhoneNumber': '254724672918', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-2714', 'TransactionDesc': 'Some payment'}
2024-09-11 15:07:10,542 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:07:11,866 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 15:07:11,872 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172213683', 'CheckoutRequestID': 'ws_CO_11092024180711237724672918', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 15:07:25,463 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172213683', 'CheckoutRequestID': 'ws_CO_11092024180711237724672918', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1001.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB08XCOOE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911180724}, {'Name': 'PhoneNumber', 'Value': 254724672918}]}}}}"}
2024-09-11 15:07:25,464 - INFO - {'updated_data': 'callback data began'}
2024-09-11 15:07:25,464 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172213683', 'CheckoutRequestID': 'ws_CO_11092024180711237724672918', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1001.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB08XCOOE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911180724}, {'Name': 'PhoneNumber', 'Value': 254724672918}]}}}}}
2024-09-11 15:07:25,619 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 15:07:25,856 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 15:07:25,858 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 15:07:26,139 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 15:09:02,672 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 15:09:02,863 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 15:09:02,863 - INFO - {'updated': 'initiated stk query for ws_CO_11092024180851391721679436 899885 '}
2024-09-11 15:09:02,922 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:09:03,621 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 15:09:03,623 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer wxjtLKAPc2sICwjEmJAbCQTrJpHq'}"}
2024-09-11 15:09:03,624 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTUwOTAy', 'Timestamp': '20240911150902', 'CheckoutRequestID': 'ws_CO_11092024180851391721679436'}"}
2024-09-11 15:09:03,625 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:09:04,253 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 15:09:04,254 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024180851391721679436', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024180851391721679436 899885"}
2024-09-11 15:09:04,256 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 15:09:24,627 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b520343042', 'CheckoutRequestID': 'ws_CO_11092024180851391721679436', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-11 15:09:24,627 - INFO - {'updated_data': 'callback data began'}
2024-09-11 15:09:24,628 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b520343042', 'CheckoutRequestID': 'ws_CO_11092024180851391721679436', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-11 15:09:24,836 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 15:09:25,029 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 15:09:25,031 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 15:09:25,560 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 15:09:59,274 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5910258034', 'CheckoutRequestID': 'ws_CO_11092024180943324724465587', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB38XTOHH'}, {'Name': 'TransactionDate', 'Value': 20240911180958}, {'Name': 'PhoneNumber', 'Value': 254724465587}]}}}}"}
2024-09-11 15:09:59,281 - INFO - {'updated_data': 'callback data began'}
2024-09-11 15:09:59,282 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5910258034', 'CheckoutRequestID': 'ws_CO_11092024180943324724465587', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB38XTOHH'}, {'Name': 'TransactionDate', 'Value': 20240911180958}, {'Name': 'PhoneNumber', 'Value': 254724465587}]}}}}}
2024-09-11 15:09:59,451 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 15:09:59,938 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 15:09:59,940 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 15:10:00,235 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 15:10:34,237 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5910260149', 'CheckoutRequestID': 'ws_CO_11092024181025014721679436', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB08XXT0C'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911181033}, {'Name': 'PhoneNumber', 'Value': 254721679436}]}}}}"}
2024-09-11 15:10:34,237 - INFO - {'updated_data': 'callback data began'}
2024-09-11 15:10:34,238 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5910260149', 'CheckoutRequestID': 'ws_CO_11092024181025014721679436', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB08XXT0C'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911181033}, {'Name': 'PhoneNumber', 'Value': 254721679436}]}}}}}
2024-09-11 15:10:34,400 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 15:10:34,650 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 15:10:34,652 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 15:10:35,281 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 15:10:37,009 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 15:10:37,147 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 15:10:37,148 - INFO - {'updated': 'initiated stk query for ws_CO_11092024181025014721679436 899885 '}
2024-09-11 15:10:37,211 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:10:37,974 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 15:10:37,976 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer SwHyyBC1GRGa6Q2B6dm54iKEXamI'}"}
2024-09-11 15:10:37,977 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTUxMDM3', 'Timestamp': '20240911151037', 'CheckoutRequestID': 'ws_CO_11092024181025014721679436'}"}
2024-09-11 15:10:37,978 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:10:38,693 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 15:10:38,701 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5910260149', 'CheckoutRequestID': 'ws_CO_11092024181025014721679436', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024181025014721679436 899885"}
2024-09-11 15:10:38,833 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 15:10:39,099 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 15:10:39,102 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 15:10:39,393 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 15:12:05,242 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 15:12:05,410 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 15:12:05,411 - INFO - there is a test coming
2024-09-11 15:12:05,411 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 15:12:05,458 - INFO - {'updated_data': 'the data is now as 254714393905'}
2024-09-11 15:12:05,458 - INFO - the data is now as 254714393905
2024-09-11 15:12:05,476 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 15:12:05,476 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 15:12:05,477 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:12:06,243 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 15:12:06,245 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer f9CtgAFY0YO6Roug7WaRGWAF5Szs'}"}
2024-09-11 15:12:06,246 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTUxMjA2', 'Timestamp': '20240911151206', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '4705', 'PartyA': '254714393905', 'PartyB': 899885, 'PhoneNumber': '254714393905', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054486', 'TransactionDesc': 'Some payment'}
2024-09-11 15:12:06,247 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:12:07,095 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 15:12:07,103 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208795088600', 'CheckoutRequestID': 'ws_CO_11092024181206892714393905', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 15:12:16,674 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795088600', 'CheckoutRequestID': 'ws_CO_11092024181206892714393905', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4705.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB58Y96S5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911181215}, {'Name': 'PhoneNumber', 'Value': 254714393905}]}}}}"}
2024-09-11 15:12:16,674 - INFO - {'updated_data': 'callback data began'}
2024-09-11 15:12:16,674 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795088600', 'CheckoutRequestID': 'ws_CO_11092024181206892714393905', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4705.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB58Y96S5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911181215}, {'Name': 'PhoneNumber', 'Value': 254714393905}]}}}}}
2024-09-11 15:12:16,863 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 15:12:17,106 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 15:12:17,107 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 15:12:17,415 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 15:17:12,636 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 15:17:12,813 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 15:17:12,814 - INFO - there is a test coming
2024-09-11 15:17:12,815 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 15:17:12,860 - INFO - {'updated_data': 'the data is now as 254720348510'}
2024-09-11 15:17:12,860 - INFO - the data is now as 254720348510
2024-09-11 15:17:12,885 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 15:17:12,885 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 15:17:12,886 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:17:13,670 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 15:17:13,672 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 2lPQiHO2AJABFNPDywI6rSs5uMAj'}"}
2024-09-11 15:17:13,672 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTUxNzEz', 'Timestamp': '20240911151713', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254720348510', 'PartyB': 827142, 'PhoneNumber': '254720348510', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-5125', 'TransactionDesc': 'Some payment'}
2024-09-11 15:17:13,673 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:17:14,441 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 15:17:14,453 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172225581', 'CheckoutRequestID': 'ws_CO_11092024181714230720348510', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 15:17:28,356 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172225581', 'CheckoutRequestID': 'ws_CO_11092024181714230720348510', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 15:17:28,357 - INFO - {'updated_data': 'callback data began'}
2024-09-11 15:17:28,357 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172225581', 'CheckoutRequestID': 'ws_CO_11092024181714230720348510', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 15:17:28,523 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 15:17:29,061 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 15:17:29,062 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 15:17:29,272 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 15:27:28,313 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 15:27:28,425 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 15:27:28,426 - INFO - there is a test coming
2024-09-11 15:27:28,426 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 15:27:28,466 - INFO - {'updated_data': 'the data is now as 254114559865'}
2024-09-11 15:27:28,466 - INFO - the data is now as 254114559865
2024-09-11 15:27:28,481 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 15:27:28,482 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 15:27:28,490 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:27:29,075 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 15:27:29,076 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer rZTkH7pEa9FGWxzOZGhAeZGGDdj8'}"}
2024-09-11 15:27:29,077 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTUyNzI5', 'Timestamp': '20240911152729', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254114559865', 'PartyB': 899885, 'PhoneNumber': '254114559865', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Order No . 14020', 'TransactionDesc': 'Some payment'}
2024-09-11 15:27:29,078 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:27:30,226 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 15:27:30,232 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9954695', 'CheckoutRequestID': 'ws_CO_11092024182729651114559865', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 15:27:59,428 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9955583', 'CheckoutRequestID': 'ws_CO_11092024182748618740505170', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB4919XDE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911182758}, {'Name': 'PhoneNumber', 'Value': 254740505170}]}}}}"}
2024-09-11 15:27:59,429 - INFO - {'updated_data': 'callback data began'}
2024-09-11 15:27:59,430 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9955583', 'CheckoutRequestID': 'ws_CO_11092024182748618740505170', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB4919XDE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911182758}, {'Name': 'PhoneNumber', 'Value': 254740505170}]}}}}}
2024-09-11 15:27:59,603 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 15:27:59,813 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 15:27:59,817 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 15:28:00,026 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 15:35:06,015 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 15:35:06,180 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 15:35:06,181 - INFO - {'updated': 'initiated stk query for ws_CO_11092024183453422715363661 827142 '}
2024-09-11 15:35:06,235 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:35:07,071 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 15:35:07,074 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 8LblZuBYMJPgZoaKTIjR6hNrg2PH'}"}
2024-09-11 15:35:07,074 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTUzNTA2', 'Timestamp': '20240911153506', 'CheckoutRequestID': 'ws_CO_11092024183453422715363661'}"}
2024-09-11 15:35:07,075 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:35:07,780 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 15:35:07,780 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024183453422715363661', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024183453422715363661 827142"}
2024-09-11 15:35:07,783 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 15:35:16,002 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 15:35:16,138 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 15:35:16,138 - INFO - {'updated': 'initiated stk query for ws_CO_11092024183453422715363661 827142 '}
2024-09-11 15:35:16,192 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:35:16,842 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 15:35:16,844 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer sQldyXQcNKa9V9SiyfiLjstwvkJ2'}"}
2024-09-11 15:35:16,844 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTUzNTE2', 'Timestamp': '20240911153516', 'CheckoutRequestID': 'ws_CO_11092024183453422715363661'}"}
2024-09-11 15:35:16,845 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:35:17,519 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 15:35:17,520 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024183453422715363661', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024183453422715363661 827142"}
2024-09-11 15:35:17,522 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 15:38:54,957 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 15:38:55,100 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 15:38:55,101 - INFO - {'updated': 'initiated stk query for ws_CO_11092024183843962702632768 899885 '}
2024-09-11 15:38:55,173 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:38:55,771 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 15:38:55,773 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Cowv1XGI0nuDMhbGcH1mmkgwxfnc'}"}
2024-09-11 15:38:55,773 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTUzODU1', 'Timestamp': '20240911153855', 'CheckoutRequestID': 'ws_CO_11092024183843962702632768'}"}
2024-09-11 15:38:55,774 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:38:56,428 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 15:38:56,428 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024183843962702632768', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024183843962702632768 899885"}
2024-09-11 15:38:56,431 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 15:44:47,183 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 15:44:47,341 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 15:44:47,341 - INFO - there is a test coming
2024-09-11 15:44:47,342 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 15:44:47,385 - INFO - {'updated_data': 'the data is now as 254743898088'}
2024-09-11 15:44:47,385 - INFO - the data is now as 254743898088
2024-09-11 15:44:47,422 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 15:44:47,422 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 15:44:47,424 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:44:48,312 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 15:44:48,314 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer YUhH01NT2yjbZXKEY6eVzlvfkuk1'}"}
2024-09-11 15:44:48,315 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTU0NDQ4', 'Timestamp': '20240911154448', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '500', 'PartyA': '254743898088', 'PartyB': 899885, 'PhoneNumber': '254743898088', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA005478CP-1726069485520', 'TransactionDesc': 'Some payment'}
2024-09-11 15:44:48,316 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:44:49,195 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 15:44:49,201 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b520450517', 'CheckoutRequestID': 'ws_CO_11092024184448972743898088', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 16:05:17,412 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:05:17,547 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:05:17,548 - INFO - {'updated': 'initiated stk query for ws_CO_11092024190505853714420394 899885 '}
2024-09-11 16:05:17,619 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:05:18,200 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:05:18,202 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer bemCzSAHNLTVOae0RNZwACWegASm'}"}
2024-09-11 16:05:18,202 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTYwNTE3', 'Timestamp': '20240911160517', 'CheckoutRequestID': 'ws_CO_11092024190505853714420394'}"}
2024-09-11 16:05:18,203 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:05:18,933 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 16:05:18,934 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024190505853714420394', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024190505853714420394 899885"}
2024-09-11 16:05:18,937 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 16:06:04,137 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b10074709', 'CheckoutRequestID': 'ws_CO_11092024190550660720299020', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 16:06:04,137 - INFO - {'updated_data': 'callback data began'}
2024-09-11 16:06:04,137 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b10074709', 'CheckoutRequestID': 'ws_CO_11092024190550660720299020', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 16:06:04,407 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 16:06:04,916 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 16:06:04,917 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 16:06:05,246 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 16:07:09,642 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:07:09,797 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:07:09,797 - INFO - {'updated': 'initiated stk query for ws_CO_11092024190657869720299020 827142 '}
2024-09-11 16:07:09,852 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:07:10,467 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:07:10,469 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer lkqJIunSVpy6UjG9e0MfIslRp19c'}"}
2024-09-11 16:07:10,470 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTYwNzA5', 'Timestamp': '20240911160709', 'CheckoutRequestID': 'ws_CO_11092024190657869720299020'}"}
2024-09-11 16:07:10,471 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:07:11,181 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 16:07:11,181 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5910433442', 'CheckoutRequestID': 'ws_CO_11092024190657869720299020', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024190657869720299020 827142"}
2024-09-11 16:07:11,306 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 16:07:11,528 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 16:07:11,529 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 16:07:11,812 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 16:07:59,095 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5910436358', 'CheckoutRequestID': 'ws_CO_11092024190750740708022950', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4556.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB69A312G'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911190758}, {'Name': 'PhoneNumber', 'Value': 254708022950}]}}}}"}
2024-09-11 16:07:59,095 - INFO - {'updated_data': 'callback data began'}
2024-09-11 16:07:59,095 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5910436358', 'CheckoutRequestID': 'ws_CO_11092024190750740708022950', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4556.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB69A312G'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911190758}, {'Name': 'PhoneNumber', 'Value': 254708022950}]}}}}}
2024-09-11 16:07:59,259 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 16:07:59,515 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 16:07:59,516 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 16:07:59,788 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 16:08:04,645 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:08:04,866 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:08:04,867 - INFO - there is a test coming
2024-09-11 16:08:04,867 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 16:08:04,925 - INFO - {'updated_data': 'the data is now as 254724808024'}
2024-09-11 16:08:04,925 - INFO - the data is now as 254724808024
2024-09-11 16:08:04,941 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 16:08:04,942 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 16:08:04,943 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:08:05,619 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:08:05,621 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer JAhIRJkWponSglwbaLNq6RTidGyi'}"}
2024-09-11 16:08:05,621 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTYwODA1', 'Timestamp': '20240911160805', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '250', 'PartyA': '254724808024', 'PartyB': 899885, 'PhoneNumber': '254724808024', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054491', 'TransactionDesc': 'Some payment'}
2024-09-11 16:08:05,623 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:08:06,682 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 16:08:06,698 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208795160201', 'CheckoutRequestID': 'ws_CO_11092024190806272724808024', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 16:09:02,807 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:09:02,965 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:09:02,966 - INFO - there is a test coming
2024-09-11 16:09:02,966 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 16:09:03,020 - INFO - {'updated_data': 'the data is now as 254722317145'}
2024-09-11 16:09:03,020 - INFO - the data is now as 254722317145
2024-09-11 16:09:03,036 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 16:09:03,037 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 16:09:03,038 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:09:03,897 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:09:03,899 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer MZVcFomKa49ak0e5iYHUNs2BYYC0'}"}
2024-09-11 16:09:03,900 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTYwOTAz', 'Timestamp': '20240911160903', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1500', 'PartyA': '254722317145', 'PartyB': 827142, 'PhoneNumber': '254722317145', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-18753', 'TransactionDesc': 'Some payment'}
2024-09-11 16:09:03,901 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:09:05,023 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 16:09:05,029 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585056491556', 'CheckoutRequestID': 'ws_CO_11092024190904705722317145', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 16:09:19,119 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585056491556', 'CheckoutRequestID': 'ws_CO_11092024190904705722317145', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB79AE25R'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911190918}, {'Name': 'PhoneNumber', 'Value': 254722317145}]}}}}"}
2024-09-11 16:09:19,119 - INFO - {'updated_data': 'callback data began'}
2024-09-11 16:09:19,119 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585056491556', 'CheckoutRequestID': 'ws_CO_11092024190904705722317145', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB79AE25R'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911190918}, {'Name': 'PhoneNumber', 'Value': 254722317145}]}}}}}
2024-09-11 16:09:19,290 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 16:09:19,536 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 16:09:19,538 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 16:09:19,781 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 16:09:26,055 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:09:26,194 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:09:26,194 - INFO - {'updated': 'initiated stk query for ws_CO_11092024190904705722317145 827142 '}
2024-09-11 16:09:26,262 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:09:26,834 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:09:26,835 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer lolK0RskMorcvBWZu1zJDAJkZ5E0'}"}
2024-09-11 16:09:26,836 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTYwOTI2', 'Timestamp': '20240911160926', 'CheckoutRequestID': 'ws_CO_11092024190904705722317145'}"}
2024-09-11 16:09:26,837 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:09:27,613 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 16:09:27,613 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585056491556', 'CheckoutRequestID': 'ws_CO_11092024190904705722317145', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024190904705722317145 827142"}
2024-09-11 16:09:27,746 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 16:09:27,990 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 16:09:27,992 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 16:09:28,214 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 16:09:35,895 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:09:36,071 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:09:36,072 - INFO - there is a test coming
2024-09-11 16:09:36,072 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 16:09:36,130 - INFO - {'updated_data': 'the data is now as 254713788543'}
2024-09-11 16:09:36,131 - INFO - the data is now as 254713788543
2024-09-11 16:09:36,152 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 16:09:36,152 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 16:09:36,153 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:09:36,816 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:09:36,818 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 9A3YUtFWldljlWeXIb5JG1QHqQy0'}"}
2024-09-11 16:09:36,818 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTYwOTM2', 'Timestamp': '20240911160936', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254713788543', 'PartyB': 827142, 'PhoneNumber': '254713788543', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-12759', 'TransactionDesc': 'Some payment'}
2024-09-11 16:09:36,819 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:09:42,933 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 16:09:42,939 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89472454', 'CheckoutRequestID': 'ws_CO_11092024190937357713788543', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 16:09:52,017 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171566008', 'CheckoutRequestID': 'ws_CO_11092024190944280791219201', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB09AJ7HS'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911190951}, {'Name': 'PhoneNumber', 'Value': 254791219201}]}}}}"}
2024-09-11 16:09:52,017 - INFO - {'updated_data': 'callback data began'}
2024-09-11 16:09:52,017 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171566008', 'CheckoutRequestID': 'ws_CO_11092024190944280791219201', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB09AJ7HS'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911190951}, {'Name': 'PhoneNumber', 'Value': 254791219201}]}}}}}
2024-09-11 16:09:52,203 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 16:09:52,602 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 16:09:52,603 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 16:09:52,841 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 16:25:32,851 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077501196', 'CheckoutRequestID': 'ws_CO_11092024192521009722306726', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 50000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB19EBQ3N'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911192531}, {'Name': 'PhoneNumber', 'Value': 254722306726}]}}}}"}
2024-09-11 16:25:32,852 - INFO - {'updated_data': 'callback data began'}
2024-09-11 16:25:32,856 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077501196', 'CheckoutRequestID': 'ws_CO_11092024192521009722306726', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 50000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB19EBQ3N'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911192531}, {'Name': 'PhoneNumber', 'Value': 254722306726}]}}}}}
2024-09-11 16:25:33,047 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 16:25:33,569 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 16:25:33,570 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 16:25:33,822 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 16:27:38,284 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:27:38,450 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:27:38,451 - INFO - there is a test coming
2024-09-11 16:27:38,451 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 16:27:38,503 - INFO - {'updated_data': 'the data is now as 254722211052'}
2024-09-11 16:27:38,503 - INFO - the data is now as 254722211052
2024-09-11 16:27:38,531 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 16:27:38,532 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 16:27:38,534 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:27:39,341 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:27:39,343 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Kb8QdWE94abSRZACHIFCmThbIOpi'}"}
2024-09-11 16:27:39,343 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTYyNzM5', 'Timestamp': '20240911162739', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '20000', 'PartyA': '254722211052', 'PartyB': 899885, 'PhoneNumber': '254722211052', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054493', 'TransactionDesc': 'Some payment'}
2024-09-11 16:27:39,344 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:27:40,220 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 16:27:40,227 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077504427', 'CheckoutRequestID': 'ws_CO_11092024192739904722211052', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 16:31:27,255 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172324476', 'CheckoutRequestID': 'ws_CO_11092024193119397722726884', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB19FRM8F'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911193126}, {'Name': 'PhoneNumber', 'Value': 254722726884}]}}}}"}
2024-09-11 16:31:27,255 - INFO - {'updated_data': 'callback data began'}
2024-09-11 16:31:27,255 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172324476', 'CheckoutRequestID': 'ws_CO_11092024193119397722726884', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB19FRM8F'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911193126}, {'Name': 'PhoneNumber', 'Value': 254722726884}]}}}}}
2024-09-11 16:31:27,439 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 16:31:27,972 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 16:31:27,974 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 16:31:28,577 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 16:31:30,647 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:31:30,841 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:31:30,842 - INFO - {'updated': 'initiated stk query for ws_CO_11092024193119397722726884 899885 '}
2024-09-11 16:31:30,921 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:31:31,721 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:31:31,724 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer EFteiLu8GDznqaGdzcAwnt3IotOa'}"}
2024-09-11 16:31:31,724 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTYzMTMw', 'Timestamp': '20240911163130', 'CheckoutRequestID': 'ws_CO_11092024193119397722726884'}"}
2024-09-11 16:31:31,725 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:31:32,453 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 16:31:32,454 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172324476', 'CheckoutRequestID': 'ws_CO_11092024193119397722726884', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024193119397722726884 899885"}
2024-09-11 16:31:32,609 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 16:31:32,870 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 16:31:32,871 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 16:31:33,563 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 16:31:52,106 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:31:52,268 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:31:52,269 - INFO - there is a test coming
2024-09-11 16:31:52,269 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 16:31:52,313 - INFO - {'updated_data': 'the data is now as 254722726884'}
2024-09-11 16:31:52,313 - INFO - the data is now as 254722726884
2024-09-11 16:31:52,331 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 16:31:52,332 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 16:31:52,333 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:31:53,054 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:31:53,056 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer l6tglrHnbEpfoKBZm6G6xAOQFVSv'}"}
2024-09-11 16:31:53,056 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTYzMTUz', 'Timestamp': '20240911163153', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254722726884', 'PartyB': 899885, 'PhoneNumber': '254722726884', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054524', 'TransactionDesc': 'Some payment'}
2024-09-11 16:31:53,057 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:31:53,942 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 16:31:53,949 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171836148', 'CheckoutRequestID': 'ws_CO_11092024193153700722726884', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 16:32:30,394 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171598594', 'CheckoutRequestID': 'ws_CO_11092024193221204722726884', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB39G0TS1'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911193229}, {'Name': 'PhoneNumber', 'Value': 254722726884}]}}}}"}
2024-09-11 16:32:30,395 - INFO - {'updated_data': 'callback data began'}
2024-09-11 16:32:30,395 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171598594', 'CheckoutRequestID': 'ws_CO_11092024193221204722726884', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB39G0TS1'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911193229}, {'Name': 'PhoneNumber', 'Value': 254722726884}]}}}}}
2024-09-11 16:32:30,553 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 16:32:30,781 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 16:32:30,783 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 16:32:31,135 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 16:32:32,497 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:32:32,668 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:32:32,669 - INFO - {'updated': 'initiated stk query for ws_CO_11092024193221204722726884 899885 '}
2024-09-11 16:32:32,733 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:32:33,444 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:32:33,446 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 2wgdnb0a1JORCMUVUEnOktAGdlTA'}"}
2024-09-11 16:32:33,447 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTYzMjMy', 'Timestamp': '20240911163232', 'CheckoutRequestID': 'ws_CO_11092024193221204722726884'}"}
2024-09-11 16:32:33,448 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:32:34,125 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 16:32:34,125 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171598594', 'CheckoutRequestID': 'ws_CO_11092024193221204722726884', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024193221204722726884 899885"}
2024-09-11 16:32:34,269 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 16:32:34,469 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 16:32:34,471 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 16:32:34,710 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 16:35:40,441 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:35:40,593 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:35:40,595 - INFO - {'updated': 'initiated stk query for ws_CO_11092024193516755723778155 827142 '}
2024-09-11 16:35:40,668 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:35:41,510 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:35:41,512 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer UgElkyys8CGv1PECvbuNt4PT2NlS'}"}
2024-09-11 16:35:41,512 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTYzNTQw', 'Timestamp': '20240911163540', 'CheckoutRequestID': 'ws_CO_11092024193516755723778155'}"}
2024-09-11 16:35:41,513 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:35:42,206 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 16:35:42,207 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585056587296', 'CheckoutRequestID': 'ws_CO_11092024193516755723778155', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024193516755723778155 827142"}
2024-09-11 16:35:42,350 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 16:35:42,907 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 16:35:42,908 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 16:35:43,170 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 16:38:13,980 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:38:14,123 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:38:14,124 - INFO - there is a test coming
2024-09-11 16:38:14,124 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 16:38:14,211 - INFO - {'updated_data': 'the data is now as 254724586093'}
2024-09-11 16:38:14,211 - INFO - the data is now as 254724586093
2024-09-11 16:38:14,255 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 16:38:14,256 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 16:38:14,257 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:38:14,833 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:38:14,835 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer xAGxAnCx7o4wjAYIGaKjArMOMWYR'}"}
2024-09-11 16:38:14,835 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTYzODE0', 'Timestamp': '20240911163814', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254724586093', 'PartyB': 899885, 'PhoneNumber': '254724586093', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054553', 'TransactionDesc': 'Some payment'}
2024-09-11 16:38:14,836 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:38:15,843 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 16:38:15,849 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585056599085', 'CheckoutRequestID': 'ws_CO_11092024193815490724586093', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 16:42:49,067 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:42:49,270 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:42:49,270 - INFO - there is a test coming
2024-09-11 16:42:49,270 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 16:42:49,319 - INFO - {'updated_data': 'the data is now as 254722693018'}
2024-09-11 16:42:49,320 - INFO - the data is now as 254722693018
2024-09-11 16:42:49,338 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 16:42:49,338 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 16:42:49,339 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:42:49,967 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:42:49,969 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer xlJP3qw4afM6sFkZ0S6K0GvuYVjg'}"}
2024-09-11 16:42:49,970 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTY0MjQ5', 'Timestamp': '20240911164249', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254722693018', 'PartyB': 899885, 'PhoneNumber': '254722693018', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054554', 'TransactionDesc': 'Some payment'}
2024-09-11 16:42:49,978 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:42:50,855 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 16:42:50,861 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3183146947', 'CheckoutRequestID': 'ws_CO_11092024194250539722693018', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 16:43:02,214 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:43:02,374 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:43:02,375 - INFO - {'updated': 'initiated stk query for ws_CO_11092024194250539722693018 899885 '}
2024-09-11 16:43:02,441 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:43:03,016 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:43:03,018 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer mpVLnkZg9VCn7yXL4nObKIMIqRok'}"}
2024-09-11 16:43:03,018 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTY0MzAy', 'Timestamp': '20240911164302', 'CheckoutRequestID': 'ws_CO_11092024194250539722693018'}"}
2024-09-11 16:43:03,020 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:43:03,686 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 16:43:03,687 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024194250539722693018', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024194250539722693018 899885"}
2024-09-11 16:43:03,689 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 16:43:39,837 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:43:40,002 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:43:40,002 - INFO - there is a test coming
2024-09-11 16:43:40,002 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 16:43:40,043 - INFO - {'updated_data': 'the data is now as 254799792044'}
2024-09-11 16:43:40,044 - INFO - the data is now as 254799792044
2024-09-11 16:43:40,060 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 16:43:40,060 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 16:43:40,061 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:43:40,637 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:43:40,639 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer RwI3sDn1aYGpXeN9EIqgLuYzF34W'}"}
2024-09-11 16:43:40,640 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTY0MzQw', 'Timestamp': '20240911164340', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '700', 'PartyA': '254799792044', 'PartyB': 827142, 'PhoneNumber': '254799792044', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-52806', 'TransactionDesc': 'Some payment'}
2024-09-11 16:43:40,641 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:43:42,052 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 16:43:42,059 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171854928', 'CheckoutRequestID': 'ws_CO_11092024194341206799792044', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 16:43:49,675 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171854928', 'CheckoutRequestID': 'ws_CO_11092024194341206799792044', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 700.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB89IOCHS'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911194348}, {'Name': 'PhoneNumber', 'Value': 254799792044}]}}}}"}
2024-09-11 16:43:49,675 - INFO - {'updated_data': 'callback data began'}
2024-09-11 16:43:49,675 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171854928', 'CheckoutRequestID': 'ws_CO_11092024194341206799792044', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 700.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB89IOCHS'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911194348}, {'Name': 'PhoneNumber', 'Value': 254799792044}]}}}}}
2024-09-11 16:43:49,844 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 16:43:50,044 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 16:43:50,046 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 16:43:50,268 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 16:43:53,394 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:43:53,569 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:43:53,570 - INFO - there is a test coming
2024-09-11 16:43:53,570 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 16:43:53,620 - INFO - {'updated_data': 'the data is now as 254729272468'}
2024-09-11 16:43:53,621 - INFO - the data is now as 254729272468
2024-09-11 16:43:53,639 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 16:43:53,639 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 16:43:53,640 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:43:54,295 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:43:54,304 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer lxVzS1iBTGMPB8G7FF7IZ8SDb9qX'}"}
2024-09-11 16:43:54,308 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTY0MzU0', 'Timestamp': '20240911164354', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '50000', 'PartyA': '254729272468', 'PartyB': 899885, 'PhoneNumber': '254729272468', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Order No . 13042', 'TransactionDesc': 'Some payment'}
2024-09-11 16:43:54,310 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:43:55,127 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 16:43:55,135 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171616887', 'CheckoutRequestID': 'ws_CO_11092024194354858729272468', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 16:44:16,154 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:44:16,309 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:44:16,309 - INFO - {'updated': 'initiated stk query for ws_CO_11092024194354858729272468 899885 '}
2024-09-11 16:44:16,373 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:44:17,356 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:44:17,357 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer VBW25zx19xj3kXxyBQ9SzGBKZCTO'}"}
2024-09-11 16:44:17,358 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTY0NDE2', 'Timestamp': '20240911164416', 'CheckoutRequestID': 'ws_CO_11092024194354858729272468'}"}
2024-09-11 16:44:17,359 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:44:18,104 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 16:44:18,104 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171616887', 'CheckoutRequestID': 'ws_CO_11092024194354858729272468', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024194354858729272468 899885"}
2024-09-11 16:44:18,249 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 16:44:18,501 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 16:44:18,502 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 16:44:19,119 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 16:48:03,627 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:48:03,790 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:48:03,797 - INFO - {'updated': 'initiated stk query for ws_CO_11092024194750571115052081 827142 '}
2024-09-11 16:48:03,860 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:48:04,547 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:48:04,549 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer pSeoQT0kf9YEdVAnKHxPtj9mLYZ3'}"}
2024-09-11 16:48:04,550 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTY0ODAz', 'Timestamp': '20240911164803', 'CheckoutRequestID': 'ws_CO_11092024194750571115052081'}"}
2024-09-11 16:48:04,551 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:48:05,288 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 16:48:05,288 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5910585297', 'CheckoutRequestID': 'ws_CO_11092024194750571115052081', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024194750571115052081 827142"}
2024-09-11 16:48:05,414 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 16:48:05,600 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 16:48:05,602 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 16:48:05,835 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 17:05:17,921 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:05:18,082 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:05:18,083 - INFO - {'updated': 'initiated stk query for ws_CO_11092024200506501700382870 899885 '}
2024-09-11 17:05:18,144 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:05:18,868 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:05:18,872 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer O8nXzvtTNR7tftC2AHau6iJXS9kZ'}"}
2024-09-11 17:05:18,878 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTcwNTE4', 'Timestamp': '20240911170518', 'CheckoutRequestID': 'ws_CO_11092024200506501700382870'}"}
2024-09-11 17:05:18,879 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:05:19,550 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 17:05:19,550 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024200506501700382870', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024200506501700382870 899885"}
2024-09-11 17:05:19,552 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 17:05:37,983 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:05:38,138 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:05:38,154 - INFO - there is a test coming
2024-09-11 17:05:38,154 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 17:05:38,204 - INFO - {'updated_data': 'the data is now as 254721153278'}
2024-09-11 17:05:38,204 - INFO - the data is now as 254721153278
2024-09-11 17:05:38,233 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 17:05:38,234 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 17:05:38,235 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:05:38,956 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:05:38,959 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer dxZTNeKcIfZkqCzseSLCrUQQpZW3'}"}
2024-09-11 17:05:38,959 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTcwNTM4', 'Timestamp': '20240911170538', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254721153278', 'PartyB': 899885, 'PhoneNumber': '254721153278', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054527', 'TransactionDesc': 'Some payment'}
2024-09-11 17:05:38,961 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:05:39,708 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 17:05:39,715 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172381177', 'CheckoutRequestID': 'ws_CO_11092024200539516721153278', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 17:06:01,994 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:06:02,006 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 17:06:02,006 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 17:09:40,704 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:09:40,914 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:09:40,915 - INFO - {'updated': 'initiated stk query for ws_CO_11092024200929092725282252 899885 '}
2024-09-11 17:09:40,978 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:09:41,555 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:09:41,557 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer eXOBYv4ABZ82h3fYGdMvwzRfFAUP'}"}
2024-09-11 17:09:41,558 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTcwOTQw', 'Timestamp': '20240911170940', 'CheckoutRequestID': 'ws_CO_11092024200929092725282252'}"}
2024-09-11 17:09:41,559 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:09:42,319 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 389
2024-09-11 17:09:42,320 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171898588', 'CheckoutRequestID': 'ws_CO_11092024200929092725282252', 'ResultCode': '1', 'ResultDesc': 'The balance is insufficient for the transaction.'} for ws_CO_11092024200929092725282252 899885"}
2024-09-11 17:09:42,578 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 17:09:42,779 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 17:09:42,781 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 17:09:42,996 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 17:14:32,621 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:14:32,798 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:14:32,799 - INFO - there is a test coming
2024-09-11 17:14:32,799 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 17:14:32,868 - INFO - {'updated_data': 'the data is now as 254720970193'}
2024-09-11 17:14:32,868 - INFO - the data is now as 254720970193
2024-09-11 17:14:32,891 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 17:14:32,891 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 17:14:32,892 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:14:33,492 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:14:33,494 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer TQ8fme1uc8NtVXUIXhvhUK0k8nOI'}"}
2024-09-11 17:14:33,495 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTcxNDMz', 'Timestamp': '20240911171433', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254720970193', 'PartyB': 827142, 'PhoneNumber': '254720970193', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-30171', 'TransactionDesc': 'Some payment'}
2024-09-11 17:14:33,496 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:14:34,587 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 17:14:34,593 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077581330', 'CheckoutRequestID': 'ws_CO_11092024201434084720970193', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 17:15:59,345 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:15:59,512 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:15:59,513 - INFO - there is a test coming
2024-09-11 17:15:59,513 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 17:15:59,563 - INFO - {'updated_data': 'the data is now as 254721385140'}
2024-09-11 17:15:59,563 - INFO - the data is now as 254721385140
2024-09-11 17:15:59,581 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 17:15:59,581 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 17:15:59,582 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:16:00,345 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:16:00,348 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer nBBu5QkRr9gIrHEAGhSgBvXVDP0V'}"}
2024-09-11 17:16:00,348 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTcxNjAw', 'Timestamp': '20240911171600', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '12000', 'PartyA': '254721385140', 'PartyB': 899885, 'PhoneNumber': '254721385140', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054560', 'TransactionDesc': 'Some payment'}
2024-09-11 17:16:00,349 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:16:01,384 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 17:16:01,391 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89576532', 'CheckoutRequestID': 'ws_CO_11092024201600998721385140', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 17:16:13,463 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:16:13,574 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:16:13,575 - INFO - {'updated': 'initiated stk query for ws_CO_11092024201600998721385140 899885 '}
2024-09-11 17:16:13,648 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:16:14,253 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:16:14,256 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer B7GJxiPBvBN8l0h591iwWEhuSGdY'}"}
2024-09-11 17:16:14,256 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTcxNjEz', 'Timestamp': '20240911171613', 'CheckoutRequestID': 'ws_CO_11092024201600998721385140'}"}
2024-09-11 17:16:14,257 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:16:14,975 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 17:16:14,976 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024201600998721385140', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024201600998721385140 899885"}
2024-09-11 17:16:14,978 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 17:17:03,775 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3183279150', 'CheckoutRequestID': 'ws_CO_11092024201650960720970193', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB09PPPZQ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911201703}, {'Name': 'PhoneNumber', 'Value': 254720970193}]}}}}"}
2024-09-11 17:17:03,775 - INFO - {'updated_data': 'callback data began'}
2024-09-11 17:17:03,775 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3183279150', 'CheckoutRequestID': 'ws_CO_11092024201650960720970193', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB09PPPZQ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911201703}, {'Name': 'PhoneNumber', 'Value': 254720970193}]}}}}}
2024-09-11 17:17:03,936 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 17:17:04,155 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 17:17:04,157 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 17:17:04,386 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 17:18:14,819 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:18:15,009 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:18:15,010 - INFO - there is a test coming
2024-09-11 17:18:15,010 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 17:18:15,077 - INFO - {'updated_data': 'the data is now as 254728511771'}
2024-09-11 17:18:15,077 - INFO - the data is now as 254728511771
2024-09-11 17:18:15,105 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 17:18:15,105 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 17:18:15,106 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:18:15,686 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:18:15,692 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer WowGbAyiufvgCjzE6m5YjRrYi59B'}"}
2024-09-11 17:18:15,692 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTcxODE1', 'Timestamp': '20240911171815', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254728511771', 'PartyB': 827142, 'PhoneNumber': '254728511771', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-12478', 'TransactionDesc': 'Some payment'}
2024-09-11 17:18:15,698 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:18:16,527 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 17:18:16,534 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171673109', 'CheckoutRequestID': 'ws_CO_11092024201816236728511771', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 17:19:29,988 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:19:30,162 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:19:30,163 - INFO - there is a test coming
2024-09-11 17:19:30,163 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 17:19:30,203 - INFO - {'updated_data': 'the data is now as 254701576474'}
2024-09-11 17:19:30,203 - INFO - the data is now as 254701576474
2024-09-11 17:19:30,218 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 17:19:30,218 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 17:19:30,219 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:19:30,798 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:19:30,799 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Jj2WMmAnGr87z0FMlMEoUqXBmMkL'}"}
2024-09-11 17:19:30,800 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTcxOTMw', 'Timestamp': '20240911171930', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254701576474', 'PartyB': 899885, 'PhoneNumber': '254701576474', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054529', 'TransactionDesc': 'Some payment'}
2024-09-11 17:19:30,801 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:19:31,616 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 17:19:31,633 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171674953', 'CheckoutRequestID': 'ws_CO_11092024201931310701576474', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 17:19:42,716 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:19:42,844 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:19:42,845 - INFO - {'updated': 'initiated stk query for ws_CO_11092024201931310701576474 899885 '}
2024-09-11 17:19:42,912 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:19:43,496 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:19:43,498 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer aGtFuw1np5ukafMW9tl6V4M2ciSd'}"}
2024-09-11 17:19:43,499 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTcxOTQy', 'Timestamp': '20240911171942', 'CheckoutRequestID': 'ws_CO_11092024201931310701576474'}"}
2024-09-11 17:19:43,500 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:19:44,144 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 17:19:44,145 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171674953', 'CheckoutRequestID': 'ws_CO_11092024201931310701576474', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024201931310701576474 899885"}
2024-09-11 17:19:44,276 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 17:19:44,467 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 17:19:44,468 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 17:19:44,678 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 17:25:51,115 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b520816980', 'CheckoutRequestID': 'ws_CO_11092024202537910745450548', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB19RF9ZB'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911202550}, {'Name': 'PhoneNumber', 'Value': 254745450548}]}}}}"}
2024-09-11 17:25:51,115 - INFO - {'updated_data': 'callback data began'}
2024-09-11 17:25:51,115 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b520816980', 'CheckoutRequestID': 'ws_CO_11092024202537910745450548', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB19RF9ZB'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911202550}, {'Name': 'PhoneNumber', 'Value': 254745450548}]}}}}}
2024-09-11 17:25:51,289 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 17:25:51,667 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 17:25:51,668 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 17:25:51,888 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 17:28:37,539 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:28:37,732 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:28:37,732 - INFO - there is a test coming
2024-09-11 17:28:37,733 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 17:28:37,783 - INFO - {'updated_data': 'the data is now as 254707302043'}
2024-09-11 17:28:37,783 - INFO - the data is now as 254707302043
2024-09-11 17:28:37,800 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 17:28:37,800 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 17:28:37,801 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:28:43,422 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:28:43,424 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer G3cANX4qjALfRUw5Kdi5VGSiLnVU'}"}
2024-09-11 17:28:43,425 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTcyODQz', 'Timestamp': '20240911172843', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '4015', 'PartyA': '254707302043', 'PartyB': 827142, 'PhoneNumber': '254707302043', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '137-7496', 'TransactionDesc': 'Some payment'}
2024-09-11 17:28:43,426 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:28:44,778 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 17:28:44,784 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172425147', 'CheckoutRequestID': 'ws_CO_11092024202843963707302043', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 17:32:15,454 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:32:15,623 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:32:15,624 - INFO - {'updated': 'initiated stk query for ws_CO_11092024203112756722719403 899885 '}
2024-09-11 17:32:15,692 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:32:16,375 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:32:16,378 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer fyeLBvSfHcJZrGrTHP9TAh03J2Oi'}"}
2024-09-11 17:32:16,378 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTczMjE1', 'Timestamp': '20240911173215', 'CheckoutRequestID': 'ws_CO_11092024203112756722719403'}"}
2024-09-11 17:32:16,379 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:32:43,094 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 404 174
2024-09-11 17:32:43,095 - INFO - {'updated': "Received response {'requestId': '', 'errorCode': '404.001.03', 'errorMessage': 'Invalid Access Token'} for ws_CO_11092024203112756722719403 899885"}
2024-09-11 17:32:43,097 - WARNING - Not Found: /api/v1/stk/query/
2024-09-11 17:33:39,932 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:33:40,106 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:33:40,107 - INFO - {'updated': 'initiated stk query for ws_CO_11092024203318399721153278 827142 '}
2024-09-11 17:33:40,175 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:33:40,842 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:33:40,844 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer p2JCdvnVdGRniniXR109GMxsp8Gz'}"}
2024-09-11 17:33:40,845 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTczMzQw', 'Timestamp': '20240911173340', 'CheckoutRequestID': 'ws_CO_11092024203318399721153278'}"}
2024-09-11 17:33:40,846 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:34:03,613 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 17:34:03,615 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171709504', 'CheckoutRequestID': 'ws_CO_11092024203318399721153278', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024203318399721153278 827142"}
2024-09-11 17:34:03,734 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 17:34:03,916 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 17:34:03,917 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 17:34:04,143 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 17:34:05,608 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:34:05,784 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:34:05,785 - INFO - there is a test coming
2024-09-11 17:34:05,785 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 17:34:05,840 - INFO - {'updated_data': 'the data is now as 254708464398'}
2024-09-11 17:34:05,840 - INFO - the data is now as 254708464398
2024-09-11 17:34:05,856 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 17:34:05,856 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 17:34:05,857 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:34:11,411 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:34:11,413 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer pbAdBvCBdOOUxPUHnlj0Q0mCPAA3'}"}
2024-09-11 17:34:11,413 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTczNDEx', 'Timestamp': '20240911173411', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254708464398', 'PartyB': 827142, 'PhoneNumber': '254708464398', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-26568', 'TransactionDesc': 'Some payment'}
2024-09-11 17:34:11,414 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:34:26,269 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 17:34:26,275 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b10406700', 'CheckoutRequestID': 'ws_CO_11092024203423099708464398', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 17:40:29,229 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:40:29,398 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:40:29,398 - INFO - {'updated': 'initiated stk query for ws_CO_11092024204017927723593144 899885 '}
2024-09-11 17:40:29,455 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:40:30,201 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:40:30,202 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer C9Rkr9XHLoDgv2cHQGIv3PMst7nV'}"}
2024-09-11 17:40:30,203 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTc0MDI5', 'Timestamp': '20240911174029', 'CheckoutRequestID': 'ws_CO_11092024204017927723593144'}"}
2024-09-11 17:40:30,203 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:40:31,146 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 17:40:31,147 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3183368080', 'CheckoutRequestID': 'ws_CO_11092024204017927723593144', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024204017927723593144 899885"}
2024-09-11 17:40:31,280 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 17:40:31,628 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 17:40:31,630 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 17:40:32,006 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 17:43:01,929 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b520887004', 'CheckoutRequestID': 'ws_CO_11092024204249816722320392', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB19UMS2F'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911204301}, {'Name': 'PhoneNumber', 'Value': 254722320392}]}}}}"}
2024-09-11 17:43:01,929 - INFO - {'updated_data': 'callback data began'}
2024-09-11 17:43:01,930 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b520887004', 'CheckoutRequestID': 'ws_CO_11092024204249816722320392', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB19UMS2F'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911204301}, {'Name': 'PhoneNumber', 'Value': 254722320392}]}}}}}
2024-09-11 17:43:02,104 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 17:43:02,396 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 17:43:02,398 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 17:43:02,782 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 17:43:05,614 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:43:05,758 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:43:05,759 - INFO - {'updated': 'initiated stk query for ws_CO_11092024204249816722320392 899885 '}
2024-09-11 17:43:05,818 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:43:06,571 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:43:06,573 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer EY41NSffstLLOmcA19ADSHzg06cy'}"}
2024-09-11 17:43:06,573 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTc0MzA1', 'Timestamp': '20240911174305', 'CheckoutRequestID': 'ws_CO_11092024204249816722320392'}"}
2024-09-11 17:43:06,574 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:43:07,451 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 17:43:07,452 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b520887004', 'CheckoutRequestID': 'ws_CO_11092024204249816722320392', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024204249816722320392 899885"}
2024-09-11 17:43:07,602 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 17:43:08,921 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 17:43:08,922 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 17:43:09,290 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 17:43:13,008 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:43:13,130 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:43:13,131 - INFO - {'updated': 'initiated stk query for ws_CO_11092024204249816722320392 899885 '}
2024-09-11 17:43:13,190 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:43:13,956 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:43:13,958 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer mTsmIlzoO4WZRMB2fCtPI1RlzYGS'}"}
2024-09-11 17:43:13,959 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTc0MzEz', 'Timestamp': '20240911174313', 'CheckoutRequestID': 'ws_CO_11092024204249816722320392'}"}
2024-09-11 17:43:13,960 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:43:14,858 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 17:43:14,859 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b520887004', 'CheckoutRequestID': 'ws_CO_11092024204249816722320392', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024204249816722320392 899885"}
2024-09-11 17:43:14,991 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 17:43:15,602 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 17:43:15,603 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 17:43:15,956 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 17:44:55,730 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20896619', 'CheckoutRequestID': 'ws_CO_11092024204443299724032207', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2060.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB79UYPLD'}, {'Name': 'TransactionDate', 'Value': 20240911204455}, {'Name': 'PhoneNumber', 'Value': 254724032207}]}}}}"}
2024-09-11 17:44:55,730 - INFO - {'updated_data': 'callback data began'}
2024-09-11 17:44:55,730 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20896619', 'CheckoutRequestID': 'ws_CO_11092024204443299724032207', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2060.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB79UYPLD'}, {'Name': 'TransactionDate', 'Value': 20240911204455}, {'Name': 'PhoneNumber', 'Value': 254724032207}]}}}}}
2024-09-11 17:44:59,886 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 17:45:00,201 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 17:45:00,203 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 17:45:00,794 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 17:45:12,235 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:45:12,435 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:45:12,436 - INFO - there is a test coming
2024-09-11 17:45:12,436 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 17:45:16,832 - INFO - {'updated_data': 'the data is now as 254725227531'}
2024-09-11 17:45:16,833 - INFO - the data is now as 254725227531
2024-09-11 17:45:16,883 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 17:45:16,883 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 17:45:16,885 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:45:17,673 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:45:17,675 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer qyBepBYmUZNZOKNA5zh6GL2bStBY'}"}
2024-09-11 17:45:17,675 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTc0NTE3', 'Timestamp': '20240911174517', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '4000', 'PartyA': '254725227531', 'PartyB': 827142, 'PhoneNumber': '254725227531', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-167485', 'TransactionDesc': 'Some payment'}
2024-09-11 17:45:17,676 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:45:18,668 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 17:45:32,759 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5910813702', 'CheckoutRequestID': 'ws_CO_11092024204518446725227531', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 17:46:17,803 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077653345', 'CheckoutRequestID': 'ws_CO_11092024204601196725959053', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3002.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB49V7O3K'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911204617}, {'Name': 'PhoneNumber', 'Value': 254725959053}]}}}}"}
2024-09-11 17:46:17,804 - INFO - {'updated_data': 'callback data began'}
2024-09-11 17:46:17,804 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077653345', 'CheckoutRequestID': 'ws_CO_11092024204601196725959053', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3002.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB49V7O3K'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911204617}, {'Name': 'PhoneNumber', 'Value': 254725959053}]}}}}}
2024-09-11 17:46:48,516 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 17:46:48,814 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 17:46:48,815 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 17:46:49,231 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 17:48:35,851 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:48:35,995 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:48:35,995 - INFO - there is a test coming
2024-09-11 17:48:35,996 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 17:48:36,039 - INFO - {'updated_data': 'the data is now as 254704281119'}
2024-09-11 17:48:36,040 - INFO - the data is now as 254704281119
2024-09-11 17:48:36,057 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 17:48:36,058 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 17:48:36,059 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:48:36,855 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:48:36,857 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer BFemfAGYhGj7KBCXdENlZ0JvNnmB'}"}
2024-09-11 17:48:36,857 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTc0ODM2', 'Timestamp': '20240911174836', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254704281119', 'PartyB': 827142, 'PhoneNumber': '254704281119', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-169238', 'TransactionDesc': 'Some payment'}
2024-09-11 17:48:36,859 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:48:37,889 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 17:48:37,913 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585056880824', 'CheckoutRequestID': 'ws_CO_11092024204837632704281119', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 17:48:45,588 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585056880824', 'CheckoutRequestID': 'ws_CO_11092024204837632704281119', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB19VN7L5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911204844}, {'Name': 'PhoneNumber', 'Value': 254704281119}]}}}}"}
2024-09-11 17:48:45,589 - INFO - {'updated_data': 'callback data began'}
2024-09-11 17:48:45,589 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585056880824', 'CheckoutRequestID': 'ws_CO_11092024204837632704281119', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB19VN7L5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911204844}, {'Name': 'PhoneNumber', 'Value': 254704281119}]}}}}}
2024-09-11 17:48:45,766 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 17:48:46,054 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 17:48:46,055 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 17:48:46,421 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 17:48:48,776 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:48:48,924 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:48:48,925 - INFO - {'updated': 'initiated stk query for ws_CO_11092024204837632704281119 827142 '}
2024-09-11 17:48:48,984 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:48:49,802 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:48:49,804 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer noh2g0rv4vgQ5pu3WNaWk4WcVEAz'}"}
2024-09-11 17:48:49,805 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTc0ODQ4', 'Timestamp': '20240911174848', 'CheckoutRequestID': 'ws_CO_11092024204837632704281119'}"}
2024-09-11 17:48:49,806 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:48:50,707 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 17:48:50,708 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585056880824', 'CheckoutRequestID': 'ws_CO_11092024204837632704281119', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024204837632704281119 827142"}
2024-09-11 17:48:50,844 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 17:48:51,161 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 17:48:51,163 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 17:48:51,748 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 17:59:18,684 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:59:18,864 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:59:18,865 - INFO - {'updated': 'initiated stk query for ws_CO_11092024205906577722323880 899885 '}
2024-09-11 17:59:18,939 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:59:19,813 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:59:19,815 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 2xqGKgLGqHCmHtMXzEnmOWdaSHVE'}"}
2024-09-11 17:59:19,815 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTc1OTE4', 'Timestamp': '20240911175918', 'CheckoutRequestID': 'ws_CO_11092024205906577722323880'}"}
2024-09-11 17:59:19,816 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:59:20,645 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 17:59:20,646 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077677141', 'CheckoutRequestID': 'ws_CO_11092024205906577722323880', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024205906577722323880 899885"}
2024-09-11 17:59:20,770 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 17:59:21,054 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 17:59:21,056 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 17:59:21,407 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 17:59:43,090 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5910876224', 'CheckoutRequestID': 'ws_CO_11092024205931730726366672', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 32000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB99XINR9'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911205942}, {'Name': 'PhoneNumber', 'Value': 254726366672}]}}}}"}
2024-09-11 17:59:43,090 - INFO - {'updated_data': 'callback data began'}
2024-09-11 17:59:43,091 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5910876224', 'CheckoutRequestID': 'ws_CO_11092024205931730726366672', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 32000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB99XINR9'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911205942}, {'Name': 'PhoneNumber', 'Value': 254726366672}]}}}}}
2024-09-11 17:59:43,260 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 17:59:43,746 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 17:59:43,747 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 17:59:44,105 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 17:59:44,368 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:59:44,530 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:59:44,531 - INFO - {'updated': 'initiated stk query for ws_CO_11092024205931730726366672 827142 '}
2024-09-11 17:59:44,593 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:59:45,432 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:59:45,434 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer acGYhCyG2A1mtbdCGxbibIeGAxz4'}"}
2024-09-11 17:59:45,434 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTc1OTQ0', 'Timestamp': '20240911175944', 'CheckoutRequestID': 'ws_CO_11092024205931730726366672'}"}
2024-09-11 17:59:45,436 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:59:46,255 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 17:59:46,256 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5910876224', 'CheckoutRequestID': 'ws_CO_11092024205931730726366672', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024205931730726366672 827142"}
2024-09-11 17:59:46,384 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 17:59:46,987 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 17:59:46,989 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 17:59:47,336 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 18:22:42,474 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 18:22:42,607 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 18:22:42,608 - INFO - {'updated': 'initiated stk query for ws_CO_11092024212230614710836278 899885 '}
2024-09-11 18:22:42,681 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:22:43,486 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 18:22:43,488 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer uEoLjqossqTAq8RceoewBz67dcsV'}"}
2024-09-11 18:22:43,489 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTgyMjQy', 'Timestamp': '20240911182242', 'CheckoutRequestID': 'ws_CO_11092024212230614710836278'}"}
2024-09-11 18:22:43,490 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:22:44,280 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 18:22:44,281 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024212230614710836278', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024212230614710836278 899885"}
2024-09-11 18:22:44,284 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 18:24:33,916 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 18:24:34,064 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 18:24:34,065 - INFO - there is a test coming
2024-09-11 18:24:34,065 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 18:24:34,123 - INFO - {'updated_data': 'the data is now as 254721439484'}
2024-09-11 18:24:34,123 - INFO - the data is now as 254721439484
2024-09-11 18:24:34,148 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 18:24:34,148 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 18:24:34,149 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:24:35,160 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 18:24:35,162 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer A9ZODD216jivRORcYRpMQonQ1tGh'}"}
2024-09-11 18:24:35,162 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTgyNDM1', 'Timestamp': '20240911182435', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '59452', 'PartyA': '254721439484', 'PartyB': 827142, 'PhoneNumber': '254721439484', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-50196', 'TransactionDesc': 'Some payment'}
2024-09-11 18:24:35,163 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:24:36,068 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 18:24:36,074 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b521056201', 'CheckoutRequestID': 'ws_CO_11092024212435856721439484', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 18:24:57,624 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 18:24:57,657 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 18:24:57,657 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 18:27:36,554 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077721332', 'CheckoutRequestID': 'ws_CO_11092024212727602712391562', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB0A1R57U'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911212735}, {'Name': 'PhoneNumber', 'Value': 254712391562}]}}}}"}
2024-09-11 18:27:36,558 - INFO - {'updated_data': 'callback data began'}
2024-09-11 18:27:36,558 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077721332', 'CheckoutRequestID': 'ws_CO_11092024212727602712391562', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB0A1R57U'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911212735}, {'Name': 'PhoneNumber', 'Value': 254712391562}]}}}}}
2024-09-11 18:27:36,735 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 18:27:37,022 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 18:27:37,023 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 18:27:37,707 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 18:27:41,061 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 18:27:41,233 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 18:27:41,234 - INFO - {'updated': 'initiated stk query for ws_CO_11092024212727602712391562 827142 '}
2024-09-11 18:27:41,289 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:27:42,045 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 18:27:42,047 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer WvpY8slIbuyctZFfNdSZkV4FFA9q'}"}
2024-09-11 18:27:42,048 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTgyNzQx', 'Timestamp': '20240911182741', 'CheckoutRequestID': 'ws_CO_11092024212727602712391562'}"}
2024-09-11 18:27:42,049 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:27:42,860 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 18:27:42,860 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077721332', 'CheckoutRequestID': 'ws_CO_11092024212727602712391562', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024212727602712391562 827142"}
2024-09-11 18:27:42,987 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 18:27:43,244 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 18:27:43,245 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 18:27:43,835 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 18:27:46,460 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 18:27:46,596 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 18:27:46,597 - INFO - {'updated': 'initiated stk query for ws_CO_11092024212735268720924272 899885 '}
2024-09-11 18:27:46,657 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:27:47,286 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 18:27:47,287 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer nQimmVAchRDF56afiILkWAkAFGDf'}"}
2024-09-11 18:27:47,288 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTgyNzQ2', 'Timestamp': '20240911182746', 'CheckoutRequestID': 'ws_CO_11092024212735268720924272'}"}
2024-09-11 18:27:47,289 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:27:48,040 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 18:27:48,041 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3183561402', 'CheckoutRequestID': 'ws_CO_11092024212735268720924272', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024212735268720924272 899885"}
2024-09-11 18:27:48,173 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 18:27:48,380 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 18:27:48,381 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 18:27:48,636 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 18:28:54,488 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 18:28:54,675 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 18:28:54,675 - INFO - there is a test coming
2024-09-11 18:28:54,676 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 18:28:54,719 - INFO - {'updated_data': 'the data is now as 254707025746'}
2024-09-11 18:28:54,719 - INFO - the data is now as 254707025746
2024-09-11 18:28:54,736 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 18:28:54,736 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 18:28:54,738 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:28:55,303 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 18:28:55,305 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer apzP1oWUjnchfoWGR8wP0itl5rIb'}"}
2024-09-11 18:28:55,306 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTgyODU1', 'Timestamp': '20240911182855', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '700', 'PartyA': '254707025746', 'PartyB': 899885, 'PhoneNumber': '254707025746', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054540', 'TransactionDesc': 'Some payment'}
2024-09-11 18:28:55,307 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:28:56,036 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 18:28:56,048 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172048845', 'CheckoutRequestID': 'ws_CO_11092024212855851707025746', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 18:29:11,938 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 18:29:12,073 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 18:29:12,074 - INFO - {'updated': 'initiated stk query for ws_CO_11092024212855851707025746 899885 '}
2024-09-11 18:29:12,129 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:29:12,719 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 18:29:12,721 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer WUiHRvfOG19GtkmtsNEmbGxVgY40'}"}
2024-09-11 18:29:12,722 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTgyOTEy', 'Timestamp': '20240911182912', 'CheckoutRequestID': 'ws_CO_11092024212855851707025746'}"}
2024-09-11 18:29:12,723 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:29:13,354 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 18:29:13,355 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172048845', 'CheckoutRequestID': 'ws_CO_11092024212855851707025746', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024212855851707025746 899885"}
2024-09-11 18:29:13,476 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 18:29:13,669 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 18:29:13,671 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 18:29:13,942 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 18:29:47,895 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 18:29:48,059 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 18:29:48,060 - INFO - {'updated': 'initiated stk query for ws_CO_11092024212936476796297773 899885 '}
2024-09-11 18:29:48,128 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:29:48,743 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 18:29:48,752 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Zq6jJZgF7YBJcwP2TpcLWhPCM939'}"}
2024-09-11 18:29:48,753 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTgyOTQ4', 'Timestamp': '20240911182948', 'CheckoutRequestID': 'ws_CO_11092024212936476796297773'}"}
2024-09-11 18:29:48,756 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:29:49,418 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 18:29:49,419 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89718359', 'CheckoutRequestID': 'ws_CO_11092024212936476796297773', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024212936476796297773 899885"}
2024-09-11 18:29:49,538 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 18:29:49,733 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 18:29:49,735 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 18:29:50,000 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 18:31:00,423 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 18:31:01,538 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 18:31:01,538 - INFO - there is a test coming
2024-09-11 18:31:01,538 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 18:31:01,579 - INFO - {'updated_data': 'the data is now as 254711644497'}
2024-09-11 18:31:01,580 - INFO - the data is now as 254711644497
2024-09-11 18:31:01,596 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 18:31:01,596 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 18:31:01,597 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:31:02,272 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 18:31:02,274 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer v7GpnmbQhvTuIlMfBSMGRGmAgLpJ'}"}
2024-09-11 18:31:02,274 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTgzMTAy', 'Timestamp': '20240911183102', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '250', 'PartyA': '254711644497', 'PartyB': 899885, 'PhoneNumber': '254711644497', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA008908CP-1726079458915', 'TransactionDesc': 'Some payment'}
2024-09-11 18:31:02,276 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:31:03,126 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 18:31:03,133 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc21082190', 'CheckoutRequestID': 'ws_CO_11092024213102883711644497', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 18:37:33,300 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172550054', 'CheckoutRequestID': 'ws_CO_11092024213718279726970220', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB1A34EEB'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911213732}, {'Name': 'PhoneNumber', 'Value': 254726970220}]}}}}"}
2024-09-11 18:37:33,300 - INFO - {'updated_data': 'callback data began'}
2024-09-11 18:37:33,300 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172550054', 'CheckoutRequestID': 'ws_CO_11092024213718279726970220', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB1A34EEB'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911213732}, {'Name': 'PhoneNumber', 'Value': 254726970220}]}}}}}
2024-09-11 18:37:33,472 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 18:37:33,845 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 18:37:33,847 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 18:37:34,060 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 18:38:06,466 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 18:38:06,646 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 18:38:06,647 - INFO - there is a test coming
2024-09-11 18:38:06,647 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 18:38:06,693 - INFO - {'updated_data': 'the data is now as 254706135611'}
2024-09-11 18:38:06,697 - INFO - the data is now as 254706135611
2024-09-11 18:38:06,720 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 18:38:06,721 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 18:38:06,736 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:38:07,307 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 18:38:07,310 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ofqeLAZH1ewhawUM1SvqYNgmMkgT'}"}
2024-09-11 18:38:07,311 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTgzODA3', 'Timestamp': '20240911183807', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5100', 'PartyA': '254706135611', 'PartyB': 827142, 'PhoneNumber': '254706135611', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-24909', 'TransactionDesc': 'Some payment'}
2024-09-11 18:38:07,312 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:38:08,119 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 18:38:08,126 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc21109871', 'CheckoutRequestID': 'ws_CO_11092024213807872706135611', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 18:38:17,402 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc21109871', 'CheckoutRequestID': 'ws_CO_11092024213807872706135611', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB3A37NE1'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911213816}, {'Name': 'PhoneNumber', 'Value': 254706135611}]}}}}"}
2024-09-11 18:38:17,402 - INFO - {'updated_data': 'callback data began'}
2024-09-11 18:38:17,403 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc21109871', 'CheckoutRequestID': 'ws_CO_11092024213807872706135611', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB3A37NE1'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911213816}, {'Name': 'PhoneNumber', 'Value': 254706135611}]}}}}}
2024-09-11 18:38:17,647 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 18:38:17,843 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 18:38:17,845 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 18:38:18,182 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 18:42:22,009 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 18:42:22,165 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 18:42:22,166 - INFO - {'updated': 'initiated stk query for ws_CO_11092024214208916748937138 899885 '}
2024-09-11 18:42:22,229 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:42:22,804 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 18:42:22,806 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 8US5mYYUpqKvwKyjpPi8ECaON3Hc'}"}
2024-09-11 18:42:22,807 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTg0MjIy', 'Timestamp': '20240911184222', 'CheckoutRequestID': 'ws_CO_11092024214208916748937138'}"}
2024-09-11 18:42:22,808 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:42:49,906 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 404 174
2024-09-11 18:42:49,907 - INFO - {'updated': "Received response {'requestId': '', 'errorCode': '404.001.03', 'errorMessage': 'Invalid Access Token'} for ws_CO_11092024214208916748937138 899885"}
2024-09-11 18:42:49,909 - WARNING - Not Found: /api/v1/stk/query/
2024-09-11 18:52:06,426 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 18:52:06,556 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 18:52:06,557 - INFO - there is a test coming
2024-09-11 18:52:06,557 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 18:52:06,627 - INFO - {'updated_data': 'the data is now as 254701774573'}
2024-09-11 18:52:06,627 - INFO - the data is now as 254701774573
2024-09-11 18:52:06,643 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 18:52:06,643 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 18:52:06,644 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:52:07,229 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 18:52:07,231 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer AEvMlMib6rlLAeyFTC0YqAHpAh8h'}"}
2024-09-11 18:52:07,232 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTg1MjA3', 'Timestamp': '20240911185207', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '8000', 'PartyA': '254701774573', 'PartyB': 899885, 'PhoneNumber': '254701774573', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054570', 'TransactionDesc': 'Some payment'}
2024-09-11 18:52:07,233 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:52:08,144 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 18:52:08,151 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc21163785', 'CheckoutRequestID': 'ws_CO_11092024215207883701774573', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 18:55:03,216 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc21172661', 'CheckoutRequestID': 'ws_CO_11092024215447405704477825', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB6A59U2A'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911215457}, {'Name': 'PhoneNumber', 'Value': 254704477825}]}}}}"}
2024-09-11 18:55:03,217 - INFO - {'updated_data': 'callback data began'}
2024-09-11 18:55:03,217 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc21172661', 'CheckoutRequestID': 'ws_CO_11092024215447405704477825', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB6A59U2A'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911215457}, {'Name': 'PhoneNumber', 'Value': 254704477825}]}}}}}
2024-09-11 18:55:03,383 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 18:55:03,582 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 18:55:03,631 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 18:55:03,869 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 18:55:07,084 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 18:55:07,242 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 18:55:07,242 - INFO - {'updated': 'initiated stk query for ws_CO_11092024215447405704477825 827142 '}
2024-09-11 18:55:07,310 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:55:07,909 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 18:55:07,911 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 5rmMBnmpAxuJ922ZJrDTtQ0T5ZuW'}"}
2024-09-11 18:55:07,912 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTg1NTA3', 'Timestamp': '20240911185507', 'CheckoutRequestID': 'ws_CO_11092024215447405704477825'}"}
2024-09-11 18:55:07,913 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:55:09,111 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 18:55:09,112 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc21172661', 'CheckoutRequestID': 'ws_CO_11092024215447405704477825', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024215447405704477825 827142"}
2024-09-11 18:55:09,234 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 18:55:09,433 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 18:55:09,434 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 18:55:09,663 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 18:58:52,816 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 18:58:52,995 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 18:58:52,995 - INFO - there is a test coming
2024-09-11 18:58:52,996 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 18:58:53,038 - INFO - {'updated_data': 'the data is now as 254724574034'}
2024-09-11 18:58:53,039 - INFO - the data is now as 254724574034
2024-09-11 18:58:53,061 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 18:58:53,061 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 18:58:53,063 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:58:53,769 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 18:58:53,770 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer a5E3ynVKCO9i1xrYUVr2HSvrqGA6'}"}
2024-09-11 18:58:53,771 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTg1ODUz', 'Timestamp': '20240911185853', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '20000', 'PartyA': '254724574034', 'PartyB': 827142, 'PhoneNumber': '254724574034', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-20053', 'TransactionDesc': 'Some payment'}
2024-09-11 18:58:53,772 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:58:54,339 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 500 528
2024-09-11 18:58:54,341 - INFO -  th data is {'code': 500, 'message': {'fault': {'faultstring': 'Failed to submit task to thread pool. Error = java.util.concurrent.RejectedExecutionException: Task java.util.concurrent.FutureTask@1a27547f[Not completed, task = java.util.concurrent.Executors$RunnableAdapter@344e6686[Wrapped task = com.apigee.threadpool.QueueMetricsAwareTask@42ff0df5]] rejected from java.util.concurrent.ThreadPoolExecutor@7c28a3d1[Running, pool size = 100, active threads = 100, queued tasks = 1000, completed tasks = 34182390]', 'detail': {'errorcode': 'threadpool.ExecutionFailed'}}}}
2024-09-11 18:58:54,343 - ERROR - Internal Server Error: /api/v1/stk/
2024-09-11 19:02:25,813 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077789538', 'CheckoutRequestID': 'ws_CO_11092024220210393725522727', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 6190.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB9A6486P'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911220225}, {'Name': 'PhoneNumber', 'Value': 254725522727}]}}}}"}
2024-09-11 19:02:25,813 - INFO - {'updated_data': 'callback data began'}
2024-09-11 19:02:25,813 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077789538', 'CheckoutRequestID': 'ws_CO_11092024220210393725522727', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 6190.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB9A6486P'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911220225}, {'Name': 'PhoneNumber', 'Value': 254725522727}]}}}}}
2024-09-11 19:02:25,990 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 19:02:26,189 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 19:02:26,190 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 19:02:26,415 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 19:02:31,579 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 19:02:31,711 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 19:02:31,711 - INFO - {'updated': 'initiated stk query for ws_CO_11092024220210393725522727 827142 '}
2024-09-11 19:02:31,775 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:02:32,418 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 19:02:32,420 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer AegG9H9Q26MTtuqtn1b2S2eoEUJo'}"}
2024-09-11 19:02:32,420 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTkwMjMx', 'Timestamp': '20240911190231', 'CheckoutRequestID': 'ws_CO_11092024220210393725522727'}"}
2024-09-11 19:02:32,421 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:02:33,068 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 19:02:33,069 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077789538', 'CheckoutRequestID': 'ws_CO_11092024220210393725522727', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024220210393725522727 827142"}
2024-09-11 19:02:33,213 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 19:02:33,395 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 19:02:33,396 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 19:02:33,619 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 19:02:34,629 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 19:02:34,786 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 19:02:34,786 - INFO - there is a test coming
2024-09-11 19:02:34,787 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 19:02:34,833 - INFO - {'updated_data': 'the data is now as 254722213345'}
2024-09-11 19:02:34,833 - INFO - the data is now as 254722213345
2024-09-11 19:02:34,851 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 19:02:34,851 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 19:02:34,852 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:02:35,431 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 19:02:35,433 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer fVAg7GM0bCwyTYHYhyTmtsF8KArg'}"}
2024-09-11 19:02:35,433 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTkwMjM1', 'Timestamp': '20240911190235', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3500', 'PartyA': '254722213345', 'PartyB': 827142, 'PhoneNumber': '254722213345', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-34965', 'TransactionDesc': 'Some payment'}
2024-09-11 19:02:35,435 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:02:36,190 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 19:02:36,197 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172114721', 'CheckoutRequestID': 'ws_CO_11092024220235964722213345', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 19:07:32,316 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 19:07:32,464 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 19:07:32,465 - INFO - {'updated': 'initiated stk query for ws_CO_11092024220720854702658287 827142 '}
2024-09-11 19:07:32,529 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:07:33,119 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 19:07:33,121 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 0oZmXTj3PQ8KsBRnQpgl9q5TgBxv'}"}
2024-09-11 19:07:33,122 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTkwNzMy', 'Timestamp': '20240911190732', 'CheckoutRequestID': 'ws_CO_11092024220720854702658287'}"}
2024-09-11 19:07:33,123 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:07:33,774 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 19:07:33,774 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024220720854702658287', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024220720854702658287 827142"}
2024-09-11 19:07:33,777 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 19:12:18,474 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 19:12:18,641 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 19:12:18,642 - INFO - {'updated': 'initiated stk query for ws_CO_11092024221147260726446009 899885 '}
2024-09-11 19:12:18,763 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:12:19,345 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 19:12:19,347 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer bTpWpOMbRyxjvbb6ARy00uRAvZvS'}"}
2024-09-11 19:12:19,348 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTkxMjE4', 'Timestamp': '20240911191218', 'CheckoutRequestID': 'ws_CO_11092024221147260726446009'}"}
2024-09-11 19:12:19,349 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:12:19,987 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 19:12:19,988 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5911145628', 'CheckoutRequestID': 'ws_CO_11092024221147260726446009', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024221147260726446009 899885"}
2024-09-11 19:12:20,141 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 19:12:20,333 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 19:12:20,335 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 19:12:20,572 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 19:35:24,144 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 19:35:24,282 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 19:35:24,282 - INFO - there is a test coming
2024-09-11 19:35:24,283 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 19:35:24,328 - INFO - {'updated_data': 'the data is now as 254722429830'}
2024-09-11 19:35:24,328 - INFO - the data is now as 254722429830
2024-09-11 19:35:24,344 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 19:35:24,344 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 19:35:24,345 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:35:24,911 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 19:35:24,913 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer w2302mMVyXyreKc75wQfABT8AvPu'}"}
2024-09-11 19:35:24,914 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTkzNTI0', 'Timestamp': '20240911193524', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '4585', 'PartyA': '254722429830', 'PartyB': 827142, 'PhoneNumber': '254722429830', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-34419', 'TransactionDesc': 'Some payment'}
2024-09-11 19:35:24,915 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:35:26,740 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 19:35:26,748 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172657870', 'CheckoutRequestID': 'ws_CO_11092024223525463722429830', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 19:38:21,639 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 19:38:21,816 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 19:38:21,817 - INFO - there is a test coming
2024-09-11 19:38:21,817 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 19:38:21,876 - INFO - {'updated_data': 'the data is now as 254721375851'}
2024-09-11 19:38:21,877 - INFO - the data is now as 254721375851
2024-09-11 19:38:21,894 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 19:38:21,894 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 19:38:21,895 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:38:22,471 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 19:38:22,473 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer CHeGwrT87f8UvBFCpDG7Hu5GAicQ'}"}
2024-09-11 19:38:22,474 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTkzODIy', 'Timestamp': '20240911193822', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254721375851', 'PartyB': 899885, 'PhoneNumber': '254721375851', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0626410-1726083501037', 'TransactionDesc': 'Some payment'}
2024-09-11 19:38:22,475 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:39:18,703 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 19:39:18,709 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b10870227', 'CheckoutRequestID': 'ws_CO_11092024223914603721375851', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 19:39:27,619 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585057282126', 'CheckoutRequestID': 'ws_CO_11092024223914215726037888', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB8A9FMXY'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911223926}, {'Name': 'PhoneNumber', 'Value': 254726037888}]}}}}"}
2024-09-11 19:39:27,620 - INFO - {'updated_data': 'callback data began'}
2024-09-11 19:39:27,620 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585057282126', 'CheckoutRequestID': 'ws_CO_11092024223914215726037888', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB8A9FMXY'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911223926}, {'Name': 'PhoneNumber', 'Value': 254726037888}]}}}}}
2024-09-11 19:39:27,811 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 19:39:28,027 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 19:39:28,029 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 19:39:28,265 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 19:39:30,126 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b10870227', 'CheckoutRequestID': 'ws_CO_11092024223914603721375851', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB8A9FFQ8'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911223929}, {'Name': 'PhoneNumber', 'Value': 254721375851}]}}}}"}
2024-09-11 19:39:30,127 - INFO - {'updated_data': 'callback data began'}
2024-09-11 19:39:30,127 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b10870227', 'CheckoutRequestID': 'ws_CO_11092024223914603721375851', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB8A9FFQ8'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911223929}, {'Name': 'PhoneNumber', 'Value': 254721375851}]}}}}}
2024-09-11 19:39:30,299 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 19:39:30,489 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 19:39:30,490 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 19:39:30,725 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 19:39:33,547 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 19:39:33,559 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 19:39:33,560 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 19:44:32,909 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795545298', 'CheckoutRequestID': 'ws_CO_11092024224415272723177557', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB9A9SL0L'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911224423}, {'Name': 'PhoneNumber', 'Value': 254723177557}]}}}}"}
2024-09-11 19:44:32,910 - INFO - {'updated_data': 'callback data began'}
2024-09-11 19:44:32,910 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795545298', 'CheckoutRequestID': 'ws_CO_11092024224415272723177557', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB9A9SL0L'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911224423}, {'Name': 'PhoneNumber', 'Value': 254723177557}]}}}}}
2024-09-11 19:44:33,103 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 19:44:33,288 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 19:44:33,289 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 19:44:33,510 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 19:44:36,592 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 19:44:36,713 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 19:44:36,714 - INFO - {'updated': 'initiated stk query for ws_CO_11092024224415272723177557 827142 '}
2024-09-11 19:44:36,774 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:44:37,351 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 19:44:37,352 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer wZXpbrNXJqgpXqBWxIkjSursxsi7'}"}
2024-09-11 19:44:37,353 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTk0NDM2', 'Timestamp': '20240911194436', 'CheckoutRequestID': 'ws_CO_11092024224415272723177557'}"}
2024-09-11 19:44:37,354 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:44:41,159 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 429 221
2024-09-11 19:44:41,160 - INFO - {'updated': "Received response {'fault': {'faultstring': 'Spike arrest violation. Allowed rate : MessageRate{messagesPerPeriod=25, periodInMicroseconds=1000000, maxBurstMessageCount=2.5}', 'detail': {'errorcode': 'policies.ratelimit.SpikeArrestViolation'}}} for ws_CO_11092024224415272723177557 827142"}
2024-09-11 19:44:41,163 - WARNING - Too Many Requests: /api/v1/stk/query/
2024-09-11 19:45:17,009 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 19:45:17,158 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 19:45:17,159 - INFO - {'updated': 'initiated stk query for ws_CO_11092024224430648724892594 827142 '}
2024-09-11 19:45:17,214 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:45:20,219 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 19:45:20,221 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Ke6JLJp3GLEOetE6bXjs9yMMhkt6'}"}
2024-09-11 19:45:20,221 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTk0NTE3', 'Timestamp': '20240911194517', 'CheckoutRequestID': 'ws_CO_11092024224430648724892594'}"}
2024-09-11 19:45:20,222 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:45:44,297 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 404 174
2024-09-11 19:45:44,298 - INFO - {'updated': "Received response {'requestId': '', 'errorCode': '404.001.03', 'errorMessage': 'Invalid Access Token'} for ws_CO_11092024224430648724892594 827142"}
2024-09-11 19:45:44,300 - WARNING - Not Found: /api/v1/stk/query/
2024-09-11 19:46:42,597 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5911253908', 'CheckoutRequestID': 'ws_CO_11092024224629523723177557', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB7A9Y6DF'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911224638}, {'Name': 'PhoneNumber', 'Value': 254723177557}]}}}}"}
2024-09-11 19:46:42,598 - INFO - {'updated_data': 'callback data began'}
2024-09-11 19:46:42,598 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5911253908', 'CheckoutRequestID': 'ws_CO_11092024224629523723177557', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB7A9Y6DF'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911224638}, {'Name': 'PhoneNumber', 'Value': 254723177557}]}}}}}
2024-09-11 19:46:42,759 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 19:46:42,937 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 19:46:42,938 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 19:46:43,174 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 19:49:49,419 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 19:49:49,560 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 19:49:49,561 - INFO - {'updated': 'initiated stk query for ws_CO_11092024224928245721791607 827142 '}
2024-09-11 19:49:49,631 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:49:50,486 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 19:49:50,489 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer p2W0zsnDi9rliUWNTqGsTe9EoY7L'}"}
2024-09-11 19:49:50,489 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTk0OTQ5', 'Timestamp': '20240911194949', 'CheckoutRequestID': 'ws_CO_11092024224928245721791607'}"}
2024-09-11 19:49:50,491 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:49:51,142 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 19:49:51,142 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024224928245721791607', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024224928245721791607 827142"}
2024-09-11 19:49:51,144 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 19:57:12,651 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 19:57:12,800 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 19:57:12,801 - INFO - {'updated': 'initiated stk query for ws_CO_11092024225701602741786845 899885 '}
2024-09-11 19:57:12,865 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:57:13,475 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 19:57:13,477 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer pkbz5mAqJNL5Xq3KuA58wfOmn0tZ'}"}
2024-09-11 19:57:13,477 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTk1NzEy', 'Timestamp': '20240911195712', 'CheckoutRequestID': 'ws_CO_11092024225701602741786845'}"}
2024-09-11 19:57:13,479 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:57:14,119 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 19:57:14,120 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024225701602741786845', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024225701602741786845 899885"}
2024-09-11 19:57:14,123 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 19:57:22,634 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 19:57:22,762 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 19:57:22,763 - INFO - {'updated': 'initiated stk query for ws_CO_11092024225701602741786845 899885 '}
2024-09-11 19:57:22,824 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:57:23,423 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 19:57:23,425 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer RfGxfARPqhpHAiRvNDJdmgMEYGN9'}"}
2024-09-11 19:57:23,426 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTk1NzIy', 'Timestamp': '20240911195722', 'CheckoutRequestID': 'ws_CO_11092024225701602741786845'}"}
2024-09-11 19:57:23,427 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:57:24,071 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 19:57:24,072 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b10928550', 'CheckoutRequestID': 'ws_CO_11092024225701602741786845', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024225701602741786845 899885"}
2024-09-11 19:57:24,203 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 19:57:24,391 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 19:57:24,392 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 19:57:24,634 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 19:58:20,446 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 19:58:20,612 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 19:58:20,612 - INFO - there is a test coming
2024-09-11 19:58:20,613 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 19:58:20,658 - INFO - {'updated_data': 'the data is now as 254714199810'}
2024-09-11 19:58:20,658 - INFO - the data is now as 254714199810
2024-09-11 19:58:20,674 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 19:58:20,674 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 19:58:20,675 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:58:21,239 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 19:58:21,241 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer L6duVh6EI0kAWh1pufjSMSQrjID0'}"}
2024-09-11 19:58:21,242 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTk1ODIx', 'Timestamp': '20240911195821', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '500', 'PartyA': '254714199810', 'PartyB': 899885, 'PhoneNumber': '254714199810', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054579', 'TransactionDesc': 'Some payment'}
2024-09-11 19:58:21,243 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:58:22,112 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 19:58:22,119 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171971202', 'CheckoutRequestID': 'ws_CO_11092024225821884714199810', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 19:58:33,973 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171971202', 'CheckoutRequestID': 'ws_CO_11092024225821884714199810', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB4AAPBXK'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911225833}, {'Name': 'PhoneNumber', 'Value': 254714199810}]}}}}"}
2024-09-11 19:58:33,973 - INFO - {'updated_data': 'callback data began'}
2024-09-11 19:58:33,973 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171971202', 'CheckoutRequestID': 'ws_CO_11092024225821884714199810', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB4AAPBXK'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911225833}, {'Name': 'PhoneNumber', 'Value': 254714199810}]}}}}}
2024-09-11 19:58:34,165 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 19:58:34,350 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 19:58:34,351 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 19:58:34,579 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 20:03:12,380 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585057353101', 'CheckoutRequestID': 'ws_CO_11092024230303718717269522', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1335.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB7AAZ7ZP'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911230311}, {'Name': 'PhoneNumber', 'Value': 254717269522}]}}}}"}
2024-09-11 20:03:12,380 - INFO - {'updated_data': 'callback data began'}
2024-09-11 20:03:12,380 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585057353101', 'CheckoutRequestID': 'ws_CO_11092024230303718717269522', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1335.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB7AAZ7ZP'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911230311}, {'Name': 'PhoneNumber', 'Value': 254717269522}]}}}}}
2024-09-11 20:03:12,553 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 20:03:12,955 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 20:03:12,956 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 20:03:13,186 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 20:03:15,012 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 20:03:15,160 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 20:03:15,161 - INFO - {'updated': 'initiated stk query for ws_CO_11092024230303718717269522 899885 '}
2024-09-11 20:03:15,216 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:03:15,786 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 20:03:15,788 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 7mhMhHGwiG8BHOixtfyvc4YvXe0r'}"}
2024-09-11 20:03:15,788 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMjAwMzE1', 'Timestamp': '20240911200315', 'CheckoutRequestID': 'ws_CO_11092024230303718717269522'}"}
2024-09-11 20:03:15,789 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:03:16,431 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 20:03:16,432 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585057353101', 'CheckoutRequestID': 'ws_CO_11092024230303718717269522', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024230303718717269522 899885"}
2024-09-11 20:03:16,571 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 20:03:16,762 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 20:03:16,763 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 20:03:16,984 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 20:04:24,751 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 20:04:24,938 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 20:04:24,939 - INFO - {'updated': 'initiated stk query for ws_CO_11092024230413381715763781 899885 '}
2024-09-11 20:04:25,011 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:04:25,728 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 20:04:25,730 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer txDSpQ8afVVSwDzmRbZPbx4jSvWL'}"}
2024-09-11 20:04:25,730 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMjAwNDI1', 'Timestamp': '20240911200425', 'CheckoutRequestID': 'ws_CO_11092024230413381715763781'}"}
2024-09-11 20:04:25,731 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:04:26,376 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 20:04:26,377 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b10946646', 'CheckoutRequestID': 'ws_CO_11092024230413381715763781', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024230413381715763781 899885"}
2024-09-11 20:04:26,511 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 20:04:26,696 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 20:04:26,698 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 20:04:26,922 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 20:04:42,394 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172703894', 'CheckoutRequestID': 'ws_CO_11092024230417356723997181', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB3AB274T'}, {'Name': 'TransactionDate', 'Value': 20240911230441}, {'Name': 'PhoneNumber', 'Value': 254723997181}]}}}}"}
2024-09-11 20:04:42,394 - INFO - {'updated_data': 'callback data began'}
2024-09-11 20:04:42,395 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172703894', 'CheckoutRequestID': 'ws_CO_11092024230417356723997181', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB3AB274T'}, {'Name': 'TransactionDate', 'Value': 20240911230441}, {'Name': 'PhoneNumber', 'Value': 254723997181}]}}}}}
2024-09-11 20:04:42,572 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 20:04:42,763 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 20:04:42,766 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 20:04:43,005 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 20:04:45,420 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 20:04:45,574 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 20:04:45,575 - INFO - {'updated': 'initiated stk query for ws_CO_11092024230417356723997181 827142 '}
2024-09-11 20:04:45,651 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:04:46,340 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 20:04:46,343 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 58QEMVFTTJXibmYMpM90a3ov6LGX'}"}
2024-09-11 20:04:46,343 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMjAwNDQ1', 'Timestamp': '20240911200445', 'CheckoutRequestID': 'ws_CO_11092024230417356723997181'}"}
2024-09-11 20:04:46,345 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:04:46,991 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 20:04:46,992 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172703894', 'CheckoutRequestID': 'ws_CO_11092024230417356723997181', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024230417356723997181 827142"}
2024-09-11 20:04:47,153 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 20:04:47,343 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 20:04:47,344 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 20:04:47,564 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 20:05:52,063 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5911307905', 'CheckoutRequestID': 'ws_CO_11092024230543700112469355', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 6000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB9AB45RR'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911230551}, {'Name': 'PhoneNumber', 'Value': 254112469355}]}}}}"}
2024-09-11 20:05:52,063 - INFO - {'updated_data': 'callback data began'}
2024-09-11 20:05:52,063 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5911307905', 'CheckoutRequestID': 'ws_CO_11092024230543700112469355', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 6000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB9AB45RR'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911230551}, {'Name': 'PhoneNumber', 'Value': 254112469355}]}}}}}
2024-09-11 20:05:52,226 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 20:05:52,418 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 20:05:52,420 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 20:05:52,627 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 20:05:56,196 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 20:05:56,331 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 20:05:56,332 - INFO - {'updated': 'initiated stk query for ws_CO_11092024230543700112469355 827142 '}
2024-09-11 20:05:56,423 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:05:57,011 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 20:05:57,013 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer gE4XXUQrVyCfyRGIISoTIwaWzOMf'}"}
2024-09-11 20:05:57,014 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMjAwNTU2', 'Timestamp': '20240911200556', 'CheckoutRequestID': 'ws_CO_11092024230543700112469355'}"}
2024-09-11 20:05:57,015 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:05:57,697 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 20:05:57,698 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5911307905', 'CheckoutRequestID': 'ws_CO_11092024230543700112469355', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024230543700112469355 827142"}
2024-09-11 20:05:57,831 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 20:05:58,013 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 20:05:58,015 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 20:05:58,224 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 20:13:21,691 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 20:13:21,868 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 20:13:21,869 - INFO - there is a test coming
2024-09-11 20:13:21,869 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 20:13:21,942 - INFO - {'updated_data': 'the data is now as 254721387531'}
2024-09-11 20:13:21,942 - INFO - the data is now as 254721387531
2024-09-11 20:13:21,967 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 20:13:21,967 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 20:13:21,968 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:13:22,539 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 20:13:22,541 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 6vrY4pSXH7nbCdRYAQawHGug6rwW'}"}
2024-09-11 20:13:22,542 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMjAxMzIy', 'Timestamp': '20240911201322', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254721387531', 'PartyB': 827142, 'PhoneNumber': '254721387531', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-29022', 'TransactionDesc': 'Some payment'}
2024-09-11 20:13:22,550 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:13:23,393 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 20:13:23,400 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc21414725', 'CheckoutRequestID': 'ws_CO_11092024231323113721387531', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 20:14:50,602 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 20:14:50,754 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 20:14:50,755 - INFO - there is a test coming
2024-09-11 20:14:50,755 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 20:14:50,798 - INFO - {'updated_data': 'the data is now as 254728981855'}
2024-09-11 20:14:50,798 - INFO - the data is now as 254728981855
2024-09-11 20:14:50,823 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 20:14:50,823 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 20:14:50,824 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:14:51,612 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 20:14:51,614 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer qk78bWKjGUrWqhHCwXFDFydGS7xq'}"}
2024-09-11 20:14:51,614 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMjAxNDUx', 'Timestamp': '20240911201451', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5038', 'PartyA': '254728981855', 'PartyB': 827142, 'PhoneNumber': '254728981855', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-29874', 'TransactionDesc': 'Some payment'}
2024-09-11 20:14:51,615 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:14:52,463 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 20:14:52,469 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b10974082', 'CheckoutRequestID': 'ws_CO_11092024231452250728981855', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 20:30:15,340 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 20:30:15,498 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 20:30:15,499 - INFO - {'updated': 'initiated stk query for ws_CO_11092024232951157729072439 827142 '}
2024-09-11 20:30:15,573 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:30:16,140 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 20:30:16,142 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer u4zhSVKEaYMlZUbFBwcg8Mnpvkvl'}"}
2024-09-11 20:30:16,143 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMjAzMDE1', 'Timestamp': '20240911203015', 'CheckoutRequestID': 'ws_CO_11092024232951157729072439'}"}
2024-09-11 20:30:16,144 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:30:16,770 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 429 221
2024-09-11 20:30:16,770 - INFO - {'updated': "Received response {'fault': {'faultstring': 'Spike arrest violation. Allowed rate : MessageRate{messagesPerPeriod=25, periodInMicroseconds=1000000, maxBurstMessageCount=2.5}', 'detail': {'errorcode': 'policies.ratelimit.SpikeArrestViolation'}}} for ws_CO_11092024232951157729072439 827142"}
2024-09-11 20:30:16,773 - WARNING - Too Many Requests: /api/v1/stk/query/
2024-09-11 20:31:29,454 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b521463297', 'CheckoutRequestID': 'ws_CO_11092024233115574725985175', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 20:31:29,454 - INFO - {'updated_data': 'callback data began'}
2024-09-11 20:31:29,454 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b521463297', 'CheckoutRequestID': 'ws_CO_11092024233115574725985175', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 20:31:29,644 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 20:31:29,858 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 20:31:29,859 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 20:31:30,082 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 20:33:32,130 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 20:33:32,289 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 20:33:32,290 - INFO - {'updated': 'initiated stk query for ws_CO_11092024233320845746919917 899885 '}
2024-09-11 20:33:32,345 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:33:32,910 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 20:33:32,912 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer G57jcmHLrnbM4MujrnACWURXOejs'}"}
2024-09-11 20:33:32,912 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMjAzMzMy', 'Timestamp': '20240911203332', 'CheckoutRequestID': 'ws_CO_11092024233320845746919917'}"}
2024-09-11 20:33:32,914 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:33:33,534 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 20:33:33,535 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024233320845746919917', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024233320845746919917 899885"}
2024-09-11 20:33:33,537 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 20:34:15,586 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 20:34:15,727 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 20:34:15,728 - INFO - {'updated': 'initiated stk query for ws_CO_11092024233404190725286367 899885 '}
2024-09-11 20:34:15,790 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:34:16,392 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 20:34:16,394 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer EfxxfGjNIXGQQPlv486FvKxEkCu5'}"}
2024-09-11 20:34:16,394 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMjAzNDE1', 'Timestamp': '20240911203415', 'CheckoutRequestID': 'ws_CO_11092024233404190725286367'}"}
2024-09-11 20:34:16,396 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:34:16,997 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 20:34:16,998 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024233404190725286367', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024233404190725286367 899885"}
2024-09-11 20:34:17,000 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 20:36:15,161 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 20:36:15,330 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 20:36:15,331 - INFO - {'updated': 'initiated stk query for ws_CO_11092024233603756725985175 899885 '}
2024-09-11 20:36:15,389 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:36:15,973 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 20:36:15,975 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer YZJ3JX1EWmiRXYLbkVWBNdOmaAVJ'}"}
2024-09-11 20:36:15,976 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMjAzNjE1', 'Timestamp': '20240911203615', 'CheckoutRequestID': 'ws_CO_11092024233603756725985175'}"}
2024-09-11 20:36:15,977 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:36:16,589 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 20:36:16,590 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc21478845', 'CheckoutRequestID': 'ws_CO_11092024233603756725985175', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024233603756725985175 899885"}
2024-09-11 20:36:16,715 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 20:36:16,903 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 20:36:16,907 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 20:36:17,120 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 20:36:21,000 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 20:36:21,144 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 20:36:21,145 - INFO - there is a test coming
2024-09-11 20:36:21,145 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 20:36:21,190 - INFO - {'updated_data': 'the data is now as 254746919917'}
2024-09-11 20:36:21,190 - INFO - the data is now as 254746919917
2024-09-11 20:36:21,208 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 20:36:21,208 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 20:36:21,210 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:36:21,800 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 20:36:21,802 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer wM55UYE5Wy7oVoS1aTJ80JHv8LqL'}"}
2024-09-11 20:36:21,803 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMjAzNjIx', 'Timestamp': '20240911203621', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254746919917', 'PartyB': 899885, 'PhoneNumber': '254746919917', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Order No . 13046', 'TransactionDesc': 'Some payment'}
2024-09-11 20:36:21,804 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:36:24,290 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 20:36:24,302 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585057442391', 'CheckoutRequestID': 'ws_CO_11092024233622437746919917', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 20:43:51,166 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 20:43:51,434 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 20:43:51,434 - INFO - there is a test coming
2024-09-11 20:43:51,435 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 20:43:51,478 - INFO - {'updated_data': 'the data is now as 254712941045'}
2024-09-11 20:43:51,478 - INFO - the data is now as 254712941045
2024-09-11 20:43:51,494 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 20:43:51,495 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 20:43:51,496 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:43:52,330 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 20:43:52,332 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer nHLnMSMqEpkd8S41jiCh0SKzkWz9'}"}
2024-09-11 20:43:52,332 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMjA0MzUy', 'Timestamp': '20240911204352', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254712941045', 'PartyB': 899885, 'PhoneNumber': '254712941045', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054550', 'TransactionDesc': 'Some payment'}
2024-09-11 20:43:52,334 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:43:53,114 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 20:43:53,121 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc21497013', 'CheckoutRequestID': 'ws_CO_11092024234352872712941045', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 20:58:39,131 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b521526749', 'CheckoutRequestID': 'ws_CO_11092024235809502717293985', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB0AD3K6I'}, {'Name': 'TransactionDate', 'Value': 20240911235838}, {'Name': 'PhoneNumber', 'Value': 254717293985}]}}}}"}
2024-09-11 20:58:39,139 - INFO - {'updated_data': 'callback data began'}
2024-09-11 20:58:39,139 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b521526749', 'CheckoutRequestID': 'ws_CO_11092024235809502717293985', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB0AD3K6I'}, {'Name': 'TransactionDate', 'Value': 20240911235838}, {'Name': 'PhoneNumber', 'Value': 254717293985}]}}}}}
2024-09-11 20:58:39,339 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 20:58:39,531 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 20:58:39,532 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 20:58:39,747 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 21:02:10,016 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3184030537', 'CheckoutRequestID': 'ws_CO_12092024000158982703652995', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC9AD72FH'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912000209}, {'Name': 'PhoneNumber', 'Value': 254703652995}]}}}}"}
2024-09-11 21:02:10,017 - INFO - {'updated_data': 'callback data began'}
2024-09-11 21:02:10,017 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3184030537', 'CheckoutRequestID': 'ws_CO_12092024000158982703652995', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC9AD72FH'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912000209}, {'Name': 'PhoneNumber', 'Value': 254703652995}]}}}}}
2024-09-11 21:02:10,184 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 21:02:10,385 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 21:02:10,387 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 21:02:10,619 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 23:55:20,308 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc21785261', 'CheckoutRequestID': 'ws_CO_12092024025510566727803718', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 150.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC0AFLF9U'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912025519}, {'Name': 'PhoneNumber', 'Value': 254727803718}]}}}}"}
2024-09-11 23:55:20,309 - INFO - {'updated_data': 'callback data began'}
2024-09-11 23:55:20,309 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc21785261', 'CheckoutRequestID': 'ws_CO_12092024025510566727803718', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 150.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC0AFLF9U'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912025519}, {'Name': 'PhoneNumber', 'Value': 254727803718}]}}}}}
2024-09-11 23:55:20,483 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 23:55:20,849 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 23:55:20,853 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 23:55:21,067 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 03:33:52,153 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172288927', 'CheckoutRequestID': 'ws_CO_12092024063350264723831641', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-12 03:33:52,153 - INFO - {'updated_data': 'callback data began'}
2024-09-12 03:33:52,154 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172288927', 'CheckoutRequestID': 'ws_CO_12092024063350264723831641', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-12 03:33:52,326 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 03:33:52,515 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 03:33:52,516 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 03:33:52,731 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 03:37:01,539 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077966202', 'CheckoutRequestID': 'ws_CO_12092024063651161704788500', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC6AJFRFU'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912063700}, {'Name': 'PhoneNumber', 'Value': 254704788500}]}}}}"}
2024-09-12 03:37:01,540 - INFO - {'updated_data': 'callback data began'}
2024-09-12 03:37:01,540 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077966202', 'CheckoutRequestID': 'ws_CO_12092024063651161704788500', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC6AJFRFU'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912063700}, {'Name': 'PhoneNumber', 'Value': 254704788500}]}}}}}
2024-09-12 03:37:01,699 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 03:37:02,065 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 03:37:02,066 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 03:37:02,281 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 03:37:15,431 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585057983866', 'CheckoutRequestID': 'ws_CO_12092024063701372721276174', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}"}
2024-09-12 03:37:15,432 - INFO - {'updated_data': 'callback data began'}
2024-09-12 03:37:15,432 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585057983866', 'CheckoutRequestID': 'ws_CO_12092024063701372721276174', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}}
2024-09-12 03:37:15,598 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 03:37:15,802 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 03:37:15,804 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 03:37:16,004 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 03:39:30,820 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795651676', 'CheckoutRequestID': 'ws_CO_12092024063917685721276174', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 135000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC7AJLGTR'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912063930}, {'Name': 'PhoneNumber', 'Value': 254721276174}]}}}}"}
2024-09-12 03:39:30,822 - INFO - {'updated_data': 'callback data began'}
2024-09-12 03:39:30,822 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795651676', 'CheckoutRequestID': 'ws_CO_12092024063917685721276174', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 135000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC7AJLGTR'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912063930}, {'Name': 'PhoneNumber', 'Value': 254721276174}]}}}}}
2024-09-12 03:39:30,997 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 03:39:31,176 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 03:39:31,177 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 03:39:31,395 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 03:41:40,549 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b11581009', 'CheckoutRequestID': 'ws_CO_12092024064124710700292095', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC5AJQ3TX'}, {'Name': 'TransactionDate', 'Value': 20240912064139}, {'Name': 'PhoneNumber', 'Value': 254700292095}]}}}}"}
2024-09-12 03:41:40,550 - INFO - {'updated_data': 'callback data began'}
2024-09-12 03:41:40,550 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b11581009', 'CheckoutRequestID': 'ws_CO_12092024064124710700292095', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC5AJQ3TX'}, {'Name': 'TransactionDate', 'Value': 20240912064139}, {'Name': 'PhoneNumber', 'Value': 254700292095}]}}}}}
2024-09-12 03:41:40,713 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 03:41:40,897 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 03:41:40,898 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 03:41:41,103 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 03:45:48,243 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172785976', 'CheckoutRequestID': 'ws_CO_12092024064538750798241100', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC4AK01RG'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912064547}, {'Name': 'PhoneNumber', 'Value': 254798241100}]}}}}"}
2024-09-12 03:45:48,243 - INFO - {'updated_data': 'callback data began'}
2024-09-12 03:45:48,243 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172785976', 'CheckoutRequestID': 'ws_CO_12092024064538750798241100', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC4AK01RG'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912064547}, {'Name': 'PhoneNumber', 'Value': 254798241100}]}}}}}
2024-09-12 03:45:48,418 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 03:45:48,780 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 03:45:48,781 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 03:45:48,980 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 04:03:43,748 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172799505', 'CheckoutRequestID': 'ws_CO_12092024070328783727398232', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC8ALB1AA'}, {'Name': 'TransactionDate', 'Value': 20240912070343}, {'Name': 'PhoneNumber', 'Value': 254727398232}]}}}}"}
2024-09-12 04:03:43,749 - INFO - {'updated_data': 'callback data began'}
2024-09-12 04:03:43,749 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172799505', 'CheckoutRequestID': 'ws_CO_12092024070328783727398232', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC8ALB1AA'}, {'Name': 'TransactionDate', 'Value': 20240912070343}, {'Name': 'PhoneNumber', 'Value': 254727398232}]}}}}}
2024-09-12 04:03:43,917 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 04:03:44,093 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 04:03:44,095 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 04:03:44,299 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 04:23:10,572 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc22095057', 'CheckoutRequestID': 'ws_CO_12092024072258813728747062', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC2AMYXGM'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912072309}, {'Name': 'PhoneNumber', 'Value': 254728747062}]}}}}"}
2024-09-12 04:23:10,573 - INFO - {'updated_data': 'callback data began'}
2024-09-12 04:23:10,573 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc22095057', 'CheckoutRequestID': 'ws_CO_12092024072258813728747062', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC2AMYXGM'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912072309}, {'Name': 'PhoneNumber', 'Value': 254728747062}]}}}}}
2024-09-12 04:23:10,738 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 04:23:10,926 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 04:23:10,927 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 04:23:11,131 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 04:25:06,635 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc22098683', 'CheckoutRequestID': 'ws_CO_12092024072457722728747062', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC7AN5509'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912072505}, {'Name': 'PhoneNumber', 'Value': 254728747062}]}}}}"}
2024-09-12 04:25:06,637 - INFO - {'updated_data': 'callback data began'}
2024-09-12 04:25:06,637 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc22098683', 'CheckoutRequestID': 'ws_CO_12092024072457722728747062', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC7AN5509'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912072505}, {'Name': 'PhoneNumber', 'Value': 254728747062}]}}}}}
2024-09-12 04:25:06,801 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 04:25:07,172 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 04:25:07,174 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 04:25:07,384 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 04:29:35,024 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172331312', 'CheckoutRequestID': 'ws_CO_12092024072928279722636194', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 400.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC2ANKEFU'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912072934}, {'Name': 'PhoneNumber', 'Value': 254722636194}]}}}}"}
2024-09-12 04:29:35,025 - INFO - {'updated_data': 'callback data began'}
2024-09-12 04:29:35,026 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172331312', 'CheckoutRequestID': 'ws_CO_12092024072928279722636194', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 400.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC2ANKEFU'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912072934}, {'Name': 'PhoneNumber', 'Value': 254722636194}]}}}}}
2024-09-12 04:29:35,192 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 04:29:35,372 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 04:29:35,373 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 04:29:35,587 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 04:50:04,722 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795708873', 'CheckoutRequestID': 'ws_CO_12092024074953631720966693', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC5APN29V'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912075004}, {'Name': 'PhoneNumber', 'Value': 254720966693}]}}}}"}
2024-09-12 04:50:04,723 - INFO - {'updated_data': 'callback data began'}
2024-09-12 04:50:04,723 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795708873', 'CheckoutRequestID': 'ws_CO_12092024074953631720966693', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC5APN29V'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912075004}, {'Name': 'PhoneNumber', 'Value': 254720966693}]}}}}}
2024-09-12 04:50:04,886 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 04:50:05,245 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 04:50:05,246 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 04:50:05,450 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 04:52:40,333 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795711414', 'CheckoutRequestID': 'ws_CO_12092024075231844791449999', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 12136.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC5APWHI3'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912075239}, {'Name': 'PhoneNumber', 'Value': 254791449999}]}}}}"}
2024-09-12 04:52:40,333 - INFO - {'updated_data': 'callback data began'}
2024-09-12 04:52:40,334 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795711414', 'CheckoutRequestID': 'ws_CO_12092024075231844791449999', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 12136.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC5APWHI3'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912075239}, {'Name': 'PhoneNumber', 'Value': 254791449999}]}}}}}
2024-09-12 04:52:40,497 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 04:52:40,679 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 04:52:40,681 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 04:52:40,893 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 04:53:26,230 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b522150919', 'CheckoutRequestID': 'ws_CO_12092024075315967724402928', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC9APZRVB'}, {'Name': 'TransactionDate', 'Value': 20240912075325}, {'Name': 'PhoneNumber', 'Value': 254724402928}]}}}}"}
2024-09-12 04:53:26,230 - INFO - {'updated_data': 'callback data began'}
2024-09-12 04:53:26,231 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b522150919', 'CheckoutRequestID': 'ws_CO_12092024075315967724402928', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC9APZRVB'}, {'Name': 'TransactionDate', 'Value': 20240912075325}, {'Name': 'PhoneNumber', 'Value': 254724402928}]}}}}}
2024-09-12 04:53:26,395 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 04:53:26,582 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 04:53:26,583 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 04:53:26,782 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 04:58:49,263 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b522161765', 'CheckoutRequestID': 'ws_CO_12092024075836122707536410', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC7AQKCOF'}, {'Name': 'TransactionDate', 'Value': 20240912075848}, {'Name': 'PhoneNumber', 'Value': 254707536410}]}}}}"}
2024-09-12 04:58:49,263 - INFO - {'updated_data': 'callback data began'}
2024-09-12 04:58:49,263 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b522161765', 'CheckoutRequestID': 'ws_CO_12092024075836122707536410', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC7AQKCOF'}, {'Name': 'TransactionDate', 'Value': 20240912075848}, {'Name': 'PhoneNumber', 'Value': 254707536410}]}}}}}
2024-09-12 04:58:49,427 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 04:58:49,604 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 04:58:49,606 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 04:58:49,810 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 05:00:29,976 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc22168773', 'CheckoutRequestID': 'ws_CO_12092024080022618717830539', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC6AQQUXG'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912080029}, {'Name': 'PhoneNumber', 'Value': 254717830539}]}}}}"}
2024-09-12 05:00:29,976 - INFO - {'updated_data': 'callback data began'}
2024-09-12 05:00:29,977 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc22168773', 'CheckoutRequestID': 'ws_CO_12092024080022618717830539', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC6AQQUXG'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912080029}, {'Name': 'PhoneNumber', 'Value': 254717830539}]}}}}}
2024-09-12 05:00:30,158 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 05:00:30,349 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 05:00:30,351 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 05:00:30,548 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 05:08:37,976 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f078041963', 'CheckoutRequestID': 'ws_CO_12092024080827060797078935', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC4ARN4MI'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912080837}, {'Name': 'PhoneNumber', 'Value': 254797078935}]}}}}"}
2024-09-12 05:08:37,976 - INFO - {'updated_data': 'callback data began'}
2024-09-12 05:08:37,976 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f078041963', 'CheckoutRequestID': 'ws_CO_12092024080827060797078935', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC4ARN4MI'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912080837}, {'Name': 'PhoneNumber', 'Value': 254797078935}]}}}}}
2024-09-12 05:08:38,152 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 05:08:38,514 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 05:08:38,516 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 05:08:38,722 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 05:09:49,988 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172367813', 'CheckoutRequestID': 'ws_CO_12092024080933983797078935', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC7ARS1A1'}, {'Name': 'TransactionDate', 'Value': 20240912080949}, {'Name': 'PhoneNumber', 'Value': 254797078935}]}}}}"}
2024-09-12 05:09:49,988 - INFO - {'updated_data': 'callback data began'}
2024-09-12 05:09:49,989 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172367813', 'CheckoutRequestID': 'ws_CO_12092024080933983797078935', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC7ARS1A1'}, {'Name': 'TransactionDate', 'Value': 20240912080949}, {'Name': 'PhoneNumber', 'Value': 254797078935}]}}}}}
2024-09-12 05:09:50,160 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 05:09:50,358 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 05:09:50,359 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 05:09:50,568 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 05:47:13,862 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b11827758', 'CheckoutRequestID': 'ws_CO_12092024084706511758404095', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 250.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC8AW25EA'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912084713}, {'Name': 'PhoneNumber', 'Value': 254758404095}]}}}}"}
2024-09-12 05:47:13,862 - INFO - {'updated_data': 'callback data began'}
2024-09-12 05:47:13,862 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b11827758', 'CheckoutRequestID': 'ws_CO_12092024084706511758404095', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 250.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC8AW25EA'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912084713}, {'Name': 'PhoneNumber', 'Value': 254758404095}]}}}}}
2024-09-12 05:47:14,025 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 05:47:14,209 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 05:47:14,211 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 05:47:14,419 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 05:47:18,294 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b11827832', 'CheckoutRequestID': 'ws_CO_12092024084709007713235557', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}"}
2024-09-12 05:47:18,294 - INFO - {'updated_data': 'callback data began'}
2024-09-12 05:47:18,295 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b11827832', 'CheckoutRequestID': 'ws_CO_12092024084709007713235557', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}}
2024-09-12 05:47:18,481 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 05:47:18,953 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 05:47:18,954 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 05:47:19,167 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 05:47:41,569 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f078080915', 'CheckoutRequestID': 'ws_CO_12092024084725457713235557', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 300.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC1AW43GB'}, {'Name': 'TransactionDate', 'Value': 20240912084740}, {'Name': 'PhoneNumber', 'Value': 254713235557}]}}}}"}
2024-09-12 05:47:41,571 - INFO - {'updated_data': 'callback data began'}
2024-09-12 05:47:41,571 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f078080915', 'CheckoutRequestID': 'ws_CO_12092024084725457713235557', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 300.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC1AW43GB'}, {'Name': 'TransactionDate', 'Value': 20240912084740}, {'Name': 'PhoneNumber', 'Value': 254713235557}]}}}}}
2024-09-12 05:47:41,728 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 05:47:41,922 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 05:47:41,923 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 05:47:42,144 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 05:51:25,188 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3184778144', 'CheckoutRequestID': 'ws_CO_12092024085115519719598465', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC5AWJXYH'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912085124}, {'Name': 'PhoneNumber', 'Value': 254719598465}]}}}}"}
2024-09-12 05:51:25,188 - INFO - {'updated_data': 'callback data began'}
2024-09-12 05:51:25,188 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3184778144', 'CheckoutRequestID': 'ws_CO_12092024085115519719598465', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC5AWJXYH'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912085124}, {'Name': 'PhoneNumber', 'Value': 254719598465}]}}}}}
2024-09-12 05:51:25,347 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 05:51:25,525 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 05:51:25,527 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 05:51:25,747 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 05:51:31,251 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585058249260', 'CheckoutRequestID': 'ws_CO_12092024085128950723927481', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-12 05:51:31,252 - INFO - {'updated_data': 'callback data began'}
2024-09-12 05:51:31,252 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585058249260', 'CheckoutRequestID': 'ws_CO_12092024085128950723927481', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-12 05:51:31,410 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 05:51:31,595 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 05:51:31,597 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 05:51:31,793 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 05:51:35,155 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b522281883', 'CheckoutRequestID': 'ws_CO_12092024085121466705508084', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC3AWKA7J'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912085134}, {'Name': 'PhoneNumber', 'Value': 254705508084}]}}}}"}
2024-09-12 05:51:35,159 - INFO - {'updated_data': 'callback data began'}
2024-09-12 05:51:35,159 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b522281883', 'CheckoutRequestID': 'ws_CO_12092024085121466705508084', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC3AWKA7J'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912085134}, {'Name': 'PhoneNumber', 'Value': 254705508084}]}}}}}
2024-09-12 05:51:35,327 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 05:51:35,503 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 05:51:35,505 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 05:51:35,708 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 05:52:21,566 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f078086351', 'CheckoutRequestID': 'ws_CO_12092024085219829723927481', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}"}
2024-09-12 05:52:21,566 - INFO - {'updated_data': 'callback data began'}
2024-09-12 05:52:21,566 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f078086351', 'CheckoutRequestID': 'ws_CO_12092024085219829723927481', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}}
2024-09-12 05:52:21,740 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 05:52:21,923 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 05:52:21,925 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 05:52:22,125 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 05:52:58,493 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3184781848', 'CheckoutRequestID': 'ws_CO_12092024085249865723927481', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1950.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC3AWQ2I5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912085257}, {'Name': 'PhoneNumber', 'Value': 254723927481}]}}}}"}
2024-09-12 05:52:58,494 - INFO - {'updated_data': 'callback data began'}
2024-09-12 05:52:58,494 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3184781848', 'CheckoutRequestID': 'ws_CO_12092024085249865723927481', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1950.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC3AWQ2I5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912085257}, {'Name': 'PhoneNumber', 'Value': 254723927481}]}}}}}
2024-09-12 05:52:58,671 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 05:52:58,860 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 05:52:58,862 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 05:52:59,067 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:23:48,800 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f078118493', 'CheckoutRequestID': 'ws_CO_12092024092346934718052074', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-12 06:23:48,800 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:23:48,801 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f078118493', 'CheckoutRequestID': 'ws_CO_12092024092346934718052074', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-12 06:23:48,974 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:23:49,347 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:23:49,348 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:23:49,576 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:24:07,798 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585058328683', 'CheckoutRequestID': 'ws_CO_12092024092403990718052074', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-12 06:24:07,799 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:24:07,799 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585058328683', 'CheckoutRequestID': 'ws_CO_12092024092403990718052074', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-12 06:24:07,982 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:24:08,474 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:24:08,476 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:24:08,677 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:24:24,466 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc22365763', 'CheckoutRequestID': 'ws_CO_12092024092422507718052074', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-12 06:24:24,466 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:24:24,466 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc22365763', 'CheckoutRequestID': 'ws_CO_12092024092422507718052074', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-12 06:24:24,639 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:24:24,820 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:24:24,822 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:24:25,032 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:24:27,894 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172932113', 'CheckoutRequestID': 'ws_CO_12092024092351090723868991', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-12 06:24:27,894 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:24:27,894 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172932113', 'CheckoutRequestID': 'ws_CO_12092024092351090723868991', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-12 06:24:28,062 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:24:28,265 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:24:28,266 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:24:28,481 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:31:35,195 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b11937968', 'CheckoutRequestID': 'ws_CO_12092024093133183718052074', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-12 06:31:35,196 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:31:35,196 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b11937968', 'CheckoutRequestID': 'ws_CO_12092024093133183718052074', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-12 06:31:35,377 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:31:35,767 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:31:35,768 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:31:35,983 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:36:22,607 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585058358880', 'CheckoutRequestID': 'ws_CO_12092024093550503724626448', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-12 06:36:22,608 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:36:22,609 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585058358880', 'CheckoutRequestID': 'ws_CO_12092024093550503724626448', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-12 06:36:22,776 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:36:22,960 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:36:22,961 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:36:23,168 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:36:37,823 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172456230', 'CheckoutRequestID': 'ws_CO_12092024093612038791840906', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC3B1U7VX'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912093637}, {'Name': 'PhoneNumber', 'Value': 254791840906}]}}}}"}
2024-09-12 06:36:37,824 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:36:37,824 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172456230', 'CheckoutRequestID': 'ws_CO_12092024093612038791840906', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC3B1U7VX'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912093637}, {'Name': 'PhoneNumber', 'Value': 254791840906}]}}}}}
2024-09-12 06:36:37,993 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:36:38,361 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:36:38,363 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:36:38,579 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:40:00,627 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795819429', 'CheckoutRequestID': 'ws_CO_12092024093948084797958341', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC1B2992X'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912094000}, {'Name': 'PhoneNumber', 'Value': 254797958341}]}}}}"}
2024-09-12 06:40:00,628 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:40:00,628 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795819429', 'CheckoutRequestID': 'ws_CO_12092024093948084797958341', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC1B2992X'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912094000}, {'Name': 'PhoneNumber', 'Value': 254797958341}]}}}}}
2024-09-12 06:40:00,818 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:40:01,013 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:40:01,015 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:40:01,232 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:41:18,122 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc22409437', 'CheckoutRequestID': 'ws_CO_12092024094106120768858487', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC3B2EIN5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912094117}, {'Name': 'PhoneNumber', 'Value': 254768858487}]}}}}"}
2024-09-12 06:41:18,123 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:41:18,123 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc22409437', 'CheckoutRequestID': 'ws_CO_12092024094106120768858487', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC3B2EIN5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912094117}, {'Name': 'PhoneNumber', 'Value': 254768858487}]}}}}}
2024-09-12 06:41:18,290 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:41:18,476 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:41:18,477 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:41:18,689 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:42:37,487 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc22412709', 'CheckoutRequestID': 'ws_CO_12092024094218735727676152', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}"}
2024-09-12 06:42:37,488 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:42:37,488 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc22412709', 'CheckoutRequestID': 'ws_CO_12092024094218735727676152', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}}
2024-09-12 06:42:37,664 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:42:38,044 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:42:38,046 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:42:38,249 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:42:54,969 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc22413882', 'CheckoutRequestID': 'ws_CO_12092024094245857721277518', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC1B2LG2J'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912094254}, {'Name': 'PhoneNumber', 'Value': 254721277518}]}}}}"}
2024-09-12 06:42:54,969 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:42:54,969 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc22413882', 'CheckoutRequestID': 'ws_CO_12092024094245857721277518', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC1B2LG2J'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912094254}, {'Name': 'PhoneNumber', 'Value': 254721277518}]}}}}}
2024-09-12 06:42:55,142 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:42:55,326 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:42:55,328 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:42:55,531 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:58:16,591 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172480178', 'CheckoutRequestID': 'ws_CO_12092024095814589718052074', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-12 06:58:16,594 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:58:16,594 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172480178', 'CheckoutRequestID': 'ws_CO_12092024095814589718052074', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-12 06:58:16,782 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:58:16,980 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:58:16,982 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:58:17,194 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:58:49,883 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e172243652', 'CheckoutRequestID': 'ws_CO_12092024095825456724958251', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC1B4JLO7'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912095849}, {'Name': 'PhoneNumber', 'Value': 254724958251}]}}}}"}
2024-09-12 06:58:49,884 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:58:49,884 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e172243652', 'CheckoutRequestID': 'ws_CO_12092024095825456724958251', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC1B4JLO7'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912095849}, {'Name': 'PhoneNumber', 'Value': 254724958251}]}}}}}
2024-09-12 06:58:50,049 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:58:50,229 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:58:50,231 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:58:50,465 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 07:06:46,623 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172489658', 'CheckoutRequestID': 'ws_CO_12092024100631964710888868', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC0B5HYDU'}, {'Name': 'TransactionDate', 'Value': 20240912100646}, {'Name': 'PhoneNumber', 'Value': 254710888868}]}}}}"}
2024-09-12 07:06:46,624 - INFO - {'updated_data': 'callback data began'}
2024-09-12 07:06:46,624 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172489658', 'CheckoutRequestID': 'ws_CO_12092024100631964710888868', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC0B5HYDU'}, {'Name': 'TransactionDate', 'Value': 20240912100646}, {'Name': 'PhoneNumber', 'Value': 254710888868}]}}}}}
2024-09-12 07:06:46,787 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 07:06:46,967 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 07:06:46,968 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 07:06:47,171 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 07:08:01,359 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3184972759', 'CheckoutRequestID': 'ws_CO_12092024100747439722987774', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC8B5NO5K'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912100800}, {'Name': 'PhoneNumber', 'Value': 254722987774}]}}}}"}
2024-09-12 07:08:01,361 - INFO - {'updated_data': 'callback data began'}
2024-09-12 07:08:01,361 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3184972759', 'CheckoutRequestID': 'ws_CO_12092024100747439722987774', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC8B5NO5K'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912100800}, {'Name': 'PhoneNumber', 'Value': 254722987774}]}}}}}
2024-09-12 07:08:01,527 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 07:08:01,716 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 07:08:01,718 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 07:08:01,933 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 07:10:06,475 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3184977883', 'CheckoutRequestID': 'ws_CO_12092024100947368721862319', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC9B5WWIV'}, {'Name': 'TransactionDate', 'Value': 20240912101005}, {'Name': 'PhoneNumber', 'Value': 254721862319}]}}}}"}
2024-09-12 07:10:06,476 - INFO - {'updated_data': 'callback data began'}
2024-09-12 07:10:06,476 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3184977883', 'CheckoutRequestID': 'ws_CO_12092024100947368721862319', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC9B5WWIV'}, {'Name': 'TransactionDate', 'Value': 20240912101005}, {'Name': 'PhoneNumber', 'Value': 254721862319}]}}}}}
2024-09-12 07:10:06,646 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 07:10:07,025 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 07:10:07,026 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 07:10:07,232 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 07:10:35,117 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d90163272', 'CheckoutRequestID': 'ws_CO_12092024101019376741454015', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC3B5YNHX'}, {'Name': 'TransactionDate', 'Value': 20240912101034}, {'Name': 'PhoneNumber', 'Value': 254741454015}]}}}}"}
2024-09-12 07:10:35,117 - INFO - {'updated_data': 'callback data began'}
2024-09-12 07:10:35,118 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d90163272', 'CheckoutRequestID': 'ws_CO_12092024101019376741454015', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC3B5YNHX'}, {'Name': 'TransactionDate', 'Value': 20240912101034}, {'Name': 'PhoneNumber', 'Value': 254741454015}]}}}}}
2024-09-12 07:10:35,324 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 07:10:35,502 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 07:10:35,503 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 07:10:35,723 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 07:10:48,539 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795852863', 'CheckoutRequestID': 'ws_CO_12092024101039816795758095', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC2B602JO'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912101047}, {'Name': 'PhoneNumber', 'Value': 254795758095}]}}}}"}
2024-09-12 07:10:48,539 - INFO - {'updated_data': 'callback data began'}
2024-09-12 07:10:48,539 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795852863', 'CheckoutRequestID': 'ws_CO_12092024101039816795758095', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC2B602JO'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912101047}, {'Name': 'PhoneNumber', 'Value': 254795758095}]}}}}}
2024-09-12 07:10:48,718 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 07:10:48,916 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 07:10:48,917 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 07:10:49,127 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 07:11:45,419 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5912401168', 'CheckoutRequestID': 'ws_CO_12092024101127133741454015', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC3B6403T'}, {'Name': 'TransactionDate', 'Value': 20240912101144}, {'Name': 'PhoneNumber', 'Value': 254741454015}]}}}}"}
2024-09-12 07:11:45,420 - INFO - {'updated_data': 'callback data began'}
2024-09-12 07:11:45,420 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5912401168', 'CheckoutRequestID': 'ws_CO_12092024101127133741454015', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC3B6403T'}, {'Name': 'TransactionDate', 'Value': 20240912101144}, {'Name': 'PhoneNumber', 'Value': 254741454015}]}}}}}
2024-09-12 07:11:45,597 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 07:11:45,790 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 07:11:45,791 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 07:11:46,042 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 07:12:33,268 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585058455219', 'CheckoutRequestID': 'ws_CO_12092024101220926741454015', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-12 07:12:33,268 - INFO - {'updated_data': 'callback data began'}
2024-09-12 07:12:33,268 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585058455219', 'CheckoutRequestID': 'ws_CO_12092024101220926741454015', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-12 07:12:33,440 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 07:12:33,626 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 07:12:33,627 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 07:12:33,842 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 07:13:06,572 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b522489072', 'CheckoutRequestID': 'ws_CO_12092024101252635741454015', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC2B6A0X2'}, {'Name': 'TransactionDate', 'Value': 20240912101305}, {'Name': 'PhoneNumber', 'Value': 254741454015}]}}}}"}
2024-09-12 07:13:06,573 - INFO - {'updated_data': 'callback data began'}
2024-09-12 07:13:06,573 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b522489072', 'CheckoutRequestID': 'ws_CO_12092024101252635741454015', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC2B6A0X2'}, {'Name': 'TransactionDate', 'Value': 20240912101305}, {'Name': 'PhoneNumber', 'Value': 254741454015}]}}}}}
2024-09-12 07:13:06,748 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 07:13:06,949 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 07:13:06,951 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 07:13:07,165 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 07:14:06,062 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f078173314', 'CheckoutRequestID': 'ws_CO_12092024101349966741454015', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}"}
2024-09-12 07:14:06,063 - INFO - {'updated_data': 'callback data began'}
2024-09-12 07:14:06,063 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f078173314', 'CheckoutRequestID': 'ws_CO_12092024101349966741454015', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}}
2024-09-12 07:14:06,236 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 07:14:06,426 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 07:14:06,428 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 07:14:06,647 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 07:14:32,258 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172498033', 'CheckoutRequestID': 'ws_CO_12092024101413555741454015', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC8B6GAAU'}, {'Name': 'TransactionDate', 'Value': 20240912101431}, {'Name': 'PhoneNumber', 'Value': 254741454015}]}}}}"}
2024-09-12 07:14:32,258 - INFO - {'updated_data': 'callback data began'}
2024-09-12 07:14:32,258 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172498033', 'CheckoutRequestID': 'ws_CO_12092024101413555741454015', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC8B6GAAU'}, {'Name': 'TransactionDate', 'Value': 20240912101431}, {'Name': 'PhoneNumber', 'Value': 254741454015}]}}}}}
2024-09-12 07:14:32,418 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 07:14:32,597 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 07:14:32,598 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 07:14:32,798 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 07:17:53,590 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585058469098', 'CheckoutRequestID': 'ws_CO_12092024101735101721475303', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC3B6V5MX'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912101752}, {'Name': 'PhoneNumber', 'Value': 254721475303}]}}}}"}
2024-09-12 07:17:53,591 - INFO - {'updated_data': 'callback data began'}
2024-09-12 07:17:53,591 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585058469098', 'CheckoutRequestID': 'ws_CO_12092024101735101721475303', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC3B6V5MX'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912101752}, {'Name': 'PhoneNumber', 'Value': 254721475303}]}}}}}
2024-09-12 07:17:53,798 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 07:17:54,181 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 07:17:54,183 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 07:17:54,403 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 07:18:09,616 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc22506205', 'CheckoutRequestID': 'ws_CO_12092024101800144720342100', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 50000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC4B6WCUI'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912101808}, {'Name': 'PhoneNumber', 'Value': 254720342100}]}}}}"}
2024-09-12 07:18:09,616 - INFO - {'updated_data': 'callback data began'}
2024-09-12 07:18:09,616 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc22506205', 'CheckoutRequestID': 'ws_CO_12092024101800144720342100', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 50000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC4B6WCUI'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912101808}, {'Name': 'PhoneNumber', 'Value': 254720342100}]}}}}}
2024-09-12 07:18:09,787 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 07:18:09,966 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 07:18:09,968 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 07:18:10,175 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 07:18:33,660 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b12060932', 'CheckoutRequestID': 'ws_CO_12092024101824544715608765', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC4B6YBN4'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912101833}, {'Name': 'PhoneNumber', 'Value': 254715608765}]}}}}"}
2024-09-12 07:18:33,661 - INFO - {'updated_data': 'callback data began'}
2024-09-12 07:18:33,661 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b12060932', 'CheckoutRequestID': 'ws_CO_12092024101824544715608765', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC4B6YBN4'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912101833}, {'Name': 'PhoneNumber', 'Value': 254715608765}]}}}}}
2024-09-12 07:18:33,825 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 07:18:34,037 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 07:18:34,038 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 07:18:34,560 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 07:18:48,109 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5912418599', 'CheckoutRequestID': 'ws_CO_12092024101822802723601796', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-12 07:18:48,113 - INFO - {'updated_data': 'callback data began'}
2024-09-12 07:18:48,113 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5912418599', 'CheckoutRequestID': 'ws_CO_12092024101822802723601796', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-12 07:18:48,298 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 07:18:48,583 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 07:18:48,584 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 07:18:48,812 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 07:29:15,784 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3185028543', 'CheckoutRequestID': 'ws_CO_12092024102911354718052074', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-12 07:29:15,785 - INFO - {'updated_data': 'callback data began'}
2024-09-12 07:29:15,785 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3185028543', 'CheckoutRequestID': 'ws_CO_12092024102911354718052074', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-12 07:29:15,947 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 07:29:16,134 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 07:29:16,136 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 07:29:16,357 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 07:29:30,626 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795873948', 'CheckoutRequestID': 'ws_CO_12092024102922580792656687', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC3B8B6EX'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912102929}, {'Name': 'PhoneNumber', 'Value': 254792656687}]}}}}"}
2024-09-12 07:29:30,626 - INFO - {'updated_data': 'callback data began'}
2024-09-12 07:29:30,626 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795873948', 'CheckoutRequestID': 'ws_CO_12092024102922580792656687', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC3B8B6EX'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912102929}, {'Name': 'PhoneNumber', 'Value': 254792656687}]}}}}}
2024-09-12 07:29:30,780 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 07:29:30,980 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 07:29:30,982 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 07:29:31,268 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 07:30:55,894 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3185033106', 'CheckoutRequestID': 'ws_CO_12092024103053912718052074', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-12 07:30:55,894 - INFO - {'updated_data': 'callback data began'}
2024-09-12 07:30:55,894 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3185033106', 'CheckoutRequestID': 'ws_CO_12092024103053912718052074', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-12 07:30:56,060 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 07:30:56,457 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 07:30:56,458 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 07:30:56,675 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 07:31:12,780 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e172280187', 'CheckoutRequestID': 'ws_CO_12092024103110500718052074', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-12 07:31:12,781 - INFO - {'updated_data': 'callback data began'}
2024-09-12 07:31:12,781 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e172280187', 'CheckoutRequestID': 'ws_CO_12092024103110500718052074', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-12 07:31:12,954 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 07:31:13,137 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 07:31:13,139 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 07:31:13,366 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 07:31:31,147 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d90186798', 'CheckoutRequestID': 'ws_CO_12092024103129156718052074', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-12 07:31:31,148 - INFO - {'updated_data': 'callback data began'}
2024-09-12 07:31:31,148 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d90186798', 'CheckoutRequestID': 'ws_CO_12092024103129156718052074', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-12 07:31:31,329 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 07:31:31,522 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 07:31:31,523 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 07:31:32,087 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 07:31:46,869 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585058506067', 'CheckoutRequestID': 'ws_CO_12092024103144938718052074', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-12 07:31:46,869 - INFO - {'updated_data': 'callback data began'}
2024-09-12 07:31:46,869 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585058506067', 'CheckoutRequestID': 'ws_CO_12092024103144938718052074', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-12 07:31:47,031 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 07:31:47,211 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 07:31:47,212 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 07:31:47,433 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 07:34:28,915 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962173009757', 'CheckoutRequestID': 'ws_CO_12092024103426944714420394', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-12 07:34:28,915 - INFO - {'updated_data': 'callback data began'}
2024-09-12 07:34:28,915 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962173009757', 'CheckoutRequestID': 'ws_CO_12092024103426944714420394', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-12 07:34:29,079 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 07:34:29,269 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 07:34:29,270 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 07:34:29,477 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 07:34:55,467 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172520679', 'CheckoutRequestID': 'ws_CO_12092024103445507714420394', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 900.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC5B8ZSPN'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912103455}, {'Name': 'PhoneNumber', 'Value': 254714420394}]}}}}"}
2024-09-12 07:34:55,468 - INFO - {'updated_data': 'callback data began'}
2024-09-12 07:34:55,468 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172520679', 'CheckoutRequestID': 'ws_CO_12092024103445507714420394', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 900.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC5B8ZSPN'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912103455}, {'Name': 'PhoneNumber', 'Value': 254714420394}]}}}}}
2024-09-12 07:34:55,645 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 07:34:55,822 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 07:34:55,823 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 07:34:56,032 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 07:38:52,868 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e172289197', 'CheckoutRequestID': 'ws_CO_12092024103843208727211164', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-12 07:38:52,869 - INFO - {'updated_data': 'callback data began'}
2024-09-12 07:38:52,869 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e172289197', 'CheckoutRequestID': 'ws_CO_12092024103843208727211164', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-12 07:38:53,037 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 07:38:53,216 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 07:38:53,217 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 07:38:53,423 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 07:40:30,415 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b12118000', 'CheckoutRequestID': 'ws_CO_12092024104011441723872487', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}"}
2024-09-12 07:40:30,416 - INFO - {'updated_data': 'callback data began'}
2024-09-12 07:40:30,416 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b12118000', 'CheckoutRequestID': 'ws_CO_12092024104011441723872487', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}}
2024-09-12 07:40:30,575 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 07:40:30,872 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 07:40:30,873 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 07:40:31,109 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 07:41:46,814 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172528895', 'CheckoutRequestID': 'ws_CO_12092024104130315759473257', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 150.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC7B9UDLD'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912104146}, {'Name': 'PhoneNumber', 'Value': 254759473257}]}}}}"}
2024-09-12 07:41:46,815 - INFO - {'updated_data': 'callback data began'}
2024-09-12 07:41:46,816 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172528895', 'CheckoutRequestID': 'ws_CO_12092024104130315759473257', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 150.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC7B9UDLD'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912104146}, {'Name': 'PhoneNumber', 'Value': 254759473257}]}}}}}
2024-09-12 07:41:46,973 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 07:41:47,657 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 07:41:47,658 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 07:41:47,873 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 07:42:13,415 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795889162', 'CheckoutRequestID': 'ws_CO_12092024104203645702920658', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}"}
2024-09-12 07:42:13,415 - INFO - {'updated_data': 'callback data began'}
2024-09-12 07:42:13,415 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795889162', 'CheckoutRequestID': 'ws_CO_12092024104203645702920658', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}}
2024-09-12 07:42:13,701 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 07:42:14,114 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 07:42:14,116 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 07:42:14,327 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 07:43:40,815 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172531201', 'CheckoutRequestID': 'ws_CO_12092024104328778720589074', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 150000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC2BA320G'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912104340}, {'Name': 'PhoneNumber', 'Value': 254720589074}]}}}}"}
2024-09-12 07:43:40,816 - INFO - {'updated_data': 'callback data began'}
2024-09-12 07:43:40,816 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172531201', 'CheckoutRequestID': 'ws_CO_12092024104328778720589074', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 150000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC2BA320G'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912104340}, {'Name': 'PhoneNumber', 'Value': 254720589074}]}}}}}
2024-09-12 07:43:40,992 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 07:43:41,182 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 07:43:41,183 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 07:43:41,401 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 07:43:52,788 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b12127417', 'CheckoutRequestID': 'ws_CO_12092024104340604713584310', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC3BA48P5'}, {'Name': 'TransactionDate', 'Value': 20240912104352}, {'Name': 'PhoneNumber', 'Value': 254713584310}]}}}}"}
2024-09-12 07:43:52,788 - INFO - {'updated_data': 'callback data began'}
2024-09-12 07:43:52,788 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b12127417', 'CheckoutRequestID': 'ws_CO_12092024104340604713584310', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC3BA48P5'}, {'Name': 'TransactionDate', 'Value': 20240912104352}, {'Name': 'PhoneNumber', 'Value': 254713584310}]}}}}}
2024-09-12 07:43:52,970 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 07:43:53,156 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 07:43:53,157 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 07:43:53,368 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 07:43:58,137 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f078207823', 'CheckoutRequestID': 'ws_CO_12092024104351922724520737', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-12 07:43:58,138 - INFO - {'updated_data': 'callback data began'}
2024-09-12 07:43:58,138 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f078207823', 'CheckoutRequestID': 'ws_CO_12092024104351922724520737', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-12 07:43:58,300 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 07:43:58,504 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 07:43:58,506 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 07:43:58,710 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 07:44:20,264 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f078208374', 'CheckoutRequestID': 'ws_CO_12092024104411222720589074', 'ResultCode': 17, 'ResultDesc': 'Rule limited.'}}}"}
2024-09-12 07:44:20,264 - INFO - {'updated_data': 'callback data began'}
2024-09-12 07:44:20,264 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f078208374', 'CheckoutRequestID': 'ws_CO_12092024104411222720589074', 'ResultCode': 17, 'ResultDesc': 'Rule limited.'}}}}
2024-09-12 07:44:20,454 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 07:44:20,650 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 07:44:20,651 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 07:44:20,869 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
