2024-09-09 14:26:53,257 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208791952644', 'CheckoutRequestID': 'ws_CO_09092024172629945720956156', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-09 14:26:53,257 - INFO - {'updated_data': 'callback data began'}
2024-09-09 14:26:53,258 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208791952644', 'CheckoutRequestID': 'ws_CO_09092024172629945720956156', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-09 14:26:53,423 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 14:26:53,904 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 14:26:53,906 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 14:26:54,294 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 14:26:54,846 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 14:26:54,974 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 14:26:54,975 - INFO - {'updated': 'initiated stk query for ws_CO_09092024172629945720956156 899885 '}
2024-09-09 14:26:55,035 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:26:55,839 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 14:26:55,841 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer wZW7GwDSwm3Em9oouAyFN3JTYBOP'}"}
2024-09-09 14:26:55,841 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTQyNjU1', 'Timestamp': '20240909142655', 'CheckoutRequestID': 'ws_CO_09092024172629945720956156'}"}
2024-09-09 14:26:55,843 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:26:56,712 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-09 14:26:56,712 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208791952644', 'CheckoutRequestID': 'ws_CO_09092024172629945720956156', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_09092024172629945720956156 899885"}
2024-09-09 14:26:56,829 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 14:26:57,088 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 14:26:57,090 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 14:26:57,418 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 14:35:51,270 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 14:35:51,432 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 14:35:51,433 - INFO - there is a test coming
2024-09-09 14:35:51,433 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 14:35:51,492 - INFO - {'updated_data': 'the data is now as 254705785881'}
2024-09-09 14:35:51,493 - INFO - the data is now as 254705785881
2024-09-09 14:35:51,520 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 14:35:51,520 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 14:35:51,523 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:35:52,333 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 14:35:52,335 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer BpP4iRct8A6xyQGob60dK2JcOm40'}"}
2024-09-09 14:35:52,336 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTQzNTUy', 'Timestamp': '20240909143552', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '16000', 'PartyA': '254705785881', 'PartyB': 899885, 'PhoneNumber': '254705785881', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0625421-1725892550229', 'TransactionDesc': 'Some payment'}
2024-09-09 14:35:52,337 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:35:53,321 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 14:35:53,327 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074285005', 'CheckoutRequestID': 'ws_CO_09092024173553070705785881', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 14:36:02,612 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074285005', 'CheckoutRequestID': 'ws_CO_09092024173553070705785881', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}"}
2024-09-09 14:36:02,613 - INFO - {'updated_data': 'callback data began'}
2024-09-09 14:36:02,613 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074285005', 'CheckoutRequestID': 'ws_CO_09092024173553070705785881', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}}
2024-09-09 14:36:02,796 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 14:36:03,433 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 14:36:03,435 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 14:36:04,085 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 14:36:42,571 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 14:36:42,717 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 14:36:42,718 - INFO - there is a test coming
2024-09-09 14:36:42,718 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 14:36:42,778 - INFO - {'updated_data': 'the data is now as 254713923568'}
2024-09-09 14:36:42,778 - INFO - the data is now as 254713923568
2024-09-09 14:36:42,797 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 14:36:42,797 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 14:36:42,806 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:36:43,714 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 14:36:43,716 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Rey9Os8k8zRqZVGMJzvgwUXP5Ksv'}"}
2024-09-09 14:36:43,716 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTQzNjQz', 'Timestamp': '20240909143643', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254713923568', 'PartyB': 827142, 'PhoneNumber': '254713923568', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-14528', 'TransactionDesc': 'Some payment'}
2024-09-09 14:36:43,717 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:36:44,849 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 14:36:44,855 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b513530610', 'CheckoutRequestID': 'ws_CO_09092024173644426713923568', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 14:37:05,847 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 14:37:06,040 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 14:37:06,041 - INFO - {'updated': 'initiated stk query for ws_CO_09092024173644426713923568 827142 '}
2024-09-09 14:37:06,103 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:37:06,848 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 14:37:06,850 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 1qMgG0bCPSYEwWQYlXyLiSCUvCZ4'}"}
2024-09-09 14:37:06,850 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTQzNzA2', 'Timestamp': '20240909143706', 'CheckoutRequestID': 'ws_CO_09092024173644426713923568'}"}
2024-09-09 14:37:06,851 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:37:07,726 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 14:37:07,727 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b513530610', 'CheckoutRequestID': 'ws_CO_09092024173644426713923568', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024173644426713923568 827142"}
2024-09-09 14:37:07,863 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 14:37:08,480 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 14:37:08,481 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 14:37:08,809 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 14:37:35,183 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 14:37:35,379 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 14:37:35,379 - INFO - {'updated': 'initiated stk query for ws_CO_09092024173721990701406123 827142 '}
2024-09-09 14:37:35,434 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:37:36,195 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 14:37:36,197 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Jvd2Oo18Pi1CWf36osWlpb3Ipagt'}"}
2024-09-09 14:37:36,198 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTQzNzM1', 'Timestamp': '20240909143735', 'CheckoutRequestID': 'ws_CO_09092024173721990701406123'}"}
2024-09-09 14:37:36,199 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:37:36,978 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-09 14:37:36,982 - INFO - {'updated': "Received response {'requestId': 'ws_CO_09092024173721990701406123', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_09092024173721990701406123 827142"}
2024-09-09 14:37:36,985 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-09 14:38:16,050 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 14:38:16,204 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 14:38:16,205 - INFO - {'updated': 'initiated stk query for ws_CO_09092024173721990701406123 827142 '}
2024-09-09 14:38:16,277 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:38:16,997 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 14:38:16,999 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer KECLlXgddGPGCugAAMCmsarydjdA'}"}
2024-09-09 14:38:17,003 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTQzODE2', 'Timestamp': '20240909143816', 'CheckoutRequestID': 'ws_CO_09092024173721990701406123'}"}
2024-09-09 14:38:17,004 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:38:17,915 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 14:38:17,916 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b513532338', 'CheckoutRequestID': 'ws_CO_09092024173721990701406123', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024173721990701406123 827142"}
2024-09-09 14:38:18,036 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 14:38:18,323 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 14:38:18,324 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 14:38:18,955 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 14:38:20,448 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 14:38:20,596 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 14:38:20,597 - INFO - {'updated': 'initiated stk query for ws_CO_09092024173809229728008054 827142 '}
2024-09-09 14:38:20,659 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:38:21,527 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 14:38:21,529 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer vwd4G7H56DitkTMlAInBA9a8RFXG'}"}
2024-09-09 14:38:21,530 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTQzODIw', 'Timestamp': '20240909143820', 'CheckoutRequestID': 'ws_CO_09092024173809229728008054'}"}
2024-09-09 14:38:21,532 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:38:22,288 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 14:38:22,288 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074287536', 'CheckoutRequestID': 'ws_CO_09092024173809229728008054', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024173809229728008054 827142"}
2024-09-09 14:38:22,411 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 14:38:23,031 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 14:38:23,033 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 14:38:23,393 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 14:39:28,004 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 14:39:28,171 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 14:39:28,171 - INFO - there is a test coming
2024-09-09 14:39:28,171 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 14:39:28,212 - INFO - {'updated_data': 'the data is now as 254721115820'}
2024-09-09 14:39:28,212 - INFO - the data is now as 254721115820
2024-09-09 14:39:28,232 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 14:39:28,232 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 14:39:28,233 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:39:29,260 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 14:39:29,262 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer AbesG1ZWXPEmSAxwT5nxxKZGtoGG'}"}
2024-09-09 14:39:29,263 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTQzOTI5', 'Timestamp': '20240909143929', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '7000', 'PartyA': '254721115820', 'PartyB': 899885, 'PhoneNumber': '254721115820', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053244', 'TransactionDesc': 'Some payment'}
2024-09-09 14:39:29,264 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:39:30,370 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-09 14:39:30,376 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169099329', 'CheckoutRequestID': 'ws_CO_09092024173930011721115820', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 14:39:42,600 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 14:39:42,784 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 14:39:42,787 - INFO - {'updated': 'initiated stk query for ws_CO_09092024173930011721115820 899885 '}
2024-09-09 14:39:42,854 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:39:43,967 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 14:39:43,968 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer GB0kPLnASJ3519XebnEo29QEodFt'}"}
2024-09-09 14:39:43,968 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTQzOTQy', 'Timestamp': '20240909143942', 'CheckoutRequestID': 'ws_CO_09092024173930011721115820'}"}
2024-09-09 14:39:43,969 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:39:44,725 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-09 14:39:44,726 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169099329', 'CheckoutRequestID': 'ws_CO_09092024173930011721115820', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024173930011721115820 899885"}
2024-09-09 14:39:44,860 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 14:39:45,441 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 14:39:45,442 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 14:39:46,140 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 14:41:40,787 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 14:41:40,928 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 14:41:40,928 - INFO - there is a test coming
2024-09-09 14:41:40,928 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 14:41:40,969 - INFO - {'updated_data': 'the data is now as 254725308377'}
2024-09-09 14:41:40,970 - INFO - the data is now as 254725308377
2024-09-09 14:41:40,985 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 14:41:40,985 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 14:41:40,987 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:41:41,766 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 14:41:41,768 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 8T0naY0GrBaBYgDNByOwU7raxcm6'}"}
2024-09-09 14:41:41,769 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTQ0MTQx', 'Timestamp': '20240909144141', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '15000', 'PartyA': '254725308377', 'PartyB': 827142, 'PhoneNumber': '254725308377', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '121-24769', 'TransactionDesc': 'Some payment'}
2024-09-09 14:41:41,770 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:41:42,802 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 14:41:42,808 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c229-4922-a304-de61d3eb488813531601', 'CheckoutRequestID': 'ws_CO_09092024174142558725308377', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 14:43:43,427 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6168618638', 'CheckoutRequestID': 'ws_CO_09092024174335679715284220', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI95ZNVDYT'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909174342}, {'Name': 'PhoneNumber', 'Value': 254715284220}]}}}}"}
2024-09-09 14:43:43,428 - INFO - {'updated_data': 'callback data began'}
2024-09-09 14:43:43,428 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6168618638', 'CheckoutRequestID': 'ws_CO_09092024174335679715284220', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI95ZNVDYT'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909174342}, {'Name': 'PhoneNumber', 'Value': 254715284220}]}}}}}
2024-09-09 14:43:43,579 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 14:43:44,385 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 14:43:44,386 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 14:43:44,742 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 14:45:07,544 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b513554517', 'CheckoutRequestID': 'ws_CO_09092024174458601722970597', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI90ZO4MSM'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909174506}, {'Name': 'PhoneNumber', 'Value': 254722970597}]}}}}"}
2024-09-09 14:45:07,544 - INFO - {'updated_data': 'callback data began'}
2024-09-09 14:45:07,544 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b513554517', 'CheckoutRequestID': 'ws_CO_09092024174458601722970597', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI90ZO4MSM'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909174506}, {'Name': 'PhoneNumber', 'Value': 254722970597}]}}}}}
2024-09-09 14:45:07,720 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 14:45:08,005 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 14:45:08,007 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 14:45:08,358 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 14:45:09,990 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 14:45:10,120 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 14:45:10,121 - INFO - {'updated': 'initiated stk query for ws_CO_09092024174458601722970597 899885 '}
2024-09-09 14:45:10,181 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:45:10,959 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 14:45:10,961 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer VZFHjPA4jLqXAFTZUIRouSQ2vtKw'}"}
2024-09-09 14:45:10,961 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTQ0NTEw', 'Timestamp': '20240909144510', 'CheckoutRequestID': 'ws_CO_09092024174458601722970597'}"}
2024-09-09 14:45:10,962 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:45:11,762 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 14:45:11,763 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b513554517', 'CheckoutRequestID': 'ws_CO_09092024174458601722970597', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024174458601722970597 899885"}
2024-09-09 14:45:11,884 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 14:45:12,157 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 14:45:12,160 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 14:45:12,495 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 14:47:52,903 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db13566572', 'CheckoutRequestID': 'ws_CO_09092024174744890714056473', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}"}
2024-09-09 14:47:52,903 - INFO - {'updated_data': 'callback data began'}
2024-09-09 14:47:52,903 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db13566572', 'CheckoutRequestID': 'ws_CO_09092024174744890714056473', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}}
2024-09-09 14:47:53,089 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 14:47:53,381 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 14:47:53,382 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 14:47:53,859 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 14:47:56,213 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 14:47:56,385 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 14:47:56,386 - INFO - {'updated': 'initiated stk query for ws_CO_09092024174744890714056473 899885 '}
2024-09-09 14:47:56,454 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:47:57,215 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 14:47:57,216 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer FY0WH3EfRHutAq4LJ9xrBHoIvmAF'}"}
2024-09-09 14:47:57,217 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTQ0NzU2', 'Timestamp': '20240909144756', 'CheckoutRequestID': 'ws_CO_09092024174744890714056473'}"}
2024-09-09 14:47:57,218 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:47:58,021 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 380
2024-09-09 14:47:58,022 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db13566572', 'CheckoutRequestID': 'ws_CO_09092024174744890714056473', 'ResultCode': '2001', 'ResultDesc': 'The initiator information is invalid.'} for ws_CO_09092024174744890714056473 899885"}
2024-09-09 14:47:58,139 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 14:47:58,428 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 14:47:58,429 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 14:47:58,794 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 14:48:17,876 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169110285', 'CheckoutRequestID': 'ws_CO_09092024174808754714056473', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI90ZOOPH0'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909174817}, {'Name': 'PhoneNumber', 'Value': 254714056473}]}}}}"}
2024-09-09 14:48:17,876 - INFO - {'updated_data': 'callback data began'}
2024-09-09 14:48:17,876 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169110285', 'CheckoutRequestID': 'ws_CO_09092024174808754714056473', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI90ZOOPH0'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909174817}, {'Name': 'PhoneNumber', 'Value': 254714056473}]}}}}}
2024-09-09 14:48:18,046 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 14:48:18,651 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 14:48:18,653 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 14:48:19,341 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 14:48:20,115 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 14:48:20,737 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 14:48:20,738 - INFO - {'updated': 'initiated stk query for ws_CO_09092024174808754714056473 899885 '}
2024-09-09 14:48:20,798 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:48:21,542 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 14:48:21,544 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer uRfXSfJTIZ5WmGw64lobGG3AeEGz'}"}
2024-09-09 14:48:21,544 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTQ0ODIw', 'Timestamp': '20240909144820', 'CheckoutRequestID': 'ws_CO_09092024174808754714056473'}"}
2024-09-09 14:48:21,553 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:48:22,441 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-09 14:48:22,442 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169110285', 'CheckoutRequestID': 'ws_CO_09092024174808754714056473', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024174808754714056473 899885"}
2024-09-09 14:48:22,562 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 14:48:23,171 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 14:48:23,172 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 14:48:23,516 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 14:50:00,866 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 14:50:01,002 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 14:50:01,002 - INFO - there is a test coming
2024-09-09 14:50:01,003 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 14:50:01,053 - INFO - {'updated_data': 'the data is now as 254722980480'}
2024-09-09 14:50:01,054 - INFO - the data is now as 254722980480
2024-09-09 14:50:01,075 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 14:50:01,075 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 14:50:01,076 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:50:01,981 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 14:50:01,983 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Ayvk5zziZmwUXwfMPDxJG5vpBdlh'}"}
2024-09-09 14:50:01,984 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTQ1MDAx', 'Timestamp': '20240909145001', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254722980480', 'PartyB': 827142, 'PhoneNumber': '254722980480', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-30036', 'TransactionDesc': 'Some payment'}
2024-09-09 14:50:01,985 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:50:02,878 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-09 14:50:02,889 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169112687', 'CheckoutRequestID': 'ws_CO_09092024175002644722980480', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 14:50:54,849 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 14:50:54,865 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-09 14:50:54,866 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-09 14:52:43,263 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 14:52:43,393 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 14:52:43,394 - INFO - {'updated': 'initiated stk query for ws_CO_09092024175232063721994350 827142 '}
2024-09-09 14:52:43,456 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:52:44,288 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 14:52:44,290 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer xD7OioN7zqflUfSUZuJKuoqu9aec'}"}
2024-09-09 14:52:44,290 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTQ1MjQz', 'Timestamp': '20240909145243', 'CheckoutRequestID': 'ws_CO_09092024175232063721994350'}"}
2024-09-09 14:52:44,292 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:52:45,221 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-09 14:52:45,222 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6168629839', 'CheckoutRequestID': 'ws_CO_09092024175232063721994350', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024175232063721994350 827142"}
2024-09-09 14:52:45,341 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 14:52:45,976 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 14:52:45,978 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 14:52:46,649 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 14:53:15,315 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 14:53:15,505 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 14:53:15,505 - INFO - there is a test coming
2024-09-09 14:53:15,506 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 14:53:15,548 - INFO - {'updated_data': 'the data is now as 254721994350'}
2024-09-09 14:53:15,548 - INFO - the data is now as 254721994350
2024-09-09 14:53:15,564 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 14:53:15,564 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 14:53:15,565 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:53:16,383 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 14:53:16,385 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer pVA7tOpZLcpvnxDZ64DLAgFX7FKN'}"}
2024-09-09 14:53:16,386 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTQ1MzE2', 'Timestamp': '20240909145316', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '7163', 'PartyA': '254721994350', 'PartyB': 827142, 'PhoneNumber': '254721994350', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-69230', 'TransactionDesc': 'Some payment'}
2024-09-09 14:53:16,387 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 14:53:17,276 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 14:53:17,282 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074306244', 'CheckoutRequestID': 'ws_CO_09092024175317075721994350', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 14:55:28,162 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 14:55:28,188 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-09 14:55:28,189 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-09 15:06:35,058 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:06:35,267 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:06:35,268 - INFO - there is a test coming
2024-09-09 15:06:35,268 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 15:06:35,315 - INFO - {'updated_data': 'the data is now as 254704436869'}
2024-09-09 15:06:35,315 - INFO - the data is now as 254704436869
2024-09-09 15:06:35,333 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 15:06:35,333 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 15:06:35,334 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:06:36,666 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:06:36,668 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer P68Md1Ve2dmNkAUUQbDHlSEuoAJm'}"}
2024-09-09 15:06:36,669 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTUwNjM2', 'Timestamp': '20240909150636', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254704436869', 'PartyB': 827142, 'PhoneNumber': '254704436869', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-29757', 'TransactionDesc': 'Some payment'}
2024-09-09 15:06:36,670 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:06:37,568 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 15:06:37,574 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208792001431', 'CheckoutRequestID': 'ws_CO_09092024180637354704436869', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 15:06:45,451 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792001431', 'CheckoutRequestID': 'ws_CO_09092024180637354704436869', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI95ZS1YAR'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909180644}, {'Name': 'PhoneNumber', 'Value': 254704436869}]}}}}"}
2024-09-09 15:06:45,451 - INFO - {'updated_data': 'callback data began'}
2024-09-09 15:06:45,451 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792001431', 'CheckoutRequestID': 'ws_CO_09092024180637354704436869', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI95ZS1YAR'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909180644}, {'Name': 'PhoneNumber', 'Value': 254704436869}]}}}}}
2024-09-09 15:06:45,607 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:06:46,240 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:06:46,242 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:06:46,927 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:07:08,536 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:07:08,717 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:07:08,718 - INFO - there is a test coming
2024-09-09 15:07:08,718 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 15:07:08,760 - INFO - {'updated_data': 'the data is now as 254704436869'}
2024-09-09 15:07:08,760 - INFO - the data is now as 254704436869
2024-09-09 15:07:08,784 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 15:07:08,784 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 15:07:08,786 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:07:09,567 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:07:09,569 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer rSlUA0HEa59A5kZcGOfkw7uzwc9o'}"}
2024-09-09 15:07:09,570 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTUwNzA5', 'Timestamp': '20240909150709', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254704436869', 'PartyB': 827142, 'PhoneNumber': '254704436869', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-29757', 'TransactionDesc': 'Some payment'}
2024-09-09 15:07:09,571 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:07:10,513 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 15:07:10,520 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86316371', 'CheckoutRequestID': 'ws_CO_09092024180710268704436869', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 15:08:31,499 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:08:31,663 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:08:31,663 - INFO - there is a test coming
2024-09-09 15:08:31,663 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 15:08:31,704 - INFO - {'updated_data': 'the data is now as 254726934962'}
2024-09-09 15:08:31,704 - INFO - the data is now as 254726934962
2024-09-09 15:08:31,720 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 15:08:31,720 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 15:08:31,721 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:08:32,666 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:08:32,668 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer bvAukiWKVGnbVAk4w9vT4sG0Dos5'}"}
2024-09-09 15:08:32,669 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTUwODMy', 'Timestamp': '20240909150832', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2500', 'PartyA': '254726934962', 'PartyB': 827142, 'PhoneNumber': '254726934962', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-134864', 'TransactionDesc': 'Some payment'}
2024-09-09 15:08:32,670 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:08:51,904 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 500 90
2024-09-09 15:08:51,906 - INFO -  th data is {'code': 500, 'message': {'fault': {'faultstring': 'Datastore Error', 'detail': {'errorcode': 'Internal Server Error'}}}}
2024-09-09 15:08:51,908 - ERROR - Internal Server Error: /api/v1/stk/
2024-09-09 15:29:03,012 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc13686127', 'CheckoutRequestID': 'ws_CO_09092024182853227759084141', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI98ZWD080'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909182902}, {'Name': 'PhoneNumber', 'Value': 254759084141}]}}}}"}
2024-09-09 15:29:03,012 - INFO - {'updated_data': 'callback data began'}
2024-09-09 15:29:03,012 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc13686127', 'CheckoutRequestID': 'ws_CO_09092024182853227759084141', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI98ZWD080'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909182902}, {'Name': 'PhoneNumber', 'Value': 254759084141}]}}}}}
2024-09-09 15:29:03,174 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:29:03,787 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:29:03,789 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:29:04,154 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:30:55,271 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:30:55,419 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:30:55,420 - INFO - {'updated': 'initiated stk query for ws_CO_09092024183022987720760628 827142 '}
2024-09-09 15:30:55,480 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:30:56,367 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:30:56,369 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer NPQ2xclbkQ4UCFVbDJ95wqV6K1AV'}"}
2024-09-09 15:30:56,370 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTUzMDU1', 'Timestamp': '20240909153055', 'CheckoutRequestID': 'ws_CO_09092024183022987720760628'}"}
2024-09-09 15:30:56,371 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:30:57,286 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 380
2024-09-09 15:30:57,286 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208792037192', 'CheckoutRequestID': 'ws_CO_09092024183022987720760628', 'ResultCode': '2001', 'ResultDesc': 'The initiator information is invalid.'} for ws_CO_09092024183022987720760628 827142"}
2024-09-09 15:30:57,418 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:30:57,708 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:30:57,709 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:30:58,421 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:31:15,076 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c229-4922-a304-de61d3eb488813684098', 'CheckoutRequestID': 'ws_CO_09092024183103276759084141', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI99ZWT8SH'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909183114}, {'Name': 'PhoneNumber', 'Value': 254759084141}]}}}}"}
2024-09-09 15:31:15,076 - INFO - {'updated_data': 'callback data began'}
2024-09-09 15:31:15,076 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c229-4922-a304-de61d3eb488813684098', 'CheckoutRequestID': 'ws_CO_09092024183103276759084141', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI99ZWT8SH'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909183114}, {'Name': 'PhoneNumber', 'Value': 254759084141}]}}}}}
2024-09-09 15:31:15,252 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:31:15,576 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:31:15,578 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:31:15,946 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:31:24,911 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:31:25,065 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:31:25,065 - INFO - {'updated': 'initiated stk query for ws_CO_09092024183103276759084141 899885 '}
2024-09-09 15:31:25,121 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:31:26,052 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:31:26,053 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer MDj0vjq2yOcdw5vn2L0j4aqMt2ik'}"}
2024-09-09 15:31:26,054 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTUzMTI1', 'Timestamp': '20240909153125', 'CheckoutRequestID': 'ws_CO_09092024183103276759084141'}"}
2024-09-09 15:31:26,055 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:31:26,868 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 15:31:26,869 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c229-4922-a304-de61d3eb488813684098', 'CheckoutRequestID': 'ws_CO_09092024183103276759084141', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024183103276759084141 899885"}
2024-09-09 15:31:27,017 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:31:27,302 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:31:27,304 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:31:27,950 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:32:14,391 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:32:14,566 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:32:14,567 - INFO - there is a test coming
2024-09-09 15:32:14,567 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 15:32:14,617 - INFO - {'updated_data': 'the data is now as 254757255929'}
2024-09-09 15:32:14,618 - INFO - the data is now as 254757255929
2024-09-09 15:32:14,636 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 15:32:14,636 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 15:32:14,637 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:32:15,527 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:32:15,529 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer s7SKcU5EGgyfb3PIsGrBjaLwhGAF'}"}
2024-09-09 15:32:15,530 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTUzMjE1', 'Timestamp': '20240909153215', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100000', 'PartyA': '254757255929', 'PartyB': 899885, 'PhoneNumber': '254757255929', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Order No . 14011', 'TransactionDesc': 'Some payment'}
2024-09-09 15:32:15,531 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:32:16,968 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 15:32:16,974 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c229-4922-a304-de61d3eb488813688228', 'CheckoutRequestID': 'ws_CO_09092024183216290757255929', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 15:33:10,534 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:33:10,707 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:33:10,707 - INFO - {'updated': 'initiated stk query for ws_CO_09092024183249103722529448 827142 '}
2024-09-09 15:33:10,767 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:33:11,534 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:33:11,537 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer z6hlJrannQDNFMiYjyoQgiDozUev'}"}
2024-09-09 15:33:11,537 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTUzMzEw', 'Timestamp': '20240909153310', 'CheckoutRequestID': 'ws_CO_09092024183249103722529448'}"}
2024-09-09 15:33:11,538 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:33:12,371 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-09 15:33:12,372 - INFO - {'updated': "Received response {'requestId': 'ws_CO_09092024183249103722529448', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_09092024183249103722529448 827142"}
2024-09-09 15:33:12,374 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-09 15:33:16,005 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee593614212', 'CheckoutRequestID': 'ws_CO_09092024183300420720760628', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI93ZX7YBD'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909183315}, {'Name': 'PhoneNumber', 'Value': 254720760628}]}}}}"}
2024-09-09 15:33:16,005 - INFO - {'updated_data': 'callback data began'}
2024-09-09 15:33:16,006 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee593614212', 'CheckoutRequestID': 'ws_CO_09092024183300420720760628', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI93ZX7YBD'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909183315}, {'Name': 'PhoneNumber', 'Value': 254720760628}]}}}}}
2024-09-09 15:33:16,182 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:33:16,692 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:33:16,693 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:33:17,376 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:33:20,180 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6168684925', 'CheckoutRequestID': 'ws_CO_09092024183249103722529448', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-09 15:33:20,180 - INFO - {'updated_data': 'callback data began'}
2024-09-09 15:33:20,181 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6168684925', 'CheckoutRequestID': 'ws_CO_09092024183249103722529448', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-09 15:33:20,340 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:33:20,639 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:33:20,640 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:33:21,006 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:33:21,522 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:33:21,547 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-09 15:33:21,548 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-09 15:33:55,214 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:33:55,409 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:33:55,410 - INFO - there is a test coming
2024-09-09 15:33:55,410 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 15:33:55,456 - INFO - {'updated_data': 'the data is now as 254712597570'}
2024-09-09 15:33:55,456 - INFO - the data is now as 254712597570
2024-09-09 15:33:55,474 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 15:33:55,474 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 15:33:55,476 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:33:56,993 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:33:56,996 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer fAAAYCGKmFd82kOP2n0LnccX0P2Q'}"}
2024-09-09 15:33:56,996 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTUzMzU2', 'Timestamp': '20240909153356', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254712597570', 'PartyB': 899885, 'PhoneNumber': '254712597570', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0626488-1725896033391', 'TransactionDesc': 'Some payment'}
2024-09-09 15:33:56,997 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:33:58,034 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-09 15:33:58,041 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169171784', 'CheckoutRequestID': 'ws_CO_09092024183357717712597570', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 15:34:13,325 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169171784', 'CheckoutRequestID': 'ws_CO_09092024183357717712597570', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI94ZXF28Q'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909183412}, {'Name': 'PhoneNumber', 'Value': 254712597570}]}}}}"}
2024-09-09 15:34:13,325 - INFO - {'updated_data': 'callback data began'}
2024-09-09 15:34:13,326 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169171784', 'CheckoutRequestID': 'ws_CO_09092024183357717712597570', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI94ZXF28Q'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909183412}, {'Name': 'PhoneNumber', 'Value': 254712597570}]}}}}}
2024-09-09 15:34:13,500 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:34:13,810 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:34:13,811 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:34:14,510 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:34:30,530 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:34:30,688 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:34:30,688 - INFO - {'updated': 'initiated stk query for ws_CO_09092024183357717712597570 899885 '}
2024-09-09 15:34:30,752 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:34:31,556 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:34:31,558 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer scskxe5UiAclkVf9WTpefHxrDEY1'}"}
2024-09-09 15:34:31,559 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTUzNDMw', 'Timestamp': '20240909153430', 'CheckoutRequestID': 'ws_CO_09092024183357717712597570'}"}
2024-09-09 15:34:31,560 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:34:32,403 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-09 15:34:32,404 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169171784', 'CheckoutRequestID': 'ws_CO_09092024183357717712597570', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024183357717712597570 899885"}
2024-09-09 15:34:32,526 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:34:32,808 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:34:32,810 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:34:33,492 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:35:40,183 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b513709743', 'CheckoutRequestID': 'ws_CO_09092024183527742720051548', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI99ZXPK1Z'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909183539}, {'Name': 'PhoneNumber', 'Value': 254720051548}]}}}}"}
2024-09-09 15:35:40,184 - INFO - {'updated_data': 'callback data began'}
2024-09-09 15:35:40,184 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b513709743', 'CheckoutRequestID': 'ws_CO_09092024183527742720051548', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI99ZXPK1Z'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909183539}, {'Name': 'PhoneNumber', 'Value': 254720051548}]}}}}}
2024-09-09 15:35:40,339 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:35:40,643 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:35:40,645 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:35:40,995 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:40:00,211 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:40:00,384 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 15:40:00,386 - INFO - {'updated': 'initiated stk query for ws_CO_09092024183949063757255929 899885 '}
2024-09-09 15:40:00,453 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:40:01,235 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 15:40:01,237 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer iGKqz0HvqEt5ntATUuRiWipeGhh3'}"}
2024-09-09 15:40:01,237 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTU0MDAw', 'Timestamp': '20240909154000', 'CheckoutRequestID': 'ws_CO_09092024183949063757255929'}"}
2024-09-09 15:40:01,238 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 15:40:02,076 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-09 15:40:02,077 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169179606', 'CheckoutRequestID': 'ws_CO_09092024183949063757255929', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024183949063757255929 899885"}
2024-09-09 15:40:02,193 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:40:03,020 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:40:03,022 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:40:03,710 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:59:27,566 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6168721235', 'CheckoutRequestID': 'ws_CO_09092024185912705720970193', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9212VVMU'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909185926}, {'Name': 'PhoneNumber', 'Value': 254720970193}]}}}}"}
2024-09-09 15:59:27,567 - INFO - {'updated_data': 'callback data began'}
2024-09-09 15:59:27,567 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6168721235', 'CheckoutRequestID': 'ws_CO_09092024185912705720970193', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9212VVMU'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909185926}, {'Name': 'PhoneNumber', 'Value': 254720970193}]}}}}}
2024-09-09 15:59:27,755 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 15:59:28,380 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 15:59:28,381 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 15:59:29,045 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 15:59:32,175 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 15:59:32,191 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-09 15:59:32,192 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-09 16:16:05,703 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:16:05,827 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:16:05,828 - INFO - {'updated': 'initiated stk query for ws_CO_09092024191540682725070051 899885 '}
2024-09-09 16:16:05,897 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:16:06,728 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:16:06,729 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer oHc8dGPnzXpZnJAi3jutHkGbOn22'}"}
2024-09-09 16:16:06,730 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTYxNjA1', 'Timestamp': '20240909161605', 'CheckoutRequestID': 'ws_CO_09092024191540682725070051'}"}
2024-09-09 16:16:06,731 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:16:07,645 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-09 16:16:07,645 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6168744053', 'CheckoutRequestID': 'ws_CO_09092024191540682725070051', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024191540682725070051 899885"}
2024-09-09 16:16:07,784 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:16:08,377 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:16:08,378 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:16:08,737 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:17:03,531 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169231115', 'CheckoutRequestID': 'ws_CO_09092024191655212704935355', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9017025U'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909191702}, {'Name': 'PhoneNumber', 'Value': 254704935355}]}}}}"}
2024-09-09 16:17:03,531 - INFO - {'updated_data': 'callback data began'}
2024-09-09 16:17:03,531 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169231115', 'CheckoutRequestID': 'ws_CO_09092024191655212704935355', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9017025U'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909191702}, {'Name': 'PhoneNumber', 'Value': 254704935355}]}}}}}
2024-09-09 16:17:03,685 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:17:04,304 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:17:04,305 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:17:04,665 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:18:25,413 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:18:25,559 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:18:25,559 - INFO - {'updated': 'initiated stk query for ws_CO_09092024191813653728358227 827142 '}
2024-09-09 16:18:25,618 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:18:26,377 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:18:26,379 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer mj6vlRyKT8kXEj7ugptoCozqYyHg'}"}
2024-09-09 16:18:26,379 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTYxODI1', 'Timestamp': '20240909161825', 'CheckoutRequestID': 'ws_CO_09092024191813653728358227'}"}
2024-09-09 16:18:26,380 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:18:27,253 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 16:18:27,254 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc13853055', 'CheckoutRequestID': 'ws_CO_09092024191813653728358227', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024191813653728358227 827142"}
2024-09-09 16:18:27,390 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:18:27,991 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:18:27,992 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:18:28,346 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:20:24,151 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:20:24,288 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:20:24,288 - INFO - there is a test coming
2024-09-09 16:20:24,289 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 16:20:24,339 - INFO - {'updated_data': 'the data is now as 254710248031'}
2024-09-09 16:20:24,339 - INFO - the data is now as 254710248031
2024-09-09 16:20:24,356 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 16:20:24,356 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 16:20:24,357 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:20:25,117 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:20:25,119 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer UljIVJwDWr58cCQ5eG06Ca5R2BZ8'}"}
2024-09-09 16:20:25,119 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTYyMDI1', 'Timestamp': '20240909162025', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '200', 'PartyA': '254710248031', 'PartyB': 827142, 'PhoneNumber': '254710248031', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-37987', 'TransactionDesc': 'Some payment'}
2024-09-09 16:20:25,120 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:20:26,113 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-09 16:20:26,129 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee593776018', 'CheckoutRequestID': 'ws_CO_09092024192025834710248031', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 16:20:39,757 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee593776018', 'CheckoutRequestID': 'ws_CO_09092024192025834710248031', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9117UPGH'}, {'Name': 'TransactionDate', 'Value': 20240909192039}, {'Name': 'PhoneNumber', 'Value': 254710248031}]}}}}"}
2024-09-09 16:20:39,758 - INFO - {'updated_data': 'callback data began'}
2024-09-09 16:20:39,758 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee593776018', 'CheckoutRequestID': 'ws_CO_09092024192025834710248031', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9117UPGH'}, {'Name': 'TransactionDate', 'Value': 20240909192039}, {'Name': 'PhoneNumber', 'Value': 254710248031}]}}}}}
2024-09-09 16:20:39,907 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:20:40,529 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:20:40,530 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:20:40,917 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:20:47,071 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:20:47,228 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:20:47,229 - INFO - {'updated': 'initiated stk query for ws_CO_09092024192025834710248031 827142 '}
2024-09-09 16:20:47,299 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:20:48,322 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:20:48,324 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer rjAlFYCCjbLcXfqFffGkOSp6cEMR'}"}
2024-09-09 16:20:48,325 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTYyMDQ3', 'Timestamp': '20240909162047', 'CheckoutRequestID': 'ws_CO_09092024192025834710248031'}"}
2024-09-09 16:20:48,326 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:20:49,120 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-09 16:20:49,120 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee593776018', 'CheckoutRequestID': 'ws_CO_09092024192025834710248031', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024192025834710248031 827142"}
2024-09-09 16:20:49,244 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:20:49,541 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:20:49,543 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:20:50,240 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:21:41,508 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:21:41,679 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:21:41,679 - INFO - there is a test coming
2024-09-09 16:21:41,680 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 16:21:41,723 - INFO - {'updated_data': 'the data is now as 254719252546'}
2024-09-09 16:21:41,723 - INFO - the data is now as 254719252546
2024-09-09 16:21:41,742 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 16:21:41,742 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 16:21:41,743 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:21:42,482 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:21:42,485 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer xjHDH6ikuo4nfgVS1yPJ8gR7hhT2'}"}
2024-09-09 16:21:42,485 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTYyMTQy', 'Timestamp': '20240909162142', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '7000', 'PartyA': '254719252546', 'PartyB': 827142, 'PhoneNumber': '254719252546', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-52985', 'TransactionDesc': 'Some payment'}
2024-09-09 16:21:42,487 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:21:43,579 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 16:21:43,585 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86422787', 'CheckoutRequestID': 'ws_CO_09092024192143302719252546', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 16:23:56,016 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee593788165', 'CheckoutRequestID': 'ws_CO_09092024192342183716159759', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9418MLG6'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909192355}, {'Name': 'PhoneNumber', 'Value': 254716159759}]}}}}"}
2024-09-09 16:23:56,017 - INFO - {'updated_data': 'callback data began'}
2024-09-09 16:23:56,017 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee593788165', 'CheckoutRequestID': 'ws_CO_09092024192342183716159759', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9418MLG6'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909192355}, {'Name': 'PhoneNumber', 'Value': 254716159759}]}}}}}
2024-09-09 16:23:56,187 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:23:56,487 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:23:56,488 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:23:57,175 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:24:03,339 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:24:03,460 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:24:03,461 - INFO - {'updated': 'initiated stk query for ws_CO_09092024192342183716159759 899885 '}
2024-09-09 16:24:03,520 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:24:04,291 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:24:04,293 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer q1E3oXAN9GGEIGuc2TNpWerX6kge'}"}
2024-09-09 16:24:04,294 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTYyNDAz', 'Timestamp': '20240909162403', 'CheckoutRequestID': 'ws_CO_09092024192342183716159759'}"}
2024-09-09 16:24:04,295 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:24:05,117 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-09 16:24:05,118 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee593788165', 'CheckoutRequestID': 'ws_CO_09092024192342183716159759', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024192342183716159759 899885"}
2024-09-09 16:24:05,273 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:24:05,884 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:24:05,885 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:24:06,251 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:28:18,204 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:28:18,230 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-09 16:28:18,231 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-09 16:29:14,867 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:29:14,998 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:29:14,999 - INFO - there is a test coming
2024-09-09 16:29:14,999 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 16:29:15,060 - INFO - {'updated_data': 'the data is now as 254723073650'}
2024-09-09 16:29:15,061 - INFO - the data is now as 254723073650
2024-09-09 16:29:15,077 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 16:29:15,078 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 16:29:15,079 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:29:15,919 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:29:15,921 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer TNLlHXeHbwKSL2J0Fpka2cooCCum'}"}
2024-09-09 16:29:15,921 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTYyOTE1', 'Timestamp': '20240909162915', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2500', 'PartyA': '254723073650', 'PartyB': 899885, 'PhoneNumber': '254723073650', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053318', 'TransactionDesc': 'Some payment'}
2024-09-09 16:29:15,923 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:29:16,860 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 16:29:16,866 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074440625', 'CheckoutRequestID': 'ws_CO_09092024192916629723073650', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 16:29:26,732 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074440625', 'CheckoutRequestID': 'ws_CO_09092024192916629723073650', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9219X46Y'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909192926}, {'Name': 'PhoneNumber', 'Value': 254723073650}]}}}}"}
2024-09-09 16:29:26,732 - INFO - {'updated_data': 'callback data began'}
2024-09-09 16:29:26,732 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074440625', 'CheckoutRequestID': 'ws_CO_09092024192916629723073650', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9219X46Y'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909192926}, {'Name': 'PhoneNumber', 'Value': 254723073650}]}}}}}
2024-09-09 16:29:26,884 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:29:27,163 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:29:27,164 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:29:27,518 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:29:28,017 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:29:28,134 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:29:28,135 - INFO - {'updated': 'initiated stk query for ws_CO_09092024192916629723073650 899885 '}
2024-09-09 16:29:28,196 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:29:28,947 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:29:28,948 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer BYDJPMAkMmGh7Fwx4xmWIVpAF2gS'}"}
2024-09-09 16:29:28,949 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTYyOTI4', 'Timestamp': '20240909162928', 'CheckoutRequestID': 'ws_CO_09092024192916629723073650'}"}
2024-09-09 16:29:28,950 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:29:29,756 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 16:29:29,757 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074440625', 'CheckoutRequestID': 'ws_CO_09092024192916629723073650', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024192916629723073650 899885"}
2024-09-09 16:29:29,888 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:29:30,540 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:29:30,543 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:29:31,220 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:30:48,046 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:30:48,202 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:30:48,203 - INFO - {'updated': 'initiated stk query for ws_CO_09092024193035440114198971 899885 '}
2024-09-09 16:30:48,280 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:30:49,337 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:30:49,339 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer AaKbl7iYVi6fRMx9Km5nMMhEosYI'}"}
2024-09-09 16:30:49,339 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTYzMDQ4', 'Timestamp': '20240909163048', 'CheckoutRequestID': 'ws_CO_09092024193035440114198971'}"}
2024-09-09 16:30:49,340 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:30:50,216 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-09 16:30:50,217 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e168530636', 'CheckoutRequestID': 'ws_CO_09092024193035440114198971', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024193035440114198971 899885"}
2024-09-09 16:30:50,340 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:30:50,652 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:30:50,655 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:30:51,012 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:30:52,852 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:30:53,074 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:30:53,075 - INFO - there is a test coming
2024-09-09 16:30:53,075 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 16:30:53,119 - INFO - {'updated_data': 'the data is now as 254717123984'}
2024-09-09 16:30:53,119 - INFO - the data is now as 254717123984
2024-09-09 16:30:53,145 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 16:30:53,146 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 16:30:53,147 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:30:53,911 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:30:53,914 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer uiAxida6Xxo7ZTu2Cmrqzd8NLiXi'}"}
2024-09-09 16:30:53,914 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTYzMDUz', 'Timestamp': '20240909163053', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '500', 'PartyA': '254717123984', 'PartyB': 899885, 'PhoneNumber': '254717123984', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0615257-1725899451577', 'TransactionDesc': 'Some payment'}
2024-09-09 16:30:53,916 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:30:54,896 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 16:30:54,902 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074443120', 'CheckoutRequestID': 'ws_CO_09092024193054629717123984', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 16:32:19,036 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:32:19,179 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:32:19,180 - INFO - there is a test coming
2024-09-09 16:32:19,180 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 16:32:19,234 - INFO - {'updated_data': 'the data is now as 254721904277'}
2024-09-09 16:32:19,234 - INFO - the data is now as 254721904277
2024-09-09 16:32:19,253 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 16:32:19,253 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 16:32:19,254 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:32:20,003 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:32:20,005 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Zwnm3Vi5nWB85AouWCsvfAyxK9Fk'}"}
2024-09-09 16:32:20,005 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTYzMjIw', 'Timestamp': '20240909163220', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '140000', 'PartyA': '254721904277', 'PartyB': 899885, 'PhoneNumber': '254721904277', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053353', 'TransactionDesc': 'Some payment'}
2024-09-09 16:32:20,007 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:32:21,045 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-09 16:32:21,051 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b3455217', 'CheckoutRequestID': 'ws_CO_09092024193220834721904277', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 16:34:25,942 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:34:25,977 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-09 16:34:25,978 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-09 16:35:05,837 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:35:06,007 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:35:06,008 - INFO - there is a test coming
2024-09-09 16:35:06,008 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 16:35:06,069 - INFO - {'updated_data': 'the data is now as 254720469623'}
2024-09-09 16:35:06,070 - INFO - the data is now as 254720469623
2024-09-09 16:35:06,088 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 16:35:06,088 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 16:35:06,089 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:35:06,946 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:35:06,947 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer mNLqaVhUcPQaYI9QwBgMlmcdj32u'}"}
2024-09-09 16:35:06,948 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTYzNTA2', 'Timestamp': '20240909163506', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '14000', 'PartyA': '254720469623', 'PartyB': 899885, 'PhoneNumber': '254720469623', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA1590043LM-1725899681669', 'TransactionDesc': 'Some payment'}
2024-09-09 16:35:06,949 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:35:08,228 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-09 16:35:08,234 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169259393', 'CheckoutRequestID': 'ws_CO_09092024193507654720469623', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 16:35:10,161 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:35:10,335 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:35:10,336 - INFO - there is a test coming
2024-09-09 16:35:10,336 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 16:35:10,386 - INFO - {'updated_data': 'the data is now as 254721998271'}
2024-09-09 16:35:10,386 - INFO - the data is now as 254721998271
2024-09-09 16:35:10,408 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 16:35:10,408 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 16:35:10,409 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:35:11,219 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:35:11,222 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 1JR2qG5w6urh89eNPlu1YIV00GZy'}"}
2024-09-09 16:35:11,222 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTYzNTEx', 'Timestamp': '20240909163511', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3288', 'PartyA': '254721998271', 'PartyB': 827142, 'PhoneNumber': '254721998271', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-49266', 'TransactionDesc': 'Some payment'}
2024-09-09 16:35:11,223 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:35:12,203 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 16:35:12,212 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074450020', 'CheckoutRequestID': 'ws_CO_09092024193511952721998271', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 16:48:10,141 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:48:10,291 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:48:10,292 - INFO - {'updated': 'initiated stk query for ws_CO_09092024194755009722950764 899885 '}
2024-09-09 16:48:10,366 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:48:11,245 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:48:11,253 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer sm0s4TjMQMyYvUGAulVmSZSR4SBg'}"}
2024-09-09 16:48:11,254 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTY0ODEw', 'Timestamp': '20240909164810', 'CheckoutRequestID': 'ws_CO_09092024194755009722950764'}"}
2024-09-09 16:48:11,255 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:48:12,197 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 16:48:12,198 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc13964479', 'CheckoutRequestID': 'ws_CO_09092024194755009722950764', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024194755009722950764 899885"}
2024-09-09 16:48:12,319 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:48:12,614 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:48:12,616 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:48:12,986 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:48:20,621 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c229-4922-a304-de61d3eb488813957651', 'CheckoutRequestID': 'ws_CO_09092024194811845722994079', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}"}
2024-09-09 16:48:20,621 - INFO - {'updated_data': 'callback data began'}
2024-09-09 16:48:20,621 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c229-4922-a304-de61d3eb488813957651', 'CheckoutRequestID': 'ws_CO_09092024194811845722994079', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}}
2024-09-09 16:48:20,785 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:48:21,108 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:48:21,120 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:48:21,493 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:50:17,855 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074473632', 'CheckoutRequestID': 'ws_CO_09092024194959550723770077', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI931ELIT5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909195017}, {'Name': 'PhoneNumber', 'Value': 254723770077}]}}}}"}
2024-09-09 16:50:17,856 - INFO - {'updated_data': 'callback data began'}
2024-09-09 16:50:17,856 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074473632', 'CheckoutRequestID': 'ws_CO_09092024194959550723770077', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI931ELIT5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909195017}, {'Name': 'PhoneNumber', 'Value': 254723770077}]}}}}}
2024-09-09 16:50:18,055 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:50:18,537 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:50:18,539 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:50:18,902 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:50:41,921 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:50:42,118 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:50:42,119 - INFO - {'updated': 'initiated stk query for ws_CO_09092024194959550723770077 827142 '}
2024-09-09 16:50:42,184 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:50:42,968 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:50:42,970 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer AKhomDmAVnqizjaE2GlyhEsIF0X1'}"}
2024-09-09 16:50:42,970 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTY1MDQy', 'Timestamp': '20240909165042', 'CheckoutRequestID': 'ws_CO_09092024194959550723770077'}"}
2024-09-09 16:50:42,972 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:50:43,817 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 16:50:43,818 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074473632', 'CheckoutRequestID': 'ws_CO_09092024194959550723770077', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024194959550723770077 827142"}
2024-09-09 16:50:43,933 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:50:44,518 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:50:44,520 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:50:44,891 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:59:08,102 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:59:08,243 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:59:08,244 - INFO - {'updated': 'initiated stk query for ws_CO_09092024195854481718159756 899885 '}
2024-09-09 16:59:08,314 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:59:09,058 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:59:09,060 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer v50g9n2leBR1LdiYiVGsYqeXKlJY'}"}
2024-09-09 16:59:09,060 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTY1OTA4', 'Timestamp': '20240909165908', 'CheckoutRequestID': 'ws_CO_09092024195854481718159756'}"}
2024-09-09 16:59:09,061 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:59:09,911 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 528
2024-09-09 16:59:09,913 - INFO - {'updated': "Received response {'fault': {'faultstring': 'Failed to submit task to thread pool. Error = java.util.concurrent.RejectedExecutionException: Task java.util.concurrent.FutureTask@4db55007[Not completed, task = java.util.concurrent.Executors$RunnableAdapter@47c3bc21[Wrapped task = com.apigee.threadpool.QueueMetricsAwareTask@27181e03]] rejected from java.util.concurrent.ThreadPoolExecutor@3ed84c0a[Running, pool size = 100, active threads = 100, queued tasks = 1000, completed tasks = 33160512]', 'detail': {'errorcode': 'threadpool.ExecutionFailed'}}} for ws_CO_09092024195854481718159756 899885"}
2024-09-09 16:59:09,915 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-09 16:59:15,620 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 16:59:15,848 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 16:59:15,849 - INFO - {'updated': 'initiated stk query for ws_CO_09092024195854481718159756 899885 '}
2024-09-09 16:59:15,908 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:59:19,291 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 16:59:19,293 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer heASCQohpWwceLHvPbknFH6VnSOY'}"}
2024-09-09 16:59:19,294 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTY1OTE1', 'Timestamp': '20240909165915', 'CheckoutRequestID': 'ws_CO_09092024195854481718159756'}"}
2024-09-09 16:59:19,295 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 16:59:20,116 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 16:59:20,117 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86486875', 'CheckoutRequestID': 'ws_CO_09092024195854481718159756', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024195854481718159756 899885"}
2024-09-09 16:59:20,251 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:59:20,835 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:59:20,836 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:59:21,198 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 16:59:29,946 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86486875', 'CheckoutRequestID': 'ws_CO_09092024195854481718159756', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 800.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI951GF71P'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909195904}, {'Name': 'PhoneNumber', 'Value': 254718159756}]}}}}"}
2024-09-09 16:59:29,946 - INFO - {'updated_data': 'callback data began'}
2024-09-09 16:59:29,946 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86486875', 'CheckoutRequestID': 'ws_CO_09092024195854481718159756', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 800.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI951GF71P'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909195904}, {'Name': 'PhoneNumber', 'Value': 254718159756}]}}}}}
2024-09-09 16:59:30,150 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 16:59:30,786 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 16:59:30,787 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 16:59:31,476 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 17:00:24,670 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:00:24,821 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:00:24,822 - INFO - there is a test coming
2024-09-09 17:00:24,822 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 17:00:24,864 - INFO - {'updated_data': 'the data is now as 254722786077'}
2024-09-09 17:00:24,864 - INFO - the data is now as 254722786077
2024-09-09 17:00:24,880 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 17:00:24,880 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 17:00:24,881 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:00:26,344 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:00:26,346 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer JD82M1S2kKhpLSixOXmW3rKvktJZ'}"}
2024-09-09 17:00:26,346 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTcwMDI2', 'Timestamp': '20240909170026', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '4230', 'PartyA': '254722786077', 'PartyB': 827142, 'PhoneNumber': '254722786077', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '169-14191', 'TransactionDesc': 'Some payment'}
2024-09-09 17:00:26,347 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:00:27,277 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 17:00:27,283 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074496591', 'CheckoutRequestID': 'ws_CO_09092024200027045722786077', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 17:00:32,558 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:00:32,735 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:00:32,736 - INFO - there is a test coming
2024-09-09 17:00:32,736 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 17:00:32,783 - INFO - {'updated_data': 'the data is now as 254718488604'}
2024-09-09 17:00:32,783 - INFO - the data is now as 254718488604
2024-09-09 17:00:32,802 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 17:00:32,802 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 17:00:32,804 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:00:46,718 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 400 0
2024-09-09 17:00:46,720 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer '}"}
2024-09-09 17:00:46,721 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTcwMDQ2', 'Timestamp': '20240909170046', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254718488604', 'PartyB': 827142, 'PhoneNumber': '254718488604', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-21214', 'TransactionDesc': 'Some payment'}
2024-09-09 17:00:46,722 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:01:25,955 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 404 209
2024-09-09 17:01:25,957 - INFO -  th data is {'code': 404, 'message': {'requestId': 'c229-4922-a304-de61d3eb488814006668', 'errorCode': '404.001.03', 'errorMessage': 'Invalid Access Token'}}
2024-09-09 17:01:25,957 - WARNING - Not Found: /api/v1/stk/
2024-09-09 17:03:37,782 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:03:37,958 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:03:37,959 - INFO - there is a test coming
2024-09-09 17:03:37,959 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 17:03:38,005 - INFO - {'updated_data': 'the data is now as 254718488604'}
2024-09-09 17:03:38,006 - INFO - the data is now as 254718488604
2024-09-09 17:03:38,024 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 17:03:38,024 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 17:03:38,026 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:04:15,263 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:04:15,265 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer mAdbqsMX8DNqqvlMqB1sgOFEMufj'}"}
2024-09-09 17:04:15,266 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTcwNDE1', 'Timestamp': '20240909170415', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254718488604', 'PartyB': 827142, 'PhoneNumber': '254718488604', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-21214', 'TransactionDesc': 'Some payment'}
2024-09-09 17:04:15,267 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:04:16,235 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 17:04:16,241 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86501214', 'CheckoutRequestID': 'ws_CO_09092024200415994718488604', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 17:07:35,673 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:07:35,849 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:07:35,850 - INFO - {'updated': 'initiated stk query for ws_CO_09092024200718420702618124 827142 '}
2024-09-09 17:07:35,912 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:07:36,682 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:07:36,684 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer nHwUiFd6S1AvEJGw0OAzvmLQDUGP'}"}
2024-09-09 17:07:36,684 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTcwNzM1', 'Timestamp': '20240909170735', 'CheckoutRequestID': 'ws_CO_09092024200718420702618124'}"}
2024-09-09 17:07:36,686 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:07:37,575 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 17:07:37,576 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208792196778', 'CheckoutRequestID': 'ws_CO_09092024200718420702618124', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024200718420702618124 827142"}
2024-09-09 17:07:37,714 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 17:07:38,028 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 17:07:38,030 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 17:07:38,387 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 17:11:05,338 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:11:05,467 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:11:05,468 - INFO - {'updated': 'initiated stk query for ws_CO_09092024201054225710509532 899885 '}
2024-09-09 17:11:05,537 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:11:06,302 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:11:06,304 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer S0DhWTbCP5GFLGOl7ULwlePu1xqX'}"}
2024-09-09 17:11:06,304 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTcxMTA1', 'Timestamp': '20240909171105', 'CheckoutRequestID': 'ws_CO_09092024201054225710509532'}"}
2024-09-09 17:11:06,305 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:11:09,032 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 429 221
2024-09-09 17:11:09,033 - INFO - {'updated': "Received response {'fault': {'faultstring': 'Spike arrest violation. Allowed rate : MessageRate{messagesPerPeriod=25, periodInMicroseconds=1000000, maxBurstMessageCount=2.5}', 'detail': {'errorcode': 'policies.ratelimit.SpikeArrestViolation'}}} for ws_CO_09092024201054225710509532 899885"}
2024-09-09 17:11:09,035 - WARNING - Too Many Requests: /api/v1/stk/query/
2024-09-09 17:12:37,781 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:12:37,963 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:12:37,964 - INFO - there is a test coming
2024-09-09 17:12:37,964 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 17:12:38,009 - INFO - {'updated_data': 'the data is now as 254721250557'}
2024-09-09 17:12:38,009 - INFO - the data is now as 254721250557
2024-09-09 17:12:38,036 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 17:12:38,036 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 17:12:38,038 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:12:38,891 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:12:38,892 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer IEDFZ1xjTGl5LhHXeoyMDbOCRJ1G'}"}
2024-09-09 17:12:38,893 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTcxMjM4', 'Timestamp': '20240909171238', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2200', 'PartyA': '254721250557', 'PartyB': 899885, 'PhoneNumber': '254721250557', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053295', 'TransactionDesc': 'Some payment'}
2024-09-09 17:12:38,894 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:12:39,878 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-09 17:12:39,885 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6168854950', 'CheckoutRequestID': 'ws_CO_09092024201239609721250557', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 17:12:50,732 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:12:50,866 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:12:50,867 - INFO - {'updated': 'initiated stk query for ws_CO_09092024201239609721250557 899885 '}
2024-09-09 17:12:50,926 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:12:51,693 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:12:51,696 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 78wzYiWf0hrnAAjHWfavjeb7T5Dy'}"}
2024-09-09 17:12:51,696 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTcxMjUw', 'Timestamp': '20240909171250', 'CheckoutRequestID': 'ws_CO_09092024201239609721250557'}"}
2024-09-09 17:12:51,698 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:12:59,026 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-09 17:12:59,026 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6168854950', 'CheckoutRequestID': 'ws_CO_09092024201239609721250557', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024201239609721250557 899885"}
2024-09-09 17:12:59,139 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 17:12:59,711 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 17:12:59,713 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 17:13:00,071 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 17:13:32,496 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:13:32,652 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:13:32,653 - INFO - there is a test coming
2024-09-09 17:13:32,653 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 17:13:32,696 - INFO - {'updated_data': 'the data is now as 254722268435'}
2024-09-09 17:13:32,696 - INFO - the data is now as 254722268435
2024-09-09 17:13:32,717 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 17:13:32,717 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 17:13:32,719 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:13:33,493 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:13:33,495 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer kJi1U1tahmSQ5A9CAlGzWh3ZuAU5'}"}
2024-09-09 17:13:33,495 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTcxMzMz', 'Timestamp': '20240909171333', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254722268435', 'PartyB': 899885, 'PhoneNumber': '254722268435', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053323', 'TransactionDesc': 'Some payment'}
2024-09-09 17:13:33,496 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:13:34,571 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 17:13:34,577 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc14067331', 'CheckoutRequestID': 'ws_CO_09092024201334303722268435', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 17:13:43,540 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc14067331', 'CheckoutRequestID': 'ws_CO_09092024201334303722268435', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI951JD6Z1'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909201342}, {'Name': 'PhoneNumber', 'Value': 254722268435}]}}}}"}
2024-09-09 17:13:43,541 - INFO - {'updated_data': 'callback data began'}
2024-09-09 17:13:43,541 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc14067331', 'CheckoutRequestID': 'ws_CO_09092024201334303722268435', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI951JD6Z1'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909201342}, {'Name': 'PhoneNumber', 'Value': 254722268435}]}}}}}
2024-09-09 17:13:43,701 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 17:13:44,317 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 17:13:44,318 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 17:13:44,969 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 17:13:46,306 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:13:46,442 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:13:46,443 - INFO - {'updated': 'initiated stk query for ws_CO_09092024201334303722268435 899885 '}
2024-09-09 17:13:46,497 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:13:47,467 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:13:47,469 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer DsUo83fbMTi2TN2rp21DpsAJHCnG'}"}
2024-09-09 17:13:47,469 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTcxMzQ2', 'Timestamp': '20240909171346', 'CheckoutRequestID': 'ws_CO_09092024201334303722268435'}"}
2024-09-09 17:13:47,471 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:13:48,415 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 17:13:48,416 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc14067331', 'CheckoutRequestID': 'ws_CO_09092024201334303722268435', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024201334303722268435 899885"}
2024-09-09 17:13:48,546 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 17:13:49,147 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 17:13:49,149 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 17:13:49,522 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 17:24:37,655 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:24:37,802 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:24:37,803 - INFO - {'updated': 'initiated stk query for ws_CO_09092024202413196710461538 899885 '}
2024-09-09 17:24:37,878 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:24:41,125 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:24:41,128 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 0hzVrZI98iCtnwBpgTZNZTXttLZD'}"}
2024-09-09 17:24:41,128 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTcyNDM3', 'Timestamp': '20240909172437', 'CheckoutRequestID': 'ws_CO_09092024202413196710461538'}"}
2024-09-09 17:24:41,129 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:25:11,617 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 404 174
2024-09-09 17:25:11,618 - INFO - {'updated': "Received response {'requestId': '', 'errorCode': '404.001.03', 'errorMessage': 'Invalid Access Token'} for ws_CO_09092024202413196710461538 899885"}
2024-09-09 17:25:11,620 - WARNING - Not Found: /api/v1/stk/query/
2024-09-09 17:32:16,775 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:32:16,893 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:32:16,894 - INFO - {'updated': 'initiated stk query for ws_CO_09092024203204684110095544 827142 '}
2024-09-09 17:32:16,958 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:32:17,816 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:32:17,818 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer wGyxi0PIZbxtQEcl6zHOw0fkGNac'}"}
2024-09-09 17:32:17,818 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTczMjE2', 'Timestamp': '20240909173216', 'CheckoutRequestID': 'ws_CO_09092024203204684110095544'}"}
2024-09-09 17:32:17,819 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:32:33,532 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 17:32:33,533 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074585101', 'CheckoutRequestID': 'ws_CO_09092024203204684110095544', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024203204684110095544 827142"}
2024-09-09 17:32:33,663 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 17:32:34,261 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 17:32:34,262 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 17:32:34,623 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 17:32:40,366 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074585101', 'CheckoutRequestID': 'ws_CO_09092024203204684110095544', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 600.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI931MYZUV'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909203214}, {'Name': 'PhoneNumber', 'Value': 254110095544}]}}}}"}
2024-09-09 17:32:40,366 - INFO - {'updated_data': 'callback data began'}
2024-09-09 17:32:40,366 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074585101', 'CheckoutRequestID': 'ws_CO_09092024203204684110095544', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 600.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI931MYZUV'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909203214}, {'Name': 'PhoneNumber', 'Value': 254110095544}]}}}}}
2024-09-09 17:32:40,573 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 17:32:40,873 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 17:32:40,874 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 17:32:41,232 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 17:33:26,056 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b3711762', 'CheckoutRequestID': 'ws_CO_09092024203316545706631104', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI981N79EY'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909203325}, {'Name': 'PhoneNumber', 'Value': 254706631104}]}}}}"}
2024-09-09 17:33:26,056 - INFO - {'updated_data': 'callback data began'}
2024-09-09 17:33:26,056 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b3711762', 'CheckoutRequestID': 'ws_CO_09092024203316545706631104', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI981N79EY'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909203325}, {'Name': 'PhoneNumber', 'Value': 254706631104}]}}}}}
2024-09-09 17:33:26,215 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 17:33:26,496 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 17:33:26,497 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 17:33:26,827 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 17:38:01,546 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:38:01,694 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:38:01,694 - INFO - there is a test coming
2024-09-09 17:38:01,695 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 17:38:01,745 - INFO - {'updated_data': 'the data is now as 254110095544'}
2024-09-09 17:38:01,745 - INFO - the data is now as 254110095544
2024-09-09 17:38:01,768 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 17:38:01,768 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 17:38:01,769 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:38:12,615 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:38:12,618 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer nBEgyhGJPczPMbSd16j0AgiCy0dd'}"}
2024-09-09 17:38:12,618 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTczODEy', 'Timestamp': '20240909173812', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '4769', 'PartyA': '254110095544', 'PartyB': 827142, 'PhoneNumber': '254110095544', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '201-788', 'TransactionDesc': 'Some payment'}
2024-09-09 17:38:12,619 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:38:44,060 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 500 90
2024-09-09 17:38:44,063 - INFO -  th data is {'code': 500, 'message': {'fault': {'faultstring': 'Datastore Error', 'detail': {'errorcode': 'Internal Server Error'}}}}
2024-09-09 17:38:44,064 - ERROR - Internal Server Error: /api/v1/stk/
2024-09-09 17:39:36,340 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b514194590', 'CheckoutRequestID': 'ws_CO_09092024203844455726081260', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 313.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI921O7YWE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909203850}, {'Name': 'PhoneNumber', 'Value': 254726081260}]}}}}"}
2024-09-09 17:39:36,340 - INFO - {'updated_data': 'callback data began'}
2024-09-09 17:39:36,340 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b514194590', 'CheckoutRequestID': 'ws_CO_09092024203844455726081260', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 313.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI921O7YWE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909203850}, {'Name': 'PhoneNumber', 'Value': 254726081260}]}}}}}
2024-09-09 17:39:36,503 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 17:39:37,110 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 17:39:37,111 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 17:39:37,769 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 17:39:38,556 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074603438', 'CheckoutRequestID': 'ws_CO_09092024203858923110095544', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-09 17:39:38,556 - INFO - {'updated_data': 'callback data began'}
2024-09-09 17:39:38,556 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074603438', 'CheckoutRequestID': 'ws_CO_09092024203858923110095544', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-09 17:39:38,727 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 17:39:39,314 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 17:39:39,315 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 17:39:39,673 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 17:39:58,131 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:39:58,152 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-09 17:39:58,153 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-09 17:40:08,093 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:40:08,277 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:40:08,278 - INFO - {'updated': 'initiated stk query for ws_CO_09092024203936317712893411 899885 '}
2024-09-09 17:40:08,340 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:40:09,134 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:40:09,137 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer cA6yFpxaNvGhfWjtShkzzz1TrlG5'}"}
2024-09-09 17:40:09,137 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTc0MDA4', 'Timestamp': '20240909174008', 'CheckoutRequestID': 'ws_CO_09092024203936317712893411'}"}
2024-09-09 17:40:09,138 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:40:09,949 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 384
2024-09-09 17:40:09,950 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b9142758505159233', 'CheckoutRequestID': 'ws_CO_09092024203936317712893411', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024203936317712893411 899885"}
2024-09-09 17:40:10,083 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 17:40:10,370 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 17:40:10,372 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 17:40:10,732 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 17:40:49,539 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:40:49,669 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:40:49,670 - INFO - there is a test coming
2024-09-09 17:40:49,670 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 17:40:49,714 - INFO - {'updated_data': 'the data is now as 254110095544'}
2024-09-09 17:40:49,715 - INFO - the data is now as 254110095544
2024-09-09 17:40:49,733 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 17:40:49,733 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 17:40:49,734 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:40:50,484 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:40:50,486 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer jXb7Ak4dqgG0rUVYxIwMiRA2MLOA'}"}
2024-09-09 17:40:50,486 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTc0MDUw', 'Timestamp': '20240909174050', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '4769', 'PartyA': '254110095544', 'PartyB': 827142, 'PhoneNumber': '254110095544', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '201-788', 'TransactionDesc': 'Some payment'}
2024-09-09 17:40:50,488 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:40:51,546 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 17:40:51,553 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db14209683', 'CheckoutRequestID': 'ws_CO_09092024204051197110095544', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 17:41:02,941 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:41:03,102 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:41:03,103 - INFO - {'updated': 'initiated stk query for ws_CO_09092024204051197110095544 827142 '}
2024-09-09 17:41:03,163 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:41:04,962 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:41:04,964 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer o2XoG7L6ASq9s1jsiqdpwoZBfVWU'}"}
2024-09-09 17:41:04,964 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTc0MTAz', 'Timestamp': '20240909174103', 'CheckoutRequestID': 'ws_CO_09092024204051197110095544'}"}
2024-09-09 17:41:04,965 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:41:05,794 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-09 17:41:05,795 - INFO - {'updated': "Received response {'requestId': 'ws_CO_09092024204051197110095544', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_09092024204051197110095544 827142"}
2024-09-09 17:41:05,797 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-09 17:41:12,609 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:41:12,748 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:41:12,749 - INFO - {'updated': 'initiated stk query for ws_CO_09092024204051197110095544 827142 '}
2024-09-09 17:41:12,812 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:41:13,581 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:41:13,583 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer E0WIqQuBVS7zK2SDgRNgQigp0A9O'}"}
2024-09-09 17:41:13,584 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTc0MTEy', 'Timestamp': '20240909174112', 'CheckoutRequestID': 'ws_CO_09092024204051197110095544'}"}
2024-09-09 17:41:13,585 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:41:14,421 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-09 17:41:14,422 - INFO - {'updated': "Received response {'requestId': 'ws_CO_09092024204051197110095544', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_09092024204051197110095544 827142"}
2024-09-09 17:41:14,424 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-09 17:41:34,414 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db14209683', 'CheckoutRequestID': 'ws_CO_09092024204051197110095544', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-09 17:41:34,414 - INFO - {'updated_data': 'callback data began'}
2024-09-09 17:41:34,415 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db14209683', 'CheckoutRequestID': 'ws_CO_09092024204051197110095544', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-09 17:41:34,582 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 17:41:35,050 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 17:41:35,052 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 17:41:35,704 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 17:43:54,959 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:43:55,169 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:43:55,170 - INFO - there is a test coming
2024-09-09 17:43:55,170 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 17:43:55,292 - INFO - {'updated_data': 'the data is now as 254726081260'}
2024-09-09 17:43:55,293 - INFO - the data is now as 254726081260
2024-09-09 17:43:55,320 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 17:43:55,320 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 17:43:55,321 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:43:56,158 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:43:56,160 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer kkLD4ZNoUrsAM3GuVODIrUMAGM2d'}"}
2024-09-09 17:43:56,160 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTc0MzU2', 'Timestamp': '20240909174356', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3699', 'PartyA': '254726081260', 'PartyB': 827142, 'PhoneNumber': '254726081260', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '169-13536', 'TransactionDesc': 'Some payment'}
2024-09-09 17:43:56,161 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:43:57,299 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 17:43:57,305 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86610779', 'CheckoutRequestID': 'ws_CO_09092024204356943726081260', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 17:44:08,391 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:44:08,542 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:44:08,543 - INFO - {'updated': 'initiated stk query for ws_CO_09092024204356943726081260 827142 '}
2024-09-09 17:44:08,637 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:44:09,378 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:44:09,380 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer EQeJMsg6jz6dix4JWwmSJf46jbU5'}"}
2024-09-09 17:44:09,380 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTc0NDA4', 'Timestamp': '20240909174408', 'CheckoutRequestID': 'ws_CO_09092024204356943726081260'}"}
2024-09-09 17:44:09,381 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:44:10,294 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 17:44:10,294 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86610779', 'CheckoutRequestID': 'ws_CO_09092024204356943726081260', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024204356943726081260 827142"}
2024-09-09 17:44:10,408 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 17:44:10,526 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86610779', 'CheckoutRequestID': 'ws_CO_09092024204356943726081260', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3699.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI991P706F'}, {'Name': 'TransactionDate', 'Value': 20240909204409}, {'Name': 'PhoneNumber', 'Value': 254726081260}]}}}}"}
2024-09-09 17:44:10,527 - INFO - {'updated_data': 'callback data began'}
2024-09-09 17:44:10,527 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86610779', 'CheckoutRequestID': 'ws_CO_09092024204356943726081260', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3699.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI991P706F'}, {'Name': 'TransactionDate', 'Value': 20240909204409}, {'Name': 'PhoneNumber', 'Value': 254726081260}]}}}}}
2024-09-09 17:44:10,700 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 17:44:10,764 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 17:44:10,768 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 17:44:11,014 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 17:44:11,016 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 17:44:11,367 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 17:44:11,445 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 17:46:05,722 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:46:05,902 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:46:05,903 - INFO - there is a test coming
2024-09-09 17:46:05,903 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 17:46:05,952 - INFO - {'updated_data': 'the data is now as 254725161615'}
2024-09-09 17:46:05,952 - INFO - the data is now as 254725161615
2024-09-09 17:46:05,970 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 17:46:05,970 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 17:46:05,971 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:46:07,312 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:46:07,314 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer vTZCzBOAKrJLRma5dtyiMlX1hmdT'}"}
2024-09-09 17:46:07,314 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTc0NjA3', 'Timestamp': '20240909174607', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254725161615', 'PartyB': 899885, 'PhoneNumber': '254725161615', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA1668449LM-1725903964468', 'TransactionDesc': 'Some payment'}
2024-09-09 17:46:07,315 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:46:08,394 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 17:46:08,405 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208792301284', 'CheckoutRequestID': 'ws_CO_09092024204608038725161615', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 17:46:39,487 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:46:39,499 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-09 17:46:39,500 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-09 17:49:12,735 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:49:12,876 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:49:12,877 - INFO - there is a test coming
2024-09-09 17:49:12,877 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 17:49:12,924 - INFO - {'updated_data': 'the data is now as 254722507556'}
2024-09-09 17:49:12,925 - INFO - the data is now as 254722507556
2024-09-09 17:49:12,951 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 17:49:12,954 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 17:49:12,955 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:49:13,822 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:49:13,824 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 8rh347hKqbO9FWvq7mekC5qgHz7s'}"}
2024-09-09 17:49:13,825 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTc0OTEz', 'Timestamp': '20240909174913', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254722507556', 'PartyB': 827142, 'PhoneNumber': '254722507556', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-27167', 'TransactionDesc': 'Some payment'}
2024-09-09 17:49:13,826 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:49:15,588 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 17:49:15,595 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b514248931', 'CheckoutRequestID': 'ws_CO_09092024204915211722507556', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 17:49:29,069 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b514248931', 'CheckoutRequestID': 'ws_CO_09092024204915211722507556', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI911Q586Z'}, {'Name': 'TransactionDate', 'Value': 20240909204928}, {'Name': 'PhoneNumber', 'Value': 254722507556}]}}}}"}
2024-09-09 17:49:29,070 - INFO - {'updated_data': 'callback data began'}
2024-09-09 17:49:29,070 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b514248931', 'CheckoutRequestID': 'ws_CO_09092024204915211722507556', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI911Q586Z'}, {'Name': 'TransactionDate', 'Value': 20240909204928}, {'Name': 'PhoneNumber', 'Value': 254722507556}]}}}}}
2024-09-09 17:49:29,237 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 17:49:29,835 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 17:49:29,836 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 17:49:30,496 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 17:51:13,854 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:51:13,998 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:51:13,999 - INFO - {'updated': 'initiated stk query for ws_CO_09092024205101250723353865 899885 '}
2024-09-09 17:51:14,056 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:51:14,810 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:51:14,812 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer CoK0pG4dRsyo7fQ5BrFLJfX9vIwc'}"}
2024-09-09 17:51:14,813 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTc1MTE0', 'Timestamp': '20240909175114', 'CheckoutRequestID': 'ws_CO_09092024205101250723353865'}"}
2024-09-09 17:51:14,814 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:51:15,622 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 17:51:15,622 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208792313633', 'CheckoutRequestID': 'ws_CO_09092024205101250723353865', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024205101250723353865 899885"}
2024-09-09 17:51:15,737 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 17:51:16,328 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 17:51:16,329 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 17:51:16,681 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 17:51:21,826 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:51:21,954 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:51:21,954 - INFO - there is a test coming
2024-09-09 17:51:21,954 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 17:51:22,010 - INFO - {'updated_data': 'the data is now as 254723490763'}
2024-09-09 17:51:22,010 - INFO - the data is now as 254723490763
2024-09-09 17:51:22,030 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 17:51:22,030 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 17:51:22,032 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:51:23,002 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:51:23,004 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer BTe9h64cARmrw03vcaAe7Q0ZbsgT'}"}
2024-09-09 17:51:23,005 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTc1MTIz', 'Timestamp': '20240909175123', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '200', 'PartyA': '254723490763', 'PartyB': 899885, 'PhoneNumber': '254723490763', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA1666858CP-1725904281880', 'TransactionDesc': 'Some payment'}
2024-09-09 17:51:23,006 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:51:23,950 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 17:51:23,957 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86628988', 'CheckoutRequestID': 'ws_CO_09092024205123732723490763', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 17:51:36,109 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792313633', 'CheckoutRequestID': 'ws_CO_09092024205101250723353865', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI931QFQA5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909205110}, {'Name': 'PhoneNumber', 'Value': 254723353865}]}}}}"}
2024-09-09 17:51:36,109 - INFO - {'updated_data': 'callback data began'}
2024-09-09 17:51:36,110 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792313633', 'CheckoutRequestID': 'ws_CO_09092024205101250723353865', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI931QFQA5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909205110}, {'Name': 'PhoneNumber', 'Value': 254723353865}]}}}}}
2024-09-09 17:51:36,295 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 17:51:36,908 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 17:51:36,910 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 17:51:37,300 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 17:52:34,209 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:52:34,504 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:52:34,505 - INFO - {'updated': 'initiated stk query for ws_CO_09092024205212655723490763 899885 '}
2024-09-09 17:52:34,568 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:52:35,328 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:52:35,330 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer oSbaZ0lJG6sTJUd6Px5E2JvdSgGx'}"}
2024-09-09 17:52:35,331 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTc1MjM0', 'Timestamp': '20240909175234', 'CheckoutRequestID': 'ws_CO_09092024205212655723490763'}"}
2024-09-09 17:52:35,332 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:52:36,135 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-09 17:52:36,136 - INFO - {'updated': "Received response {'requestId': 'ws_CO_09092024205212655723490763', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_09092024205212655723490763 899885"}
2024-09-09 17:52:36,138 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-09 17:52:40,835 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:52:41,000 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:52:41,001 - INFO - there is a test coming
2024-09-09 17:52:41,001 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 17:52:41,044 - INFO - {'updated_data': 'the data is now as 254710323038'}
2024-09-09 17:52:41,044 - INFO - the data is now as 254710323038
2024-09-09 17:52:41,072 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 17:52:41,072 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 17:52:41,073 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:52:41,830 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:52:41,838 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer TOLDcgZJHqa84YUX2D7zHFKE74pa'}"}
2024-09-09 17:52:41,838 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTc1MjQx', 'Timestamp': '20240909175241', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254710323038', 'PartyB': 827142, 'PhoneNumber': '254710323038', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-17946', 'TransactionDesc': 'Some payment'}
2024-09-09 17:52:41,840 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:52:54,636 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-09 17:52:54,642 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee594181409', 'CheckoutRequestID': 'ws_CO_09092024205245062710323038', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 17:53:05,484 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee594181409', 'CheckoutRequestID': 'ws_CO_09092024205245062710323038', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI931QQH67'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909205257}, {'Name': 'PhoneNumber', 'Value': 254710323038}]}}}}"}
2024-09-09 17:53:05,486 - INFO - {'updated_data': 'callback data began'}
2024-09-09 17:53:05,486 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee594181409', 'CheckoutRequestID': 'ws_CO_09092024205245062710323038', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI931QQH67'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909205257}, {'Name': 'PhoneNumber', 'Value': 254710323038}]}}}}}
2024-09-09 17:53:05,656 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 17:53:05,939 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 17:53:05,941 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 17:53:06,370 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 17:53:06,615 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074637013', 'CheckoutRequestID': 'ws_CO_09092024205212655723490763', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI901QOCVQ'}, {'Name': 'TransactionDate', 'Value': 20240909205237}, {'Name': 'PhoneNumber', 'Value': 254723490763}]}}}}"}
2024-09-09 17:53:06,615 - INFO - {'updated_data': 'callback data began'}
2024-09-09 17:53:06,615 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074637013', 'CheckoutRequestID': 'ws_CO_09092024205212655723490763', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI901QOCVQ'}, {'Name': 'TransactionDate', 'Value': 20240909205237}, {'Name': 'PhoneNumber', 'Value': 254723490763}]}}}}}
2024-09-09 17:53:06,782 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 17:53:07,066 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 17:53:07,067 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 17:53:07,405 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 17:56:54,767 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b3828413', 'CheckoutRequestID': 'ws_CO_09092024205632615710323038', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI931RDLER'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909205643}, {'Name': 'PhoneNumber', 'Value': 254710323038}]}}}}"}
2024-09-09 17:56:54,767 - INFO - {'updated_data': 'callback data began'}
2024-09-09 17:56:54,767 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b3828413', 'CheckoutRequestID': 'ws_CO_09092024205632615710323038', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI931RDLER'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909205643}, {'Name': 'PhoneNumber', 'Value': 254710323038}]}}}}}
2024-09-09 17:56:54,924 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 17:56:55,210 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 17:56:55,212 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 17:56:55,583 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 17:57:13,190 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 17:57:13,365 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 17:57:13,365 - INFO - there is a test coming
2024-09-09 17:57:13,366 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 17:57:13,414 - INFO - {'updated_data': 'the data is now as 254722916059'}
2024-09-09 17:57:13,414 - INFO - the data is now as 254722916059
2024-09-09 17:57:13,433 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 17:57:13,433 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 17:57:13,435 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:57:19,749 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 17:57:19,752 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer VrKbpwiotPqw6Izqn4A50WOCZFmk'}"}
2024-09-09 17:57:19,752 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTc1NzE5', 'Timestamp': '20240909175719', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254722916059', 'PartyB': 827142, 'PhoneNumber': '254722916059', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-11914', 'TransactionDesc': 'Some payment'}
2024-09-09 17:57:19,754 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 17:57:20,648 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-09 17:57:20,654 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6168974041', 'CheckoutRequestID': 'ws_CO_09092024205720420722916059', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 18:06:01,967 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:06:02,133 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 18:06:02,134 - INFO - there is a test coming
2024-09-09 18:06:02,134 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 18:06:02,204 - INFO - {'updated_data': 'the data is now as 254727388563'}
2024-09-09 18:06:02,204 - INFO - the data is now as 254727388563
2024-09-09 18:06:02,223 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 18:06:02,223 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 18:06:02,224 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:06:03,080 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 18:06:03,082 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 8k7rLrlqQURyOLD64kZ2eA4jkBSF'}"}
2024-09-09 18:06:03,083 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTgwNjAz', 'Timestamp': '20240909180603', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '15130', 'PartyA': '254727388563', 'PartyB': 827142, 'PhoneNumber': '254727388563', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-50783', 'TransactionDesc': 'Some payment'}
2024-09-09 18:06:03,084 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:06:04,191 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 18:06:04,197 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db14340245', 'CheckoutRequestID': 'ws_CO_09092024210603861727388563', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 18:06:37,696 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:06:37,850 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 18:06:37,851 - INFO - there is a test coming
2024-09-09 18:06:37,851 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 18:06:37,909 - INFO - {'updated_data': 'the data is now as 254722757298'}
2024-09-09 18:06:37,910 - INFO - the data is now as 254722757298
2024-09-09 18:06:37,927 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 18:06:37,928 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 18:06:37,929 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:06:38,663 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 18:06:38,665 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer SZADsBzeoMYceAydvvDt8PYhZH4d'}"}
2024-09-09 18:06:38,666 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTgwNjM4', 'Timestamp': '20240909180638', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254722757298', 'PartyB': 827142, 'PhoneNumber': '254722757298', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-17801', 'TransactionDesc': 'Some payment'}
2024-09-09 18:06:38,667 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:06:39,562 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-09 18:06:39,569 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169479678', 'CheckoutRequestID': 'ws_CO_09092024210639369722757298', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 18:06:48,595 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169479678', 'CheckoutRequestID': 'ws_CO_09092024210639369722757298', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI991T0JMD'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909210647}, {'Name': 'PhoneNumber', 'Value': 254722757298}]}}}}"}
2024-09-09 18:06:48,596 - INFO - {'updated_data': 'callback data began'}
2024-09-09 18:06:48,596 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169479678', 'CheckoutRequestID': 'ws_CO_09092024210639369722757298', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI991T0JMD'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909210647}, {'Name': 'PhoneNumber', 'Value': 254722757298}]}}}}}
2024-09-09 18:06:48,746 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 18:06:49,044 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 18:06:49,046 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 18:06:49,698 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 18:06:51,640 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:06:51,761 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 18:06:51,762 - INFO - {'updated': 'initiated stk query for ws_CO_09092024210639369722757298 827142 '}
2024-09-09 18:06:51,830 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:06:52,653 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 18:06:52,655 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer k0aVh31If8hGLilGYWIzm0ixG1I0'}"}
2024-09-09 18:06:52,656 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTgwNjUx', 'Timestamp': '20240909180651', 'CheckoutRequestID': 'ws_CO_09092024210639369722757298'}"}
2024-09-09 18:06:52,657 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:06:53,426 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-09 18:06:53,427 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169479678', 'CheckoutRequestID': 'ws_CO_09092024210639369722757298', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024210639369722757298 827142"}
2024-09-09 18:06:53,553 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 18:06:54,144 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 18:06:54,146 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 18:06:54,802 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 18:09:36,906 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169485440', 'CheckoutRequestID': 'ws_CO_09092024210925839745883316', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI961TG61S'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909210935}, {'Name': 'PhoneNumber', 'Value': 254745883316}]}}}}"}
2024-09-09 18:09:36,907 - INFO - {'updated_data': 'callback data began'}
2024-09-09 18:09:36,907 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169485440', 'CheckoutRequestID': 'ws_CO_09092024210925839745883316', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI961TG61S'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909210935}, {'Name': 'PhoneNumber', 'Value': 254745883316}]}}}}}
2024-09-09 18:09:37,100 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 18:09:37,696 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 18:09:37,697 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 18:09:38,041 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 18:09:40,545 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:09:40,701 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 18:09:40,702 - INFO - {'updated': 'initiated stk query for ws_CO_09092024210925839745883316 899885 '}
2024-09-09 18:09:40,769 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:09:41,530 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 18:09:41,532 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer MX3CmHMAtAxLwfM9Z8jJKMeZOOXj'}"}
2024-09-09 18:09:41,532 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTgwOTQw', 'Timestamp': '20240909180940', 'CheckoutRequestID': 'ws_CO_09092024210925839745883316'}"}
2024-09-09 18:09:41,534 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:09:42,426 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-09 18:09:42,426 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169485440', 'CheckoutRequestID': 'ws_CO_09092024210925839745883316', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024210925839745883316 899885"}
2024-09-09 18:09:42,545 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 18:09:43,132 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 18:09:43,133 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 18:09:43,775 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 18:13:12,128 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:13:12,272 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 18:13:12,272 - INFO - there is a test coming
2024-09-09 18:13:12,272 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 18:13:12,317 - INFO - {'updated_data': 'the data is now as 254713049995'}
2024-09-09 18:13:12,317 - INFO - the data is now as 254713049995
2024-09-09 18:13:12,333 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 18:13:12,333 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 18:13:12,334 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:13:13,103 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 18:13:13,105 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer SeTSpebCbkAgcRWi7SFXJYBDGKle'}"}
2024-09-09 18:13:13,106 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTgxMzEz', 'Timestamp': '20240909181313', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100000', 'PartyA': '254713049995', 'PartyB': 899885, 'PhoneNumber': '254713049995', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053401', 'TransactionDesc': 'Some payment'}
2024-09-09 18:13:13,107 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:13:14,340 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 18:13:14,347 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074683573', 'CheckoutRequestID': 'ws_CO_09092024211313906713049995', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 18:13:26,917 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:13:27,038 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 18:13:27,039 - INFO - {'updated': 'initiated stk query for ws_CO_09092024211305008720162444 827142 '}
2024-09-09 18:13:27,097 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:13:27,848 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 18:13:27,849 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ELsIHBqpyUWJzRkpGI8n1EBWGO2K'}"}
2024-09-09 18:13:27,850 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTgxMzI3', 'Timestamp': '20240909181327', 'CheckoutRequestID': 'ws_CO_09092024211305008720162444'}"}
2024-09-09 18:13:27,851 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:13:28,773 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 18:13:28,774 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208792363324', 'CheckoutRequestID': 'ws_CO_09092024211305008720162444', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024211305008720162444 827142"}
2024-09-09 18:13:28,969 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 18:13:29,240 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 18:13:29,241 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 18:13:29,599 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 18:14:05,594 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:14:05,949 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 18:14:05,950 - INFO - there is a test coming
2024-09-09 18:14:05,950 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 18:14:05,998 - INFO - {'updated_data': 'the data is now as 254707876842'}
2024-09-09 18:14:05,999 - INFO - the data is now as 254707876842
2024-09-09 18:14:06,020 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 18:14:06,020 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 18:14:06,021 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:14:06,780 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 18:14:06,782 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer hLtY62blCsoOYuKqLRGIpbk2jHNZ'}"}
2024-09-09 18:14:06,783 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTgxNDA2', 'Timestamp': '20240909181406', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1900', 'PartyA': '254707876842', 'PartyB': 899885, 'PhoneNumber': '254707876842', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053326', 'TransactionDesc': 'Some payment'}
2024-09-09 18:14:06,785 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:14:07,827 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 18:14:07,833 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208792365435', 'CheckoutRequestID': 'ws_CO_09092024211407587707876842', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 18:14:21,427 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792365435', 'CheckoutRequestID': 'ws_CO_09092024211407587707876842', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1900.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI961U5XZM'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909211418}, {'Name': 'PhoneNumber', 'Value': 254707876842}]}}}}"}
2024-09-09 18:14:21,427 - INFO - {'updated_data': 'callback data began'}
2024-09-09 18:14:21,427 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792365435', 'CheckoutRequestID': 'ws_CO_09092024211407587707876842', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1900.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI961U5XZM'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909211418}, {'Name': 'PhoneNumber', 'Value': 254707876842}]}}}}}
2024-09-09 18:14:21,581 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 18:14:22,171 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 18:14:22,172 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 18:14:22,839 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 18:14:28,872 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:14:29,069 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 18:14:29,070 - INFO - {'updated': 'initiated stk query for ws_CO_09092024211407587707876842 899885 '}
2024-09-09 18:14:29,123 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:14:29,845 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 18:14:29,847 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer wfHgXzDYTkNhrSrLePCtWh1oxMql'}"}
2024-09-09 18:14:29,848 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTgxNDI5', 'Timestamp': '20240909181429', 'CheckoutRequestID': 'ws_CO_09092024211407587707876842'}"}
2024-09-09 18:14:29,849 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:14:30,654 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 18:14:30,654 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208792365435', 'CheckoutRequestID': 'ws_CO_09092024211407587707876842', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024211407587707876842 899885"}
2024-09-09 18:14:30,769 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 18:14:31,408 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 18:14:31,410 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 18:14:31,764 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 18:18:16,402 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:18:16,537 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 18:18:16,538 - INFO - there is a test coming
2024-09-09 18:18:16,539 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 18:18:16,581 - INFO - {'updated_data': 'the data is now as 254769155498'}
2024-09-09 18:18:16,581 - INFO - the data is now as 254769155498
2024-09-09 18:18:16,614 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 18:18:16,615 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 18:18:16,616 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:18:17,635 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 18:18:17,637 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer BxLtDr2xYpbiOYAxCcWepUZQtX4O'}"}
2024-09-09 18:18:17,637 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTgxODE3', 'Timestamp': '20240909181817', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '150', 'PartyA': '254769155498', 'PartyB': 899885, 'PhoneNumber': '254769155498', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0624416-1725905895406', 'TransactionDesc': 'Some payment'}
2024-09-09 18:18:17,639 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:18:18,570 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 18:18:18,577 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db14404108', 'CheckoutRequestID': 'ws_CO_09092024211818337769155498', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 18:18:31,383 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db14404108', 'CheckoutRequestID': 'ws_CO_09092024211818337769155498', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 150.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI901URXXG'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909211830}, {'Name': 'PhoneNumber', 'Value': 254769155498}]}}}}"}
2024-09-09 18:18:31,384 - INFO - {'updated_data': 'callback data began'}
2024-09-09 18:18:31,385 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db14404108', 'CheckoutRequestID': 'ws_CO_09092024211818337769155498', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 150.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI901URXXG'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909211830}, {'Name': 'PhoneNumber', 'Value': 254769155498}]}}}}}
2024-09-09 18:18:31,548 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 18:18:32,351 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 18:18:32,353 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 18:18:32,742 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:18:32,862 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 18:18:32,862 - INFO - {'updated': 'initiated stk query for ws_CO_09092024211818337769155498 899885 '}
2024-09-09 18:18:32,939 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:18:33,002 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 18:18:33,782 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 18:18:33,784 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer m6xJPrMYs5bQGT495FcpE5mFCkrA'}"}
2024-09-09 18:18:33,784 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTgxODMy', 'Timestamp': '20240909181832', 'CheckoutRequestID': 'ws_CO_09092024211818337769155498'}"}
2024-09-09 18:18:33,785 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:18:34,608 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 18:18:34,608 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db14404108', 'CheckoutRequestID': 'ws_CO_09092024211818337769155498', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024211818337769155498 899885"}
2024-09-09 18:18:34,726 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 18:18:35,326 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 18:18:35,328 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 18:18:35,991 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 18:18:38,215 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:18:38,347 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 18:18:38,348 - INFO - there is a test coming
2024-09-09 18:18:38,348 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 18:18:38,400 - INFO - {'updated_data': 'the data is now as 254706539420'}
2024-09-09 18:18:38,400 - INFO - the data is now as 254706539420
2024-09-09 18:18:38,419 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 18:18:38,420 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 18:18:38,421 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:18:39,289 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 18:18:39,291 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer tZGByDVSFiApq7ol1bAt3L9Q754I'}"}
2024-09-09 18:18:39,291 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTgxODM5', 'Timestamp': '20240909181839', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '150000', 'PartyA': '254706539420', 'PartyB': 827142, 'PhoneNumber': '254706539420', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-31196', 'TransactionDesc': 'Some payment'}
2024-09-09 18:18:39,292 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:18:40,210 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 18:18:40,221 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db14406005', 'CheckoutRequestID': 'ws_CO_09092024211839997706539420', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 18:20:13,819 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:20:13,835 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-09 18:20:13,836 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-09 18:21:34,734 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:21:34,870 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 18:21:34,871 - INFO - there is a test coming
2024-09-09 18:21:34,871 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 18:21:34,915 - INFO - {'updated_data': 'the data is now as 254724092176'}
2024-09-09 18:21:34,915 - INFO - the data is now as 254724092176
2024-09-09 18:21:34,932 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 18:21:34,932 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 18:21:34,934 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:21:35,674 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 18:21:35,676 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer AxdYYqx0mgc6aNhd7U25AJLRr6ck'}"}
2024-09-09 18:21:35,677 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTgyMTM1', 'Timestamp': '20240909182135', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2350', 'PartyA': '254724092176', 'PartyB': 827142, 'PhoneNumber': '254724092176', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-34457', 'TransactionDesc': 'Some payment'}
2024-09-09 18:21:35,678 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:21:36,566 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 18:21:36,572 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db14419702', 'CheckoutRequestID': 'ws_CO_09092024212136372724092176', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 18:25:36,961 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:25:37,167 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 18:25:37,167 - INFO - there is a test coming
2024-09-09 18:25:37,167 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 18:25:37,217 - INFO - {'updated_data': 'the data is now as 254724092176'}
2024-09-09 18:25:37,217 - INFO - the data is now as 254724092176
2024-09-09 18:25:37,232 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 18:25:37,232 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 18:25:37,234 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:25:38,015 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 18:25:38,018 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer PbA0wGlzJqFYvXzAj9bNGlGubx7W'}"}
2024-09-09 18:25:38,018 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTgyNTM4', 'Timestamp': '20240909182538', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2350', 'PartyA': '254724092176', 'PartyB': 827142, 'PhoneNumber': '254724092176', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-34457', 'TransactionDesc': 'Some payment'}
2024-09-09 18:25:38,020 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:25:39,026 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 341
2024-09-09 18:25:39,032 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b9142758505395018', 'CheckoutRequestID': 'ws_CO_09092024212538773724092176', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 18:27:03,315 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074709849', 'CheckoutRequestID': 'ws_CO_09092024212655385724092176', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI911W0FGR'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909212702}, {'Name': 'PhoneNumber', 'Value': 254724092176}]}}}}"}
2024-09-09 18:27:03,315 - INFO - {'updated_data': 'callback data began'}
2024-09-09 18:27:03,315 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074709849', 'CheckoutRequestID': 'ws_CO_09092024212655385724092176', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI911W0FGR'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909212702}, {'Name': 'PhoneNumber', 'Value': 254724092176}]}}}}}
2024-09-09 18:27:03,498 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 18:27:03,832 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 18:27:03,834 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 18:27:04,195 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 18:27:06,329 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:27:06,491 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 18:27:06,492 - INFO - there is a test coming
2024-09-09 18:27:06,492 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 18:27:06,553 - INFO - {'updated_data': 'the data is now as 254721552511'}
2024-09-09 18:27:06,553 - INFO - the data is now as 254721552511
2024-09-09 18:27:06,579 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 18:27:06,580 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 18:27:06,581 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:27:07,519 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 18:27:07,521 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer tgJ3Yh8EscTAjdoDGSeiNgTKwbwg'}"}
2024-09-09 18:27:07,521 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTgyNzA3', 'Timestamp': '20240909182707', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '6000', 'PartyA': '254721552511', 'PartyB': 899885, 'PhoneNumber': '254721552511', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0617801-1725906420491', 'TransactionDesc': 'Some payment'}
2024-09-09 18:27:07,522 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:27:08,432 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-09 18:27:08,439 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169519879', 'CheckoutRequestID': 'ws_CO_09092024212708194721552511', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 18:34:34,181 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86717866', 'CheckoutRequestID': 'ws_CO_09092024213423837799905503', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI901X1NW0'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909213433}, {'Name': 'PhoneNumber', 'Value': 254799905503}]}}}}"}
2024-09-09 18:34:34,181 - INFO - {'updated_data': 'callback data began'}
2024-09-09 18:34:34,182 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86717866', 'CheckoutRequestID': 'ws_CO_09092024213423837799905503', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI901X1NW0'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909213433}, {'Name': 'PhoneNumber', 'Value': 254799905503}]}}}}}
2024-09-09 18:34:34,356 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 18:34:34,647 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 18:34:34,648 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 18:34:35,337 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 18:34:36,671 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:34:36,898 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 18:34:36,899 - INFO - {'updated': 'initiated stk query for ws_CO_09092024213423837799905503 827142 '}
2024-09-09 18:34:36,958 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:34:37,696 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 18:34:37,699 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer GFw3W0QGg0uZwi3PCxR3hp1iIP1D'}"}
2024-09-09 18:34:37,699 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTgzNDM2', 'Timestamp': '20240909183436', 'CheckoutRequestID': 'ws_CO_09092024213423837799905503'}"}
2024-09-09 18:34:37,700 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:34:38,475 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 18:34:38,475 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86717866', 'CheckoutRequestID': 'ws_CO_09092024213423837799905503', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024213423837799905503 827142"}
2024-09-09 18:34:38,587 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 18:34:39,176 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 18:34:39,177 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 18:34:39,849 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 18:35:14,331 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:35:14,450 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 18:35:14,451 - INFO - there is a test coming
2024-09-09 18:35:14,451 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 18:35:14,500 - INFO - {'updated_data': 'the data is now as 254799905503'}
2024-09-09 18:35:14,500 - INFO - the data is now as 254799905503
2024-09-09 18:35:14,516 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 18:35:14,516 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 18:35:14,517 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:35:15,337 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 18:35:15,339 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer T2NhQoJHUsA07Z5xga8Y9vdgy6J3'}"}
2024-09-09 18:35:15,340 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTgzNTE1', 'Timestamp': '20240909183515', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254799905503', 'PartyB': 827142, 'PhoneNumber': '254799905503', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-167518', 'TransactionDesc': 'Some payment'}
2024-09-09 18:35:15,341 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:35:16,248 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 18:35:16,254 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074724855', 'CheckoutRequestID': 'ws_CO_09092024213516044799905503', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 18:35:26,180 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074724855', 'CheckoutRequestID': 'ws_CO_09092024213516044799905503', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI951X5OED'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909213525}, {'Name': 'PhoneNumber', 'Value': 254799905503}]}}}}"}
2024-09-09 18:35:26,180 - INFO - {'updated_data': 'callback data began'}
2024-09-09 18:35:26,180 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074724855', 'CheckoutRequestID': 'ws_CO_09092024213516044799905503', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI951X5OED'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909213525}, {'Name': 'PhoneNumber', 'Value': 254799905503}]}}}}}
2024-09-09 18:35:26,400 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 18:35:27,035 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 18:35:27,036 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 18:35:27,639 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 18:35:27,879 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:35:28,009 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 18:35:28,009 - INFO - {'updated': 'initiated stk query for ws_CO_09092024213516044799905503 827142 '}
2024-09-09 18:35:28,066 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:35:28,800 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 18:35:28,802 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer HiCLygbbda4JChOuIoUzWXGIGA5W'}"}
2024-09-09 18:35:28,802 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTgzNTI4', 'Timestamp': '20240909183528', 'CheckoutRequestID': 'ws_CO_09092024213516044799905503'}"}
2024-09-09 18:35:28,803 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:35:29,561 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 18:35:29,561 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074724855', 'CheckoutRequestID': 'ws_CO_09092024213516044799905503', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024213516044799905503 827142"}
2024-09-09 18:35:29,683 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 18:35:30,296 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 18:35:30,297 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 18:35:30,648 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 18:36:38,962 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee594399507', 'CheckoutRequestID': 'ws_CO_09092024213626800704127089', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI961XBDUS'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909213638}, {'Name': 'PhoneNumber', 'Value': 254704127089}]}}}}"}
2024-09-09 18:36:38,962 - INFO - {'updated_data': 'callback data began'}
2024-09-09 18:36:38,962 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee594399507', 'CheckoutRequestID': 'ws_CO_09092024213626800704127089', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI961XBDUS'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909213638}, {'Name': 'PhoneNumber', 'Value': 254704127089}]}}}}}
2024-09-09 18:36:39,168 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 18:36:39,443 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 18:36:39,444 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 18:36:40,113 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 18:37:24,698 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:37:24,853 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 18:37:24,854 - INFO - {'updated': 'initiated stk query for ws_CO_09092024213626800704127089 827142 '}
2024-09-09 18:37:24,912 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:37:25,668 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 18:37:25,670 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 2yjTIWYBDezqeFRIWyhwFIsMLrXE'}"}
2024-09-09 18:37:25,674 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTgzNzI0', 'Timestamp': '20240909183724', 'CheckoutRequestID': 'ws_CO_09092024213626800704127089'}"}
2024-09-09 18:37:25,676 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:38:48,287 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-09 18:38:48,287 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee594399507', 'CheckoutRequestID': 'ws_CO_09092024213626800704127089', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024213626800704127089 827142"}
2024-09-09 18:38:48,395 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 18:38:48,629 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 18:38:48,630 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 18:38:48,899 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 18:40:03,145 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:40:03,303 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 18:40:03,307 - INFO - there is a test coming
2024-09-09 18:40:03,307 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 18:40:03,378 - INFO - {'updated_data': 'the data is now as 254712415208'}
2024-09-09 18:40:03,378 - INFO - the data is now as 254712415208
2024-09-09 18:40:03,439 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 18:40:03,439 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 18:40:03,440 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:40:04,121 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 18:40:04,123 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer DCaNeAavBPZCgXhtSuzTtpjYjiGa'}"}
2024-09-09 18:40:04,123 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTg0MDA0', 'Timestamp': '20240909184004', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '4741', 'PartyA': '254712415208', 'PartyB': 827142, 'PhoneNumber': '254712415208', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '136-874', 'TransactionDesc': 'Some payment'}
2024-09-09 18:40:04,124 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:40:05,884 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-09 18:40:05,890 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b4045352', 'CheckoutRequestID': 'ws_CO_09092024214005405712415208', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 18:40:18,839 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:40:18,980 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 18:40:18,981 - INFO - there is a test coming
2024-09-09 18:40:18,981 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 18:40:19,024 - INFO - {'updated_data': 'the data is now as 254720538201'}
2024-09-09 18:40:19,024 - INFO - the data is now as 254720538201
2024-09-09 18:40:19,040 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 18:40:19,041 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 18:40:19,042 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:40:19,647 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 18:40:19,649 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer uam7gGA2XnFyamQRhUGgM9HAqcAF'}"}
2024-09-09 18:40:19,650 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTg0MDE5', 'Timestamp': '20240909184019', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1635', 'PartyA': '254720538201', 'PartyB': 899885, 'PhoneNumber': '254720538201', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053403', 'TransactionDesc': 'Some payment'}
2024-09-09 18:40:19,651 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:40:20,878 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 18:40:20,884 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208792416695', 'CheckoutRequestID': 'ws_CO_09092024214020405720538201', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 18:40:31,678 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:40:31,693 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-09 18:40:31,694 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-09 18:40:41,698 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:40:41,838 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 18:40:41,839 - INFO - {'updated': 'initiated stk query for ws_CO_09092024214020405720538201 899885 '}
2024-09-09 18:40:41,903 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:40:42,508 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 18:40:42,510 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer OgydN51J3SJyaluMPSotAES64WIM'}"}
2024-09-09 18:40:42,511 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTg0MDQx', 'Timestamp': '20240909184041', 'CheckoutRequestID': 'ws_CO_09092024214020405720538201'}"}
2024-09-09 18:40:42,512 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:40:43,194 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 18:40:43,194 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208792416695', 'CheckoutRequestID': 'ws_CO_09092024214020405720538201', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024214020405720538201 899885"}
2024-09-09 18:40:43,535 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 18:40:43,761 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 18:40:43,762 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 18:40:43,980 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 18:43:14,327 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:43:14,461 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 18:43:14,462 - INFO - there is a test coming
2024-09-09 18:43:14,462 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 18:43:14,505 - INFO - {'updated_data': 'the data is now as 254711760133'}
2024-09-09 18:43:14,505 - INFO - the data is now as 254711760133
2024-09-09 18:43:14,523 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 18:43:14,523 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 18:43:14,524 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:43:15,209 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 18:43:15,211 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer S30sd12kwrzNA48xgA1ZsfQ6rDVi'}"}
2024-09-09 18:43:15,212 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTg0MzE1', 'Timestamp': '20240909184315', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254711760133', 'PartyB': 899885, 'PhoneNumber': '254711760133', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053329', 'TransactionDesc': 'Some payment'}
2024-09-09 18:43:15,220 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:43:16,041 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 18:43:16,047 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074742439', 'CheckoutRequestID': 'ws_CO_09092024214315767711760133', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 18:44:35,028 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074744284', 'CheckoutRequestID': 'ws_CO_09092024214422463711760133', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}"}
2024-09-09 18:44:35,028 - INFO - {'updated_data': 'callback data began'}
2024-09-09 18:44:35,028 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074744284', 'CheckoutRequestID': 'ws_CO_09092024214422463711760133', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}}
2024-09-09 18:44:35,206 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 18:44:35,603 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 18:44:35,604 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 18:44:36,130 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 18:49:43,576 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:49:43,733 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 18:49:43,734 - INFO - there is a test coming
2024-09-09 18:49:43,734 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 18:49:43,776 - INFO - {'updated_data': 'the data is now as 254712415208'}
2024-09-09 18:49:43,777 - INFO - the data is now as 254712415208
2024-09-09 18:49:43,793 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 18:49:43,793 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 18:49:43,801 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:49:44,504 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 18:49:44,507 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer UGpOMS0alQh7t4UJAjL3FrdlYzr2'}"}
2024-09-09 18:49:44,507 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTg0OTQ0', 'Timestamp': '20240909184944', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '14000', 'PartyA': '254712415208', 'PartyB': 899885, 'PhoneNumber': '254712415208', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053404', 'TransactionDesc': 'Some payment'}
2024-09-09 18:49:44,508 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:49:45,470 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 341
2024-09-09 18:49:45,476 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b9142758505501558', 'CheckoutRequestID': 'ws_CO_09092024214945077712415208', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 18:50:59,048 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169570562', 'CheckoutRequestID': 'ws_CO_09092024215049493712415208', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5177.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI921Z3KHQ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909215057}, {'Name': 'PhoneNumber', 'Value': 254712415208}]}}}}"}
2024-09-09 18:50:59,048 - INFO - {'updated_data': 'callback data began'}
2024-09-09 18:50:59,048 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169570562', 'CheckoutRequestID': 'ws_CO_09092024215049493712415208', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5177.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI921Z3KHQ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909215057}, {'Name': 'PhoneNumber', 'Value': 254712415208}]}}}}}
2024-09-09 18:50:59,229 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 18:50:59,737 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 18:50:59,738 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 18:51:00,002 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 18:51:01,735 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:51:01,867 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 18:51:01,868 - INFO - {'updated': 'initiated stk query for ws_CO_09092024215049493712415208 827142 '}
2024-09-09 18:51:01,934 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:51:02,513 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 18:51:02,514 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer mA7VAgbvQFz1cgi0caUumKAtIzAj'}"}
2024-09-09 18:51:02,515 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTg1MTAx', 'Timestamp': '20240909185101', 'CheckoutRequestID': 'ws_CO_09092024215049493712415208'}"}
2024-09-09 18:51:02,516 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:51:03,148 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-09 18:51:03,149 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169570562', 'CheckoutRequestID': 'ws_CO_09092024215049493712415208', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024215049493712415208 827142"}
2024-09-09 18:51:03,274 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 18:51:03,471 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 18:51:03,472 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 18:51:03,712 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 18:51:44,337 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 18:51:44,456 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 18:51:44,457 - INFO - there is a test coming
2024-09-09 18:51:44,457 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 18:51:44,505 - INFO - {'updated_data': 'the data is now as 254724999857'}
2024-09-09 18:51:44,505 - INFO - the data is now as 254724999857
2024-09-09 18:51:44,525 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 18:51:44,526 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 18:51:44,527 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:51:55,282 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 400 0
2024-09-09 18:51:55,284 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer '}"}
2024-09-09 18:51:55,285 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTg1MTU1', 'Timestamp': '20240909185155', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '350', 'PartyA': '254724999857', 'PartyB': 899885, 'PhoneNumber': '254724999857', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053405', 'TransactionDesc': 'Some payment'}
2024-09-09 18:51:55,286 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 18:52:23,315 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 404 208
2024-09-09 18:52:23,317 - INFO -  th data is {'code': 404, 'message': {'requestId': '0a83-4731-ac2e-58dccc54ee594466128', 'errorCode': '404.001.03', 'errorMessage': 'Invalid Access Token'}}
2024-09-09 18:52:23,318 - WARNING - Not Found: /api/v1/stk/
2024-09-09 19:01:25,338 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:01:25,495 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:01:25,496 - INFO - there is a test coming
2024-09-09 19:01:25,496 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 19:01:25,540 - INFO - {'updated_data': 'the data is now as 254701094360'}
2024-09-09 19:01:25,540 - INFO - the data is now as 254701094360
2024-09-09 19:01:25,554 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 19:01:25,554 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 19:01:25,555 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:02:05,781 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 400 0
2024-09-09 19:02:05,783 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer '}"}
2024-09-09 19:02:05,783 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTkwMjA1', 'Timestamp': '20240909190205', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '200', 'PartyA': '254701094360', 'PartyB': 827142, 'PhoneNumber': '254701094360', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-24000', 'TransactionDesc': 'Some payment'}
2024-09-09 19:02:05,788 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:02:06,448 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 404 210
2024-09-09 19:02:06,450 - INFO -  th data is {'code': 404, 'message': {'requestId': 'f94f-4acd-a303-8fbbcf917962169594831', 'errorCode': '404.001.03', 'errorMessage': 'Invalid Access Token'}}
2024-09-09 19:02:06,451 - WARNING - Not Found: /api/v1/stk/
2024-09-09 19:02:10,177 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:02:10,290 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:02:10,291 - INFO - {'updated': 'initiated stk query for ws_CO_09092024220153046701094360 827142 '}
2024-09-09 19:02:10,345 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:02:23,363 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:02:23,365 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer LA2V4M96S3Y1KibzUcTLs2JmABAS'}"}
2024-09-09 19:02:23,365 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTkwMjEw', 'Timestamp': '20240909190210', 'CheckoutRequestID': 'ws_CO_09092024220153046701094360'}"}
2024-09-09 19:02:23,366 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:02:24,089 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-09 19:02:24,090 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e168871717', 'CheckoutRequestID': 'ws_CO_09092024220153046701094360', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024220153046701094360 827142"}
2024-09-09 19:02:24,214 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 19:02:24,415 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 19:02:24,416 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 19:02:24,637 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 19:05:46,955 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:05:47,097 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:05:47,098 - INFO - there is a test coming
2024-09-09 19:05:47,098 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 19:05:47,145 - INFO - {'updated_data': 'the data is now as 254723889666'}
2024-09-09 19:05:47,146 - INFO - the data is now as 254723889666
2024-09-09 19:05:47,174 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 19:05:47,174 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 19:05:47,176 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:05:47,822 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:05:47,825 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer kchCJAAYEGBoyzc5V4Q7lsq0SZ5r'}"}
2024-09-09 19:05:47,829 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTkwNTQ3', 'Timestamp': '20240909190547', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '300', 'PartyA': '254723889666', 'PartyB': 899885, 'PhoneNumber': '254723889666', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053332', 'TransactionDesc': 'Some payment'}
2024-09-09 19:05:47,830 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:05:48,691 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 19:05:48,698 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b514601894', 'CheckoutRequestID': 'ws_CO_09092024220548453723889666', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 19:06:00,427 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:06:00,550 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:06:00,550 - INFO - {'updated': 'initiated stk query for ws_CO_09092024220548453723889666 899885 '}
2024-09-09 19:06:00,613 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:06:01,208 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:06:01,209 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 71wHGEFqqeEjCoogKeH3ztxLc7XZ'}"}
2024-09-09 19:06:01,210 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTkwNjAw', 'Timestamp': '20240909190600', 'CheckoutRequestID': 'ws_CO_09092024220548453723889666'}"}
2024-09-09 19:06:01,211 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:06:01,848 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 19:06:01,849 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b514601894', 'CheckoutRequestID': 'ws_CO_09092024220548453723889666', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024220548453723889666 899885"}
2024-09-09 19:06:01,990 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 19:06:02,206 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 19:06:02,207 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 19:06:02,433 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 19:06:40,318 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:06:40,463 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:06:40,464 - INFO - there is a test coming
2024-09-09 19:06:40,464 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 19:06:40,529 - INFO - {'updated_data': 'the data is now as 254720045399'}
2024-09-09 19:06:40,530 - INFO - the data is now as 254720045399
2024-09-09 19:06:40,557 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 19:06:40,557 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 19:06:40,558 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:06:41,158 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:06:41,160 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer WGmC5PpTSs5S4AD7f9ry0LrZW9OO'}"}
2024-09-09 19:06:41,160 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTkwNjQx', 'Timestamp': '20240909190641', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '200', 'PartyA': '254720045399', 'PartyB': 827142, 'PhoneNumber': '254720045399', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '405-1888', 'TransactionDesc': 'Some payment'}
2024-09-09 19:06:41,161 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:07:10,551 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 19:07:10,557 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b514604557', 'CheckoutRequestID': 'ws_CO_09092024220708506720045399', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 19:07:40,067 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:07:40,227 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:07:40,228 - INFO - there is a test coming
2024-09-09 19:07:40,228 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 19:07:40,270 - INFO - {'updated_data': 'the data is now as 254720045399'}
2024-09-09 19:07:40,270 - INFO - the data is now as 254720045399
2024-09-09 19:07:40,286 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 19:07:40,286 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 19:07:40,318 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:07:40,880 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:07:40,882 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ZNrpYWpbq6tCH1DGf5NZY0LqkfBr'}"}
2024-09-09 19:07:40,882 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTkwNzQw', 'Timestamp': '20240909190740', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254720045399', 'PartyB': 827142, 'PhoneNumber': '254720045399', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '405-1888', 'TransactionDesc': 'Some payment'}
2024-09-09 19:07:40,883 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:07:41,680 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 19:07:41,687 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc14603683', 'CheckoutRequestID': 'ws_CO_09092024220741434720045399', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 19:07:51,080 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc14603683', 'CheckoutRequestID': 'ws_CO_09092024220741434720045399', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9520XG6D'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909220750}, {'Name': 'PhoneNumber', 'Value': 254720045399}]}}}}"}
2024-09-09 19:07:51,080 - INFO - {'updated_data': 'callback data began'}
2024-09-09 19:07:51,080 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc14603683', 'CheckoutRequestID': 'ws_CO_09092024220741434720045399', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9520XG6D'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909220750}, {'Name': 'PhoneNumber', 'Value': 254720045399}]}}}}}
2024-09-09 19:07:51,242 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 19:07:51,744 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 19:07:51,745 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 19:07:51,979 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 19:07:55,020 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:07:55,162 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:07:55,163 - INFO - there is a test coming
2024-09-09 19:07:55,163 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 19:07:55,225 - INFO - {'updated_data': 'the data is now as 254718854192'}
2024-09-09 19:07:55,225 - INFO - the data is now as 254718854192
2024-09-09 19:07:55,252 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 19:07:55,253 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 19:07:55,254 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:07:55,972 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:07:55,974 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer e5D5dfdGPcm8c34GrfUYntqKUNJV'}"}
2024-09-09 19:07:55,974 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTkwNzU1', 'Timestamp': '20240909190755', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1700', 'PartyA': '254718854192', 'PartyB': 899885, 'PhoneNumber': '254718854192', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053364', 'TransactionDesc': 'Some payment'}
2024-09-09 19:07:55,976 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:07:56,737 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-09 19:07:56,743 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169121796', 'CheckoutRequestID': 'ws_CO_09092024220756510718854192', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 19:08:33,596 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:08:33,717 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:08:33,718 - INFO - there is a test coming
2024-09-09 19:08:33,718 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 19:08:33,765 - INFO - {'updated_data': 'the data is now as 254720045399'}
2024-09-09 19:08:33,765 - INFO - the data is now as 254720045399
2024-09-09 19:08:33,786 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 19:08:33,786 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 19:08:33,787 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:08:34,363 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:08:34,365 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer T9u3158yI5eFA1yIZB7eqGOScPaj'}"}
2024-09-09 19:08:34,366 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTkwODM0', 'Timestamp': '20240909190834', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '300', 'PartyA': '254720045399', 'PartyB': 827142, 'PhoneNumber': '254720045399', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '404-1434', 'TransactionDesc': 'Some payment'}
2024-09-09 19:08:34,367 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:08:35,179 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-09 19:08:35,187 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e168886566', 'CheckoutRequestID': 'ws_CO_09092024220834909720045399', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 19:08:45,914 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e168886566', 'CheckoutRequestID': 'ws_CO_09092024220834909720045399', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 300.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9421093E'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909220845}, {'Name': 'PhoneNumber', 'Value': 254720045399}]}}}}"}
2024-09-09 19:08:45,914 - INFO - {'updated_data': 'callback data began'}
2024-09-09 19:08:45,914 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e168886566', 'CheckoutRequestID': 'ws_CO_09092024220834909720045399', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 300.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9421093E'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909220845}, {'Name': 'PhoneNumber', 'Value': 254720045399}]}}}}}
2024-09-09 19:08:46,074 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 19:08:46,296 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 19:08:46,297 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 19:08:46,839 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 19:08:48,274 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:08:48,429 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:08:48,429 - INFO - {'updated': 'initiated stk query for ws_CO_09092024220834909720045399 827142 '}
2024-09-09 19:08:48,495 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:08:49,068 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:08:49,070 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer WU1e6r6icXFu38q7DwbY5ukwviuq'}"}
2024-09-09 19:08:49,071 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTkwODQ4', 'Timestamp': '20240909190848', 'CheckoutRequestID': 'ws_CO_09092024220834909720045399'}"}
2024-09-09 19:08:49,072 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:08:49,798 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-09 19:08:49,799 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e168886566', 'CheckoutRequestID': 'ws_CO_09092024220834909720045399', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024220834909720045399 827142"}
2024-09-09 19:08:49,913 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 19:08:50,412 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 19:08:50,413 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 19:08:50,945 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 19:09:11,088 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:09:11,256 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:09:11,257 - INFO - there is a test coming
2024-09-09 19:09:11,257 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 19:09:11,306 - INFO - {'updated_data': 'the data is now as 254720045399'}
2024-09-09 19:09:11,306 - INFO - the data is now as 254720045399
2024-09-09 19:09:11,324 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 19:09:11,324 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 19:09:11,325 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:09:12,099 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:09:12,101 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ADkpXWYjhgl0zVxRBqe3hKlI2xvr'}"}
2024-09-09 19:09:12,101 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTkwOTEy', 'Timestamp': '20240909190912', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254720045399', 'PartyB': 827142, 'PhoneNumber': '254720045399', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '404-1434', 'TransactionDesc': 'Some payment'}
2024-09-09 19:09:12,102 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:09:12,842 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 19:09:12,849 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208792479687', 'CheckoutRequestID': 'ws_CO_09092024220912609720045399', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 19:11:17,817 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86797235', 'CheckoutRequestID': 'ws_CO_09092024221103926712821944', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9721974T'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909221117}, {'Name': 'PhoneNumber', 'Value': 254712821944}]}}}}"}
2024-09-09 19:11:17,817 - INFO - {'updated_data': 'callback data began'}
2024-09-09 19:11:17,817 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86797235', 'CheckoutRequestID': 'ws_CO_09092024221103926712821944', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI9721974T'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909221117}, {'Name': 'PhoneNumber', 'Value': 254712821944}]}}}}}
2024-09-09 19:11:17,981 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 19:11:18,481 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 19:11:18,483 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 19:11:18,720 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 19:12:57,884 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:12:58,005 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:12:58,006 - INFO - there is a test coming
2024-09-09 19:12:58,006 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 19:12:58,056 - INFO - {'updated_data': 'the data is now as 254720477001'}
2024-09-09 19:12:58,057 - INFO - the data is now as 254720477001
2024-09-09 19:12:58,091 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 19:12:58,091 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 19:12:58,092 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:12:58,738 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:12:58,740 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer U3avGSBhKZKM9xrHONssYFt2aOFB'}"}
2024-09-09 19:12:58,740 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTkxMjU4', 'Timestamp': '20240909191258', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254720477001', 'PartyB': 827142, 'PhoneNumber': '254720477001', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-940', 'TransactionDesc': 'Some payment'}
2024-09-09 19:12:58,741 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:12:59,564 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-09 19:12:59,570 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee594542967', 'CheckoutRequestID': 'ws_CO_09092024221259302720477001', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 19:13:44,801 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:13:44,974 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:13:44,974 - INFO - there is a test coming
2024-09-09 19:13:44,975 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 19:13:45,030 - INFO - {'updated_data': 'the data is now as 254794194907'}
2024-09-09 19:13:45,031 - INFO - the data is now as 254794194907
2024-09-09 19:13:45,061 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 19:13:45,061 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 19:13:45,062 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:13:45,725 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:13:45,727 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 3Ij0aSbXLGeKlNPKs3xgdTAAABAh'}"}
2024-09-09 19:13:45,728 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTkxMzQ1', 'Timestamp': '20240909191345', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254794194907', 'PartyB': 827142, 'PhoneNumber': '254794194907', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-2492', 'TransactionDesc': 'Some payment'}
2024-09-09 19:13:45,729 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:13:46,476 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 19:13:46,482 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86801119', 'CheckoutRequestID': 'ws_CO_09092024221346253794194907', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 19:14:04,686 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86801119', 'CheckoutRequestID': 'ws_CO_09092024221346253794194907', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-09 19:14:04,687 - INFO - {'updated_data': 'callback data began'}
2024-09-09 19:14:04,687 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86801119', 'CheckoutRequestID': 'ws_CO_09092024221346253794194907', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-09 19:14:04,850 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 19:14:05,072 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 19:14:05,073 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 19:14:05,288 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 19:14:07,310 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:14:07,459 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:14:07,459 - INFO - {'updated': 'initiated stk query for ws_CO_09092024221346253794194907 827142 '}
2024-09-09 19:14:07,521 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:14:08,089 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:14:08,091 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ydhAhpRMOVEIrkAzac4qZTUHiBUm'}"}
2024-09-09 19:14:08,091 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTkxNDA3', 'Timestamp': '20240909191407', 'CheckoutRequestID': 'ws_CO_09092024221346253794194907'}"}
2024-09-09 19:14:08,093 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:14:08,733 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-09 19:14:08,734 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86801119', 'CheckoutRequestID': 'ws_CO_09092024221346253794194907', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_09092024221346253794194907 827142"}
2024-09-09 19:14:08,855 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 19:14:09,062 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 19:14:09,063 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 19:14:09,291 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 19:14:18,917 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:14:19,064 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:14:19,065 - INFO - there is a test coming
2024-09-09 19:14:19,065 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 19:14:19,114 - INFO - {'updated_data': 'the data is now as 254794194907'}
2024-09-09 19:14:19,114 - INFO - the data is now as 254794194907
2024-09-09 19:14:19,132 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 19:14:19,132 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 19:14:19,133 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:14:19,723 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:14:19,725 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ajIX5mH8NcS9LKtFA6zBL2ymgGUN'}"}
2024-09-09 19:14:19,725 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTkxNDE5', 'Timestamp': '20240909191419', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254794194907', 'PartyB': 827142, 'PhoneNumber': '254794194907', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-2492', 'TransactionDesc': 'Some payment'}
2024-09-09 19:14:19,727 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:14:20,804 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 19:14:20,810 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208792487140', 'CheckoutRequestID': 'ws_CO_09092024221420352794194907', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 19:15:01,606 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:15:01,761 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:15:01,762 - INFO - {'updated': 'initiated stk query for ws_CO_09092024221420352794194907 827142 '}
2024-09-09 19:15:01,833 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:15:02,394 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:15:02,396 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer jS8Q2T1lQvZcFyuDDLBODLiurp1b'}"}
2024-09-09 19:15:02,396 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTkxNTAx', 'Timestamp': '20240909191501', 'CheckoutRequestID': 'ws_CO_09092024221420352794194907'}"}
2024-09-09 19:15:02,397 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:15:03,155 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-09 19:15:03,155 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208792487140', 'CheckoutRequestID': 'ws_CO_09092024221420352794194907', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_09092024221420352794194907 827142"}
2024-09-09 19:15:03,301 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 19:15:03,519 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 19:15:03,520 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 19:15:04,079 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 19:15:41,393 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169619133', 'CheckoutRequestID': 'ws_CO_09092024221535209794194907', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-09 19:15:41,393 - INFO - {'updated_data': 'callback data began'}
2024-09-09 19:15:41,393 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169619133', 'CheckoutRequestID': 'ws_CO_09092024221535209794194907', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-09 19:15:41,560 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 19:15:41,765 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 19:15:41,766 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 19:15:41,978 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 19:15:46,391 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:15:46,405 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-09 19:15:46,405 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-09 19:29:07,035 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:29:07,182 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:29:07,183 - INFO - there is a test coming
2024-09-09 19:29:07,183 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 19:29:07,239 - INFO - {'updated_data': 'the data is now as 254798051372'}
2024-09-09 19:29:07,239 - INFO - the data is now as 254798051372
2024-09-09 19:29:07,258 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 19:29:07,258 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 19:29:07,260 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:29:08,013 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:29:08,014 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer BAdHaHMLQvYtrGDyJFx25ptAksmx'}"}
2024-09-09 19:29:08,015 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTkyOTA4', 'Timestamp': '20240909192908', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '500', 'PartyA': '254798051372', 'PartyB': 899885, 'PhoneNumber': '254798051372', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053334', 'TransactionDesc': 'Some payment'}
2024-09-09 19:29:08,016 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:29:08,857 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 19:29:08,863 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db14680210', 'CheckoutRequestID': 'ws_CO_09092024222908578798051372', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 19:29:19,811 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:29:19,950 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:29:19,951 - INFO - {'updated': 'initiated stk query for ws_CO_09092024222908578798051372 899885 '}
2024-09-09 19:29:20,011 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:29:20,615 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:29:20,617 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer DA4CF9VCKWReqfHaAeGUUhnmNCBg'}"}
2024-09-09 19:29:20,618 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTkyOTIw', 'Timestamp': '20240909192920', 'CheckoutRequestID': 'ws_CO_09092024222908578798051372'}"}
2024-09-09 19:29:20,619 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:29:21,337 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-09 19:29:21,338 - INFO - {'updated': "Received response {'requestId': 'ws_CO_09092024222908578798051372', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_09092024222908578798051372 899885"}
2024-09-09 19:29:21,340 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-09 19:29:29,789 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:29:29,918 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:29:29,918 - INFO - {'updated': 'initiated stk query for ws_CO_09092024222908578798051372 899885 '}
2024-09-09 19:29:29,994 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:29:30,568 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:29:30,570 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer eUJaY5npmxxtDJBC8NjevCGFORnd'}"}
2024-09-09 19:29:30,571 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTkyOTI5', 'Timestamp': '20240909192929', 'CheckoutRequestID': 'ws_CO_09092024222908578798051372'}"}
2024-09-09 19:29:30,572 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:29:31,287 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 388
2024-09-09 19:29:31,288 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db14680210', 'CheckoutRequestID': 'ws_CO_09092024222908578798051372', 'ResultCode': '1', 'ResultDesc': 'The balance is insufficient for the transaction.'} for ws_CO_09092024222908578798051372 899885"}
2024-09-09 19:29:31,406 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 19:29:31,604 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 19:29:31,606 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 19:29:31,845 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 19:34:47,088 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:34:47,229 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:34:47,229 - INFO - {'updated': 'initiated stk query for ws_CO_09092024223434811798051372 899885 '}
2024-09-09 19:34:47,308 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:34:47,882 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:34:47,883 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer I17Mcew80uJ0Wj1KGvdUmmihh3Oa'}"}
2024-09-09 19:34:47,884 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTkzNDQ3', 'Timestamp': '20240909193447', 'CheckoutRequestID': 'ws_CO_09092024223434811798051372'}"}
2024-09-09 19:34:47,885 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:34:48,536 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 19:34:48,536 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074833511', 'CheckoutRequestID': 'ws_CO_09092024223434811798051372', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024223434811798051372 899885"}
2024-09-09 19:34:48,659 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 19:34:49,164 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 19:34:49,166 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 19:34:49,447 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 19:45:22,456 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:45:22,614 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:45:22,615 - INFO - there is a test coming
2024-09-09 19:45:22,615 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 19:45:22,691 - INFO - {'updated_data': 'the data is now as 254723453515'}
2024-09-09 19:45:22,691 - INFO - the data is now as 254723453515
2024-09-09 19:45:22,717 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 19:45:22,717 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 19:45:22,719 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:45:23,478 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:45:23,480 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Ao5KMgh9zS3QbRcu0mIRvS4dircE'}"}
2024-09-09 19:45:23,481 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTk0NTIz', 'Timestamp': '20240909194523', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '8000', 'PartyA': '254723453515', 'PartyB': 899885, 'PhoneNumber': '254723453515', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053367', 'TransactionDesc': 'Some payment'}
2024-09-09 19:45:23,483 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:45:24,239 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 19:45:31,341 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86840956', 'CheckoutRequestID': 'ws_CO_09092024224524015723453515', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 19:47:01,019 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:47:01,149 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:47:01,150 - INFO - there is a test coming
2024-09-09 19:47:01,150 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 19:47:01,195 - INFO - {'updated_data': 'the data is now as 254700909628'}
2024-09-09 19:47:01,195 - INFO - the data is now as 254700909628
2024-09-09 19:47:01,211 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 19:47:01,211 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 19:47:01,213 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:47:01,780 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:47:01,783 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer UN2d2Ykhl5yiSLCdxI5WA1I7mEPf'}"}
2024-09-09 19:47:01,783 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTk0NzAx', 'Timestamp': '20240909194701', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1140', 'PartyA': '254700909628', 'PartyB': 827142, 'PhoneNumber': '254700909628', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-4233', 'TransactionDesc': 'Some payment'}
2024-09-09 19:47:01,790 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:47:02,615 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 341
2024-09-09 19:47:02,622 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b9142758505688405', 'CheckoutRequestID': 'ws_CO_09092024224702329700909628', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 19:47:19,882 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b9142758505688405', 'CheckoutRequestID': 'ws_CO_09092024224702329700909628', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1140.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI962423AU'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909224719}, {'Name': 'PhoneNumber', 'Value': 254700909628}]}}}}"}
2024-09-09 19:47:19,883 - INFO - {'updated_data': 'callback data began'}
2024-09-09 19:47:19,883 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b9142758505688405', 'CheckoutRequestID': 'ws_CO_09092024224702329700909628', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1140.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SI962423AU'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240909224719}, {'Name': 'PhoneNumber', 'Value': 254700909628}]}}}}}
2024-09-09 19:47:20,045 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 19:47:20,257 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 19:47:20,259 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 19:47:20,502 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 19:48:33,644 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:48:33,785 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:48:33,785 - INFO - {'updated': 'initiated stk query for ws_CO_09092024224822612722482830 899885 '}
2024-09-09 19:48:33,843 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:48:34,455 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:48:34,457 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 0XnKJaekkI1s4MUSXuf4kCpNGyr1'}"}
2024-09-09 19:48:34,458 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTk0ODMz', 'Timestamp': '20240909194833', 'CheckoutRequestID': 'ws_CO_09092024224822612722482830'}"}
2024-09-09 19:48:34,459 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:48:35,088 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-09 19:48:35,089 - INFO - {'updated': "Received response {'requestId': 'ws_CO_09092024224822612722482830', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_09092024224822612722482830 899885"}
2024-09-09 19:48:35,091 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-09 19:48:43,677 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:48:43,822 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:48:43,822 - INFO - {'updated': 'initiated stk query for ws_CO_09092024224822612722482830 899885 '}
2024-09-09 19:48:43,904 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:48:44,580 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:48:44,582 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer d2BaJnJh55Gu0XU5eac07gqNRq9s'}"}
2024-09-09 19:48:44,582 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MTk0ODQz', 'Timestamp': '20240909194843', 'CheckoutRequestID': 'ws_CO_09092024224822612722482830'}"}
2024-09-09 19:48:44,583 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:48:45,210 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-09 19:48:45,211 - INFO - {'updated': "Received response {'requestId': 'ws_CO_09092024224822612722482830', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_09092024224822612722482830 899885"}
2024-09-09 19:48:45,213 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-09 19:59:24,406 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 19:59:24,606 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 19:59:24,607 - INFO - {'updated': 'initiated stk query for ws_CO_09092024225903278722552485 827142 '}
2024-09-09 19:59:24,681 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:59:25,335 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 19:59:25,337 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer lV5fA1FAbt0B3uUlABE9iUa8aKag'}"}
2024-09-09 19:59:25,337 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MTk1OTI0', 'Timestamp': '20240909195924', 'CheckoutRequestID': 'ws_CO_09092024225903278722552485'}"}
2024-09-09 19:59:25,338 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 19:59:26,071 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 19:59:26,071 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d86857567', 'CheckoutRequestID': 'ws_CO_09092024225903278722552485', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024225903278722552485 827142"}
2024-09-09 19:59:26,189 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 19:59:26,377 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 19:59:26,378 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 19:59:26,676 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 20:14:42,921 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 20:14:43,061 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 20:14:43,061 - INFO - {'updated': 'initiated stk query for ws_CO_09092024231421814723218088 899885 '}
2024-09-09 20:14:43,127 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 20:14:43,718 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 20:14:43,720 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer qzBXvpnCYYKyNjfaraCy4j1KmDFm'}"}
2024-09-09 20:14:43,721 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MjAxNDQz', 'Timestamp': '20240909201443', 'CheckoutRequestID': 'ws_CO_09092024231421814723218088'}"}
2024-09-09 20:14:43,722 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 20:14:44,402 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-09 20:14:44,403 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169203510', 'CheckoutRequestID': 'ws_CO_09092024231421814723218088', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024231421814723218088 899885"}
2024-09-09 20:14:44,520 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 20:14:45,059 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 20:14:45,061 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 20:14:45,286 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 20:14:51,679 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 20:14:51,829 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 20:14:51,830 - INFO - there is a test coming
2024-09-09 20:14:51,830 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-09 20:14:51,902 - INFO - {'updated_data': 'the data is now as 254757289337'}
2024-09-09 20:14:51,902 - INFO - the data is now as 254757289337
2024-09-09 20:14:51,921 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 20:14:51,921 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 20:14:51,922 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 20:14:52,608 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 20:14:52,610 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer g6k5QR3JsAkzRaUafLSlK6FsuQGj'}"}
2024-09-09 20:14:52,611 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MjAxNDUy', 'Timestamp': '20240909201452', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3100', 'PartyA': '254757289337', 'PartyB': 899885, 'PhoneNumber': '254757289337', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053370', 'TransactionDesc': 'Some payment'}
2024-09-09 20:14:52,612 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 20:14:53,429 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-09 20:14:53,435 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169689772', 'CheckoutRequestID': 'ws_CO_09092024231453191757289337', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 20:16:31,322 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 20:16:31,450 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 20:16:31,451 - INFO - there is a test coming
2024-09-09 20:16:31,451 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 20:16:31,510 - INFO - {'updated_data': 'the data is now as 254720763307'}
2024-09-09 20:16:31,510 - INFO - the data is now as 254720763307
2024-09-09 20:16:31,536 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 20:16:31,536 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 20:16:31,538 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 20:16:32,202 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 20:16:32,212 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer W2Q8F0Fk46EkXPlnCVdgAhnMDxXC'}"}
2024-09-09 20:16:32,212 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MjAxNjMy', 'Timestamp': '20240909201632', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254720763307', 'PartyB': 827142, 'PhoneNumber': '254720763307', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-6877', 'TransactionDesc': 'Some payment'}
2024-09-09 20:16:32,213 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 20:16:33,199 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 341
2024-09-09 20:16:33,205 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b9142758505755670', 'CheckoutRequestID': 'ws_CO_09092024231632981720763307', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 20:23:11,247 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b4354073', 'CheckoutRequestID': 'ws_CO_09092024232257895794483360', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}"}
2024-09-09 20:23:11,248 - INFO - {'updated_data': 'callback data began'}
2024-09-09 20:23:11,248 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b4354073', 'CheckoutRequestID': 'ws_CO_09092024232257895794483360', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}}
2024-09-09 20:23:11,407 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 20:23:12,102 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 20:23:12,103 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 20:23:12,333 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 20:23:19,039 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 20:23:19,159 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 20:23:19,160 - INFO - {'updated': 'initiated stk query for ws_CO_09092024232257895794483360 899885 '}
2024-09-09 20:23:19,224 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 20:23:19,789 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 20:23:19,791 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer jnswtQcJJCFtz9shpo7udp2ESBbg'}"}
2024-09-09 20:23:19,792 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MjAyMzE5', 'Timestamp': '20240909202319', 'CheckoutRequestID': 'ws_CO_09092024232257895794483360'}"}
2024-09-09 20:23:19,793 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 20:23:20,563 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-09 20:23:20,563 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b4354073', 'CheckoutRequestID': 'ws_CO_09092024232257895794483360', 'ResultCode': '1', 'ResultDesc': 'The balance is insufficient for the transaction.'} for ws_CO_09092024232257895794483360 899885"}
2024-09-09 20:23:20,699 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 20:23:21,223 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 20:23:21,225 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 20:23:21,456 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 20:23:53,139 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 20:23:53,300 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 20:23:53,301 - INFO - {'updated': 'initiated stk query for ws_CO_09092024232341860712412129 899885 '}
2024-09-09 20:23:53,360 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 20:23:53,941 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 20:23:53,943 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 728sgTqZYvwLUqonhQ3u45VVP3XY'}"}
2024-09-09 20:23:53,944 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTA5MjAyMzUz', 'Timestamp': '20240909202353', 'CheckoutRequestID': 'ws_CO_09092024232341860712412129'}"}
2024-09-09 20:23:53,945 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 20:23:54,736 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-09 20:23:54,736 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db14812093', 'CheckoutRequestID': 'ws_CO_09092024232341860712412129', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_09092024232341860712412129 899885"}
2024-09-09 20:23:54,854 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 20:23:55,351 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 20:23:55,352 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 20:23:55,565 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 20:27:16,015 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074889521', 'CheckoutRequestID': 'ws_CO_09092024232712490721622839', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-09 20:27:16,015 - INFO - {'updated_data': 'callback data began'}
2024-09-09 20:27:16,015 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074889521', 'CheckoutRequestID': 'ws_CO_09092024232712490721622839', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-09 20:27:16,187 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 20:27:16,695 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 20:27:16,696 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 20:27:16,941 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 20:27:23,641 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 20:27:23,797 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 20:27:23,798 - INFO - {'updated': 'initiated stk query for ws_CO_09092024232712490721622839 827142 '}
2024-09-09 20:27:23,855 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 20:27:24,451 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 20:27:24,453 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer HADgkSkx9yaSD34GclguNzJ3tVc8'}"}
2024-09-09 20:27:24,453 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MjAyNzIz', 'Timestamp': '20240909202723', 'CheckoutRequestID': 'ws_CO_09092024232712490721622839'}"}
2024-09-09 20:27:24,454 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 20:27:25,163 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-09 20:27:25,164 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f074889521', 'CheckoutRequestID': 'ws_CO_09092024232712490721622839', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_09092024232712490721622839 827142"}
2024-09-09 20:27:25,287 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 20:27:25,793 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 20:27:25,794 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 20:27:26,023 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 20:30:11,170 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db14824354', 'CheckoutRequestID': 'ws_CO_09092024233008103721622839', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-09 20:30:11,170 - INFO - {'updated_data': 'callback data began'}
2024-09-09 20:30:11,171 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db14824354', 'CheckoutRequestID': 'ws_CO_09092024233008103721622839', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-09 20:30:11,328 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 20:30:11,838 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 20:30:11,840 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 20:30:12,385 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-09 22:19:01,573 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 22:19:01,716 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 22:19:01,717 - INFO - {'updated': 'initiated stk query for ws_CO_10092024011850886723785987 827142 '}
2024-09-09 22:19:01,808 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 22:19:02,409 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 22:19:02,411 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer V7klfld8fG5v7DZUxyDCpooMz34i'}"}
2024-09-09 22:19:02,412 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MjIxOTAx', 'Timestamp': '20240909221901', 'CheckoutRequestID': 'ws_CO_10092024011850886723785987'}"}
2024-09-09 22:19:02,413 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 22:19:03,087 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-09 22:19:03,088 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024011850886723785987', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024011850886723785987 827142"}
2024-09-09 22:19:03,090 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-09 22:20:22,426 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-09 22:20:22,573 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-09 22:20:22,574 - INFO - there is a test coming
2024-09-09 22:20:22,574 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-09 22:20:22,625 - INFO - {'updated_data': 'the data is now as 254723785987'}
2024-09-09 22:20:22,626 - INFO - the data is now as 254723785987
2024-09-09 22:20:22,641 - INFO - {'updated_data': 'The paybill is found'}
2024-09-09 22:20:22,642 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-09 22:20:22,643 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 22:20:23,511 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-09 22:20:23,514 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer gAGDq8npJjxr9WSU3TBhXqfvcAEQ'}"}
2024-09-09 22:20:23,514 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTA5MjIyMDIz', 'Timestamp': '20240909222023', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254723785987', 'PartyB': 827142, 'PhoneNumber': '254723785987', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-17550', 'TransactionDesc': 'Some payment'}
2024-09-09 22:20:23,515 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-09 22:20:24,244 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-09 22:20:24,250 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208792645419', 'CheckoutRequestID': 'ws_CO_10092024012024048723785987', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-09 22:30:46,122 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169058128', 'CheckoutRequestID': 'ws_CO_10092024013036306723237817', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3034.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA428O9PG'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910013045}, {'Name': 'PhoneNumber', 'Value': 254723237817}]}}}}"}
2024-09-09 22:30:46,122 - INFO - {'updated_data': 'callback data began'}
2024-09-09 22:30:46,122 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169058128', 'CheckoutRequestID': 'ws_CO_10092024013036306723237817', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3034.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA428O9PG'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910013045}, {'Name': 'PhoneNumber', 'Value': 254723237817}]}}}}}
2024-09-09 22:30:46,310 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-09 22:30:46,798 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-09 22:30:46,799 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-09 22:30:47,069 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 00:31:03,848 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee594987192', 'CheckoutRequestID': 'ws_CO_10092024033055512710116592', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 40000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA629PRRQ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910033103}, {'Name': 'PhoneNumber', 'Value': 254710116592}]}}}}"}
2024-09-10 00:31:03,849 - INFO - {'updated_data': 'callback data began'}
2024-09-10 00:31:03,849 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee594987192', 'CheckoutRequestID': 'ws_CO_10092024033055512710116592', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 40000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA629PRRQ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910033103}, {'Name': 'PhoneNumber', 'Value': 254710116592}]}}}}}
2024-09-10 00:31:04,004 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 00:31:04,376 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 00:31:04,378 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 00:31:04,583 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 00:31:09,656 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 00:31:09,829 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 00:31:09,830 - INFO - {'updated': 'initiated stk query for ws_CO_10092024033055512710116592 899885 '}
2024-09-10 00:31:09,902 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 00:31:10,510 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 00:31:10,512 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 8Y2fBNXetGkvKWZDXcVWQKQ2Exeg'}"}
2024-09-10 00:31:10,512 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDAzMTA5', 'Timestamp': '20240910003109', 'CheckoutRequestID': 'ws_CO_10092024033055512710116592'}"}
2024-09-10 00:31:10,513 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 00:31:11,129 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 00:31:11,129 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee594987192', 'CheckoutRequestID': 'ws_CO_10092024033055512710116592', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024033055512710116592 899885"}
2024-09-10 00:31:11,255 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 00:31:11,460 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 00:31:11,462 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 00:31:11,682 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 01:16:00,769 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 01:16:00,904 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 01:16:00,905 - INFO - there is a test coming
2024-09-10 01:16:00,905 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 01:16:00,949 - INFO - {'updated_data': 'the data is now as 254703314278'}
2024-09-10 01:16:00,949 - INFO - the data is now as 254703314278
2024-09-10 01:16:00,965 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 01:16:00,966 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 01:16:00,967 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 01:16:01,762 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 01:16:01,764 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 2zTxtiXUZ1XCmsCpALUtuKfzQ6oZ'}"}
2024-09-10 01:16:01,764 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDExNjAx', 'Timestamp': '20240910011601', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '53700', 'PartyA': '254703314278', 'PartyB': 899885, 'PhoneNumber': '254703314278', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053342', 'TransactionDesc': 'Some payment'}
2024-09-10 01:16:01,766 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 01:16:02,725 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 01:16:02,731 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b4649621', 'CheckoutRequestID': 'ws_CO_10092024041602379703314278', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 01:26:00,237 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 01:26:00,383 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 01:26:00,384 - INFO - {'updated': 'initiated stk query for ws_CO_10092024042545922718130395 899885 '}
2024-09-10 01:26:00,442 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 01:26:01,121 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 01:26:01,123 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer r6m1dyMbkB0vct2jdU1ck9VIWDoy'}"}
2024-09-10 01:26:01,124 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDEyNjAw', 'Timestamp': '20240910012600', 'CheckoutRequestID': 'ws_CO_10092024042545922718130395'}"}
2024-09-10 01:26:01,125 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 01:26:01,855 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 381
2024-09-10 01:26:01,856 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169135314', 'CheckoutRequestID': 'ws_CO_10092024042545922718130395', 'ResultCode': '2001', 'ResultDesc': 'The initiator information is invalid.'} for ws_CO_10092024042545922718130395 899885"}
2024-09-10 01:26:01,982 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 01:26:02,482 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 01:26:02,484 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 01:26:03,004 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 01:26:31,933 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 01:26:32,087 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 01:26:32,087 - INFO - {'updated': 'initiated stk query for ws_CO_10092024042612962718130395 899885 '}
2024-09-10 01:26:32,152 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 01:26:32,733 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 01:26:32,735 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer RO7UVFQ6nIgGWr6zKhOTsCDXtJIr'}"}
2024-09-10 01:26:32,736 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDEyNjMy', 'Timestamp': '20240910012632', 'CheckoutRequestID': 'ws_CO_10092024042612962718130395'}"}
2024-09-10 01:26:32,737 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 01:26:33,364 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 01:26:33,365 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169372122', 'CheckoutRequestID': 'ws_CO_10092024042612962718130395', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024042612962718130395 899885"}
2024-09-10 01:26:33,482 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 01:26:33,969 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 01:26:33,970 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 01:26:34,172 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 02:16:44,660 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 02:16:44,818 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 02:16:44,819 - INFO - there is a test coming
2024-09-10 02:16:44,819 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 02:16:44,862 - INFO - {'updated_data': 'the data is now as 254723547510'}
2024-09-10 02:16:44,862 - INFO - the data is now as 254723547510
2024-09-10 02:16:44,880 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 02:16:44,880 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 02:16:44,881 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 02:16:45,463 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 02:16:45,465 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer rMUsa1NUP55FgilsABii2kw7ERnp'}"}
2024-09-10 02:16:45,465 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDIxNjQ1', 'Timestamp': '20240910021645', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254723547510', 'PartyB': 899885, 'PhoneNumber': '254723547510', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA694280LM-1725934602498', 'TransactionDesc': 'Some payment'}
2024-09-10 02:16:45,466 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 02:16:46,339 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 02:16:46,347 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee595062468', 'CheckoutRequestID': 'ws_CO_10092024051646006723547510', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 02:16:57,109 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 02:16:57,270 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 02:16:57,271 - INFO - {'updated': 'initiated stk query for ws_CO_10092024051646006723547510 899885 '}
2024-09-10 02:16:57,337 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 02:16:58,198 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 02:16:58,200 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 5Kj9nLWEICZEgOWFoEGQakyP8PBH'}"}
2024-09-10 02:16:58,201 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDIxNjU3', 'Timestamp': '20240910021657', 'CheckoutRequestID': 'ws_CO_10092024051646006723547510'}"}
2024-09-10 02:16:58,202 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 02:16:58,838 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 02:16:58,838 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024051646006723547510', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024051646006723547510 899885"}
2024-09-10 02:16:58,841 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 02:17:07,573 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee595062468', 'CheckoutRequestID': 'ws_CO_10092024051646006723547510', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA42ANPX6'}, {'Name': 'TransactionDate', 'Value': 20240910051706}, {'Name': 'PhoneNumber', 'Value': 254723547510}]}}}}"}
2024-09-10 02:17:07,573 - INFO - {'updated_data': 'callback data began'}
2024-09-10 02:17:07,573 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee595062468', 'CheckoutRequestID': 'ws_CO_10092024051646006723547510', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA42ANPX6'}, {'Name': 'TransactionDate', 'Value': 20240910051706}, {'Name': 'PhoneNumber', 'Value': 254723547510}]}}}}}
2024-09-10 02:17:07,733 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 02:17:08,099 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 02:17:08,100 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 02:17:08,321 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 02:45:55,849 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 02:45:55,996 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 02:45:55,997 - INFO - {'updated': 'initiated stk query for ws_CO_10092024054544613724098969 827142 '}
2024-09-10 02:45:56,054 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 02:45:56,718 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 02:45:56,720 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ZugJXd2HIRQdix1ki5nWlI9TOwNl'}"}
2024-09-10 02:45:56,721 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDI0NTU2', 'Timestamp': '20240910024556', 'CheckoutRequestID': 'ws_CO_10092024054544613724098969'}"}
2024-09-10 02:45:56,722 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 02:45:57,355 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 389
2024-09-10 02:45:57,356 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169408091', 'CheckoutRequestID': 'ws_CO_10092024054544613724098969', 'ResultCode': '1', 'ResultDesc': 'The balance is insufficient for the transaction.'} for ws_CO_10092024054544613724098969 827142"}
2024-09-10 02:45:57,487 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 02:45:57,972 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 02:45:57,973 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 02:45:58,500 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 02:53:37,840 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 02:53:38,022 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 02:53:38,023 - INFO - there is a test coming
2024-09-10 02:53:38,023 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 02:53:38,079 - INFO - {'updated_data': 'the data is now as 254722338001'}
2024-09-10 02:53:38,080 - INFO - the data is now as 254722338001
2024-09-10 02:53:38,098 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 02:53:38,098 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 02:53:38,100 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 02:53:38,878 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 02:53:38,880 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer s5ujwA1fQ8QsqeuZlM1pGk5BHcId'}"}
2024-09-10 02:53:38,881 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDI1MzM4', 'Timestamp': '20240910025338', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '15500', 'PartyA': '254722338001', 'PartyB': 899885, 'PhoneNumber': '254722338001', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053416', 'TransactionDesc': 'Some payment'}
2024-09-10 02:53:38,882 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 02:53:39,747 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 02:53:39,754 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585051140059', 'CheckoutRequestID': 'ws_CO_10092024055339417722338001', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 02:56:12,259 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc15176028', 'CheckoutRequestID': 'ws_CO_10092024055559837722779047', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 6125.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA12BGECB'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910055611}, {'Name': 'PhoneNumber', 'Value': 254722779047}]}}}}"}
2024-09-10 02:56:12,259 - INFO - {'updated_data': 'callback data began'}
2024-09-10 02:56:12,259 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc15176028', 'CheckoutRequestID': 'ws_CO_10092024055559837722779047', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 6125.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA12BGECB'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910055611}, {'Name': 'PhoneNumber', 'Value': 254722779047}]}}}}}
2024-09-10 02:56:12,435 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 02:56:12,623 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 02:56:12,624 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 02:56:13,143 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 02:59:01,015 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 02:59:01,178 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 02:59:01,180 - INFO - {'updated': 'initiated stk query for ws_CO_10092024055849540724098969 899885 '}
2024-09-10 02:59:01,252 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 02:59:01,892 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 02:59:01,894 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer mXyrMGSnmGvKVZG75I8wryVbHunf'}"}
2024-09-10 02:59:01,894 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDI1OTAx', 'Timestamp': '20240910025901', 'CheckoutRequestID': 'ws_CO_10092024055849540724098969'}"}
2024-09-10 02:59:01,895 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 02:59:02,561 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 02:59:02,562 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024055849540724098969', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024055849540724098969 899885"}
2024-09-10 02:59:02,564 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 02:59:20,873 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 02:59:21,024 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 02:59:21,025 - INFO - there is a test coming
2024-09-10 02:59:21,025 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 02:59:21,070 - INFO - {'updated_data': 'the data is now as 254794194907'}
2024-09-10 02:59:21,070 - INFO - the data is now as 254794194907
2024-09-10 02:59:21,086 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 02:59:21,086 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 02:59:21,087 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 02:59:21,773 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 02:59:21,775 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer izfjON1RKwiouyA0bpHC5AlVvKGm'}"}
2024-09-10 02:59:21,775 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDI1OTIx', 'Timestamp': '20240910025921', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254794194907', 'PartyB': 827142, 'PhoneNumber': '254794194907', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-2492', 'TransactionDesc': 'Some payment'}
2024-09-10 02:59:21,777 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 02:59:22,601 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 02:59:22,607 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b4731867', 'CheckoutRequestID': 'ws_CO_10092024055922408794194907', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 03:11:36,398 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169185763', 'CheckoutRequestID': 'ws_CO_10092024061119438725352261', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 6426.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA92BXQ89'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910061135}, {'Name': 'PhoneNumber', 'Value': 254725352261}]}}}}"}
2024-09-10 03:11:36,399 - INFO - {'updated_data': 'callback data began'}
2024-09-10 03:11:36,399 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169185763', 'CheckoutRequestID': 'ws_CO_10092024061119438725352261', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 6426.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA92BXQ89'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910061135}, {'Name': 'PhoneNumber', 'Value': 254725352261}]}}}}}
2024-09-10 03:11:36,550 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 03:11:36,742 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 03:11:36,743 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 03:11:36,970 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 03:11:40,864 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 03:11:41,000 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 03:11:41,001 - INFO - {'updated': 'initiated stk query for ws_CO_10092024061119438725352261 827142 '}
2024-09-10 03:11:41,069 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 03:11:41,697 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 03:11:41,699 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Yvh7GW9Mm4GRAW0Z9RZlAtAJLHP8'}"}
2024-09-10 03:11:41,700 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDMxMTQx', 'Timestamp': '20240910031141', 'CheckoutRequestID': 'ws_CO_10092024061119438725352261'}"}
2024-09-10 03:11:41,701 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 03:11:42,416 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 03:11:42,416 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169185763', 'CheckoutRequestID': 'ws_CO_10092024061119438725352261', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024061119438725352261 827142"}
2024-09-10 03:11:42,530 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 03:11:42,720 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 03:11:42,722 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 03:11:42,931 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 03:18:37,923 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc15200245', 'CheckoutRequestID': 'ws_CO_10092024061836134733427108', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}"}
2024-09-10 03:18:37,924 - INFO - {'updated_data': 'callback data began'}
2024-09-10 03:18:37,924 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc15200245', 'CheckoutRequestID': 'ws_CO_10092024061836134733427108', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}}
2024-09-10 03:18:38,088 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 03:18:38,588 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 03:18:38,589 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 03:18:38,798 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 03:18:47,242 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 03:18:47,417 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 03:18:47,418 - INFO - {'updated': 'initiated stk query for ws_CO_10092024061836134733427108 827142 '}
2024-09-10 03:18:47,484 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 03:18:48,059 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 03:18:48,061 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 3egk02xFGfFjSAwjDA4rwy7yF95B'}"}
2024-09-10 03:18:48,061 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDMxODQ3', 'Timestamp': '20240910031847', 'CheckoutRequestID': 'ws_CO_10092024061836134733427108'}"}
2024-09-10 03:18:48,062 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 03:18:48,749 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 380
2024-09-10 03:18:48,749 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc15200245', 'CheckoutRequestID': 'ws_CO_10092024061836134733427108', 'ResultCode': '2001', 'ResultDesc': 'The initiator information is invalid.'} for ws_CO_10092024061836134733427108 827142"}
2024-09-10 03:18:48,868 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 03:18:49,047 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 03:18:49,048 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 03:18:49,574 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 03:18:54,386 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 03:18:54,537 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 03:18:54,538 - INFO - there is a test coming
2024-09-10 03:18:54,538 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 03:18:54,588 - INFO - {'updated_data': 'the data is now as 254725352261'}
2024-09-10 03:18:54,588 - INFO - the data is now as 254725352261
2024-09-10 03:18:54,604 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 03:18:54,612 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 03:18:54,613 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 03:18:55,170 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 03:18:55,172 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer hAE5YEpewkkxj7edrXvLjfayCqNJ'}"}
2024-09-10 03:18:55,179 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDMxODU1', 'Timestamp': '20240910031855', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5193', 'PartyA': '254725352261', 'PartyB': 827142, 'PhoneNumber': '254725352261', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-83646', 'TransactionDesc': 'Some payment'}
2024-09-10 03:18:55,183 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 03:18:56,029 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 03:18:56,035 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169911805', 'CheckoutRequestID': 'ws_CO_10092024061855813725352261', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 03:19:16,965 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 03:19:17,092 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 03:19:17,094 - INFO - {'updated': 'initiated stk query for ws_CO_10092024061855813725352261 827142 '}
2024-09-10 03:19:17,161 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 03:19:17,892 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 03:19:17,894 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 4EYoV2ZbUdmOKDUxAYRB6qbGAMDo'}"}
2024-09-10 03:19:17,895 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDMxOTE3', 'Timestamp': '20240910031917', 'CheckoutRequestID': 'ws_CO_10092024061855813725352261'}"}
2024-09-10 03:19:17,896 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 03:19:18,558 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 03:19:18,559 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962169911805', 'CheckoutRequestID': 'ws_CO_10092024061855813725352261', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024061855813725352261 827142"}
2024-09-10 03:19:18,688 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 03:19:19,183 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 03:19:19,184 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 03:19:19,412 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 03:21:33,826 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 03:21:33,967 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 03:21:33,967 - INFO - {'updated': 'initiated stk query for ws_CO_10092024062121995729841069 899885 '}
2024-09-10 03:21:34,060 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 03:21:34,622 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 03:21:34,624 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ki2AwEvAVGBnphUm6vDqJRmscFej'}"}
2024-09-10 03:21:34,625 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDMyMTM0', 'Timestamp': '20240910032134', 'CheckoutRequestID': 'ws_CO_10092024062121995729841069'}"}
2024-09-10 03:21:34,626 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 03:21:35,345 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 03:21:35,346 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024062121995729841069', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024062121995729841069 899885"}
2024-09-10 03:21:35,348 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 05:30:43,842 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee595365863', 'CheckoutRequestID': 'ws_CO_10092024083035037720451393', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA12NXWM9'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910083043}, {'Name': 'PhoneNumber', 'Value': 254720451393}]}}}}"}
2024-09-10 05:30:43,843 - INFO - {'updated_data': 'callback data began'}
2024-09-10 05:30:43,843 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee595365863', 'CheckoutRequestID': 'ws_CO_10092024083035037720451393', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA12NXWM9'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910083043}, {'Name': 'PhoneNumber', 'Value': 254720451393}]}}}}}
2024-09-10 05:30:44,001 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 05:30:44,455 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 05:30:44,457 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 05:30:44,936 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 05:30:46,383 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 05:30:46,547 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 05:30:46,548 - INFO - {'updated': 'initiated stk query for ws_CO_10092024083035037720451393 827142 '}
2024-09-10 05:30:46,605 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:30:47,200 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 05:30:47,202 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer RLnGngqqRw1fdWRBmh1ircjdEsQj'}"}
2024-09-10 05:30:47,203 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDUzMDQ2', 'Timestamp': '20240910053046', 'CheckoutRequestID': 'ws_CO_10092024083035037720451393'}"}
2024-09-10 05:30:47,204 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:30:47,828 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 05:30:47,828 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee595365863', 'CheckoutRequestID': 'ws_CO_10092024083035037720451393', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024083035037720451393 827142"}
2024-09-10 05:30:47,942 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 05:30:48,116 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 05:30:48,118 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 05:30:48,321 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 05:35:39,028 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075212581', 'CheckoutRequestID': 'ws_CO_10092024083528540723434227', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5538.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA52OIV1T'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910083538}, {'Name': 'PhoneNumber', 'Value': 254723434227}]}}}}"}
2024-09-10 05:35:39,029 - INFO - {'updated_data': 'callback data began'}
2024-09-10 05:35:39,029 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075212581', 'CheckoutRequestID': 'ws_CO_10092024083528540723434227', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5538.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA52OIV1T'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910083538}, {'Name': 'PhoneNumber', 'Value': 254723434227}]}}}}}
2024-09-10 05:35:39,215 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 05:35:39,567 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 05:35:39,568 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 05:35:39,634 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 05:35:39,764 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 05:35:39,808 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 05:35:39,809 - INFO - {'updated': 'initiated stk query for ws_CO_10092024083528540723434227 827142 '}
2024-09-10 05:35:39,876 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:35:40,466 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 05:35:40,468 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer NjG8Wz8Gb40oRZ8GFXko1RGstPA8'}"}
2024-09-10 05:35:40,468 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDUzNTM5', 'Timestamp': '20240910053539', 'CheckoutRequestID': 'ws_CO_10092024083528540723434227'}"}
2024-09-10 05:35:40,469 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:35:41,087 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 05:35:41,087 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075212581', 'CheckoutRequestID': 'ws_CO_10092024083528540723434227', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024083528540723434227 827142"}
2024-09-10 05:35:41,208 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 05:35:41,393 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 05:35:41,395 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 05:35:41,584 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 05:38:57,351 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 05:38:57,513 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 05:38:57,513 - INFO - {'updated': 'initiated stk query for ws_CO_10092024083846111723434227 827142 '}
2024-09-10 05:38:57,574 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:38:58,149 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 05:38:58,150 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer pk1V5JrKFohAGrFhfov3m5HQVmI5'}"}
2024-09-10 05:38:58,151 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDUzODU3', 'Timestamp': '20240910053857', 'CheckoutRequestID': 'ws_CO_10092024083846111723434227'}"}
2024-09-10 05:38:58,152 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:38:58,857 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 05:38:58,858 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169305113', 'CheckoutRequestID': 'ws_CO_10092024083846111723434227', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024083846111723434227 827142"}
2024-09-10 05:38:58,984 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 05:38:59,163 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 05:38:59,165 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 05:38:59,635 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 05:50:21,583 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 05:50:21,749 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 05:50:21,750 - INFO - {'updated': 'initiated stk query for ws_CO_10092024085010015727156656 827142 '}
2024-09-10 05:50:21,806 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:50:22,498 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 05:50:22,500 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer sEOkGP3pzW0wXA2BZ8sE7APxAgFd'}"}
2024-09-10 05:50:22,501 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDU1MDIx', 'Timestamp': '20240910055021', 'CheckoutRequestID': 'ws_CO_10092024085010015727156656'}"}
2024-09-10 05:50:22,502 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:50:23,132 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 05:50:23,133 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024085010015727156656', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024085010015727156656 827142"}
2024-09-10 05:50:23,135 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 05:58:00,982 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792915372', 'CheckoutRequestID': 'ws_CO_10092024085754619724525990', 'ResultCode': 17, 'ResultDesc': 'Rule limited.'}}}"}
2024-09-10 05:58:00,983 - INFO - {'updated_data': 'callback data began'}
2024-09-10 05:58:00,984 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792915372', 'CheckoutRequestID': 'ws_CO_10092024085754619724525990', 'ResultCode': 17, 'ResultDesc': 'Rule limited.'}}}}
2024-09-10 05:58:01,140 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 05:58:01,302 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 05:58:01,304 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 05:58:01,505 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 05:58:05,725 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 05:58:05,938 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 05:58:05,938 - INFO - {'updated': 'initiated stk query for ws_CO_10092024085754619724525990 827142 '}
2024-09-10 05:58:05,993 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:58:06,596 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 05:58:06,598 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer vebigKaX9P9ZZJcpmiKa4sWNFKsZ'}"}
2024-09-10 05:58:06,598 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDU1ODA1', 'Timestamp': '20240910055805', 'CheckoutRequestID': 'ws_CO_10092024085754619724525990'}"}
2024-09-10 05:58:06,600 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:58:07,312 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 354
2024-09-10 05:58:07,313 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208792915372', 'CheckoutRequestID': 'ws_CO_10092024085754619724525990', 'ResultCode': '17', 'ResultDesc': 'Rule limited.'} for ws_CO_10092024085754619724525990 827142"}
2024-09-10 05:58:07,428 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 05:58:07,868 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 05:58:07,869 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 05:58:08,056 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 05:58:48,840 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 05:58:49,033 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 05:58:49,033 - INFO - there is a test coming
2024-09-10 05:58:49,034 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 05:58:49,080 - INFO - {'updated_data': 'the data is now as 254724525990'}
2024-09-10 05:58:49,080 - INFO - the data is now as 254724525990
2024-09-10 05:58:49,106 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 05:58:49,106 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 05:58:49,107 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:58:49,689 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 05:58:49,692 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer vyaCMOfnWpQMPUiZRAFIlb4fzTBg'}"}
2024-09-10 05:58:49,692 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDU1ODQ5', 'Timestamp': '20240910055849', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254724525990', 'PartyB': 827142, 'PhoneNumber': '254724525990', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '121-49339', 'TransactionDesc': 'Some payment'}
2024-09-10 05:58:49,694 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 05:58:50,432 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 05:58:50,439 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc15514563', 'CheckoutRequestID': 'ws_CO_10092024085850207724525990', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 06:06:26,917 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:06:27,113 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:06:27,113 - INFO - there is a test coming
2024-09-10 06:06:27,113 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 06:06:27,158 - INFO - {'updated_data': 'the data is now as 254719347883'}
2024-09-10 06:06:27,159 - INFO - the data is now as 254719347883
2024-09-10 06:06:27,173 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 06:06:27,173 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 06:06:27,174 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:06:27,861 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:06:27,862 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer tXjmb3feRgD9GRTcdBkw3Mw30LcN'}"}
2024-09-10 06:06:27,863 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDYwNjI3', 'Timestamp': '20240910060627', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3636', 'PartyA': '254719347883', 'PartyB': 827142, 'PhoneNumber': '254719347883', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '121-48028', 'TransactionDesc': 'Some payment'}
2024-09-10 06:06:27,863 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:06:28,619 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 06:06:28,625 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208792924203', 'CheckoutRequestID': 'ws_CO_10092024090628372719347883', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 06:07:56,980 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075244856', 'CheckoutRequestID': 'ws_CO_10092024090743807721862879', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 6248.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA62SBISO'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910090756}, {'Name': 'PhoneNumber', 'Value': 254721862879}]}}}}"}
2024-09-10 06:07:56,980 - INFO - {'updated_data': 'callback data began'}
2024-09-10 06:07:56,981 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075244856', 'CheckoutRequestID': 'ws_CO_10092024090743807721862879', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 6248.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA62SBISO'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910090756}, {'Name': 'PhoneNumber', 'Value': 254721862879}]}}}}}
2024-09-10 06:07:57,134 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:07:59,645 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:07:59,647 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:07:59,869 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:08:04,912 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:08:05,069 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:08:05,070 - INFO - {'updated': 'initiated stk query for ws_CO_10092024090743807721862879 827142 '}
2024-09-10 06:08:05,136 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:08:05,707 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:08:05,709 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer RH3MURmSiYzlMQzNUkDjcMb6UDGa'}"}
2024-09-10 06:08:05,710 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDYwODA1', 'Timestamp': '20240910060805', 'CheckoutRequestID': 'ws_CO_10092024090743807721862879'}"}
2024-09-10 06:08:05,711 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:08:06,353 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 06:08:06,355 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075244856', 'CheckoutRequestID': 'ws_CO_10092024090743807721862879', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024090743807721862879 827142"}
2024-09-10 06:08:06,474 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:08:06,668 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:08:06,669 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:08:06,891 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:15:48,676 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:15:48,798 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:15:48,798 - INFO - there is a test coming
2024-09-10 06:15:48,798 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 06:15:48,840 - INFO - {'updated_data': 'the data is now as 254722495838'}
2024-09-10 06:15:48,840 - INFO - the data is now as 254722495838
2024-09-10 06:15:48,855 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 06:15:48,856 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 06:15:48,857 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:15:49,527 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:15:49,529 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer cdkOtZJZIVvxAZ8wxDtuPCGNzU99'}"}
2024-09-10 06:15:49,530 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDYxNTQ5', 'Timestamp': '20240910061549', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3545', 'PartyA': '254722495838', 'PartyB': 827142, 'PhoneNumber': '254722495838', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-40810', 'TransactionDesc': 'Some payment'}
2024-09-10 06:15:49,531 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:15:50,262 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 06:15:50,268 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585051521052', 'CheckoutRequestID': 'ws_CO_10092024091550071722495838', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 06:17:58,344 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87249566', 'CheckoutRequestID': 'ws_CO_10092024091749227722495838', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 30000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA92TI9GF'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910091757}, {'Name': 'PhoneNumber', 'Value': 254722495838}]}}}}"}
2024-09-10 06:17:58,345 - INFO - {'updated_data': 'callback data began'}
2024-09-10 06:17:58,345 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87249566', 'CheckoutRequestID': 'ws_CO_10092024091749227722495838', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 30000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA92TI9GF'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910091757}, {'Name': 'PhoneNumber', 'Value': 254722495838}]}}}}}
2024-09-10 06:17:58,497 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:17:58,692 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:17:58,693 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:17:59,152 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:18:00,294 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:18:00,456 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:18:00,457 - INFO - {'updated': 'initiated stk query for ws_CO_10092024091749227722495838 899885 '}
2024-09-10 06:18:00,527 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:18:01,093 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:18:01,095 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer S1YqEXYMtbEWkYElSsZNT01ydMhD'}"}
2024-09-10 06:18:01,097 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDYxODAw', 'Timestamp': '20240910061800', 'CheckoutRequestID': 'ws_CO_10092024091749227722495838'}"}
2024-09-10 06:18:01,101 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:18:01,742 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 06:18:01,743 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87249566', 'CheckoutRequestID': 'ws_CO_10092024091749227722495838', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024091749227722495838 899885"}
2024-09-10 06:18:01,873 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:18:02,038 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:18:02,039 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:18:02,529 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:19:42,471 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:19:42,580 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:19:42,581 - INFO - there is a test coming
2024-09-10 06:19:42,581 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 06:19:42,638 - INFO - {'updated_data': 'the data is now as 254705140885'}
2024-09-10 06:19:42,639 - INFO - the data is now as 254705140885
2024-09-10 06:19:42,655 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 06:19:42,656 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 06:19:42,657 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:19:43,393 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:19:43,395 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer KRA4AKcWdC66nSzhRTixELXwd9gZ'}"}
2024-09-10 06:19:43,395 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDYxOTQz', 'Timestamp': '20240910061943', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1001', 'PartyA': '254705140885', 'PartyB': 827142, 'PhoneNumber': '254705140885', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-5113', 'TransactionDesc': 'Some payment'}
2024-09-10 06:19:43,396 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:19:44,203 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 06:19:44,209 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc15565149', 'CheckoutRequestID': 'ws_CO_10092024091943953705140885', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 06:20:05,155 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:20:05,296 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:20:05,297 - INFO - {'updated': 'initiated stk query for ws_CO_10092024091943953705140885 827142 '}
2024-09-10 06:20:05,358 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:20:06,014 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:20:06,016 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer LhRetaAWnWkfZyqwqfj2ouiOXNQ1'}"}
2024-09-10 06:20:06,016 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDYyMDA1', 'Timestamp': '20240910062005', 'CheckoutRequestID': 'ws_CO_10092024091943953705140885'}"}
2024-09-10 06:20:06,017 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:20:06,625 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 06:20:06,626 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024091943953705140885', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024091943953705140885 827142"}
2024-09-10 06:20:06,628 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 06:24:15,753 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:24:15,777 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 06:24:15,778 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 06:25:04,756 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:25:04,776 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 06:25:04,777 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 06:25:18,489 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:25:18,502 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 06:25:18,502 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 06:25:31,617 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:25:31,758 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:25:31,759 - INFO - there is a test coming
2024-09-10 06:25:31,759 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 06:25:31,810 - INFO - {'updated_data': 'the data is now as 254729484500'}
2024-09-10 06:25:31,810 - INFO - the data is now as 254729484500
2024-09-10 06:25:31,828 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 06:25:31,829 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 06:25:31,830 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:25:32,481 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:25:32,484 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Z3Q6cmdpvQVN6WUKCQzv8QnKapyH'}"}
2024-09-10 06:25:32,484 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDYyNTMy', 'Timestamp': '20240910062532', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3200', 'PartyA': '254729484500', 'PartyB': 827142, 'PhoneNumber': '254729484500', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-30170', 'TransactionDesc': 'Some payment'}
2024-09-10 06:25:32,485 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:25:33,230 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 06:25:33,236 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87257076', 'CheckoutRequestID': 'ws_CO_10092024092533020729484500', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 06:26:42,331 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792944959', 'CheckoutRequestID': 'ws_CO_10092024092633382769226627', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA52UKKW1'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910092642}, {'Name': 'PhoneNumber', 'Value': 254769226627}]}}}}"}
2024-09-10 06:26:42,331 - INFO - {'updated_data': 'callback data began'}
2024-09-10 06:26:42,332 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792944959', 'CheckoutRequestID': 'ws_CO_10092024092633382769226627', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA52UKKW1'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910092642}, {'Name': 'PhoneNumber', 'Value': 254769226627}]}}}}}
2024-09-10 06:26:42,486 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:26:42,928 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:26:42,930 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:26:43,407 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:26:49,956 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:26:49,971 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 06:26:49,972 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 06:27:09,920 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:27:09,944 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 06:27:09,945 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 06:27:20,141 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:27:20,157 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 06:27:20,158 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 06:31:54,645 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:31:54,661 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 06:31:54,663 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 06:32:38,886 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:32:39,015 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:32:39,016 - INFO - {'updated': 'initiated stk query for ws_CO_10092024093207683713519722 899885 '}
2024-09-10 06:32:39,091 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:32:39,677 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:32:39,679 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer uKJJhdkMhVONGkW2yALav4QV8kFy'}"}
2024-09-10 06:32:39,679 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDYzMjM5', 'Timestamp': '20240910063239', 'CheckoutRequestID': 'ws_CO_10092024093207683713519722'}"}
2024-09-10 06:32:39,680 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:32:40,301 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 06:32:40,301 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075270226', 'CheckoutRequestID': 'ws_CO_10092024093207683713519722', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024093207683713519722 899885"}
2024-09-10 06:32:40,415 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:32:40,786 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:32:40,787 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:32:41,001 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:32:49,551 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:32:49,742 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:32:49,743 - INFO - there is a test coming
2024-09-10 06:32:49,743 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 06:32:49,788 - INFO - {'updated_data': 'the data is now as 254725441789'}
2024-09-10 06:32:49,789 - INFO - the data is now as 254725441789
2024-09-10 06:32:49,807 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 06:32:49,807 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 06:32:49,808 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:32:50,389 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:32:50,391 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer xuhmaZ1VGHKnSLRvANs5y4sUKELg'}"}
2024-09-10 06:32:50,391 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDYzMjUw', 'Timestamp': '20240910063250', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '385245', 'PartyA': '254725441789', 'PartyB': 827142, 'PhoneNumber': '254725441789', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '124-923', 'TransactionDesc': 'Some payment'}
2024-09-10 06:32:50,393 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:32:51,413 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 06:32:51,419 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15605315', 'CheckoutRequestID': 'ws_CO_10092024093251066725441789', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 06:32:59,246 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:32:59,261 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 06:32:59,261 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 06:33:33,475 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:33:33,638 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:33:33,639 - INFO - there is a test coming
2024-09-10 06:33:33,639 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 06:33:33,684 - INFO - {'updated_data': 'the data is now as 254723222033'}
2024-09-10 06:33:33,685 - INFO - the data is now as 254723222033
2024-09-10 06:33:33,703 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 06:33:33,704 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 06:33:33,705 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:33:34,289 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:33:34,291 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer eAs4t2OI2myJA5yieeRQ4di8GixK'}"}
2024-09-10 06:33:34,292 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDYzMzM0', 'Timestamp': '20240910063334', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '6000', 'PartyA': '254723222033', 'PartyB': 827142, 'PhoneNumber': '254723222033', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-105933', 'TransactionDesc': 'Some payment'}
2024-09-10 06:33:34,293 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:33:35,154 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 06:33:35,161 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b515603488', 'CheckoutRequestID': 'ws_CO_10092024093334917723222033', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 06:34:28,296 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:34:28,433 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:34:28,433 - INFO - there is a test coming
2024-09-10 06:34:28,433 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 06:34:28,472 - INFO - {'updated_data': 'the data is now as 254708238095'}
2024-09-10 06:34:28,472 - INFO - the data is now as 254708238095
2024-09-10 06:34:28,487 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 06:34:28,487 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 06:34:28,488 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:34:29,042 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:34:29,044 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer uOA15KDzWSkq75zRSTQNCPnjAYf0'}"}
2024-09-10 06:34:29,045 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDYzNDI5', 'Timestamp': '20240910063429', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254708238095', 'PartyB': 899885, 'PhoneNumber': '254708238095', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA1664288LM-1725950065331', 'TransactionDesc': 'Some payment'}
2024-09-10 06:34:29,046 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:34:31,114 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 06:34:31,121 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee595519354', 'CheckoutRequestID': 'ws_CO_10092024093429554708238095', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 06:35:22,421 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:35:22,582 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:35:22,583 - INFO - {'updated': 'initiated stk query for ws_CO_10092024093429554708238095 899885 '}
2024-09-10 06:35:22,640 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:35:23,227 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:35:23,229 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 16ztlC66jLGfGGyiUunErOc5hQN7'}"}
2024-09-10 06:35:23,229 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDYzNTIy', 'Timestamp': '20240910063522', 'CheckoutRequestID': 'ws_CO_10092024093429554708238095'}"}
2024-09-10 06:35:23,231 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:35:23,849 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 06:35:23,850 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee595519354', 'CheckoutRequestID': 'ws_CO_10092024093429554708238095', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024093429554708238095 899885"}
2024-09-10 06:35:23,960 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:35:24,137 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:35:24,138 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:35:24,620 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:36:53,956 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:36:54,151 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:36:54,152 - INFO - {'updated': 'initiated stk query for ws_CO_10092024093632709705140885 827142 '}
2024-09-10 06:36:54,217 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:36:54,863 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:36:54,865 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Z1TUAxpASW84MCdZh4mS8Sd1Rhdl'}"}
2024-09-10 06:36:54,865 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDYzNjU0', 'Timestamp': '20240910063654', 'CheckoutRequestID': 'ws_CO_10092024093632709705140885'}"}
2024-09-10 06:36:54,866 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:36:55,546 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 06:36:55,547 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169599299', 'CheckoutRequestID': 'ws_CO_10092024093632709705140885', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024093632709705140885 827142"}
2024-09-10 06:36:55,672 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:36:55,901 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:36:55,903 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:36:56,320 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:37:08,211 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:37:08,392 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:37:08,393 - INFO - there is a test coming
2024-09-10 06:37:08,393 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 06:37:08,439 - INFO - {'updated_data': 'the data is now as 254725441789'}
2024-09-10 06:37:08,442 - INFO - the data is now as 254725441789
2024-09-10 06:37:08,457 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 06:37:08,457 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 06:37:08,459 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:37:09,034 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:37:09,036 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer zyslArHpDMGBJWGyPs3KpNBpbrAG'}"}
2024-09-10 06:37:09,037 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDYzNzA5', 'Timestamp': '20240910063709', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '85000', 'PartyA': '254725441789', 'PartyB': 827142, 'PhoneNumber': '254725441789', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '124-923', 'TransactionDesc': 'Some payment'}
2024-09-10 06:37:09,038 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:37:09,824 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 06:37:09,830 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87269310', 'CheckoutRequestID': 'ws_CO_10092024093709600725441789', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 06:37:58,369 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:37:58,390 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 06:37:58,391 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 06:38:09,362 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:38:09,375 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 06:38:09,375 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 06:41:04,610 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:41:04,811 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:41:04,812 - INFO - there is a test coming
2024-09-10 06:41:04,812 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 06:41:04,875 - INFO - {'updated_data': 'the data is now as 254720717129'}
2024-09-10 06:41:04,876 - INFO - the data is now as 254720717129
2024-09-10 06:41:04,898 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 06:41:04,898 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 06:41:04,899 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:41:05,591 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:41:05,593 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 0Xvbp7zQi4sou6CH733kSRwS9sdt'}"}
2024-09-10 06:41:05,594 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDY0MTA1', 'Timestamp': '20240910064105', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '50000', 'PartyA': '254720717129', 'PartyB': 899885, 'PhoneNumber': '254720717129', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053961', 'TransactionDesc': 'Some payment'}
2024-09-10 06:41:05,595 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:41:06,582 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 06:41:06,588 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170089872', 'CheckoutRequestID': 'ws_CO_10092024094106340720717129', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 06:41:27,439 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:41:27,453 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 06:41:27,454 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 06:41:29,227 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:41:29,358 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:41:29,359 - INFO - {'updated': 'initiated stk query for ws_CO_10092024094007915726451264 827142 '}
2024-09-10 06:41:29,413 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:41:30,044 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:41:30,050 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Di5Q5p1eylxMWUC8ARVjAbEanZz8'}"}
2024-09-10 06:41:30,051 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDY0MTI5', 'Timestamp': '20240910064129', 'CheckoutRequestID': 'ws_CO_10092024094007915726451264'}"}
2024-09-10 06:41:30,052 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:41:30,757 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 06:41:30,758 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170088821', 'CheckoutRequestID': 'ws_CO_10092024094007915726451264', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024094007915726451264 827142"}
2024-09-10 06:41:30,885 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:41:31,050 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:41:31,052 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:41:31,255 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:41:48,365 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:41:48,502 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:41:48,503 - INFO - there is a test coming
2024-09-10 06:41:48,503 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 06:41:48,554 - INFO - {'updated_data': 'the data is now as 254725950979'}
2024-09-10 06:41:48,555 - INFO - the data is now as 254725950979
2024-09-10 06:41:48,580 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 06:41:48,580 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 06:41:48,582 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:41:49,134 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:41:49,136 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer TTzbiSGHP1REGAxwAVqNwvURe68f'}"}
2024-09-10 06:41:49,136 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDY0MTQ5', 'Timestamp': '20240910064149', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10500', 'PartyA': '254725950979', 'PartyB': 827142, 'PhoneNumber': '254725950979', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-84900', 'TransactionDesc': 'Some payment'}
2024-09-10 06:41:49,138 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:41:50,050 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 06:41:50,056 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169368671', 'CheckoutRequestID': 'ws_CO_10092024094149746725950979', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 06:41:53,542 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:41:53,730 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:41:53,731 - INFO - {'updated': 'initiated stk query for ws_CO_10092024094106340720717129 899885 '}
2024-09-10 06:41:53,790 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:41:54,628 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:41:54,631 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 6wJc0HWKwhaAUFwP3NJIMBGuBimf'}"}
2024-09-10 06:41:54,632 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDY0MTUz', 'Timestamp': '20240910064153', 'CheckoutRequestID': 'ws_CO_10092024094106340720717129'}"}
2024-09-10 06:41:54,633 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:41:55,258 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 06:41:55,259 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170089872', 'CheckoutRequestID': 'ws_CO_10092024094106340720717129', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024094106340720717129 899885"}
2024-09-10 06:41:55,374 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:41:55,562 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:41:55,564 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:41:56,056 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:51:34,361 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:51:34,522 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:51:34,522 - INFO - there is a test coming
2024-09-10 06:51:34,523 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 06:51:34,571 - INFO - {'updated_data': 'the data is now as 254741477302'}
2024-09-10 06:51:34,571 - INFO - the data is now as 254741477302
2024-09-10 06:51:34,587 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 06:51:34,587 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 06:51:34,588 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:51:35,162 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:51:35,164 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer M8VvfxvDkWUGLpVTaqJEC3e3gRyC'}"}
2024-09-10 06:51:35,164 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDY1MTM1', 'Timestamp': '20240910065135', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '200', 'PartyA': '254741477302', 'PartyB': 899885, 'PhoneNumber': '254741477302', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053393', 'TransactionDesc': 'Some payment'}
2024-09-10 06:51:35,165 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:51:35,988 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 06:51:35,994 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5195505', 'CheckoutRequestID': 'ws_CO_10092024095135781741477302', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 06:52:31,754 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:52:32,042 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:52:32,043 - INFO - there is a test coming
2024-09-10 06:52:32,043 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 06:52:32,103 - INFO - {'updated_data': 'the data is now as 254741477302'}
2024-09-10 06:52:32,104 - INFO - the data is now as 254741477302
2024-09-10 06:52:32,123 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 06:52:32,124 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 06:52:32,125 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:52:32,725 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:52:32,727 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer He4mWKG9uDa5nI145lD8XY4jLRje'}"}
2024-09-10 06:52:32,728 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDY1MjMy', 'Timestamp': '20240910065232', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '200', 'PartyA': '254741477302', 'PartyB': 899885, 'PhoneNumber': '254741477302', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053427', 'TransactionDesc': 'Some payment'}
2024-09-10 06:52:32,729 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:52:33,543 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 06:52:33,549 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208792971811', 'CheckoutRequestID': 'ws_CO_10092024095233286741477302', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 06:52:41,037 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:52:41,170 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:52:41,171 - INFO - {'updated': 'initiated stk query for ws_CO_10092024095213841721617974 899885 '}
2024-09-10 06:52:41,237 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:52:42,354 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:52:42,356 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer YbXRbi9yOmydwRaZLm1ImmAQsYn9'}"}
2024-09-10 06:52:42,356 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDY1MjQx', 'Timestamp': '20240910065241', 'CheckoutRequestID': 'ws_CO_10092024095213841721617974'}"}
2024-09-10 06:52:42,358 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:52:43,011 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 06:52:43,012 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075290922', 'CheckoutRequestID': 'ws_CO_10092024095213841721617974', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024095213841721617974 899885"}
2024-09-10 06:52:43,125 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:52:43,290 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:52:43,291 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:52:43,482 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:52:44,204 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:52:44,220 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 06:52:44,221 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 06:53:13,112 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:53:13,259 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:53:13,260 - INFO - there is a test coming
2024-09-10 06:53:13,260 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 06:53:13,305 - INFO - {'updated_data': 'the data is now as 254769226627'}
2024-09-10 06:53:13,306 - INFO - the data is now as 254769226627
2024-09-10 06:53:13,333 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 06:53:13,333 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 06:53:13,334 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:53:14,140 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:53:14,141 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 7eRjkvyh0GBhgXSUUxEM4nGj8I6v'}"}
2024-09-10 06:53:14,142 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDY1MzE0', 'Timestamp': '20240910065314', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254769226627', 'PartyB': 899885, 'PhoneNumber': '254769226627', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA1666861CP-1725951185141', 'TransactionDesc': 'Some payment'}
2024-09-10 06:53:14,143 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:53:14,925 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 06:53:14,932 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc15646209', 'CheckoutRequestID': 'ws_CO_10092024095314688769226627', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 06:56:15,617 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:56:15,790 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:56:15,791 - INFO - {'updated': 'initiated stk query for ws_CO_10092024095604398719661889 827142 '}
2024-09-10 06:56:15,857 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:56:16,439 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:56:16,440 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer naNLndTvYZqjMtyL8AY7tGjMCAY0'}"}
2024-09-10 06:56:16,441 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDY1NjE1', 'Timestamp': '20240910065615', 'CheckoutRequestID': 'ws_CO_10092024095604398719661889'}"}
2024-09-10 06:56:16,442 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:56:17,062 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 06:56:17,063 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075294672', 'CheckoutRequestID': 'ws_CO_10092024095604398719661889', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024095604398719661889 827142"}
2024-09-10 06:56:17,233 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:56:17,750 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:56:17,752 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:56:18,299 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:56:24,835 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:56:24,971 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:56:24,972 - INFO - {'updated': 'initiated stk query for ws_CO_10092024095613363757333036 827142 '}
2024-09-10 06:56:25,025 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:56:25,590 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:56:25,591 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer IUpax3wi2eHoVju4KSSSxKc7AkjM'}"}
2024-09-10 06:56:25,592 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDY1NjI1', 'Timestamp': '20240910065625', 'CheckoutRequestID': 'ws_CO_10092024095613363757333036'}"}
2024-09-10 06:56:25,593 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:56:26,214 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 06:56:26,215 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024095613363757333036', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024095613363757333036 827142"}
2024-09-10 06:56:26,217 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 06:58:19,747 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15667103', 'CheckoutRequestID': 'ws_CO_10092024095810850727292347', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA02YH2TG'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910095819}, {'Name': 'PhoneNumber', 'Value': 254727292347}]}}}}"}
2024-09-10 06:58:19,748 - INFO - {'updated_data': 'callback data began'}
2024-09-10 06:58:19,748 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15667103', 'CheckoutRequestID': 'ws_CO_10092024095810850727292347', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA02YH2TG'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910095819}, {'Name': 'PhoneNumber', 'Value': 254727292347}]}}}}}
2024-09-10 06:58:19,904 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:58:20,099 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:58:20,100 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:58:20,318 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:59:00,616 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075297630', 'CheckoutRequestID': 'ws_CO_10092024095851562723831641', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA32YJXR3'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910095900}, {'Name': 'PhoneNumber', 'Value': 254723831641}]}}}}"}
2024-09-10 06:59:00,616 - INFO - {'updated_data': 'callback data began'}
2024-09-10 06:59:00,617 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075297630', 'CheckoutRequestID': 'ws_CO_10092024095851562723831641', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA32YJXR3'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910095900}, {'Name': 'PhoneNumber', 'Value': 254723831641}]}}}}}
2024-09-10 06:59:00,769 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:59:00,966 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:59:00,967 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:59:01,500 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:59:03,265 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:59:03,482 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:59:03,483 - INFO - {'updated': 'initiated stk query for ws_CO_10092024095851562723831641 827142 '}
2024-09-10 06:59:03,560 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:59:04,118 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:59:04,120 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer YZ4AelAeKzEmplBJruefhtyaTKv8'}"}
2024-09-10 06:59:04,120 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDY1OTAz', 'Timestamp': '20240910065903', 'CheckoutRequestID': 'ws_CO_10092024095851562723831641'}"}
2024-09-10 06:59:04,122 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:59:04,752 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 06:59:04,753 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075297630', 'CheckoutRequestID': 'ws_CO_10092024095851562723831641', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024095851562723831641 827142"}
2024-09-10 06:59:04,882 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 06:59:05,367 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 06:59:05,369 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 06:59:05,583 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 06:59:11,504 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 06:59:11,660 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 06:59:11,661 - INFO - there is a test coming
2024-09-10 06:59:11,661 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 06:59:11,704 - INFO - {'updated_data': 'the data is now as 254727676473'}
2024-09-10 06:59:11,704 - INFO - the data is now as 254727676473
2024-09-10 06:59:11,731 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 06:59:11,731 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 06:59:11,733 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:59:12,310 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 06:59:12,313 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer nVkoccoKllu18r1DIVGjM8ORyFmy'}"}
2024-09-10 06:59:12,313 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDY1OTEy', 'Timestamp': '20240910065912', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '30000', 'PartyA': '254727676473', 'PartyB': 899885, 'PhoneNumber': '254727676473', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0626070-1725951550575', 'TransactionDesc': 'Some payment'}
2024-09-10 06:59:12,314 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 06:59:13,141 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 06:59:13,154 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075298157', 'CheckoutRequestID': 'ws_CO_10092024095912895727676473', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 07:01:25,384 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792981021', 'CheckoutRequestID': 'ws_CO_10092024100118486725806724', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA92YUQJD'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910100124}, {'Name': 'PhoneNumber', 'Value': 254725806724}]}}}}"}
2024-09-10 07:01:25,384 - INFO - {'updated_data': 'callback data began'}
2024-09-10 07:01:25,384 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792981021', 'CheckoutRequestID': 'ws_CO_10092024100118486725806724', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA92YUQJD'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910100124}, {'Name': 'PhoneNumber', 'Value': 254725806724}]}}}}}
2024-09-10 07:01:25,563 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:01:25,975 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:01:25,977 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:01:26,177 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:01:36,545 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5221313', 'CheckoutRequestID': 'ws_CO_10092024100126769706731601', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA92YVP4D'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910100135}, {'Name': 'PhoneNumber', 'Value': 254706731601}]}}}}"}
2024-09-10 07:01:36,545 - INFO - {'updated_data': 'callback data began'}
2024-09-10 07:01:36,546 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5221313', 'CheckoutRequestID': 'ws_CO_10092024100126769706731601', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA92YVP4D'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910100135}, {'Name': 'PhoneNumber', 'Value': 254706731601}]}}}}}
2024-09-10 07:01:36,723 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:01:37,207 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:01:37,208 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:01:37,419 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:01:38,114 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170111305', 'CheckoutRequestID': 'ws_CO_10092024100125679724702058', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 112000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA02YVNUK'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910100137}, {'Name': 'PhoneNumber', 'Value': 254724702058}]}}}}"}
2024-09-10 07:01:38,115 - INFO - {'updated_data': 'callback data began'}
2024-09-10 07:01:38,115 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170111305', 'CheckoutRequestID': 'ws_CO_10092024100125679724702058', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 112000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA02YVNUK'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910100137}, {'Name': 'PhoneNumber', 'Value': 254724702058}]}}}}}
2024-09-10 07:01:38,285 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:01:38,790 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:01:38,791 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:01:39,308 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:02:48,062 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15679363', 'CheckoutRequestID': 'ws_CO_10092024100239686702181139', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA52Z17ZP'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910100247}, {'Name': 'PhoneNumber', 'Value': 254702181139}]}}}}"}
2024-09-10 07:02:48,062 - INFO - {'updated_data': 'callback data began'}
2024-09-10 07:02:48,062 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15679363', 'CheckoutRequestID': 'ws_CO_10092024100239686702181139', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA52Z17ZP'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910100247}, {'Name': 'PhoneNumber', 'Value': 254702181139}]}}}}}
2024-09-10 07:02:48,242 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:02:48,727 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:02:48,728 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:02:49,018 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:02:51,161 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:02:51,339 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:02:51,340 - INFO - {'updated': 'initiated stk query for ws_CO_10092024100239686702181139 899885 '}
2024-09-10 07:02:51,415 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:02:52,099 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:02:52,101 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 1Vq7mwMW0S0fvqVx5nCWR4TrcWmz'}"}
2024-09-10 07:02:52,102 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDcwMjUx', 'Timestamp': '20240910070251', 'CheckoutRequestID': 'ws_CO_10092024100239686702181139'}"}
2024-09-10 07:02:52,103 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:02:52,756 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 07:02:52,757 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15679363', 'CheckoutRequestID': 'ws_CO_10092024100239686702181139', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024100239686702181139 899885"}
2024-09-10 07:02:52,873 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:02:53,375 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:02:53,376 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:02:53,600 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:03:54,973 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:03:55,160 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:03:55,161 - INFO - there is a test coming
2024-09-10 07:03:55,161 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 07:03:55,209 - INFO - {'updated_data': 'the data is now as 254743353400'}
2024-09-10 07:03:55,209 - INFO - the data is now as 254743353400
2024-09-10 07:03:55,234 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 07:03:55,234 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 07:03:55,236 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:03:55,969 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:03:55,972 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer G1LHjjDEGpAfnAmNGQzSptvrLLPv'}"}
2024-09-10 07:03:55,972 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDcwMzU1', 'Timestamp': '20240910070355', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '11000', 'PartyA': '254743353400', 'PartyB': 827142, 'PhoneNumber': '254743353400', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-25621', 'TransactionDesc': 'Some payment'}
2024-09-10 07:03:55,974 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:03:56,704 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 07:03:56,714 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b515678907', 'CheckoutRequestID': 'ws_CO_10092024100356511743353400', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 07:04:07,692 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:04:07,849 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:04:07,850 - INFO - {'updated': 'initiated stk query for ws_CO_10092024100356511743353400 827142 '}
2024-09-10 07:04:07,914 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:04:08,587 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:04:08,589 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 7owyiLAM6BzW34iquiCAurfACA7b'}"}
2024-09-10 07:04:08,590 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDcwNDA3', 'Timestamp': '20240910070407', 'CheckoutRequestID': 'ws_CO_10092024100356511743353400'}"}
2024-09-10 07:04:08,591 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:04:09,313 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 07:04:09,314 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b515678907', 'CheckoutRequestID': 'ws_CO_10092024100356511743353400', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024100356511743353400 827142"}
2024-09-10 07:04:09,428 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:04:09,929 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:04:09,931 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:04:10,140 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:04:23,377 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:04:23,578 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:04:23,579 - INFO - there is a test coming
2024-09-10 07:04:23,579 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 07:04:23,709 - INFO - {'updated_data': 'the data is now as 254720100876'}
2024-09-10 07:04:23,709 - INFO - the data is now as 254720100876
2024-09-10 07:04:23,899 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 07:04:23,899 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 07:04:23,900 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:04:24,581 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:04:24,583 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer fyGeoRkG1cvlYkhTM6DKrpwSi4WM'}"}
2024-09-10 07:04:24,583 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDcwNDI0', 'Timestamp': '20240910070424', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '47649', 'PartyA': '254720100876', 'PartyB': 827142, 'PhoneNumber': '254720100876', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-16623', 'TransactionDesc': 'Some payment'}
2024-09-10 07:04:24,584 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:04:25,585 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 07:04:25,590 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15683883', 'CheckoutRequestID': 'ws_CO_10092024100425101720100876', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 07:04:34,727 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15683883', 'CheckoutRequestID': 'ws_CO_10092024100425101720100876', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}"}
2024-09-10 07:04:34,727 - INFO - {'updated_data': 'callback data began'}
2024-09-10 07:04:34,727 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15683883', 'CheckoutRequestID': 'ws_CO_10092024100425101720100876', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}}
2024-09-10 07:04:34,885 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:04:35,390 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:04:35,392 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:04:35,615 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:04:38,590 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:04:38,613 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 07:04:38,621 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 07:04:46,277 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87298407', 'CheckoutRequestID': 'ws_CO_10092024100434257728059851', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 30000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA72ZA21R'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910100445}, {'Name': 'PhoneNumber', 'Value': 254728059851}]}}}}"}
2024-09-10 07:04:46,277 - INFO - {'updated_data': 'callback data began'}
2024-09-10 07:04:46,277 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87298407', 'CheckoutRequestID': 'ws_CO_10092024100434257728059851', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 30000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA72ZA21R'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910100445}, {'Name': 'PhoneNumber', 'Value': 254728059851}]}}}}}
2024-09-10 07:04:46,431 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:04:49,538 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:04:49,540 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:04:49,751 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:04:55,254 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:04:55,369 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:04:55,370 - INFO - {'updated': 'initiated stk query for ws_CO_10092024100434257728059851 899885 '}
2024-09-10 07:04:55,431 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:04:56,105 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:04:56,110 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer LU7w9ncGJnQzfLS2BwAh04GfU24L'}"}
2024-09-10 07:04:56,111 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDcwNDU1', 'Timestamp': '20240910070455', 'CheckoutRequestID': 'ws_CO_10092024100434257728059851'}"}
2024-09-10 07:04:56,112 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:04:56,727 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 07:04:56,727 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87298407', 'CheckoutRequestID': 'ws_CO_10092024100434257728059851', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024100434257728059851 899885"}
2024-09-10 07:04:56,840 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:04:57,021 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:04:57,023 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:04:57,500 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:05:44,348 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:05:44,511 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:05:44,511 - INFO - there is a test coming
2024-09-10 07:05:44,512 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 07:05:44,562 - INFO - {'updated_data': 'the data is now as 254720100876'}
2024-09-10 07:05:44,562 - INFO - the data is now as 254720100876
2024-09-10 07:05:44,580 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 07:05:44,580 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 07:05:44,582 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:05:45,306 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:05:45,308 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer e0o8ONoAZe9uSnAfvYlGp6MOPeih'}"}
2024-09-10 07:05:45,309 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDcwNTQ1', 'Timestamp': '20240910070545', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '47649', 'PartyA': '254720100876', 'PartyB': 827142, 'PhoneNumber': '254720100876', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-16623', 'TransactionDesc': 'Some payment'}
2024-09-10 07:05:45,310 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:05:49,718 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 07:05:49,725 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169394275', 'CheckoutRequestID': 'ws_CO_10092024100545835720100876', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 07:05:54,153 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:05:54,319 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:05:54,320 - INFO - there is a test coming
2024-09-10 07:05:54,320 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 07:05:54,367 - INFO - {'updated_data': 'the data is now as 254722356447'}
2024-09-10 07:05:54,367 - INFO - the data is now as 254722356447
2024-09-10 07:05:54,390 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 07:05:54,390 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 07:05:54,392 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:05:54,966 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:05:54,968 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer qlCGYLmKn3ObICd55NK9xtA93acB'}"}
2024-09-10 07:05:54,968 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDcwNTU0', 'Timestamp': '20240910070554', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254722356447', 'PartyB': 827142, 'PhoneNumber': '254722356447', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-28006', 'TransactionDesc': 'Some payment'}
2024-09-10 07:05:54,969 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:05:55,835 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 07:05:55,845 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208792986208', 'CheckoutRequestID': 'ws_CO_10092024100555493722356447', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 07:06:07,536 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:06:07,676 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:06:07,677 - INFO - {'updated': 'initiated stk query for ws_CO_10092024100555493722356447 827142 '}
2024-09-10 07:06:07,731 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:06:08,455 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:06:08,457 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer tPEvhGUaly4GEdAgwA4aZ8gtFJWg'}"}
2024-09-10 07:06:08,458 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDcwNjA3', 'Timestamp': '20240910070607', 'CheckoutRequestID': 'ws_CO_10092024100555493722356447'}"}
2024-09-10 07:06:08,459 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:06:09,108 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-10 07:06:09,109 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208792986208', 'CheckoutRequestID': 'ws_CO_10092024100555493722356447', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_10092024100555493722356447 827142"}
2024-09-10 07:06:09,222 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:06:09,397 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:06:09,399 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:06:09,588 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:06:16,250 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87299987', 'CheckoutRequestID': 'ws_CO_10092024100603487724839084', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA32ZGJCT'}, {'Name': 'TransactionDate', 'Value': 20240910100615}, {'Name': 'PhoneNumber', 'Value': 254724839084}]}}}}"}
2024-09-10 07:06:16,250 - INFO - {'updated_data': 'callback data began'}
2024-09-10 07:06:16,250 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87299987', 'CheckoutRequestID': 'ws_CO_10092024100603487724839084', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA32ZGJCT'}, {'Name': 'TransactionDate', 'Value': 20240910100615}, {'Name': 'PhoneNumber', 'Value': 254724839084}]}}}}}
2024-09-10 07:06:16,409 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:06:16,580 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:06:16,582 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:06:16,786 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:09:17,674 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15696261', 'CheckoutRequestID': 'ws_CO_10092024100909912717446607', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-10 07:09:17,674 - INFO - {'updated_data': 'callback data began'}
2024-09-10 07:09:17,674 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15696261', 'CheckoutRequestID': 'ws_CO_10092024100909912717446607', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-10 07:09:17,844 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:09:18,204 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:09:18,205 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:09:18,406 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:09:37,194 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:09:37,344 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:09:37,345 - INFO - there is a test coming
2024-09-10 07:09:37,345 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 07:09:37,386 - INFO - {'updated_data': 'the data is now as 254717446607'}
2024-09-10 07:09:37,387 - INFO - the data is now as 254717446607
2024-09-10 07:09:37,402 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 07:09:37,402 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 07:09:37,404 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:09:38,072 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:09:38,074 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ZvOo3JPQWEp3zmzgnj3OdQGNGKim'}"}
2024-09-10 07:09:38,075 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDcwOTM4', 'Timestamp': '20240910070938', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '75', 'PartyA': '254717446607', 'PartyB': 827142, 'PhoneNumber': '254717446607', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-21170', 'TransactionDesc': 'Some payment'}
2024-09-10 07:09:38,079 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:09:39,750 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 07:09:39,758 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b515693914', 'CheckoutRequestID': 'ws_CO_10092024100938593717446607', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 07:09:47,539 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:09:47,676 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:09:47,677 - INFO - {'updated': 'initiated stk query for ws_CO_10092024100936083705179857 827142 '}
2024-09-10 07:09:47,736 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:09:48,322 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:09:48,324 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Yni1fPQDnuUCyR5abz4NY8uVpXcW'}"}
2024-09-10 07:09:48,325 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDcwOTQ3', 'Timestamp': '20240910070947', 'CheckoutRequestID': 'ws_CO_10092024100936083705179857'}"}
2024-09-10 07:09:48,328 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:09:48,962 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 07:09:48,962 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024100936083705179857', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024100936083705179857 827142"}
2024-09-10 07:09:48,965 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 07:09:50,400 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:09:50,541 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:09:50,542 - INFO - {'updated': 'initiated stk query for ws_CO_10092024100938593717446607 827142 '}
2024-09-10 07:09:50,612 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:09:51,296 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:09:51,298 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer keXakXy8M3ACX6kmOSprMftOAAkj'}"}
2024-09-10 07:09:51,298 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDcwOTUw', 'Timestamp': '20240910070950', 'CheckoutRequestID': 'ws_CO_10092024100938593717446607'}"}
2024-09-10 07:09:51,299 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:09:51,960 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-10 07:09:51,961 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b515693914', 'CheckoutRequestID': 'ws_CO_10092024100938593717446607', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_10092024100938593717446607 827142"}
2024-09-10 07:09:52,075 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:09:52,246 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:09:52,247 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:09:52,313 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b515693814', 'CheckoutRequestID': 'ws_CO_10092024100936083705179857', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-10 07:09:52,313 - INFO - {'updated_data': 'callback data began'}
2024-09-10 07:09:52,313 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b515693814', 'CheckoutRequestID': 'ws_CO_10092024100936083705179857', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-10 07:09:52,472 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:09:52,641 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:09:52,643 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:09:52,725 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:09:52,828 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:10:11,494 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:10:11,632 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:10:11,632 - INFO - there is a test coming
2024-09-10 07:10:11,632 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 07:10:11,679 - INFO - {'updated_data': 'the data is now as 254717446607'}
2024-09-10 07:10:11,679 - INFO - the data is now as 254717446607
2024-09-10 07:10:11,710 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 07:10:11,710 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 07:10:11,711 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:10:12,489 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:10:12,492 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ICN514V8GnG3tVsca3muwThZxVHg'}"}
2024-09-10 07:10:12,492 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDcxMDEy', 'Timestamp': '20240910071012', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3002', 'PartyA': '254717446607', 'PartyB': 827142, 'PhoneNumber': '254717446607', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-21170', 'TransactionDesc': 'Some payment'}
2024-09-10 07:10:12,493 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:10:13,678 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 07:10:13,689 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208792990917', 'CheckoutRequestID': 'ws_CO_10092024101013110717446607', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 07:10:24,707 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792990917', 'CheckoutRequestID': 'ws_CO_10092024101013110717446607', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-10 07:10:24,707 - INFO - {'updated_data': 'callback data began'}
2024-09-10 07:10:24,708 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208792990917', 'CheckoutRequestID': 'ws_CO_10092024101013110717446607', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-10 07:10:24,861 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:10:25,030 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:10:25,031 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:10:25,251 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:10:43,804 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:10:43,950 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:10:43,950 - INFO - there is a test coming
2024-09-10 07:10:43,951 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 07:10:43,999 - INFO - {'updated_data': 'the data is now as 254757766316'}
2024-09-10 07:10:44,000 - INFO - the data is now as 254757766316
2024-09-10 07:10:44,016 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 07:10:44,017 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 07:10:44,018 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:10:44,602 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:10:44,604 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer aLNIvyAQ4UC27fGApGfrCEfGTAjr'}"}
2024-09-10 07:10:44,604 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDcxMDQ0', 'Timestamp': '20240910071044', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1150', 'PartyA': '254757766316', 'PartyB': 899885, 'PhoneNumber': '254757766316', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053964', 'TransactionDesc': 'Some payment'}
2024-09-10 07:10:44,606 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:10:49,185 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 07:10:49,192 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169399924', 'CheckoutRequestID': 'ws_CO_10092024101045246757766316', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 07:18:07,716 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169408323', 'CheckoutRequestID': 'ws_CO_10092024101759314712313318', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5880.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA830XXK4'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910101807}, {'Name': 'PhoneNumber', 'Value': 254712313318}]}}}}"}
2024-09-10 07:18:07,717 - INFO - {'updated_data': 'callback data began'}
2024-09-10 07:18:07,717 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169408323', 'CheckoutRequestID': 'ws_CO_10092024101759314712313318', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5880.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA830XXK4'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910101807}, {'Name': 'PhoneNumber', 'Value': 254712313318}]}}}}}
2024-09-10 07:18:07,871 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:18:08,065 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:18:08,067 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:18:08,263 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:26:03,622 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:26:03,650 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 07:26:03,651 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 07:26:04,379 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:26:04,412 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 07:26:04,413 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 07:26:43,770 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:26:43,943 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:26:43,944 - INFO - there is a test coming
2024-09-10 07:26:43,944 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 07:26:44,071 - INFO - {'updated_data': 'the data is now as 254717446607'}
2024-09-10 07:26:44,071 - INFO - the data is now as 254717446607
2024-09-10 07:26:44,174 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 07:26:44,175 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 07:26:44,176 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:26:44,772 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:26:44,774 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ec0lZ9mjemqMpdRAPA2pDdXzQ6H3'}"}
2024-09-10 07:26:44,774 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDcyNjQ0', 'Timestamp': '20240910072644', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '900', 'PartyA': '254717446607', 'PartyB': 827142, 'PhoneNumber': '254717446607', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-21170', 'TransactionDesc': 'Some payment'}
2024-09-10 07:26:44,775 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:26:48,917 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 07:26:48,923 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee595651258', 'CheckoutRequestID': 'ws_CO_10092024102645320717446607', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 07:27:55,430 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:27:55,705 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:27:55,706 - INFO - there is a test coming
2024-09-10 07:27:55,706 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 07:27:55,753 - INFO - {'updated_data': 'the data is now as 254799174341'}
2024-09-10 07:27:55,753 - INFO - the data is now as 254799174341
2024-09-10 07:27:55,773 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 07:27:55,773 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 07:27:55,775 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:27:56,332 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:27:56,334 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 0BQmFAmlzRD9vSKG4p0zLrGHPVCd'}"}
2024-09-10 07:27:56,335 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDcyNzU2', 'Timestamp': '20240910072756', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '500', 'PartyA': '254799174341', 'PartyB': 899885, 'PhoneNumber': '254799174341', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053969', 'TransactionDesc': 'Some payment'}
2024-09-10 07:27:56,336 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:27:57,092 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 07:27:57,107 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075330713', 'CheckoutRequestID': 'ws_CO_10092024102756856799174341', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 07:28:12,682 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075330713', 'CheckoutRequestID': 'ws_CO_10092024102756856799174341', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-10 07:28:12,683 - INFO - {'updated_data': 'callback data began'}
2024-09-10 07:28:12,683 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075330713', 'CheckoutRequestID': 'ws_CO_10092024102756856799174341', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-10 07:28:12,836 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:28:13,037 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:28:13,038 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:28:13,285 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:28:57,247 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:28:57,387 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:28:57,388 - INFO - there is a test coming
2024-09-10 07:28:57,388 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 07:28:57,431 - INFO - {'updated_data': 'the data is now as 254724586093'}
2024-09-10 07:28:57,431 - INFO - the data is now as 254724586093
2024-09-10 07:28:57,448 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 07:28:57,448 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 07:28:57,449 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:28:58,148 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:28:58,150 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Io2KLAcPP7L8OYyFqaJXEJxCMtIH'}"}
2024-09-10 07:28:58,150 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDcyODU4', 'Timestamp': '20240910072858', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '80000', 'PartyA': '254724586093', 'PartyB': 899885, 'PhoneNumber': '254724586093', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053396', 'TransactionDesc': 'Some payment'}
2024-09-10 07:28:58,151 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:28:58,935 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 07:28:58,942 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5291657', 'CheckoutRequestID': 'ws_CO_10092024102858688724586093', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 07:29:08,529 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5291657', 'CheckoutRequestID': 'ws_CO_10092024102858688724586093', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 80000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA432CKI4'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910102907}, {'Name': 'PhoneNumber', 'Value': 254724586093}]}}}}"}
2024-09-10 07:29:08,530 - INFO - {'updated_data': 'callback data began'}
2024-09-10 07:29:08,530 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5291657', 'CheckoutRequestID': 'ws_CO_10092024102858688724586093', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 80000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA432CKI4'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910102907}, {'Name': 'PhoneNumber', 'Value': 254724586093}]}}}}}
2024-09-10 07:29:08,696 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:29:08,864 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:29:08,866 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:29:09,068 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:29:10,997 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:29:11,144 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:29:11,144 - INFO - {'updated': 'initiated stk query for ws_CO_10092024102900030711311423 827142 '}
2024-09-10 07:29:11,284 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:29:11,890 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:29:11,892 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer YdMCxip2GDC2TKGn2PtpHipjstSp'}"}
2024-09-10 07:29:11,892 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDcyOTEx', 'Timestamp': '20240910072911', 'CheckoutRequestID': 'ws_CO_10092024102900030711311423'}"}
2024-09-10 07:29:11,894 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:29:12,523 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 07:29:12,523 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170142270', 'CheckoutRequestID': 'ws_CO_10092024102900030711311423', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024102900030711311423 827142"}
2024-09-10 07:29:12,638 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:29:12,814 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:29:12,815 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:29:13,015 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:31:16,931 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:31:17,059 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:31:17,059 - INFO - there is a test coming
2024-09-10 07:31:17,060 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 07:31:17,119 - INFO - {'updated_data': 'the data is now as 254704832676'}
2024-09-10 07:31:17,120 - INFO - the data is now as 254704832676
2024-09-10 07:31:17,143 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 07:31:17,143 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 07:31:17,145 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:31:17,823 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:31:17,825 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Ay0MotShJtX9rAHXPAaT1c84H34L'}"}
2024-09-10 07:31:17,826 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDczMTE3', 'Timestamp': '20240910073117', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254704832676', 'PartyB': 899885, 'PhoneNumber': '254704832676', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053431', 'TransactionDesc': 'Some payment'}
2024-09-10 07:31:17,827 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:31:18,620 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 07:31:18,626 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15752602', 'CheckoutRequestID': 'ws_CO_10092024103118373704832676', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 07:31:26,459 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15752602', 'CheckoutRequestID': 'ws_CO_10092024103118373704832676', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA932N23L'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910103125}, {'Name': 'PhoneNumber', 'Value': 254704832676}]}}}}"}
2024-09-10 07:31:26,459 - INFO - {'updated_data': 'callback data began'}
2024-09-10 07:31:26,459 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15752602', 'CheckoutRequestID': 'ws_CO_10092024103118373704832676', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA932N23L'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910103125}, {'Name': 'PhoneNumber', 'Value': 254704832676}]}}}}}
2024-09-10 07:31:26,623 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:31:27,004 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:31:27,005 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:31:27,192 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:34:57,733 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:34:57,922 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:34:57,923 - INFO - there is a test coming
2024-09-10 07:34:57,923 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 07:34:57,986 - INFO - {'updated_data': 'the data is now as 254794194907'}
2024-09-10 07:34:57,987 - INFO - the data is now as 254794194907
2024-09-10 07:34:58,011 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 07:34:58,011 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 07:34:58,012 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:34:58,590 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:34:58,593 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 0beGlW8kbFNgIzQhXNFM1XKDKnAu'}"}
2024-09-10 07:34:58,593 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDczNDU4', 'Timestamp': '20240910073458', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254794194907', 'PartyB': 827142, 'PhoneNumber': '254794194907', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-2492', 'TransactionDesc': 'Some payment'}
2024-09-10 07:34:58,595 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:34:59,545 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 07:34:59,553 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169426804', 'CheckoutRequestID': 'ws_CO_10092024103459241794194907', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 07:35:36,265 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170148980', 'CheckoutRequestID': 'ws_CO_10092024103519361722425397', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA0336JPE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910103535}, {'Name': 'PhoneNumber', 'Value': 254722425397}]}}}}"}
2024-09-10 07:35:36,265 - INFO - {'updated_data': 'callback data began'}
2024-09-10 07:35:36,265 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170148980', 'CheckoutRequestID': 'ws_CO_10092024103519361722425397', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA0336JPE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910103535}, {'Name': 'PhoneNumber', 'Value': 254722425397}]}}}}}
2024-09-10 07:35:36,424 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:35:36,593 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:35:36,594 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:35:36,821 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:43:21,421 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169435999', 'CheckoutRequestID': 'ws_CO_10092024104311380725796142', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA8345U88'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910104320}, {'Name': 'PhoneNumber', 'Value': 254725796142}]}}}}"}
2024-09-10 07:43:21,421 - INFO - {'updated_data': 'callback data began'}
2024-09-10 07:43:21,421 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169435999', 'CheckoutRequestID': 'ws_CO_10092024104311380725796142', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA8345U88'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910104320}, {'Name': 'PhoneNumber', 'Value': 254725796142}]}}}}}
2024-09-10 07:43:21,588 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:43:21,771 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:43:21,772 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:43:22,256 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:46:19,718 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:46:19,832 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:46:19,832 - INFO - there is a test coming
2024-09-10 07:46:19,832 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 07:46:19,877 - INFO - {'updated_data': 'the data is now as 254726702691'}
2024-09-10 07:46:19,878 - INFO - the data is now as 254726702691
2024-09-10 07:46:19,895 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 07:46:19,896 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 07:46:19,897 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:46:20,779 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:46:20,781 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer OO4lwGjQqmATGoSALBuNOgvZeHwG'}"}
2024-09-10 07:46:20,781 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDc0NjIw', 'Timestamp': '20240910074620', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '72615', 'PartyA': '254726702691', 'PartyB': 827142, 'PhoneNumber': '254726702691', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '121-39408', 'TransactionDesc': 'Some payment'}
2024-09-10 07:46:20,782 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:46:21,535 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 07:46:21,541 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170160961', 'CheckoutRequestID': 'ws_CO_10092024104621305726702691', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 07:46:54,994 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15792610', 'CheckoutRequestID': 'ws_CO_10092024104637520725802780', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA534MEA7'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910104654}, {'Name': 'PhoneNumber', 'Value': 254725802780}]}}}}"}
2024-09-10 07:46:54,995 - INFO - {'updated_data': 'callback data began'}
2024-09-10 07:46:54,995 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15792610', 'CheckoutRequestID': 'ws_CO_10092024104637520725802780', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA534MEA7'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910104654}, {'Name': 'PhoneNumber', 'Value': 254725802780}]}}}}}
2024-09-10 07:46:55,150 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:46:55,317 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:46:55,318 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:46:55,524 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:46:58,877 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:46:59,011 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 07:46:59,012 - INFO - {'updated': 'initiated stk query for ws_CO_10092024104637520725802780 899885 '}
2024-09-10 07:46:59,068 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:46:59,737 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 07:46:59,739 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 55zTrJeQk920KSFscDHhc22vHeIy'}"}
2024-09-10 07:46:59,739 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDc0NjU5', 'Timestamp': '20240910074659', 'CheckoutRequestID': 'ws_CO_10092024104637520725802780'}"}
2024-09-10 07:46:59,740 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 07:47:00,468 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 07:47:00,468 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15792610', 'CheckoutRequestID': 'ws_CO_10092024104637520725802780', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024104637520725802780 899885"}
2024-09-10 07:47:00,593 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:47:00,781 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:47:00,783 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:47:01,257 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 07:48:48,741 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 07:48:48,762 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 07:48:48,763 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 07:56:11,811 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87354941', 'CheckoutRequestID': 'ws_CO_10092024105600751712643959', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA335SU43'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910105611}, {'Name': 'PhoneNumber', 'Value': 254712643959}]}}}}"}
2024-09-10 07:56:11,812 - INFO - {'updated_data': 'callback data began'}
2024-09-10 07:56:11,812 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87354941', 'CheckoutRequestID': 'ws_CO_10092024105600751712643959', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA335SU43'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910105611}, {'Name': 'PhoneNumber', 'Value': 254712643959}]}}}}}
2024-09-10 07:56:11,969 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 07:56:12,418 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 07:56:12,420 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 07:56:12,884 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:07:09,747 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:07:09,771 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 08:07:09,771 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 08:07:50,491 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:07:50,639 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:07:50,640 - INFO - {'updated': 'initiated stk query for ws_CO_10092024110733226721516575 827142 '}
2024-09-10 08:07:50,726 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:07:51,286 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:07:51,288 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer JjFVzDmuzmeCnNqW21LINSgghI46'}"}
2024-09-10 08:07:51,288 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDgwNzUw', 'Timestamp': '20240910080750', 'CheckoutRequestID': 'ws_CO_10092024110733226721516575'}"}
2024-09-10 08:07:51,290 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:07:51,918 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 08:07:51,918 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024110733226721516575', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024110733226721516575 827142"}
2024-09-10 08:07:51,921 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 08:11:44,075 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:11:44,219 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:11:44,220 - INFO - there is a test coming
2024-09-10 08:11:44,220 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 08:11:44,262 - INFO - {'updated_data': 'the data is now as 254700298942'}
2024-09-10 08:11:44,263 - INFO - the data is now as 254700298942
2024-09-10 08:11:44,287 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 08:11:44,287 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 08:11:44,288 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:11:45,011 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:11:45,013 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer WITVVMAB2T8FBFDXWA7AbgzwFvrQ'}"}
2024-09-10 08:11:45,014 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDgxMTQ1', 'Timestamp': '20240910081145', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254700298942', 'PartyB': 899885, 'PhoneNumber': '254700298942', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053437', 'TransactionDesc': 'Some payment'}
2024-09-10 08:11:45,015 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:11:45,757 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 08:11:45,763 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208793058460', 'CheckoutRequestID': 'ws_CO_10092024111145546700298942', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 08:11:57,132 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:11:57,284 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:11:57,285 - INFO - {'updated': 'initiated stk query for ws_CO_10092024111145546700298942 899885 '}
2024-09-10 08:11:57,362 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:11:57,933 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:11:57,939 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Dgd88xHzLGxWKLWUUoCNnzvu6qmu'}"}
2024-09-10 08:11:57,939 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDgxMTU3', 'Timestamp': '20240910081157', 'CheckoutRequestID': 'ws_CO_10092024111145546700298942'}"}
2024-09-10 08:11:57,940 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:11:58,578 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 08:11:58,578 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208793058460', 'CheckoutRequestID': 'ws_CO_10092024111145546700298942', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024111145546700298942 899885"}
2024-09-10 08:11:58,698 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:11:58,893 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:11:58,895 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:11:59,134 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:12:26,004 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:12:26,143 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:12:26,144 - INFO - there is a test coming
2024-09-10 08:12:26,144 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 08:12:26,186 - INFO - {'updated_data': 'the data is now as 254796793076'}
2024-09-10 08:12:26,186 - INFO - the data is now as 254796793076
2024-09-10 08:12:26,202 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 08:12:26,202 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 08:12:26,203 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:12:26,854 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:12:26,855 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer oEY6OKVgwexE5EXsvXtC5JIhSwHL'}"}
2024-09-10 08:12:26,856 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDgxMjI2', 'Timestamp': '20240910081226', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254796793076', 'PartyB': 827142, 'PhoneNumber': '254796793076', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-3901', 'TransactionDesc': 'Some payment'}
2024-09-10 08:12:26,857 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:12:27,671 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 08:12:27,677 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169703912', 'CheckoutRequestID': 'ws_CO_10092024111227369796793076', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 08:12:59,605 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:12:59,780 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:12:59,781 - INFO - {'updated': 'initiated stk query for ws_CO_10092024111241105710793213 899885 '}
2024-09-10 08:12:59,840 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:13:00,509 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:13:00,510 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer zzbGehjn2aXS4NYBXuq3KeKKGXWE'}"}
2024-09-10 08:13:00,511 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDgxMjU5', 'Timestamp': '20240910081259', 'CheckoutRequestID': 'ws_CO_10092024111241105710793213'}"}
2024-09-10 08:13:00,512 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:13:01,214 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 08:13:01,214 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc15856020', 'CheckoutRequestID': 'ws_CO_10092024111241105710793213', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024111241105710793213 899885"}
2024-09-10 08:13:01,336 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:13:01,525 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:13:01,526 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:13:01,748 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:13:28,484 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:13:28,613 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:13:28,614 - INFO - there is a test coming
2024-09-10 08:13:28,614 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 08:13:28,652 - INFO - {'updated_data': 'the data is now as 254721516575'}
2024-09-10 08:13:28,652 - INFO - the data is now as 254721516575
2024-09-10 08:13:28,668 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 08:13:28,668 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 08:13:28,669 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:13:29,234 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:13:29,237 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 4Ubpe76Pn0zZ66GNYuAXgmYB7Bx2'}"}
2024-09-10 08:13:29,237 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDgxMzI5', 'Timestamp': '20240910081329', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '6000', 'PartyA': '254721516575', 'PartyB': 827142, 'PhoneNumber': '254721516575', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-20630', 'TransactionDesc': 'Some payment'}
2024-09-10 08:13:29,238 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:13:30,320 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 08:13:30,325 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee595776006', 'CheckoutRequestID': 'ws_CO_10092024111330049721516575', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 08:24:12,335 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15894734', 'CheckoutRequestID': 'ws_CO_10092024112355682728128445', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 190.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA839FBT6'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910112409}, {'Name': 'PhoneNumber', 'Value': 254728128445}]}}}}"}
2024-09-10 08:24:12,336 - INFO - {'updated_data': 'callback data began'}
2024-09-10 08:24:12,336 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15894734', 'CheckoutRequestID': 'ws_CO_10092024112355682728128445', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 190.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA839FBT6'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910112409}, {'Name': 'PhoneNumber', 'Value': 254728128445}]}}}}}
2024-09-10 08:24:12,503 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:24:12,738 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:24:12,739 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:24:13,261 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:26:22,705 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169482732', 'CheckoutRequestID': 'ws_CO_10092024112557378728128445', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA539PT1N'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910112622}, {'Name': 'PhoneNumber', 'Value': 254728128445}]}}}}"}
2024-09-10 08:26:22,706 - INFO - {'updated_data': 'callback data began'}
2024-09-10 08:26:22,707 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169482732', 'CheckoutRequestID': 'ws_CO_10092024112557378728128445', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA539PT1N'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910112622}, {'Name': 'PhoneNumber', 'Value': 254728128445}]}}}}}
2024-09-10 08:26:22,866 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:26:23,388 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:26:23,389 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:26:23,620 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:26:36,897 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5446038', 'CheckoutRequestID': 'ws_CO_10092024112626679723318210', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 7000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA939QQFP'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910112635}, {'Name': 'PhoneNumber', 'Value': 254723318210}]}}}}"}
2024-09-10 08:26:36,898 - INFO - {'updated_data': 'callback data began'}
2024-09-10 08:26:36,898 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5446038', 'CheckoutRequestID': 'ws_CO_10092024112626679723318210', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 7000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA939QQFP'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910112635}, {'Name': 'PhoneNumber', 'Value': 254723318210}]}}}}}
2024-09-10 08:26:37,060 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:26:37,247 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:26:37,249 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:26:37,765 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:26:38,405 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:26:38,558 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:26:38,559 - INFO - {'updated': 'initiated stk query for ws_CO_10092024112626679723318210 899885 '}
2024-09-10 08:26:38,629 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:26:39,217 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:26:39,219 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer DvBC2dGSu0XYUaEETMg92rLNlrOp'}"}
2024-09-10 08:26:39,220 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDgyNjM4', 'Timestamp': '20240910082638', 'CheckoutRequestID': 'ws_CO_10092024112626679723318210'}"}
2024-09-10 08:26:39,221 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:26:39,903 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 08:26:39,904 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5446038', 'CheckoutRequestID': 'ws_CO_10092024112626679723318210', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024112626679723318210 899885"}
2024-09-10 08:26:40,026 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:26:40,310 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:26:40,311 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:26:40,534 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:26:44,507 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:26:44,548 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 08:26:44,549 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 08:26:44,802 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:26:44,818 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 08:26:44,819 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 08:26:58,528 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:26:58,678 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:26:58,679 - INFO - {'updated': 'initiated stk query for ws_CO_10092024112557378728128445 827142 '}
2024-09-10 08:26:58,756 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:26:59,403 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:26:59,405 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer AqeFwaClMTtpVNMeCIzBNnycRogS'}"}
2024-09-10 08:26:59,405 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDgyNjU4', 'Timestamp': '20240910082658', 'CheckoutRequestID': 'ws_CO_10092024112557378728128445'}"}
2024-09-10 08:26:59,406 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:27:00,152 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 08:27:00,152 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169482732', 'CheckoutRequestID': 'ws_CO_10092024112557378728128445', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024112557378728128445 827142"}
2024-09-10 08:27:00,287 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:27:00,469 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:27:00,473 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:27:01,001 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:29:16,816 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:29:16,994 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:29:16,995 - INFO - there is a test coming
2024-09-10 08:29:16,995 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 08:29:17,046 - INFO - {'updated_data': 'the data is now as 254718537732'}
2024-09-10 08:29:17,046 - INFO - the data is now as 254718537732
2024-09-10 08:29:17,063 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 08:29:17,063 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 08:29:17,064 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:29:17,652 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:29:17,655 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 3AA6f0NblAMIOgQy5XsSCdaSpo9E'}"}
2024-09-10 08:29:17,655 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDgyOTE3', 'Timestamp': '20240910082917', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254718537732', 'PartyB': 827142, 'PhoneNumber': '254718537732', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-160888', 'TransactionDesc': 'Some payment'}
2024-09-10 08:29:17,656 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:29:18,439 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 08:29:18,445 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075397657', 'CheckoutRequestID': 'ws_CO_10092024112918186718537732', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 08:29:27,737 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075397657', 'CheckoutRequestID': 'ws_CO_10092024112918186718537732', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA93A40DJ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910112926}, {'Name': 'PhoneNumber', 'Value': 254718537732}]}}}}"}
2024-09-10 08:29:27,737 - INFO - {'updated_data': 'callback data began'}
2024-09-10 08:29:27,737 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075397657', 'CheckoutRequestID': 'ws_CO_10092024112918186718537732', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA93A40DJ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910112926}, {'Name': 'PhoneNumber', 'Value': 254718537732}]}}}}}
2024-09-10 08:29:27,882 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:29:28,582 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:29:28,583 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:29:29,102 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:31:48,396 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075400511', 'CheckoutRequestID': 'ws_CO_10092024113137876701292412', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA73AFJQT'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910113147}, {'Name': 'PhoneNumber', 'Value': 254701292412}]}}}}"}
2024-09-10 08:31:48,397 - INFO - {'updated_data': 'callback data began'}
2024-09-10 08:31:48,397 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075400511', 'CheckoutRequestID': 'ws_CO_10092024113137876701292412', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA73AFJQT'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910113147}, {'Name': 'PhoneNumber', 'Value': 254701292412}]}}}}}
2024-09-10 08:31:48,672 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:31:48,953 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:31:48,955 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:31:49,179 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:32:03,781 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169489473', 'CheckoutRequestID': 'ws_CO_10092024113152000721516575', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 14000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA33AGJLT'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910113203}, {'Name': 'PhoneNumber', 'Value': 254721516575}]}}}}"}
2024-09-10 08:32:03,781 - INFO - {'updated_data': 'callback data began'}
2024-09-10 08:32:03,781 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169489473', 'CheckoutRequestID': 'ws_CO_10092024113152000721516575', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 14000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA33AGJLT'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910113203}, {'Name': 'PhoneNumber', 'Value': 254721516575}]}}}}}
2024-09-10 08:32:03,957 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:32:04,140 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:32:04,142 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:32:04,348 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:35:17,317 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:35:17,468 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:35:17,468 - INFO - there is a test coming
2024-09-10 08:35:17,469 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 08:35:17,512 - INFO - {'updated_data': 'the data is now as 254721226861'}
2024-09-10 08:35:17,512 - INFO - the data is now as 254721226861
2024-09-10 08:35:17,533 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 08:35:17,534 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 08:35:17,541 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:35:18,211 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:35:18,213 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Ni1g9XMuo8WmmeLALZvEx9vLPtCw'}"}
2024-09-10 08:35:18,214 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDgzNTE4', 'Timestamp': '20240910083518', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '17586', 'PartyA': '254721226861', 'PartyB': 827142, 'PhoneNumber': '254721226861', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '136-1706', 'TransactionDesc': 'Some payment'}
2024-09-10 08:35:18,215 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:35:19,085 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 08:35:19,092 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5469555', 'CheckoutRequestID': 'ws_CO_10092024113518850721226861', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 08:38:44,429 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:38:44,570 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:38:44,570 - INFO - there is a test coming
2024-09-10 08:38:44,571 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 08:38:44,622 - INFO - {'updated_data': 'the data is now as 254716490845'}
2024-09-10 08:38:44,622 - INFO - the data is now as 254716490845
2024-09-10 08:38:44,638 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 08:38:44,638 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 08:38:44,639 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:38:45,224 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:38:45,226 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer gd1zWaoTWOmq7aRT9GmPJb16KRmL'}"}
2024-09-10 08:38:45,226 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDgzODQ1', 'Timestamp': '20240910083845', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '98500', 'PartyA': '254716490845', 'PartyB': 899885, 'PhoneNumber': '254716490845', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053979', 'TransactionDesc': 'Some payment'}
2024-09-10 08:38:45,227 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:38:46,086 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 08:38:46,092 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170219101', 'CheckoutRequestID': 'ws_CO_10092024113845773716490845', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 08:38:57,043 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:38:57,204 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:38:57,205 - INFO - {'updated': 'initiated stk query for ws_CO_10092024113845773716490845 899885 '}
2024-09-10 08:38:57,277 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:38:57,858 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:38:57,860 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer O2AAX4q58d8DfECTfv8RtU4TC5IZ'}"}
2024-09-10 08:38:57,860 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDgzODU3', 'Timestamp': '20240910083857', 'CheckoutRequestID': 'ws_CO_10092024113845773716490845'}"}
2024-09-10 08:38:57,861 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:38:58,517 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 08:38:58,518 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170219101', 'CheckoutRequestID': 'ws_CO_10092024113845773716490845', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024113845773716490845 899885"}
2024-09-10 08:38:58,636 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:38:59,143 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:38:59,144 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:38:59,673 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:39:10,542 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15935305', 'CheckoutRequestID': 'ws_CO_10092024113856767701292412', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-10 08:39:10,543 - INFO - {'updated_data': 'callback data began'}
2024-09-10 08:39:10,543 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15935305', 'CheckoutRequestID': 'ws_CO_10092024113856767701292412', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-10 08:39:10,711 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:39:10,896 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:39:10,897 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:39:11,147 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:40:17,019 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:40:17,181 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:40:17,181 - INFO - there is a test coming
2024-09-10 08:40:17,181 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 08:40:17,230 - INFO - {'updated_data': 'the data is now as 254715684537'}
2024-09-10 08:40:17,230 - INFO - the data is now as 254715684537
2024-09-10 08:40:17,248 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 08:40:17,248 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 08:40:17,249 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:40:17,846 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:40:17,848 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 6YKMnercxegjFMx9z305aV2tGCzX'}"}
2024-09-10 08:40:17,848 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDg0MDE3', 'Timestamp': '20240910084017', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '20000', 'PartyA': '254715684537', 'PartyB': 827142, 'PhoneNumber': '254715684537', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-49946', 'TransactionDesc': 'Some payment'}
2024-09-10 08:40:17,849 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:40:18,678 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 08:40:18,688 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075410517', 'CheckoutRequestID': 'ws_CO_10092024114018424715684537', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 08:41:22,289 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:41:22,404 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:41:22,404 - INFO - there is a test coming
2024-09-10 08:41:22,404 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 08:41:22,450 - INFO - {'updated_data': 'the data is now as 254724402928'}
2024-09-10 08:41:22,450 - INFO - the data is now as 254724402928
2024-09-10 08:41:22,469 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 08:41:22,469 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 08:41:22,471 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:41:23,063 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:41:23,065 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer C7jdUPwXgJoE3zquW7tASR0AiUMd'}"}
2024-09-10 08:41:23,065 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDg0MTIz', 'Timestamp': '20240910084123', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254724402928', 'PartyB': 899885, 'PhoneNumber': '254724402928', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0622896-1725957680724', 'TransactionDesc': 'Some payment'}
2024-09-10 08:41:23,067 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:41:23,996 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 08:41:24,002 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87405762', 'CheckoutRequestID': 'ws_CO_10092024114123695724402928', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 08:41:28,716 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:41:28,758 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 08:41:28,759 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 08:43:28,529 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:43:28,677 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:43:28,677 - INFO - there is a test coming
2024-09-10 08:43:28,678 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 08:43:28,722 - INFO - {'updated_data': 'the data is now as 254720207157'}
2024-09-10 08:43:28,722 - INFO - the data is now as 254720207157
2024-09-10 08:43:28,736 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 08:43:28,736 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 08:43:28,737 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:43:29,341 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:43:29,344 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer EN8y8RPuh8AujAAytu2VGG167LHb'}"}
2024-09-10 08:43:29,344 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDg0MzI5', 'Timestamp': '20240910084329', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254720207157', 'PartyB': 899885, 'PhoneNumber': '254720207157', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053443', 'TransactionDesc': 'Some payment'}
2024-09-10 08:43:29,346 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:43:30,104 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 08:43:30,110 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169738792', 'CheckoutRequestID': 'ws_CO_10092024114329846720207157', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 08:43:40,270 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169738792', 'CheckoutRequestID': 'ws_CO_10092024114329846720207157', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA93BZSTN'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910114339}, {'Name': 'PhoneNumber', 'Value': 254720207157}]}}}}"}
2024-09-10 08:43:40,270 - INFO - {'updated_data': 'callback data began'}
2024-09-10 08:43:40,270 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169738792', 'CheckoutRequestID': 'ws_CO_10092024114329846720207157', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA93BZSTN'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910114339}, {'Name': 'PhoneNumber', 'Value': 254720207157}]}}}}}
2024-09-10 08:43:40,438 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:43:40,653 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:43:40,654 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:43:41,185 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:45:33,196 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:45:33,350 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:45:33,350 - INFO - {'updated': 'initiated stk query for ws_CO_10092024114513676714101182 899885 '}
2024-09-10 08:45:33,413 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:45:33,990 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:45:33,992 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer zoNPS10UeVLMyxaX1ZqQGMY2BStd'}"}
2024-09-10 08:45:33,992 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDg0NTMz', 'Timestamp': '20240910084533', 'CheckoutRequestID': 'ws_CO_10092024114513676714101182'}"}
2024-09-10 08:45:33,994 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:45:34,629 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 08:45:34,630 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b515948205', 'CheckoutRequestID': 'ws_CO_10092024114513676714101182', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024114513676714101182 899885"}
2024-09-10 08:45:34,757 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:45:35,455 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:45:35,457 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:45:36,008 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:45:57,835 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:45:57,999 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:45:58,000 - INFO - there is a test coming
2024-09-10 08:45:58,000 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 08:45:58,049 - INFO - {'updated_data': 'the data is now as 254724667534'}
2024-09-10 08:45:58,049 - INFO - the data is now as 254724667534
2024-09-10 08:45:58,068 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 08:45:58,068 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 08:45:58,069 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:45:58,892 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:45:58,894 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer fwNX0wBOtrROmarwrn5d4lCmNFr9'}"}
2024-09-10 08:45:58,894 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDg0NTU4', 'Timestamp': '20240910084558', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '60985', 'PartyA': '254724667534', 'PartyB': 827142, 'PhoneNumber': '254724667534', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-107491', 'TransactionDesc': 'Some payment'}
2024-09-10 08:45:58,895 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:45:59,833 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 08:45:59,841 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208793097126', 'CheckoutRequestID': 'ws_CO_10092024114559455724667534', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 08:46:07,487 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793097126', 'CheckoutRequestID': 'ws_CO_10092024114559455724667534', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-10 08:46:07,488 - INFO - {'updated_data': 'callback data began'}
2024-09-10 08:46:07,488 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793097126', 'CheckoutRequestID': 'ws_CO_10092024114559455724667534', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-10 08:46:07,655 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:46:07,873 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:46:07,874 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:46:08,108 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:46:45,115 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:46:45,265 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:46:45,266 - INFO - there is a test coming
2024-09-10 08:46:45,266 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 08:46:45,332 - INFO - {'updated_data': 'the data is now as 254724667534'}
2024-09-10 08:46:45,333 - INFO - the data is now as 254724667534
2024-09-10 08:46:45,352 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 08:46:45,352 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 08:46:45,354 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:46:45,971 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:46:45,974 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer E3OvEIgwt02tDFpBEY6w6ZoWIKkO'}"}
2024-09-10 08:46:45,974 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDg0NjQ1', 'Timestamp': '20240910084645', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '66445', 'PartyA': '254724667534', 'PartyB': 827142, 'PhoneNumber': '254724667534', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-107491', 'TransactionDesc': 'Some payment'}
2024-09-10 08:46:45,976 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:46:47,028 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 08:46:47,035 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169506421', 'CheckoutRequestID': 'ws_CO_10092024114646581724667534', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 08:46:52,323 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169506421', 'CheckoutRequestID': 'ws_CO_10092024114646581724667534', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-10 08:46:52,323 - INFO - {'updated_data': 'callback data began'}
2024-09-10 08:46:52,323 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169506421', 'CheckoutRequestID': 'ws_CO_10092024114646581724667534', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-10 08:46:52,505 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:46:52,718 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:46:52,719 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:46:53,229 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:47:04,546 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b515952527', 'CheckoutRequestID': 'ws_CO_10092024114653369726489671', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}"}
2024-09-10 08:47:04,546 - INFO - {'updated_data': 'callback data began'}
2024-09-10 08:47:04,546 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b515952527', 'CheckoutRequestID': 'ws_CO_10092024114653369726489671', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}}
2024-09-10 08:47:04,705 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 08:47:05,275 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 08:47:05,277 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 08:47:05,450 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:47:05,470 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 08:47:05,471 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 08:47:05,620 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 08:48:35,292 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 08:48:35,444 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 08:48:35,445 - INFO - there is a test coming
2024-09-10 08:48:35,445 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 08:48:35,506 - INFO - {'updated_data': 'the data is now as 254726489671'}
2024-09-10 08:48:35,506 - INFO - the data is now as 254726489671
2024-09-10 08:48:35,523 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 08:48:35,524 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 08:48:35,525 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:48:36,260 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 08:48:36,263 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer P4bSSGm7rbv1Xbu3GaB7qail3hEp'}"}
2024-09-10 08:48:36,263 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDg0ODM2', 'Timestamp': '20240910084836', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254726489671', 'PartyB': 827142, 'PhoneNumber': '254726489671', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-174830', 'TransactionDesc': 'Some payment'}
2024-09-10 08:48:36,264 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 08:48:37,161 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 08:48:37,170 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b515957085', 'CheckoutRequestID': 'ws_CO_10092024114836867726489671', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 09:00:03,315 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b515985833', 'CheckoutRequestID': 'ws_CO_10092024115932315759317973', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-10 09:00:03,316 - INFO - {'updated_data': 'callback data began'}
2024-09-10 09:00:03,316 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b515985833', 'CheckoutRequestID': 'ws_CO_10092024115932315759317973', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-10 09:00:03,535 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:00:03,823 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:00:03,837 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 09:00:03,838 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 09:00:04,036 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:00:04,037 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:00:04,314 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:00:34,185 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:00:34,207 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 09:00:34,208 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 09:00:55,983 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:00:56,107 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:00:56,108 - INFO - there is a test coming
2024-09-10 09:00:56,108 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 09:00:56,177 - INFO - {'updated_data': 'the data is now as 254710786938'}
2024-09-10 09:00:56,178 - INFO - the data is now as 254710786938
2024-09-10 09:00:56,194 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 09:00:56,195 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 09:00:56,196 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:00:56,784 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:00:56,786 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer jhFcm2ecoTtfZqUIglkONoic6u4O'}"}
2024-09-10 09:00:56,786 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDkwMDU2', 'Timestamp': '20240910090056', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '30000', 'PartyA': '254710786938', 'PartyB': 899885, 'PhoneNumber': '254710786938', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053985', 'TransactionDesc': 'Some payment'}
2024-09-10 09:00:56,787 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:00:57,548 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 09:00:57,555 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15994337', 'CheckoutRequestID': 'ws_CO_10092024120057317710786938', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 09:01:06,600 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170244409', 'CheckoutRequestID': 'ws_CO_10092024120055648701292412', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA43EALHO'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910120105}, {'Name': 'PhoneNumber', 'Value': 254701292412}]}}}}"}
2024-09-10 09:01:06,600 - INFO - {'updated_data': 'callback data began'}
2024-09-10 09:01:06,600 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170244409', 'CheckoutRequestID': 'ws_CO_10092024120055648701292412', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA43EALHO'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910120105}, {'Name': 'PhoneNumber', 'Value': 254701292412}]}}}}}
2024-09-10 09:01:06,807 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:01:07,336 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:01:07,337 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:01:07,855 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:01:10,071 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:01:10,277 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:01:10,278 - INFO - {'updated': 'initiated stk query for ws_CO_10092024120055648701292412 827142 '}
2024-09-10 09:01:10,375 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:01:10,929 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:01:10,931 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer hnMtLIfZ2gMatjTTjFNVnGLkrOYr'}"}
2024-09-10 09:01:10,932 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDkwMTEw', 'Timestamp': '20240910090110', 'CheckoutRequestID': 'ws_CO_10092024120055648701292412'}"}
2024-09-10 09:01:10,933 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:01:11,553 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 09:01:11,554 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170244409', 'CheckoutRequestID': 'ws_CO_10092024120055648701292412', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024120055648701292412 827142"}
2024-09-10 09:01:11,677 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:01:12,168 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:01:12,169 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:01:12,697 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:02:12,841 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:02:12,981 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:02:12,982 - INFO - there is a test coming
2024-09-10 09:02:12,982 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 09:02:13,030 - INFO - {'updated_data': 'the data is now as 254726068832'}
2024-09-10 09:02:13,031 - INFO - the data is now as 254726068832
2024-09-10 09:02:13,052 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 09:02:13,052 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 09:02:13,053 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:02:13,626 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:02:13,628 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 8u2bgPgtkBVBgpIn7sl0285er3YG'}"}
2024-09-10 09:02:13,628 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDkwMjEz', 'Timestamp': '20240910090213', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254726068832', 'PartyB': 827142, 'PhoneNumber': '254726068832', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-21663', 'TransactionDesc': 'Some payment'}
2024-09-10 09:02:13,629 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:02:17,515 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 09:02:17,527 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169524036', 'CheckoutRequestID': 'ws_CO_10092024120214249726068832', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 09:02:20,249 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15997515', 'CheckoutRequestID': 'ws_CO_10092024120212079721993407', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 169000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA43EGM4A'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910120219}, {'Name': 'PhoneNumber', 'Value': 254721993407}]}}}}"}
2024-09-10 09:02:20,252 - INFO - {'updated_data': 'callback data began'}
2024-09-10 09:02:20,252 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15997515', 'CheckoutRequestID': 'ws_CO_10092024120212079721993407', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 169000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA43EGM4A'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910120219}, {'Name': 'PhoneNumber', 'Value': 254721993407}]}}}}}
2024-09-10 09:02:20,437 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:02:21,128 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:02:21,130 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:02:21,800 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:02:23,506 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:02:23,629 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:02:23,629 - INFO - {'updated': 'initiated stk query for ws_CO_10092024120212079721993407 899885 '}
2024-09-10 09:02:23,684 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:02:24,342 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:02:24,344 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer N592zHYtsJBjF8Yh0mw50Bnunje6'}"}
2024-09-10 09:02:24,344 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDkwMjIz', 'Timestamp': '20240910090223', 'CheckoutRequestID': 'ws_CO_10092024120212079721993407'}"}
2024-09-10 09:02:24,346 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:02:25,016 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 09:02:25,016 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db15997515', 'CheckoutRequestID': 'ws_CO_10092024120212079721993407', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024120212079721993407 899885"}
2024-09-10 09:02:25,125 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:02:25,350 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:02:25,351 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:02:25,784 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169524036', 'CheckoutRequestID': 'ws_CO_10092024120214249726068832', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA93EGZBZ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910120225}, {'Name': 'PhoneNumber', 'Value': 254726068832}]}}}}"}
2024-09-10 09:02:25,784 - INFO - {'updated_data': 'callback data began'}
2024-09-10 09:02:25,784 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169524036', 'CheckoutRequestID': 'ws_CO_10092024120214249726068832', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA93EGZBZ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910120225}, {'Name': 'PhoneNumber', 'Value': 254726068832}]}}}}}
2024-09-10 09:02:25,854 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:02:25,945 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:02:26,153 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:02:26,155 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:02:26,360 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:08:42,051 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:08:42,227 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:08:42,227 - INFO - there is a test coming
2024-09-10 09:08:42,228 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 09:08:42,297 - INFO - {'updated_data': 'the data is now as 254708766467'}
2024-09-10 09:08:42,298 - INFO - the data is now as 254708766467
2024-09-10 09:08:42,321 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 09:08:42,321 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 09:08:42,323 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:08:42,992 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:08:42,997 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer kS42TrTYsnRG49dMqJCw7hhoezNs'}"}
2024-09-10 09:08:42,998 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDkwODQy', 'Timestamp': '20240910090842', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254708766467', 'PartyB': 827142, 'PhoneNumber': '254708766467', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-118375', 'TransactionDesc': 'Some payment'}
2024-09-10 09:08:43,002 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:08:43,810 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 09:08:43,816 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516010077', 'CheckoutRequestID': 'ws_CO_10092024120843584708766467', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 09:13:31,503 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:13:31,670 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:13:31,674 - INFO - there is a test coming
2024-09-10 09:13:31,675 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 09:13:31,720 - INFO - {'updated_data': 'the data is now as 254720253767'}
2024-09-10 09:13:31,721 - INFO - the data is now as 254720253767
2024-09-10 09:13:31,739 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 09:13:31,739 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 09:13:31,740 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:13:32,316 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:13:32,318 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer qqgDELJTeAK0ELqW2G41jIqXeNFf'}"}
2024-09-10 09:13:32,318 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDkxMzMy', 'Timestamp': '20240910091332', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1599', 'PartyA': '254720253767', 'PartyB': 827142, 'PhoneNumber': '254720253767', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-4713', 'TransactionDesc': 'Some payment'}
2024-09-10 09:13:32,319 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:13:33,532 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 09:13:33,537 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee595936791', 'CheckoutRequestID': 'ws_CO_10092024121332968720253767', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 09:17:42,587 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:17:42,832 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:17:42,834 - INFO - there is a test coming
2024-09-10 09:17:42,834 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 09:17:42,883 - INFO - {'updated_data': 'the data is now as 254769021734'}
2024-09-10 09:17:42,883 - INFO - the data is now as 254769021734
2024-09-10 09:17:42,900 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 09:17:42,900 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 09:17:42,901 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:17:43,518 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:17:43,520 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Ph2JxXt0MkEE3nG7l3acbN3ycrNG'}"}
2024-09-10 09:17:43,521 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDkxNzQz', 'Timestamp': '20240910091743', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '4000', 'PartyA': '254769021734', 'PartyB': 899885, 'PhoneNumber': '254769021734', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054009', 'TransactionDesc': 'Some payment'}
2024-09-10 09:17:43,522 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:17:44,413 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 09:17:44,419 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16031214', 'CheckoutRequestID': 'ws_CO_10092024121744139769021734', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 09:17:52,324 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16031214', 'CheckoutRequestID': 'ws_CO_10092024121744139769021734', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA93GJUZ1'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910121751}, {'Name': 'PhoneNumber', 'Value': 254769021734}]}}}}"}
2024-09-10 09:17:52,324 - INFO - {'updated_data': 'callback data began'}
2024-09-10 09:17:52,324 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16031214', 'CheckoutRequestID': 'ws_CO_10092024121744139769021734', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA93GJUZ1'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910121751}, {'Name': 'PhoneNumber', 'Value': 254769021734}]}}}}}
2024-09-10 09:17:52,484 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:17:52,681 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:17:52,682 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:17:52,902 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:17:53,256 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:17:53,378 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:17:53,379 - INFO - {'updated': 'initiated stk query for ws_CO_10092024121731974721691202 899885 '}
2024-09-10 09:17:53,520 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:17:54,152 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:17:54,154 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer waku7YjwchUCtCiDV4hdGX7OP8sZ'}"}
2024-09-10 09:17:54,155 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDkxNzUz', 'Timestamp': '20240910091753', 'CheckoutRequestID': 'ws_CO_10092024121731974721691202'}"}
2024-09-10 09:17:54,156 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:17:54,781 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 09:17:54,781 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024121731974721691202', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024121731974721691202 899885"}
2024-09-10 09:17:54,784 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 09:17:56,707 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16030693', 'CheckoutRequestID': 'ws_CO_10092024121731974721691202', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA03GJUPM'}, {'Name': 'TransactionDate', 'Value': 20240910121756}, {'Name': 'PhoneNumber', 'Value': 254721691202}]}}}}"}
2024-09-10 09:17:56,707 - INFO - {'updated_data': 'callback data began'}
2024-09-10 09:17:56,707 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16030693', 'CheckoutRequestID': 'ws_CO_10092024121731974721691202', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA03GJUPM'}, {'Name': 'TransactionDate', 'Value': 20240910121756}, {'Name': 'PhoneNumber', 'Value': 254721691202}]}}}}}
2024-09-10 09:17:56,867 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:17:57,069 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:17:57,070 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:17:57,317 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:18:08,887 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:18:08,905 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 09:18:08,906 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 09:19:17,844 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:19:17,863 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 09:19:17,864 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 09:19:50,326 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:19:50,338 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 09:19:50,338 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 09:20:06,726 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:20:06,886 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:20:06,887 - INFO - {'updated': 'initiated stk query for ws_CO_10092024121905599759317973 899885 '}
2024-09-10 09:20:06,949 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:20:07,546 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:20:07,548 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ieeKwPD5rmHCFr44MScnzIIe9Nt1'}"}
2024-09-10 09:20:07,548 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDkyMDA2', 'Timestamp': '20240910092006', 'CheckoutRequestID': 'ws_CO_10092024121905599759317973'}"}
2024-09-10 09:20:07,550 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:20:08,199 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 09:20:08,200 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5587937', 'CheckoutRequestID': 'ws_CO_10092024121905599759317973', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024121905599759317973 899885"}
2024-09-10 09:20:08,316 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:20:08,533 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:20:08,535 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:20:08,765 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:20:13,006 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:20:13,148 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:20:13,149 - INFO - there is a test coming
2024-09-10 09:20:13,149 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 09:20:13,194 - INFO - {'updated_data': 'the data is now as 254798403247'}
2024-09-10 09:20:13,194 - INFO - the data is now as 254798403247
2024-09-10 09:20:13,210 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 09:20:13,210 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 09:20:13,211 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:20:13,901 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:20:13,904 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ed10VJVSu3XZJgCefsdxy3ABvBbf'}"}
2024-09-10 09:20:13,904 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDkyMDEz', 'Timestamp': '20240910092013', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254798403247', 'PartyB': 827142, 'PhoneNumber': '254798403247', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-5663', 'TransactionDesc': 'Some payment'}
2024-09-10 09:20:13,905 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:20:14,791 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 09:20:14,797 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee595955592', 'CheckoutRequestID': 'ws_CO_10092024122014454798403247', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 09:20:26,263 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:20:26,393 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:20:26,393 - INFO - {'updated': 'initiated stk query for ws_CO_10092024122014454798403247 827142 '}
2024-09-10 09:20:26,445 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:20:26,996 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:20:26,998 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer HEAdwSNxrbwARuAkOvybAa3AxE0L'}"}
2024-09-10 09:20:26,998 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDkyMDI2', 'Timestamp': '20240910092026', 'CheckoutRequestID': 'ws_CO_10092024122014454798403247'}"}
2024-09-10 09:20:26,999 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:20:27,745 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 09:20:27,746 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee595955592', 'CheckoutRequestID': 'ws_CO_10092024122014454798403247', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024122014454798403247 827142"}
2024-09-10 09:20:27,860 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:20:28,420 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:20:28,421 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:20:28,640 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:21:38,615 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:21:38,833 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:21:38,833 - INFO - {'updated': 'initiated stk query for ws_CO_10092024122127367726291966 827142 '}
2024-09-10 09:21:38,987 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:21:39,564 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:21:39,571 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer oecHGVuvSCnb8KaC5w75lFl6d3yM'}"}
2024-09-10 09:21:39,572 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDkyMTM4', 'Timestamp': '20240910092138', 'CheckoutRequestID': 'ws_CO_10092024122127367726291966'}"}
2024-09-10 09:21:39,573 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:21:40,215 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 09:21:40,216 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170267086', 'CheckoutRequestID': 'ws_CO_10092024122127367726291966', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024122127367726291966 827142"}
2024-09-10 09:21:40,388 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:21:40,896 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:21:40,897 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:21:41,109 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:22:20,522 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:22:20,751 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:22:20,752 - INFO - there is a test coming
2024-09-10 09:22:20,752 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 09:22:20,799 - INFO - {'updated_data': 'the data is now as 254722524349'}
2024-09-10 09:22:20,799 - INFO - the data is now as 254722524349
2024-09-10 09:22:20,816 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 09:22:20,817 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 09:22:20,818 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:22:21,397 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:22:21,399 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer CtG0ASBdYIaqGA742ohUKNXFEGvA'}"}
2024-09-10 09:22:21,400 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDkyMjIx', 'Timestamp': '20240910092221', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254722524349', 'PartyB': 899885, 'PhoneNumber': '254722524349', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054052', 'TransactionDesc': 'Some payment'}
2024-09-10 09:22:21,401 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:22:22,232 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 09:22:22,238 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87451843', 'CheckoutRequestID': 'ws_CO_10092024122222032722524349', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 09:22:32,254 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87451843', 'CheckoutRequestID': 'ws_CO_10092024122222032722524349', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA03H65UY'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910122231}, {'Name': 'PhoneNumber', 'Value': 254722524349}]}}}}"}
2024-09-10 09:22:32,254 - INFO - {'updated_data': 'callback data began'}
2024-09-10 09:22:32,254 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87451843', 'CheckoutRequestID': 'ws_CO_10092024122222032722524349', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA03H65UY'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910122231}, {'Name': 'PhoneNumber', 'Value': 254722524349}]}}}}}
2024-09-10 09:22:32,435 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:22:32,625 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:22:32,626 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:22:32,862 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:22:33,448 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:22:33,576 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:22:33,576 - INFO - there is a test coming
2024-09-10 09:22:33,576 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 09:22:33,628 - INFO - {'updated_data': 'the data is now as 254701094360'}
2024-09-10 09:22:33,628 - INFO - the data is now as 254701094360
2024-09-10 09:22:33,646 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 09:22:33,646 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 09:22:33,647 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:22:34,361 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:22:34,363 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer coA4JsGV1PW3TzycQyfo8Ul6w9om'}"}
2024-09-10 09:22:34,363 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDkyMjM0', 'Timestamp': '20240910092234', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '50', 'PartyA': '254701094360', 'PartyB': 827142, 'PhoneNumber': '254701094360', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-24000', 'TransactionDesc': 'Some payment'}
2024-09-10 09:22:34,369 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:22:35,430 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 09:22:35,437 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075458529', 'CheckoutRequestID': 'ws_CO_10092024122234911701094360', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 09:22:43,393 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075458529', 'CheckoutRequestID': 'ws_CO_10092024122234911701094360', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 50.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA43H7CKU'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910122242}, {'Name': 'PhoneNumber', 'Value': 254701094360}]}}}}"}
2024-09-10 09:22:43,393 - INFO - {'updated_data': 'callback data began'}
2024-09-10 09:22:43,394 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075458529', 'CheckoutRequestID': 'ws_CO_10092024122234911701094360', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 50.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA43H7CKU'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910122242}, {'Name': 'PhoneNumber', 'Value': 254701094360}]}}}}}
2024-09-10 09:22:43,570 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:22:43,760 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:22:43,761 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:22:43,967 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:22:47,190 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:22:47,320 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:22:47,321 - INFO - {'updated': 'initiated stk query for ws_CO_10092024122234911701094360 827142 '}
2024-09-10 09:22:47,387 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:22:47,943 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:22:47,945 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer OzLnG9J9xsBFy6j4UBYUlY0HXWGo'}"}
2024-09-10 09:22:47,946 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDkyMjQ3', 'Timestamp': '20240910092247', 'CheckoutRequestID': 'ws_CO_10092024122234911701094360'}"}
2024-09-10 09:22:47,947 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:22:48,587 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 09:22:48,588 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075458529', 'CheckoutRequestID': 'ws_CO_10092024122234911701094360', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024122234911701094360 827142"}
2024-09-10 09:22:48,724 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:22:49,234 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:22:49,236 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:22:49,756 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:23:35,003 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db16055378', 'CheckoutRequestID': 'ws_CO_10092024122327701713115013', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA33HBJU3'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910122334}, {'Name': 'PhoneNumber', 'Value': 254713115013}]}}}}"}
2024-09-10 09:23:35,004 - INFO - {'updated_data': 'callback data began'}
2024-09-10 09:23:35,004 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db16055378', 'CheckoutRequestID': 'ws_CO_10092024122327701713115013', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA33HBJU3'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910122334}, {'Name': 'PhoneNumber', 'Value': 254713115013}]}}}}}
2024-09-10 09:23:35,167 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:23:35,379 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:23:35,381 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:23:35,612 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:23:38,980 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:23:39,169 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:23:39,170 - INFO - {'updated': 'initiated stk query for ws_CO_10092024122327701713115013 899885 '}
2024-09-10 09:23:39,243 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:23:39,874 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:23:39,879 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 8wcjVIwIgyrWP9nsKDrNC3m7TXLH'}"}
2024-09-10 09:23:39,880 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDkyMzM5', 'Timestamp': '20240910092339', 'CheckoutRequestID': 'ws_CO_10092024122327701713115013'}"}
2024-09-10 09:23:39,884 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:23:40,634 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 09:23:40,635 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db16055378', 'CheckoutRequestID': 'ws_CO_10092024122327701713115013', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024122327701713115013 899885"}
2024-09-10 09:23:40,920 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:23:41,129 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:23:41,130 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:23:41,371 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:26:48,004 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169786911', 'CheckoutRequestID': 'ws_CO_10092024122634681720670946', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3542.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA83HQY7G'}, {'Name': 'TransactionDate', 'Value': 20240910122647}, {'Name': 'PhoneNumber', 'Value': 254720670946}]}}}}"}
2024-09-10 09:26:48,008 - INFO - {'updated_data': 'callback data began'}
2024-09-10 09:26:48,008 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169786911', 'CheckoutRequestID': 'ws_CO_10092024122634681720670946', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3542.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA83HQY7G'}, {'Name': 'TransactionDate', 'Value': 20240910122647}, {'Name': 'PhoneNumber', 'Value': 254720670946}]}}}}}
2024-09-10 09:26:48,168 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:26:48,572 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:26:48,573 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:26:48,827 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:30:48,714 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:30:48,851 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:30:48,852 - INFO - {'updated': 'initiated stk query for ws_CO_10092024123037051701699666 827142 '}
2024-09-10 09:30:48,916 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:30:49,509 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:30:49,511 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer QWUln6FAC6UJJ52xvRhhwDZhB5iJ'}"}
2024-09-10 09:30:49,512 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDkzMDQ4', 'Timestamp': '20240910093048', 'CheckoutRequestID': 'ws_CO_10092024123037051701699666'}"}
2024-09-10 09:30:49,513 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:30:50,208 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 09:30:50,209 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024123037051701699666', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024123037051701699666 827142"}
2024-09-10 09:30:50,212 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 09:30:53,932 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170276825', 'CheckoutRequestID': 'ws_CO_10092024123044525714313124', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA53IARI9'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910123053}, {'Name': 'PhoneNumber', 'Value': 254714313124}]}}}}"}
2024-09-10 09:30:53,932 - INFO - {'updated_data': 'callback data began'}
2024-09-10 09:30:53,932 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170276825', 'CheckoutRequestID': 'ws_CO_10092024123044525714313124', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA53IARI9'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910123053}, {'Name': 'PhoneNumber', 'Value': 254714313124}]}}}}}
2024-09-10 09:30:54,109 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:30:54,657 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:30:54,660 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:30:54,884 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:31:32,656 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:31:32,810 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:31:32,811 - INFO - there is a test coming
2024-09-10 09:31:32,811 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 09:31:32,863 - INFO - {'updated_data': 'the data is now as 254717650987'}
2024-09-10 09:31:32,863 - INFO - the data is now as 254717650987
2024-09-10 09:31:32,915 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 09:31:32,917 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 09:31:32,918 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:31:33,582 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:31:33,584 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 5AGgoBRa3BaJcKjKrJKPaT2mVw04'}"}
2024-09-10 09:31:33,585 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDkzMTMz', 'Timestamp': '20240910093133', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '200', 'PartyA': '254717650987', 'PartyB': 899885, 'PhoneNumber': '254717650987', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA004251CP-1725960691962', 'TransactionDesc': 'Some payment'}
2024-09-10 09:31:33,586 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:31:35,947 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 09:31:35,956 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169556371', 'CheckoutRequestID': 'ws_CO_10092024123134131717650987', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 09:31:48,211 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:31:48,472 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:31:48,472 - INFO - {'updated': 'initiated stk query for ws_CO_10092024123037051701699666 827142 '}
2024-09-10 09:31:48,559 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:31:49,291 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:31:49,293 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer h8jDaV5EMgiBAOp06x6Vvpgb6adc'}"}
2024-09-10 09:31:49,293 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDkzMTQ4', 'Timestamp': '20240910093148', 'CheckoutRequestID': 'ws_CO_10092024123037051701699666'}"}
2024-09-10 09:31:49,295 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:31:50,031 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 09:31:50,032 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585052030948', 'CheckoutRequestID': 'ws_CO_10092024123037051701699666', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024123037051701699666 827142"}
2024-09-10 09:31:50,159 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:31:50,567 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:31:50,568 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:31:50,772 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:33:51,819 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:33:51,960 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:33:51,961 - INFO - {'updated': 'initiated stk query for ws_CO_10092024123340919708766467 827142 '}
2024-09-10 09:33:52,033 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:33:52,718 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:33:52,720 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer T4hVW4W2CYhb8P7rDKAQTAh8odsh'}"}
2024-09-10 09:33:52,721 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDkzMzUy', 'Timestamp': '20240910093352', 'CheckoutRequestID': 'ws_CO_10092024123340919708766467'}"}
2024-09-10 09:33:52,722 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:33:53,395 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 367
2024-09-10 09:33:53,396 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5626884', 'CheckoutRequestID': 'ws_CO_10092024123340919708766467', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_10092024123340919708766467 827142"}
2024-09-10 09:33:53,546 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:33:53,790 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:33:53,792 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:33:54,035 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:33:58,612 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:33:58,794 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:33:58,795 - INFO - there is a test coming
2024-09-10 09:33:58,795 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 09:33:58,838 - INFO - {'updated_data': 'the data is now as 254726797334'}
2024-09-10 09:33:58,838 - INFO - the data is now as 254726797334
2024-09-10 09:33:58,880 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 09:33:58,880 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 09:33:58,882 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:33:59,462 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:33:59,464 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer H9WZqJyPkStKpzFfHZr5YgxR9BQw'}"}
2024-09-10 09:33:59,464 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDkzMzU5', 'Timestamp': '20240910093359', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254726797334', 'PartyB': 827142, 'PhoneNumber': '254726797334', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-41357', 'TransactionDesc': 'Some payment'}
2024-09-10 09:33:59,466 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:34:00,294 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 09:34:00,300 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169558852', 'CheckoutRequestID': 'ws_CO_10092024123359976726797334', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 09:34:00,596 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5627405', 'CheckoutRequestID': 'ws_CO_10092024123352823722784965', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5176.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA83IQAYM'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910123359}, {'Name': 'PhoneNumber', 'Value': 254722784965}]}}}}"}
2024-09-10 09:34:00,597 - INFO - {'updated_data': 'callback data began'}
2024-09-10 09:34:00,597 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5627405', 'CheckoutRequestID': 'ws_CO_10092024123352823722784965', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5176.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA83IQAYM'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910123359}, {'Name': 'PhoneNumber', 'Value': 254722784965}]}}}}}
2024-09-10 09:34:00,759 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:34:00,975 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:34:00,976 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:34:01,208 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:34:52,742 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:34:52,896 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:34:52,897 - INFO - there is a test coming
2024-09-10 09:34:52,897 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 09:34:52,943 - INFO - {'updated_data': 'the data is now as 254728444966'}
2024-09-10 09:34:52,943 - INFO - the data is now as 254728444966
2024-09-10 09:34:52,970 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 09:34:52,977 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 09:34:52,980 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:34:53,559 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:34:53,561 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer qKTgc7BTLYdBX83LNAz2T0io30xq'}"}
2024-09-10 09:34:53,562 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDkzNDUz', 'Timestamp': '20240910093453', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254728444966', 'PartyB': 827142, 'PhoneNumber': '254728444966', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '121-31349', 'TransactionDesc': 'Some payment'}
2024-09-10 09:34:53,564 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:34:54,319 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 09:34:54,325 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169559647', 'CheckoutRequestID': 'ws_CO_10092024123454101728444966', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 09:35:04,135 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169559647', 'CheckoutRequestID': 'ws_CO_10092024123454101728444966', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA73IVAXR'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910123503}, {'Name': 'PhoneNumber', 'Value': 254728444966}]}}}}"}
2024-09-10 09:35:04,136 - INFO - {'updated_data': 'callback data began'}
2024-09-10 09:35:04,136 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169559647', 'CheckoutRequestID': 'ws_CO_10092024123454101728444966', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA73IVAXR'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910123503}, {'Name': 'PhoneNumber', 'Value': 254728444966}]}}}}}
2024-09-10 09:35:04,310 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:35:04,521 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:35:04,522 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:35:05,083 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:36:33,162 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:36:33,370 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:36:33,371 - INFO - there is a test coming
2024-09-10 09:36:33,371 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 09:36:33,670 - INFO - {'updated_data': 'the data is now as 254721242197'}
2024-09-10 09:36:33,670 - INFO - the data is now as 254721242197
2024-09-10 09:36:33,702 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 09:36:33,702 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 09:36:33,714 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:36:34,316 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:36:34,318 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Eox2AY69ws6o21xbAP8FHiVQ3dIE'}"}
2024-09-10 09:36:34,319 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDkzNjM0', 'Timestamp': '20240910093634', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100000', 'PartyA': '254721242197', 'PartyB': 899885, 'PhoneNumber': '254721242197', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1053993', 'TransactionDesc': 'Some payment'}
2024-09-10 09:36:34,320 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:36:35,112 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 09:36:35,118 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208793153258', 'CheckoutRequestID': 'ws_CO_10092024123634832721242197', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 09:36:57,352 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793153456', 'CheckoutRequestID': 'ws_CO_10092024123645949722768978', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 60000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA13J4DO3'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910123656}, {'Name': 'PhoneNumber', 'Value': 254722768978}]}}}}"}
2024-09-10 09:36:57,352 - INFO - {'updated_data': 'callback data began'}
2024-09-10 09:36:57,352 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793153456', 'CheckoutRequestID': 'ws_CO_10092024123645949722768978', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 60000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA13J4DO3'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910123656}, {'Name': 'PhoneNumber', 'Value': 254722768978}]}}}}}
2024-09-10 09:36:57,529 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:36:58,243 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:36:58,244 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:36:58,483 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:37:53,470 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170284594', 'CheckoutRequestID': 'ws_CO_10092024123743964708094518', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA73J93Y9'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910123752}, {'Name': 'PhoneNumber', 'Value': 254708094518}]}}}}"}
2024-09-10 09:37:53,474 - INFO - {'updated_data': 'callback data began'}
2024-09-10 09:37:53,474 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170284594', 'CheckoutRequestID': 'ws_CO_10092024123743964708094518', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA73J93Y9'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910123752}, {'Name': 'PhoneNumber', 'Value': 254708094518}]}}}}}
2024-09-10 09:37:53,642 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:37:53,868 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:37:53,869 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:37:54,132 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:38:40,524 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:38:40,659 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:38:40,660 - INFO - there is a test coming
2024-09-10 09:38:40,660 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 09:38:40,743 - INFO - {'updated_data': 'the data is now as 254710345758'}
2024-09-10 09:38:40,743 - INFO - the data is now as 254710345758
2024-09-10 09:38:40,758 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 09:38:40,759 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 09:38:40,760 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:38:41,339 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:38:41,341 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Uhux3DGO8jSlysXU32UsKKTOp1NV'}"}
2024-09-10 09:38:41,342 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDkzODQx', 'Timestamp': '20240910093841', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '14000', 'PartyA': '254710345758', 'PartyB': 899885, 'PhoneNumber': '254710345758', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054012', 'TransactionDesc': 'Some payment'}
2024-09-10 09:38:41,343 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:38:42,189 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 09:38:42,196 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596005002', 'CheckoutRequestID': 'ws_CO_10092024123841984710345758', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 09:41:33,843 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075478753', 'CheckoutRequestID': 'ws_CO_10092024124115739701819662', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4581.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA03JR1DW'}, {'Name': 'TransactionDate', 'Value': 20240910124133}, {'Name': 'PhoneNumber', 'Value': 254701819662}]}}}}"}
2024-09-10 09:41:33,843 - INFO - {'updated_data': 'callback data began'}
2024-09-10 09:41:33,843 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075478753', 'CheckoutRequestID': 'ws_CO_10092024124115739701819662', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4581.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA03JR1DW'}, {'Name': 'TransactionDate', 'Value': 20240910124133}, {'Name': 'PhoneNumber', 'Value': 254701819662}]}}}}}
2024-09-10 09:41:34,018 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:41:34,531 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:41:34,533 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:41:34,759 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:42:01,801 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:42:01,986 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:42:01,987 - INFO - {'updated': 'initiated stk query for ws_CO_10092024124147741713077084 827142 '}
2024-09-10 09:42:02,059 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:42:02,728 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:42:02,730 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 2wyRIfx6svRD8SIRpdJAxvLekwpP'}"}
2024-09-10 09:42:02,731 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDk0MjAy', 'Timestamp': '20240910094202', 'CheckoutRequestID': 'ws_CO_10092024124147741713077084'}"}
2024-09-10 09:42:02,732 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:42:03,342 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 09:42:03,343 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596013308', 'CheckoutRequestID': 'ws_CO_10092024124147741713077084', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024124147741713077084 827142"}
2024-09-10 09:42:03,462 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:42:03,961 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:42:03,963 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:42:04,528 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:45:42,307 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516108426', 'CheckoutRequestID': 'ws_CO_10092024124530755796241644', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA73KBKZD'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910124541}, {'Name': 'PhoneNumber', 'Value': 254796241644}]}}}}"}
2024-09-10 09:45:42,308 - INFO - {'updated_data': 'callback data began'}
2024-09-10 09:45:42,308 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516108426', 'CheckoutRequestID': 'ws_CO_10092024124530755796241644', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA73KBKZD'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910124541}, {'Name': 'PhoneNumber', 'Value': 254796241644}]}}}}}
2024-09-10 09:45:42,472 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 09:45:42,663 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 09:45:42,664 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 09:45:42,927 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 09:46:58,937 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:46:59,081 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:46:59,082 - INFO - there is a test coming
2024-09-10 09:46:59,082 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 09:46:59,127 - INFO - {'updated_data': 'the data is now as 254725571210'}
2024-09-10 09:46:59,128 - INFO - the data is now as 254725571210
2024-09-10 09:46:59,145 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 09:46:59,145 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 09:46:59,147 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:46:59,759 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:46:59,761 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 5URxcA9w4Mcpc1Aq1EdTUqgIV6je'}"}
2024-09-10 09:46:59,762 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMDk0NjU5', 'Timestamp': '20240910094659', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '800', 'PartyA': '254725571210', 'PartyB': 899885, 'PhoneNumber': '254725571210', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0606967-1725961617912', 'TransactionDesc': 'Some payment'}
2024-09-10 09:46:59,763 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:47:00,866 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 09:47:00,873 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170295196', 'CheckoutRequestID': 'ws_CO_10092024124700289725571210', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 09:48:03,348 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 09:48:03,513 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 09:48:03,517 - INFO - there is a test coming
2024-09-10 09:48:03,518 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 09:48:03,575 - INFO - {'updated_data': 'the data is now as 254722587551'}
2024-09-10 09:48:03,575 - INFO - the data is now as 254722587551
2024-09-10 09:48:03,593 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 09:48:03,593 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 09:48:03,594 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:48:04,240 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 09:48:04,242 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer p2NHxh9JvUV8FghFNOrRczDhv4e3'}"}
2024-09-10 09:48:04,243 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMDk0ODA0', 'Timestamp': '20240910094804', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254722587551', 'PartyB': 827142, 'PhoneNumber': '254722587551', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-23058', 'TransactionDesc': 'Some payment'}
2024-09-10 09:48:04,244 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 09:48:05,141 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 09:48:05,152 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516115584', 'CheckoutRequestID': 'ws_CO_10092024124804862722587551', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 10:10:50,679 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:10:50,803 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:10:50,804 - INFO - there is a test coming
2024-09-10 10:10:50,804 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 10:10:50,854 - INFO - {'updated_data': 'the data is now as 254720572961'}
2024-09-10 10:10:50,854 - INFO - the data is now as 254720572961
2024-09-10 10:10:50,879 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 10:10:50,879 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 10:10:50,881 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:10:51,558 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:10:51,561 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer lBEyGar60k0GiH1Rf1DNbPC6QmyS'}"}
2024-09-10 10:10:51,561 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTAxMDUx', 'Timestamp': '20240910101051', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254720572961', 'PartyB': 827142, 'PhoneNumber': '254720572961', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-50610', 'TransactionDesc': 'Some payment'}
2024-09-10 10:10:51,570 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:10:52,341 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 10:10:52,348 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169836165', 'CheckoutRequestID': 'ws_CO_10092024131052098720572961', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 10:14:13,623 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:14:13,761 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:14:13,762 - INFO - there is a test coming
2024-09-10 10:14:13,762 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 10:14:13,831 - INFO - {'updated_data': 'the data is now as 254710399944'}
2024-09-10 10:14:13,831 - INFO - the data is now as 254710399944
2024-09-10 10:14:13,852 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 10:14:13,852 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 10:14:13,853 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:14:14,538 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:14:14,540 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 4jchXxXOBIisG0f0wJFR0RbPAPO2'}"}
2024-09-10 10:14:14,541 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTAxNDE0', 'Timestamp': '20240910101414', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100000', 'PartyA': '254710399944', 'PartyB': 827142, 'PhoneNumber': '254710399944', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-25789', 'TransactionDesc': 'Some payment'}
2024-09-10 10:14:14,542 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:14:15,301 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 10:14:15,308 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169603971', 'CheckoutRequestID': 'ws_CO_10092024131415088710399944', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 10:14:24,943 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169603971', 'CheckoutRequestID': 'ws_CO_10092024131415088710399944', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA03O9H0W'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910131424}, {'Name': 'PhoneNumber', 'Value': 254710399944}]}}}}"}
2024-09-10 10:14:24,944 - INFO - {'updated_data': 'callback data began'}
2024-09-10 10:14:24,944 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169603971', 'CheckoutRequestID': 'ws_CO_10092024131415088710399944', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA03O9H0W'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910131424}, {'Name': 'PhoneNumber', 'Value': 254710399944}]}}}}}
2024-09-10 10:14:25,162 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:14:25,687 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:14:25,688 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:14:25,915 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:15:13,513 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:15:13,712 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:15:13,713 - INFO - there is a test coming
2024-09-10 10:15:13,713 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 10:15:13,764 - INFO - {'updated_data': 'the data is now as 254708399763'}
2024-09-10 10:15:13,764 - INFO - the data is now as 254708399763
2024-09-10 10:15:13,782 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 10:15:13,783 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 10:15:13,784 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:15:14,457 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:15:14,459 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer wowzhXn4Hym5I4cBPMQwiElIrpF7'}"}
2024-09-10 10:15:14,459 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTAxNTE0', 'Timestamp': '20240910101514', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '50', 'PartyA': '254708399763', 'PartyB': 827142, 'PhoneNumber': '254708399763', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '80099887-1283', 'TransactionDesc': 'Some payment'}
2024-09-10 10:15:14,461 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:15:15,228 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 10:15:15,235 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db16194478', 'CheckoutRequestID': 'ws_CO_10092024131514988708399763', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 10:17:46,627 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:17:46,755 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:17:46,756 - INFO - {'updated': 'initiated stk query for ws_CO_10092024131504532759946252 899885 '}
2024-09-10 10:17:46,818 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:17:47,400 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:17:47,402 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer LYGv4qhflAfvlcClrsM74CSHsbaF'}"}
2024-09-10 10:17:47,403 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTAxNzQ2', 'Timestamp': '20240910101746', 'CheckoutRequestID': 'ws_CO_10092024131504532759946252'}"}
2024-09-10 10:17:47,404 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:17:48,022 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 10:17:48,023 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87510377', 'CheckoutRequestID': 'ws_CO_10092024131504532759946252', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024131504532759946252 899885"}
2024-09-10 10:17:48,144 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:17:48,639 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:17:48,640 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:17:48,897 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:17:55,583 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169607983', 'CheckoutRequestID': 'ws_CO_10092024131739727708399763', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 50.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA03OR81W'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910131754}, {'Name': 'PhoneNumber', 'Value': 254708399763}]}}}}"}
2024-09-10 10:17:55,583 - INFO - {'updated_data': 'callback data began'}
2024-09-10 10:17:55,583 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169607983', 'CheckoutRequestID': 'ws_CO_10092024131739727708399763', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 50.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA03OR81W'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910131754}, {'Name': 'PhoneNumber', 'Value': 254708399763}]}}}}}
2024-09-10 10:17:55,754 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:17:55,954 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:17:55,955 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:17:56,482 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:20:49,767 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075523272', 'CheckoutRequestID': 'ws_CO_10092024132038742707624489', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-10 10:20:49,767 - INFO - {'updated_data': 'callback data began'}
2024-09-10 10:20:49,768 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075523272', 'CheckoutRequestID': 'ws_CO_10092024132038742707624489', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-10 10:20:49,922 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:20:50,323 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:20:50,325 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:20:50,551 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:21:02,025 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:21:02,167 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:21:02,168 - INFO - there is a test coming
2024-09-10 10:21:02,168 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 10:21:02,215 - INFO - {'updated_data': 'the data is now as 254726170007'}
2024-09-10 10:21:02,215 - INFO - the data is now as 254726170007
2024-09-10 10:21:02,230 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 10:21:02,230 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 10:21:02,232 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:21:02,879 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:21:02,881 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer jvXnxWbZ7O9fTxeurhSxwqUsKNuE'}"}
2024-09-10 10:21:02,881 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTAyMTAy', 'Timestamp': '20240910102102', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '799', 'PartyA': '254726170007', 'PartyB': 827142, 'PhoneNumber': '254726170007', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '137-7652', 'TransactionDesc': 'Some payment'}
2024-09-10 10:21:02,883 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:21:03,754 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 10:21:03,761 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596118451', 'CheckoutRequestID': 'ws_CO_10092024132103410726170007', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 10:21:18,170 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db16210354', 'CheckoutRequestID': 'ws_CO_10092024132110521707624489', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA63P9036'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910132117}, {'Name': 'PhoneNumber', 'Value': 254707624489}]}}}}"}
2024-09-10 10:21:18,170 - INFO - {'updated_data': 'callback data began'}
2024-09-10 10:21:18,170 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db16210354', 'CheckoutRequestID': 'ws_CO_10092024132110521707624489', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA63P9036'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910132117}, {'Name': 'PhoneNumber', 'Value': 254707624489}]}}}}}
2024-09-10 10:21:18,347 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:21:18,546 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:21:18,548 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:21:18,783 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:22:01,188 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169848641', 'CheckoutRequestID': 'ws_CO_10092024132156127707624489', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-10 10:22:01,188 - INFO - {'updated_data': 'callback data began'}
2024-09-10 10:22:01,188 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169848641', 'CheckoutRequestID': 'ws_CO_10092024132156127707624489', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-10 10:22:01,377 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:22:01,578 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:22:01,579 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:22:02,133 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:23:47,744 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585052173140', 'CheckoutRequestID': 'ws_CO_10092024132335277719554128', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA63PM560'}, {'Name': 'TransactionDate', 'Value': 20240910132347}, {'Name': 'PhoneNumber', 'Value': 254719554128}]}}}}"}
2024-09-10 10:23:47,744 - INFO - {'updated_data': 'callback data began'}
2024-09-10 10:23:47,744 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585052173140', 'CheckoutRequestID': 'ws_CO_10092024132335277719554128', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA63PM560'}, {'Name': 'TransactionDate', 'Value': 20240910132347}, {'Name': 'PhoneNumber', 'Value': 254719554128}]}}}}}
2024-09-10 10:23:47,905 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:23:48,088 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:23:48,090 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:23:48,601 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:23:57,259 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:23:57,441 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:23:57,442 - INFO - {'updated': 'initiated stk query for ws_CO_10092024132335277719554128 827142 '}
2024-09-10 10:23:57,517 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:23:58,234 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:23:58,236 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer yOW3e3VdO4qDgVYRQKusbmSBEfvY'}"}
2024-09-10 10:23:58,237 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTAyMzU3', 'Timestamp': '20240910102357', 'CheckoutRequestID': 'ws_CO_10092024132335277719554128'}"}
2024-09-10 10:23:58,238 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:23:58,881 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 10:23:58,881 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585052173140', 'CheckoutRequestID': 'ws_CO_10092024132335277719554128', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024132335277719554128 827142"}
2024-09-10 10:23:58,996 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:23:59,191 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:23:59,193 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:23:59,404 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:27:55,381 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db16227614', 'CheckoutRequestID': 'ws_CO_10092024132739963701128661', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA43Q7XSW'}, {'Name': 'TransactionDate', 'Value': 20240910132755}, {'Name': 'PhoneNumber', 'Value': 254701128661}]}}}}"}
2024-09-10 10:27:55,382 - INFO - {'updated_data': 'callback data began'}
2024-09-10 10:27:55,382 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db16227614', 'CheckoutRequestID': 'ws_CO_10092024132739963701128661', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA43Q7XSW'}, {'Name': 'TransactionDate', 'Value': 20240910132755}, {'Name': 'PhoneNumber', 'Value': 254701128661}]}}}}}
2024-09-10 10:27:55,568 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:27:55,753 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:27:55,754 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:27:55,972 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:29:29,629 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596140493', 'CheckoutRequestID': 'ws_CO_10092024132916973717201830', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1550.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA63QFZ0W'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910132928}, {'Name': 'PhoneNumber', 'Value': 254717201830}]}}}}"}
2024-09-10 10:29:29,630 - INFO - {'updated_data': 'callback data began'}
2024-09-10 10:29:29,630 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596140493', 'CheckoutRequestID': 'ws_CO_10092024132916973717201830', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1550.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA63QFZ0W'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910132928}, {'Name': 'PhoneNumber', 'Value': 254717201830}]}}}}}
2024-09-10 10:29:29,782 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:29:30,022 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:29:30,024 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:29:30,321 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:30:39,623 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16226632', 'CheckoutRequestID': 'ws_CO_10092024133020153708667356', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-10 10:30:39,623 - INFO - {'updated_data': 'callback data began'}
2024-09-10 10:30:39,623 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16226632', 'CheckoutRequestID': 'ws_CO_10092024133020153708667356', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-10 10:30:39,827 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:30:40,345 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:30:40,347 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:30:40,575 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:36:26,903 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:36:27,034 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:36:27,035 - INFO - there is a test coming
2024-09-10 10:36:27,035 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 10:36:27,077 - INFO - {'updated_data': 'the data is now as 254795874005'}
2024-09-10 10:36:27,077 - INFO - the data is now as 254795874005
2024-09-10 10:36:27,093 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 10:36:27,093 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 10:36:27,094 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:36:27,858 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:36:27,860 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 5NK0AIzIJwR8oqM3huNA8rGlb8Qv'}"}
2024-09-10 10:36:27,861 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTAzNjI3', 'Timestamp': '20240910103627', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3035', 'PartyA': '254795874005', 'PartyB': 827142, 'PhoneNumber': '254795874005', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-24661', 'TransactionDesc': 'Some payment'}
2024-09-10 10:36:27,862 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:36:28,644 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 10:36:28,651 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169865438', 'CheckoutRequestID': 'ws_CO_10092024133628426795874005', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 10:36:53,070 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516246902', 'CheckoutRequestID': 'ws_CO_10092024133643289794179552', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA53RJGJB'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910133652}, {'Name': 'PhoneNumber', 'Value': 254794179552}]}}}}"}
2024-09-10 10:36:53,071 - INFO - {'updated_data': 'callback data began'}
2024-09-10 10:36:53,071 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516246902', 'CheckoutRequestID': 'ws_CO_10092024133643289794179552', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA53RJGJB'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910133652}, {'Name': 'PhoneNumber', 'Value': 254794179552}]}}}}}
2024-09-10 10:36:53,281 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:36:53,486 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:36:53,488 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:36:53,765 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:36:54,603 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:36:54,767 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:36:54,768 - INFO - {'updated': 'initiated stk query for ws_CO_10092024133643289794179552 899885 '}
2024-09-10 10:36:54,842 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:36:55,439 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:36:55,441 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 97Jeq2c7Dph3ypLfwA18BjmlqrRl'}"}
2024-09-10 10:36:55,441 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTAzNjU0', 'Timestamp': '20240910103654', 'CheckoutRequestID': 'ws_CO_10092024133643289794179552'}"}
2024-09-10 10:36:55,442 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:36:56,096 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 10:36:56,097 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516246902', 'CheckoutRequestID': 'ws_CO_10092024133643289794179552', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024133643289794179552 899885"}
2024-09-10 10:36:56,217 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:36:56,413 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:36:56,415 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:36:56,951 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:37:02,182 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:37:02,378 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:37:02,378 - INFO - there is a test coming
2024-09-10 10:37:02,379 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 10:37:02,436 - INFO - {'updated_data': 'the data is now as 254795874005'}
2024-09-10 10:37:02,436 - INFO - the data is now as 254795874005
2024-09-10 10:37:02,457 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 10:37:02,457 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 10:37:02,458 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:37:03,036 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:37:03,039 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer WihAuAjNw7DAbHrt8wtZcoIHEEEL'}"}
2024-09-10 10:37:03,039 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTAzNzAz', 'Timestamp': '20240910103703', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254795874005', 'PartyB': 827142, 'PhoneNumber': '254795874005', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-18360', 'TransactionDesc': 'Some payment'}
2024-09-10 10:37:03,040 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:37:03,934 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 10:37:03,941 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170352267', 'CheckoutRequestID': 'ws_CO_10092024133703674795874005', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 10:37:51,276 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793222937', 'CheckoutRequestID': 'ws_CO_10092024133732373727147926', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA63ROFRU'}, {'Name': 'TransactionDate', 'Value': 20240910133750}, {'Name': 'PhoneNumber', 'Value': 254727147926}]}}}}"}
2024-09-10 10:37:51,277 - INFO - {'updated_data': 'callback data began'}
2024-09-10 10:37:51,277 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793222937', 'CheckoutRequestID': 'ws_CO_10092024133732373727147926', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA63ROFRU'}, {'Name': 'TransactionDate', 'Value': 20240910133750}, {'Name': 'PhoneNumber', 'Value': 254727147926}]}}}}}
2024-09-10 10:37:51,444 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:37:51,629 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:37:51,631 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:37:51,860 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:37:55,966 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:37:56,116 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:37:56,117 - INFO - {'updated': 'initiated stk query for ws_CO_10092024133732373727147926 827142 '}
2024-09-10 10:37:56,177 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:37:56,770 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:37:56,772 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer hHtIg4GKHQhSlzIo6fLqFGgo1XfS'}"}
2024-09-10 10:37:56,773 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTAzNzU2', 'Timestamp': '20240910103756', 'CheckoutRequestID': 'ws_CO_10092024133732373727147926'}"}
2024-09-10 10:37:56,774 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:37:57,385 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 10:37:57,386 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208793222937', 'CheckoutRequestID': 'ws_CO_10092024133732373727147926', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024133732373727147926 827142"}
2024-09-10 10:37:57,517 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:37:57,706 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:37:57,707 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:37:58,250 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:38:08,399 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5800779', 'CheckoutRequestID': 'ws_CO_10092024133757470725598609', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA93RPWCP'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910133807}, {'Name': 'PhoneNumber', 'Value': 254725598609}]}}}}"}
2024-09-10 10:38:08,399 - INFO - {'updated_data': 'callback data began'}
2024-09-10 10:38:08,399 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5800779', 'CheckoutRequestID': 'ws_CO_10092024133757470725598609', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA93RPWCP'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910133807}, {'Name': 'PhoneNumber', 'Value': 254725598609}]}}}}}
2024-09-10 10:38:08,560 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:38:08,749 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:38:08,754 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:38:08,920 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:38:09,010 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:38:09,077 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:38:09,078 - INFO - {'updated': 'initiated stk query for ws_CO_10092024133757470725598609 899885 '}
2024-09-10 10:38:09,132 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:38:09,732 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:38:09,734 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer EzOEk4SGds3BAt19Qk2EpflO3PKf'}"}
2024-09-10 10:38:09,734 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTAzODA5', 'Timestamp': '20240910103809', 'CheckoutRequestID': 'ws_CO_10092024133757470725598609'}"}
2024-09-10 10:38:09,744 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:38:10,366 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 10:38:10,366 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5800779', 'CheckoutRequestID': 'ws_CO_10092024133757470725598609', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024133757470725598609 899885"}
2024-09-10 10:38:10,515 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:38:10,751 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:38:10,753 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:38:11,311 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:39:18,340 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:39:18,454 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:39:18,456 - INFO - there is a test coming
2024-09-10 10:39:18,456 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 10:39:18,507 - INFO - {'updated_data': 'the data is now as 254725598609'}
2024-09-10 10:39:18,507 - INFO - the data is now as 254725598609
2024-09-10 10:39:18,526 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 10:39:18,526 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 10:39:18,527 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:39:19,109 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:39:19,111 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer OxfGCo07ZhwfZoa9k11CvtO8IUdc'}"}
2024-09-10 10:39:19,111 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTAzOTE5', 'Timestamp': '20240910103919', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '20000', 'PartyA': '254725598609', 'PartyB': 899885, 'PhoneNumber': '254725598609', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0620808-1725964758362', 'TransactionDesc': 'Some payment'}
2024-09-10 10:39:19,112 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:39:19,954 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 10:39:19,976 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169632909', 'CheckoutRequestID': 'ws_CO_10092024133919747725598609', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 10:39:27,836 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169632909', 'CheckoutRequestID': 'ws_CO_10092024133919747725598609', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA23RWNNE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910133927}, {'Name': 'PhoneNumber', 'Value': 254725598609}]}}}}"}
2024-09-10 10:39:27,837 - INFO - {'updated_data': 'callback data began'}
2024-09-10 10:39:27,837 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169632909', 'CheckoutRequestID': 'ws_CO_10092024133919747725598609', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA23RWNNE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910133927}, {'Name': 'PhoneNumber', 'Value': 254725598609}]}}}}}
2024-09-10 10:39:28,035 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:39:28,227 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:39:28,229 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:39:28,453 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:40:16,571 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:40:16,753 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:40:16,754 - INFO - there is a test coming
2024-09-10 10:40:16,754 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 10:40:16,807 - INFO - {'updated_data': 'the data is now as 254728660724'}
2024-09-10 10:40:16,807 - INFO - the data is now as 254728660724
2024-09-10 10:40:16,826 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 10:40:16,826 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 10:40:16,827 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:40:17,628 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:40:17,631 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer EUGSvG7UmLh9daH5suxNwRMw1o7y'}"}
2024-09-10 10:40:17,631 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTA0MDE3', 'Timestamp': '20240910104017', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3270', 'PartyA': '254728660724', 'PartyB': 827142, 'PhoneNumber': '254728660724', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-416', 'TransactionDesc': 'Some payment'}
2024-09-10 10:40:17,632 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:40:19,808 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 10:40:19,816 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075545446', 'CheckoutRequestID': 'ws_CO_10092024134018171728660724', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 10:43:12,321 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:43:12,441 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:43:12,442 - INFO - {'updated': 'initiated stk query for ws_CO_10092024134250942722809834 827142 '}
2024-09-10 10:43:12,501 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:43:13,088 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:43:13,090 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 9EBbCDufPsXLKwp5FWeusr9HW6NU'}"}
2024-09-10 10:43:13,091 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTA0MzEy', 'Timestamp': '20240910104312', 'CheckoutRequestID': 'ws_CO_10092024134250942722809834'}"}
2024-09-10 10:43:13,092 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:43:13,809 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 367
2024-09-10 10:43:13,810 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5813920', 'CheckoutRequestID': 'ws_CO_10092024134250942722809834', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_10092024134250942722809834 827142"}
2024-09-10 10:43:13,982 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:43:14,470 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:43:14,472 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:43:14,706 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:43:19,834 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:43:20,003 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:43:20,004 - INFO - there is a test coming
2024-09-10 10:43:20,004 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 10:43:20,051 - INFO - {'updated_data': 'the data is now as 254722809834'}
2024-09-10 10:43:20,051 - INFO - the data is now as 254722809834
2024-09-10 10:43:20,067 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 10:43:20,067 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 10:43:20,069 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:43:20,639 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:43:20,641 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer dMtiW4wZQxJD8fLh3AQ5cmvApUQb'}"}
2024-09-10 10:43:20,642 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTA0MzIw', 'Timestamp': '20240910104320', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254722809834', 'PartyB': 827142, 'PhoneNumber': '254722809834', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-30793', 'TransactionDesc': 'Some payment'}
2024-09-10 10:43:20,643 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:43:22,428 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 10:43:22,438 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596178564', 'CheckoutRequestID': 'ws_CO_10092024134321279722809834', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 10:43:33,450 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:43:33,584 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:43:33,585 - INFO - {'updated': 'initiated stk query for ws_CO_10092024134321279722809834 827142 '}
2024-09-10 10:43:33,643 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:43:34,229 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:43:34,231 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer VJv2Ay9hfUVoeLW4SUkuhUpJGvBz'}"}
2024-09-10 10:43:34,231 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTA0MzMz', 'Timestamp': '20240910104333', 'CheckoutRequestID': 'ws_CO_10092024134321279722809834'}"}
2024-09-10 10:43:34,233 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:43:34,957 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 10:43:34,958 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024134321279722809834', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024134321279722809834 827142"}
2024-09-10 10:43:34,960 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 10:44:04,243 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793229564', 'CheckoutRequestID': 'ws_CO_10092024134358132708667356', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-10 10:44:04,243 - INFO - {'updated_data': 'callback data began'}
2024-09-10 10:44:04,243 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793229564', 'CheckoutRequestID': 'ws_CO_10092024134358132708667356', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-10 10:44:04,451 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:44:04,974 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:44:04,976 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:44:05,193 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:48:43,951 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:48:44,192 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:48:44,193 - INFO - {'updated': 'initiated stk query for ws_CO_10092024134832106723388067 827142 '}
2024-09-10 10:48:44,272 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:48:44,946 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:48:44,948 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer GR0ADt3qBm4o3TvaHNI3F0rEX8HV'}"}
2024-09-10 10:48:44,949 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTA0ODQ0', 'Timestamp': '20240910104844', 'CheckoutRequestID': 'ws_CO_10092024134832106723388067'}"}
2024-09-10 10:48:44,950 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:48:45,634 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 10:48:45,635 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585052240483', 'CheckoutRequestID': 'ws_CO_10092024134832106723388067', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024134832106723388067 827142"}
2024-09-10 10:48:45,756 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:48:46,455 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:48:46,457 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:48:47,009 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:50:52,047 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:50:52,218 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:50:52,219 - INFO - {'updated': 'initiated stk query for ws_CO_10092024135040503723388067 827142 '}
2024-09-10 10:50:52,284 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:50:52,874 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:50:52,876 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 6wsXt6Lja1sMEkakdIdUmqBAPqbL'}"}
2024-09-10 10:50:52,877 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTA1MDUy', 'Timestamp': '20240910105052', 'CheckoutRequestID': 'ws_CO_10092024135040503723388067'}"}
2024-09-10 10:50:52,878 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:50:53,546 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 10:50:53,547 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5834923', 'CheckoutRequestID': 'ws_CO_10092024135040503723388067', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024135040503723388067 827142"}
2024-09-10 10:50:53,694 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:50:54,264 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:50:54,265 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:50:54,477 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:53:27,208 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:53:27,370 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:53:27,370 - INFO - {'updated': 'initiated stk query for ws_CO_10092024135315400705091521 899885 '}
2024-09-10 10:53:27,428 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:53:28,011 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:53:28,013 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer bWV68GfmLvbw3ALvH8TPb5JjaGhK'}"}
2024-09-10 10:53:28,013 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTA1MzI3', 'Timestamp': '20240910105327', 'CheckoutRequestID': 'ws_CO_10092024135315400705091521'}"}
2024-09-10 10:53:28,014 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:53:28,642 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 10:53:28,643 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169648066', 'CheckoutRequestID': 'ws_CO_10092024135315400705091521', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024135315400705091521 899885"}
2024-09-10 10:53:28,767 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 10:53:28,970 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 10:53:28,971 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 10:53:29,216 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 10:55:03,337 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 10:55:03,516 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 10:55:03,517 - INFO - there is a test coming
2024-09-10 10:55:03,517 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 10:55:03,559 - INFO - {'updated_data': 'the data is now as 254795758095'}
2024-09-10 10:55:03,560 - INFO - the data is now as 254795758095
2024-09-10 10:55:03,575 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 10:55:03,584 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 10:55:03,585 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:55:04,155 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 10:55:04,157 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer bVaiekHArHf1QywRXw2bjvCox0qR'}"}
2024-09-10 10:55:04,158 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTA1NTA0', 'Timestamp': '20240910105504', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '150', 'PartyA': '254795758095', 'PartyB': 899885, 'PhoneNumber': '254795758095', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA008395CP-1725965701933', 'TransactionDesc': 'Some payment'}
2024-09-10 10:55:04,159 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 10:55:04,980 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 10:55:04,986 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87555365', 'CheckoutRequestID': 'ws_CO_10092024135504796795758095', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 11:03:27,877 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169894515', 'CheckoutRequestID': 'ws_CO_10092024140316061714094647', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA63VEFZI'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910140326}, {'Name': 'PhoneNumber', 'Value': 254714094647}]}}}}"}
2024-09-10 11:03:27,877 - INFO - {'updated_data': 'callback data began'}
2024-09-10 11:03:27,877 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169894515', 'CheckoutRequestID': 'ws_CO_10092024140316061714094647', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA63VEFZI'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910140326}, {'Name': 'PhoneNumber', 'Value': 254714094647}]}}}}}
2024-09-10 11:03:28,084 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 11:03:28,490 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 11:03:28,491 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 11:03:28,927 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 11:06:20,116 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:06:20,285 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 11:06:20,286 - INFO - there is a test coming
2024-09-10 11:06:20,286 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 11:06:20,336 - INFO - {'updated_data': 'the data is now as 254729759460'}
2024-09-10 11:06:20,336 - INFO - the data is now as 254729759460
2024-09-10 11:06:20,369 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 11:06:20,369 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 11:06:20,370 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:06:20,990 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:06:20,992 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer EKwxayApO8g6uWpNVIVkLqlHbop5'}"}
2024-09-10 11:06:20,993 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTEwNjIw', 'Timestamp': '20240910110620', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '600', 'PartyA': '254729759460', 'PartyB': 827142, 'PhoneNumber': '254729759460', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-3572', 'TransactionDesc': 'Some payment'}
2024-09-10 11:06:20,994 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:06:23,002 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 11:06:23,035 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db16330973', 'CheckoutRequestID': 'ws_CO_10092024140621525729759460', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 11:06:34,121 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:06:34,274 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 11:06:34,274 - INFO - {'updated': 'initiated stk query for ws_CO_10092024140621525729759460 827142 '}
2024-09-10 11:06:34,339 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:06:34,921 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:06:34,923 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer IpEENQ83ORhsSmIXYZdzORnHNbkd'}"}
2024-09-10 11:06:34,924 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTEwNjM0', 'Timestamp': '20240910110634', 'CheckoutRequestID': 'ws_CO_10092024140621525729759460'}"}
2024-09-10 11:06:34,925 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:06:35,552 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 11:06:35,552 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024140621525729759460', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024140621525729759460 827142"}
2024-09-10 11:06:35,555 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 11:19:35,330 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585052322684', 'CheckoutRequestID': 'ws_CO_10092024141928136714182939', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA83XOF8A'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910141934}, {'Name': 'PhoneNumber', 'Value': 254714182939}]}}}}"}
2024-09-10 11:19:35,331 - INFO - {'updated_data': 'callback data began'}
2024-09-10 11:19:35,331 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585052322684', 'CheckoutRequestID': 'ws_CO_10092024141928136714182939', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA83XOF8A'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910141934}, {'Name': 'PhoneNumber', 'Value': 254714182939}]}}}}}
2024-09-10 11:19:35,599 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 11:19:36,118 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 11:19:36,119 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 11:19:36,643 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 11:26:19,044 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169920351', 'CheckoutRequestID': 'ws_CO_10092024142605101729360305', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1530.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA63YMAO8'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910142618}, {'Name': 'PhoneNumber', 'Value': 254729360305}]}}}}"}
2024-09-10 11:26:19,044 - INFO - {'updated_data': 'callback data began'}
2024-09-10 11:26:19,044 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169920351', 'CheckoutRequestID': 'ws_CO_10092024142605101729360305', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1530.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA63YMAO8'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910142618}, {'Name': 'PhoneNumber', 'Value': 254729360305}]}}}}}
2024-09-10 11:26:19,300 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 11:26:19,700 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 11:26:19,701 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 11:26:19,907 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 11:26:25,934 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:26:26,152 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 11:26:26,153 - INFO - there is a test coming
2024-09-10 11:26:26,153 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 11:26:26,226 - INFO - {'updated_data': 'the data is now as 254701321490'}
2024-09-10 11:26:26,226 - INFO - the data is now as 254701321490
2024-09-10 11:26:26,241 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 11:26:26,241 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 11:26:26,242 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:26:26,820 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:26:26,822 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer EbuFX4z2qYBBzk2VyTszGAwQ2Iv2'}"}
2024-09-10 11:26:26,822 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTEyNjI2', 'Timestamp': '20240910112626', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254701321490', 'PartyB': 827142, 'PhoneNumber': '254701321490', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-22521', 'TransactionDesc': 'Some payment'}
2024-09-10 11:26:26,823 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:26:27,722 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 11:26:27,727 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170407085', 'CheckoutRequestID': 'ws_CO_10092024142627420701321490', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 11:26:38,594 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:26:38,726 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 11:26:38,728 - INFO - {'updated': 'initiated stk query for ws_CO_10092024142627420701321490 827142 '}
2024-09-10 11:26:38,791 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:26:39,575 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:26:39,577 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer jAxlLZqpAsa2g114PcRZCoLnKxTh'}"}
2024-09-10 11:26:39,577 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTEyNjM4', 'Timestamp': '20240910112638', 'CheckoutRequestID': 'ws_CO_10092024142627420701321490'}"}
2024-09-10 11:26:39,579 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:26:40,176 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 11:26:40,177 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024142627420701321490', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024142627420701321490 827142"}
2024-09-10 11:26:40,179 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 11:32:45,385 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16392835', 'CheckoutRequestID': 'ws_CO_10092024143229404724993016', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2265.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA43ZJ2SC'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910143244}, {'Name': 'PhoneNumber', 'Value': 254724993016}]}}}}"}
2024-09-10 11:32:45,385 - INFO - {'updated_data': 'callback data began'}
2024-09-10 11:32:45,386 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16392835', 'CheckoutRequestID': 'ws_CO_10092024143229404724993016', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2265.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA43ZJ2SC'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910143244}, {'Name': 'PhoneNumber', 'Value': 254724993016}]}}}}}
2024-09-10 11:32:45,647 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 11:32:46,155 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 11:32:46,157 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 11:32:46,397 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 11:33:41,229 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:33:41,435 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 11:33:41,440 - INFO - {'updated': 'initiated stk query for ws_CO_10092024143229404724993016 827142 '}
2024-09-10 11:33:41,504 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:33:42,065 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:33:42,067 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer fFEzQ1Wd00kuYP0UMwfMwOt64Utp'}"}
2024-09-10 11:33:42,068 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTEzMzQx', 'Timestamp': '20240910113341', 'CheckoutRequestID': 'ws_CO_10092024143229404724993016'}"}
2024-09-10 11:33:42,069 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:33:42,695 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 11:33:42,696 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16392835', 'CheckoutRequestID': 'ws_CO_10092024143229404724993016', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024143229404724993016 827142"}
2024-09-10 11:33:42,876 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 11:33:43,409 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 11:33:43,411 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 11:33:43,628 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 11:39:39,123 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:39:39,260 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 11:39:39,261 - INFO - there is a test coming
2024-09-10 11:39:39,261 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 11:39:39,305 - INFO - {'updated_data': 'the data is now as 254719679807'}
2024-09-10 11:39:39,306 - INFO - the data is now as 254719679807
2024-09-10 11:39:39,325 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 11:39:39,325 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 11:39:39,326 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:39:39,898 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:39:39,900 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 2MccsAqNZ8xdjiN6IO4xeQlmd6So'}"}
2024-09-10 11:39:39,901 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTEzOTM5', 'Timestamp': '20240910113939', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2100', 'PartyA': '254719679807', 'PartyB': 827142, 'PhoneNumber': '254719679807', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-92560', 'TransactionDesc': 'Some payment'}
2024-09-10 11:39:39,902 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:39:40,685 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 11:39:40,692 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16412444', 'CheckoutRequestID': 'ws_CO_10092024143940430719679807', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 11:41:17,210 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:41:17,345 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 11:41:17,346 - INFO - {'updated': 'initiated stk query for ws_CO_10092024144106018111723007 827142 '}
2024-09-10 11:41:17,405 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:41:17,972 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:41:17,974 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer do7yg6rxJ6RHr4WxJO0kXcXB3Nfe'}"}
2024-09-10 11:41:17,974 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTE0MTE3', 'Timestamp': '20240910114117', 'CheckoutRequestID': 'ws_CO_10092024144106018111723007'}"}
2024-09-10 11:41:17,976 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:41:18,712 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 11:41:18,713 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024144106018111723007', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024144106018111723007 827142"}
2024-09-10 11:41:18,716 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 11:43:10,619 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:43:10,784 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 11:43:10,785 - INFO - {'updated': 'initiated stk query for ws_CO_10092024144259115712548848 899885 '}
2024-09-10 11:43:10,874 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:43:11,630 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:43:11,632 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer NihEgwyAW4TtJBdX6wjVDtI3fuFI'}"}
2024-09-10 11:43:11,632 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTE0MzEw', 'Timestamp': '20240910114310', 'CheckoutRequestID': 'ws_CO_10092024144259115712548848'}"}
2024-09-10 11:43:11,633 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:43:12,393 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 11:43:12,394 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5974031', 'CheckoutRequestID': 'ws_CO_10092024144259115712548848', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024144259115712548848 899885"}
2024-09-10 11:43:12,563 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 11:43:13,141 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 11:43:13,143 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 11:43:13,447 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 11:43:35,827 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:43:36,009 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 675
2024-09-10 11:43:36,010 - INFO - {'updated': 'initiated stk query for ws_CO_10092024144254630721720280 899885 '}
2024-09-10 11:43:36,073 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:43:36,653 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:43:36,655 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer oYnLIPtrnPA205RjWX5cWGF0Lnut'}"}
2024-09-10 11:43:36,656 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTE0MzM2', 'Timestamp': '20240910114336', 'CheckoutRequestID': 'ws_CO_10092024144254630721720280'}"}
2024-09-10 11:43:36,657 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:43:37,290 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 11:43:37,291 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596336500', 'CheckoutRequestID': 'ws_CO_10092024144254630721720280', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024144254630721720280 899885"}
2024-09-10 11:43:37,430 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 11:43:37,631 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 11:43:37,633 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 11:43:38,180 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 11:45:20,697 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793297257', 'CheckoutRequestID': 'ws_CO_10092024144501752723862184', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA441AIWY'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910144519}, {'Name': 'PhoneNumber', 'Value': 254723862184}]}}}}"}
2024-09-10 11:45:20,698 - INFO - {'updated_data': 'callback data began'}
2024-09-10 11:45:20,698 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793297257', 'CheckoutRequestID': 'ws_CO_10092024144501752723862184', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA441AIWY'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910144519}, {'Name': 'PhoneNumber', 'Value': 254723862184}]}}}}}
2024-09-10 11:45:20,937 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 11:45:21,460 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 11:45:21,461 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 11:45:21,699 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 11:47:16,035 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:47:16,240 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 11:47:16,241 - INFO - there is a test coming
2024-09-10 11:47:16,241 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 11:47:16,293 - INFO - {'updated_data': 'the data is now as 254729360305'}
2024-09-10 11:47:16,293 - INFO - the data is now as 254729360305
2024-09-10 11:47:16,310 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 11:47:16,310 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 11:47:16,312 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:47:16,975 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:47:16,979 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer pnAL55evAJLfyf1vVFapGuCmAh9g'}"}
2024-09-10 11:47:16,981 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTE0NzE2', 'Timestamp': '20240910114716', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254729360305', 'PartyB': 827142, 'PhoneNumber': '254729360305', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-3803', 'TransactionDesc': 'Some payment'}
2024-09-10 11:47:16,983 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:47:17,769 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 11:47:17,798 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87613693', 'CheckoutRequestID': 'ws_CO_10092024144717500729360305', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 11:47:24,718 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:47:24,894 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 11:47:24,895 - INFO - {'updated': 'initiated stk query for ws_CO_10092024144710044722258830 827142 '}
2024-09-10 11:47:24,961 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:47:25,604 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:47:25,606 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 9TG0XjAN6CY4tLQ114hQNajxl03m'}"}
2024-09-10 11:47:25,606 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTE0NzI0', 'Timestamp': '20240910114724', 'CheckoutRequestID': 'ws_CO_10092024144710044722258830'}"}
2024-09-10 11:47:25,607 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:47:26,209 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 11:47:26,209 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024144710044722258830', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024144710044722258830 827142"}
2024-09-10 11:47:26,211 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 11:47:27,125 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169943535', 'CheckoutRequestID': 'ws_CO_10092024144710044722258830', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA241L4TS'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910144726}, {'Name': 'PhoneNumber', 'Value': 254722258830}]}}}}"}
2024-09-10 11:47:27,125 - INFO - {'updated_data': 'callback data began'}
2024-09-10 11:47:27,125 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169943535', 'CheckoutRequestID': 'ws_CO_10092024144710044722258830', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA241L4TS'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910144726}, {'Name': 'PhoneNumber', 'Value': 254722258830}]}}}}}
2024-09-10 11:47:27,297 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 11:47:27,489 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 11:47:27,490 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 11:47:27,709 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 11:47:28,686 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:47:28,701 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 11:47:28,702 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 11:48:39,452 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:48:39,672 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 11:48:39,672 - INFO - there is a test coming
2024-09-10 11:48:39,672 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 11:48:39,715 - INFO - {'updated_data': 'the data is now as 254711174848'}
2024-09-10 11:48:39,715 - INFO - the data is now as 254711174848
2024-09-10 11:48:39,739 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 11:48:39,740 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 11:48:39,741 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:48:40,613 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:48:40,615 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Daf1Ccj9ADIlw5WV2rwdBGuXBDpx'}"}
2024-09-10 11:48:40,616 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTE0ODQw', 'Timestamp': '20240910114840', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254711174848', 'PartyB': 899885, 'PhoneNumber': '254711174848', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA007524CP-1725968918601', 'TransactionDesc': 'Some payment'}
2024-09-10 11:48:40,618 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:48:41,519 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 11:48:41,526 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16437038', 'CheckoutRequestID': 'ws_CO_10092024144841257711174848', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 11:48:51,171 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:48:51,351 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 11:48:51,351 - INFO - there is a test coming
2024-09-10 11:48:51,351 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 11:48:51,394 - INFO - {'updated_data': 'the data is now as 254724771286'}
2024-09-10 11:48:51,395 - INFO - the data is now as 254724771286
2024-09-10 11:48:51,411 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 11:48:51,412 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 11:48:51,413 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:48:52,027 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:48:52,032 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer LNQvCGlOCH4G1ymAjJr6CXRxfVAm'}"}
2024-09-10 11:48:52,033 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTE0ODUy', 'Timestamp': '20240910114852', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '500', 'PartyA': '254724771286', 'PartyB': 827142, 'PhoneNumber': '254724771286', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-30954', 'TransactionDesc': 'Some payment'}
2024-09-10 11:48:52,034 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:48:53,252 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 11:48:53,258 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5990062', 'CheckoutRequestID': 'ws_CO_10092024144852704724771286', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 11:49:29,582 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:49:29,736 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 11:49:29,737 - INFO - {'updated': 'initiated stk query for ws_CO_10092024144852704724771286 827142 '}
2024-09-10 11:49:29,797 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:49:30,471 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:49:30,474 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Jfiz5mnoKTQyipn2DY92PUATymQ2'}"}
2024-09-10 11:49:30,475 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTE0OTI5', 'Timestamp': '20240910114929', 'CheckoutRequestID': 'ws_CO_10092024144852704724771286'}"}
2024-09-10 11:49:30,476 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:49:36,300 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 11:49:36,301 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b5990062', 'CheckoutRequestID': 'ws_CO_10092024144852704724771286', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024144852704724771286 827142"}
2024-09-10 11:49:36,421 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 11:49:36,961 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 11:49:36,963 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 11:49:37,615 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 11:51:17,479 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 11:51:17,601 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 11:51:17,602 - INFO - there is a test coming
2024-09-10 11:51:17,602 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 11:51:17,650 - INFO - {'updated_data': 'the data is now as 254702601754'}
2024-09-10 11:51:17,650 - INFO - the data is now as 254702601754
2024-09-10 11:51:17,668 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 11:51:17,668 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 11:51:17,669 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:51:18,437 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 11:51:18,439 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer dp3HGGVVlpYhq6n7ACfKP4TVFNfC'}"}
2024-09-10 11:51:18,440 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTE1MTE4', 'Timestamp': '20240910115118', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254702601754', 'PartyB': 827142, 'PhoneNumber': '254702601754', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-2214', 'TransactionDesc': 'Some payment'}
2024-09-10 11:51:18,441 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 11:51:19,589 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 11:51:19,595 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170434560', 'CheckoutRequestID': 'ws_CO_10092024145119162702601754', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 12:00:04,334 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:00:04,485 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:00:04,486 - INFO - {'updated': 'initiated stk query for ws_CO_10092024145952527702844726 827142 '}
2024-09-10 12:00:04,573 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:00:05,241 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:00:05,243 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer G9lZ6MJ2Fthf4L2mTzpLtrC4NOF6'}"}
2024-09-10 12:00:05,244 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTIwMDA0', 'Timestamp': '20240910120004', 'CheckoutRequestID': 'ws_CO_10092024145952527702844726'}"}
2024-09-10 12:00:05,247 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:00:05,891 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 12:00:05,891 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024145952527702844726', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024145952527702844726 827142"}
2024-09-10 12:00:05,893 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 12:00:06,601 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075635088', 'CheckoutRequestID': 'ws_CO_10092024145952527702844726', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA943BCXL'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910150005}, {'Name': 'PhoneNumber', 'Value': 254702844726}]}}}}"}
2024-09-10 12:00:06,601 - INFO - {'updated_data': 'callback data began'}
2024-09-10 12:00:06,601 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075635088', 'CheckoutRequestID': 'ws_CO_10092024145952527702844726', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA943BCXL'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910150005}, {'Name': 'PhoneNumber', 'Value': 254702844726}]}}}}}
2024-09-10 12:00:06,757 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:00:06,972 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:00:06,980 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:00:07,221 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:00:14,083 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:00:14,241 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:00:14,242 - INFO - {'updated': 'initiated stk query for ws_CO_10092024145952527702844726 827142 '}
2024-09-10 12:00:14,309 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:00:14,980 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:00:14,982 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 3dNePQKrj58h5P4hYPGSMKMqpV9d'}"}
2024-09-10 12:00:15,007 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTIwMDE0', 'Timestamp': '20240910120014', 'CheckoutRequestID': 'ws_CO_10092024145952527702844726'}"}
2024-09-10 12:00:15,008 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:00:15,673 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 12:00:15,674 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075635088', 'CheckoutRequestID': 'ws_CO_10092024145952527702844726', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024145952527702844726 827142"}
2024-09-10 12:00:15,798 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:00:16,298 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:00:16,299 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:00:16,529 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:06:51,551 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169966666', 'CheckoutRequestID': 'ws_CO_10092024150642131724586093', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA44480P8'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910150650}, {'Name': 'PhoneNumber', 'Value': 254724586093}]}}}}"}
2024-09-10 12:06:51,551 - INFO - {'updated_data': 'callback data began'}
2024-09-10 12:06:51,551 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169966666', 'CheckoutRequestID': 'ws_CO_10092024150642131724586093', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA44480P8'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910150650}, {'Name': 'PhoneNumber', 'Value': 254724586093}]}}}}}
2024-09-10 12:06:51,732 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:06:52,003 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:06:52,004 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:06:52,215 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:06:53,802 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:06:53,995 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:06:53,996 - INFO - {'updated': 'initiated stk query for ws_CO_10092024150642131724586093 899885 '}
2024-09-10 12:06:54,066 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:06:54,650 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:06:54,652 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer wfqqIMMRxwNmq2gifFp3QlKTdMpy'}"}
2024-09-10 12:06:54,652 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTIwNjU0', 'Timestamp': '20240910120654', 'CheckoutRequestID': 'ws_CO_10092024150642131724586093'}"}
2024-09-10 12:06:54,653 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:06:55,269 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 12:06:55,269 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169966666', 'CheckoutRequestID': 'ws_CO_10092024150642131724586093', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024150642131724586093 899885"}
2024-09-10 12:06:55,403 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:06:55,910 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:06:55,912 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:06:56,145 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:08:13,304 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:08:13,454 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:08:13,455 - INFO - there is a test coming
2024-09-10 12:08:13,455 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 12:08:13,570 - INFO - {'updated_data': 'the data is now as 254795798879'}
2024-09-10 12:08:13,570 - INFO - the data is now as 254795798879
2024-09-10 12:08:13,586 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 12:08:13,586 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 12:08:13,588 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:08:15,967 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:08:15,969 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer jb7h9Ch7zVi5zGFml48h94AmRZSU'}"}
2024-09-10 12:08:15,970 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTIwODE1', 'Timestamp': '20240910120815', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '4000', 'PartyA': '254795798879', 'PartyB': 899885, 'PhoneNumber': '254795798879', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054106', 'TransactionDesc': 'Some payment'}
2024-09-10 12:08:15,976 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:08:16,732 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 12:08:16,738 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585052453385', 'CheckoutRequestID': 'ws_CO_10092024150816506795798879', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 12:08:29,869 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585052453385', 'CheckoutRequestID': 'ws_CO_10092024150816506795798879', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA044FQ10'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910150829}, {'Name': 'PhoneNumber', 'Value': 254795798879}]}}}}"}
2024-09-10 12:08:29,870 - INFO - {'updated_data': 'callback data began'}
2024-09-10 12:08:29,870 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585052453385', 'CheckoutRequestID': 'ws_CO_10092024150816506795798879', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA044FQ10'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910150829}, {'Name': 'PhoneNumber', 'Value': 254795798879}]}}}}}
2024-09-10 12:08:30,045 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:08:30,259 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:08:30,260 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:08:30,812 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:08:37,870 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:08:37,987 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:08:37,988 - INFO - {'updated': 'initiated stk query for ws_CO_10092024150816506795798879 899885 '}
2024-09-10 12:08:38,062 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:08:38,637 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:08:38,639 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 7g7UsR8cxRTbyWjHDYWYycQZxhxa'}"}
2024-09-10 12:08:38,639 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTIwODM4', 'Timestamp': '20240910120838', 'CheckoutRequestID': 'ws_CO_10092024150816506795798879'}"}
2024-09-10 12:08:38,640 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:08:39,291 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 12:08:39,292 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585052453385', 'CheckoutRequestID': 'ws_CO_10092024150816506795798879', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024150816506795798879 899885"}
2024-09-10 12:08:39,420 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:08:39,621 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:08:39,624 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:08:39,836 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:13:19,765 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:13:19,995 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:13:19,996 - INFO - there is a test coming
2024-09-10 12:13:19,996 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 12:13:20,058 - INFO - {'updated_data': 'the data is now as 254701085228'}
2024-09-10 12:13:20,058 - INFO - the data is now as 254701085228
2024-09-10 12:13:20,089 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 12:13:20,090 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 12:13:20,091 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:13:22,219 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:13:22,222 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer lzscQKOJiwW1Aj8CFClTd42P5eu7'}"}
2024-09-10 12:13:22,222 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTIxMzIy', 'Timestamp': '20240910121322', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '500', 'PartyA': '254701085228', 'PartyB': 899885, 'PhoneNumber': '254701085228', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054107', 'TransactionDesc': 'Some payment'}
2024-09-10 12:13:22,223 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:13:23,081 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 12:13:23,087 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169974112', 'CheckoutRequestID': 'ws_CO_10092024151322843701085228', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 12:13:33,493 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169974112', 'CheckoutRequestID': 'ws_CO_10092024151322843701085228', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA84546HM'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910151332}, {'Name': 'PhoneNumber', 'Value': 254701085228}]}}}}"}
2024-09-10 12:13:33,494 - INFO - {'updated_data': 'callback data began'}
2024-09-10 12:13:33,494 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169974112', 'CheckoutRequestID': 'ws_CO_10092024151322843701085228', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA84546HM'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910151332}, {'Name': 'PhoneNumber', 'Value': 254701085228}]}}}}}
2024-09-10 12:13:33,708 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:13:33,940 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:13:33,941 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:13:34,191 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:13:34,327 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:13:34,328 - INFO - {'updated': 'initiated stk query for ws_CO_10092024151322843701085228 899885 '}
2024-09-10 12:13:34,385 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:13:34,460 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:13:34,963 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:13:34,965 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer tcncBKjgjQyNC317eUe3fGzfq1AA'}"}
2024-09-10 12:13:34,966 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTIxMzM0', 'Timestamp': '20240910121334', 'CheckoutRequestID': 'ws_CO_10092024151322843701085228'}"}
2024-09-10 12:13:34,967 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:13:35,589 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 12:13:35,590 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6169974112', 'CheckoutRequestID': 'ws_CO_10092024151322843701085228', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024151322843701085228 899885"}
2024-09-10 12:13:35,703 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:13:35,926 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:13:35,927 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:13:36,160 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:14:02,527 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:14:02,758 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:14:02,759 - INFO - there is a test coming
2024-09-10 12:14:02,759 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 12:14:02,801 - INFO - {'updated_data': 'the data is now as 254723369012'}
2024-09-10 12:14:02,801 - INFO - the data is now as 254723369012
2024-09-10 12:14:02,816 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 12:14:02,817 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 12:14:02,818 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:14:03,394 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:14:03,396 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 0xVE7RZa8cZp0pQqEJx7xObkxNUv'}"}
2024-09-10 12:14:03,397 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTIxNDAz', 'Timestamp': '20240910121403', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254723369012', 'PartyB': 827142, 'PhoneNumber': '254723369012', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-33256', 'TransactionDesc': 'Some payment'}
2024-09-10 12:14:03,398 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:14:04,317 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 12:14:04,323 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516506677', 'CheckoutRequestID': 'ws_CO_10092024151404049723369012', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 12:14:11,213 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:14:11,347 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:14:11,348 - INFO - there is a test coming
2024-09-10 12:14:11,348 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 12:14:11,398 - INFO - {'updated_data': 'the data is now as 254745195041'}
2024-09-10 12:14:11,398 - INFO - the data is now as 254745195041
2024-09-10 12:14:11,416 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 12:14:11,416 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 12:14:11,418 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:14:12,006 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:14:12,008 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer vr3DZMAmgW0VnBIPkitSLXiuvW8s'}"}
2024-09-10 12:14:12,009 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTIxNDEy', 'Timestamp': '20240910121412', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254745195041', 'PartyB': 899885, 'PhoneNumber': '254745195041', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054064', 'TransactionDesc': 'Some payment'}
2024-09-10 12:14:12,010 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:14:12,903 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 12:14:12,910 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db16512522', 'CheckoutRequestID': 'ws_CO_10092024151412646745195041', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 12:14:22,864 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db16512522', 'CheckoutRequestID': 'ws_CO_10092024151412646745195041', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA0458J8G'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910151422}, {'Name': 'PhoneNumber', 'Value': 254745195041}]}}}}"}
2024-09-10 12:14:22,865 - INFO - {'updated_data': 'callback data began'}
2024-09-10 12:14:22,865 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db16512522', 'CheckoutRequestID': 'ws_CO_10092024151412646745195041', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA0458J8G'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910151422}, {'Name': 'PhoneNumber', 'Value': 254745195041}]}}}}}
2024-09-10 12:14:23,127 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:14:23,323 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:14:23,324 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:14:23,743 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:14:23,893 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:14:23,943 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:14:23,944 - INFO - {'updated': 'initiated stk query for ws_CO_10092024151412646745195041 899885 '}
2024-09-10 12:14:24,024 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:14:24,586 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:14:24,588 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 0fIvQazpMPY9fAN8tpfYEO20pSRM'}"}
2024-09-10 12:14:24,588 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTIxNDI0', 'Timestamp': '20240910121424', 'CheckoutRequestID': 'ws_CO_10092024151412646745195041'}"}
2024-09-10 12:14:24,589 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:14:25,360 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 12:14:25,361 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db16512522', 'CheckoutRequestID': 'ws_CO_10092024151412646745195041', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024151412646745195041 899885"}
2024-09-10 12:14:25,510 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:14:26,038 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:14:26,040 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:14:26,268 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:15:57,628 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:15:57,786 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:15:57,788 - INFO - {'updated': 'initiated stk query for ws_CO_10092024151545605721934414 899885 '}
2024-09-10 12:15:57,850 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:15:58,620 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:15:58,622 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer n08UgHWaeqOt8jxGkJ8As3pWWgTO'}"}
2024-09-10 12:15:58,622 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTIxNTU3', 'Timestamp': '20240910121557', 'CheckoutRequestID': 'ws_CO_10092024151545605721934414'}"}
2024-09-10 12:15:58,623 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:15:59,366 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 12:15:59,367 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024151545605721934414', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024151545605721934414 899885"}
2024-09-10 12:15:59,370 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 12:18:48,947 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:18:49,402 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:18:49,402 - INFO - {'updated': 'initiated stk query for ws_CO_10092024151817188704189944 827142 '}
2024-09-10 12:18:49,503 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:18:50,059 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:18:50,061 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer NldoDBxt2HlGEu9HZ32pqYUT2DAY'}"}
2024-09-10 12:18:50,062 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTIxODQ5', 'Timestamp': '20240910121849', 'CheckoutRequestID': 'ws_CO_10092024151817188704189944'}"}
2024-09-10 12:18:50,063 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:18:50,714 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 12:18:50,715 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585052480477', 'CheckoutRequestID': 'ws_CO_10092024151817188704189944', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024151817188704189944 827142"}
2024-09-10 12:18:50,846 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:18:51,563 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:18:51,564 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:18:51,787 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:19:03,390 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075657099', 'CheckoutRequestID': 'ws_CO_10092024151850744743366598', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA645V6CI'}, {'Name': 'TransactionDate', 'Value': 20240910151902}, {'Name': 'PhoneNumber', 'Value': 254743366598}]}}}}"}
2024-09-10 12:19:03,391 - INFO - {'updated_data': 'callback data began'}
2024-09-10 12:19:03,391 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075657099', 'CheckoutRequestID': 'ws_CO_10092024151850744743366598', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA645V6CI'}, {'Name': 'TransactionDate', 'Value': 20240910151902}, {'Name': 'PhoneNumber', 'Value': 254743366598}]}}}}}
2024-09-10 12:19:03,560 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:19:04,083 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:19:04,084 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:19:04,406 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6070925', 'CheckoutRequestID': 'ws_CO_10092024151842507715689386', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}"}
2024-09-10 12:19:04,407 - INFO - {'updated_data': 'callback data began'}
2024-09-10 12:19:04,407 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6070925', 'CheckoutRequestID': 'ws_CO_10092024151842507715689386', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}}
2024-09-10 12:19:04,577 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:19:04,611 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:19:04,783 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:19:04,785 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:19:05,345 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:21:53,836 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:21:53,974 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:21:53,975 - INFO - there is a test coming
2024-09-10 12:21:53,976 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 12:21:54,033 - INFO - {'updated_data': 'the data is now as 254722809505'}
2024-09-10 12:21:54,034 - INFO - the data is now as 254722809505
2024-09-10 12:21:54,050 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 12:21:54,050 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 12:21:54,052 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:21:54,643 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:21:54,645 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 0qaG9ZFQoRpWeAS6K1pCW9o7xRxN'}"}
2024-09-10 12:21:54,646 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTIyMTU0', 'Timestamp': '20240910122154', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '23559', 'PartyA': '254722809505', 'PartyB': 827142, 'PhoneNumber': '254722809505', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-48849', 'TransactionDesc': 'Some payment'}
2024-09-10 12:21:54,647 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:21:55,482 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 12:21:55,488 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16526906', 'CheckoutRequestID': 'ws_CO_10092024152155245722809505', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 12:23:38,579 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:23:38,694 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:23:38,694 - INFO - there is a test coming
2024-09-10 12:23:38,694 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 12:23:38,737 - INFO - {'updated_data': 'the data is now as 254722666102'}
2024-09-10 12:23:38,737 - INFO - the data is now as 254722666102
2024-09-10 12:23:38,752 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 12:23:38,752 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 12:23:38,753 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:23:39,338 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:23:39,340 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 5i0hUAfa6HUTKWM8v79G6F98n5Sn'}"}
2024-09-10 12:23:39,340 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTIyMzM5', 'Timestamp': '20240910122339', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '200000', 'PartyA': '254722666102', 'PartyB': 899885, 'PhoneNumber': '254722666102', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054019', 'TransactionDesc': 'Some payment'}
2024-09-10 12:23:39,342 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:23:40,233 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 12:23:40,240 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585052495319', 'CheckoutRequestID': 'ws_CO_10092024152339977722666102', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 12:23:53,931 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585052495319', 'CheckoutRequestID': 'ws_CO_10092024152339977722666102', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA446J11S'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910152353}, {'Name': 'PhoneNumber', 'Value': 254722666102}]}}}}"}
2024-09-10 12:23:53,932 - INFO - {'updated_data': 'callback data began'}
2024-09-10 12:23:53,932 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585052495319', 'CheckoutRequestID': 'ws_CO_10092024152339977722666102', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA446J11S'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910152353}, {'Name': 'PhoneNumber', 'Value': 254722666102}]}}}}}
2024-09-10 12:23:54,224 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:23:54,543 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:23:54,658 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:23:54,660 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:23:54,716 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:23:54,717 - INFO - {'updated': 'initiated stk query for ws_CO_10092024152339977722666102 899885 '}
2024-09-10 12:23:54,771 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:23:54,895 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:23:55,389 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:23:55,391 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer fIAAOiBWwYLBWPnxhpLvy46AjZ8n'}"}
2024-09-10 12:23:55,392 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTIyMzU0', 'Timestamp': '20240910122354', 'CheckoutRequestID': 'ws_CO_10092024152339977722666102'}"}
2024-09-10 12:23:55,394 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:23:56,114 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 12:23:56,115 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585052495319', 'CheckoutRequestID': 'ws_CO_10092024152339977722666102', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024152339977722666102 899885"}
2024-09-10 12:23:56,237 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:23:56,432 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:23:56,434 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:23:56,683 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:23:58,214 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6085485', 'CheckoutRequestID': 'ws_CO_10092024152350853703752300', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA246JINC'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910152357}, {'Name': 'PhoneNumber', 'Value': 254703752300}]}}}}"}
2024-09-10 12:23:58,214 - INFO - {'updated_data': 'callback data began'}
2024-09-10 12:23:58,214 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6085485', 'CheckoutRequestID': 'ws_CO_10092024152350853703752300', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA246JINC'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910152357}, {'Name': 'PhoneNumber', 'Value': 254703752300}]}}}}}
2024-09-10 12:23:58,376 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:23:58,898 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:23:58,899 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:23:59,133 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:25:18,923 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:25:19,061 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:25:19,062 - INFO - there is a test coming
2024-09-10 12:25:19,062 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 12:25:19,111 - INFO - {'updated_data': 'the data is now as 254702840169'}
2024-09-10 12:25:19,112 - INFO - the data is now as 254702840169
2024-09-10 12:25:19,130 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 12:25:19,130 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 12:25:19,132 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:25:19,931 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:25:19,933 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer gkPLE6mjKkexR884XjHExuQI9jM8'}"}
2024-09-10 12:25:19,934 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTIyNTE5', 'Timestamp': '20240910122519', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '7', 'PartyA': '254702840169', 'PartyB': 827142, 'PhoneNumber': '254702840169', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-5189', 'TransactionDesc': 'Some payment'}
2024-09-10 12:25:19,936 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:25:20,680 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 12:25:20,686 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585052499902', 'CheckoutRequestID': 'ws_CO_10092024152520452702840169', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 12:25:31,614 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:25:31,744 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:25:31,745 - INFO - {'updated': 'initiated stk query for ws_CO_10092024152520452702840169 827142 '}
2024-09-10 12:25:31,801 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:25:32,436 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:25:32,438 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer lAlEt4tBNXAXMQE4a3aHdXDeIg08'}"}
2024-09-10 12:25:32,438 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTIyNTMx', 'Timestamp': '20240910122531', 'CheckoutRequestID': 'ws_CO_10092024152520452702840169'}"}
2024-09-10 12:25:32,439 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:25:33,156 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 12:25:33,157 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585052499902', 'CheckoutRequestID': 'ws_CO_10092024152520452702840169', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024152520452702840169 827142"}
2024-09-10 12:25:33,289 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:25:33,506 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:25:33,507 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:25:33,741 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:26:03,489 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:26:03,773 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:26:03,774 - INFO - there is a test coming
2024-09-10 12:26:03,774 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 12:26:03,824 - INFO - {'updated_data': 'the data is now as 254722405846'}
2024-09-10 12:26:03,824 - INFO - the data is now as 254722405846
2024-09-10 12:26:03,843 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 12:26:03,843 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 12:26:03,844 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:26:04,436 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:26:04,438 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer xSliEZtbAJFLKDVeWc5Y4dl6HTV4'}"}
2024-09-10 12:26:04,438 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTIyNjA0', 'Timestamp': '20240910122604', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '7070', 'PartyA': '254722405846', 'PartyB': 827142, 'PhoneNumber': '254722405846', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '121-15895', 'TransactionDesc': 'Some payment'}
2024-09-10 12:26:04,439 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:26:07,709 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 12:26:07,715 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208793346257', 'CheckoutRequestID': 'ws_CO_10092024152604970722405846', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 12:26:56,420 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596455973', 'CheckoutRequestID': 'ws_CO_10092024152649219722405846', 'ResultCode': 17, 'ResultDesc': 'Rule limited.'}}}"}
2024-09-10 12:26:56,420 - INFO - {'updated_data': 'callback data began'}
2024-09-10 12:26:56,420 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596455973', 'CheckoutRequestID': 'ws_CO_10092024152649219722405846', 'ResultCode': 17, 'ResultDesc': 'Rule limited.'}}}}
2024-09-10 12:26:56,614 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:26:56,802 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:26:56,803 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:26:57,023 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:26:59,384 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:26:59,546 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:26:59,547 - INFO - there is a test coming
2024-09-10 12:26:59,547 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 12:26:59,595 - INFO - {'updated_data': 'the data is now as 254722701945'}
2024-09-10 12:26:59,595 - INFO - the data is now as 254722701945
2024-09-10 12:26:59,611 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 12:26:59,611 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 12:26:59,613 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:27:00,291 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:27:00,293 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer p8DsCPnZm3GpQqAYYlXvEam8mqfc'}"}
2024-09-10 12:27:00,293 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTIyNzAw', 'Timestamp': '20240910122700', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '43370', 'PartyA': '254722701945', 'PartyB': 899885, 'PhoneNumber': '254722701945', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA000879CP-1725971216705', 'TransactionDesc': 'Some payment'}
2024-09-10 12:27:00,295 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:27:01,062 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 12:27:01,069 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16540403', 'CheckoutRequestID': 'ws_CO_10092024152700828722701945', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 12:45:16,905 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:45:17,116 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:45:17,116 - INFO - there is a test coming
2024-09-10 12:45:17,117 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 12:45:17,161 - INFO - {'updated_data': 'the data is now as 254722292983'}
2024-09-10 12:45:17,161 - INFO - the data is now as 254722292983
2024-09-10 12:45:17,196 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 12:45:17,196 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 12:45:17,197 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:45:17,868 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:45:17,870 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer snL3qZZWBNFvCDbm62hJHE6cgjA0'}"}
2024-09-10 12:45:17,870 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTI0NTE3', 'Timestamp': '20240910124517', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254722292983', 'PartyB': 899885, 'PhoneNumber': '254722292983', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0601181-1725972314520', 'TransactionDesc': 'Some payment'}
2024-09-10 12:45:17,871 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:45:18,665 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 12:45:18,673 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208793367743', 'CheckoutRequestID': 'ws_CO_10092024154518461722292983', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 12:45:24,256 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:45:24,398 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:45:24,398 - INFO - {'updated': 'initiated stk query for ws_CO_10092024154512332718664521 899885 '}
2024-09-10 12:45:24,467 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:45:25,048 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:45:25,050 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer GRpeZfIX0wjaABO1n6VALlETKuMF'}"}
2024-09-10 12:45:25,050 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTI0NTI0', 'Timestamp': '20240910124524', 'CheckoutRequestID': 'ws_CO_10092024154512332718664521'}"}
2024-09-10 12:45:25,051 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:45:25,656 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 12:45:25,657 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169775522', 'CheckoutRequestID': 'ws_CO_10092024154512332718664521', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024154512332718664521 899885"}
2024-09-10 12:45:25,765 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:45:26,460 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:45:26,461 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:45:26,968 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:46:12,277 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:46:12,466 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:46:12,466 - INFO - there is a test coming
2024-09-10 12:46:12,467 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 12:46:12,560 - INFO - {'updated_data': 'the data is now as 254718664521'}
2024-09-10 12:46:12,561 - INFO - the data is now as 254718664521
2024-09-10 12:46:12,579 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 12:46:12,579 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 12:46:12,598 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:46:13,182 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:46:13,184 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer b6b9cAdJ2uDAMY5BDNAKUHzs3Bze'}"}
2024-09-10 12:46:13,184 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTI0NjEz', 'Timestamp': '20240910124613', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254718664521', 'PartyB': 827142, 'PhoneNumber': '254718664521', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-13413', 'TransactionDesc': 'Some payment'}
2024-09-10 12:46:13,185 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:46:16,725 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 12:46:16,731 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db16601366', 'CheckoutRequestID': 'ws_CO_10092024154613722718664521', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 12:49:35,520 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87685673', 'CheckoutRequestID': 'ws_CO_10092024154925983724682691', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA94A11UX'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910154934}, {'Name': 'PhoneNumber', 'Value': 254724682691}]}}}}"}
2024-09-10 12:49:35,521 - INFO - {'updated_data': 'callback data began'}
2024-09-10 12:49:35,521 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87685673', 'CheckoutRequestID': 'ws_CO_10092024154925983724682691', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA94A11UX'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910154934}, {'Name': 'PhoneNumber', 'Value': 254724682691}]}}}}}
2024-09-10 12:49:35,754 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:49:36,363 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:49:36,365 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:49:36,720 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:49:37,129 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:49:37,283 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:49:37,284 - INFO - {'updated': 'initiated stk query for ws_CO_10092024154925983724682691 899885 '}
2024-09-10 12:49:37,346 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:49:38,115 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:49:38,117 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 8AJGYHGVNslLbyh5Ze8YGt9mscYb'}"}
2024-09-10 12:49:38,118 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTI0OTM3', 'Timestamp': '20240910124937', 'CheckoutRequestID': 'ws_CO_10092024154925983724682691'}"}
2024-09-10 12:49:38,119 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:49:38,939 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 12:49:38,940 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87685673', 'CheckoutRequestID': 'ws_CO_10092024154925983724682691', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024154925983724682691 899885"}
2024-09-10 12:49:39,128 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 12:49:39,413 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 12:49:39,414 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 12:49:40,070 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 12:50:21,763 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 12:50:21,958 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 12:50:21,958 - INFO - {'updated': 'initiated stk query for ws_CO_10092024155010373721553876 827142 '}
2024-09-10 12:50:22,069 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:50:22,736 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 12:50:22,738 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 9tZDl8lfA8ZYRvEk6Ugbvt3CB8Tz'}"}
2024-09-10 12:50:22,738 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTI1MDIy', 'Timestamp': '20240910125022', 'CheckoutRequestID': 'ws_CO_10092024155010373721553876'}"}
2024-09-10 12:50:22,739 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 12:50:23,499 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 12:50:23,499 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024155010373721553876', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024155010373721553876 827142"}
2024-09-10 12:50:23,501 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 13:05:07,728 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6201462', 'CheckoutRequestID': 'ws_CO_10092024160453153718159756', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 800.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA54C54BJ'}, {'Name': 'TransactionDate', 'Value': 20240910160507}, {'Name': 'PhoneNumber', 'Value': 254718159756}]}}}}"}
2024-09-10 13:05:07,728 - INFO - {'updated_data': 'callback data began'}
2024-09-10 13:05:07,728 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6201462', 'CheckoutRequestID': 'ws_CO_10092024160453153718159756', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 800.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA54C54BJ'}, {'Name': 'TransactionDate', 'Value': 20240910160507}, {'Name': 'PhoneNumber', 'Value': 254718159756}]}}}}}
2024-09-10 13:05:07,912 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:05:08,121 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:05:08,125 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:05:08,659 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:05:12,331 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:05:12,467 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:05:12,468 - INFO - there is a test coming
2024-09-10 13:05:12,468 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 13:05:12,509 - INFO - {'updated_data': 'the data is now as 254729610325'}
2024-09-10 13:05:12,510 - INFO - the data is now as 254729610325
2024-09-10 13:05:12,532 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 13:05:12,533 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 13:05:12,534 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:05:13,107 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:05:13,109 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer gmBAdAxdGFe3GQGt4vGW4xRmt8Cj'}"}
2024-09-10 13:05:13,109 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTMwNTEz', 'Timestamp': '20240910130513', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254729610325', 'PartyB': 827142, 'PhoneNumber': '254729610325', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-50734', 'TransactionDesc': 'Some payment'}
2024-09-10 13:05:13,111 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:05:13,899 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 13:05:13,907 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87704465', 'CheckoutRequestID': 'ws_CO_10092024160513648729610325', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 13:07:04,249 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075712960', 'CheckoutRequestID': 'ws_CO_10092024160650045724846259', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA74CE7YL'}, {'Name': 'TransactionDate', 'Value': 20240910160703}, {'Name': 'PhoneNumber', 'Value': 254724846259}]}}}}"}
2024-09-10 13:07:04,250 - INFO - {'updated_data': 'callback data began'}
2024-09-10 13:07:04,250 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075712960', 'CheckoutRequestID': 'ws_CO_10092024160650045724846259', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA74CE7YL'}, {'Name': 'TransactionDate', 'Value': 20240910160703}, {'Name': 'PhoneNumber', 'Value': 254724846259}]}}}}}
2024-09-10 13:07:04,477 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:07:04,983 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:07:04,984 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:07:05,506 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:09:04,249 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:09:04,402 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:09:04,403 - INFO - there is a test coming
2024-09-10 13:09:04,404 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 13:09:04,452 - INFO - {'updated_data': 'the data is now as 254721430278'}
2024-09-10 13:09:04,452 - INFO - the data is now as 254721430278
2024-09-10 13:09:04,467 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 13:09:04,467 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 13:09:04,468 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:09:05,074 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:09:05,075 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer pmKJVnoHllXzGfbhPZlSC1qQWvqX'}"}
2024-09-10 13:09:05,076 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTMwOTA1', 'Timestamp': '20240910130905', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '13000', 'PartyA': '254721430278', 'PartyB': 899885, 'PhoneNumber': '254721430278', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0626810-1725973741572', 'TransactionDesc': 'Some payment'}
2024-09-10 13:09:05,077 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:09:05,812 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 13:09:05,826 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170525389', 'CheckoutRequestID': 'ws_CO_10092024160905596721430278', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 13:14:03,327 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:14:03,476 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:14:03,477 - INFO - {'updated': 'initiated stk query for ws_CO_10092024161352067705289286 899885 '}
2024-09-10 13:14:03,544 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:14:04,101 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:14:04,104 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer w9fGZ2yhjpy27WompGLqwyq43qOX'}"}
2024-09-10 13:14:04,104 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTMxNDAz', 'Timestamp': '20240910131403', 'CheckoutRequestID': 'ws_CO_10092024161352067705289286'}"}
2024-09-10 13:14:04,105 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:14:04,795 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 13:14:04,796 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024161352067705289286', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024161352067705289286 899885"}
2024-09-10 13:14:04,798 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 13:14:06,420 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6226876', 'CheckoutRequestID': 'ws_CO_10092024161352067705289286', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1950.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA04DCESY'}, {'Name': 'TransactionDate', 'Value': 20240910161405}, {'Name': 'PhoneNumber', 'Value': 254705289286}]}}}}"}
2024-09-10 13:14:06,421 - INFO - {'updated_data': 'callback data began'}
2024-09-10 13:14:06,421 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6226876', 'CheckoutRequestID': 'ws_CO_10092024161352067705289286', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1950.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA04DCESY'}, {'Name': 'TransactionDate', 'Value': 20240910161405}, {'Name': 'PhoneNumber', 'Value': 254705289286}]}}}}}
2024-09-10 13:14:06,639 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:14:06,849 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:14:06,850 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:14:07,368 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:14:13,280 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:14:13,468 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:14:13,469 - INFO - {'updated': 'initiated stk query for ws_CO_10092024161352067705289286 899885 '}
2024-09-10 13:14:13,527 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:14:14,228 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:14:14,230 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer uiqEesPGOFoDEoV6zWS8nW8k8z7a'}"}
2024-09-10 13:14:14,230 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTMxNDEz', 'Timestamp': '20240910131413', 'CheckoutRequestID': 'ws_CO_10092024161352067705289286'}"}
2024-09-10 13:14:14,236 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:14:14,947 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 13:14:14,949 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6226876', 'CheckoutRequestID': 'ws_CO_10092024161352067705289286', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024161352067705289286 899885"}
2024-09-10 13:14:15,082 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:14:15,291 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:14:15,292 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:14:15,823 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:15:09,755 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:15:09,956 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:15:09,958 - INFO - there is a test coming
2024-09-10 13:15:09,958 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 13:15:10,005 - INFO - {'updated_data': 'the data is now as 254725613093'}
2024-09-10 13:15:10,005 - INFO - the data is now as 254725613093
2024-09-10 13:15:10,025 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 13:15:10,025 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 13:15:10,026 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:15:10,695 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:15:10,697 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer GEpZAMFvRlL7nTiPVLGKiljTZ4Zs'}"}
2024-09-10 13:15:10,697 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTMxNTEw', 'Timestamp': '20240910131510', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '15000', 'PartyA': '254725613093', 'PartyB': 827142, 'PhoneNumber': '254725613093', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-36662', 'TransactionDesc': 'Some payment'}
2024-09-10 13:15:10,698 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:15:14,548 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 13:15:14,555 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170045634', 'CheckoutRequestID': 'ws_CO_10092024161511338725613093', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 13:18:16,901 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:18:17,047 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:18:17,047 - INFO - there is a test coming
2024-09-10 13:18:17,047 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 13:18:17,090 - INFO - {'updated_data': 'the data is now as 254725613093'}
2024-09-10 13:18:17,090 - INFO - the data is now as 254725613093
2024-09-10 13:18:17,106 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 13:18:17,106 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 13:18:17,107 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:18:17,770 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:18:17,772 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer hSXH86MnsL42UxPAGJpeDZGV3TeR'}"}
2024-09-10 13:18:17,773 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTMxODE3', 'Timestamp': '20240910131817', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254725613093', 'PartyB': 899885, 'PhoneNumber': '254725613093', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054117', 'TransactionDesc': 'Some payment'}
2024-09-10 13:18:17,774 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:18:18,601 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 13:18:18,609 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6239274', 'CheckoutRequestID': 'ws_CO_10092024161818322725613093', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 13:18:29,422 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:18:29,543 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:18:29,544 - INFO - {'updated': 'initiated stk query for ws_CO_10092024161818322725613093 899885 '}
2024-09-10 13:18:29,597 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:18:30,246 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:18:30,248 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 2K5w9FfmUSVF3GrKgZoFaqFC3oq5'}"}
2024-09-10 13:18:30,248 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTMxODI5', 'Timestamp': '20240910131829', 'CheckoutRequestID': 'ws_CO_10092024161818322725613093'}"}
2024-09-10 13:18:30,249 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:18:30,903 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 13:18:30,905 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024161818322725613093', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024161818322725613093 899885"}
2024-09-10 13:18:30,912 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 13:19:43,909 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16688971', 'CheckoutRequestID': 'ws_CO_10092024161935211719168491', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 9000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA94E44GR'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910161943}, {'Name': 'PhoneNumber', 'Value': 254719168491}]}}}}"}
2024-09-10 13:19:43,909 - INFO - {'updated_data': 'callback data began'}
2024-09-10 13:19:43,910 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16688971', 'CheckoutRequestID': 'ws_CO_10092024161935211719168491', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 9000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA94E44GR'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910161943}, {'Name': 'PhoneNumber', 'Value': 254719168491}]}}}}}
2024-09-10 13:19:44,137 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:19:44,340 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:19:44,341 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:19:44,573 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:19:46,196 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:19:46,215 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 13:19:46,215 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 13:19:55,554 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6243288', 'CheckoutRequestID': 'ws_CO_10092024161945278722987774', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA44E55GU'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910161954}, {'Name': 'PhoneNumber', 'Value': 254722987774}]}}}}"}
2024-09-10 13:19:55,554 - INFO - {'updated_data': 'callback data began'}
2024-09-10 13:19:55,554 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6243288', 'CheckoutRequestID': 'ws_CO_10092024161945278722987774', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA44E55GU'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910161954}, {'Name': 'PhoneNumber', 'Value': 254722987774}]}}}}}
2024-09-10 13:19:55,726 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:19:55,924 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:19:55,926 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:19:56,109 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:19:56,276 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:19:56,276 - INFO - {'updated': 'initiated stk query for ws_CO_10092024161934980713331561 827142 '}
2024-09-10 13:19:56,345 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:19:56,492 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:19:56,932 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:19:56,934 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer smMGLD6JlBiz9k6nXZMlHHV0EOhM'}"}
2024-09-10 13:19:56,935 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTMxOTU2', 'Timestamp': '20240910131956', 'CheckoutRequestID': 'ws_CO_10092024161934980713331561'}"}
2024-09-10 13:19:56,936 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:19:57,590 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 13:19:57,590 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596604344', 'CheckoutRequestID': 'ws_CO_10092024161934980713331561', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024161934980713331561 827142"}
2024-09-10 13:19:57,713 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:19:57,917 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:19:57,919 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:19:58,130 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:20:58,179 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793408903', 'CheckoutRequestID': 'ws_CO_10092024162050757700665344', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 900.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA04EAPOI'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910162057}, {'Name': 'PhoneNumber', 'Value': 254700665344}]}}}}"}
2024-09-10 13:20:58,179 - INFO - {'updated_data': 'callback data began'}
2024-09-10 13:20:58,179 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793408903', 'CheckoutRequestID': 'ws_CO_10092024162050757700665344', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 900.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA04EAPOI'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910162057}, {'Name': 'PhoneNumber', 'Value': 254700665344}]}}}}}
2024-09-10 13:20:58,350 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:20:58,864 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:20:58,866 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:20:59,098 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:21:01,147 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516694966', 'CheckoutRequestID': 'ws_CO_10092024162052264713331561', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA54EARHD'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910162100}, {'Name': 'PhoneNumber', 'Value': 254713331561}]}}}}"}
2024-09-10 13:21:01,148 - INFO - {'updated_data': 'callback data began'}
2024-09-10 13:21:01,148 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516694966', 'CheckoutRequestID': 'ws_CO_10092024162052264713331561', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA54EARHD'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910162100}, {'Name': 'PhoneNumber', 'Value': 254713331561}]}}}}}
2024-09-10 13:21:01,306 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:21:01,865 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:21:01,867 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:21:02,409 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:24:32,528 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516704637', 'CheckoutRequestID': 'ws_CO_10092024162419362722987774', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA74ESMDL'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910162431}, {'Name': 'PhoneNumber', 'Value': 254722987774}]}}}}"}
2024-09-10 13:24:32,528 - INFO - {'updated_data': 'callback data began'}
2024-09-10 13:24:32,528 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516704637', 'CheckoutRequestID': 'ws_CO_10092024162419362722987774', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA74ESMDL'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910162431}, {'Name': 'PhoneNumber', 'Value': 254722987774}]}}}}}
2024-09-10 13:24:32,739 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:24:33,244 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:24:33,245 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:24:33,759 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:24:43,932 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793412982', 'CheckoutRequestID': 'ws_CO_10092024162428036727099307', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 6000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA24ETW3A'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910162443}, {'Name': 'PhoneNumber', 'Value': 254727099307}]}}}}"}
2024-09-10 13:24:43,932 - INFO - {'updated_data': 'callback data began'}
2024-09-10 13:24:43,933 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793412982', 'CheckoutRequestID': 'ws_CO_10092024162428036727099307', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 6000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA24ETW3A'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910162443}, {'Name': 'PhoneNumber', 'Value': 254727099307}]}}}}}
2024-09-10 13:24:44,091 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:24:44,289 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:24:44,290 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:24:44,807 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:24:58,914 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:24:58,925 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 13:24:58,926 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 13:25:06,325 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:25:06,547 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:25:06,548 - INFO - there is a test coming
2024-09-10 13:25:06,548 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 13:25:06,593 - INFO - {'updated_data': 'the data is now as 254704012293'}
2024-09-10 13:25:06,593 - INFO - the data is now as 254704012293
2024-09-10 13:25:06,609 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 13:25:06,609 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 13:25:06,610 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:25:07,210 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:25:07,212 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ehakQBWhZ5qEN0Yc10LXf9K73xeT'}"}
2024-09-10 13:25:07,212 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTMyNTA3', 'Timestamp': '20240910132507', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254704012293', 'PartyB': 827142, 'PhoneNumber': '254704012293', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-154236', 'TransactionDesc': 'Some payment'}
2024-09-10 13:25:07,214 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:25:08,705 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 13:25:08,712 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585052668207', 'CheckoutRequestID': 'ws_CO_10092024162507878704012293', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 13:28:04,435 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:28:04,575 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:28:04,576 - INFO - {'updated': 'initiated stk query for ws_CO_10092024162723119725247626 827142 '}
2024-09-10 13:28:04,659 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:28:05,242 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:28:05,244 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer jhWdS1vqHGwQW59LGL6l30z4AleG'}"}
2024-09-10 13:28:05,245 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTMyODA0', 'Timestamp': '20240910132804', 'CheckoutRequestID': 'ws_CO_10092024162723119725247626'}"}
2024-09-10 13:28:05,246 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:28:05,978 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 13:28:05,979 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024162723119725247626', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024162723119725247626 827142"}
2024-09-10 13:28:05,981 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 13:28:48,516 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:28:48,646 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:28:48,646 - INFO - there is a test coming
2024-09-10 13:28:48,647 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 13:28:48,710 - INFO - {'updated_data': 'the data is now as 254710613973'}
2024-09-10 13:28:48,710 - INFO - the data is now as 254710613973
2024-09-10 13:28:48,726 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 13:28:48,726 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 13:28:48,727 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:28:49,312 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:28:49,314 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer gKW51329S1Gj2TkfsOn3XX3fjEvC'}"}
2024-09-10 13:28:49,315 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTMyODQ5', 'Timestamp': '20240910132849', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254710613973', 'PartyB': 827142, 'PhoneNumber': '254710613973', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-28037', 'TransactionDesc': 'Some payment'}
2024-09-10 13:28:49,316 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:28:49,999 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 13:28:50,006 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87731310', 'CheckoutRequestID': 'ws_CO_10092024162849820710613973', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 13:30:33,412 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:30:33,596 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:30:33,597 - INFO - there is a test coming
2024-09-10 13:30:33,597 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 13:30:33,646 - INFO - {'updated_data': 'the data is now as 254798691209'}
2024-09-10 13:30:33,646 - INFO - the data is now as 254798691209
2024-09-10 13:30:33,681 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 13:30:33,682 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 13:30:33,683 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:30:34,273 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:30:34,275 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer lXvDqdlmjG3vIpqhWjCHNLOo3usO'}"}
2024-09-10 13:30:34,276 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTMzMDM0', 'Timestamp': '20240910133034', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1500', 'PartyA': '254798691209', 'PartyB': 899885, 'PhoneNumber': '254798691209', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054119', 'TransactionDesc': 'Some payment'}
2024-09-10 13:30:34,277 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:30:35,100 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 13:30:35,110 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6274700', 'CheckoutRequestID': 'ws_CO_10092024163034798798691209', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 13:31:06,947 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:31:07,118 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:31:07,118 - INFO - {'updated': 'initiated stk query for ws_CO_10092024163034798798691209 899885 '}
2024-09-10 13:31:07,175 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:31:07,771 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:31:07,773 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer GcHfX5P1XVbJxcoIDwJIO7WDpKcG'}"}
2024-09-10 13:31:07,774 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTMzMTA3', 'Timestamp': '20240910133107', 'CheckoutRequestID': 'ws_CO_10092024163034798798691209'}"}
2024-09-10 13:31:07,775 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:31:08,417 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 13:31:08,419 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6274700', 'CheckoutRequestID': 'ws_CO_10092024163034798798691209', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024163034798798691209 899885"}
2024-09-10 13:31:08,608 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:31:09,016 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:31:09,017 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:31:09,566 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:35:05,839 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169832830', 'CheckoutRequestID': 'ws_CO_10092024163455136722469681', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-10 13:35:05,840 - INFO - {'updated_data': 'callback data began'}
2024-09-10 13:35:05,840 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169832830', 'CheckoutRequestID': 'ws_CO_10092024163455136722469681', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-10 13:35:06,041 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:35:06,566 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:35:06,567 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:35:06,816 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:35:10,507 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596648262', 'CheckoutRequestID': 'ws_CO_10092024163454730700321396', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA34GC94X'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910163509}, {'Name': 'PhoneNumber', 'Value': 254700321396}]}}}}"}
2024-09-10 13:35:10,507 - INFO - {'updated_data': 'callback data began'}
2024-09-10 13:35:10,507 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596648262', 'CheckoutRequestID': 'ws_CO_10092024163454730700321396', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA34GC94X'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910163509}, {'Name': 'PhoneNumber', 'Value': 254700321396}]}}}}}
2024-09-10 13:35:10,756 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:35:11,263 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:35:11,265 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:35:11,822 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:35:56,949 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:35:57,125 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:35:57,125 - INFO - {'updated': 'initiated stk query for ws_CO_10092024163454730700321396 827142 '}
2024-09-10 13:35:57,206 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:35:58,065 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:35:58,068 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 96ebDi4S6j4ArPd4lA4HsRgjz1EJ'}"}
2024-09-10 13:35:58,068 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTMzNTU3', 'Timestamp': '20240910133557', 'CheckoutRequestID': 'ws_CO_10092024163454730700321396'}"}
2024-09-10 13:35:58,070 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:35:58,722 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 13:35:58,722 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596648262', 'CheckoutRequestID': 'ws_CO_10092024163454730700321396', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024163454730700321396 827142"}
2024-09-10 13:35:58,848 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:35:59,044 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:35:59,045 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:35:59,602 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:36:53,788 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:36:53,963 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:36:53,964 - INFO - there is a test coming
2024-09-10 13:36:53,964 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 13:36:54,009 - INFO - {'updated_data': 'the data is now as 254740805073'}
2024-09-10 13:36:54,009 - INFO - the data is now as 254740805073
2024-09-10 13:36:54,027 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 13:36:54,027 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 13:36:54,029 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:36:54,637 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:36:54,639 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 27WHwRVzRh37xIv3IIODs77z7dgQ'}"}
2024-09-10 13:36:54,639 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTMzNjU0', 'Timestamp': '20240910133654', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '30000', 'PartyA': '254740805073', 'PartyB': 827142, 'PhoneNumber': '254740805073', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-51465', 'TransactionDesc': 'Some payment'}
2024-09-10 13:36:54,640 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:36:55,420 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 13:36:55,426 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170070985', 'CheckoutRequestID': 'ws_CO_10092024163655162740805073', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 13:37:01,012 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:37:01,175 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:37:01,175 - INFO - there is a test coming
2024-09-10 13:37:01,175 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 13:37:01,216 - INFO - {'updated_data': 'the data is now as 254700307039'}
2024-09-10 13:37:01,216 - INFO - the data is now as 254700307039
2024-09-10 13:37:01,231 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 13:37:01,231 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 13:37:01,232 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:37:01,824 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:37:01,826 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer TuWwxeRET8VjN08MOhM7EMgg5kq7'}"}
2024-09-10 13:37:01,827 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTMzNzAx', 'Timestamp': '20240910133701', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254700307039', 'PartyB': 827142, 'PhoneNumber': '254700307039', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '169-11027', 'TransactionDesc': 'Some payment'}
2024-09-10 13:37:01,828 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:37:02,665 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 13:37:02,671 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170071110', 'CheckoutRequestID': 'ws_CO_10092024163702438700307039', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 13:37:11,891 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6293294', 'CheckoutRequestID': 'ws_CO_10092024163703036721234634', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA64GMWF2'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910163710}, {'Name': 'PhoneNumber', 'Value': 254721234634}]}}}}"}
2024-09-10 13:37:11,891 - INFO - {'updated_data': 'callback data began'}
2024-09-10 13:37:11,892 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6293294', 'CheckoutRequestID': 'ws_CO_10092024163703036721234634', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA64GMWF2'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910163710}, {'Name': 'PhoneNumber', 'Value': 254721234634}]}}}}}
2024-09-10 13:37:12,142 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:37:12,340 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:37:12,341 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:37:12,580 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:37:57,456 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:37:57,741 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:37:57,742 - INFO - {'updated': 'initiated stk query for ws_CO_10092024163702438700307039 827142 '}
2024-09-10 13:37:57,823 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:37:58,494 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:37:58,496 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ryM84MHw78OxkPdkofXxgGvfMFB5'}"}
2024-09-10 13:37:58,497 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTMzNzU3', 'Timestamp': '20240910133757', 'CheckoutRequestID': 'ws_CO_10092024163702438700307039'}"}
2024-09-10 13:37:58,498 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:37:59,194 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 13:37:59,195 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170071110', 'CheckoutRequestID': 'ws_CO_10092024163702438700307039', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024163702438700307039 827142"}
2024-09-10 13:37:59,516 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:38:00,027 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:38:00,028 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:38:00,285 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:38:17,733 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:38:17,886 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:38:17,887 - INFO - {'updated': 'initiated stk query for ws_CO_10092024163655162740805073 827142 '}
2024-09-10 13:38:17,949 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:38:18,637 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:38:18,639 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Rtzbp7lC0hR4tpX6XSjdVTucrBJS'}"}
2024-09-10 13:38:18,640 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTMzODE3', 'Timestamp': '20240910133817', 'CheckoutRequestID': 'ws_CO_10092024163655162740805073'}"}
2024-09-10 13:38:18,641 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:38:19,378 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 369
2024-09-10 13:38:19,379 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170070985', 'CheckoutRequestID': 'ws_CO_10092024163655162740805073', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_10092024163655162740805073 827142"}
2024-09-10 13:38:19,559 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:38:19,772 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:38:19,774 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:38:20,358 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:39:29,401 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:39:29,576 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:39:29,576 - INFO - there is a test coming
2024-09-10 13:39:29,577 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 13:39:29,638 - INFO - {'updated_data': 'the data is now as 254721297288'}
2024-09-10 13:39:29,639 - INFO - the data is now as 254721297288
2024-09-10 13:39:29,654 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 13:39:29,654 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 13:39:29,655 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:39:30,387 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:39:30,393 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 8xcOo8uU9F7dDRXPockz7vYITBIr'}"}
2024-09-10 13:39:30,394 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTMzOTMw', 'Timestamp': '20240910133930', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '500', 'PartyA': '254721297288', 'PartyB': 899885, 'PhoneNumber': '254721297288', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054071', 'TransactionDesc': 'Some payment'}
2024-09-10 13:39:30,402 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:39:32,008 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 13:39:32,014 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208793430487', 'CheckoutRequestID': 'ws_CO_10092024163930934721297288', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 13:41:38,109 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87745727', 'CheckoutRequestID': 'ws_CO_10092024164126481796603518', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA34HA6O7'}, {'Name': 'TransactionDate', 'Value': 20240910164137}, {'Name': 'PhoneNumber', 'Value': 254796603518}]}}}}"}
2024-09-10 13:41:38,109 - INFO - {'updated_data': 'callback data began'}
2024-09-10 13:41:38,109 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87745727', 'CheckoutRequestID': 'ws_CO_10092024164126481796603518', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA34HA6O7'}, {'Name': 'TransactionDate', 'Value': 20240910164137}, {'Name': 'PhoneNumber', 'Value': 254796603518}]}}}}}
2024-09-10 13:41:38,351 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:41:38,879 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:41:38,880 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:41:39,142 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:43:22,364 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:43:22,529 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:43:22,529 - INFO - {'updated': 'initiated stk query for ws_CO_10092024164247973112832870 827142 '}
2024-09-10 13:43:22,591 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:43:23,193 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:43:23,195 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer hvf5lgICWjAol1iitGT21kfSD3BG'}"}
2024-09-10 13:43:23,195 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTM0MzIy', 'Timestamp': '20240910134322', 'CheckoutRequestID': 'ws_CO_10092024164247973112832870'}"}
2024-09-10 13:43:23,196 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:43:23,822 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 13:43:23,822 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87747213', 'CheckoutRequestID': 'ws_CO_10092024164247973112832870', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024164247973112832870 827142"}
2024-09-10 13:43:24,010 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:43:24,225 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:43:24,226 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:43:24,746 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:45:53,793 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16763853', 'CheckoutRequestID': 'ws_CO_10092024164544568728313960', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 23000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA64HXEOO'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910164553}, {'Name': 'PhoneNumber', 'Value': 254728313960}]}}}}"}
2024-09-10 13:45:53,794 - INFO - {'updated_data': 'callback data began'}
2024-09-10 13:45:53,794 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16763853', 'CheckoutRequestID': 'ws_CO_10092024164544568728313960', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 23000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA64HXEOO'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910164553}, {'Name': 'PhoneNumber', 'Value': 254728313960}]}}}}}
2024-09-10 13:45:53,981 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:45:54,176 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:45:54,178 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:45:54,407 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:48:44,112 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db16779984', 'CheckoutRequestID': 'ws_CO_10092024164834491796534533', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA64ICLY2'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910164843}, {'Name': 'PhoneNumber', 'Value': 254796534533}]}}}}"}
2024-09-10 13:48:44,113 - INFO - {'updated_data': 'callback data began'}
2024-09-10 13:48:44,113 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db16779984', 'CheckoutRequestID': 'ws_CO_10092024164834491796534533', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA64ICLY2'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910164843}, {'Name': 'PhoneNumber', 'Value': 254796534533}]}}}}}
2024-09-10 13:48:44,302 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:48:44,722 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:48:44,724 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:48:44,952 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:50:53,105 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:50:53,251 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:50:53,252 - INFO - there is a test coming
2024-09-10 13:50:53,252 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 13:50:53,306 - INFO - {'updated_data': 'the data is now as 254713733206'}
2024-09-10 13:50:53,307 - INFO - the data is now as 254713733206
2024-09-10 13:50:53,326 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 13:50:53,326 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 13:50:53,327 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:50:54,011 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:50:54,013 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer j5UFmsOGT8wEzajQGUPJHFeqGLbr'}"}
2024-09-10 13:50:54,013 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTM1MDU0', 'Timestamp': '20240910135054', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '50000', 'PartyA': '254713733206', 'PartyB': 899885, 'PhoneNumber': '254713733206', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054031', 'TransactionDesc': 'Some payment'}
2024-09-10 13:50:54,015 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:50:54,941 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 13:50:54,948 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075763162', 'CheckoutRequestID': 'ws_CO_10092024165054636713733206', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 13:51:01,780 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:51:01,956 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:51:01,957 - INFO - {'updated': 'initiated stk query for ws_CO_10092024165048187722950764 899885 '}
2024-09-10 13:51:02,028 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:51:02,610 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:51:02,612 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer fLb28KCc6IClVqVS9jUUkLtyEhP6'}"}
2024-09-10 13:51:02,613 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTM1MTAy', 'Timestamp': '20240910135102', 'CheckoutRequestID': 'ws_CO_10092024165048187722950764'}"}
2024-09-10 13:51:02,614 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:51:03,362 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 13:51:03,362 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6332446', 'CheckoutRequestID': 'ws_CO_10092024165048187722950764', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024165048187722950764 899885"}
2024-09-10 13:51:03,512 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:51:03,729 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:51:03,730 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:51:03,954 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:54:16,951 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:54:17,294 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:54:17,295 - INFO - {'updated': 'initiated stk query for ws_CO_10092024165405469710628105 827142 '}
2024-09-10 13:54:17,363 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:54:18,031 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:54:18,034 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer qjjrXVm9zMBRlkywtw9uBaru59R1'}"}
2024-09-10 13:54:18,034 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTM1NDE3', 'Timestamp': '20240910135417', 'CheckoutRequestID': 'ws_CO_10092024165405469710628105'}"}
2024-09-10 13:54:18,036 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:54:18,744 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 13:54:18,745 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024165405469710628105', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024165405469710628105 827142"}
2024-09-10 13:54:18,747 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 13:56:48,476 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:56:48,651 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:56:48,652 - INFO - {'updated': 'initiated stk query for ws_CO_10092024165634312716213672 827142 '}
2024-09-10 13:57:01,440 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:57:02,030 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:57:02,032 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer eW6XdoX4o9lFT0VUAGlQ8We1vuuz'}"}
2024-09-10 13:57:02,033 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTM1NzAx', 'Timestamp': '20240910135701', 'CheckoutRequestID': 'ws_CO_10092024165634312716213672'}"}
2024-09-10 13:57:02,034 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:57:02,657 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 13:57:02,658 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16795207', 'CheckoutRequestID': 'ws_CO_10092024165634312716213672', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024165634312716213672 827142"}
2024-09-10 13:57:02,789 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:57:02,978 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:57:02,980 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:57:03,203 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 13:58:11,336 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 13:58:11,501 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 13:58:11,502 - INFO - {'updated': 'initiated stk query for ws_CO_10092024165758559715298200 827142 '}
2024-09-10 13:58:11,572 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:58:12,135 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 13:58:12,137 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ocEV643jJhQjZAGPb7tOjdoiddyX'}"}
2024-09-10 13:58:12,138 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTM1ODEx', 'Timestamp': '20240910135811', 'CheckoutRequestID': 'ws_CO_10092024165758559715298200'}"}
2024-09-10 13:58:12,139 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 13:58:12,859 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 13:58:12,859 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169859525', 'CheckoutRequestID': 'ws_CO_10092024165758559715298200', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024165758559715298200 827142"}
2024-09-10 13:58:12,986 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 13:58:13,225 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 13:58:13,226 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 13:58:13,478 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 14:20:35,991 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6417235', 'CheckoutRequestID': 'ws_CO_10092024172025433728389595', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3247.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA14NAPW7'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910172035}, {'Name': 'PhoneNumber', 'Value': 254728389595}]}}}}"}
2024-09-10 14:20:35,991 - INFO - {'updated_data': 'callback data began'}
2024-09-10 14:20:35,991 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6417235', 'CheckoutRequestID': 'ws_CO_10092024172025433728389595', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3247.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA14NAPW7'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910172035}, {'Name': 'PhoneNumber', 'Value': 254728389595}]}}}}}
2024-09-10 14:20:36,180 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:20:36,387 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:20:36,391 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:20:36,553 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:20:36,797 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:20:36,797 - INFO - {'updated': 'initiated stk query for ws_CO_10092024172025433728389595 827142 '}
2024-09-10 14:20:36,857 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:20:36,950 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 14:20:37,483 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:20:37,486 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 8WuGHwv41ivfL7161V0KWjwwlqSp'}"}
2024-09-10 14:20:37,486 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTQyMDM2', 'Timestamp': '20240910142036', 'CheckoutRequestID': 'ws_CO_10092024172025433728389595'}"}
2024-09-10 14:20:37,487 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:20:38,152 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 14:20:38,153 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6417235', 'CheckoutRequestID': 'ws_CO_10092024172025433728389595', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024172025433728389595 827142"}
2024-09-10 14:20:38,349 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:20:38,629 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:20:38,631 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:20:38,896 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 14:20:58,981 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:20:59,128 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:20:59,129 - INFO - {'updated': 'initiated stk query for ws_CO_10092024172044839795453949 827142 '}
2024-09-10 14:20:59,264 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:20:59,872 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:20:59,874 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer LOY2HJwKOTCSGPAlIcIZSduaeG3n'}"}
2024-09-10 14:20:59,875 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTQyMDU5', 'Timestamp': '20240910142059', 'CheckoutRequestID': 'ws_CO_10092024172044839795453949'}"}
2024-09-10 14:20:59,876 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:21:00,546 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 14:21:00,547 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169886664', 'CheckoutRequestID': 'ws_CO_10092024172044839795453949', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024172044839795453949 827142"}
2024-09-10 14:21:00,699 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:21:01,241 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:21:01,242 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:21:01,494 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 14:25:39,919 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793485149', 'CheckoutRequestID': 'ws_CO_10092024172530164721960132', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA74O4W03'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910172539}, {'Name': 'PhoneNumber', 'Value': 254721960132}]}}}}"}
2024-09-10 14:25:39,920 - INFO - {'updated_data': 'callback data began'}
2024-09-10 14:25:39,920 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793485149', 'CheckoutRequestID': 'ws_CO_10092024172530164721960132', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA74O4W03'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910172539}, {'Name': 'PhoneNumber', 'Value': 254721960132}]}}}}}
2024-09-10 14:25:40,123 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:25:40,548 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:25:40,550 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:25:40,842 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 14:30:53,253 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:30:53,435 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:30:53,436 - INFO - {'updated': 'initiated stk query for ws_CO_10092024173041985721441160 899885 '}
2024-09-10 14:30:53,517 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:30:54,263 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:30:54,265 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer SeSrOspVT4aH0Aake4bgiQtEYKXa'}"}
2024-09-10 14:30:54,265 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTQzMDUz', 'Timestamp': '20240910143053', 'CheckoutRequestID': 'ws_CO_10092024173041985721441160'}"}
2024-09-10 14:30:54,267 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:30:54,953 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 14:30:54,954 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024173041985721441160', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024173041985721441160 899885"}
2024-09-10 14:30:54,956 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 14:33:58,689 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596815862', 'CheckoutRequestID': 'ws_CO_10092024173350235722854179', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA84PJFMS'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910173357}, {'Name': 'PhoneNumber', 'Value': 254722854179}]}}}}"}
2024-09-10 14:33:58,690 - INFO - {'updated_data': 'callback data began'}
2024-09-10 14:33:58,690 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596815862', 'CheckoutRequestID': 'ws_CO_10092024173350235722854179', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA84PJFMS'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910173357}, {'Name': 'PhoneNumber', 'Value': 254722854179}]}}}}}
2024-09-10 14:33:58,870 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:33:59,144 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:33:59,145 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:33:59,776 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 14:34:02,539 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:34:02,690 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:34:02,691 - INFO - {'updated': 'initiated stk query for ws_CO_10092024173350235722854179 827142 '}
2024-09-10 14:34:02,754 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:34:03,428 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:34:03,431 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer kvlEcEXUl1nALcWSYxb4QcUMvEIM'}"}
2024-09-10 14:34:03,433 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTQzNDAy', 'Timestamp': '20240910143402', 'CheckoutRequestID': 'ws_CO_10092024173350235722854179'}"}
2024-09-10 14:34:03,438 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:34:04,108 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 14:34:04,108 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596815862', 'CheckoutRequestID': 'ws_CO_10092024173350235722854179', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024173350235722854179 827142"}
2024-09-10 14:34:04,231 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:34:04,515 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:34:04,517 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:34:04,781 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 14:36:03,164 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516908931', 'CheckoutRequestID': 'ws_CO_10092024173545296721329207', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA14PWGGX'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910173602}, {'Name': 'PhoneNumber', 'Value': 254721329207}]}}}}"}
2024-09-10 14:36:03,165 - INFO - {'updated_data': 'callback data began'}
2024-09-10 14:36:03,165 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b516908931', 'CheckoutRequestID': 'ws_CO_10092024173545296721329207', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA14PWGGX'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910173602}, {'Name': 'PhoneNumber', 'Value': 254721329207}]}}}}}
2024-09-10 14:36:03,359 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:36:04,063 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:36:04,065 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:36:04,335 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 14:38:11,620 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585052876022', 'CheckoutRequestID': 'ws_CO_10092024173809752743889743', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-10 14:38:11,620 - INFO - {'updated_data': 'callback data began'}
2024-09-10 14:38:11,620 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585052876022', 'CheckoutRequestID': 'ws_CO_10092024173809752743889743', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-10 14:38:11,790 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:38:12,328 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:38:12,330 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:38:12,590 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 14:38:21,005 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:38:21,125 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:38:21,125 - INFO - {'updated': 'initiated stk query for ws_CO_10092024173809752743889743 827142 '}
2024-09-10 14:38:21,183 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:38:22,002 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:38:22,004 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer NGaiBiPZQaAWp1D04u4xSyjGGdSn'}"}
2024-09-10 14:38:22,004 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTQzODIx', 'Timestamp': '20240910143821', 'CheckoutRequestID': 'ws_CO_10092024173809752743889743'}"}
2024-09-10 14:38:22,005 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:38:22,633 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 375
2024-09-10 14:38:22,634 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585052876022', 'CheckoutRequestID': 'ws_CO_10092024173809752743889743', 'ResultCode': '1037', 'ResultDesc': 'DS timeout user cannot be reached'} for ws_CO_10092024173809752743889743 827142"}
2024-09-10 14:38:22,790 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:38:23,284 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:38:23,285 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:38:23,504 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 14:41:16,993 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:41:17,138 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:41:17,139 - INFO - {'updated': 'initiated stk query for ws_CO_10092024174105803722893671 899885 '}
2024-09-10 14:41:17,208 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:41:17,914 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:41:17,916 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer CuIUSZ0K0m49dAH94VqQ54YnQ3CD'}"}
2024-09-10 14:41:17,916 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTQ0MTE3', 'Timestamp': '20240910144117', 'CheckoutRequestID': 'ws_CO_10092024174105803722893671'}"}
2024-09-10 14:41:17,918 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:41:18,665 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 14:41:18,665 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024174105803722893671', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024174105803722893671 899885"}
2024-09-10 14:41:18,668 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 14:41:37,960 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170147819', 'CheckoutRequestID': 'ws_CO_10092024174131624113542793', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-10 14:41:37,960 - INFO - {'updated_data': 'callback data began'}
2024-09-10 14:41:37,960 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170147819', 'CheckoutRequestID': 'ws_CO_10092024174131624113542793', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-10 14:41:38,183 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:41:38,456 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:41:38,468 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:41:39,118 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 14:42:07,264 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:42:07,409 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:42:07,410 - INFO - there is a test coming
2024-09-10 14:42:07,410 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 14:42:07,454 - INFO - {'updated_data': 'the data is now as 254722883547'}
2024-09-10 14:42:07,455 - INFO - the data is now as 254722883547
2024-09-10 14:42:07,470 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 14:42:07,470 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 14:42:07,471 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:42:08,197 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:42:08,199 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer EqTsTOPYnRuSe3LfpbX1m8okwMhY'}"}
2024-09-10 14:42:08,200 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTQ0MjA4', 'Timestamp': '20240910144208', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254722883547', 'PartyB': 827142, 'PhoneNumber': '254722883547', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-11574', 'TransactionDesc': 'Some payment'}
2024-09-10 14:42:08,201 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:42:09,149 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 14:42:09,155 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596839994', 'CheckoutRequestID': 'ws_CO_10092024174208918722883547', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 14:42:25,878 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596839994', 'CheckoutRequestID': 'ws_CO_10092024174208918722883547', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA34R08MH'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910174225}, {'Name': 'PhoneNumber', 'Value': 254722883547}]}}}}"}
2024-09-10 14:42:25,878 - INFO - {'updated_data': 'callback data began'}
2024-09-10 14:42:25,878 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596839994', 'CheckoutRequestID': 'ws_CO_10092024174208918722883547', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA34R08MH'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910174225}, {'Name': 'PhoneNumber', 'Value': 254722883547}]}}}}}
2024-09-10 14:42:26,096 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:42:26,341 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:42:26,342 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:42:26,934 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 14:42:30,319 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:42:30,475 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:42:30,476 - INFO - {'updated': 'initiated stk query for ws_CO_10092024174208918722883547 827142 '}
2024-09-10 14:42:30,545 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:42:31,268 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:42:31,270 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer uaIBA49wLUBBk7iKcLgDYZpD3RW2'}"}
2024-09-10 14:42:31,271 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTQ0MjMw', 'Timestamp': '20240910144230', 'CheckoutRequestID': 'ws_CO_10092024174208918722883547'}"}
2024-09-10 14:42:31,272 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:42:32,138 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 14:42:32,139 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee596839994', 'CheckoutRequestID': 'ws_CO_10092024174208918722883547', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024174208918722883547 827142"}
2024-09-10 14:42:32,316 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:42:32,626 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:42:32,627 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:42:32,962 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 14:42:36,165 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:42:36,333 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:42:36,333 - INFO - {'updated': 'initiated stk query for ws_CO_10092024174205019715393178 899885 '}
2024-09-10 14:42:36,406 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:42:37,240 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:42:37,242 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 3jEAwW6PkqymGSUQBI0sgHpo0F4W'}"}
2024-09-10 14:42:37,242 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTQ0MjM2', 'Timestamp': '20240910144236', 'CheckoutRequestID': 'ws_CO_10092024174205019715393178'}"}
2024-09-10 14:42:37,244 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:42:38,118 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 14:42:38,118 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170148480', 'CheckoutRequestID': 'ws_CO_10092024174205019715393178', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024174205019715393178 899885"}
2024-09-10 14:42:38,287 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:42:38,612 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:42:38,613 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:42:38,985 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 14:43:04,108 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:43:04,283 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:43:04,284 - INFO - there is a test coming
2024-09-10 14:43:04,284 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 14:43:04,335 - INFO - {'updated_data': 'the data is now as 254723139891'}
2024-09-10 14:43:04,335 - INFO - the data is now as 254723139891
2024-09-10 14:43:04,363 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 14:43:04,363 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 14:43:04,365 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:43:05,095 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:43:05,097 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer D6f8wjjsbHA87wh9gJjNCH1n9SQV'}"}
2024-09-10 14:43:05,108 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTQ0MzA1', 'Timestamp': '20240910144305', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5700', 'PartyA': '254723139891', 'PartyB': 827142, 'PhoneNumber': '254723139891', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-130871', 'TransactionDesc': 'Some payment'}
2024-09-10 14:43:05,113 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:43:06,091 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 14:43:06,097 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208793506703', 'CheckoutRequestID': 'ws_CO_10092024174305840723139891', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 14:43:21,822 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793506703', 'CheckoutRequestID': 'ws_CO_10092024174305840723139891', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-10 14:43:21,823 - INFO - {'updated_data': 'callback data began'}
2024-09-10 14:43:21,823 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793506703', 'CheckoutRequestID': 'ws_CO_10092024174305840723139891', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-10 14:43:22,009 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:43:22,626 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:43:22,628 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:43:22,987 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 14:43:23,508 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:43:23,679 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:43:23,679 - INFO - there is a test coming
2024-09-10 14:43:23,680 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 14:43:23,746 - INFO - {'updated_data': 'the data is now as 254748830649'}
2024-09-10 14:43:23,746 - INFO - the data is now as 254748830649
2024-09-10 14:43:23,763 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 14:43:23,763 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 14:43:23,764 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:43:24,557 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:43:24,559 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer mwGTQRVoPqUAkF2Ffy2laDy4h5j6'}"}
2024-09-10 14:43:24,559 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTQ0MzI0', 'Timestamp': '20240910144324', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '40000', 'PartyA': '254748830649', 'PartyB': 899885, 'PhoneNumber': '254748830649', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0625469-1725979402746', 'TransactionDesc': 'Some payment'}
2024-09-10 14:43:24,560 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:43:25,608 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 14:43:25,613 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075826103', 'CheckoutRequestID': 'ws_CO_10092024174325311748830649', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 14:46:23,084 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:46:23,224 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:46:23,225 - INFO - there is a test coming
2024-09-10 14:46:23,225 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 14:46:23,270 - INFO - {'updated_data': 'the data is now as 254704519969'}
2024-09-10 14:46:23,271 - INFO - the data is now as 254704519969
2024-09-10 14:46:23,286 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 14:46:23,287 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 14:46:23,288 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:46:24,107 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:46:24,109 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer cQ9Veyje4S5crSIjVfSl4fCGXetj'}"}
2024-09-10 14:46:24,109 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTQ0NjI0', 'Timestamp': '20240910144624', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '16499', 'PartyA': '254704519969', 'PartyB': 827142, 'PhoneNumber': '254704519969', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '139-5048', 'TransactionDesc': 'Some payment'}
2024-09-10 14:46:24,110 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:46:24,967 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 14:46:24,973 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169918243', 'CheckoutRequestID': 'ws_CO_10092024174624785704519969', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 14:46:33,984 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169918243', 'CheckoutRequestID': 'ws_CO_10092024174624785704519969', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 16499.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA04RQCY2'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910174631}, {'Name': 'PhoneNumber', 'Value': 254704519969}]}}}}"}
2024-09-10 14:46:33,985 - INFO - {'updated_data': 'callback data began'}
2024-09-10 14:46:33,985 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e169918243', 'CheckoutRequestID': 'ws_CO_10092024174624785704519969', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 16499.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA04RQCY2'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910174631}, {'Name': 'PhoneNumber', 'Value': 254704519969}]}}}}}
2024-09-10 14:46:34,139 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:46:34,716 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:46:34,717 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:46:34,862 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 14:46:35,030 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 14:46:35,031 - INFO - {'updated': 'initiated stk query for ws_CO_10092024174623482722893671 899885 '}
2024-09-10 14:46:35,044 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 14:46:35,147 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:46:35,868 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 14:46:35,870 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer HAbFIoP0jYLeeSb2k5FdAA8EdFFT'}"}
2024-09-10 14:46:35,870 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTQ0NjM1', 'Timestamp': '20240910144635', 'CheckoutRequestID': 'ws_CO_10092024174623482722893671'}"}
2024-09-10 14:46:35,871 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 14:46:36,612 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 14:46:36,612 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc16937464', 'CheckoutRequestID': 'ws_CO_10092024174623482722893671', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024174623482722893671 899885"}
2024-09-10 14:46:36,747 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 14:46:37,432 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 14:46:37,433 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 14:46:38,074 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:06:48,509 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87848381', 'CheckoutRequestID': 'ws_CO_10092024180639254701387844', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA54VEH8L'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910180647}, {'Name': 'PhoneNumber', 'Value': 254701387844}]}}}}"}
2024-09-10 15:06:48,509 - INFO - {'updated_data': 'callback data began'}
2024-09-10 15:06:48,510 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87848381', 'CheckoutRequestID': 'ws_CO_10092024180639254701387844', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA54VEH8L'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910180647}, {'Name': 'PhoneNumber', 'Value': 254701387844}]}}}}}
2024-09-10 15:06:48,786 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:06:49,274 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:06:49,275 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:06:49,619 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:06:50,403 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:06:50,572 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:06:50,572 - INFO - {'updated': 'initiated stk query for ws_CO_10092024180639254701387844 899885 '}
2024-09-10 15:06:50,629 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:06:51,396 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:06:51,398 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer X8dSho9THOhtJGOK0eo09GQoWRfT'}"}
2024-09-10 15:06:51,398 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTUwNjUw', 'Timestamp': '20240910150650', 'CheckoutRequestID': 'ws_CO_10092024180639254701387844'}"}
2024-09-10 15:06:51,400 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:06:52,213 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 15:06:52,214 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87848381', 'CheckoutRequestID': 'ws_CO_10092024180639254701387844', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024180639254701387844 899885"}
2024-09-10 15:06:52,352 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:06:52,642 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:06:52,644 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:06:53,299 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:08:42,283 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:08:42,459 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:08:42,460 - INFO - there is a test coming
2024-09-10 15:08:42,460 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 15:08:42,513 - INFO - {'updated_data': 'the data is now as 254705976423'}
2024-09-10 15:08:42,513 - INFO - the data is now as 254705976423
2024-09-10 15:08:42,529 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 15:08:42,529 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 15:08:42,530 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:08:43,344 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:08:43,346 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer NKeuN0z0ZYtCTUJ9m07NqqFFpS1s'}"}
2024-09-10 15:08:43,346 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTUwODQz', 'Timestamp': '20240910150843', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254705976423', 'PartyB': 827142, 'PhoneNumber': '254705976423', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-18524', 'TransactionDesc': 'Some payment'}
2024-09-10 15:08:43,348 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:08:44,159 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 15:08:44,165 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585052966278', 'CheckoutRequestID': 'ws_CO_10092024180843937705976423', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 15:09:05,128 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:09:05,303 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:09:05,304 - INFO - {'updated': 'initiated stk query for ws_CO_10092024180843937705976423 827142 '}
2024-09-10 15:09:05,367 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:09:06,193 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:09:06,195 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 1aqvbmMbaUiyhVAW11QHubLvqNG5'}"}
2024-09-10 15:09:06,196 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTUwOTA1', 'Timestamp': '20240910150905', 'CheckoutRequestID': 'ws_CO_10092024180843937705976423'}"}
2024-09-10 15:09:06,197 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:09:06,986 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 15:09:06,987 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585052966278', 'CheckoutRequestID': 'ws_CO_10092024180843937705976423', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024180843937705976423 827142"}
2024-09-10 15:09:07,113 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:09:07,385 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:09:07,386 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:09:07,725 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:12:25,249 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6568914', 'CheckoutRequestID': 'ws_CO_10092024181214513768384261', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA34WG3SF'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910181224}, {'Name': 'PhoneNumber', 'Value': 254768384261}]}}}}"}
2024-09-10 15:12:25,249 - INFO - {'updated_data': 'callback data began'}
2024-09-10 15:12:25,249 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6568914', 'CheckoutRequestID': 'ws_CO_10092024181214513768384261', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA34WG3SF'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910181224}, {'Name': 'PhoneNumber', 'Value': 254768384261}]}}}}}
2024-09-10 15:12:25,449 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:12:25,906 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:12:25,907 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:12:26,509 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:18:22,541 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:18:22,664 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:18:22,665 - INFO - {'updated': 'initiated stk query for ws_CO_10092024181811377721555435 899885 '}
2024-09-10 15:18:22,741 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:18:23,482 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:18:23,484 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 9VMK5IqflGPaAHjsE25GznGXGAj4'}"}
2024-09-10 15:18:23,485 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTUxODIy', 'Timestamp': '20240910151822', 'CheckoutRequestID': 'ws_CO_10092024181811377721555435'}"}
2024-09-10 15:18:23,487 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:18:24,316 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 15:18:24,316 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024181811377721555435', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024181811377721555435 899885"}
2024-09-10 15:18:24,318 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 15:18:50,216 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:18:50,381 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:18:50,381 - INFO - {'updated': 'initiated stk query for ws_CO_10092024181838847725749804 827142 '}
2024-09-10 15:18:50,437 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:18:51,159 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:18:51,161 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 1wupHJTYEVGvgWbGdikh87inHK0y'}"}
2024-09-10 15:18:51,161 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTUxODUw', 'Timestamp': '20240910151850', 'CheckoutRequestID': 'ws_CO_10092024181838847725749804'}"}
2024-09-10 15:18:51,163 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:18:52,007 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 15:18:52,008 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024181838847725749804', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024181838847725749804 827142"}
2024-09-10 15:18:52,010 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 15:31:09,704 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db17080282', 'CheckoutRequestID': 'ws_CO_10092024183054620700418091', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 800.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA450479E'}, {'Name': 'TransactionDate', 'Value': 20240910183109}, {'Name': 'PhoneNumber', 'Value': 254700418091}]}}}}"}
2024-09-10 15:31:09,705 - INFO - {'updated_data': 'callback data began'}
2024-09-10 15:31:09,705 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db17080282', 'CheckoutRequestID': 'ws_CO_10092024183054620700418091', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 800.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA450479E'}, {'Name': 'TransactionDate', 'Value': 20240910183109}, {'Name': 'PhoneNumber', 'Value': 254700418091}]}}}}}
2024-09-10 15:31:09,892 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:31:10,187 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:31:10,188 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:31:10,566 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:31:17,041 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db17081061', 'CheckoutRequestID': 'ws_CO_10092024183109756725347312', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}"}
2024-09-10 15:31:17,041 - INFO - {'updated_data': 'callback data began'}
2024-09-10 15:31:17,041 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db17081061', 'CheckoutRequestID': 'ws_CO_10092024183109756725347312', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}}
2024-09-10 15:31:17,306 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:31:17,644 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:31:17,646 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:31:18,021 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:31:20,403 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:31:20,543 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:31:20,544 - INFO - there is a test coming
2024-09-10 15:31:20,544 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 15:31:20,630 - INFO - {'updated_data': 'the data is now as 254701054980'}
2024-09-10 15:31:20,630 - INFO - the data is now as 254701054980
2024-09-10 15:31:20,652 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 15:31:20,653 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 15:31:20,654 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:31:21,394 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:31:21,396 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer nYH9yiANQpf2Jrihksx8TfSlKLLN'}"}
2024-09-10 15:31:21,397 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTUzMTIx', 'Timestamp': '20240910153121', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254701054980', 'PartyB': 899885, 'PhoneNumber': '254701054980', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA008838CP-1725982279411', 'TransactionDesc': 'Some payment'}
2024-09-10 15:31:21,398 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:31:22,432 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 15:31:22,446 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170696224', 'CheckoutRequestID': 'ws_CO_10092024183122182701054980', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 15:35:50,090 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee597002207', 'CheckoutRequestID': 'ws_CO_10092024183540906700418091', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-10 15:35:50,090 - INFO - {'updated_data': 'callback data began'}
2024-09-10 15:35:50,091 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee597002207', 'CheckoutRequestID': 'ws_CO_10092024183540906700418091', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-10 15:35:50,313 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:35:50,797 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:35:50,798 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:35:51,126 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:36:11,744 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793573227', 'CheckoutRequestID': 'ws_CO_10092024183605265700418091', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-10 15:36:11,744 - INFO - {'updated_data': 'callback data began'}
2024-09-10 15:36:11,744 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793573227', 'CheckoutRequestID': 'ws_CO_10092024183605265700418091', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-10 15:36:11,907 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:36:12,176 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:36:12,177 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:36:12,523 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:36:38,696 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:36:38,715 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 15:36:38,716 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 15:36:59,677 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:36:59,869 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:36:59,869 - INFO - {'updated': 'initiated stk query for ws_CO_10092024183648115727217894 827142 '}
2024-09-10 15:36:59,940 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:37:00,707 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:37:00,709 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer DGBIbX9DFY5CTEDYB90gNhPWwaqB'}"}
2024-09-10 15:37:00,713 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTUzNjU5', 'Timestamp': '20240910153659', 'CheckoutRequestID': 'ws_CO_10092024183648115727217894'}"}
2024-09-10 15:37:00,714 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:37:01,591 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-10 15:37:01,592 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc17091922', 'CheckoutRequestID': 'ws_CO_10092024183648115727217894', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_10092024183648115727217894 827142"}
2024-09-10 15:37:01,762 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:37:02,365 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:37:02,366 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:37:02,729 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:39:43,076 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:39:43,289 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:39:43,290 - INFO - there is a test coming
2024-09-10 15:39:43,291 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 15:39:43,338 - INFO - {'updated_data': 'the data is now as 254710888868'}
2024-09-10 15:39:43,338 - INFO - the data is now as 254710888868
2024-09-10 15:39:43,354 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 15:39:43,354 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 15:39:43,355 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:39:44,219 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:39:44,224 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 3br0Yh0ZLJMfNktAFT2G5AcelSyD'}"}
2024-09-10 15:39:44,224 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTUzOTQ0', 'Timestamp': '20240910153944', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '200', 'PartyA': '254710888868', 'PartyB': 827142, 'PhoneNumber': '254710888868', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-39704', 'TransactionDesc': 'Some payment'}
2024-09-10 15:39:44,228 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:39:45,316 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 15:39:45,322 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075897028', 'CheckoutRequestID': 'ws_CO_10092024183945041710888868', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 15:39:57,786 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075897028', 'CheckoutRequestID': 'ws_CO_10092024183945041710888868', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA651X1BU'}, {'Name': 'TransactionDate', 'Value': 20240910183957}, {'Name': 'PhoneNumber', 'Value': 254710888868}]}}}}"}
2024-09-10 15:39:57,787 - INFO - {'updated_data': 'callback data began'}
2024-09-10 15:39:57,787 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075897028', 'CheckoutRequestID': 'ws_CO_10092024183945041710888868', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA651X1BU'}, {'Name': 'TransactionDate', 'Value': 20240910183957}, {'Name': 'PhoneNumber', 'Value': 254710888868}]}}}}}
2024-09-10 15:39:57,943 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:39:58,255 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:39:58,256 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:39:59,321 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:40:48,141 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170222007', 'CheckoutRequestID': 'ws_CO_10092024184046311733743780', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}"}
2024-09-10 15:40:48,141 - INFO - {'updated_data': 'callback data began'}
2024-09-10 15:40:48,141 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170222007', 'CheckoutRequestID': 'ws_CO_10092024184046311733743780', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}}
2024-09-10 15:40:48,313 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:40:48,888 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:40:48,889 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:40:49,238 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:40:58,758 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:40:58,920 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:40:58,921 - INFO - {'updated': 'initiated stk query for ws_CO_10092024184046311733743780 827142 '}
2024-09-10 15:40:58,989 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:40:59,699 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:40:59,701 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer BySrJCcLbjUncjy5xEAB196gax3o'}"}
2024-09-10 15:40:59,701 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTU0MDU4', 'Timestamp': '20240910154058', 'CheckoutRequestID': 'ws_CO_10092024184046311733743780'}"}
2024-09-10 15:40:59,702 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:41:00,510 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 381
2024-09-10 15:41:00,510 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170222007', 'CheckoutRequestID': 'ws_CO_10092024184046311733743780', 'ResultCode': '2001', 'ResultDesc': 'The initiator information is invalid.'} for ws_CO_10092024184046311733743780 827142"}
2024-09-10 15:41:00,657 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:41:01,150 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:41:01,151 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:41:01,521 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:42:21,505 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170224226', 'CheckoutRequestID': 'ws_CO_10092024184219743733743780', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}"}
2024-09-10 15:42:21,505 - INFO - {'updated_data': 'callback data began'}
2024-09-10 15:42:21,505 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170224226', 'CheckoutRequestID': 'ws_CO_10092024184219743733743780', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}}
2024-09-10 15:42:21,771 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:42:22,058 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:42:22,059 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:42:22,746 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:42:32,172 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:42:32,302 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:42:32,303 - INFO - {'updated': 'initiated stk query for ws_CO_10092024184219743733743780 827142 '}
2024-09-10 15:42:32,386 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:42:33,142 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:42:33,144 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer JrgGBYjc07SPO0lLplPZX8Khpsib'}"}
2024-09-10 15:42:33,144 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTU0MjMy', 'Timestamp': '20240910154232', 'CheckoutRequestID': 'ws_CO_10092024184219743733743780'}"}
2024-09-10 15:42:33,145 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:42:34,028 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 381
2024-09-10 15:42:34,028 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170224226', 'CheckoutRequestID': 'ws_CO_10092024184219743733743780', 'ResultCode': '2001', 'ResultDesc': 'The initiator information is invalid.'} for ws_CO_10092024184219743733743780 827142"}
2024-09-10 15:42:34,272 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:42:34,552 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:42:34,553 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:42:34,913 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:42:42,819 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:42:42,972 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:42:42,973 - INFO - there is a test coming
2024-09-10 15:42:42,973 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 15:42:43,038 - INFO - {'updated_data': 'the data is now as 254795391356'}
2024-09-10 15:42:43,038 - INFO - the data is now as 254795391356
2024-09-10 15:42:43,062 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 15:42:43,063 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 15:42:43,064 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:42:43,811 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:42:43,813 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Tof5SyT1BX34i5klW0YTeboHZMsu'}"}
2024-09-10 15:42:43,814 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTU0MjQz', 'Timestamp': '20240910154243', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '500', 'PartyA': '254795391356', 'PartyB': 827142, 'PhoneNumber': '254795391356', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-25052', 'TransactionDesc': 'Some payment'}
2024-09-10 15:42:43,815 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:42:45,489 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 15:42:45,543 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87894262', 'CheckoutRequestID': 'ws_CO_10092024184245201795391356', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 15:42:56,588 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:42:56,783 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:42:56,784 - INFO - {'updated': 'initiated stk query for ws_CO_10092024184245201795391356 827142 '}
2024-09-10 15:42:56,908 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:42:57,684 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:42:57,686 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer O16dGAvOtTEmYJhdiPeIu2b8ofHG'}"}
2024-09-10 15:42:57,687 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTU0MjU2', 'Timestamp': '20240910154256', 'CheckoutRequestID': 'ws_CO_10092024184245201795391356'}"}
2024-09-10 15:42:57,688 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:42:58,506 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 388
2024-09-10 15:42:58,507 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87894262', 'CheckoutRequestID': 'ws_CO_10092024184245201795391356', 'ResultCode': '1', 'ResultDesc': 'The balance is insufficient for the transaction.'} for ws_CO_10092024184245201795391356 827142"}
2024-09-10 15:42:58,638 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:42:59,234 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:42:59,235 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:42:59,894 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:48:26,348 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585053091661', 'CheckoutRequestID': 'ws_CO_10092024184814961724427110', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA953Q27B'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910184825}, {'Name': 'PhoneNumber', 'Value': 254724427110}]}}}}"}
2024-09-10 15:48:26,348 - INFO - {'updated_data': 'callback data began'}
2024-09-10 15:48:26,349 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585053091661', 'CheckoutRequestID': 'ws_CO_10092024184814961724427110', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA953Q27B'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910184825}, {'Name': 'PhoneNumber', 'Value': 254724427110}]}}}}}
2024-09-10 15:48:26,498 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:48:26,788 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:48:26,789 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:48:27,095 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:48:28,125 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6682967', 'CheckoutRequestID': 'ws_CO_10092024184804002726466697', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA853QHCA'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910184827}, {'Name': 'PhoneNumber', 'Value': 254726466697}]}}}}"}
2024-09-10 15:48:28,125 - INFO - {'updated_data': 'callback data began'}
2024-09-10 15:48:28,125 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b6682967', 'CheckoutRequestID': 'ws_CO_10092024184804002726466697', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA853QHCA'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910184827}, {'Name': 'PhoneNumber', 'Value': 254726466697}]}}}}}
2024-09-10 15:48:28,371 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:48:28,667 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:48:28,669 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:48:29,332 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:57:45,339 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170246595', 'CheckoutRequestID': 'ws_CO_10092024185735158722973511', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-10 15:57:45,340 - INFO - {'updated_data': 'callback data began'}
2024-09-10 15:57:45,340 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170246595', 'CheckoutRequestID': 'ws_CO_10092024185735158722973511', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-10 15:57:45,539 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 15:57:45,807 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 15:57:45,809 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 15:57:46,151 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 15:58:53,926 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 15:58:54,100 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 15:58:54,101 - INFO - {'updated': 'initiated stk query for ws_CO_10092024185842529721790720 899885 '}
2024-09-10 15:58:54,167 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:58:54,902 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 15:58:54,904 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer OTxgZVj2x3AzuEHjDg5we6e1Yvbi'}"}
2024-09-10 15:58:54,904 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTU1ODU0', 'Timestamp': '20240910155854', 'CheckoutRequestID': 'ws_CO_10092024185842529721790720'}"}
2024-09-10 15:58:54,906 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 15:58:55,773 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 15:58:55,774 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024185842529721790720', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024185842529721790720 899885"}
2024-09-10 15:58:55,776 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 16:06:14,697 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 16:06:14,835 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 16:06:14,836 - INFO - there is a test coming
2024-09-10 16:06:14,836 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 16:06:14,887 - INFO - {'updated_data': 'the data is now as 254714412406'}
2024-09-10 16:06:14,887 - INFO - the data is now as 254714412406
2024-09-10 16:06:14,903 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 16:06:14,903 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 16:06:14,904 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:06:15,817 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 16:06:15,819 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer uV2tUXXn4ruz9ExbbZMLP7TMpvNl'}"}
2024-09-10 16:06:15,819 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTYwNjE1', 'Timestamp': '20240910160615', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '200', 'PartyA': '254714412406', 'PartyB': 899885, 'PhoneNumber': '254714412406', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0613221-1725984370036', 'TransactionDesc': 'Some payment'}
2024-09-10 16:06:15,820 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:06:16,856 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 16:06:16,864 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87927722', 'CheckoutRequestID': 'ws_CO_10092024190616523714412406', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 16:06:27,824 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 16:06:27,980 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 16:06:27,981 - INFO - {'updated': 'initiated stk query for ws_CO_10092024190616523714412406 899885 '}
2024-09-10 16:06:28,042 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:06:28,824 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 16:06:28,826 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer XNmVqTwDJ9nxXHCsk2hW2KH6xoim'}"}
2024-09-10 16:06:28,826 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTYwNjI4', 'Timestamp': '20240910160628', 'CheckoutRequestID': 'ws_CO_10092024190616523714412406'}"}
2024-09-10 16:06:28,827 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:06:29,623 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 16:06:29,623 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024190616523714412406', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024190616523714412406 899885"}
2024-09-10 16:06:29,625 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 16:06:37,803 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 16:06:37,940 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 16:06:37,941 - INFO - {'updated': 'initiated stk query for ws_CO_10092024190616523714412406 899885 '}
2024-09-10 16:06:38,013 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:06:38,872 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 16:06:38,874 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 0GXzVZ8Q0v2k8gpjFG5i4Oi045K3'}"}
2024-09-10 16:06:38,875 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTYwNjM3', 'Timestamp': '20240910160637', 'CheckoutRequestID': 'ws_CO_10092024190616523714412406'}"}
2024-09-10 16:06:38,876 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:06:39,878 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 16:06:39,879 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d87927722', 'CheckoutRequestID': 'ws_CO_10092024190616523714412406', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024190616523714412406 899885"}
2024-09-10 16:06:40,021 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 16:06:40,309 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 16:06:40,311 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 16:06:40,944 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 16:07:13,291 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc17197960', 'CheckoutRequestID': 'ws_CO_10092024190659751114296480', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA0582172'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910190712}, {'Name': 'PhoneNumber', 'Value': 254114296480}]}}}}"}
2024-09-10 16:07:13,291 - INFO - {'updated_data': 'callback data began'}
2024-09-10 16:07:13,291 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc17197960', 'CheckoutRequestID': 'ws_CO_10092024190659751114296480', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA0582172'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910190712}, {'Name': 'PhoneNumber', 'Value': 254114296480}]}}}}}
2024-09-10 16:07:13,481 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 16:07:14,105 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 16:07:14,107 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 16:07:14,439 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 16:07:26,987 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 16:07:27,042 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 16:07:27,043 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 16:08:56,135 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 16:08:56,293 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 16:08:56,294 - INFO - there is a test coming
2024-09-10 16:08:56,294 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 16:08:56,346 - INFO - {'updated_data': 'the data is now as 254726618736'}
2024-09-10 16:08:56,346 - INFO - the data is now as 254726618736
2024-09-10 16:08:56,367 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 16:08:56,367 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 16:08:56,368 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:08:57,298 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 16:08:57,300 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer PfBnFHLvNju0LUpIYIFmsUSRTQPK'}"}
2024-09-10 16:08:57,301 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTYwODU3', 'Timestamp': '20240910160857', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '600', 'PartyA': '254726618736', 'PartyB': 827142, 'PhoneNumber': '254726618736', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '408-1605', 'TransactionDesc': 'Some payment'}
2024-09-10 16:08:57,302 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:08:58,353 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 16:08:58,360 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee597118260', 'CheckoutRequestID': 'ws_CO_10092024190858000726618736', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 16:11:50,015 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 16:11:50,206 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 16:11:50,207 - INFO - {'updated': 'initiated stk query for ws_CO_10092024191138682714960388 899885 '}
2024-09-10 16:11:50,269 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:11:51,176 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 16:11:51,178 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer kg6JvZ2cNHJ2oaXTKUBxWynoARGf'}"}
2024-09-10 16:11:51,179 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTYxMTUw', 'Timestamp': '20240910161150', 'CheckoutRequestID': 'ws_CO_10092024191138682714960388'}"}
2024-09-10 16:11:51,180 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:11:52,137 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 16:11:52,138 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024191138682714960388', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024191138682714960388 899885"}
2024-09-10 16:11:52,140 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 16:13:27,758 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 16:13:27,955 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 16:13:27,956 - INFO - there is a test coming
2024-09-10 16:13:27,956 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 16:13:28,005 - INFO - {'updated_data': 'the data is now as 254740691589'}
2024-09-10 16:13:28,005 - INFO - the data is now as 254740691589
2024-09-10 16:13:28,031 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 16:13:28,031 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 16:13:28,032 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:13:28,868 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 16:13:28,870 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer y5wbsAXAimlPrGi7NAheifxG2M7A'}"}
2024-09-10 16:13:28,870 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTYxMzI4', 'Timestamp': '20240910161328', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254740691589', 'PartyB': 827142, 'PhoneNumber': '254740691589', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-27871', 'TransactionDesc': 'Some payment'}
2024-09-10 16:13:28,872 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:13:29,809 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 16:13:29,816 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b517222547', 'CheckoutRequestID': 'ws_CO_10092024191329584740691589', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 16:14:55,369 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170034459', 'CheckoutRequestID': 'ws_CO_10092024191443433727747951', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10949.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA959VQFD'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910191454}, {'Name': 'PhoneNumber', 'Value': 254727747951}]}}}}"}
2024-09-10 16:14:55,369 - INFO - {'updated_data': 'callback data began'}
2024-09-10 16:14:55,369 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170034459', 'CheckoutRequestID': 'ws_CO_10092024191443433727747951', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10949.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA959VQFD'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910191454}, {'Name': 'PhoneNumber', 'Value': 254727747951}]}}}}}
2024-09-10 16:14:55,542 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 16:14:56,116 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 16:14:56,117 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 16:14:56,451 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 16:14:56,468 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 16:14:56,661 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 16:14:56,662 - INFO - {'updated': 'initiated stk query for ws_CO_10092024191443433727747951 827142 '}
2024-09-10 16:14:56,726 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:14:57,468 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 16:14:57,470 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Vdh2rVdACJAf47EGWzHgQqjjxHVe'}"}
2024-09-10 16:14:57,471 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTYxNDU2', 'Timestamp': '20240910161456', 'CheckoutRequestID': 'ws_CO_10092024191443433727747951'}"}
2024-09-10 16:14:57,472 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:14:58,270 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 16:14:58,271 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170034459', 'CheckoutRequestID': 'ws_CO_10092024191443433727747951', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024191443433727747951 827142"}
2024-09-10 16:14:58,389 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 16:14:58,663 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 16:14:58,665 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 16:14:59,331 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 16:15:50,438 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 16:15:50,580 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 16:15:50,581 - INFO - {'updated': 'initiated stk query for ws_CO_10092024191538625700335979 827142 '}
2024-09-10 16:15:50,664 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:15:51,554 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 16:15:51,556 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer GNJwMGtEFPPB3GmvV1eqd2NBzzVR'}"}
2024-09-10 16:15:51,557 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTYxNTUw', 'Timestamp': '20240910161550', 'CheckoutRequestID': 'ws_CO_10092024191538625700335979'}"}
2024-09-10 16:15:51,558 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:15:52,373 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 16:15:52,374 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208793628965', 'CheckoutRequestID': 'ws_CO_10092024191538625700335979', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024191538625700335979 827142"}
2024-09-10 16:15:52,497 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 16:15:52,793 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 16:15:52,795 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 16:15:53,456 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 16:37:05,190 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 16:37:05,335 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 16:37:05,336 - INFO - there is a test coming
2024-09-10 16:37:05,336 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 16:37:05,400 - INFO - {'updated_data': 'the data is now as 254716676443'}
2024-09-10 16:37:05,400 - INFO - the data is now as 254716676443
2024-09-10 16:37:05,418 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 16:37:05,418 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 16:37:05,419 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:37:06,280 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 16:37:06,282 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer TePRk4Fa5fNlP59P3gev3HDtDLWZ'}"}
2024-09-10 16:37:06,283 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTYzNzA2', 'Timestamp': '20240910163706', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '80000', 'PartyA': '254716676443', 'PartyB': 899885, 'PhoneNumber': '254716676443', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054049', 'TransactionDesc': 'Some payment'}
2024-09-10 16:37:06,284 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:37:07,408 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 16:37:07,415 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075980467', 'CheckoutRequestID': 'ws_CO_10092024193707103716676443', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 16:37:10,614 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 16:37:10,759 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 16:37:10,759 - INFO - {'updated': 'initiated stk query for ws_CO_10092024193658904724808024 899885 '}
2024-09-10 16:37:10,826 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:37:11,641 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 16:37:11,643 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Ln8D4FrHQjVWA5Nki04VzPaPjorb'}"}
2024-09-10 16:37:11,643 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTYzNzEw', 'Timestamp': '20240910163710', 'CheckoutRequestID': 'ws_CO_10092024193658904724808024'}"}
2024-09-10 16:37:11,644 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:37:12,455 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 16:37:12,456 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '112b-4cf8-a0a0-4f49aab9f2db17317259', 'CheckoutRequestID': 'ws_CO_10092024193658904724808024', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024193658904724808024 899885"}
2024-09-10 16:37:12,584 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 16:37:13,042 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 16:37:13,044 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 16:37:13,365 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 16:39:02,029 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 16:39:02,181 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 16:39:02,181 - INFO - {'updated': 'initiated stk query for ws_CO_10092024193850394720233790 827142 '}
2024-09-10 16:39:02,252 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:39:03,098 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 16:39:03,100 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer wjSWQcI9kaVAwpbhMZIPwzCcsRag'}"}
2024-09-10 16:39:03,100 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTYzOTAy', 'Timestamp': '20240910163902', 'CheckoutRequestID': 'ws_CO_10092024193850394720233790'}"}
2024-09-10 16:39:03,101 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:39:03,913 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 16:39:03,913 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024193850394720233790', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024193850394720233790 827142"}
2024-09-10 16:39:03,917 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 16:45:46,935 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 16:45:47,080 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 16:45:47,081 - INFO - {'updated': 'initiated stk query for ws_CO_10092024194525483707672517 827142 '}
2024-09-10 16:45:47,149 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:45:47,872 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 16:45:47,874 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer G0PPuHO5b9CU3RURjqCDzlg2hZyY'}"}
2024-09-10 16:45:47,874 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTY0NTQ3', 'Timestamp': '20240910164547', 'CheckoutRequestID': 'ws_CO_10092024194525483707672517'}"}
2024-09-10 16:45:47,876 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:45:49,074 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 16:45:49,075 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b517347426', 'CheckoutRequestID': 'ws_CO_10092024194525483707672517', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024194525483707672517 827142"}
2024-09-10 16:45:49,200 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 16:45:49,793 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 16:45:49,794 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 16:45:50,149 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 16:45:51,453 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b517348445', 'CheckoutRequestID': 'ws_CO_10092024194541073768357446', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1526.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA05H1K8O'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910194550}, {'Name': 'PhoneNumber', 'Value': 254768357446}]}}}}"}
2024-09-10 16:45:51,453 - INFO - {'updated_data': 'callback data began'}
2024-09-10 16:45:51,453 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b517348445', 'CheckoutRequestID': 'ws_CO_10092024194541073768357446', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1526.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA05H1K8O'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910194550}, {'Name': 'PhoneNumber', 'Value': 254768357446}]}}}}}
2024-09-10 16:45:51,683 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 16:45:51,995 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 16:45:51,996 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 16:45:52,369 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 16:45:54,040 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 16:45:54,203 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 16:45:54,204 - INFO - {'updated': 'initiated stk query for ws_CO_10092024194541073768357446 827142 '}
2024-09-10 16:45:54,285 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:45:55,064 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 16:45:55,066 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer awzdHPbAAvZIUUqM3eS0b1Sfkt8q'}"}
2024-09-10 16:45:55,066 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTY0NTU0', 'Timestamp': '20240910164554', 'CheckoutRequestID': 'ws_CO_10092024194541073768357446'}"}
2024-09-10 16:45:55,073 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:45:55,992 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 16:45:55,993 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b517348445', 'CheckoutRequestID': 'ws_CO_10092024194541073768357446', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024194541073768357446 827142"}
2024-09-10 16:45:56,191 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 16:45:56,472 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 16:45:56,474 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 16:45:56,808 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 16:47:00,228 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 16:47:00,381 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 16:47:00,382 - INFO - there is a test coming
2024-09-10 16:47:00,382 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 16:47:00,436 - INFO - {'updated_data': 'the data is now as 254729834274'}
2024-09-10 16:47:00,436 - INFO - the data is now as 254729834274
2024-09-10 16:47:00,461 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 16:47:00,461 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 16:47:00,462 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:47:01,207 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 16:47:01,210 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer VD3BGbgwMZfGAVUzWQau7mB6Bodd'}"}
2024-09-10 16:47:01,210 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTY0NzAx', 'Timestamp': '20240910164701', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '750', 'PartyA': '254729834274', 'PartyB': 827142, 'PhoneNumber': '254729834274', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '800369996-1283', 'TransactionDesc': 'Some payment'}
2024-09-10 16:47:01,211 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:47:02,299 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 16:47:02,329 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f075996275', 'CheckoutRequestID': 'ws_CO_10092024194701913729834274', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 16:50:16,938 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 16:50:17,069 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 16:50:17,070 - INFO - there is a test coming
2024-09-10 16:50:17,070 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 16:50:17,131 - INFO - {'updated_data': 'the data is now as 254715033837'}
2024-09-10 16:50:17,132 - INFO - the data is now as 254715033837
2024-09-10 16:50:17,155 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 16:50:17,155 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 16:50:17,157 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:50:17,901 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 16:50:17,903 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer VrIFQMvrJEPziRYaYxhEdEKwBKnQ'}"}
2024-09-10 16:50:17,903 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTY1MDE3', 'Timestamp': '20240910165017', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1400', 'PartyA': '254715033837', 'PartyB': 899885, 'PhoneNumber': '254715033837', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054151', 'TransactionDesc': 'Some payment'}
2024-09-10 16:50:17,905 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:50:18,960 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 16:50:18,967 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc17366243', 'CheckoutRequestID': 'ws_CO_10092024195018640715033837', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 16:50:37,350 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 16:50:37,530 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 16:50:37,531 - INFO - {'updated': 'initiated stk query for ws_CO_10092024195018640715033837 899885 '}
2024-09-10 16:50:37,617 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:50:38,408 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 16:50:38,410 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer J0f2cCUXebNkycov3fDAOjPZdANH'}"}
2024-09-10 16:50:38,411 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTY1MDM3', 'Timestamp': '20240910165037', 'CheckoutRequestID': 'ws_CO_10092024195018640715033837'}"}
2024-09-10 16:50:38,419 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:50:39,250 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 16:50:39,250 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc17366243', 'CheckoutRequestID': 'ws_CO_10092024195018640715033837', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024195018640715033837 899885"}
2024-09-10 16:50:39,402 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 16:50:40,008 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 16:50:40,009 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 16:50:40,350 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 16:50:41,218 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 16:50:41,348 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 16:50:41,349 - INFO - {'updated': 'initiated stk query for ws_CO_10092024195018640715033837 899885 '}
2024-09-10 16:50:41,487 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:50:42,214 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 16:50:42,216 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer WW0JrRAJr4yuu7UXPyEgb5VGcDYd'}"}
2024-09-10 16:50:42,216 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTY1MDQx', 'Timestamp': '20240910165041', 'CheckoutRequestID': 'ws_CO_10092024195018640715033837'}"}
2024-09-10 16:50:42,218 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:50:43,141 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 16:50:43,142 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc17366243', 'CheckoutRequestID': 'ws_CO_10092024195018640715033837', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024195018640715033837 899885"}
2024-09-10 16:50:43,281 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 16:50:43,573 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 16:50:43,574 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 16:50:43,915 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 16:52:07,806 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 16:52:07,992 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 16:52:07,993 - INFO - there is a test coming
2024-09-10 16:52:07,993 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 16:52:08,057 - INFO - {'updated_data': 'the data is now as 254721127911'}
2024-09-10 16:52:08,057 - INFO - the data is now as 254721127911
2024-09-10 16:52:08,081 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 16:52:08,081 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 16:52:08,082 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:52:09,037 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 16:52:09,040 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer HeuV1HfD0FKGQpCLQxd3bp74Pneh'}"}
2024-09-10 16:52:09,040 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTY1MjA5', 'Timestamp': '20240910165209', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254721127911', 'PartyB': 827142, 'PhoneNumber': '254721127911', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-28081', 'TransactionDesc': 'Some payment'}
2024-09-10 16:52:09,042 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:52:09,973 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 16:52:09,994 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585053334561', 'CheckoutRequestID': 'ws_CO_10092024195209738721127911', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 16:52:36,051 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 16:52:36,173 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 16:52:36,174 - INFO - {'updated': 'initiated stk query for ws_CO_10092024195209738721127911 827142 '}
2024-09-10 16:52:36,245 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:52:36,974 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 16:52:36,976 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 6owcHOFrvH2T5bnMI9I5NAAuOFZq'}"}
2024-09-10 16:52:36,976 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTY1MjM2', 'Timestamp': '20240910165236', 'CheckoutRequestID': 'ws_CO_10092024195209738721127911'}"}
2024-09-10 16:52:36,977 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:52:37,798 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 16:52:37,799 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585053334561', 'CheckoutRequestID': 'ws_CO_10092024195209738721127911', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024195209738721127911 827142"}
2024-09-10 16:52:37,919 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 16:52:38,514 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 16:52:38,516 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 16:52:38,877 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 16:52:39,106 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 16:52:39,230 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 16:52:39,230 - INFO - {'updated': 'initiated stk query for ws_CO_10092024195227849728668283 827142 '}
2024-09-10 16:52:39,309 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:52:40,054 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 16:52:40,056 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer n9yWqvgrz38wLH0iyKwOp02CyjyA'}"}
2024-09-10 16:52:40,057 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTY1MjM5', 'Timestamp': '20240910165239', 'CheckoutRequestID': 'ws_CO_10092024195227849728668283'}"}
2024-09-10 16:52:40,058 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 16:52:41,041 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 16:52:41,042 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208793687577', 'CheckoutRequestID': 'ws_CO_10092024195227849728668283', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024195227849728668283 827142"}
2024-09-10 16:52:41,199 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 16:52:41,400 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793687577', 'CheckoutRequestID': 'ws_CO_10092024195227849728668283', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA95IJ1MT'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910195240}, {'Name': 'PhoneNumber', 'Value': 254728668283}]}}}}"}
2024-09-10 16:52:41,400 - INFO - {'updated_data': 'callback data began'}
2024-09-10 16:52:41,400 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793687577', 'CheckoutRequestID': 'ws_CO_10092024195227849728668283', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA95IJ1MT'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910195240}, {'Name': 'PhoneNumber', 'Value': 254728668283}]}}}}}
2024-09-10 16:52:41,543 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 16:52:41,544 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 16:52:41,640 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 16:52:41,925 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 16:52:42,258 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 16:52:42,260 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 16:52:42,961 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:01:00,512 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:01:00,666 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:01:00,667 - INFO - {'updated': 'initiated stk query for ws_CO_10092024200048754722465599 827142 '}
2024-09-10 17:01:00,728 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:01:01,579 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:01:01,581 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer UZJaU7sqKuIVtuYAF8glSGZPOGjv'}"}
2024-09-10 17:01:01,582 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTcwMTAw', 'Timestamp': '20240910170100', 'CheckoutRequestID': 'ws_CO_10092024200048754722465599'}"}
2024-09-10 17:01:01,583 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:01:10,519 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 17:01:10,520 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585053369093', 'CheckoutRequestID': 'ws_CO_10092024200048754722465599', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024200048754722465599 827142"}
2024-09-10 17:01:10,657 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 17:01:11,464 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 17:01:11,465 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 17:01:11,849 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:02:53,102 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793709428', 'CheckoutRequestID': 'ws_CO_10092024200242027707078676', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA15KMR5H'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910200250}, {'Name': 'PhoneNumber', 'Value': 254707078676}]}}}}"}
2024-09-10 17:02:53,102 - INFO - {'updated_data': 'callback data began'}
2024-09-10 17:02:53,102 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793709428', 'CheckoutRequestID': 'ws_CO_10092024200242027707078676', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA15KMR5H'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910200250}, {'Name': 'PhoneNumber', 'Value': 254707078676}]}}}}}
2024-09-10 17:02:53,262 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 17:02:53,521 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 17:02:53,523 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 17:02:53,550 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:02:53,771 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:02:53,771 - INFO - {'updated': 'initiated stk query for ws_CO_10092024200242027707078676 899885 '}
2024-09-10 17:02:53,849 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:02:53,875 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:02:54,566 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:02:54,568 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer BMvHvn849BkXjNILsisEAvCojK1T'}"}
2024-09-10 17:02:54,568 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTcwMjUz', 'Timestamp': '20240910170253', 'CheckoutRequestID': 'ws_CO_10092024200242027707078676'}"}
2024-09-10 17:02:54,569 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:02:55,398 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 429 221
2024-09-10 17:02:55,399 - INFO - {'updated': "Received response {'fault': {'faultstring': 'Spike arrest violation. Allowed rate : MessageRate{messagesPerPeriod=25, periodInMicroseconds=1000000, maxBurstMessageCount=2.5}', 'detail': {'errorcode': 'policies.ratelimit.SpikeArrestViolation'}}} for ws_CO_10092024200242027707078676 899885"}
2024-09-10 17:02:55,401 - WARNING - Too Many Requests: /api/v1/stk/query/
2024-09-10 17:04:24,977 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:04:25,109 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:04:25,109 - INFO - {'updated': 'initiated stk query for ws_CO_10092024200406101722925954 827142 '}
2024-09-10 17:04:25,166 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:05:00,366 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:05:00,368 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer TnbKcVP1iJJYp7dBZR3rlusm17i7'}"}
2024-09-10 17:05:00,369 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTcwNDI1', 'Timestamp': '20240910170425', 'CheckoutRequestID': 'ws_CO_10092024200406101722925954'}"}
2024-09-10 17:05:00,370 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:05:01,644 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 17:05:01,645 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076032206', 'CheckoutRequestID': 'ws_CO_10092024200406101722925954', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024200406101722925954 827142"}
2024-09-10 17:05:01,806 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 17:05:02,108 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 17:05:02,110 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 17:05:02,454 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:06:09,664 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:06:09,831 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:06:09,831 - INFO - {'updated': 'initiated stk query for ws_CO_10092024200548443796165039 827142 '}
2024-09-10 17:06:09,911 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:06:10,659 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:06:10,664 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer vavCOuAcarjnOdPbCbtaqK4yUxMJ'}"}
2024-09-10 17:06:10,668 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTcwNjA5', 'Timestamp': '20240910170609', 'CheckoutRequestID': 'ws_CO_10092024200548443796165039'}"}
2024-09-10 17:06:10,669 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:06:11,539 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 528
2024-09-10 17:06:11,539 - INFO - {'updated': "Received response {'fault': {'faultstring': 'Failed to submit task to thread pool. Error = java.util.concurrent.RejectedExecutionException: Task java.util.concurrent.FutureTask@58ceae14[Not completed, task = java.util.concurrent.Executors$RunnableAdapter@b6a6374[Wrapped task = com.apigee.threadpool.QueueMetricsAwareTask@4946fccf]] rejected from java.util.concurrent.ThreadPoolExecutor@383e92b4[Running, pool size = 100, active threads = 100, queued tasks = 1000, completed tasks = 160325101]', 'detail': {'errorcode': 'threadpool.ExecutionFailed'}}} for ws_CO_10092024200548443796165039 827142"}
2024-09-10 17:06:11,541 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 17:06:49,615 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:06:49,774 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:06:49,775 - INFO - {'updated': 'initiated stk query for ws_CO_10092024200548443796165039 827142 '}
2024-09-10 17:06:49,842 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:06:54,122 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:06:54,123 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer DqJAfo5KFrGnM21reoqF4os0mZHo'}"}
2024-09-10 17:06:54,124 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTcwNjQ5', 'Timestamp': '20240910170649', 'CheckoutRequestID': 'ws_CO_10092024200548443796165039'}"}
2024-09-10 17:06:54,125 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:06:56,050 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 17:06:56,050 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076036496', 'CheckoutRequestID': 'ws_CO_10092024200548443796165039', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024200548443796165039 827142"}
2024-09-10 17:06:56,183 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 17:06:56,646 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 17:06:56,647 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 17:06:57,005 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:13:09,362 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:13:09,507 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:13:09,507 - INFO - there is a test coming
2024-09-10 17:13:09,507 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 17:13:09,553 - INFO - {'updated_data': 'the data is now as 254715669157'}
2024-09-10 17:13:09,553 - INFO - the data is now as 254715669157
2024-09-10 17:13:09,579 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 17:13:09,579 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 17:13:09,581 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:13:10,408 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:13:10,410 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer A9lLodk4d3eow2eliGCPbAn5DPlu'}"}
2024-09-10 17:13:10,411 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTcxMzEw', 'Timestamp': '20240910171310', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254715669157', 'PartyB': 827142, 'PhoneNumber': '254715669157', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '169-13496', 'TransactionDesc': 'Some payment'}
2024-09-10 17:13:10,412 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:13:17,335 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 404 208
2024-09-10 17:13:17,338 - INFO -  th data is {'code': 404, 'message': {'requestId': '0a83-4731-ac2e-58dccc54ee597367057', 'errorCode': '404.001.03', 'errorMessage': 'Invalid Access Token'}}
2024-09-10 17:13:17,339 - WARNING - Not Found: /api/v1/stk/
2024-09-10 17:13:39,632 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:13:39,770 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:13:39,773 - INFO - {'updated': 'initiated stk query for ws_CO_10092024201326327715669157 827142 '}
2024-09-10 17:13:39,830 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:13:40,772 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:13:40,774 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer BbI1H8GocnvqCNDpbLuN0RfVpiIO'}"}
2024-09-10 17:13:40,775 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTcxMzM5', 'Timestamp': '20240910171339', 'CheckoutRequestID': 'ws_CO_10092024201326327715669157'}"}
2024-09-10 17:13:40,776 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:13:46,130 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 17:13:46,131 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076056660', 'CheckoutRequestID': 'ws_CO_10092024201326327715669157', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024201326327715669157 827142"}
2024-09-10 17:13:46,253 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 17:13:46,541 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 17:13:46,542 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 17:13:46,897 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:14:16,164 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:14:16,306 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:14:16,307 - INFO - {'updated': 'initiated stk query for ws_CO_10092024201340350723115351 827142 '}
2024-09-10 17:14:16,382 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:14:17,132 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:14:17,134 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer x3LXhlxGCoNk7BImUAUE0n1zwVzq'}"}
2024-09-10 17:14:17,135 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTcxNDE2', 'Timestamp': '20240910171416', 'CheckoutRequestID': 'ws_CO_10092024201340350723115351'}"}
2024-09-10 17:14:17,136 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:14:17,891 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 17:14:17,892 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b517454292', 'CheckoutRequestID': 'ws_CO_10092024201340350723115351', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024201340350723115351 827142"}
2024-09-10 17:14:18,027 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 17:14:18,312 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 17:14:18,314 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 17:14:18,698 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:18:03,257 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:18:03,436 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:18:03,437 - INFO - {'updated': 'initiated stk query for ws_CO_10092024201730339799792044 827142 '}
2024-09-10 17:18:03,508 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:18:04,587 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:18:04,589 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer iAUiBdhIU8p6nxBRJ8BF9Eea0ICT'}"}
2024-09-10 17:18:04,589 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTcxODAz', 'Timestamp': '20240910171803', 'CheckoutRequestID': 'ws_CO_10092024201730339799792044'}"}
2024-09-10 17:18:04,590 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:19:06,807 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 17:19:06,808 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076067684', 'CheckoutRequestID': 'ws_CO_10092024201730339799792044', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024201730339799792044 827142"}
2024-09-10 17:19:06,974 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 17:19:07,557 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 17:19:07,559 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 17:19:07,918 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:20:43,646 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:20:44,027 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:20:44,028 - INFO - {'updated': 'initiated stk query for ws_CO_10092024202019160791394431 899885 '}
2024-09-10 17:20:44,093 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:20:44,860 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:20:44,862 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer iK8q9cjyLH14T0bYpKFTZ8sBu8Ef'}"}
2024-09-10 17:20:44,863 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTcyMDQ0', 'Timestamp': '20240910172044', 'CheckoutRequestID': 'ws_CO_10092024202019160791394431'}"}
2024-09-10 17:20:44,870 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:20:45,714 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 17:20:45,715 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170398256', 'CheckoutRequestID': 'ws_CO_10092024202019160791394431', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024202019160791394431 899885"}
2024-09-10 17:20:45,845 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 17:20:46,140 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 17:20:46,142 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 17:20:46,781 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:21:00,151 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:21:00,281 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:21:00,282 - INFO - there is a test coming
2024-09-10 17:21:00,282 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 17:21:00,331 - INFO - {'updated_data': 'the data is now as 254725742226'}
2024-09-10 17:21:00,331 - INFO - the data is now as 254725742226
2024-09-10 17:21:00,353 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 17:21:00,353 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 17:21:00,355 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:21:01,081 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:21:01,083 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer yiR9kyVXPS3zyoJxGidbd0qJiAQA'}"}
2024-09-10 17:21:01,084 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTcyMTAx', 'Timestamp': '20240910172101', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '172', 'PartyA': '254725742226', 'PartyB': 827142, 'PhoneNumber': '254725742226', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '264-14516', 'TransactionDesc': 'Some payment'}
2024-09-10 17:21:01,085 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:21:02,273 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 17:21:02,279 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208793757982', 'CheckoutRequestID': 'ws_CO_10092024202101893725742226', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 17:21:33,109 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:21:33,240 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:21:33,241 - INFO - {'updated': 'initiated stk query for ws_CO_10092024202101893725742226 827142 '}
2024-09-10 17:21:33,313 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:21:34,228 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:21:34,230 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer GbaDAdVvttfWGSHlWrJZk1eFxS0G'}"}
2024-09-10 17:21:34,231 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTcyMTMz', 'Timestamp': '20240910172133', 'CheckoutRequestID': 'ws_CO_10092024202101893725742226'}"}
2024-09-10 17:21:34,232 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:22:03,327 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 17:22:03,328 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208793757982', 'CheckoutRequestID': 'ws_CO_10092024202101893725742226', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024202101893725742226 827142"}
2024-09-10 17:22:03,477 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 17:22:04,105 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 17:22:04,107 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 17:22:04,486 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:22:50,670 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:22:50,701 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-10 17:22:50,701 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 17:24:28,043 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:24:28,198 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:24:28,199 - INFO - there is a test coming
2024-09-10 17:24:28,199 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 17:24:28,279 - INFO - {'updated_data': 'the data is now as 254725742226'}
2024-09-10 17:24:28,279 - INFO - the data is now as 254725742226
2024-09-10 17:24:28,293 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 17:24:28,294 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 17:24:28,294 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:24:29,129 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:24:29,130 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 0XqiiuiXiBXDWnpUxhy4dcYynq79'}"}
2024-09-10 17:24:29,130 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTcyNDI5', 'Timestamp': '20240910172429', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '9827', 'PartyA': '254725742226', 'PartyB': 827142, 'PhoneNumber': '254725742226', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-114508', 'TransactionDesc': 'Some payment'}
2024-09-10 17:24:29,131 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:27:01,186 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 503 95
2024-09-10 17:27:01,192 - INFO -  th data is {'code': 500, 'message': {'status': 'Failed', 'message': 'Error connecting'}}
2024-09-10 17:27:01,193 - ERROR - Internal Server Error: /api/v1/stk/
2024-09-10 17:27:01,217 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:27:01,355 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:27:01,356 - INFO - there is a test coming
2024-09-10 17:27:01,356 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 17:27:01,408 - INFO - {'updated_data': 'the data is now as 254725742226'}
2024-09-10 17:27:01,409 - INFO - the data is now as 254725742226
2024-09-10 17:27:01,434 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 17:27:01,435 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 17:27:01,436 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:27:02,189 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:27:02,191 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Ozg3keHbZO0YtWYQxFZEx14sbvGd'}"}
2024-09-10 17:27:02,191 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTcyNzAy', 'Timestamp': '20240910172702', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '9827', 'PartyA': '254725742226', 'PartyB': 827142, 'PhoneNumber': '254725742226', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-114508', 'TransactionDesc': 'Some payment'}
2024-09-10 17:27:02,193 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:27:03,176 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 17:27:03,182 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170903097', 'CheckoutRequestID': 'ws_CO_10092024202702953725742226', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 17:27:14,244 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:27:14,395 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:27:14,396 - INFO - {'updated': 'initiated stk query for ws_CO_10092024202702953725742226 827142 '}
2024-09-10 17:27:14,467 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:27:15,403 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:27:15,405 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 0pdQ0ZQpNtHmjfcPG33OajABlCpi'}"}
2024-09-10 17:27:15,406 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTcyNzE0', 'Timestamp': '20240910172714', 'CheckoutRequestID': 'ws_CO_10092024202702953725742226'}"}
2024-09-10 17:27:15,407 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:27:16,160 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 528
2024-09-10 17:27:16,161 - INFO - {'updated': "Received response {'fault': {'faultstring': 'Failed to submit task to thread pool. Error = java.util.concurrent.RejectedExecutionException: Task java.util.concurrent.FutureTask@6f2ce9ad[Not completed, task = java.util.concurrent.Executors$RunnableAdapter@4986eb01[Wrapped task = com.apigee.threadpool.QueueMetricsAwareTask@16a15a03]] rejected from java.util.concurrent.ThreadPoolExecutor@3ed84c0a[Running, pool size = 100, active threads = 100, queued tasks = 1000, completed tasks = 65515870]', 'detail': {'errorcode': 'threadpool.ExecutionFailed'}}} for ws_CO_10092024202702953725742226 827142"}
2024-09-10 17:27:16,163 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 17:27:24,233 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:27:24,389 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:27:24,390 - INFO - {'updated': 'initiated stk query for ws_CO_10092024202702953725742226 827142 '}
2024-09-10 17:27:24,445 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:27:25,174 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:27:25,175 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer KUpp9XUkGxQAXSLSiy3FDFPS7vRu'}"}
2024-09-10 17:27:25,176 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTcyNzI0', 'Timestamp': '20240910172724', 'CheckoutRequestID': 'ws_CO_10092024202702953725742226'}"}
2024-09-10 17:27:25,177 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:27:25,933 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 17:27:25,934 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024202702953725742226', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024202702953725742226 827142"}
2024-09-10 17:27:25,936 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 17:27:44,200 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:27:44,361 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:27:44,362 - INFO - {'updated': 'initiated stk query for ws_CO_10092024202702953725742226 827142 '}
2024-09-10 17:27:44,419 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:27:45,126 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:27:45,128 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer KYOe234Zg9UbiAlbSwxvHE09FwYe'}"}
2024-09-10 17:27:45,129 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTcyNzQ0', 'Timestamp': '20240910172744', 'CheckoutRequestID': 'ws_CO_10092024202702953725742226'}"}
2024-09-10 17:27:45,130 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:27:45,971 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 17:27:45,971 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170903097', 'CheckoutRequestID': 'ws_CO_10092024202702953725742226', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024202702953725742226 827142"}
2024-09-10 17:27:46,095 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 17:27:46,666 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 17:27:46,667 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 17:27:47,005 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:33:31,923 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:33:32,213 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:33:32,219 - INFO - {'updated': 'initiated stk query for ws_CO_10092024203319638797125776 827142 '}
2024-09-10 17:33:32,291 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:33:32,861 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:33:32,864 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer I6N3UKPf27Rr7RkAS6mZAlLCVl9I'}"}
2024-09-10 17:33:32,864 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTczMzMy', 'Timestamp': '20240910173332', 'CheckoutRequestID': 'ws_CO_10092024203319638797125776'}"}
2024-09-10 17:33:32,865 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:33:46,425 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 17:33:46,425 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee597437992', 'CheckoutRequestID': 'ws_CO_10092024203319638797125776', 'ResultCode': '1', 'ResultDesc': 'The balance is insufficient for the transaction.'} for ws_CO_10092024203319638797125776 827142"}
2024-09-10 17:33:46,550 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 17:33:47,062 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 17:33:47,063 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 17:33:47,314 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:34:15,934 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:34:16,098 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:34:16,098 - INFO - there is a test coming
2024-09-10 17:34:16,098 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 17:34:16,143 - INFO - {'updated_data': 'the data is now as 254758197738'}
2024-09-10 17:34:16,143 - INFO - the data is now as 254758197738
2024-09-10 17:34:16,177 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 17:34:16,177 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 17:34:16,178 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:34:16,753 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:34:16,755 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 1PcksCuVDGJzjUVSqvdtQA2vQUkL'}"}
2024-09-10 17:34:16,756 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTczNDE2', 'Timestamp': '20240910173416', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '200', 'PartyA': '254758197738', 'PartyB': 899885, 'PhoneNumber': '254758197738', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA002433CP-1725989654306', 'TransactionDesc': 'Some payment'}
2024-09-10 17:34:16,757 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:34:18,188 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 17:34:18,197 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170923494', 'CheckoutRequestID': 'ws_CO_10092024203417316758197738', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 17:34:35,456 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170923494', 'CheckoutRequestID': 'ws_CO_10092024203417316758197738', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA75QP5Q5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910203430}, {'Name': 'PhoneNumber', 'Value': 254758197738}]}}}}"}
2024-09-10 17:34:35,457 - INFO - {'updated_data': 'callback data began'}
2024-09-10 17:34:35,457 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170923494', 'CheckoutRequestID': 'ws_CO_10092024203417316758197738', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA75QP5Q5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910203430}, {'Name': 'PhoneNumber', 'Value': 254758197738}]}}}}}
2024-09-10 17:34:35,738 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 17:34:35,939 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 17:34:35,941 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 17:34:36,368 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:34:39,100 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:34:39,238 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:34:39,239 - INFO - {'updated': 'initiated stk query for ws_CO_10092024203417316758197738 899885 '}
2024-09-10 17:34:39,310 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:34:49,981 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 400 0
2024-09-10 17:34:49,983 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer '}"}
2024-09-10 17:34:49,983 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTczNDM5', 'Timestamp': '20240910173439', 'CheckoutRequestID': 'ws_CO_10092024203417316758197738'}"}
2024-09-10 17:34:49,985 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:34:50,582 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 404 174
2024-09-10 17:34:50,583 - INFO - {'updated': "Received response {'requestId': '', 'errorCode': '404.001.03', 'errorMessage': 'Invalid Access Token'} for ws_CO_10092024203417316758197738 899885"}
2024-09-10 17:34:50,585 - WARNING - Not Found: /api/v1/stk/query/
2024-09-10 17:37:16,510 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:37:16,659 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:37:16,660 - INFO - {'updated': 'initiated stk query for ws_CO_10092024203655215703472850 827142 '}
2024-09-10 17:37:16,736 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:37:17,312 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:37:17,314 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer gSav89OhgzjbA8ctvVFTlPLG4PlS'}"}
2024-09-10 17:37:17,314 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTczNzE2', 'Timestamp': '20240910173716', 'CheckoutRequestID': 'ws_CO_10092024203655215703472850'}"}
2024-09-10 17:37:17,316 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:37:18,098 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 17:37:18,098 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88113223', 'CheckoutRequestID': 'ws_CO_10092024203655215703472850', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024203655215703472850 827142"}
2024-09-10 17:37:18,267 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 17:37:18,467 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 17:37:18,469 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 17:37:18,987 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:38:45,618 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:38:45,740 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:38:45,741 - INFO - there is a test coming
2024-09-10 17:38:45,741 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 17:38:45,789 - INFO - {'updated_data': 'the data is now as 254725090103'}
2024-09-10 17:38:45,790 - INFO - the data is now as 254725090103
2024-09-10 17:38:45,807 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 17:38:45,808 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 17:38:45,809 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:38:57,002 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:38:57,004 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer K2aNhUAMocFEvj8SdJDRBooC6XPP'}"}
2024-09-10 17:38:57,005 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTczODU3', 'Timestamp': '20240910173857', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '65000', 'PartyA': '254725090103', 'PartyB': 899885, 'PhoneNumber': '254725090103', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054149', 'TransactionDesc': 'Some payment'}
2024-09-10 17:38:57,006 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:39:46,007 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 17:39:46,013 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b7106005', 'CheckoutRequestID': 'ws_CO_10092024203943270725090103', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 17:43:32,834 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:43:32,987 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:43:32,988 - INFO - {'updated': 'initiated stk query for ws_CO_10092024204320214743785732 899885 '}
2024-09-10 17:43:33,062 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:43:33,619 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:43:33,621 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer gwfCl6KPpYwLTddEZkaEH8mecjA2'}"}
2024-09-10 17:43:33,622 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTc0MzMz', 'Timestamp': '20240910174333', 'CheckoutRequestID': 'ws_CO_10092024204320214743785732'}"}
2024-09-10 17:43:33,631 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:43:37,858 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 17:43:37,859 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962170948584', 'CheckoutRequestID': 'ws_CO_10092024204320214743785732', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024204320214743785732 899885"}
2024-09-10 17:43:38,109 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 17:43:38,304 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 17:43:38,305 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 17:43:38,575 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:47:39,369 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:47:39,555 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:47:39,556 - INFO - there is a test coming
2024-09-10 17:47:39,556 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 17:47:39,611 - INFO - {'updated_data': 'the data is now as 254724108929'}
2024-09-10 17:47:39,611 - INFO - the data is now as 254724108929
2024-09-10 17:47:39,637 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 17:47:39,637 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 17:47:39,639 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:47:48,536 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:47:48,538 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer L0aZJVkOQ43luolkquJDPvMNYneg'}"}
2024-09-10 17:47:48,538 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTc0NzQ4', 'Timestamp': '20240910174748', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '43708', 'PartyA': '254724108929', 'PartyB': 827142, 'PhoneNumber': '254724108929', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-28481', 'TransactionDesc': 'Some payment'}
2024-09-10 17:47:48,540 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:47:54,648 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 17:47:54,654 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88143401', 'CheckoutRequestID': 'ws_CO_10092024204749234724108929', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 17:52:27,298 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b517594981', 'CheckoutRequestID': 'ws_CO_10092024205147117723562060', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-10 17:52:27,298 - INFO - {'updated_data': 'callback data began'}
2024-09-10 17:52:27,298 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b517594981', 'CheckoutRequestID': 'ws_CO_10092024205147117723562060', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-10 17:52:27,505 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 17:52:28,050 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 17:52:28,051 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 17:52:28,318 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:52:34,119 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:52:34,261 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:52:34,261 - INFO - {'updated': 'initiated stk query for ws_CO_10092024205222141720398511 827142 '}
2024-09-10 17:52:34,327 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:52:35,128 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:52:35,133 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer uRor9uvNA2YEG3iB9Ou5p9C2bNE3'}"}
2024-09-10 17:52:35,134 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTc1MjM0', 'Timestamp': '20240910175234', 'CheckoutRequestID': 'ws_CO_10092024205222141720398511'}"}
2024-09-10 17:52:35,138 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:52:35,836 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 17:52:35,836 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170249871', 'CheckoutRequestID': 'ws_CO_10092024205222141720398511', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024205222141720398511 827142"}
2024-09-10 17:52:36,029 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 17:52:36,253 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 17:52:36,255 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 17:52:36,511 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:56:00,997 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:56:01,182 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:56:01,183 - INFO - there is a test coming
2024-09-10 17:56:01,183 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 17:56:01,237 - INFO - {'updated_data': 'the data is now as 254706813228'}
2024-09-10 17:56:01,237 - INFO - the data is now as 254706813228
2024-09-10 17:56:01,257 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 17:56:01,257 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 17:56:01,258 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:56:02,721 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:56:02,723 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer g8VRlcBx56vaSfqBbHqlxAkibj5t'}"}
2024-09-10 17:56:02,723 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTc1NjAy', 'Timestamp': '20240910175602', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1500', 'PartyA': '254706813228', 'PartyB': 827142, 'PhoneNumber': '254706813228', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-25496', 'TransactionDesc': 'Some payment'}
2024-09-10 17:56:02,724 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:56:04,023 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 17:56:04,029 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88165062', 'CheckoutRequestID': 'ws_CO_10092024205603317706813228', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 17:56:15,640 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:56:15,801 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:56:15,802 - INFO - {'updated': 'initiated stk query for ws_CO_10092024205603317706813228 827142 '}
2024-09-10 17:56:15,875 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:56:16,483 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:56:16,485 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Ah2B9SLhlpY3aOqFL6rTes8hZFV5'}"}
2024-09-10 17:56:16,491 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTc1NjE1', 'Timestamp': '20240910175615', 'CheckoutRequestID': 'ws_CO_10092024205603317706813228'}"}
2024-09-10 17:56:16,494 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:56:21,465 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 429 221
2024-09-10 17:56:21,465 - INFO - {'updated': "Received response {'fault': {'faultstring': 'Spike arrest violation. Allowed rate : MessageRate{messagesPerPeriod=25, periodInMicroseconds=1000000, maxBurstMessageCount=2.5}', 'detail': {'errorcode': 'policies.ratelimit.SpikeArrestViolation'}}} for ws_CO_10092024205603317706813228 827142"}
2024-09-10 17:56:21,468 - WARNING - Too Many Requests: /api/v1/stk/query/
2024-09-10 17:56:22,457 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88165062', 'CheckoutRequestID': 'ws_CO_10092024205603317706813228', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA25UFUKM'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910205614}, {'Name': 'PhoneNumber', 'Value': 254706813228}]}}}}"}
2024-09-10 17:56:22,457 - INFO - {'updated_data': 'callback data began'}
2024-09-10 17:56:22,457 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88165062', 'CheckoutRequestID': 'ws_CO_10092024205603317706813228', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA25UFUKM'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910205614}, {'Name': 'PhoneNumber', 'Value': 254706813228}]}}}}}
2024-09-10 17:56:22,630 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 17:56:23,034 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 17:56:23,035 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 17:56:23,562 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:56:31,113 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:56:31,242 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:56:31,243 - INFO - {'updated': 'initiated stk query for ws_CO_10092024205619710741575270 899885 '}
2024-09-10 17:56:31,303 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:56:31,913 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:56:31,915 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer dA94hb9xDMlrWvAs0AeHDenpsupx'}"}
2024-09-10 17:56:31,915 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTc1NjMx', 'Timestamp': '20240910175631', 'CheckoutRequestID': 'ws_CO_10092024205619710741575270'}"}
2024-09-10 17:56:31,917 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:56:32,631 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 17:56:32,631 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208793854575', 'CheckoutRequestID': 'ws_CO_10092024205619710741575270', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024205619710741575270 899885"}
2024-09-10 17:56:32,834 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 17:56:33,327 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 17:56:33,328 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 17:56:33,874 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:57:19,580 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:57:19,795 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:57:19,795 - INFO - there is a test coming
2024-09-10 17:57:19,796 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 17:57:19,878 - INFO - {'updated_data': 'the data is now as 254722973511'}
2024-09-10 17:57:19,879 - INFO - the data is now as 254722973511
2024-09-10 17:57:19,920 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 17:57:19,921 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 17:57:19,922 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:57:20,784 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:57:20,785 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer SCSJYjRqlFjSQGaxbMOS5NH7ogIe'}"}
2024-09-10 17:57:20,785 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTc1NzIw', 'Timestamp': '20240910175720', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '133064', 'PartyA': '254722973511', 'PartyB': 827142, 'PhoneNumber': '254722973511', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-48888', 'TransactionDesc': 'Some payment'}
2024-09-10 17:57:20,786 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:57:22,125 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 17:57:22,131 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208793856996', 'CheckoutRequestID': 'ws_CO_10092024205721486722973511', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 17:57:53,254 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:57:53,398 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:57:53,399 - INFO - {'updated': 'initiated stk query for ws_CO_10092024205721486722973511 827142 '}
2024-09-10 17:57:53,464 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:57:54,473 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:57:54,475 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer YtZFfGIAzRu7CoayeiPCQukRhLBa'}"}
2024-09-10 17:57:54,476 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTc1NzUz', 'Timestamp': '20240910175753', 'CheckoutRequestID': 'ws_CO_10092024205721486722973511'}"}
2024-09-10 17:57:54,477 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:57:55,124 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 388
2024-09-10 17:57:55,124 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208793856996', 'CheckoutRequestID': 'ws_CO_10092024205721486722973511', 'ResultCode': '1', 'ResultDesc': 'The balance is insufficient for the transaction.'} for ws_CO_10092024205721486722973511 827142"}
2024-09-10 17:57:55,287 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 17:57:55,798 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 17:57:55,800 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 17:57:56,343 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 17:58:13,014 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 17:58:13,199 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 17:58:13,200 - INFO - there is a test coming
2024-09-10 17:58:13,200 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 17:58:13,306 - INFO - {'updated_data': 'the data is now as 254706813228'}
2024-09-10 17:58:13,306 - INFO - the data is now as 254706813228
2024-09-10 17:58:13,336 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 17:58:13,336 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 17:58:13,337 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:58:13,893 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 17:58:13,895 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer mYcIalNA0DNTSpYSNAd6vL1oaDKH'}"}
2024-09-10 17:58:13,895 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTc1ODEz', 'Timestamp': '20240910175813', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254706813228', 'PartyB': 827142, 'PhoneNumber': '254706813228', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-174514', 'TransactionDesc': 'Some payment'}
2024-09-10 17:58:13,896 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 17:59:44,491 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 17:59:44,498 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b7182679', 'CheckoutRequestID': 'ws_CO_10092024205941890706813228', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 18:03:38,151 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170513127', 'CheckoutRequestID': 'ws_CO_10092024210254794710148253', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA25VL10E'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910210308}, {'Name': 'PhoneNumber', 'Value': 254710148253}]}}}}"}
2024-09-10 18:03:38,151 - INFO - {'updated_data': 'callback data began'}
2024-09-10 18:03:38,151 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170513127', 'CheckoutRequestID': 'ws_CO_10092024210254794710148253', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA25VL10E'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910210308}, {'Name': 'PhoneNumber', 'Value': 254710148253}]}}}}}
2024-09-10 18:03:38,373 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 18:03:38,562 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 18:03:38,564 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 18:03:38,773 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 18:07:43,734 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 18:07:43,864 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 18:07:43,865 - INFO - there is a test coming
2024-09-10 18:07:43,865 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 18:07:43,955 - INFO - {'updated_data': 'the data is now as 254799317975'}
2024-09-10 18:07:43,955 - INFO - the data is now as 254799317975
2024-09-10 18:07:43,978 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 18:07:43,978 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 18:07:43,979 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:07:54,791 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 18:07:54,794 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 79IrjAIZdRYFNCZ8UrALW2n73T3q'}"}
2024-09-10 18:07:54,795 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTgwNzU0', 'Timestamp': '20240910180754', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '30000', 'PartyA': '254799317975', 'PartyB': 899885, 'PhoneNumber': '254799317975', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054096', 'TransactionDesc': 'Some payment'}
2024-09-10 18:07:54,797 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:09:33,416 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 18:09:33,422 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b517664212', 'CheckoutRequestID': 'ws_CO_10092024210927691799317975', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 18:10:04,740 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170296015', 'CheckoutRequestID': 'ws_CO_10092024210933586742908910', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-10 18:10:04,740 - INFO - {'updated_data': 'callback data began'}
2024-09-10 18:10:04,740 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170296015', 'CheckoutRequestID': 'ws_CO_10092024210933586742908910', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-10 18:10:04,922 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 18:10:05,450 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 18:10:05,452 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 18:10:06,045 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 18:10:13,627 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 18:10:13,755 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 18:10:13,756 - INFO - there is a test coming
2024-09-10 18:10:13,757 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 18:10:13,803 - INFO - {'updated_data': 'the data is now as 254701746976'}
2024-09-10 18:10:13,804 - INFO - the data is now as 254701746976
2024-09-10 18:10:13,819 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 18:10:13,819 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 18:10:13,820 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:10:14,484 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 18:10:14,486 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ySmyeGbQ1Z6GyRpszlTnYiUYmh6g'}"}
2024-09-10 18:10:14,486 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTgxMDE0', 'Timestamp': '20240910181014', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254701746976', 'PartyB': 899885, 'PhoneNumber': '254701746976', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0623344-1725991812696', 'TransactionDesc': 'Some payment'}
2024-09-10 18:10:14,488 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:10:15,638 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 18:10:15,644 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88203158', 'CheckoutRequestID': 'ws_CO_10092024211015097701746976', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 18:12:18,532 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 18:12:18,669 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 18:12:18,671 - INFO - there is a test coming
2024-09-10 18:12:18,671 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 18:12:18,762 - INFO - {'updated_data': 'the data is now as 254716885671'}
2024-09-10 18:12:18,763 - INFO - the data is now as 254716885671
2024-09-10 18:12:18,784 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 18:12:18,785 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 18:12:18,786 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:12:19,500 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 18:12:19,502 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 9cANJKgh1YAT9NguAwalhAJPsx1q'}"}
2024-09-10 18:12:19,502 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTgxMjE5', 'Timestamp': '20240910181219', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254716885671', 'PartyB': 827142, 'PhoneNumber': '254716885671', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-31406', 'TransactionDesc': 'Some payment'}
2024-09-10 18:12:19,504 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:12:20,090 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 500 528
2024-09-10 18:12:20,092 - INFO -  th data is {'code': 500, 'message': {'fault': {'faultstring': 'Failed to submit task to thread pool. Error = java.util.concurrent.RejectedExecutionException: Task java.util.concurrent.FutureTask@48b7681b[Not completed, task = java.util.concurrent.Executors$RunnableAdapter@793ce3af[Wrapped task = com.apigee.threadpool.QueueMetricsAwareTask@4f7552e9]] rejected from java.util.concurrent.ThreadPoolExecutor@29b3b582[Running, pool size = 100, active threads = 100, queued tasks = 1000, completed tasks = 70289843]', 'detail': {'errorcode': 'threadpool.ExecutionFailed'}}}}
2024-09-10 18:12:20,094 - ERROR - Internal Server Error: /api/v1/stk/
2024-09-10 18:20:09,607 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 18:20:09,757 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 18:20:09,758 - INFO - {'updated': 'initiated stk query for ws_CO_10092024211958301728719160 827142 '}
2024-09-10 18:20:09,831 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:20:24,473 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 18:20:24,475 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer x8YLpIcVvYbbkuvcqK4a6d7lEODz'}"}
2024-09-10 18:20:24,476 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTgyMDA5', 'Timestamp': '20240910182009', 'CheckoutRequestID': 'ws_CO_10092024211958301728719160'}"}
2024-09-10 18:20:24,477 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:20:25,236 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 18:20:25,237 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076236065', 'CheckoutRequestID': 'ws_CO_10092024211958301728719160', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024211958301728719160 827142"}
2024-09-10 18:20:25,405 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 18:20:25,922 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 18:20:25,923 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 18:20:26,122 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 18:22:14,219 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 18:22:14,348 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 18:22:14,349 - INFO - there is a test coming
2024-09-10 18:22:14,349 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 18:22:14,394 - INFO - {'updated_data': 'the data is now as 254728719160'}
2024-09-10 18:22:14,395 - INFO - the data is now as 254728719160
2024-09-10 18:22:14,410 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 18:22:14,410 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 18:22:14,411 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:22:15,187 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 18:22:15,195 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer YGb45sjUZ6YFdVG7QKXgm22JLzR5'}"}
2024-09-10 18:22:15,195 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTgyMjE1', 'Timestamp': '20240910182215', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '300', 'PartyA': '254728719160', 'PartyB': 827142, 'PhoneNumber': '254728719160', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '406-648', 'TransactionDesc': 'Some payment'}
2024-09-10 18:22:15,197 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:22:16,323 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 18:22:16,334 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170565496', 'CheckoutRequestID': 'ws_CO_10092024212215732728719160', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 18:22:34,255 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 18:22:34,397 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 18:22:34,397 - INFO - {'updated': 'initiated stk query for ws_CO_10092024212212821718775622 827142 '}
2024-09-10 18:22:34,480 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:22:35,049 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 18:22:35,051 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer CyXNuWLdD7of47DySAKjOgsfKCKI'}"}
2024-09-10 18:22:35,051 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTgyMjM0', 'Timestamp': '20240910182234', 'CheckoutRequestID': 'ws_CO_10092024212212821718775622'}"}
2024-09-10 18:22:35,052 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:22:35,687 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 18:22:35,688 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024212212821718775622', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024212212821718775622 827142"}
2024-09-10 18:22:35,690 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 18:25:28,258 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585053703518', 'CheckoutRequestID': 'ws_CO_10092024212513015716885671', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA25YXQD6'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910212527}, {'Name': 'PhoneNumber', 'Value': 254716885671}]}}}}"}
2024-09-10 18:25:28,258 - INFO - {'updated_data': 'callback data began'}
2024-09-10 18:25:28,258 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585053703518', 'CheckoutRequestID': 'ws_CO_10092024212513015716885671', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA25YXQD6'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910212527}, {'Name': 'PhoneNumber', 'Value': 254716885671}]}}}}}
2024-09-10 18:25:28,407 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 18:25:28,604 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 18:25:28,605 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 18:25:29,164 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 18:25:37,339 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 18:25:37,452 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 18:25:37,452 - INFO - {'updated': 'initiated stk query for ws_CO_10092024212513015716885671 827142 '}
2024-09-10 18:25:37,507 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:25:38,176 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 18:25:38,178 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Zekq5BnyaI1GzOHMt7svRp6GSAQL'}"}
2024-09-10 18:25:38,179 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTgyNTM3', 'Timestamp': '20240910182537', 'CheckoutRequestID': 'ws_CO_10092024212513015716885671'}"}
2024-09-10 18:25:38,180 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:25:38,931 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 18:25:38,932 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585053703518', 'CheckoutRequestID': 'ws_CO_10092024212513015716885671', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024212513015716885671 827142"}
2024-09-10 18:25:39,105 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 18:25:39,596 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 18:25:39,598 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 18:25:39,840 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 18:25:43,592 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 18:25:43,753 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 18:25:43,754 - INFO - there is a test coming
2024-09-10 18:25:43,754 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 18:25:43,815 - INFO - {'updated_data': 'the data is now as 254724586093'}
2024-09-10 18:25:43,815 - INFO - the data is now as 254724586093
2024-09-10 18:25:43,832 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 18:25:43,832 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 18:25:43,833 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:25:44,418 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 18:25:44,420 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer A6HydirrG4Oim82Rtx0CmgfGwwFs'}"}
2024-09-10 18:25:44,420 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTgyNTQ0', 'Timestamp': '20240910182544', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '15000', 'PartyA': '254724586093', 'PartyB': 899885, 'PhoneNumber': '254724586093', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054207', 'TransactionDesc': 'Some payment'}
2024-09-10 18:25:44,422 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:25:45,640 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 18:25:45,646 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585053706223', 'CheckoutRequestID': 'ws_CO_10092024212545045724586093', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 18:25:59,797 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585053706223', 'CheckoutRequestID': 'ws_CO_10092024212545045724586093', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 15000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA75Z0SYF'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910212559}, {'Name': 'PhoneNumber', 'Value': 254724586093}]}}}}"}
2024-09-10 18:25:59,797 - INFO - {'updated_data': 'callback data began'}
2024-09-10 18:25:59,797 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585053706223', 'CheckoutRequestID': 'ws_CO_10092024212545045724586093', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 15000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA75Z0SYF'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910212559}, {'Name': 'PhoneNumber', 'Value': 254724586093}]}}}}}
2024-09-10 18:25:59,955 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 18:26:00,147 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 18:26:00,148 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 18:26:00,704 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 18:26:51,746 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 18:26:51,888 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 18:26:51,891 - INFO - there is a test coming
2024-09-10 18:26:51,895 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 18:26:51,944 - INFO - {'updated_data': 'the data is now as 254720975661'}
2024-09-10 18:26:51,944 - INFO - the data is now as 254720975661
2024-09-10 18:26:51,959 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 18:26:51,960 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 18:26:51,961 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:26:52,562 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 18:26:52,564 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ASxmlMh56YsRAXwYx289c4xR73E7'}"}
2024-09-10 18:26:52,565 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTgyNjUy', 'Timestamp': '20240910182652', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2500', 'PartyA': '254720975661', 'PartyB': 827142, 'PhoneNumber': '254720975661', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-41401', 'TransactionDesc': 'Some payment'}
2024-09-10 18:26:52,566 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:26:53,642 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 341
2024-09-10 18:26:53,649 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a318242443', 'CheckoutRequestID': 'ws_CO_10092024212653190720975661', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 18:40:32,343 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 18:40:32,473 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 18:40:32,474 - INFO - {'updated': 'initiated stk query for ws_CO_10092024214010997718775622 827142 '}
2024-09-10 18:40:32,579 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:40:33,175 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 18:40:33,177 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer LaEg6Tcwnq5OZLAkmyxoyMcgSwZe'}"}
2024-09-10 18:40:33,178 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTg0MDMy', 'Timestamp': '20240910184032', 'CheckoutRequestID': 'ws_CO_10092024214010997718775622'}"}
2024-09-10 18:40:33,179 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:40:33,897 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 18:40:33,897 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024214010997718775622', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024214010997718775622 827142"}
2024-09-10 18:40:33,900 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 18:43:01,324 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793972148', 'CheckoutRequestID': 'ws_CO_10092024214229847718775622', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-10 18:43:01,324 - INFO - {'updated_data': 'callback data began'}
2024-09-10 18:43:01,325 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208793972148', 'CheckoutRequestID': 'ws_CO_10092024214229847718775622', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-10 18:43:01,604 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 18:43:02,312 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 18:43:02,313 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 18:43:02,331 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 18:43:02,467 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 18:43:02,467 - INFO - {'updated': 'initiated stk query for ws_CO_10092024214229847718775622 827142 '}
2024-09-10 18:43:02,538 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:43:02,666 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 18:43:03,294 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 18:43:03,296 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ElIHW5AOlFFAKmIc5QjszYljvX54'}"}
2024-09-10 18:43:03,297 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTg0MzAy', 'Timestamp': '20240910184302', 'CheckoutRequestID': 'ws_CO_10092024214229847718775622'}"}
2024-09-10 18:43:03,298 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 18:43:04,189 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-10 18:43:04,190 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208793972148', 'CheckoutRequestID': 'ws_CO_10092024214229847718775622', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_10092024214229847718775622 827142"}
2024-09-10 18:43:04,336 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 18:43:04,627 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 18:43:04,629 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 18:43:05,300 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 18:43:27,456 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171103295', 'CheckoutRequestID': 'ws_CO_10092024214317401727717282', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA361EJ8P'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910214326}, {'Name': 'PhoneNumber', 'Value': 254727717282}]}}}}"}
2024-09-10 18:43:27,457 - INFO - {'updated_data': 'callback data began'}
2024-09-10 18:43:27,457 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171103295', 'CheckoutRequestID': 'ws_CO_10092024214317401727717282', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA361EJ8P'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910214326}, {'Name': 'PhoneNumber', 'Value': 254727717282}]}}}}}
2024-09-10 18:43:27,637 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 18:43:27,937 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 18:43:27,938 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 18:43:28,298 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:12:50,477 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee597892486', 'CheckoutRequestID': 'ws_CO_10092024221242062799235351', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-10 19:12:50,477 - INFO - {'updated_data': 'callback data began'}
2024-09-10 19:12:50,477 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee597892486', 'CheckoutRequestID': 'ws_CO_10092024221242062799235351', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-10 19:12:50,636 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:12:50,834 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:12:50,835 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:12:51,047 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:14:05,730 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:14:05,883 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:14:05,883 - INFO - {'updated': 'initiated stk query for ws_CO_10092024221354411723342998 827142 '}
2024-09-10 19:14:05,954 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:14:06,629 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:14:06,631 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer IGpdKmzGLywiBr4JVca0TORyqbSv'}"}
2024-09-10 19:14:06,632 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTkxNDA1', 'Timestamp': '20240910191405', 'CheckoutRequestID': 'ws_CO_10092024221354411723342998'}"}
2024-09-10 19:14:06,634 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:14:07,305 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 19:14:07,305 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024221354411723342998', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024221354411723342998 827142"}
2024-09-10 19:14:07,308 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 19:16:00,025 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88349389', 'CheckoutRequestID': 'ws_CO_10092024221550933719722765', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 300.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA565080L'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910221559}, {'Name': 'PhoneNumber', 'Value': 254719722765}]}}}}"}
2024-09-10 19:16:00,026 - INFO - {'updated_data': 'callback data began'}
2024-09-10 19:16:00,026 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88349389', 'CheckoutRequestID': 'ws_CO_10092024221550933719722765', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 300.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA565080L'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910221559}, {'Name': 'PhoneNumber', 'Value': 254719722765}]}}}}}
2024-09-10 19:16:00,190 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:16:00,445 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:16:00,447 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:16:00,703 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:16:10,289 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:16:10,465 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:16:10,466 - INFO - {'updated': 'initiated stk query for ws_CO_10092024221550933719722765 827142 '}
2024-09-10 19:16:10,541 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:16:11,177 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:16:11,180 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer YEBJ7B9siA0Su9NAkYLJOBRp4p4B'}"}
2024-09-10 19:16:11,180 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTkxNjEw', 'Timestamp': '20240910191610', 'CheckoutRequestID': 'ws_CO_10092024221550933719722765'}"}
2024-09-10 19:16:11,181 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:16:11,839 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 19:16:11,840 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88349389', 'CheckoutRequestID': 'ws_CO_10092024221550933719722765', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024221550933719722765 827142"}
2024-09-10 19:16:11,960 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:16:12,152 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:16:12,153 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:16:12,374 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:16:15,982 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:16:16,131 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:16:16,132 - INFO - {'updated': 'initiated stk query for ws_CO_10092024221550933719722765 827142 '}
2024-09-10 19:16:16,204 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:16:16,878 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:16:16,880 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer zpizseWkv1cGzzIYGSkEXKVaUHsI'}"}
2024-09-10 19:16:16,880 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTkxNjE2', 'Timestamp': '20240910191616', 'CheckoutRequestID': 'ws_CO_10092024221550933719722765'}"}
2024-09-10 19:16:16,882 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:16:17,562 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 19:16:17,563 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88349389', 'CheckoutRequestID': 'ws_CO_10092024221550933719722765', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024221550933719722765 827142"}
2024-09-10 19:16:17,717 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:16:17,921 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:16:17,922 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:16:18,173 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:18:43,243 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:18:43,379 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:18:43,379 - INFO - there is a test coming
2024-09-10 19:18:43,379 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 19:18:43,430 - INFO - {'updated_data': 'the data is now as 254794264555'}
2024-09-10 19:18:43,430 - INFO - the data is now as 254794264555
2024-09-10 19:18:43,448 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 19:18:43,455 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 19:18:43,457 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:18:44,136 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:18:44,138 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer RI7C2SKmUeLa9OfjjgJZI0636oGL'}"}
2024-09-10 19:18:44,139 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTkxODQ0', 'Timestamp': '20240910191844', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '30', 'PartyA': '254794264555', 'PartyB': 827142, 'PhoneNumber': '254794264555', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-30122', 'TransactionDesc': 'Some payment'}
2024-09-10 19:18:44,140 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:18:45,004 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 19:18:45,030 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88354233', 'CheckoutRequestID': 'ws_CO_10092024221844753794264555', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 19:20:58,688 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a318503366', 'CheckoutRequestID': 'ws_CO_10092024222049985722211052', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA465GUAC'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910222058}, {'Name': 'PhoneNumber', 'Value': 254722211052}]}}}}"}
2024-09-10 19:20:58,688 - INFO - {'updated_data': 'callback data began'}
2024-09-10 19:20:58,688 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a318503366', 'CheckoutRequestID': 'ws_CO_10092024222049985722211052', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA465GUAC'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910222058}, {'Name': 'PhoneNumber', 'Value': 254722211052}]}}}}}
2024-09-10 19:20:58,881 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:20:59,070 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:20:59,071 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:20:59,308 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:22:01,391 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:22:01,541 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:22:01,543 - INFO - {'updated': 'initiated stk query for ws_CO_10092024222150164703306080 899885 '}
2024-09-10 19:22:01,604 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:22:02,302 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:22:02,303 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 3MrWPLwPPDJrA8b32kxQyZWIIoBJ'}"}
2024-09-10 19:22:02,304 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTkyMjAx', 'Timestamp': '20240910192201', 'CheckoutRequestID': 'ws_CO_10092024222150164703306080'}"}
2024-09-10 19:22:02,305 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:22:03,049 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 19:22:03,049 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024222150164703306080', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024222150164703306080 899885"}
2024-09-10 19:22:03,052 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 19:23:23,352 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:23:23,655 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:23:23,656 - INFO - there is a test coming
2024-09-10 19:23:23,656 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 19:23:23,699 - INFO - {'updated_data': 'the data is now as 254723342998'}
2024-09-10 19:23:23,699 - INFO - the data is now as 254723342998
2024-09-10 19:23:23,717 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 19:23:23,717 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 19:23:23,718 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:23:24,298 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:23:24,300 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer bGAe9gHDQiGZRl1PK48Ua2twAvi7'}"}
2024-09-10 19:23:24,300 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTkyMzI0', 'Timestamp': '20240910192324', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5049', 'PartyA': '254723342998', 'PartyB': 827142, 'PhoneNumber': '254723342998', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-29694', 'TransactionDesc': 'Some payment'}
2024-09-10 19:23:24,301 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:23:25,015 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 19:23:25,021 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585053985466', 'CheckoutRequestID': 'ws_CO_10092024222324802723342998', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 19:23:56,058 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:23:56,215 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:23:56,216 - INFO - {'updated': 'initiated stk query for ws_CO_10092024222324802723342998 827142 '}
2024-09-10 19:23:56,276 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:23:56,836 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:23:56,838 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 75m0SHOkwwlvBGEbKIFnwducI3Ay'}"}
2024-09-10 19:23:56,839 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTkyMzU2', 'Timestamp': '20240910192356', 'CheckoutRequestID': 'ws_CO_10092024222324802723342998'}"}
2024-09-10 19:23:56,840 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:23:57,448 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 19:23:57,448 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585053985466', 'CheckoutRequestID': 'ws_CO_10092024222324802723342998', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024222324802723342998 827142"}
2024-09-10 19:23:57,577 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:23:57,784 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:23:57,786 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:23:58,016 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:24:55,142 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc18022667', 'CheckoutRequestID': 'ws_CO_10092024222439444723494571', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10050.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA665T1LO'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910222454}, {'Name': 'PhoneNumber', 'Value': 254723494571}]}}}}"}
2024-09-10 19:24:55,142 - INFO - {'updated_data': 'callback data began'}
2024-09-10 19:24:55,142 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc18022667', 'CheckoutRequestID': 'ws_CO_10092024222439444723494571', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10050.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA665T1LO'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910222454}, {'Name': 'PhoneNumber', 'Value': 254723494571}]}}}}}
2024-09-10 19:24:55,337 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:24:55,731 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:24:55,733 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:24:55,958 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:25:00,534 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:25:00,701 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:25:00,702 - INFO - {'updated': 'initiated stk query for ws_CO_10092024222439444723494571 827142 '}
2024-09-10 19:25:00,772 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:25:01,337 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:25:01,340 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer gAmoy2nAhGuPExhU3z9Ase1GWRFJ'}"}
2024-09-10 19:25:01,341 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTkyNTAw', 'Timestamp': '20240910192500', 'CheckoutRequestID': 'ws_CO_10092024222439444723494571'}"}
2024-09-10 19:25:01,351 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:25:02,068 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 19:25:02,069 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc18022667', 'CheckoutRequestID': 'ws_CO_10092024222439444723494571', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024222439444723494571 827142"}
2024-09-10 19:25:02,195 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:25:02,722 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:25:02,724 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:25:03,283 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:27:17,092 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:27:17,296 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:27:17,296 - INFO - {'updated': 'initiated stk query for ws_CO_10092024222653891746574009 899885 '}
2024-09-10 19:27:17,356 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:27:17,949 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:27:17,951 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer X0kBUb9H0jhx68LY9hGRHgVcRuD2'}"}
2024-09-10 19:27:17,952 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTkyNzE3', 'Timestamp': '20240910192717', 'CheckoutRequestID': 'ws_CO_10092024222653891746574009'}"}
2024-09-10 19:27:17,953 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:27:18,649 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-10 19:27:18,649 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88366167', 'CheckoutRequestID': 'ws_CO_10092024222653891746574009', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_10092024222653891746574009 899885"}
2024-09-10 19:27:18,798 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:27:19,338 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:27:19,340 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:27:19,872 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:27:48,015 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:27:48,172 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:27:48,173 - INFO - there is a test coming
2024-09-10 19:27:48,173 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 19:27:48,219 - INFO - {'updated_data': 'the data is now as 254746574009'}
2024-09-10 19:27:48,219 - INFO - the data is now as 254746574009
2024-09-10 19:27:48,235 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 19:27:48,235 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 19:27:48,245 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:27:48,979 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:27:48,981 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 7oZh8xDcqY4nszbF6A7AGEj33vS4'}"}
2024-09-10 19:27:48,981 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTkyNzQ4', 'Timestamp': '20240910192748', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254746574009', 'PartyB': 899885, 'PhoneNumber': '254746574009', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054213', 'TransactionDesc': 'Some payment'}
2024-09-10 19:27:48,984 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:27:49,820 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 19:27:49,834 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170461541', 'CheckoutRequestID': 'ws_CO_10092024222749587746574009', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 19:27:58,271 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170461541', 'CheckoutRequestID': 'ws_CO_10092024222749587746574009', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA2661Y8C'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910222757}, {'Name': 'PhoneNumber', 'Value': 254746574009}]}}}}"}
2024-09-10 19:27:58,271 - INFO - {'updated_data': 'callback data began'}
2024-09-10 19:27:58,271 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170461541', 'CheckoutRequestID': 'ws_CO_10092024222749587746574009', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA2661Y8C'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910222757}, {'Name': 'PhoneNumber', 'Value': 254746574009}]}}}}}
2024-09-10 19:27:58,560 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:27:58,745 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:27:58,747 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:27:59,294 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:28:02,465 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:28:02,643 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:28:02,644 - INFO - {'updated': 'initiated stk query for ws_CO_10092024222749587746574009 899885 '}
2024-09-10 19:28:02,759 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:28:03,319 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:28:03,321 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 7Vz7gvKpmhNN3kcvgnkIkvqonX94'}"}
2024-09-10 19:28:03,322 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTkyODAy', 'Timestamp': '20240910192802', 'CheckoutRequestID': 'ws_CO_10092024222749587746574009'}"}
2024-09-10 19:28:03,324 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:28:03,944 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 19:28:03,944 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170461541', 'CheckoutRequestID': 'ws_CO_10092024222749587746574009', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024222749587746574009 899885"}
2024-09-10 19:28:04,227 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:28:04,422 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:28:04,424 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:28:04,686 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:28:44,812 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171186650', 'CheckoutRequestID': 'ws_CO_10092024222834986798241100', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA8664EQC'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910222844}, {'Name': 'PhoneNumber', 'Value': 254798241100}]}}}}"}
2024-09-10 19:28:44,812 - INFO - {'updated_data': 'callback data began'}
2024-09-10 19:28:44,813 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171186650', 'CheckoutRequestID': 'ws_CO_10092024222834986798241100', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA8664EQC'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910222844}, {'Name': 'PhoneNumber', 'Value': 254798241100}]}}}}}
2024-09-10 19:28:45,073 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:28:45,570 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:28:45,571 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:28:46,100 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:28:47,189 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:28:47,323 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:28:47,324 - INFO - {'updated': 'initiated stk query for ws_CO_10092024222834986798241100 827142 '}
2024-09-10 19:28:47,386 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:28:48,044 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:28:48,045 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer NKvoDdeEs4whMPTViZfyfA2MhKHA'}"}
2024-09-10 19:28:48,046 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTkyODQ3', 'Timestamp': '20240910192847', 'CheckoutRequestID': 'ws_CO_10092024222834986798241100'}"}
2024-09-10 19:28:48,047 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:28:48,716 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 19:28:48,717 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171186650', 'CheckoutRequestID': 'ws_CO_10092024222834986798241100', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024222834986798241100 827142"}
2024-09-10 19:28:48,902 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:28:49,129 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:28:49,131 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:28:49,670 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:29:07,273 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:29:07,413 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:29:07,414 - INFO - {'updated': 'initiated stk query for ws_CO_10092024222850633746574009 899885 '}
2024-09-10 19:29:07,470 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:29:08,052 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:29:08,054 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer REfEIhMkWHJAFW4A2BJjGC5exf2I'}"}
2024-09-10 19:29:08,055 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTkyOTA3', 'Timestamp': '20240910192907', 'CheckoutRequestID': 'ws_CO_10092024222850633746574009'}"}
2024-09-10 19:29:08,056 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:29:08,687 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 19:29:08,688 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170463215', 'CheckoutRequestID': 'ws_CO_10092024222850633746574009', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024222850633746574009 899885"}
2024-09-10 19:29:08,856 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:29:09,056 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:29:09,057 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:29:09,127 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:29:09,262 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:29:09,263 - INFO - there is a test coming
2024-09-10 19:29:09,263 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 19:29:09,281 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:29:09,381 - INFO - {'updated_data': 'the data is now as 254724808486'}
2024-09-10 19:29:09,383 - INFO - the data is now as 254724808486
2024-09-10 19:29:09,419 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 19:29:09,420 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 19:29:09,421 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:29:10,014 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:29:10,016 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer tsPrxZlIvlMcW3jsQqJAVCkHFlRi'}"}
2024-09-10 19:29:10,017 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTkyOTEw', 'Timestamp': '20240910192910', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254724808486', 'PartyB': 899885, 'PhoneNumber': '254724808486', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054100', 'TransactionDesc': 'Some payment'}
2024-09-10 19:29:10,018 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:29:11,044 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 19:29:11,050 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee597957901', 'CheckoutRequestID': 'ws_CO_10092024222910656724808486', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 19:29:59,957 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee597960369', 'CheckoutRequestID': 'ws_CO_10092024222952904715289689', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5140.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA4668A3Q'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910222959}, {'Name': 'PhoneNumber', 'Value': 254715289689}]}}}}"}
2024-09-10 19:29:59,957 - INFO - {'updated_data': 'callback data began'}
2024-09-10 19:29:59,957 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee597960369', 'CheckoutRequestID': 'ws_CO_10092024222952904715289689', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5140.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA4668A3Q'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910222959}, {'Name': 'PhoneNumber', 'Value': 254715289689}]}}}}}
2024-09-10 19:30:00,279 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:30:00,647 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:30:00,668 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:30:00,670 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:30:00,806 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:30:00,807 - INFO - there is a test coming
2024-09-10 19:30:00,807 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 19:30:00,860 - INFO - {'updated_data': 'the data is now as 254746574009'}
2024-09-10 19:30:00,860 - INFO - the data is now as 254746574009
2024-09-10 19:30:00,878 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 19:30:00,878 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 19:30:00,879 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:30:00,892 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:30:01,458 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:30:01,461 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 0tWRB4w9WUAjyq0IUyjzB7OrPs9n'}"}
2024-09-10 19:30:01,461 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTkzMDAx', 'Timestamp': '20240910193001', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254746574009', 'PartyB': 899885, 'PhoneNumber': '254746574009', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054215', 'TransactionDesc': 'Some payment'}
2024-09-10 19:30:01,463 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:30:02,251 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 19:30:02,258 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc18042229', 'CheckoutRequestID': 'ws_CO_10092024223001977746574009', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 19:30:11,234 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc18042229', 'CheckoutRequestID': 'ws_CO_10092024223001977746574009', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA6668SOE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910223010}, {'Name': 'PhoneNumber', 'Value': 254746574009}]}}}}"}
2024-09-10 19:30:11,235 - INFO - {'updated_data': 'callback data began'}
2024-09-10 19:30:11,235 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc18042229', 'CheckoutRequestID': 'ws_CO_10092024223001977746574009', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA6668SOE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910223010}, {'Name': 'PhoneNumber', 'Value': 254746574009}]}}}}}
2024-09-10 19:30:11,433 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:30:11,629 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:30:11,630 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:30:11,848 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:30:13,091 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:30:13,211 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:30:13,212 - INFO - {'updated': 'initiated stk query for ws_CO_10092024223001977746574009 899885 '}
2024-09-10 19:30:13,270 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:30:13,854 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:30:13,856 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer WbfB4QMyKhnfTt7w0Lyt4zHmS8OS'}"}
2024-09-10 19:30:13,856 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTkzMDEz', 'Timestamp': '20240910193013', 'CheckoutRequestID': 'ws_CO_10092024223001977746574009'}"}
2024-09-10 19:30:13,857 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:30:14,494 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 19:30:14,494 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc18042229', 'CheckoutRequestID': 'ws_CO_10092024223001977746574009', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024223001977746574009 899885"}
2024-09-10 19:30:14,651 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:30:14,887 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:30:14,889 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:30:15,132 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:31:00,398 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:31:00,533 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:31:00,534 - INFO - there is a test coming
2024-09-10 19:31:00,534 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 19:31:00,582 - INFO - {'updated_data': 'the data is now as 254705607478'}
2024-09-10 19:31:00,582 - INFO - the data is now as 254705607478
2024-09-10 19:31:00,601 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 19:31:00,601 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 19:31:00,602 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:31:01,201 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:31:01,203 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer sMRhzpP9Xrr8kPdmzU5vbQRT4EyY'}"}
2024-09-10 19:31:01,204 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTkzMTAx', 'Timestamp': '20240910193101', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254705607478', 'PartyB': 827142, 'PhoneNumber': '254705607478', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-51309', 'TransactionDesc': 'Some payment'}
2024-09-10 19:31:01,205 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:31:03,251 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 19:31:03,257 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585054013249', 'CheckoutRequestID': 'ws_CO_10092024223101855705607478', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 19:31:10,488 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170466386', 'CheckoutRequestID': 'ws_CO_10092024223102283746574009', 'ResultCode': 17, 'ResultDesc': 'Rule limited.'}}}"}
2024-09-10 19:31:10,488 - INFO - {'updated_data': 'callback data began'}
2024-09-10 19:31:10,489 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170466386', 'CheckoutRequestID': 'ws_CO_10092024223102283746574009', 'ResultCode': 17, 'ResultDesc': 'Rule limited.'}}}}
2024-09-10 19:31:10,716 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:31:10,922 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:31:10,923 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:31:11,468 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:31:14,088 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:31:14,255 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:31:14,256 - INFO - {'updated': 'initiated stk query for ws_CO_10092024223101855705607478 827142 '}
2024-09-10 19:31:14,380 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:31:15,079 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:31:15,084 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer bpA9hAHjGd7KiyiQGgW8IDEWN54J'}"}
2024-09-10 19:31:15,085 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTkzMTE0', 'Timestamp': '20240910193114', 'CheckoutRequestID': 'ws_CO_10092024223101855705607478'}"}
2024-09-10 19:31:15,086 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:31:15,821 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 19:31:15,821 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585054013249', 'CheckoutRequestID': 'ws_CO_10092024223101855705607478', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024223101855705607478 827142"}
2024-09-10 19:31:16,028 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:31:16,238 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:31:16,240 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:31:16,459 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:33:47,479 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:33:47,659 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:33:47,660 - INFO - there is a test coming
2024-09-10 19:33:47,660 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 19:33:47,706 - INFO - {'updated_data': 'the data is now as 254746574009'}
2024-09-10 19:33:47,706 - INFO - the data is now as 254746574009
2024-09-10 19:33:47,724 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 19:33:47,724 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 19:33:47,726 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:33:48,339 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:33:48,342 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 5zRLhbGQo8HbaAJNhr65yc1jGd71'}"}
2024-09-10 19:33:48,348 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTkzMzQ4', 'Timestamp': '20240910193348', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254746574009', 'PartyB': 899885, 'PhoneNumber': '254746574009', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054217', 'TransactionDesc': 'Some payment'}
2024-09-10 19:33:48,349 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:33:49,171 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 19:33:49,178 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee597973854', 'CheckoutRequestID': 'ws_CO_10092024223348913746574009', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 19:34:09,342 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:34:09,507 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:34:09,507 - INFO - {'updated': 'initiated stk query for ws_CO_10092024223348913746574009 899885 '}
2024-09-10 19:34:09,569 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:34:10,149 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:34:10,151 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer by2N7hHvYx4DtL2Co9BgXeqvEZp3'}"}
2024-09-10 19:34:10,152 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTkzNDA5', 'Timestamp': '20240910193409', 'CheckoutRequestID': 'ws_CO_10092024223348913746574009'}"}
2024-09-10 19:34:10,153 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:34:10,778 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 19:34:10,779 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee597973854', 'CheckoutRequestID': 'ws_CO_10092024223348913746574009', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024223348913746574009 899885"}
2024-09-10 19:34:11,024 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:34:11,291 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:34:11,292 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:34:11,555 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:34:21,021 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:34:21,038 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 19:34:21,041 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 19:34:53,355 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:34:53,381 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 19:34:53,382 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 19:34:55,395 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:34:55,421 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 19:34:55,421 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 19:35:13,048 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:35:13,216 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:35:13,217 - INFO - {'updated': 'initiated stk query for ws_CO_10092024223422108712077876 827142 '}
2024-09-10 19:35:13,300 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:35:13,927 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:35:13,929 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Y1FvoplMhD9jzuaduC3cfwV1q0AT'}"}
2024-09-10 19:35:13,930 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTkzNTEz', 'Timestamp': '20240910193513', 'CheckoutRequestID': 'ws_CO_10092024223422108712077876'}"}
2024-09-10 19:35:13,931 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:35:14,661 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 374
2024-09-10 19:35:14,662 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'a5e9-4493-bf74-289c5402a318552670', 'CheckoutRequestID': 'ws_CO_10092024223422108712077876', 'ResultCode': '1037', 'ResultDesc': 'DS timeout user cannot be reached'} for ws_CO_10092024223422108712077876 827142"}
2024-09-10 19:35:14,787 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:35:15,201 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:35:15,203 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:35:15,443 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:35:21,070 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:35:21,221 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:35:21,222 - INFO - there is a test coming
2024-09-10 19:35:21,222 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 19:35:21,265 - INFO - {'updated_data': 'the data is now as 254724808486'}
2024-09-10 19:35:21,266 - INFO - the data is now as 254724808486
2024-09-10 19:35:21,296 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 19:35:21,296 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 19:35:21,298 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:35:21,888 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:35:21,890 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer oTYVGRZFgzMwuNxq1LLi6JxrWqLH'}"}
2024-09-10 19:35:21,903 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTkzNTIx', 'Timestamp': '20240910193521', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254724808486', 'PartyB': 899885, 'PhoneNumber': '254724808486', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054219', 'TransactionDesc': 'Some payment'}
2024-09-10 19:35:21,905 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:35:22,707 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 19:35:22,714 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88378101', 'CheckoutRequestID': 'ws_CO_10092024223522433724808486', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 19:38:09,763 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076388748', 'CheckoutRequestID': 'ws_CO_10092024223800759727814297', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA566UPFD'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910223809}, {'Name': 'PhoneNumber', 'Value': 254727814297}]}}}}"}
2024-09-10 19:38:09,764 - INFO - {'updated_data': 'callback data began'}
2024-09-10 19:38:09,764 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076388748', 'CheckoutRequestID': 'ws_CO_10092024223800759727814297', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA566UPFD'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910223809}, {'Name': 'PhoneNumber', 'Value': 254727814297}]}}}}}
2024-09-10 19:38:09,955 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:38:10,153 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:38:10,157 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:38:10,376 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:38:13,738 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:38:13,899 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:38:13,900 - INFO - {'updated': 'initiated stk query for ws_CO_10092024223800759727814297 827142 '}
2024-09-10 19:38:13,969 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:38:14,740 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:38:14,743 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer LXCadsanoJGv2zcPWnSePcXyMh62'}"}
2024-09-10 19:38:14,744 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTkzODEz', 'Timestamp': '20240910193813', 'CheckoutRequestID': 'ws_CO_10092024223800759727814297'}"}
2024-09-10 19:38:14,746 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:38:15,459 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 19:38:15,460 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076388748', 'CheckoutRequestID': 'ws_CO_10092024223800759727814297', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024223800759727814297 827142"}
2024-09-10 19:38:15,600 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:38:15,784 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:38:15,785 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:38:16,012 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:38:35,353 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:38:35,535 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:38:35,536 - INFO - there is a test coming
2024-09-10 19:38:35,536 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 19:38:35,578 - INFO - {'updated_data': 'the data is now as 254717776684'}
2024-09-10 19:38:35,578 - INFO - the data is now as 254717776684
2024-09-10 19:38:35,609 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 19:38:35,609 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 19:38:35,610 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:38:36,194 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:38:36,196 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer VTeYMdqhdbHjhqZOaMHM2FGadXwo'}"}
2024-09-10 19:38:36,197 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTkzODM2', 'Timestamp': '20240910193836', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '200', 'PartyA': '254717776684', 'PartyB': 899885, 'PhoneNumber': '254717776684', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0607325-1725997111843', 'TransactionDesc': 'Some payment'}
2024-09-10 19:38:36,198 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:38:37,024 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 19:38:37,037 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585054038420', 'CheckoutRequestID': 'ws_CO_10092024223836740717776684', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 19:38:49,965 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:38:50,137 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:38:50,138 - INFO - {'updated': 'initiated stk query for ws_CO_10092024223836740717776684 899885 '}
2024-09-10 19:38:50,199 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:38:50,962 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:38:50,964 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 23MCimZpJo3w2qIzZGLjAoR9ITGu'}"}
2024-09-10 19:38:50,964 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMTkzODUw', 'Timestamp': '20240910193850', 'CheckoutRequestID': 'ws_CO_10092024223836740717776684'}"}
2024-09-10 19:38:50,966 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:38:51,575 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 19:38:51,575 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024223836740717776684', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024223836740717776684 899885"}
2024-09-10 19:38:51,578 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 19:39:08,114 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:39:08,250 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:39:08,251 - INFO - there is a test coming
2024-09-10 19:39:08,251 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 19:39:08,305 - INFO - {'updated_data': 'the data is now as 254714966310'}
2024-09-10 19:39:08,305 - INFO - the data is now as 254714966310
2024-09-10 19:39:08,333 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 19:39:08,333 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 19:39:08,334 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:39:09,006 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:39:09,008 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Yz1lxf4o1IwxB61KPyQSDsIcMzKI'}"}
2024-09-10 19:39:09,008 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTkzOTA5', 'Timestamp': '20240910193909', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2500', 'PartyA': '254714966310', 'PartyB': 827142, 'PhoneNumber': '254714966310', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-167221', 'TransactionDesc': 'Some payment'}
2024-09-10 19:39:09,009 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:39:09,957 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 19:39:09,963 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170713664', 'CheckoutRequestID': 'ws_CO_10092024223909667714966310', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 19:39:22,107 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:39:22,252 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:39:22,253 - INFO - {'updated': 'initiated stk query for ws_CO_10092024223909667714966310 827142 '}
2024-09-10 19:39:22,328 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:39:22,915 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:39:22,917 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer D6IoGK8PkD7rcAEKJL1e2erne0Oo'}"}
2024-09-10 19:39:22,917 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTkzOTIy', 'Timestamp': '20240910193922', 'CheckoutRequestID': 'ws_CO_10092024223909667714966310'}"}
2024-09-10 19:39:22,918 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:39:23,529 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 19:39:23,530 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024223909667714966310', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024223909667714966310 827142"}
2024-09-10 19:39:23,532 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 19:41:27,279 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:41:27,417 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:41:27,418 - INFO - {'updated': 'initiated stk query for ws_CO_10092024224115852703495721 827142 '}
2024-09-10 19:41:27,466 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:41:28,151 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:41:28,153 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer LqbPjk09DnlPiUk5hu03hk31ENwq'}"}
2024-09-10 19:41:28,153 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTk0MTI3', 'Timestamp': '20240910194127', 'CheckoutRequestID': 'ws_CO_10092024224115852703495721'}"}
2024-09-10 19:41:28,154 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:41:28,874 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 19:41:28,874 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024224115852703495721', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024224115852703495721 827142"}
2024-09-10 19:41:28,876 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 19:41:29,866 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794075765', 'CheckoutRequestID': 'ws_CO_10092024224115852703495721', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 400.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA9673P5D'}, {'Name': 'TransactionDate', 'Value': 20240910224129}, {'Name': 'PhoneNumber', 'Value': 254703495721}]}}}}"}
2024-09-10 19:41:29,867 - INFO - {'updated_data': 'callback data began'}
2024-09-10 19:41:29,867 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794075765', 'CheckoutRequestID': 'ws_CO_10092024224115852703495721', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 400.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA9673P5D'}, {'Name': 'TransactionDate', 'Value': 20240910224129}, {'Name': 'PhoneNumber', 'Value': 254703495721}]}}}}}
2024-09-10 19:41:30,059 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:41:30,644 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:41:30,646 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:41:30,937 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:41:31,730 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:41:31,892 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:41:31,893 - INFO - {'updated': 'initiated stk query for ws_CO_10092024224113186793547453 827142 '}
2024-09-10 19:41:31,961 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:41:32,526 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:41:32,528 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 6q3JlKrnNh4JGGPwWUe4jMET15MK'}"}
2024-09-10 19:41:32,528 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTk0MTMx', 'Timestamp': '20240910194131', 'CheckoutRequestID': 'ws_CO_10092024224113186793547453'}"}
2024-09-10 19:41:32,529 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:41:33,169 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 19:41:33,170 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88386678', 'CheckoutRequestID': 'ws_CO_10092024224113186793547453', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024224113186793547453 827142"}
2024-09-10 19:41:33,373 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:41:33,882 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:41:33,883 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:41:34,096 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:41:37,082 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:41:37,097 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-10 19:41:37,098 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-10 19:44:56,518 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88391173', 'CheckoutRequestID': 'ws_CO_10092024224448900721628460', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 22083.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA067C95G'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910224455}, {'Name': 'PhoneNumber', 'Value': 254721628460}]}}}}"}
2024-09-10 19:44:56,518 - INFO - {'updated_data': 'callback data began'}
2024-09-10 19:44:56,518 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88391173', 'CheckoutRequestID': 'ws_CO_10092024224448900721628460', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 22083.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA067C95G'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910224455}, {'Name': 'PhoneNumber', 'Value': 254721628460}]}}}}}
2024-09-10 19:44:56,749 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:44:56,956 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:44:56,957 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:44:57,285 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:44:59,023 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:44:59,169 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:44:59,169 - INFO - there is a test coming
2024-09-10 19:44:59,169 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 19:44:59,228 - INFO - {'updated_data': 'the data is now as 254716098478'}
2024-09-10 19:44:59,229 - INFO - the data is now as 254716098478
2024-09-10 19:44:59,248 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 19:44:59,248 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 19:44:59,249 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:44:59,923 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:44:59,926 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer i54iZMFRj4JnhFaxGmG8KZF8LO93'}"}
2024-09-10 19:44:59,926 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTk0NDU5', 'Timestamp': '20240910194459', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2500', 'PartyA': '254716098478', 'PartyB': 827142, 'PhoneNumber': '254716098478', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-7886', 'TransactionDesc': 'Some payment'}
2024-09-10 19:44:59,928 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:45:00,688 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 19:45:00,694 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585054057889', 'CheckoutRequestID': 'ws_CO_10092024224500453716098478', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 19:45:58,778 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:45:58,888 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:45:58,889 - INFO - {'updated': 'initiated stk query for ws_CO_10092024224546454721628460 827142 '}
2024-09-10 19:45:58,964 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:45:59,546 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:45:59,548 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer jCLgXSzxVG4RCJbmrmb6Vi8orTxH'}"}
2024-09-10 19:45:59,549 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTk0NTU4', 'Timestamp': '20240910194558', 'CheckoutRequestID': 'ws_CO_10092024224546454721628460'}"}
2024-09-10 19:45:59,550 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:46:00,173 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-10 19:46:00,174 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171210180', 'CheckoutRequestID': 'ws_CO_10092024224546454721628460', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_10092024224546454721628460 827142"}
2024-09-10 19:46:00,339 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 19:46:00,738 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 19:46:00,739 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 19:46:00,947 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 19:48:41,305 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:48:41,419 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:48:41,420 - INFO - there is a test coming
2024-09-10 19:48:41,420 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 19:48:41,474 - INFO - {'updated_data': 'the data is now as 254113161720'}
2024-09-10 19:48:41,474 - INFO - the data is now as 254113161720
2024-09-10 19:48:41,490 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 19:48:41,490 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 19:48:41,491 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:48:42,145 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:48:42,147 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer oO513nGirQKmGbYir4tRmvXM2u7R'}"}
2024-09-10 19:48:42,147 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTk0ODQy', 'Timestamp': '20240910194842', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1104', 'PartyA': '254113161720', 'PartyB': 827142, 'PhoneNumber': '254113161720', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '305-126', 'TransactionDesc': 'Some payment'}
2024-09-10 19:48:42,149 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:48:43,062 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 19:48:43,072 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc18100746', 'CheckoutRequestID': 'ws_CO_10092024224842804113161720', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 19:54:04,656 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:54:04,804 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:54:04,805 - INFO - {'updated': 'initiated stk query for ws_CO_10092024225353376759771245 827142 '}
2024-09-10 19:54:04,884 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:54:05,580 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:54:05,582 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer DV6J6BGlGAmZ2FqUZcFo9XY6I3bb'}"}
2024-09-10 19:54:05,583 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTk1NDA0', 'Timestamp': '20240910195404', 'CheckoutRequestID': 'ws_CO_10092024225353376759771245'}"}
2024-09-10 19:54:05,584 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:54:06,199 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 19:54:06,200 - INFO - {'updated': "Received response {'requestId': 'ws_CO_10092024225353376759771245', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_10092024225353376759771245 827142"}
2024-09-10 19:54:06,206 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 19:59:38,806 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 19:59:38,962 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 19:59:38,963 - INFO - there is a test coming
2024-09-10 19:59:38,964 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 19:59:39,010 - INFO - {'updated_data': 'the data is now as 254715710221'}
2024-09-10 19:59:39,011 - INFO - the data is now as 254715710221
2024-09-10 19:59:39,032 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 19:59:39,032 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 19:59:39,034 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:59:39,803 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 19:59:39,805 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer mgcMogPKA8xUR4FT4Q9uMgFqpOJc'}"}
2024-09-10 19:59:39,805 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMTk1OTM5', 'Timestamp': '20240910195939', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254715710221', 'PartyB': 827142, 'PhoneNumber': '254715710221', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-149668', 'TransactionDesc': 'Some payment'}
2024-09-10 19:59:39,806 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 19:59:40,660 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 19:59:40,667 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170737687', 'CheckoutRequestID': 'ws_CO_10092024225940403715710221', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 20:14:33,974 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 20:14:34,160 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 20:14:34,160 - INFO - {'updated': 'initiated stk query for ws_CO_10092024231422892720568623 827142 '}
2024-09-10 20:14:34,243 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:14:34,850 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 20:14:34,852 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer cq0Ew4MuN2jEVe5c8lEOQ18AVcfy'}"}
2024-09-10 20:14:34,852 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMjAxNDM0', 'Timestamp': '20240910201434', 'CheckoutRequestID': 'ws_CO_10092024231422892720568623'}"}
2024-09-10 20:14:34,853 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 20:14:35,513 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 369
2024-09-10 20:14:35,514 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170752980', 'CheckoutRequestID': 'ws_CO_10092024231422892720568623', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_10092024231422892720568623 827142"}
2024-09-10 20:14:35,644 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 20:14:35,836 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 20:14:35,838 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 20:14:36,369 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 20:55:20,286 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b7797103', 'CheckoutRequestID': 'ws_CO_10092024235504866721727231', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA36AFLLZ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910235519}, {'Name': 'PhoneNumber', 'Value': 254721727231}]}}}}"}
2024-09-10 20:55:20,286 - INFO - {'updated_data': 'callback data began'}
2024-09-10 20:55:20,286 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b7797103', 'CheckoutRequestID': 'ws_CO_10092024235504866721727231', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIA36AFLLZ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240910235519}, {'Name': 'PhoneNumber', 'Value': 254721727231}]}}}}}
2024-09-10 20:55:20,547 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 20:55:20,936 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 20:55:20,938 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 20:55:21,160 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 21:05:57,588 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 21:05:57,752 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 21:05:57,753 - INFO - {'updated': 'initiated stk query for ws_CO_11092024000544933112052031 827142 '}
2024-09-10 21:05:57,814 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 21:05:58,409 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 21:05:58,411 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer r6UTqxFowCHOeVjJZuQFbLG5qWvi'}"}
2024-09-10 21:05:58,412 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMjEwNTU3', 'Timestamp': '20240910210557', 'CheckoutRequestID': 'ws_CO_11092024000544933112052031'}"}
2024-09-10 21:05:58,413 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 21:05:59,133 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-10 21:05:59,134 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024000544933112052031', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024000544933112052031 827142"}
2024-09-10 21:05:59,136 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-10 21:06:48,932 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 21:06:49,093 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 21:06:49,094 - INFO - there is a test coming
2024-09-10 21:06:49,094 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 21:06:49,145 - INFO - {'updated_data': 'the data is now as 254112052031'}
2024-09-10 21:06:49,145 - INFO - the data is now as 254112052031
2024-09-10 21:06:49,163 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 21:06:49,164 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 21:06:49,165 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 21:06:49,759 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 21:06:49,761 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 518vfAfpnQYk7pXy0g7BTh6cdHUB'}"}
2024-09-10 21:06:49,762 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMjEwNjQ5', 'Timestamp': '20240910210649', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '135', 'PartyA': '254112052031', 'PartyB': 827142, 'PhoneNumber': '254112052031', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '264-30716', 'TransactionDesc': 'Some payment'}
2024-09-10 21:06:49,763 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 21:06:50,539 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 21:06:50,546 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170795038', 'CheckoutRequestID': 'ws_CO_11092024000650321112052031', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 21:14:13,557 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 21:14:13,775 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 21:14:13,776 - INFO - there is a test coming
2024-09-10 21:14:13,776 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 21:14:13,825 - INFO - {'updated_data': 'the data is now as 254743619080'}
2024-09-10 21:14:13,825 - INFO - the data is now as 254743619080
2024-09-10 21:14:13,849 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 21:14:13,850 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 21:14:13,851 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 21:14:14,455 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 21:14:14,457 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer t9qdNB6jrlZy950Sksq0iMXPO14K'}"}
2024-09-10 21:14:14,458 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMjExNDE0', 'Timestamp': '20240910211414', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254743619080', 'PartyB': 899885, 'PhoneNumber': '254743619080', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Order No . 13031', 'TransactionDesc': 'Some payment'}
2024-09-10 21:14:14,459 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 21:14:15,242 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 21:14:15,249 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208794158519', 'CheckoutRequestID': 'ws_CO_11092024001414982743619080', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 21:14:26,539 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794158519', 'CheckoutRequestID': 'ws_CO_11092024001414982743619080', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}"}
2024-09-10 21:14:26,539 - INFO - {'updated_data': 'callback data began'}
2024-09-10 21:14:26,539 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794158519', 'CheckoutRequestID': 'ws_CO_11092024001414982743619080', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}}
2024-09-10 21:14:26,703 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 21:14:26,901 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 21:14:26,903 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 21:14:27,422 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 21:14:43,354 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88470343', 'CheckoutRequestID': 'ws_CO_11092024001412211748898805', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-10 21:14:43,355 - INFO - {'updated_data': 'callback data began'}
2024-09-10 21:14:43,355 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88470343', 'CheckoutRequestID': 'ws_CO_11092024001412211748898805', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-10 21:14:43,517 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 21:14:44,018 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 21:14:44,019 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 21:14:44,537 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 21:14:50,028 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 21:14:50,303 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 21:14:50,304 - INFO - {'updated': 'initiated stk query for ws_CO_11092024001412211748898805 899885 '}
2024-09-10 21:14:50,379 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 21:14:50,975 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 21:14:50,983 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer n0j5feD2EOJ1EmebqaGSlBM6TemJ'}"}
2024-09-10 21:14:50,983 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMjExNDUw', 'Timestamp': '20240910211450', 'CheckoutRequestID': 'ws_CO_11092024001412211748898805'}"}
2024-09-10 21:14:50,984 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 21:14:51,652 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 376
2024-09-10 21:14:51,653 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88470343', 'CheckoutRequestID': 'ws_CO_11092024001412211748898805', 'ResultCode': '1037', 'ResultDesc': 'DS timeout user cannot be reached'} for ws_CO_11092024001412211748898805 899885"}
2024-09-10 21:14:51,848 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 21:14:52,052 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 21:14:52,053 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 21:14:52,277 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 21:20:06,525 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88474219', 'CheckoutRequestID': 'ws_CO_11092024001959181717639113', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2864.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB96B3ULN'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911002005}, {'Name': 'PhoneNumber', 'Value': 254717639113}]}}}}"}
2024-09-10 21:20:06,525 - INFO - {'updated_data': 'callback data began'}
2024-09-10 21:20:06,525 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88474219', 'CheckoutRequestID': 'ws_CO_11092024001959181717639113', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2864.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB96B3ULN'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911002005}, {'Name': 'PhoneNumber', 'Value': 254717639113}]}}}}}
2024-09-10 21:20:06,799 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 21:20:07,215 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 21:20:07,216 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 21:20:07,429 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 21:20:10,777 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 21:20:10,935 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 21:20:10,935 - INFO - {'updated': 'initiated stk query for ws_CO_11092024001959181717639113 827142 '}
2024-09-10 21:20:11,002 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 21:20:11,574 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 21:20:11,576 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer QPs36nWlN0Z8gecljMZdIyZo2Gxx'}"}
2024-09-10 21:20:11,577 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMjEyMDEx', 'Timestamp': '20240910212011', 'CheckoutRequestID': 'ws_CO_11092024001959181717639113'}"}
2024-09-10 21:20:11,578 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 21:20:12,213 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 21:20:12,214 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88474219', 'CheckoutRequestID': 'ws_CO_11092024001959181717639113', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024001959181717639113 827142"}
2024-09-10 21:20:12,335 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 21:20:12,534 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 21:20:12,535 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 21:20:12,744 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 21:25:39,170 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 21:25:39,333 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 21:25:39,334 - INFO - there is a test coming
2024-09-10 21:25:39,334 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 21:25:39,380 - INFO - {'updated_data': 'the data is now as 254707479146'}
2024-09-10 21:25:39,380 - INFO - the data is now as 254707479146
2024-09-10 21:25:39,398 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 21:25:39,398 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 21:25:39,399 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 21:25:39,989 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 21:25:39,991 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer eDO0NnEj6nw80G178Ot0M3dU31AU'}"}
2024-09-10 21:25:39,992 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMjEyNTM5', 'Timestamp': '20240910212539', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254707479146', 'PartyB': 899885, 'PhoneNumber': '254707479146', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054224', 'TransactionDesc': 'Some payment'}
2024-09-10 21:25:39,993 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 21:25:40,872 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-10 21:25:40,880 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171295446', 'CheckoutRequestID': 'ws_CO_11092024002540617707479146', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 22:01:55,422 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 22:01:55,549 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 22:01:55,550 - INFO - there is a test coming
2024-09-10 22:01:55,550 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 22:01:55,606 - INFO - {'updated_data': 'the data is now as 254723220235'}
2024-09-10 22:01:55,607 - INFO - the data is now as 254723220235
2024-09-10 22:01:55,622 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 22:01:55,622 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 22:01:55,623 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 22:01:56,294 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 22:01:56,297 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer JsGeX98U18dcmGQVMbVAeyTacwgB'}"}
2024-09-10 22:01:56,297 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMjIwMTU2', 'Timestamp': '20240910220156', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3532', 'PartyA': '254723220235', 'PartyB': 827142, 'PhoneNumber': '254723220235', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-11795', 'TransactionDesc': 'Some payment'}
2024-09-10 22:01:56,299 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 22:01:57,074 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 22:01:57,080 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518325255', 'CheckoutRequestID': 'ws_CO_11092024010156846723220235', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 22:03:09,808 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 22:03:09,981 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 22:03:09,982 - INFO - there is a test coming
2024-09-10 22:03:09,982 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 22:03:10,035 - INFO - {'updated_data': 'the data is now as 254791975322'}
2024-09-10 22:03:10,035 - INFO - the data is now as 254791975322
2024-09-10 22:03:10,053 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 22:03:10,053 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 22:03:10,054 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 22:03:10,758 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 22:03:10,760 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer PADraboRHJG0cUSD9oGfATR183SF'}"}
2024-09-10 22:03:10,760 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMjIwMzEw', 'Timestamp': '20240910220310', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1100', 'PartyA': '254791975322', 'PartyB': 899885, 'PhoneNumber': '254791975322', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054225', 'TransactionDesc': 'Some payment'}
2024-09-10 22:03:10,761 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 22:03:11,497 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 22:03:11,503 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc18323245', 'CheckoutRequestID': 'ws_CO_11092024010311281791975322', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 22:24:35,515 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 22:24:35,683 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 22:24:35,684 - INFO - there is a test coming
2024-09-10 22:24:35,684 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 22:24:35,741 - INFO - {'updated_data': 'the data is now as 254702181139'}
2024-09-10 22:24:35,741 - INFO - the data is now as 254702181139
2024-09-10 22:24:35,758 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 22:24:35,759 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 22:24:35,760 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 22:24:36,601 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 22:24:36,603 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer mZ04tZnA6l9fJkdthLr8RCdr1s4L'}"}
2024-09-10 22:24:36,603 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMjIyNDM2', 'Timestamp': '20240910222436', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254702181139', 'PartyB': 899885, 'PhoneNumber': '254702181139', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0626429-1726007073842', 'TransactionDesc': 'Some payment'}
2024-09-10 22:24:36,604 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 22:24:37,337 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 22:24:37,343 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b7902233', 'CheckoutRequestID': 'ws_CO_11092024012437131702181139', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 22:24:58,685 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 22:24:58,846 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 22:24:58,848 - INFO - {'updated': 'initiated stk query for ws_CO_11092024012437131702181139 899885 '}
2024-09-10 22:24:58,906 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 22:24:59,478 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 22:24:59,480 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer mLXcnKqAmsZu0yhdj6hAOPMUnIGq'}"}
2024-09-10 22:24:59,480 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMjIyNDU4', 'Timestamp': '20240910222458', 'CheckoutRequestID': 'ws_CO_11092024012437131702181139'}"}
2024-09-10 22:24:59,481 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 22:25:00,122 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-10 22:25:00,123 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b7902233', 'CheckoutRequestID': 'ws_CO_11092024012437131702181139', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024012437131702181139 899885"}
2024-09-10 22:25:00,254 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 22:25:00,467 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 22:25:00,468 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 22:25:01,008 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 22:26:31,251 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 22:26:31,398 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 22:26:31,399 - INFO - {'updated': 'initiated stk query for ws_CO_11092024012610387702181139 899885 '}
2024-09-10 22:26:31,493 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 22:26:32,061 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 22:26:32,063 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer tGdfCJr32F5CsQwBZaonnG5xqDiN'}"}
2024-09-10 22:26:32,063 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMjIyNjMx', 'Timestamp': '20240910222631', 'CheckoutRequestID': 'ws_CO_11092024012610387702181139'}"}
2024-09-10 22:26:32,064 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 22:26:32,698 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 22:26:32,699 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88512227', 'CheckoutRequestID': 'ws_CO_11092024012610387702181139', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024012610387702181139 899885"}
2024-09-10 22:26:32,894 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 22:26:33,085 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 22:26:33,086 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 22:26:33,296 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 22:26:58,037 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 22:26:58,190 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 22:26:58,191 - INFO - there is a test coming
2024-09-10 22:26:58,191 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 22:26:58,240 - INFO - {'updated_data': 'the data is now as 254728059851'}
2024-09-10 22:26:58,240 - INFO - the data is now as 254728059851
2024-09-10 22:26:58,257 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 22:26:58,257 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 22:26:58,258 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 22:26:58,824 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 22:26:58,826 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer TPwznH6DpTYQfpTOt2F7H4mBKwuP'}"}
2024-09-10 22:26:58,827 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMjIyNjU4', 'Timestamp': '20240910222658', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254728059851', 'PartyB': 899885, 'PhoneNumber': '254728059851', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054164', 'TransactionDesc': 'Some payment'}
2024-09-10 22:26:58,828 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 22:26:59,634 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 22:26:59,640 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc18344892', 'CheckoutRequestID': 'ws_CO_11092024012659410728059851', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 22:27:18,779 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc18344892', 'CheckoutRequestID': 'ws_CO_11092024012659410728059851', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB36C5FSR'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911012718}, {'Name': 'PhoneNumber', 'Value': 254728059851}]}}}}"}
2024-09-10 22:27:18,780 - INFO - {'updated_data': 'callback data began'}
2024-09-10 22:27:18,780 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc18344892', 'CheckoutRequestID': 'ws_CO_11092024012659410728059851', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB36C5FSR'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911012718}, {'Name': 'PhoneNumber', 'Value': 254728059851}]}}}}}
2024-09-10 22:27:18,976 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 22:27:19,162 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 22:27:19,164 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 22:27:19,684 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 22:27:20,383 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 22:27:20,586 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 22:27:20,586 - INFO - {'updated': 'initiated stk query for ws_CO_11092024012659410728059851 899885 '}
2024-09-10 22:27:20,654 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 22:27:21,352 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 22:27:21,354 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer JR9HSaB3i07aAhWPpv1Bpxx9jypE'}"}
2024-09-10 22:27:21,355 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMjIyNzIw', 'Timestamp': '20240910222720', 'CheckoutRequestID': 'ws_CO_11092024012659410728059851'}"}
2024-09-10 22:27:21,356 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 22:27:22,029 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 22:27:22,030 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc18344892', 'CheckoutRequestID': 'ws_CO_11092024012659410728059851', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024012659410728059851 899885"}
2024-09-10 22:27:22,166 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 22:27:22,667 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 22:27:22,669 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 22:27:22,892 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 22:34:22,792 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 22:34:22,920 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 22:34:22,921 - INFO - there is a test coming
2024-09-10 22:34:22,921 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 22:34:22,967 - INFO - {'updated_data': 'the data is now as 254721770472'}
2024-09-10 22:34:22,967 - INFO - the data is now as 254721770472
2024-09-10 22:34:22,989 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 22:34:22,989 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 22:34:22,991 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 22:34:23,881 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 22:34:23,883 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer GnDtLCzdnHSecGFEvPuE60IABB01'}"}
2024-09-10 22:34:23,883 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMjIzNDIz', 'Timestamp': '20240910223423', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2500', 'PartyA': '254721770472', 'PartyB': 899885, 'PhoneNumber': '254721770472', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0622347-1726007661859', 'TransactionDesc': 'Some payment'}
2024-09-10 22:34:23,884 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 22:34:24,641 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 22:34:24,646 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208794204432', 'CheckoutRequestID': 'ws_CO_11092024013424413721770472', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 22:47:10,318 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518365946', 'CheckoutRequestID': 'ws_CO_11092024014702911798943951', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB56CC9FB'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911014709}, {'Name': 'PhoneNumber', 'Value': 254798943951}]}}}}"}
2024-09-10 22:47:10,319 - INFO - {'updated_data': 'callback data began'}
2024-09-10 22:47:10,319 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518365946', 'CheckoutRequestID': 'ws_CO_11092024014702911798943951', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB56CC9FB'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911014709}, {'Name': 'PhoneNumber', 'Value': 254798943951}]}}}}}
2024-09-10 22:47:10,515 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 22:47:11,012 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 22:47:11,014 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 22:47:11,238 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 22:47:14,034 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 22:47:14,185 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 22:47:14,186 - INFO - {'updated': 'initiated stk query for ws_CO_11092024014702911798943951 899885 '}
2024-09-10 22:47:14,250 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 22:47:14,836 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 22:47:14,838 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 0hMrTUIYGyvtyLKkHXaRsi6Mu2d3'}"}
2024-09-10 22:47:14,838 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMjI0NzE0', 'Timestamp': '20240910224714', 'CheckoutRequestID': 'ws_CO_11092024014702911798943951'}"}
2024-09-10 22:47:14,839 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 22:47:15,529 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-10 22:47:15,530 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518365946', 'CheckoutRequestID': 'ws_CO_11092024014702911798943951', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024014702911798943951 899885"}
2024-09-10 22:47:15,679 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 22:47:15,878 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 22:47:15,880 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 22:47:16,404 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-10 22:47:58,381 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 22:47:58,557 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 22:47:58,558 - INFO - there is a test coming
2024-09-10 22:47:58,558 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-10 22:47:58,605 - INFO - {'updated_data': 'the data is now as 254724175274'}
2024-09-10 22:47:58,605 - INFO - the data is now as 254724175274
2024-09-10 22:47:58,627 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 22:47:58,627 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 22:47:58,628 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 22:47:59,216 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 22:47:59,219 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer l9TlFLf42QdlNk7Hb3ZPDUHVTIAy'}"}
2024-09-10 22:47:59,220 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTEwMjI0NzU5', 'Timestamp': '20240910224759', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '15000', 'PartyA': '254724175274', 'PartyB': 827142, 'PhoneNumber': '254724175274', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-21527', 'TransactionDesc': 'Some payment'}
2024-09-10 22:47:59,221 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 22:48:00,011 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-10 22:48:00,018 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585054331318', 'CheckoutRequestID': 'ws_CO_11092024014759774724175274', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 22:48:02,483 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-10 22:48:02,684 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-10 22:48:02,685 - INFO - there is a test coming
2024-09-10 22:48:02,685 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-10 22:48:02,738 - INFO - {'updated_data': 'the data is now as 254798943951'}
2024-09-10 22:48:02,739 - INFO - the data is now as 254798943951
2024-09-10 22:48:02,766 - INFO - {'updated_data': 'The paybill is found'}
2024-09-10 22:48:02,766 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-10 22:48:02,767 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 22:48:03,450 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-10 22:48:03,452 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer apBlsn3MC4PjYRdA9CwePdjI3kj9'}"}
2024-09-10 22:48:03,453 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTEwMjI0ODAz', 'Timestamp': '20240910224803', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254798943951', 'PartyB': 899885, 'PhoneNumber': '254798943951', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054165', 'TransactionDesc': 'Some payment'}
2024-09-10 22:48:03,454 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-10 22:48:04,230 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-10 22:48:04,243 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88522818', 'CheckoutRequestID': 'ws_CO_11092024014804012798943951', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-10 22:48:19,975 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88522818', 'CheckoutRequestID': 'ws_CO_11092024014804012798943951', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-10 22:48:19,975 - INFO - {'updated_data': 'callback data began'}
2024-09-10 22:48:19,975 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88522818', 'CheckoutRequestID': 'ws_CO_11092024014804012798943951', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-10 22:48:20,226 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-10 22:48:20,733 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-10 22:48:20,734 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-10 22:48:21,273 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 00:30:11,920 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 00:30:12,137 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 00:30:12,138 - INFO - there is a test coming
2024-09-11 00:30:12,138 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 00:30:12,184 - INFO - {'updated_data': 'the data is now as 254741967921'}
2024-09-11 00:30:12,184 - INFO - the data is now as 254741967921
2024-09-11 00:30:12,199 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 00:30:12,200 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 00:30:12,201 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 00:30:12,951 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 00:30:12,953 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer GaQ8FXPAfbN9NSGQXn7sCQHjkWG0'}"}
2024-09-11 00:30:12,953 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDAzMDEy', 'Timestamp': '20240911003012', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '500', 'PartyA': '254741967921', 'PartyB': 899885, 'PhoneNumber': '254741967921', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA004984CP-1726015201732', 'TransactionDesc': 'Some payment'}
2024-09-11 00:30:12,954 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 00:30:13,821 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 00:30:13,827 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170662474', 'CheckoutRequestID': 'ws_CO_11092024033013589741967921', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 00:30:36,391 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 00:30:36,532 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 00:30:36,532 - INFO - {'updated': 'initiated stk query for ws_CO_11092024033013589741967921 899885 '}
2024-09-11 00:30:36,589 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 00:30:37,204 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 00:30:37,206 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Vo1V0nQy66hZ3EnyoT4T9rgYoJRl'}"}
2024-09-11 00:30:37,206 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDAzMDM2', 'Timestamp': '20240911003036', 'CheckoutRequestID': 'ws_CO_11092024033013589741967921'}"}
2024-09-11 00:30:37,208 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 00:30:37,841 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 00:30:37,841 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170662474', 'CheckoutRequestID': 'ws_CO_11092024033013589741967921', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024033013589741967921 899885"}
2024-09-11 00:30:37,966 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 00:30:38,155 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 00:30:38,156 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 00:30:38,680 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 02:49:43,667 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585054510813', 'CheckoutRequestID': 'ws_CO_11092024054936848740168548', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 450.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB86ET46Y'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911054943}, {'Name': 'PhoneNumber', 'Value': 254740168548}]}}}}"}
2024-09-11 02:49:43,667 - INFO - {'updated_data': 'callback data began'}
2024-09-11 02:49:43,667 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585054510813', 'CheckoutRequestID': 'ws_CO_11092024054936848740168548', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 450.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB86ET46Y'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911054943}, {'Name': 'PhoneNumber', 'Value': 254740168548}]}}}}}
2024-09-11 02:49:43,835 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 02:49:44,532 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 02:49:44,534 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 02:49:44,741 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 02:49:48,752 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 02:49:48,916 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 02:49:48,917 - INFO - {'updated': 'initiated stk query for ws_CO_11092024054936848740168548 827142 '}
2024-09-11 02:49:48,980 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 02:49:49,561 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 02:49:49,563 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer T8LG2Ese1k0JMRg8XOnuQGAOnJbR'}"}
2024-09-11 02:49:49,564 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDI0OTQ4', 'Timestamp': '20240911024948', 'CheckoutRequestID': 'ws_CO_11092024054936848740168548'}"}
2024-09-11 02:49:49,565 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 02:49:50,337 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 02:49:50,338 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585054510813', 'CheckoutRequestID': 'ws_CO_11092024054936848740168548', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024054936848740168548 827142"}
2024-09-11 02:49:50,462 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 02:49:50,640 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 02:49:50,641 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 02:49:51,170 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 03:00:19,909 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 03:00:20,083 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 03:00:20,084 - INFO - there is a test coming
2024-09-11 03:00:20,084 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 03:00:20,133 - INFO - {'updated_data': 'the data is now as 254791509919'}
2024-09-11 03:00:20,133 - INFO - the data is now as 254791509919
2024-09-11 03:00:20,155 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 03:00:20,155 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 03:00:20,156 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:00:21,026 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 03:00:21,029 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer oWIwclGvcYMNaNTvkluh1WAUHT2V'}"}
2024-09-11 03:00:21,029 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDMwMDIx', 'Timestamp': '20240911030021', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3500', 'PartyA': '254791509919', 'PartyB': 827142, 'PhoneNumber': '254791509919', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '121-57780', 'TransactionDesc': 'Some payment'}
2024-09-11 03:00:21,031 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:00:21,857 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 03:00:21,863 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518556638', 'CheckoutRequestID': 'ws_CO_11092024060021641791509919', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 03:03:30,366 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585054524340', 'CheckoutRequestID': 'ws_CO_11092024060321959705654733', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 50000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB36F6ZRJ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911060329}, {'Name': 'PhoneNumber', 'Value': 254705654733}]}}}}"}
2024-09-11 03:03:30,366 - INFO - {'updated_data': 'callback data began'}
2024-09-11 03:03:30,366 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585054524340', 'CheckoutRequestID': 'ws_CO_11092024060321959705654733', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 50000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB36F6ZRJ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911060329}, {'Name': 'PhoneNumber', 'Value': 254705654733}]}}}}}
2024-09-11 03:03:30,531 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 03:03:30,730 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 03:03:30,732 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 03:03:31,252 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 03:18:22,161 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 03:18:22,313 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 03:18:22,313 - INFO - there is a test coming
2024-09-11 03:18:22,313 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 03:18:22,373 - INFO - {'updated_data': 'the data is now as 254724627850'}
2024-09-11 03:18:22,373 - INFO - the data is now as 254724627850
2024-09-11 03:18:22,391 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 03:18:22,391 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 03:18:22,392 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:18:23,138 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 03:18:23,140 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer NaBlxwmJnHGtynIiX8NvXjEP0K23'}"}
2024-09-11 03:18:23,141 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDMxODIz', 'Timestamp': '20240911031823', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254724627850', 'PartyB': 827142, 'PhoneNumber': '254724627850', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-27982', 'TransactionDesc': 'Some payment'}
2024-09-11 03:18:23,142 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:18:23,898 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 03:18:23,906 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee598492945', 'CheckoutRequestID': 'ws_CO_11092024061823707724627850', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 03:18:33,738 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee598492945', 'CheckoutRequestID': 'ws_CO_11092024061823707724627850', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB26FR6EY'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911061833}, {'Name': 'PhoneNumber', 'Value': 254724627850}]}}}}"}
2024-09-11 03:18:33,739 - INFO - {'updated_data': 'callback data began'}
2024-09-11 03:18:33,739 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee598492945', 'CheckoutRequestID': 'ws_CO_11092024061823707724627850', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB26FR6EY'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911061833}, {'Name': 'PhoneNumber', 'Value': 254724627850}]}}}}}
2024-09-11 03:18:33,903 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 03:18:34,095 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 03:18:34,096 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 03:18:34,301 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 03:18:37,993 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 03:18:38,140 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 03:18:38,141 - INFO - there is a test coming
2024-09-11 03:18:38,141 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 03:18:38,184 - INFO - {'updated_data': 'the data is now as 254724627850'}
2024-09-11 03:18:38,185 - INFO - the data is now as 254724627850
2024-09-11 03:18:38,204 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 03:18:38,204 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 03:18:38,205 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:18:38,797 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 03:18:38,799 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer iOT9U849EComqANWQ9qgJAHrGYwk'}"}
2024-09-11 03:18:38,800 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDMxODM4', 'Timestamp': '20240911031838', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254724627850', 'PartyB': 827142, 'PhoneNumber': '254724627850', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-27982', 'TransactionDesc': 'Some payment'}
2024-09-11 03:18:38,801 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:18:39,553 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 03:18:39,562 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88649573', 'CheckoutRequestID': 'ws_CO_11092024061839339724627850', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 03:18:55,061 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88649573', 'CheckoutRequestID': 'ws_CO_11092024061839339724627850', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 03:18:55,062 - INFO - {'updated_data': 'callback data began'}
2024-09-11 03:18:55,062 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88649573', 'CheckoutRequestID': 'ws_CO_11092024061839339724627850', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 03:18:55,235 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 03:18:55,732 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 03:18:55,733 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 03:18:55,938 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 03:20:08,729 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 03:20:08,898 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 03:20:08,899 - INFO - {'updated': 'initiated stk query for ws_CO_11092024061839339724627850 827142 '}
2024-09-11 03:20:08,958 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:20:09,578 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 03:20:09,580 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer VKGCqQ1ddAXQmWKZNf6BOH6L6UUR'}"}
2024-09-11 03:20:09,581 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDMyMDA4', 'Timestamp': '20240911032008', 'CheckoutRequestID': 'ws_CO_11092024061839339724627850'}"}
2024-09-11 03:20:09,582 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:20:10,213 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-11 03:20:10,213 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88649573', 'CheckoutRequestID': 'ws_CO_11092024061839339724627850', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_11092024061839339724627850 827142"}
2024-09-11 03:20:10,340 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 03:20:10,828 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 03:20:10,829 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 03:20:11,354 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 03:22:14,923 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 03:22:15,106 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 03:22:15,106 - INFO - there is a test coming
2024-09-11 03:22:15,106 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 03:22:15,156 - INFO - {'updated_data': 'the data is now as 254706520458'}
2024-09-11 03:22:15,156 - INFO - the data is now as 254706520458
2024-09-11 03:22:15,174 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 03:22:15,174 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 03:22:15,176 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:22:15,946 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 03:22:15,948 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer aQEqJBgRijLsJtOBktAvmPAjRZeH'}"}
2024-09-11 03:22:15,948 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDMyMjE1', 'Timestamp': '20240911032215', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1101', 'PartyA': '254706520458', 'PartyB': 827142, 'PhoneNumber': '254706520458', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-712', 'TransactionDesc': 'Some payment'}
2024-09-11 03:22:15,950 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:22:16,737 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 03:22:16,747 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208794339797', 'CheckoutRequestID': 'ws_CO_11092024062216498706520458', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 03:26:10,325 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 03:26:10,465 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 03:26:10,466 - INFO - {'updated': 'initiated stk query for ws_CO_11092024062559102723831641 827142 '}
2024-09-11 03:26:10,542 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:26:11,131 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 03:26:11,133 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Gt2zrDhnAy7KVVAqu0y6teguWUaI'}"}
2024-09-11 03:26:11,134 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDMyNjEw', 'Timestamp': '20240911032610', 'CheckoutRequestID': 'ws_CO_11092024062559102723831641'}"}
2024-09-11 03:26:11,135 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:26:11,797 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 03:26:11,798 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc18583619', 'CheckoutRequestID': 'ws_CO_11092024062559102723831641', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024062559102723831641 827142"}
2024-09-11 03:26:11,924 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 03:26:12,118 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 03:26:12,119 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 03:26:12,340 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 03:26:54,499 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 03:26:54,634 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 03:26:54,635 - INFO - there is a test coming
2024-09-11 03:26:54,635 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 03:26:54,681 - INFO - {'updated_data': 'the data is now as 254720975661'}
2024-09-11 03:26:54,681 - INFO - the data is now as 254720975661
2024-09-11 03:26:54,699 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 03:26:54,699 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 03:26:54,700 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:26:55,279 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 03:26:55,281 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer dGlvamyBTrhv3N7u2CUBTDM4rJtm'}"}
2024-09-11 03:26:55,282 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDMyNjU1', 'Timestamp': '20240911032655', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2500', 'PartyA': '254720975661', 'PartyB': 827142, 'PhoneNumber': '254720975661', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-41401', 'TransactionDesc': 'Some payment'}
2024-09-11 03:26:55,283 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:26:56,129 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 03:26:56,135 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170985250', 'CheckoutRequestID': 'ws_CO_11092024062655834720975661', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 03:27:07,468 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 03:27:07,626 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 03:27:07,627 - INFO - {'updated': 'initiated stk query for ws_CO_11092024062655834720975661 827142 '}
2024-09-11 03:27:07,681 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:27:08,263 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 03:27:08,266 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ZEAXmexmuT3HZY7cQcaQcMFAJCqC'}"}
2024-09-11 03:27:08,266 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDMyNzA3', 'Timestamp': '20240911032707', 'CheckoutRequestID': 'ws_CO_11092024062655834720975661'}"}
2024-09-11 03:27:08,268 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:27:08,925 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 369
2024-09-11 03:27:08,926 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6170985250', 'CheckoutRequestID': 'ws_CO_11092024062655834720975661', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_11092024062655834720975661 827142"}
2024-09-11 03:27:09,046 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 03:27:09,236 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 03:27:09,237 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 03:27:09,468 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 03:31:46,289 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 03:31:46,480 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 03:31:46,481 - INFO - {'updated': 'initiated stk query for ws_CO_11092024063118770720975661 827142 '}
2024-09-11 03:31:46,536 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:31:47,188 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 03:31:47,190 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer fvNfe2mHYMm5rgLfnwt7nrg4AQQG'}"}
2024-09-11 03:31:47,191 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDMzMTQ2', 'Timestamp': '20240911033146', 'CheckoutRequestID': 'ws_CO_11092024063118770720975661'}"}
2024-09-11 03:31:47,192 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:31:47,836 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 03:31:47,836 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024063118770720975661', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024063118770720975661 827142"}
2024-09-11 03:31:47,839 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 03:32:11,875 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88658371', 'CheckoutRequestID': 'ws_CO_11092024063118770720975661', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 03:32:11,875 - INFO - {'updated_data': 'callback data began'}
2024-09-11 03:32:11,875 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88658371', 'CheckoutRequestID': 'ws_CO_11092024063118770720975661', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 03:32:12,052 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 03:32:12,747 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 03:32:12,748 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 03:32:12,954 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 03:32:24,719 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 03:32:24,860 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 03:32:24,861 - INFO - {'updated': 'initiated stk query for ws_CO_11092024063118770720975661 827142 '}
2024-09-11 03:32:24,910 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:32:25,570 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 03:32:25,571 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer GDNIsz1eCy1b3X6bnix9KFfljB6Q'}"}
2024-09-11 03:32:25,572 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDMzMjI0', 'Timestamp': '20240911033224', 'CheckoutRequestID': 'ws_CO_11092024063118770720975661'}"}
2024-09-11 03:32:25,573 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:32:26,179 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-11 03:32:26,180 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88658371', 'CheckoutRequestID': 'ws_CO_11092024063118770720975661', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_11092024063118770720975661 827142"}
2024-09-11 03:32:26,310 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 03:32:26,498 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 03:32:26,500 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 03:32:26,691 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 03:32:44,117 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 03:32:44,282 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 03:32:44,283 - INFO - {'updated': 'initiated stk query for ws_CO_11092024063118770720975661 827142 '}
2024-09-11 03:32:44,346 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:32:44,932 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 03:32:44,934 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer R3PlG1wPoiemxNpJCLEPGGr8Bcuv'}"}
2024-09-11 03:32:44,934 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDMzMjQ0', 'Timestamp': '20240911033244', 'CheckoutRequestID': 'ws_CO_11092024063118770720975661'}"}
2024-09-11 03:32:44,936 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:32:45,554 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-11 03:32:45,555 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88658371', 'CheckoutRequestID': 'ws_CO_11092024063118770720975661', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_11092024063118770720975661 827142"}
2024-09-11 03:32:45,677 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 03:32:46,173 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 03:32:46,175 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 03:32:46,378 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 03:33:33,734 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 03:33:33,867 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 03:33:33,868 - INFO - there is a test coming
2024-09-11 03:33:33,868 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 03:33:33,917 - INFO - {'updated_data': 'the data is now as 254722914324'}
2024-09-11 03:33:33,917 - INFO - the data is now as 254722914324
2024-09-11 03:33:33,935 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 03:33:33,935 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 03:33:33,937 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:33:34,603 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 03:33:34,605 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer sV0MSaWEuc2OsawQ7YHWjngkf9EA'}"}
2024-09-11 03:33:34,605 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDMzMzM0', 'Timestamp': '20240911033334', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254722914324', 'PartyB': 827142, 'PhoneNumber': '254722914324', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-50550', 'TransactionDesc': 'Some payment'}
2024-09-11 03:33:34,607 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:33:35,327 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 03:33:35,344 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88659613', 'CheckoutRequestID': 'ws_CO_11092024063335141722914324', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 03:33:43,161 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88659613', 'CheckoutRequestID': 'ws_CO_11092024063335141722914324', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB56GJ90P'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911063342}, {'Name': 'PhoneNumber', 'Value': 254722914324}]}}}}"}
2024-09-11 03:33:43,162 - INFO - {'updated_data': 'callback data began'}
2024-09-11 03:33:43,162 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88659613', 'CheckoutRequestID': 'ws_CO_11092024063335141722914324', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB56GJ90P'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911063342}, {'Name': 'PhoneNumber', 'Value': 254722914324}]}}}}}
2024-09-11 03:33:43,337 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 03:33:43,517 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 03:33:43,518 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 03:33:43,722 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 03:33:46,238 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 03:33:46,378 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 03:33:46,380 - INFO - {'updated': 'initiated stk query for ws_CO_11092024063335141722914324 827142 '}
2024-09-11 03:33:46,460 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:33:47,025 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 03:33:47,030 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 45fEZ9GzAPQcmXxUfSaTFGim4SNf'}"}
2024-09-11 03:33:47,031 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDMzMzQ2', 'Timestamp': '20240911033346', 'CheckoutRequestID': 'ws_CO_11092024063335141722914324'}"}
2024-09-11 03:33:47,032 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:33:47,677 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 03:33:47,677 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88659613', 'CheckoutRequestID': 'ws_CO_11092024063335141722914324', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024063335141722914324 827142"}
2024-09-11 03:33:47,796 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 03:33:47,987 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 03:33:47,989 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 03:33:48,495 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 03:37:57,742 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 03:37:57,881 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 03:37:57,882 - INFO - there is a test coming
2024-09-11 03:37:57,882 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 03:37:57,937 - INFO - {'updated_data': 'the data is now as 254745883316'}
2024-09-11 03:37:57,937 - INFO - the data is now as 254745883316
2024-09-11 03:37:57,955 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 03:37:57,955 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 03:37:57,956 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:37:58,671 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 03:37:58,673 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer BV3WHCGPG79hmV3nnlzLDuGF9rqI'}"}
2024-09-11 03:37:58,674 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDMzNzU4', 'Timestamp': '20240911033758', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '200', 'PartyA': '254745883316', 'PartyB': 899885, 'PhoneNumber': '254745883316', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054170', 'TransactionDesc': 'Some payment'}
2024-09-11 03:37:58,675 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:37:59,452 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 03:37:59,459 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518602564', 'CheckoutRequestID': 'ws_CO_11092024063759213745883316', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 03:42:17,947 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 03:42:18,196 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 03:42:18,197 - INFO - there is a test coming
2024-09-11 03:42:18,197 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 03:42:18,251 - INFO - {'updated_data': 'the data is now as 254720503375'}
2024-09-11 03:42:18,251 - INFO - the data is now as 254720503375
2024-09-11 03:42:18,267 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 03:42:18,267 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 03:42:18,268 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:42:19,042 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 03:42:19,043 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer b91A5F8wsoA2t0kAL2LbNBTjFXRU'}"}
2024-09-11 03:42:19,044 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDM0MjE5', 'Timestamp': '20240911034219', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254720503375', 'PartyB': 827142, 'PhoneNumber': '254720503375', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-29127', 'TransactionDesc': 'Some payment'}
2024-09-11 03:42:19,045 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:42:19,754 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 03:42:19,760 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88665756', 'CheckoutRequestID': 'ws_CO_11092024064219574720503375', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 03:44:32,976 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 03:44:33,144 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 03:44:33,145 - INFO - there is a test coming
2024-09-11 03:44:33,145 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 03:44:33,190 - INFO - {'updated_data': 'the data is now as 254740168548'}
2024-09-11 03:44:33,190 - INFO - the data is now as 254740168548
2024-09-11 03:44:33,207 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 03:44:33,208 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 03:44:33,209 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:44:33,838 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 03:44:33,840 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer aJ06AOomMI8GMwPACyjCVhaNifNT'}"}
2024-09-11 03:44:33,841 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDM0NDMz', 'Timestamp': '20240911034433', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '250', 'PartyA': '254740168548', 'PartyB': 827142, 'PhoneNumber': '254740168548', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-24394', 'TransactionDesc': 'Some payment'}
2024-09-11 03:44:33,842 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 03:44:34,658 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 03:44:34,664 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076673307', 'CheckoutRequestID': 'ws_CO_11092024064434384740168548', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 04:04:50,293 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 04:04:50,458 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 04:04:50,460 - INFO - {'updated': 'initiated stk query for ws_CO_11092024070438992723528017 899885 '}
2024-09-11 04:04:50,528 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:04:51,121 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 04:04:51,123 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer DQmQbN4rGQE4Rt0fT7YlZN9vAkAr'}"}
2024-09-11 04:04:51,123 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDQwNDUw', 'Timestamp': '20240911040450', 'CheckoutRequestID': 'ws_CO_11092024070438992723528017'}"}
2024-09-11 04:04:51,124 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:04:51,868 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 04:04:51,869 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076688095', 'CheckoutRequestID': 'ws_CO_11092024070438992723528017', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024070438992723528017 899885"}
2024-09-11 04:04:51,994 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 04:04:52,190 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 04:04:52,194 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 04:04:52,728 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 04:06:33,907 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 04:06:34,077 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 04:06:34,078 - INFO - there is a test coming
2024-09-11 04:06:34,078 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 04:06:34,125 - INFO - {'updated_data': 'the data is now as 254743889743'}
2024-09-11 04:06:34,125 - INFO - the data is now as 254743889743
2024-09-11 04:06:34,143 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 04:06:34,143 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 04:06:34,145 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:06:34,815 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 04:06:34,817 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer vGfBZGVAamVrsg5T3MlINDPMFJDa'}"}
2024-09-11 04:06:34,817 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDQwNjM0', 'Timestamp': '20240911040634', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254743889743', 'PartyB': 827142, 'PhoneNumber': '254743889743', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-175268', 'TransactionDesc': 'Some payment'}
2024-09-11 04:06:34,818 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:06:35,627 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 04:06:35,633 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181141364', 'CheckoutRequestID': 'ws_CO_11092024070635370743889743', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 04:23:03,741 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 04:23:03,906 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 04:23:03,907 - INFO - there is a test coming
2024-09-11 04:23:03,907 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 04:23:03,961 - INFO - {'updated_data': 'the data is now as 254723831641'}
2024-09-11 04:23:03,961 - INFO - the data is now as 254723831641
2024-09-11 04:23:03,986 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 04:23:03,986 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 04:23:03,987 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:23:04,574 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 04:23:04,577 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer y3qqxJgNdM1F5vWE5XJde6h9BGDA'}"}
2024-09-11 04:23:04,577 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDQyMzA0', 'Timestamp': '20240911042304', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '280', 'PartyA': '254723831641', 'PartyB': 827142, 'PhoneNumber': '254723831641', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '168-134', 'TransactionDesc': 'Some payment'}
2024-09-11 04:23:04,579 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:23:05,188 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 500 280
2024-09-11 04:23:05,190 - INFO -  th data is {'code': 500, 'message': {'requestId': '8385-4bd1-a41f-473a644f05b518677772', 'errorCode': '500.001.1001', 'errorMessage': 'Unable to lock subscriber, a transaction is already in process for the current subscriber'}}
2024-09-11 04:23:05,191 - ERROR - Internal Server Error: /api/v1/stk/
2024-09-11 04:25:07,244 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 04:25:08,000 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 04:25:08,001 - INFO - {'updated': 'initiated stk query for ws_CO_11092024072356671769226627 899885 '}
2024-09-11 04:25:08,065 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:25:08,659 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 04:25:08,664 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer LSNe13twCSrugCBAHG3OtTVri9DZ'}"}
2024-09-11 04:25:08,665 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDQyNTA4', 'Timestamp': '20240911042508', 'CheckoutRequestID': 'ws_CO_11092024072356671769226627'}"}
2024-09-11 04:25:08,668 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:25:10,064 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-11 04:25:10,064 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518679194', 'CheckoutRequestID': 'ws_CO_11092024072356671769226627', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_11092024072356671769226627 899885"}
2024-09-11 04:25:10,196 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 04:25:10,701 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 04:25:10,702 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 04:25:10,906 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 04:26:44,499 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171517435', 'CheckoutRequestID': 'ws_CO_11092024072636809769226627', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB66KKUVO'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911072643}, {'Name': 'PhoneNumber', 'Value': 254769226627}]}}}}"}
2024-09-11 04:26:44,499 - INFO - {'updated_data': 'callback data began'}
2024-09-11 04:26:44,500 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171517435', 'CheckoutRequestID': 'ws_CO_11092024072636809769226627', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB66KKUVO'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911072643}, {'Name': 'PhoneNumber', 'Value': 254769226627}]}}}}}
2024-09-11 04:26:44,665 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 04:26:45,166 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 04:26:45,167 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 04:26:45,382 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 04:27:01,909 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 04:27:02,021 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 04:27:02,022 - INFO - {'updated': 'initiated stk query for ws_CO_11092024072636809769226627 899885 '}
2024-09-11 04:27:02,101 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:27:02,687 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 04:27:02,689 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 95B5H73hCwpd8wctIQHzfZ3MDeMW'}"}
2024-09-11 04:27:02,689 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDQyNzAy', 'Timestamp': '20240911042702', 'CheckoutRequestID': 'ws_CO_11092024072636809769226627'}"}
2024-09-11 04:27:02,690 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:27:03,306 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 04:27:03,306 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171517435', 'CheckoutRequestID': 'ws_CO_11092024072636809769226627', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024072636809769226627 899885"}
2024-09-11 04:27:03,424 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 04:27:03,604 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 04:27:03,606 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 04:27:03,838 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 04:31:14,280 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 04:31:14,423 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 04:31:14,423 - INFO - there is a test coming
2024-09-11 04:31:14,423 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 04:31:14,467 - INFO - {'updated_data': 'the data is now as 254719550191'}
2024-09-11 04:31:14,467 - INFO - the data is now as 254719550191
2024-09-11 04:31:14,482 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 04:31:14,482 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 04:31:14,483 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:31:15,184 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 04:31:15,186 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer QP8OcIGnI2KgGvhEORJQdrUc1LPk'}"}
2024-09-11 04:31:15,189 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDQzMTE1', 'Timestamp': '20240911043115', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '21429', 'PartyA': '254719550191', 'PartyB': 827142, 'PhoneNumber': '254719550191', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '121-55490', 'TransactionDesc': 'Some payment'}
2024-09-11 04:31:15,191 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:31:16,041 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 04:31:16,054 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076709615', 'CheckoutRequestID': 'ws_CO_11092024073115825719550191', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 04:39:16,604 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 04:39:16,828 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 04:39:16,829 - INFO - there is a test coming
2024-09-11 04:39:16,829 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 04:39:16,872 - INFO - {'updated_data': 'the data is now as 254725739912'}
2024-09-11 04:39:16,872 - INFO - the data is now as 254725739912
2024-09-11 04:39:16,888 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 04:39:16,888 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 04:39:16,889 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:39:17,446 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 04:39:17,448 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer wmVch8yTA2UKzBXVGzs7AH9BMl76'}"}
2024-09-11 04:39:17,448 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDQzOTE3', 'Timestamp': '20240911043917', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100000', 'PartyA': '254725739912', 'PartyB': 899885, 'PhoneNumber': '254725739912', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054267', 'TransactionDesc': 'Some payment'}
2024-09-11 04:39:17,449 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:39:18,215 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 04:39:18,221 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076717039', 'CheckoutRequestID': 'ws_CO_11092024073917984725739912', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 04:39:24,206 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 04:39:24,331 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 04:39:24,331 - INFO - {'updated': 'initiated stk query for ws_CO_11092024073912947114198971 899885 '}
2024-09-11 04:39:24,385 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:39:25,055 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 04:39:25,056 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer d9ySXGnozLk0mAaIVRzgCAZpHije'}"}
2024-09-11 04:39:25,057 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDQzOTI0', 'Timestamp': '20240911043924', 'CheckoutRequestID': 'ws_CO_11092024073912947114198971'}"}
2024-09-11 04:39:25,058 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:39:25,691 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 04:39:25,691 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170804747', 'CheckoutRequestID': 'ws_CO_11092024073912947114198971', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024073912947114198971 899885"}
2024-09-11 04:39:25,805 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 04:39:26,301 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 04:39:26,302 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 04:39:26,497 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 04:40:40,923 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 04:40:41,046 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 04:40:41,047 - INFO - there is a test coming
2024-09-11 04:40:41,047 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 04:40:41,100 - INFO - {'updated_data': 'the data is now as 254797076798'}
2024-09-11 04:40:41,101 - INFO - the data is now as 254797076798
2024-09-11 04:40:41,125 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 04:40:41,125 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 04:40:41,126 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:40:41,700 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 04:40:41,702 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ZxXZoLTL1hK0bP6BDd9GhfXA8pVv'}"}
2024-09-11 04:40:41,702 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDQ0MDQx', 'Timestamp': '20240911044041', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254797076798', 'PartyB': 827142, 'PhoneNumber': '254797076798', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-2944', 'TransactionDesc': 'Some payment'}
2024-09-11 04:40:41,703 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:40:44,121 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 04:40:44,128 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076718226', 'CheckoutRequestID': 'ws_CO_11092024074042336797076798', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 04:43:48,060 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 04:43:48,196 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 04:43:48,197 - INFO - {'updated': 'initiated stk query for ws_CO_11092024074326965705950719 827142 '}
2024-09-11 04:43:48,275 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:43:48,947 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 04:43:48,949 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 1AMRfjf7z6EGSASlinLndW9WtSqg'}"}
2024-09-11 04:43:48,949 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDQ0MzQ4', 'Timestamp': '20240911044348', 'CheckoutRequestID': 'ws_CO_11092024074326965705950719'}"}
2024-09-11 04:43:48,951 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:43:49,689 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 04:43:49,689 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8273942', 'CheckoutRequestID': 'ws_CO_11092024074326965705950719', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024074326965705950719 827142"}
2024-09-11 04:43:49,810 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 04:43:50,313 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 04:43:50,315 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 04:43:50,833 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 04:43:54,144 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171532502', 'CheckoutRequestID': 'ws_CO_11092024074340399727933900', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB76M9X25'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911074353}, {'Name': 'PhoneNumber', 'Value': 254727933900}]}}}}"}
2024-09-11 04:43:54,144 - INFO - {'updated_data': 'callback data began'}
2024-09-11 04:43:54,144 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171532502', 'CheckoutRequestID': 'ws_CO_11092024074340399727933900', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB76M9X25'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911074353}, {'Name': 'PhoneNumber', 'Value': 254727933900}]}}}}}
2024-09-11 04:43:54,300 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 04:43:54,479 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 04:43:54,480 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 04:43:54,679 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 04:47:20,073 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 04:47:20,212 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 04:47:20,213 - INFO - there is a test coming
2024-09-11 04:47:20,213 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 04:47:20,269 - INFO - {'updated_data': 'the data is now as 254725489815'}
2024-09-11 04:47:20,270 - INFO - the data is now as 254725489815
2024-09-11 04:47:20,289 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 04:47:20,289 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 04:47:20,290 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:47:20,975 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 04:47:20,976 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer OIIYG9LtGpzPbcaPTvDmHe13okL4'}"}
2024-09-11 04:47:20,977 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDQ0NzIw', 'Timestamp': '20240911044720', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254725489815', 'PartyB': 899885, 'PhoneNumber': '254725489815', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054237', 'TransactionDesc': 'Some payment'}
2024-09-11 04:47:20,978 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:47:21,733 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 04:47:21,739 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518727154', 'CheckoutRequestID': 'ws_CO_11092024074721527725489815', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 04:47:35,392 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794405668', 'CheckoutRequestID': 'ws_CO_11092024074729412705574420', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 04:47:35,392 - INFO - {'updated_data': 'callback data began'}
2024-09-11 04:47:35,392 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794405668', 'CheckoutRequestID': 'ws_CO_11092024074729412705574420', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 04:47:35,570 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 04:47:36,073 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 04:47:36,075 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 04:47:36,283 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 04:47:41,012 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 04:47:41,143 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 04:47:41,144 - INFO - {'updated': 'initiated stk query for ws_CO_11092024074729412705574420 827142 '}
2024-09-11 04:47:41,201 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:47:42,043 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 04:47:42,045 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer mUpGJmYhXvqOpN1x99F6BB63OMY4'}"}
2024-09-11 04:47:42,045 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDQ0NzQx', 'Timestamp': '20240911044741', 'CheckoutRequestID': 'ws_CO_11092024074729412705574420'}"}
2024-09-11 04:47:42,046 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:47:42,668 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-11 04:47:42,668 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208794405668', 'CheckoutRequestID': 'ws_CO_11092024074729412705574420', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_11092024074729412705574420 827142"}
2024-09-11 04:47:42,789 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 04:47:43,283 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 04:47:43,284 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 04:47:43,494 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 04:48:20,523 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 04:48:20,704 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 04:48:20,704 - INFO - {'updated': 'initiated stk query for ws_CO_11092024074718525711287414 899885 '}
2024-09-11 04:48:20,785 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:48:21,504 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 04:48:21,506 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 86vro0tUojtVNnc0G0umxZXmzL00'}"}
2024-09-11 04:48:21,507 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDQ0ODIw', 'Timestamp': '20240911044820', 'CheckoutRequestID': 'ws_CO_11092024074718525711287414'}"}
2024-09-11 04:48:21,524 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 04:48:22,297 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 04:48:22,298 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8282579', 'CheckoutRequestID': 'ws_CO_11092024074718525711287414', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024074718525711287414 899885"}
2024-09-11 04:48:22,423 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 04:48:22,609 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 04:48:22,610 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 04:48:22,846 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:03:58,368 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:03:58,543 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:03:58,544 - INFO - {'updated': 'initiated stk query for ws_CO_11092024080333996799836211 827142 '}
2024-09-11 05:03:58,602 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:03:59,178 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:03:59,180 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Z9kkz4NQj7bP2Zm553vISebQ6iVl'}"}
2024-09-11 05:03:59,180 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDUwMzU4', 'Timestamp': '20240911050358', 'CheckoutRequestID': 'ws_CO_11092024080333996799836211'}"}
2024-09-11 05:03:59,181 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:03:59,864 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 380
2024-09-11 05:03:59,864 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076738762', 'CheckoutRequestID': 'ws_CO_11092024080333996799836211', 'ResultCode': '2001', 'ResultDesc': 'The initiator information is invalid.'} for ws_CO_11092024080333996799836211 827142"}
2024-09-11 05:03:59,987 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:04:00,174 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:04:00,176 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:04:00,431 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:04:05,312 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:04:05,475 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:04:05,476 - INFO - there is a test coming
2024-09-11 05:04:05,476 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 05:04:05,519 - INFO - {'updated_data': 'the data is now as 254722718222'}
2024-09-11 05:04:05,520 - INFO - the data is now as 254722718222
2024-09-11 05:04:05,535 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 05:04:05,535 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 05:04:05,537 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:04:06,117 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:04:06,118 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 9JheHO1GZsVyXGCCkvS0muKRpPNY'}"}
2024-09-11 05:04:06,119 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDUwNDA2', 'Timestamp': '20240911050406', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '30000', 'PartyA': '254722718222', 'PartyB': 899885, 'PhoneNumber': '254722718222', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054241', 'TransactionDesc': 'Some payment'}
2024-09-11 05:04:06,120 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:04:06,933 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 05:04:06,940 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171551226', 'CheckoutRequestID': 'ws_CO_11092024080406689722718222', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 05:04:16,886 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171551226', 'CheckoutRequestID': 'ws_CO_11092024080406689722718222', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 30000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB06OF20S'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911080416}, {'Name': 'PhoneNumber', 'Value': 254722718222}]}}}}"}
2024-09-11 05:04:16,886 - INFO - {'updated_data': 'callback data began'}
2024-09-11 05:04:16,886 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171551226', 'CheckoutRequestID': 'ws_CO_11092024080406689722718222', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 30000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB06OF20S'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911080416}, {'Name': 'PhoneNumber', 'Value': 254722718222}]}}}}}
2024-09-11 05:04:17,048 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:04:17,546 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:04:17,548 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:04:18,058 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:04:18,207 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:04:18,222 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-11 05:04:18,223 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 05:08:04,490 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:08:04,645 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:08:04,646 - INFO - there is a test coming
2024-09-11 05:08:04,646 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 05:08:04,688 - INFO - {'updated_data': 'the data is now as 254706069432'}
2024-09-11 05:08:04,688 - INFO - the data is now as 254706069432
2024-09-11 05:08:04,703 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 05:08:04,703 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 05:08:04,704 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:08:05,290 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:08:05,292 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer H2CqMTfSMclfwJ6TRszarniG8sCE'}"}
2024-09-11 05:08:05,293 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDUwODA1', 'Timestamp': '20240911050805', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254706069432', 'PartyB': 899885, 'PhoneNumber': '254706069432', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0609748-1726031283300', 'TransactionDesc': 'Some payment'}
2024-09-11 05:08:05,294 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:08:06,061 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 05:08:06,071 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc18768618', 'CheckoutRequestID': 'ws_CO_11092024080805839706069432', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 05:08:49,418 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:08:49,582 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:08:49,583 - INFO - there is a test coming
2024-09-11 05:08:49,583 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 05:08:49,627 - INFO - {'updated_data': 'the data is now as 254701428898'}
2024-09-11 05:08:49,627 - INFO - the data is now as 254701428898
2024-09-11 05:08:49,646 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 05:08:49,646 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 05:08:49,647 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:08:50,490 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:08:50,492 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer NQsKlFEK4BlsJd93C20qF5GY20KF'}"}
2024-09-11 05:08:50,492 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDUwODUw', 'Timestamp': '20240911050850', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '7000', 'PartyA': '254701428898', 'PartyB': 899885, 'PhoneNumber': '254701428898', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054242', 'TransactionDesc': 'Some payment'}
2024-09-11 05:08:50,493 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:08:51,214 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 05:08:51,220 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171067901', 'CheckoutRequestID': 'ws_CO_11092024080851012701428898', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 05:09:23,697 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:09:23,850 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:09:23,852 - INFO - there is a test coming
2024-09-11 05:09:23,852 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 05:09:23,899 - INFO - {'updated_data': 'the data is now as 254757766316'}
2024-09-11 05:09:23,899 - INFO - the data is now as 254757766316
2024-09-11 05:09:23,924 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 05:09:23,924 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 05:09:23,935 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:09:24,606 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:09:24,608 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer z3GpE7nJBUquM4wAzDQsGWlvT3sq'}"}
2024-09-11 05:09:24,608 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDUwOTI0', 'Timestamp': '20240911050924', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '400', 'PartyA': '254757766316', 'PartyB': 899885, 'PhoneNumber': '254757766316', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054270', 'TransactionDesc': 'Some payment'}
2024-09-11 05:09:24,609 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:09:25,578 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 05:09:25,584 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171556123', 'CheckoutRequestID': 'ws_CO_11092024080925224757766316', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 05:16:25,544 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:16:25,674 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:16:25,674 - INFO - {'updated': 'initiated stk query for ws_CO_11092024081606062742190261 827142 '}
2024-09-11 05:16:25,730 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:16:26,295 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:16:26,296 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer WzKNXzLIu8FYXpjKqYp1KA0sfACJ'}"}
2024-09-11 05:16:26,297 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDUxNjI1', 'Timestamp': '20240911051625', 'CheckoutRequestID': 'ws_CO_11092024081606062742190261'}"}
2024-09-11 05:16:26,298 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:16:26,952 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 05:16:26,952 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee598705377', 'CheckoutRequestID': 'ws_CO_11092024081606062742190261', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024081606062742190261 827142"}
2024-09-11 05:16:27,084 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:16:27,559 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:16:27,561 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:16:28,055 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:18:08,535 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:18:08,653 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:18:08,654 - INFO - {'updated': 'initiated stk query for ws_CO_11092024081757312724467923 827142 '}
2024-09-11 05:18:08,715 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:18:09,388 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:18:09,390 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer VmCZR7CoXGxHGJ52JcA4EzAjASKB'}"}
2024-09-11 05:18:09,390 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDUxODA4', 'Timestamp': '20240911051808', 'CheckoutRequestID': 'ws_CO_11092024081757312724467923'}"}
2024-09-11 05:18:09,392 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:18:10,131 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 05:18:10,131 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8349067', 'CheckoutRequestID': 'ws_CO_11092024081757312724467923', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024081757312724467923 827142"}
2024-09-11 05:18:10,259 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:18:10,454 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:18:10,456 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:18:10,974 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:20:26,784 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee598714844', 'CheckoutRequestID': 'ws_CO_11092024082018206791485420', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1320.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB26Q7KM6'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911082026}, {'Name': 'PhoneNumber', 'Value': 254791485420}]}}}}"}
2024-09-11 05:20:26,785 - INFO - {'updated_data': 'callback data began'}
2024-09-11 05:20:26,785 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee598714844', 'CheckoutRequestID': 'ws_CO_11092024082018206791485420', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1320.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB26Q7KM6'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911082026}, {'Name': 'PhoneNumber', 'Value': 254791485420}]}}}}}
2024-09-11 05:20:26,947 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:20:27,453 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:20:27,454 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:20:27,980 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:21:51,868 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc18798482', 'CheckoutRequestID': 'ws_CO_11092024082136654726482669', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 05:21:51,878 - INFO - {'updated_data': 'callback data began'}
2024-09-11 05:21:51,878 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc18798482', 'CheckoutRequestID': 'ws_CO_11092024082136654726482669', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 05:21:52,078 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:21:52,769 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:21:52,771 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:21:52,993 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:22:46,117 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:22:46,376 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:22:46,377 - INFO - {'updated': 'initiated stk query for ws_CO_11092024082233474724467923 827142 '}
2024-09-11 05:22:46,450 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:22:47,215 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:22:47,217 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ua5OLrZtZzKCma7CL9DGhMnn0mlM'}"}
2024-09-11 05:22:47,218 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDUyMjQ2', 'Timestamp': '20240911052246', 'CheckoutRequestID': 'ws_CO_11092024082233474724467923'}"}
2024-09-11 05:22:47,224 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:22:47,976 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 05:22:47,977 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024082233474724467923', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024082233474724467923 827142"}
2024-09-11 05:22:47,979 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 05:22:58,091 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88750665', 'CheckoutRequestID': 'ws_CO_11092024082233474724467923', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3578.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB66QI0V0'}, {'Name': 'TransactionDate', 'Value': 20240911082257}, {'Name': 'PhoneNumber', 'Value': 254724467923}]}}}}"}
2024-09-11 05:22:58,091 - INFO - {'updated_data': 'callback data began'}
2024-09-11 05:22:58,091 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88750665', 'CheckoutRequestID': 'ws_CO_11092024082233474724467923', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3578.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB66QI0V0'}, {'Name': 'TransactionDate', 'Value': 20240911082257}, {'Name': 'PhoneNumber', 'Value': 254724467923}]}}}}}
2024-09-11 05:22:58,279 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:22:58,719 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:22:58,721 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:22:59,166 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:23:57,317 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:23:57,482 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:23:57,483 - INFO - there is a test coming
2024-09-11 05:23:57,483 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 05:23:57,532 - INFO - {'updated_data': 'the data is now as 254710922539'}
2024-09-11 05:23:57,532 - INFO - the data is now as 254710922539
2024-09-11 05:23:57,548 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 05:23:57,548 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 05:23:57,549 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:23:58,206 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:23:58,208 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ReMb4ANunjbQoQtsqFvlyPIagHDY'}"}
2024-09-11 05:23:58,208 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDUyMzU4', 'Timestamp': '20240911052358', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254710922539', 'PartyB': 827142, 'PhoneNumber': '254710922539', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-129363', 'TransactionDesc': 'Some payment'}
2024-09-11 05:23:58,209 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:23:59,057 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 05:23:59,065 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee598723284', 'CheckoutRequestID': 'ws_CO_11092024082358747710922539', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 05:26:22,391 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:26:22,547 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:26:22,548 - INFO - {'updated': 'initiated stk query for ws_CO_11092024082601292708641171 899885 '}
2024-09-11 05:26:22,614 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:26:23,465 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:26:23,467 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 6zU36tWtGSqfOtuGk5tvXDrqXNRv'}"}
2024-09-11 05:26:23,467 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDUyNjIy', 'Timestamp': '20240911052622', 'CheckoutRequestID': 'ws_CO_11092024082601292708641171'}"}
2024-09-11 05:26:23,469 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:26:24,109 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 05:26:24,109 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208794441861', 'CheckoutRequestID': 'ws_CO_11092024082601292708641171', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024082601292708641171 899885"}
2024-09-11 05:26:24,236 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:26:24,423 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:26:24,425 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:26:24,956 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:26:42,269 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:26:42,425 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:26:42,426 - INFO - {'updated': 'initiated stk query for ws_CO_11092024082631003720892277 827142 '}
2024-09-11 05:26:42,498 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:26:43,113 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:26:43,115 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer IhaoiiKEYiJccMNBpALqEou0C1G1'}"}
2024-09-11 05:26:43,116 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDUyNjQy', 'Timestamp': '20240911052642', 'CheckoutRequestID': 'ws_CO_11092024082631003720892277'}"}
2024-09-11 05:26:43,117 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:26:43,746 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 05:26:43,746 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024082631003720892277', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024082631003720892277 827142"}
2024-09-11 05:26:43,749 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 05:34:25,254 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:34:25,386 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:34:25,387 - INFO - {'updated': 'initiated stk query for ws_CO_11092024083413409721389177 827142 '}
2024-09-11 05:34:25,451 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:34:26,059 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:34:26,061 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer DQRdKWmzXHGPu8lymHaqGwc2NINY'}"}
2024-09-11 05:34:26,062 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDUzNDI1', 'Timestamp': '20240911053425', 'CheckoutRequestID': 'ws_CO_11092024083413409721389177'}"}
2024-09-11 05:34:26,063 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:34:26,718 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 05:34:26,718 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024083413409721389177', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024083413409721389177 827142"}
2024-09-11 05:34:26,720 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 05:34:35,378 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:34:35,636 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:34:35,637 - INFO - {'updated': 'initiated stk query for ws_CO_11092024083413409721389177 827142 '}
2024-09-11 05:34:35,702 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:34:36,279 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:34:36,281 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer qArhljIQtYC2zXIXYyvRHZW0No99'}"}
2024-09-11 05:34:36,282 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDUzNDM1', 'Timestamp': '20240911053435', 'CheckoutRequestID': 'ws_CO_11092024083413409721389177'}"}
2024-09-11 05:34:36,283 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:34:36,924 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 05:34:36,925 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024083413409721389177', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024083413409721389177 827142"}
2024-09-11 05:34:36,927 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 05:39:28,067 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:39:28,250 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:39:28,251 - INFO - there is a test coming
2024-09-11 05:39:28,251 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 05:39:28,308 - INFO - {'updated_data': 'the data is now as 254797800197'}
2024-09-11 05:39:28,308 - INFO - the data is now as 254797800197
2024-09-11 05:39:28,339 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 05:39:28,340 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 05:39:28,341 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:39:29,100 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:39:29,102 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer nCdvmWWhepn1vRcqR6laQusGLne5'}"}
2024-09-11 05:39:29,102 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDUzOTI5', 'Timestamp': '20240911053929', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254797800197', 'PartyB': 899885, 'PhoneNumber': '254797800197', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054245', 'TransactionDesc': 'Some payment'}
2024-09-11 05:39:29,103 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:39:29,909 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 05:39:29,916 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585054806809', 'CheckoutRequestID': 'ws_CO_11092024083929631797800197', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 05:40:17,633 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518844135', 'CheckoutRequestID': 'ws_CO_11092024084006571723128440', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10029.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB06SI1QQ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911084017}, {'Name': 'PhoneNumber', 'Value': 254723128440}]}}}}"}
2024-09-11 05:40:17,634 - INFO - {'updated_data': 'callback data began'}
2024-09-11 05:40:17,634 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518844135', 'CheckoutRequestID': 'ws_CO_11092024084006571723128440', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10029.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB06SI1QQ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911084017}, {'Name': 'PhoneNumber', 'Value': 254723128440}]}}}}}
2024-09-11 05:40:17,843 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:40:18,044 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:40:18,046 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:40:18,430 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:43:11,598 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:43:11,722 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:43:11,723 - INFO - there is a test coming
2024-09-11 05:43:11,723 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 05:43:11,767 - INFO - {'updated_data': 'the data is now as 254722215912'}
2024-09-11 05:43:11,768 - INFO - the data is now as 254722215912
2024-09-11 05:43:11,784 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 05:43:11,784 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 05:43:11,786 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:43:12,373 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:43:12,375 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 94XAArmWIFaYmn7vqACqSHdzWMQv'}"}
2024-09-11 05:43:12,376 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDU0MzEy', 'Timestamp': '20240911054312', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '650', 'PartyA': '254722215912', 'PartyB': 899885, 'PhoneNumber': '254722215912', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054277', 'TransactionDesc': 'Some payment'}
2024-09-11 05:43:12,378 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:43:13,210 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 05:43:13,216 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170863771', 'CheckoutRequestID': 'ws_CO_11092024084312918722215912', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 05:43:19,929 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170863771', 'CheckoutRequestID': 'ws_CO_11092024084312918722215912', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 650.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB46SUTME'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911084319}, {'Name': 'PhoneNumber', 'Value': 254722215912}]}}}}"}
2024-09-11 05:43:19,929 - INFO - {'updated_data': 'callback data began'}
2024-09-11 05:43:19,929 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170863771', 'CheckoutRequestID': 'ws_CO_11092024084312918722215912', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 650.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB46SUTME'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911084319}, {'Name': 'PhoneNumber', 'Value': 254722215912}]}}}}}
2024-09-11 05:43:20,114 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:43:20,612 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:43:20,614 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:43:20,825 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:43:57,758 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:43:57,907 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:43:57,908 - INFO - {'updated': 'initiated stk query for ws_CO_11092024084256568714075750 827142 '}
2024-09-11 05:43:57,983 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:43:58,567 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:43:58,569 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer qphkcjAO6uiPYFQwQo3iVj5OOiPJ'}"}
2024-09-11 05:43:58,570 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDU0MzU3', 'Timestamp': '20240911054357', 'CheckoutRequestID': 'ws_CO_11092024084256568714075750'}"}
2024-09-11 05:43:58,571 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:43:59,205 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 05:43:59,205 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585054815212', 'CheckoutRequestID': 'ws_CO_11092024084256568714075750', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024084256568714075750 827142"}
2024-09-11 05:43:59,324 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:43:59,511 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:43:59,513 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:43:59,723 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:44:14,651 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:44:14,854 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:44:14,854 - INFO - there is a test coming
2024-09-11 05:44:14,854 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 05:44:14,898 - INFO - {'updated_data': 'the data is now as 254722784965'}
2024-09-11 05:44:14,898 - INFO - the data is now as 254722784965
2024-09-11 05:44:14,915 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 05:44:14,915 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 05:44:14,916 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:44:15,615 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:44:15,617 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer JokZLHZyjGTYIQ1yYqplEnOLdn5L'}"}
2024-09-11 05:44:15,618 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDU0NDE1', 'Timestamp': '20240911054415', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100000', 'PartyA': '254722784965', 'PartyB': 899885, 'PhoneNumber': '254722784965', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054246', 'TransactionDesc': 'Some payment'}
2024-09-11 05:44:15,619 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:44:16,355 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 05:44:16,362 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc18850917', 'CheckoutRequestID': 'ws_CO_11092024084416149722784965', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 05:44:27,442 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:44:27,601 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:44:27,602 - INFO - {'updated': 'initiated stk query for ws_CO_11092024084416149722784965 899885 '}
2024-09-11 05:44:27,660 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:44:28,312 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:44:28,314 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer WCIe5xUPwtOgADa0yh0aGWskgMTf'}"}
2024-09-11 05:44:28,314 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDU0NDI3', 'Timestamp': '20240911054427', 'CheckoutRequestID': 'ws_CO_11092024084416149722784965'}"}
2024-09-11 05:44:28,315 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:44:28,922 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 05:44:28,923 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc18850917', 'CheckoutRequestID': 'ws_CO_11092024084416149722784965', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024084416149722784965 899885"}
2024-09-11 05:44:29,038 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:44:29,234 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:44:29,235 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:44:29,441 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:44:46,115 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:44:46,237 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:44:46,238 - INFO - there is a test coming
2024-09-11 05:44:46,238 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 05:44:46,281 - INFO - {'updated_data': 'the data is now as 254723400897'}
2024-09-11 05:44:46,281 - INFO - the data is now as 254723400897
2024-09-11 05:44:46,297 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 05:44:46,298 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 05:44:46,299 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:44:46,867 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:44:46,870 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 8AmbcooGcv6aYifKmwHhzGPUo38x'}"}
2024-09-11 05:44:46,871 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDU0NDQ2', 'Timestamp': '20240911054446', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2760', 'PartyA': '254723400897', 'PartyB': 827142, 'PhoneNumber': '254723400897', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-5955', 'TransactionDesc': 'Some payment'}
2024-09-11 05:44:46,873 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:44:47,742 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 05:44:47,748 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee598771943', 'CheckoutRequestID': 'ws_CO_11092024084447456723400897', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 05:45:28,163 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171102883', 'CheckoutRequestID': 'ws_CO_11092024084519873700137190', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB16T3WPV'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911084527}, {'Name': 'PhoneNumber', 'Value': 254700137190}]}}}}"}
2024-09-11 05:45:28,164 - INFO - {'updated_data': 'callback data began'}
2024-09-11 05:45:28,164 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171102883', 'CheckoutRequestID': 'ws_CO_11092024084519873700137190', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB16T3WPV'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911084527}, {'Name': 'PhoneNumber', 'Value': 254700137190}]}}}}}
2024-09-11 05:45:28,314 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:45:28,498 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:45:28,499 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:45:28,695 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:45:39,181 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:45:39,374 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:45:39,374 - INFO - there is a test coming
2024-09-11 05:45:39,375 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 05:45:39,421 - INFO - {'updated_data': 'the data is now as 254723400897'}
2024-09-11 05:45:39,421 - INFO - the data is now as 254723400897
2024-09-11 05:45:39,439 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 05:45:39,439 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 05:45:39,440 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:45:40,119 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:45:40,121 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 10jrzNTzuj29Yx9rl1ztWSWCMbLq'}"}
2024-09-11 05:45:40,122 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDU0NTQw', 'Timestamp': '20240911054540', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3840', 'PartyA': '254723400897', 'PartyB': 827142, 'PhoneNumber': '254723400897', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-149055', 'TransactionDesc': 'Some payment'}
2024-09-11 05:45:40,123 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:45:40,883 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 05:45:40,889 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518857585', 'CheckoutRequestID': 'ws_CO_11092024084540650723400897', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 05:45:41,082 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:45:41,255 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:45:41,256 - INFO - {'updated': 'initiated stk query for ws_CO_11092024084519873700137190 827142 '}
2024-09-11 05:45:41,319 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:45:41,892 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:45:41,894 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer hfjkY5dbFppkVWnxNavGCD5jfbJD'}"}
2024-09-11 05:45:41,895 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDU0NTQx', 'Timestamp': '20240911054541', 'CheckoutRequestID': 'ws_CO_11092024084519873700137190'}"}
2024-09-11 05:45:41,899 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:45:42,602 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 05:45:42,602 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171102883', 'CheckoutRequestID': 'ws_CO_11092024084519873700137190', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024084519873700137190 827142"}
2024-09-11 05:45:42,720 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:45:43,236 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:45:43,238 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:45:43,767 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:45:48,168 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518857585', 'CheckoutRequestID': 'ws_CO_11092024084540650723400897', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3840.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB36T5521'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911084547}, {'Name': 'PhoneNumber', 'Value': 254723400897}]}}}}"}
2024-09-11 05:45:48,168 - INFO - {'updated_data': 'callback data began'}
2024-09-11 05:45:48,168 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518857585', 'CheckoutRequestID': 'ws_CO_11092024084540650723400897', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3840.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB36T5521'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911084547}, {'Name': 'PhoneNumber', 'Value': 254723400897}]}}}}}
2024-09-11 05:45:48,350 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:45:48,538 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:45:48,540 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:45:48,761 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:45:51,869 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:45:52,045 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:45:52,046 - INFO - {'updated': 'initiated stk query for ws_CO_11092024084540650723400897 827142 '}
2024-09-11 05:45:52,113 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:45:52,697 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:45:52,699 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer zAdj7lC3GojdFQrgHpRL9zEIAiIa'}"}
2024-09-11 05:45:52,700 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDU0NTUy', 'Timestamp': '20240911054552', 'CheckoutRequestID': 'ws_CO_11092024084540650723400897'}"}
2024-09-11 05:45:52,701 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:45:53,398 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 05:45:53,399 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518857585', 'CheckoutRequestID': 'ws_CO_11092024084540650723400897', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024084540650723400897 827142"}
2024-09-11 05:45:53,515 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:45:53,695 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:45:53,697 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:45:53,924 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:46:21,759 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:46:21,949 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:46:21,950 - INFO - there is a test coming
2024-09-11 05:46:21,950 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 05:46:21,994 - INFO - {'updated_data': 'the data is now as 254723400897'}
2024-09-11 05:46:21,995 - INFO - the data is now as 254723400897
2024-09-11 05:46:22,012 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 05:46:22,012 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 05:46:22,014 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:46:22,703 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:46:22,705 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Rd59ksUacbQh1RlZRLolytffkHOT'}"}
2024-09-11 05:46:22,706 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDU0NjIy', 'Timestamp': '20240911054622', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254723400897', 'PartyB': 827142, 'PhoneNumber': '254723400897', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-22515', 'TransactionDesc': 'Some payment'}
2024-09-11 05:46:22,707 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:46:23,871 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 05:46:23,883 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518859370', 'CheckoutRequestID': 'ws_CO_11092024084623499723400897', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 05:46:31,785 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518859370', 'CheckoutRequestID': 'ws_CO_11092024084623499723400897', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB56T87F5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911084631}, {'Name': 'PhoneNumber', 'Value': 254723400897}]}}}}"}
2024-09-11 05:46:31,785 - INFO - {'updated_data': 'callback data began'}
2024-09-11 05:46:31,785 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518859370', 'CheckoutRequestID': 'ws_CO_11092024084623499723400897', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB56T87F5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911084631}, {'Name': 'PhoneNumber', 'Value': 254723400897}]}}}}}
2024-09-11 05:46:31,940 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:46:32,446 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:46:32,448 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:46:32,666 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:46:35,817 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:46:35,957 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:46:35,958 - INFO - {'updated': 'initiated stk query for ws_CO_11092024084623499723400897 827142 '}
2024-09-11 05:46:36,015 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:46:36,607 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:46:36,609 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer jAV4KeEot1eTfdnUhJGG7gzYpLAy'}"}
2024-09-11 05:46:36,611 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDU0NjM2', 'Timestamp': '20240911054636', 'CheckoutRequestID': 'ws_CO_11092024084623499723400897'}"}
2024-09-11 05:46:36,612 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:46:37,255 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 05:46:37,255 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518859370', 'CheckoutRequestID': 'ws_CO_11092024084623499723400897', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024084623499723400897 827142"}
2024-09-11 05:46:37,379 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:46:37,562 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:46:37,564 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:46:37,779 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:47:01,224 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:47:01,377 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:47:01,378 - INFO - there is a test coming
2024-09-11 05:47:01,378 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 05:47:01,419 - INFO - {'updated_data': 'the data is now as 254723400897'}
2024-09-11 05:47:01,419 - INFO - the data is now as 254723400897
2024-09-11 05:47:01,435 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 05:47:01,435 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 05:47:01,437 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:47:02,036 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:47:02,038 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer HvGLQUebPfPdAVmHGOAapBNMbYwd'}"}
2024-09-11 05:47:02,039 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDU0NzAy', 'Timestamp': '20240911054702', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254723400897', 'PartyB': 827142, 'PhoneNumber': '254723400897', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-22505', 'TransactionDesc': 'Some payment'}
2024-09-11 05:47:02,040 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:47:02,854 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 05:47:02,860 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171592655', 'CheckoutRequestID': 'ws_CO_11092024084702665723400897', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 05:47:08,758 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171592655', 'CheckoutRequestID': 'ws_CO_11092024084702665723400897', 'ResultCode': 17, 'ResultDesc': 'Rule limited.'}}}"}
2024-09-11 05:47:08,758 - INFO - {'updated_data': 'callback data began'}
2024-09-11 05:47:08,758 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171592655', 'CheckoutRequestID': 'ws_CO_11092024084702665723400897', 'ResultCode': 17, 'ResultDesc': 'Rule limited.'}}}}
2024-09-11 05:47:08,935 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:47:09,430 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:47:09,432 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:47:09,647 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:47:24,224 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:47:25,026 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:47:25,035 - INFO - {'updated': 'initiated stk query for ws_CO_11092024084702665723400897 827142 '}
2024-09-11 05:47:25,108 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:47:25,790 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:47:25,791 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Bq4TyPwywn3u4Y1DZ6GwohZAcD4q'}"}
2024-09-11 05:47:25,792 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDU0NzI1', 'Timestamp': '20240911054725', 'CheckoutRequestID': 'ws_CO_11092024084702665723400897'}"}
2024-09-11 05:47:25,793 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:47:26,569 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 355
2024-09-11 05:47:26,569 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171592655', 'CheckoutRequestID': 'ws_CO_11092024084702665723400897', 'ResultCode': '17', 'ResultDesc': 'Rule limited.'} for ws_CO_11092024084702665723400897 827142"}
2024-09-11 05:47:26,698 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:47:27,185 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:47:27,187 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:47:27,693 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:47:47,322 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585054825986', 'CheckoutRequestID': 'ws_CO_11092024084726579719801447', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB16TDITB'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911084746}, {'Name': 'PhoneNumber', 'Value': 254719801447}]}}}}"}
2024-09-11 05:47:47,323 - INFO - {'updated_data': 'callback data began'}
2024-09-11 05:47:47,323 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585054825986', 'CheckoutRequestID': 'ws_CO_11092024084726579719801447', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB16TDITB'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911084746}, {'Name': 'PhoneNumber', 'Value': 254719801447}]}}}}}
2024-09-11 05:47:47,493 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:47:47,689 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:47:47,690 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:47:48,213 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:47:58,134 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:47:58,322 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:47:58,323 - INFO - {'updated': 'initiated stk query for ws_CO_11092024084726579719801447 827142 '}
2024-09-11 05:47:58,390 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:47:59,069 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:47:59,072 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 1bteHgMgmAgUySK4STZMfWhqYAfz'}"}
2024-09-11 05:47:59,072 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDU0NzU4', 'Timestamp': '20240911054758', 'CheckoutRequestID': 'ws_CO_11092024084726579719801447'}"}
2024-09-11 05:47:59,074 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:47:59,699 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 05:47:59,700 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585054825986', 'CheckoutRequestID': 'ws_CO_11092024084726579719801447', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024084726579719801447 827142"}
2024-09-11 05:47:59,824 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:48:00,328 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:48:00,330 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:48:00,552 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:50:54,583 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171596238', 'CheckoutRequestID': 'ws_CO_11092024085045181713626849', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 6000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB96TQTLN'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911085053}, {'Name': 'PhoneNumber', 'Value': 254713626849}]}}}}"}
2024-09-11 05:50:54,584 - INFO - {'updated_data': 'callback data began'}
2024-09-11 05:50:54,584 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171596238', 'CheckoutRequestID': 'ws_CO_11092024085045181713626849', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 6000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB96TQTLN'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911085053}, {'Name': 'PhoneNumber', 'Value': 254713626849}]}}}}}
2024-09-11 05:50:54,770 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:50:55,475 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:50:55,476 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:50:55,705 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:50:56,237 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:50:56,378 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:50:56,379 - INFO - {'updated': 'initiated stk query for ws_CO_11092024085045181713626849 827142 '}
2024-09-11 05:50:56,433 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:50:57,007 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:50:57,009 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer sGTvt7QmKI6lz1VHsmAIHL1FVx2m'}"}
2024-09-11 05:50:57,010 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDU1MDU2', 'Timestamp': '20240911055056', 'CheckoutRequestID': 'ws_CO_11092024085045181713626849'}"}
2024-09-11 05:50:57,011 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:50:57,637 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 05:50:57,638 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171596238', 'CheckoutRequestID': 'ws_CO_11092024085045181713626849', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024085045181713626849 827142"}
2024-09-11 05:50:57,765 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:50:57,964 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:50:57,966 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:50:58,168 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:52:53,664 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:52:53,854 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:52:53,855 - INFO - {'updated': 'initiated stk query for ws_CO_11092024085233330719801447 827142 '}
2024-09-11 05:52:53,925 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:52:54,620 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:52:54,622 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer QDBISA3wkR3oI70x8tu5q6Uejlir'}"}
2024-09-11 05:52:54,622 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDU1MjUz', 'Timestamp': '20240911055253', 'CheckoutRequestID': 'ws_CO_11092024085233330719801447'}"}
2024-09-11 05:52:54,624 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:52:55,500 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 05:52:55,500 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208794468104', 'CheckoutRequestID': 'ws_CO_11092024085233330719801447', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024085233330719801447 827142"}
2024-09-11 05:52:55,617 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:52:56,101 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:52:56,103 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:52:56,315 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:54:51,084 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:54:51,373 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:54:51,373 - INFO - there is a test coming
2024-09-11 05:54:51,374 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 05:54:51,419 - INFO - {'updated_data': 'the data is now as 254721453628'}
2024-09-11 05:54:51,420 - INFO - the data is now as 254721453628
2024-09-11 05:54:51,439 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 05:54:51,439 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 05:54:51,440 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:54:52,122 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:54:52,124 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 9M91WGo6juBhNRNDIyyuhXlRblxA'}"}
2024-09-11 05:54:52,125 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDU1NDUy', 'Timestamp': '20240911055452', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1300', 'PartyA': '254721453628', 'PartyB': 899885, 'PhoneNumber': '254721453628', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054278', 'TransactionDesc': 'Some payment'}
2024-09-11 05:54:52,126 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:54:52,888 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 05:54:52,897 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585054843824', 'CheckoutRequestID': 'ws_CO_11092024085452671721453628', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 05:54:59,714 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181372157', 'CheckoutRequestID': 'ws_CO_11092024085444294724617643', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB86U87ZW'}, {'Name': 'TransactionDate', 'Value': 20240911085459}, {'Name': 'PhoneNumber', 'Value': 254724617643}]}}}}"}
2024-09-11 05:54:59,715 - INFO - {'updated_data': 'callback data began'}
2024-09-11 05:54:59,715 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181372157', 'CheckoutRequestID': 'ws_CO_11092024085444294724617643', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB86U87ZW'}, {'Name': 'TransactionDate', 'Value': 20240911085459}, {'Name': 'PhoneNumber', 'Value': 254724617643}]}}}}}
2024-09-11 05:54:59,901 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:55:00,398 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:55:00,400 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:55:00,918 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:55:05,371 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:55:05,509 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:55:05,510 - INFO - {'updated': 'initiated stk query for ws_CO_11092024085444294724617643 899885 '}
2024-09-11 05:55:05,582 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:55:06,281 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:55:06,283 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer tJbzNO9c8zBAEdEBCiVWMV5GRHgI'}"}
2024-09-11 05:55:06,283 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDU1NTA1', 'Timestamp': '20240911055505', 'CheckoutRequestID': 'ws_CO_11092024085444294724617643'}"}
2024-09-11 05:55:06,285 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:55:07,027 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 05:55:07,028 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181372157', 'CheckoutRequestID': 'ws_CO_11092024085444294724617643', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024085444294724617643 899885"}
2024-09-11 05:55:07,155 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:55:07,344 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:55:07,347 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:55:07,569 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:55:09,344 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585054843824', 'CheckoutRequestID': 'ws_CO_11092024085452671721453628', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1300.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB86U8IJM'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911085508}, {'Name': 'PhoneNumber', 'Value': 254721453628}]}}}}"}
2024-09-11 05:55:09,344 - INFO - {'updated_data': 'callback data began'}
2024-09-11 05:55:09,344 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585054843824', 'CheckoutRequestID': 'ws_CO_11092024085452671721453628', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1300.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB86U8IJM'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911085508}, {'Name': 'PhoneNumber', 'Value': 254721453628}]}}}}}
2024-09-11 05:55:09,512 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:55:10,017 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:55:10,019 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:55:10,558 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:58:04,667 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794473415', 'CheckoutRequestID': 'ws_CO_11092024085752232725716745', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB96UL2A5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911085804}, {'Name': 'PhoneNumber', 'Value': 254725716745}]}}}}"}
2024-09-11 05:58:04,667 - INFO - {'updated_data': 'callback data began'}
2024-09-11 05:58:04,667 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794473415', 'CheckoutRequestID': 'ws_CO_11092024085752232725716745', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB96UL2A5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911085804}, {'Name': 'PhoneNumber', 'Value': 254725716745}]}}}}}
2024-09-11 05:58:04,831 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:58:05,513 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:58:05,515 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:58:05,729 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:58:07,874 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:58:08,048 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:58:08,049 - INFO - {'updated': 'initiated stk query for ws_CO_11092024085752232725716745 827142 '}
2024-09-11 05:58:08,115 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:58:14,625 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:58:14,627 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer XRLI8gzLuI3VfJ89X6SpnlKghuxG'}"}
2024-09-11 05:58:14,628 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDU1ODA4', 'Timestamp': '20240911055808', 'CheckoutRequestID': 'ws_CO_11092024085752232725716745'}"}
2024-09-11 05:58:14,629 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:58:15,276 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 05:58:15,277 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208794473415', 'CheckoutRequestID': 'ws_CO_11092024085752232725716745', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024085752232725716745 827142"}
2024-09-11 05:58:15,396 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:58:15,588 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:58:15,589 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:58:15,793 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 05:58:51,442 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 05:58:51,709 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 05:58:51,709 - INFO - {'updated': 'initiated stk query for ws_CO_11092024085824644719151847 827142 '}
2024-09-11 05:58:51,783 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:58:52,371 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 05:58:52,373 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 8thvHMBqmOk7xNG9F6ke2vx3s0pm'}"}
2024-09-11 05:58:52,373 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDU1ODUx', 'Timestamp': '20240911055851', 'CheckoutRequestID': 'ws_CO_11092024085824644719151847'}"}
2024-09-11 05:58:52,375 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 05:58:52,994 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 05:58:52,994 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076791844', 'CheckoutRequestID': 'ws_CO_11092024085824644719151847', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024085824644719151847 827142"}
2024-09-11 05:58:53,130 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 05:58:53,622 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 05:58:53,623 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 05:58:53,830 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:00:18,898 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8447532', 'CheckoutRequestID': 'ws_CO_11092024090000476724468783', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB36UU773'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911090018}, {'Name': 'PhoneNumber', 'Value': 254724468783}]}}}}"}
2024-09-11 06:00:18,898 - INFO - {'updated_data': 'callback data began'}
2024-09-11 06:00:18,898 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8447532', 'CheckoutRequestID': 'ws_CO_11092024090000476724468783', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB36UU773'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911090018}, {'Name': 'PhoneNumber', 'Value': 254724468783}]}}}}}
2024-09-11 06:00:19,068 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:00:19,589 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:00:19,590 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:00:19,806 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:00:24,978 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:00:25,109 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:00:25,110 - INFO - {'updated': 'initiated stk query for ws_CO_11092024090000476724468783 827142 '}
2024-09-11 06:00:25,190 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:00:25,876 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:00:25,878 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer KM97HVbrDj7itYjIe7RdAWKD0UxL'}"}
2024-09-11 06:00:25,879 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDYwMDI1', 'Timestamp': '20240911060025', 'CheckoutRequestID': 'ws_CO_11092024090000476724468783'}"}
2024-09-11 06:00:25,880 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:00:26,519 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 06:00:26,519 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8447532', 'CheckoutRequestID': 'ws_CO_11092024090000476724468783', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024090000476724468783 827142"}
2024-09-11 06:00:26,649 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:00:27,148 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:00:27,149 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:00:27,378 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:03:30,568 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:03:30,749 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:03:30,750 - INFO - there is a test coming
2024-09-11 06:03:30,750 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 06:03:30,801 - INFO - {'updated_data': 'the data is now as 254799995723'}
2024-09-11 06:03:30,802 - INFO - the data is now as 254799995723
2024-09-11 06:03:30,820 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 06:03:30,820 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 06:03:30,822 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:03:31,591 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:03:31,593 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ftYswuwZ37iSNFsQ9GFVQUHk26GT'}"}
2024-09-11 06:03:31,594 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDYwMzMx', 'Timestamp': '20240911060331', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '900', 'PartyA': '254799995723', 'PartyB': 899885, 'PhoneNumber': '254799995723', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054248', 'TransactionDesc': 'Some payment'}
2024-09-11 06:03:31,595 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:03:32,494 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 06:03:32,501 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585054864779', 'CheckoutRequestID': 'ws_CO_11092024090332136799995723', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 06:04:56,009 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:04:56,176 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:04:56,177 - INFO - there is a test coming
2024-09-11 06:04:56,177 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 06:04:56,232 - INFO - {'updated_data': 'the data is now as 254701485064'}
2024-09-11 06:04:56,232 - INFO - the data is now as 254701485064
2024-09-11 06:04:56,256 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 06:04:56,256 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 06:04:56,258 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:04:56,865 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:04:56,867 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer p1bbyuBYtUsc0UbRXOkL4vaPOPOE'}"}
2024-09-11 06:04:56,868 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDYwNDU2', 'Timestamp': '20240911060456', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254701485064', 'PartyB': 899885, 'PhoneNumber': '254701485064', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Order No . 13032', 'TransactionDesc': 'Some payment'}
2024-09-11 06:04:56,869 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:04:57,704 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 06:04:57,710 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171122582', 'CheckoutRequestID': 'ws_CO_11092024090457515701485064', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 06:06:08,425 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:06:08,560 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:06:08,561 - INFO - there is a test coming
2024-09-11 06:06:08,561 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 06:06:08,619 - INFO - {'updated_data': 'the data is now as 254722815302'}
2024-09-11 06:06:08,620 - INFO - the data is now as 254722815302
2024-09-11 06:06:08,638 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 06:06:08,638 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 06:06:08,639 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:06:09,319 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:06:09,321 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer OnMfiiqGYAb3eEKO1AE9RVXjgQUO'}"}
2024-09-11 06:06:09,321 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDYwNjA5', 'Timestamp': '20240911060609', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '12088', 'PartyA': '254722815302', 'PartyB': 827142, 'PhoneNumber': '254722815302', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '169-13910', 'TransactionDesc': 'Some payment'}
2024-09-11 06:06:09,323 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:06:12,646 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 06:06:12,655 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8462209', 'CheckoutRequestID': 'ws_CO_11092024090609932722815302', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 06:06:18,337 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:06:18,488 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:06:18,489 - INFO - {'updated': 'initiated stk query for ws_CO_11092024090607097720975661 827142 '}
2024-09-11 06:06:18,558 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:06:19,184 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:06:19,186 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer JO4C4iYtWrNBCcFKhOZMsTd95RK6'}"}
2024-09-11 06:06:19,187 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDYwNjE4', 'Timestamp': '20240911060618', 'CheckoutRequestID': 'ws_CO_11092024090607097720975661'}"}
2024-09-11 06:06:19,188 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:06:19,837 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 06:06:19,838 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181399372', 'CheckoutRequestID': 'ws_CO_11092024090607097720975661', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024090607097720975661 827142"}
2024-09-11 06:06:19,963 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:06:20,147 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:06:20,148 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:06:20,352 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:07:18,400 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:07:18,597 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:07:18,598 - INFO - there is a test coming
2024-09-11 06:07:18,598 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 06:07:18,642 - INFO - {'updated_data': 'the data is now as 254712734735'}
2024-09-11 06:07:18,642 - INFO - the data is now as 254712734735
2024-09-11 06:07:18,658 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 06:07:18,658 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 06:07:18,659 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:07:19,511 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:07:19,514 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer lA2oWahNhMIqy7zg7gmqgvKZOuZe'}"}
2024-09-11 06:07:19,514 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDYwNzE5', 'Timestamp': '20240911060719', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '6000', 'PartyA': '254712734735', 'PartyB': 827142, 'PhoneNumber': '254712734735', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-27495', 'TransactionDesc': 'Some payment'}
2024-09-11 06:07:19,516 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:07:20,294 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 06:07:20,300 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171125171', 'CheckoutRequestID': 'ws_CO_11092024090720081712734735', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 06:08:56,410 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170889407', 'CheckoutRequestID': 'ws_CO_11092024090843105722784965', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB66VUF86'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911090855}, {'Name': 'PhoneNumber', 'Value': 254722784965}]}}}}"}
2024-09-11 06:08:56,410 - INFO - {'updated_data': 'callback data began'}
2024-09-11 06:08:56,410 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170889407', 'CheckoutRequestID': 'ws_CO_11092024090843105722784965', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB66VUF86'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911090855}, {'Name': 'PhoneNumber', 'Value': 254722784965}]}}}}}
2024-09-11 06:08:56,580 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:08:56,951 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:08:56,952 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:08:57,158 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:12:03,953 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc18916735', 'CheckoutRequestID': 'ws_CO_11092024091153549726510605', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB36W7RKV'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911091203}, {'Name': 'PhoneNumber', 'Value': 254726510605}]}}}}"}
2024-09-11 06:12:03,954 - INFO - {'updated_data': 'callback data began'}
2024-09-11 06:12:03,954 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc18916735', 'CheckoutRequestID': 'ws_CO_11092024091153549726510605', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB36W7RKV'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911091203}, {'Name': 'PhoneNumber', 'Value': 254726510605}]}}}}}
2024-09-11 06:12:04,108 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:12:04,618 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:12:04,620 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:12:04,837 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:12:04,857 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:12:05,022 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:12:05,023 - INFO - {'updated': 'initiated stk query for ws_CO_11092024091153549726510605 899885 '}
2024-09-11 06:12:05,085 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:12:05,759 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:12:05,761 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer OHBEz7UyxxuplqR0EAwWdFal2n9Z'}"}
2024-09-11 06:12:05,762 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDYxMjA1', 'Timestamp': '20240911061205', 'CheckoutRequestID': 'ws_CO_11092024091153549726510605'}"}
2024-09-11 06:12:05,768 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:12:06,547 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 06:12:06,548 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc18916735', 'CheckoutRequestID': 'ws_CO_11092024091153549726510605', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024091153549726510605 899885"}
2024-09-11 06:12:06,675 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:12:07,167 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:12:07,168 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:12:07,395 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:19:43,495 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:19:43,644 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:19:43,645 - INFO - there is a test coming
2024-09-11 06:19:43,645 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 06:19:43,693 - INFO - {'updated_data': 'the data is now as 254723150989'}
2024-09-11 06:19:43,693 - INFO - the data is now as 254723150989
2024-09-11 06:19:43,711 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 06:19:43,711 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 06:19:43,712 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:19:44,413 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:19:44,415 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer qx2tKN7W2UEMc8hsJ9EKvSsb0iL7'}"}
2024-09-11 06:19:44,415 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDYxOTQ0', 'Timestamp': '20240911061944', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254723150989', 'PartyB': 827142, 'PhoneNumber': '254723150989', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-21517', 'TransactionDesc': 'Some payment'}
2024-09-11 06:19:44,416 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:19:48,414 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 06:19:48,420 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181431756', 'CheckoutRequestID': 'ws_CO_11092024091945224723150989', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 06:19:59,578 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:19:59,771 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:19:59,771 - INFO - {'updated': 'initiated stk query for ws_CO_11092024091945224723150989 827142 '}
2024-09-11 06:19:59,839 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:20:00,558 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:20:00,561 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer bC5Z68w2W6uNdM2u5LEtcggGjowG'}"}
2024-09-11 06:20:00,562 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDYxOTU5', 'Timestamp': '20240911061959', 'CheckoutRequestID': 'ws_CO_11092024091945224723150989'}"}
2024-09-11 06:20:00,563 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:20:01,298 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 06:20:01,299 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181431756', 'CheckoutRequestID': 'ws_CO_11092024091945224723150989', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024091945224723150989 827142"}
2024-09-11 06:20:01,433 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:20:01,621 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:20:01,623 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:20:01,843 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:20:10,216 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:20:10,359 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:20:10,360 - INFO - {'updated': 'initiated stk query for ws_CO_11092024091958942723400897 827142 '}
2024-09-11 06:20:10,430 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:20:11,018 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:20:11,020 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer YN0V0ZGGTJGLLaW54zheEfGrhJLA'}"}
2024-09-11 06:20:11,021 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDYyMDEw', 'Timestamp': '20240911062010', 'CheckoutRequestID': 'ws_CO_11092024091958942723400897'}"}
2024-09-11 06:20:11,022 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:20:11,638 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 06:20:11,638 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024091958942723400897', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024091958942723400897 827142"}
2024-09-11 06:20:11,641 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 06:25:17,021 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee598867328', 'CheckoutRequestID': 'ws_CO_11092024092501111720619887', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-11 06:25:17,021 - INFO - {'updated_data': 'callback data began'}
2024-09-11 06:25:17,021 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee598867328', 'CheckoutRequestID': 'ws_CO_11092024092501111720619887', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-11 06:25:17,187 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:25:17,572 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:25:17,573 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:25:17,803 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:25:22,176 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:25:22,363 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:25:22,364 - INFO - {'updated': 'initiated stk query for ws_CO_11092024092501111720619887 827142 '}
2024-09-11 06:25:22,434 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:25:23,070 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:25:23,072 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer V0umOFwANh2k0xAphFRJnITuaEMA'}"}
2024-09-11 06:25:23,072 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDYyNTIy', 'Timestamp': '20240911062522', 'CheckoutRequestID': 'ws_CO_11092024092501111720619887'}"}
2024-09-11 06:25:23,073 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:25:23,748 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 375
2024-09-11 06:25:23,748 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee598867328', 'CheckoutRequestID': 'ws_CO_11092024092501111720619887', 'ResultCode': '1037', 'ResultDesc': 'DS timeout user cannot be reached'} for ws_CO_11092024092501111720619887 827142"}
2024-09-11 06:25:23,870 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:25:24,157 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:25:24,159 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:25:24,374 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:27:20,238 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:27:20,369 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:27:20,370 - INFO - there is a test coming
2024-09-11 06:27:20,370 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 06:27:20,418 - INFO - {'updated_data': 'the data is now as 254720384268'}
2024-09-11 06:27:20,418 - INFO - the data is now as 254720384268
2024-09-11 06:27:20,436 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 06:27:20,436 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 06:27:20,438 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:27:21,096 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:27:21,099 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer gmQiyHNdhdkjNMT7aZNuB7UEi8lC'}"}
2024-09-11 06:27:21,100 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDYyNzIx', 'Timestamp': '20240911062721', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '8058', 'PartyA': '254720384268', 'PartyB': 827142, 'PhoneNumber': '254720384268', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-21602', 'TransactionDesc': 'Some payment'}
2024-09-11 06:27:21,101 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:27:21,935 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 06:27:21,942 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585054920590', 'CheckoutRequestID': 'ws_CO_11092024092721724720384268', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 06:27:42,773 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:27:42,942 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:27:42,942 - INFO - {'updated': 'initiated stk query for ws_CO_11092024092721724720384268 827142 '}
2024-09-11 06:27:43,002 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:27:43,579 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:27:43,582 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer rbXEMhDYRVePkOLgsqpPIhSoVAop'}"}
2024-09-11 06:27:43,583 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDYyNzQz', 'Timestamp': '20240911062743', 'CheckoutRequestID': 'ws_CO_11092024092721724720384268'}"}
2024-09-11 06:27:43,584 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:27:44,184 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 06:27:44,185 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024092721724720384268', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024092721724720384268 827142"}
2024-09-11 06:27:44,187 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 06:31:44,283 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518967792', 'CheckoutRequestID': 'ws_CO_11092024093142305707371657', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-11 06:31:44,284 - INFO - {'updated_data': 'callback data began'}
2024-09-11 06:31:44,284 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b518967792', 'CheckoutRequestID': 'ws_CO_11092024093142305707371657', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-11 06:31:44,446 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:31:44,643 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:31:44,645 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:31:44,853 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:34:28,698 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:34:28,863 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:34:28,864 - INFO - there is a test coming
2024-09-11 06:34:28,864 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 06:34:28,902 - INFO - {'updated_data': 'the data is now as 254727144108'}
2024-09-11 06:34:28,902 - INFO - the data is now as 254727144108
2024-09-11 06:34:28,916 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 06:34:28,917 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 06:34:28,918 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:34:29,625 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:34:29,627 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer VuK968GGwj3kYHGDZC2rTW8qQVOK'}"}
2024-09-11 06:34:29,627 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDYzNDI5', 'Timestamp': '20240911063429', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3722', 'PartyA': '254727144108', 'PartyB': 827142, 'PhoneNumber': '254727144108', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-25302', 'TransactionDesc': 'Some payment'}
2024-09-11 06:34:29,628 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:34:30,519 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 06:34:30,527 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8531093', 'CheckoutRequestID': 'ws_CO_11092024093430266727144108', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 06:39:40,892 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee598903760', 'CheckoutRequestID': 'ws_CO_11092024093931662720408450', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5721.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB46ZIM76'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911093940}, {'Name': 'PhoneNumber', 'Value': 254720408450}]}}}}"}
2024-09-11 06:39:40,893 - INFO - {'updated_data': 'callback data began'}
2024-09-11 06:39:40,893 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee598903760', 'CheckoutRequestID': 'ws_CO_11092024093931662720408450', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5721.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB46ZIM76'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911093940}, {'Name': 'PhoneNumber', 'Value': 254720408450}]}}}}}
2024-09-11 06:39:41,060 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:39:41,251 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:39:41,252 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:39:41,461 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:40:25,075 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585054954089', 'CheckoutRequestID': 'ws_CO_11092024094016884723400897', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2760.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB46ZLUL6'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911094024}, {'Name': 'PhoneNumber', 'Value': 254723400897}]}}}}"}
2024-09-11 06:40:25,075 - INFO - {'updated_data': 'callback data began'}
2024-09-11 06:40:25,075 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585054954089', 'CheckoutRequestID': 'ws_CO_11092024094016884723400897', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2760.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB46ZLUL6'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911094024}, {'Name': 'PhoneNumber', 'Value': 254723400897}]}}}}}
2024-09-11 06:40:25,237 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:40:25,433 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:40:25,435 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:40:26,135 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:40:27,980 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:40:28,169 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:40:28,169 - INFO - {'updated': 'initiated stk query for ws_CO_11092024094016884723400897 827142 '}
2024-09-11 06:40:28,241 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:40:28,886 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:40:28,888 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer sVxAv2JOx5xWGlQHO6pF8G4tZAxs'}"}
2024-09-11 06:40:28,888 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDY0MDI4', 'Timestamp': '20240911064028', 'CheckoutRequestID': 'ws_CO_11092024094016884723400897'}"}
2024-09-11 06:40:28,889 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:40:29,547 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 06:40:29,548 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585054954089', 'CheckoutRequestID': 'ws_CO_11092024094016884723400897', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024094016884723400897 827142"}
2024-09-11 06:40:29,668 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:40:29,865 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:40:29,866 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:40:30,089 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:42:40,081 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:42:40,198 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:42:40,198 - INFO - there is a test coming
2024-09-11 06:42:40,199 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 06:42:40,239 - INFO - {'updated_data': 'the data is now as 254722495015'}
2024-09-11 06:42:40,240 - INFO - the data is now as 254722495015
2024-09-11 06:42:40,265 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 06:42:40,266 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 06:42:40,267 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:42:40,959 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:42:40,961 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 5bAPMVDkaS2QovarFOIGJ7fSYAdu'}"}
2024-09-11 06:42:40,961 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDY0MjQw', 'Timestamp': '20240911064240', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '120132', 'PartyA': '254722495015', 'PartyB': 827142, 'PhoneNumber': '254722495015', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-111110', 'TransactionDesc': 'Some payment'}
2024-09-11 06:42:40,962 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:42:41,838 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 06:42:41,844 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170923662', 'CheckoutRequestID': 'ws_CO_11092024094241565722495015', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 06:43:25,807 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:43:25,993 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:43:25,994 - INFO - {'updated': 'initiated stk query for ws_CO_11092024094314431722495015 827142 '}
2024-09-11 06:43:26,052 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:43:26,627 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:43:26,630 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer kquNIGS4uKbtAfF5t05pD0MDfuIM'}"}
2024-09-11 06:43:26,630 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDY0MzI2', 'Timestamp': '20240911064326', 'CheckoutRequestID': 'ws_CO_11092024094314431722495015'}"}
2024-09-11 06:43:26,632 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:43:27,255 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 06:43:27,256 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024094314431722495015', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024094314431722495015 827142"}
2024-09-11 06:43:27,258 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 06:51:32,945 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:51:33,081 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:51:33,081 - INFO - there is a test coming
2024-09-11 06:51:33,081 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 06:51:33,135 - INFO - {'updated_data': 'the data is now as 254714557263'}
2024-09-11 06:51:33,135 - INFO - the data is now as 254714557263
2024-09-11 06:51:33,153 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 06:51:33,153 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 06:51:33,154 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:51:33,736 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:51:33,738 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer txRLS38jWl2qPFfbTNEghTM8IAK2'}"}
2024-09-11 06:51:33,739 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDY1MTMz', 'Timestamp': '20240911065133', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254714557263', 'PartyB': 827142, 'PhoneNumber': '254714557263', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-24712', 'TransactionDesc': 'Some payment'}
2024-09-11 06:51:33,740 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:51:34,472 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 06:51:34,479 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19016332', 'CheckoutRequestID': 'ws_CO_11092024095134260714557263', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 06:51:44,048 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19016332', 'CheckoutRequestID': 'ws_CO_11092024095134260714557263', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB670ZSKQ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911095143}, {'Name': 'PhoneNumber', 'Value': 254714557263}]}}}}"}
2024-09-11 06:51:44,048 - INFO - {'updated_data': 'callback data began'}
2024-09-11 06:51:44,048 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19016332', 'CheckoutRequestID': 'ws_CO_11092024095134260714557263', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB670ZSKQ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911095143}, {'Name': 'PhoneNumber', 'Value': 254714557263}]}}}}}
2024-09-11 06:51:44,220 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:51:44,724 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:51:44,726 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:51:45,263 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:51:45,600 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:51:45,791 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:51:45,792 - INFO - {'updated': 'initiated stk query for ws_CO_11092024095134260714557263 827142 '}
2024-09-11 06:51:45,851 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:51:46,437 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:51:46,440 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer aSSt6njwqjd8oiJXeAJwjPBNO6Fw'}"}
2024-09-11 06:51:46,440 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDY1MTQ1', 'Timestamp': '20240911065145', 'CheckoutRequestID': 'ws_CO_11092024095134260714557263'}"}
2024-09-11 06:51:46,441 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:51:47,050 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 06:51:47,051 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19016332', 'CheckoutRequestID': 'ws_CO_11092024095134260714557263', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024095134260714557263 827142"}
2024-09-11 06:51:47,170 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:51:47,610 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:51:47,612 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:51:48,158 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:51:53,860 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19016670', 'CheckoutRequestID': 'ws_CO_11092024095141259722669935', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB27108GK'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911095153}, {'Name': 'PhoneNumber', 'Value': 254722669935}]}}}}"}
2024-09-11 06:51:53,860 - INFO - {'updated_data': 'callback data began'}
2024-09-11 06:51:53,861 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19016670', 'CheckoutRequestID': 'ws_CO_11092024095141259722669935', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB27108GK'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911095153}, {'Name': 'PhoneNumber', 'Value': 254722669935}]}}}}}
2024-09-11 06:51:54,020 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:51:54,510 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:51:54,512 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:51:54,726 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:51:59,064 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:51:59,232 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:51:59,233 - INFO - {'updated': 'initiated stk query for ws_CO_11092024095141259722669935 827142 '}
2024-09-11 06:51:59,320 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:51:59,905 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:51:59,908 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 4Z6J84qGrQt2AAinUzOWCGerL3Ss'}"}
2024-09-11 06:51:59,908 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDY1MTU5', 'Timestamp': '20240911065159', 'CheckoutRequestID': 'ws_CO_11092024095141259722669935'}"}
2024-09-11 06:51:59,909 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:52:00,607 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 06:52:00,608 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19016670', 'CheckoutRequestID': 'ws_CO_11092024095141259722669935', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024095141259722669935 827142"}
2024-09-11 06:52:00,740 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:52:02,428 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:52:02,429 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:52:02,958 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:56:25,779 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:56:25,966 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:56:25,966 - INFO - {'updated': 'initiated stk query for ws_CO_11092024095603530720745196 899885 '}
2024-09-11 06:56:26,027 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:56:26,609 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:56:26,611 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer qCcCAOrtojU51fA3qx8LmPr5EG5Y'}"}
2024-09-11 06:56:26,611 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDY1NjI2', 'Timestamp': '20240911065626', 'CheckoutRequestID': 'ws_CO_11092024095603530720745196'}"}
2024-09-11 06:56:26,612 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:56:27,351 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 06:56:27,351 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519031204', 'CheckoutRequestID': 'ws_CO_11092024095603530720745196', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024095603530720745196 899885"}
2024-09-11 06:56:27,475 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:56:27,981 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:56:27,982 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:56:28,202 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:56:58,843 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19029672', 'CheckoutRequestID': 'ws_CO_11092024095650751708216512', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB671MQK0'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911095658}, {'Name': 'PhoneNumber', 'Value': 254708216512}]}}}}"}
2024-09-11 06:56:58,844 - INFO - {'updated_data': 'callback data began'}
2024-09-11 06:56:58,844 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19029672', 'CheckoutRequestID': 'ws_CO_11092024095650751708216512', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB671MQK0'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911095658}, {'Name': 'PhoneNumber', 'Value': 254708216512}]}}}}}
2024-09-11 06:56:59,007 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:56:59,185 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:56:59,187 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:56:59,408 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:57:06,906 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:57:07,105 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:57:07,106 - INFO - {'updated': 'initiated stk query for ws_CO_11092024095650751708216512 827142 '}
2024-09-11 06:57:07,180 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:57:07,781 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:57:07,783 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 03UfA8MkKemvSj0G8VZCkDvCttG3'}"}
2024-09-11 06:57:07,783 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDY1NzA3', 'Timestamp': '20240911065707', 'CheckoutRequestID': 'ws_CO_11092024095650751708216512'}"}
2024-09-11 06:57:07,784 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:57:08,384 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 06:57:08,385 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19029672', 'CheckoutRequestID': 'ws_CO_11092024095650751708216512', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024095650751708216512 827142"}
2024-09-11 06:57:08,518 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:57:08,713 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:57:08,714 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:57:08,926 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:57:32,973 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:57:33,175 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:57:33,176 - INFO - there is a test coming
2024-09-11 06:57:33,176 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 06:57:33,240 - INFO - {'updated_data': 'the data is now as 254720289442'}
2024-09-11 06:57:33,241 - INFO - the data is now as 254720289442
2024-09-11 06:57:33,257 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 06:57:33,257 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 06:57:33,258 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:57:33,915 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:57:33,917 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 04olr3inFHkRXb9c4Oyni4kWLZHJ'}"}
2024-09-11 06:57:33,918 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDY1NzMz', 'Timestamp': '20240911065733', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '170', 'PartyA': '254720289442', 'PartyB': 827142, 'PhoneNumber': '254720289442', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-21358', 'TransactionDesc': 'Some payment'}
2024-09-11 06:57:33,923 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:57:34,759 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 06:57:34,765 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171176948', 'CheckoutRequestID': 'ws_CO_11092024095734528720289442', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 06:57:42,066 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:57:42,197 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:57:42,197 - INFO - there is a test coming
2024-09-11 06:57:42,197 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 06:57:42,243 - INFO - {'updated_data': 'the data is now as 254799836211'}
2024-09-11 06:57:42,244 - INFO - the data is now as 254799836211
2024-09-11 06:57:42,261 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 06:57:42,262 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 06:57:42,263 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:57:42,843 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:57:42,845 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Sdo1qGWK154FXT9BbPtyvwHfzM2Q'}"}
2024-09-11 06:57:42,845 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDY1NzQy', 'Timestamp': '20240911065742', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3700', 'PartyA': '254799836211', 'PartyB': 827142, 'PhoneNumber': '254799836211', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-51977', 'TransactionDesc': 'Some payment'}
2024-09-11 06:57:42,846 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:57:43,624 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 06:57:43,644 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181528480', 'CheckoutRequestID': 'ws_CO_11092024095743378799836211', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 06:57:46,559 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:57:46,717 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:57:46,718 - INFO - {'updated': 'initiated stk query for ws_CO_11092024095734528720289442 827142 '}
2024-09-11 06:57:46,879 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:57:47,572 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:57:47,574 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer zUB7XCpg6vCpBR4YS7vqIAHBpT2y'}"}
2024-09-11 06:57:47,575 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDY1NzQ2', 'Timestamp': '20240911065746', 'CheckoutRequestID': 'ws_CO_11092024095734528720289442'}"}
2024-09-11 06:57:47,576 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:57:48,201 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 06:57:48,201 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171176948', 'CheckoutRequestID': 'ws_CO_11092024095734528720289442', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024095734528720289442 827142"}
2024-09-11 06:57:48,324 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:57:48,504 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:57:48,506 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:57:48,736 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:59:21,131 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181531680', 'CheckoutRequestID': 'ws_CO_11092024095905807708216512', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 37000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB971XECH'}, {'Name': 'TransactionDate', 'Value': 20240911095920}, {'Name': 'PhoneNumber', 'Value': 254708216512}]}}}}"}
2024-09-11 06:59:21,131 - INFO - {'updated_data': 'callback data began'}
2024-09-11 06:59:21,131 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181531680', 'CheckoutRequestID': 'ws_CO_11092024095905807708216512', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 37000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB971XECH'}, {'Name': 'TransactionDate', 'Value': 20240911095920}, {'Name': 'PhoneNumber', 'Value': 254708216512}]}}}}}
2024-09-11 06:59:21,296 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:59:21,980 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:59:21,981 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:59:22,186 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:59:32,395 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:59:32,607 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:59:32,607 - INFO - {'updated': 'initiated stk query for ws_CO_11092024095905807708216512 899885 '}
2024-09-11 06:59:32,660 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:59:33,351 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:59:33,354 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer fR3bwbeRVM3GqBMQLxk9zHWTcYsk'}"}
2024-09-11 06:59:33,356 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDY1OTMy', 'Timestamp': '20240911065932', 'CheckoutRequestID': 'ws_CO_11092024095905807708216512'}"}
2024-09-11 06:59:33,358 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:59:34,103 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 06:59:34,104 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181531680', 'CheckoutRequestID': 'ws_CO_11092024095905807708216512', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024095905807708216512 899885"}
2024-09-11 06:59:34,226 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 06:59:34,423 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 06:59:34,425 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 06:59:34,970 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 06:59:41,910 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 06:59:42,036 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 06:59:42,037 - INFO - there is a test coming
2024-09-11 06:59:42,037 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 06:59:42,082 - INFO - {'updated_data': 'the data is now as 254712391562'}
2024-09-11 06:59:42,082 - INFO - the data is now as 254712391562
2024-09-11 06:59:42,102 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 06:59:42,102 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 06:59:42,104 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:59:42,676 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 06:59:42,678 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer cblfUDY8opsJSkMVE5FWIeeeJe6G'}"}
2024-09-11 06:59:42,678 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDY1OTQy', 'Timestamp': '20240911065942', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '250', 'PartyA': '254712391562', 'PartyB': 827142, 'PhoneNumber': '254712391562', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-38113', 'TransactionDesc': 'Some payment'}
2024-09-11 06:59:42,680 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 06:59:43,536 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 06:59:43,543 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585055004347', 'CheckoutRequestID': 'ws_CO_11092024095943293712391562', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 07:00:04,630 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:00:04,845 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:00:04,845 - INFO - {'updated': 'initiated stk query for ws_CO_11092024095943293712391562 827142 '}
2024-09-11 07:00:04,907 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:00:05,480 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:00:05,482 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer LASEzSljYVOzq1BBkJlls9P9lVWx'}"}
2024-09-11 07:00:05,483 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDcwMDA0', 'Timestamp': '20240911070004', 'CheckoutRequestID': 'ws_CO_11092024095943293712391562'}"}
2024-09-11 07:00:05,485 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:00:06,234 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 07:00:06,234 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585055004347', 'CheckoutRequestID': 'ws_CO_11092024095943293712391562', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024095943293712391562 827142"}
2024-09-11 07:00:06,352 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:00:06,865 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:00:06,866 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:00:07,106 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:00:41,697 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:00:41,911 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:00:41,912 - INFO - there is a test coming
2024-09-11 07:00:41,912 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 07:00:41,961 - INFO - {'updated_data': 'the data is now as 254722765584'}
2024-09-11 07:00:41,962 - INFO - the data is now as 254722765584
2024-09-11 07:00:41,982 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 07:00:41,982 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 07:00:41,983 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:00:42,718 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:00:42,720 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer IW47IcPfc2eyxDt7pgFoXy7HLfxd'}"}
2024-09-11 07:00:42,721 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDcwMDQy', 'Timestamp': '20240911070042', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254722765584', 'PartyB': 827142, 'PhoneNumber': '254722765584', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-8266', 'TransactionDesc': 'Some payment'}
2024-09-11 07:00:42,723 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:00:43,521 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 07:00:43,527 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171667880', 'CheckoutRequestID': 'ws_CO_11092024100043251722765584', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 07:00:48,737 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171667880', 'CheckoutRequestID': 'ws_CO_11092024100043251722765584', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 07:00:48,737 - INFO - {'updated_data': 'callback data began'}
2024-09-11 07:00:48,737 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171667880', 'CheckoutRequestID': 'ws_CO_11092024100043251722765584', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 07:00:48,895 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:00:49,107 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:00:49,108 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:00:49,333 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:01:06,354 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:01:07,225 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:01:07,225 - INFO - {'updated': 'initiated stk query for ws_CO_11092024100043251722765584 827142 '}
2024-09-11 07:01:07,297 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:01:07,902 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:01:07,905 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer aeSAMgnGWT1BfcWXr0XzKmGEq6XA'}"}
2024-09-11 07:01:07,905 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDcwMTA3', 'Timestamp': '20240911070107', 'CheckoutRequestID': 'ws_CO_11092024100043251722765584'}"}
2024-09-11 07:01:07,906 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:01:08,556 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 369
2024-09-11 07:01:08,557 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171667880', 'CheckoutRequestID': 'ws_CO_11092024100043251722765584', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_11092024100043251722765584 827142"}
2024-09-11 07:01:08,689 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:01:08,878 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:01:08,880 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:01:09,390 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:03:26,127 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19045850', 'CheckoutRequestID': 'ws_CO_11092024100315932795913350', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB472F8KC'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911100325}, {'Name': 'PhoneNumber', 'Value': 254795913350}]}}}}"}
2024-09-11 07:03:26,128 - INFO - {'updated_data': 'callback data began'}
2024-09-11 07:03:26,128 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19045850', 'CheckoutRequestID': 'ws_CO_11092024100315932795913350', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB472F8KC'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911100325}, {'Name': 'PhoneNumber', 'Value': 254795913350}]}}}}}
2024-09-11 07:03:26,314 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:03:27,763 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:03:27,765 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:03:27,999 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:03:37,735 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:03:37,889 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:03:37,890 - INFO - there is a test coming
2024-09-11 07:03:37,890 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 07:03:37,943 - INFO - {'updated_data': 'the data is now as 254724328658'}
2024-09-11 07:03:37,944 - INFO - the data is now as 254724328658
2024-09-11 07:03:37,961 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 07:03:37,962 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 07:03:37,963 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:03:38,518 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:03:38,520 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer xH3CDEjqKXIhMfDG6OaVw82KDvxA'}"}
2024-09-11 07:03:38,520 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDcwMzM4', 'Timestamp': '20240911070338', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254724328658', 'PartyB': 899885, 'PhoneNumber': '254724328658', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054184', 'TransactionDesc': 'Some payment'}
2024-09-11 07:03:38,522 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:03:39,684 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 07:03:39,690 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19046698', 'CheckoutRequestID': 'ws_CO_11092024100339324724328658', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 07:03:51,313 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19046698', 'CheckoutRequestID': 'ws_CO_11092024100339324724328658', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB672H316'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911100350}, {'Name': 'PhoneNumber', 'Value': 254724328658}]}}}}"}
2024-09-11 07:03:51,314 - INFO - {'updated_data': 'callback data began'}
2024-09-11 07:03:51,314 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19046698', 'CheckoutRequestID': 'ws_CO_11092024100339324724328658', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB672H316'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911100350}, {'Name': 'PhoneNumber', 'Value': 254724328658}]}}}}}
2024-09-11 07:03:51,483 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:03:51,676 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:03:51,677 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:03:51,911 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:04:06,640 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:04:06,788 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:04:06,789 - INFO - {'updated': 'initiated stk query for ws_CO_11092024100339324724328658 899885 '}
2024-09-11 07:04:06,851 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:04:07,403 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:04:07,405 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Bo7BAnaOLDcptb3GRgky9ZqNkzzh'}"}
2024-09-11 07:04:07,406 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDcwNDA2', 'Timestamp': '20240911070406', 'CheckoutRequestID': 'ws_CO_11092024100339324724328658'}"}
2024-09-11 07:04:07,407 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:04:08,119 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 07:04:08,120 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19046698', 'CheckoutRequestID': 'ws_CO_11092024100339324724328658', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024100339324724328658 899885"}
2024-09-11 07:04:08,246 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:04:08,483 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:04:08,484 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:04:09,040 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:04:27,669 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:04:27,880 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:04:27,881 - INFO - there is a test coming
2024-09-11 07:04:27,881 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 07:04:27,935 - INFO - {'updated_data': 'the data is now as 254722321012'}
2024-09-11 07:04:27,936 - INFO - the data is now as 254722321012
2024-09-11 07:04:27,952 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 07:04:27,953 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 07:04:27,954 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:04:28,646 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:04:28,648 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer CFArydxx0Nm0oDguaoUYilvD86I7'}"}
2024-09-11 07:04:28,648 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDcwNDI4', 'Timestamp': '20240911070428', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254722321012', 'PartyB': 899885, 'PhoneNumber': '254722321012', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0620297-1726038268018', 'TransactionDesc': 'Some payment'}
2024-09-11 07:04:28,649 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:04:29,571 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 07:04:29,577 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee598968484', 'CheckoutRequestID': 'ws_CO_11092024100429282722321012', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 07:04:49,058 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee598968484', 'CheckoutRequestID': 'ws_CO_11092024100429282722321012', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB672LII0'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911100448}, {'Name': 'PhoneNumber', 'Value': 254722321012}]}}}}"}
2024-09-11 07:04:49,058 - INFO - {'updated_data': 'callback data began'}
2024-09-11 07:04:49,058 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee598968484', 'CheckoutRequestID': 'ws_CO_11092024100429282722321012', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB672LII0'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911100448}, {'Name': 'PhoneNumber', 'Value': 254722321012}]}}}}}
2024-09-11 07:04:49,286 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:04:49,753 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:04:49,755 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:04:50,314 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:04:57,135 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:04:57,275 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:04:57,276 - INFO - {'updated': 'initiated stk query for ws_CO_11092024100429282722321012 899885 '}
2024-09-11 07:04:57,338 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:04:57,949 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:04:57,951 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer sB7qEGGk2ftHMFnsK0NBhCM9Olhz'}"}
2024-09-11 07:04:57,951 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDcwNDU3', 'Timestamp': '20240911070457', 'CheckoutRequestID': 'ws_CO_11092024100429282722321012'}"}
2024-09-11 07:04:57,952 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:04:58,580 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 07:04:58,580 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee598968484', 'CheckoutRequestID': 'ws_CO_11092024100429282722321012', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024100429282722321012 899885"}
2024-09-11 07:04:58,702 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:04:59,210 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:04:59,212 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:04:59,430 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:06:22,481 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171185990', 'CheckoutRequestID': 'ws_CO_11092024100615064748914566', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB972SAFH'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911100621}, {'Name': 'PhoneNumber', 'Value': 254748914566}]}}}}"}
2024-09-11 07:06:22,481 - INFO - {'updated_data': 'callback data began'}
2024-09-11 07:06:22,482 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171185990', 'CheckoutRequestID': 'ws_CO_11092024100615064748914566', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB972SAFH'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911100621}, {'Name': 'PhoneNumber', 'Value': 254748914566}]}}}}}
2024-09-11 07:06:22,645 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:06:24,843 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:06:24,844 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:06:25,365 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:06:52,683 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:06:52,920 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:06:52,921 - INFO - there is a test coming
2024-09-11 07:06:52,921 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 07:06:52,965 - INFO - {'updated_data': 'the data is now as 254726554046'}
2024-09-11 07:06:52,965 - INFO - the data is now as 254726554046
2024-09-11 07:06:52,990 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 07:06:52,990 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 07:06:52,991 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:06:53,612 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:06:53,614 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 4oPAOP2WATYlX6CzxP9jfljHCImc'}"}
2024-09-11 07:06:53,615 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDcwNjUz', 'Timestamp': '20240911070653', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '15000', 'PartyA': '254726554046', 'PartyB': 827142, 'PhoneNumber': '254726554046', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '169-9268', 'TransactionDesc': 'Some payment'}
2024-09-11 07:06:53,616 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:06:54,754 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 07:06:54,762 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076862447', 'CheckoutRequestID': 'ws_CO_11092024100654247726554046', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 07:07:21,051 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:07:21,195 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:07:21,196 - INFO - {'updated': 'initiated stk query for ws_CO_11092024100654247726554046 827142 '}
2024-09-11 07:07:21,272 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:07:21,950 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:07:21,952 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer N4gd750pqZASGffY88RAZEXkhuKY'}"}
2024-09-11 07:07:21,953 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDcwNzIx', 'Timestamp': '20240911070721', 'CheckoutRequestID': 'ws_CO_11092024100654247726554046'}"}
2024-09-11 07:07:21,954 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:07:22,674 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-11 07:07:22,675 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f076862447', 'CheckoutRequestID': 'ws_CO_11092024100654247726554046', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_11092024100654247726554046 827142"}
2024-09-11 07:07:22,796 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:07:23,265 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:07:23,266 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:07:23,490 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:07:26,316 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:07:26,449 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:07:26,450 - INFO - there is a test coming
2024-09-11 07:07:26,450 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 07:07:26,492 - INFO - {'updated_data': 'the data is now as 254726554046'}
2024-09-11 07:07:26,493 - INFO - the data is now as 254726554046
2024-09-11 07:07:26,508 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 07:07:26,508 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 07:07:26,509 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:07:27,067 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:07:27,069 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer rpYedFBGL6TY3uLPa91UfWxvmOGD'}"}
2024-09-11 07:07:27,070 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDcwNzI3', 'Timestamp': '20240911070727', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '15000', 'PartyA': '254726554046', 'PartyB': 827142, 'PhoneNumber': '254726554046', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '169-9268', 'TransactionDesc': 'Some payment'}
2024-09-11 07:07:27,071 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:07:27,932 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 07:07:27,944 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170950267', 'CheckoutRequestID': 'ws_CO_11092024100727612726554046', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 07:08:29,950 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:08:30,247 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:08:30,247 - INFO - there is a test coming
2024-09-11 07:08:30,247 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 07:08:30,306 - INFO - {'updated_data': 'the data is now as 254712849542'}
2024-09-11 07:08:30,306 - INFO - the data is now as 254712849542
2024-09-11 07:08:30,324 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 07:08:30,324 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 07:08:30,326 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:08:31,046 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:08:31,048 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer VyWyTlvDAAEX1Zu6UCJfsx1ubBcn'}"}
2024-09-11 07:08:31,048 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDcwODMx', 'Timestamp': '20240911070831', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '109535', 'PartyA': '254712849542', 'PartyB': 827142, 'PhoneNumber': '254712849542', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '121-40351', 'TransactionDesc': 'Some payment'}
2024-09-11 07:08:31,049 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:08:32,029 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 07:08:32,035 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171188766', 'CheckoutRequestID': 'ws_CO_11092024100831585712849542', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 07:10:02,492 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171189894', 'CheckoutRequestID': 'ws_CO_11092024100948904727923253', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5934.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB4738G8C'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911101001}, {'Name': 'PhoneNumber', 'Value': 254727923253}]}}}}"}
2024-09-11 07:10:02,492 - INFO - {'updated_data': 'callback data began'}
2024-09-11 07:10:02,492 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171189894', 'CheckoutRequestID': 'ws_CO_11092024100948904727923253', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5934.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB4738G8C'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911101001}, {'Name': 'PhoneNumber', 'Value': 254727923253}]}}}}}
2024-09-11 07:10:02,671 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:10:03,984 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:10:03,986 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:10:04,208 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:10:09,666 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:10:09,812 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:10:09,812 - INFO - there is a test coming
2024-09-11 07:10:09,813 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 07:10:09,859 - INFO - {'updated_data': 'the data is now as 254721170408'}
2024-09-11 07:10:09,859 - INFO - the data is now as 254721170408
2024-09-11 07:10:09,877 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 07:10:09,877 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 07:10:09,878 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:10:10,576 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:10:10,578 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer J7Jaz1KaPl0zRV4NsbuSFpr9LKW3'}"}
2024-09-11 07:10:10,578 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDcxMDEw', 'Timestamp': '20240911071010', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254721170408', 'PartyB': 827142, 'PhoneNumber': '254721170408', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-26154', 'TransactionDesc': 'Some payment'}
2024-09-11 07:10:10,579 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:10:11,624 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 07:10:11,630 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585055030073', 'CheckoutRequestID': 'ws_CO_11092024101011224721170408', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 07:10:19,407 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585055030073', 'CheckoutRequestID': 'ws_CO_11092024101011224721170408', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB4739SNY'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911101018}, {'Name': 'PhoneNumber', 'Value': 254721170408}]}}}}"}
2024-09-11 07:10:19,407 - INFO - {'updated_data': 'callback data began'}
2024-09-11 07:10:19,408 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585055030073', 'CheckoutRequestID': 'ws_CO_11092024101011224721170408', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB4739SNY'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911101018}, {'Name': 'PhoneNumber', 'Value': 254721170408}]}}}}}
2024-09-11 07:10:19,576 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:10:19,786 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:10:19,792 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:10:20,335 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:10:23,039 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:10:23,235 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:10:23,238 - INFO - {'updated': 'initiated stk query for ws_CO_11092024101011224721170408 827142 '}
2024-09-11 07:10:23,299 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:10:23,889 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:10:23,891 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer TYIz9BpTVDaAb86lSwPhpeTwS1Ax'}"}
2024-09-11 07:10:23,892 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDcxMDIz', 'Timestamp': '20240911071023', 'CheckoutRequestID': 'ws_CO_11092024101011224721170408'}"}
2024-09-11 07:10:23,894 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:10:24,561 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 07:10:24,562 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585055030073', 'CheckoutRequestID': 'ws_CO_11092024101011224721170408', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024101011224721170408 827142"}
2024-09-11 07:10:24,684 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:10:25,144 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:10:25,146 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:10:25,381 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:12:24,348 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:12:24,491 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:12:24,492 - INFO - there is a test coming
2024-09-11 07:12:24,492 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 07:12:24,541 - INFO - {'updated_data': 'the data is now as 254721170408'}
2024-09-11 07:12:24,542 - INFO - the data is now as 254721170408
2024-09-11 07:12:24,560 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 07:12:24,560 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 07:12:24,562 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:12:25,139 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:12:25,141 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer gProAoGdzA7vrf8AAyERfpzuRfQr'}"}
2024-09-11 07:12:25,141 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDcxMjI1', 'Timestamp': '20240911071225', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254721170408', 'PartyB': 827142, 'PhoneNumber': '254721170408', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-26154', 'TransactionDesc': 'Some payment'}
2024-09-11 07:12:25,142 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:12:25,912 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 07:12:25,918 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171680431', 'CheckoutRequestID': 'ws_CO_11092024101225673721170408', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 07:27:30,602 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:27:30,825 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:27:30,826 - INFO - there is a test coming
2024-09-11 07:27:30,826 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 07:27:30,872 - INFO - {'updated_data': 'the data is now as 254724939222'}
2024-09-11 07:27:30,872 - INFO - the data is now as 254724939222
2024-09-11 07:27:30,889 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 07:27:30,889 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 07:27:30,891 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:27:31,554 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:27:31,556 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer z0iAZOxemp6Bf0ycNZvOpLWU32hD'}"}
2024-09-11 07:27:31,556 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDcyNzMx', 'Timestamp': '20240911072731', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '6137', 'PartyA': '254724939222', 'PartyB': 827142, 'PhoneNumber': '254724939222', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '125-16979', 'TransactionDesc': 'Some payment'}
2024-09-11 07:27:31,557 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:27:32,365 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 07:27:32,372 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171208346', 'CheckoutRequestID': 'ws_CO_11092024102732148724939222', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 07:27:34,187 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:27:34,344 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:27:34,345 - INFO - {'updated': 'initiated stk query for ws_CO_11092024102722058717775541 827142 '}
2024-09-11 07:27:34,405 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:27:35,024 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:27:35,026 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer rJjNr3tLdd3ctU4RurhLiO65LHZz'}"}
2024-09-11 07:27:35,027 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDcyNzM0', 'Timestamp': '20240911072734', 'CheckoutRequestID': 'ws_CO_11092024102722058717775541'}"}
2024-09-11 07:27:35,028 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:27:35,780 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 07:27:35,781 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208794565908', 'CheckoutRequestID': 'ws_CO_11092024102722058717775541', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024102722058717775541 827142"}
2024-09-11 07:27:35,905 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:27:36,420 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:27:36,422 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:27:36,643 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:27:39,710 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171208346', 'CheckoutRequestID': 'ws_CO_11092024102732148724939222', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 6137.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB575FKSP'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911102738}, {'Name': 'PhoneNumber', 'Value': 254724939222}]}}}}"}
2024-09-11 07:27:39,711 - INFO - {'updated_data': 'callback data began'}
2024-09-11 07:27:39,711 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171208346', 'CheckoutRequestID': 'ws_CO_11092024102732148724939222', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 6137.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB575FKSP'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911102738}, {'Name': 'PhoneNumber', 'Value': 254724939222}]}}}}}
2024-09-11 07:27:39,869 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:27:40,075 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:27:40,076 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:27:40,305 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:27:43,582 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:27:43,726 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:27:43,727 - INFO - {'updated': 'initiated stk query for ws_CO_11092024102732148724939222 827142 '}
2024-09-11 07:27:43,795 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:27:44,372 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:27:44,374 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer qoEEEqK8winMAE3MbKmZyf90nWGt'}"}
2024-09-11 07:27:44,374 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDcyNzQz', 'Timestamp': '20240911072743', 'CheckoutRequestID': 'ws_CO_11092024102732148724939222'}"}
2024-09-11 07:27:44,376 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:27:45,025 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 07:27:45,026 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171208346', 'CheckoutRequestID': 'ws_CO_11092024102732148724939222', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024102732148724939222 827142"}
2024-09-11 07:27:45,154 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:27:45,667 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:27:45,668 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:27:45,885 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:28:43,725 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519113316', 'CheckoutRequestID': 'ws_CO_11092024102835096725963533', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 07:28:43,726 - INFO - {'updated_data': 'callback data began'}
2024-09-11 07:28:43,726 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519113316', 'CheckoutRequestID': 'ws_CO_11092024102835096725963533', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 07:28:43,881 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:28:44,404 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:28:44,406 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:28:44,623 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:30:01,380 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519117065', 'CheckoutRequestID': 'ws_CO_11092024102951868703752300', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 13444.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB575QDMH'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911103000}, {'Name': 'PhoneNumber', 'Value': 254703752300}]}}}}"}
2024-09-11 07:30:01,381 - INFO - {'updated_data': 'callback data began'}
2024-09-11 07:30:01,381 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519117065', 'CheckoutRequestID': 'ws_CO_11092024102951868703752300', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 13444.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB575QDMH'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911103000}, {'Name': 'PhoneNumber', 'Value': 254703752300}]}}}}}
2024-09-11 07:30:01,553 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:30:02,078 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:30:02,079 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:30:02,303 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:30:03,105 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:30:03,257 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:30:03,258 - INFO - {'updated': 'initiated stk query for ws_CO_11092024102951868703752300 827142 '}
2024-09-11 07:30:03,322 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:30:03,892 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:30:03,894 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer A7l4wBu7dRrMG3icBrfhQbsFKF1c'}"}
2024-09-11 07:30:03,894 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDczMDAz', 'Timestamp': '20240911073003', 'CheckoutRequestID': 'ws_CO_11092024102951868703752300'}"}
2024-09-11 07:30:03,895 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:30:04,622 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 07:30:04,623 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519117065', 'CheckoutRequestID': 'ws_CO_11092024102951868703752300', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024102951868703752300 827142"}
2024-09-11 07:30:04,747 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:30:04,940 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:30:04,941 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:30:05,470 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:31:32,510 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:31:32,669 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:31:32,670 - INFO - there is a test coming
2024-09-11 07:31:32,670 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 07:31:32,717 - INFO - {'updated_data': 'the data is now as 254724227975'}
2024-09-11 07:31:32,718 - INFO - the data is now as 254724227975
2024-09-11 07:31:32,733 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 07:31:32,733 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 07:31:32,734 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:31:33,317 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:31:33,319 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 8j3O5YCcddYxXjAZjuUBIwkpNKEj'}"}
2024-09-11 07:31:33,320 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDczMTMz', 'Timestamp': '20240911073133', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '300', 'PartyA': '254724227975', 'PartyB': 827142, 'PhoneNumber': '254724227975', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-9999', 'TransactionDesc': 'Some payment'}
2024-09-11 07:31:33,326 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:31:34,094 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 07:31:34,100 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599036884', 'CheckoutRequestID': 'ws_CO_11092024103133866724227975', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 07:31:41,490 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599036884', 'CheckoutRequestID': 'ws_CO_11092024103133866724227975', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 300.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB475Y5KS'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911103140}, {'Name': 'PhoneNumber', 'Value': 254724227975}]}}}}"}
2024-09-11 07:31:41,490 - INFO - {'updated_data': 'callback data began'}
2024-09-11 07:31:41,490 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599036884', 'CheckoutRequestID': 'ws_CO_11092024103133866724227975', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 300.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB475Y5KS'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911103140}, {'Name': 'PhoneNumber', 'Value': 254724227975}]}}}}}
2024-09-11 07:31:41,649 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:31:42,355 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:31:42,356 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:31:42,572 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:31:57,489 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:31:57,672 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:31:57,673 - INFO - {'updated': 'initiated stk query for ws_CO_11092024103133866724227975 827142 '}
2024-09-11 07:31:57,743 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:31:58,448 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:31:58,450 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer FJCqA8vzO9Q2EERW3dN1BZTWJulT'}"}
2024-09-11 07:31:58,450 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDczMTU3', 'Timestamp': '20240911073157', 'CheckoutRequestID': 'ws_CO_11092024103133866724227975'}"}
2024-09-11 07:31:58,451 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:31:59,071 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 07:31:59,072 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599036884', 'CheckoutRequestID': 'ws_CO_11092024103133866724227975', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024103133866724227975 827142"}
2024-09-11 07:31:59,188 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:31:59,373 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:31:59,374 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:31:59,590 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:32:05,670 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:32:05,778 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:32:05,778 - INFO - there is a test coming
2024-09-11 07:32:05,779 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 07:32:05,822 - INFO - {'updated_data': 'the data is now as 254720568623'}
2024-09-11 07:32:05,823 - INFO - the data is now as 254720568623
2024-09-11 07:32:05,859 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 07:32:05,859 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 07:32:05,860 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:32:06,446 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:32:06,449 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer sq05nl2dS057jFV23CAxYzr1tt8G'}"}
2024-09-11 07:32:06,449 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDczMjA2', 'Timestamp': '20240911073206', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254720568623', 'PartyB': 827142, 'PhoneNumber': '254720568623', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-19029', 'TransactionDesc': 'Some payment'}
2024-09-11 07:32:06,450 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:32:07,182 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 07:32:07,188 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170976537', 'CheckoutRequestID': 'ws_CO_11092024103206960720568623', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 07:32:09,591 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:32:09,739 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:32:09,739 - INFO - {'updated': 'initiated stk query for ws_CO_11092024103133866724227975 827142 '}
2024-09-11 07:32:09,814 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:32:10,404 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:32:10,406 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 2ppzsYVu3OrKBLGF5aWjdEXGAkGk'}"}
2024-09-11 07:32:10,406 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDczMjA5', 'Timestamp': '20240911073209', 'CheckoutRequestID': 'ws_CO_11092024103133866724227975'}"}
2024-09-11 07:32:10,407 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:32:11,168 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 07:32:11,169 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599036884', 'CheckoutRequestID': 'ws_CO_11092024103133866724227975', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024103133866724227975 827142"}
2024-09-11 07:32:11,298 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:32:11,489 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:32:11,491 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:32:11,709 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:32:14,996 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170976537', 'CheckoutRequestID': 'ws_CO_11092024103206960720568623', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 07:32:14,996 - INFO - {'updated_data': 'callback data began'}
2024-09-11 07:32:14,996 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170976537', 'CheckoutRequestID': 'ws_CO_11092024103206960720568623', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 07:32:15,224 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:32:15,328 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:32:15,373 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-11 07:32:15,374 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 07:32:15,429 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:32:15,430 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:32:16,009 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:32:18,082 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:32:18,098 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-11 07:32:18,099 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 07:32:20,251 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170976596', 'CheckoutRequestID': 'ws_CO_11092024103209767794444678', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB4760RKY'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911103219}, {'Name': 'PhoneNumber', 'Value': 254794444678}]}}}}"}
2024-09-11 07:32:20,252 - INFO - {'updated_data': 'callback data began'}
2024-09-11 07:32:20,252 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170976596', 'CheckoutRequestID': 'ws_CO_11092024103209767794444678', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB4760RKY'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911103219}, {'Name': 'PhoneNumber', 'Value': 254794444678}]}}}}}
2024-09-11 07:32:20,418 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:32:20,602 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:32:20,604 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:32:21,136 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:32:33,037 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:32:33,162 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:32:33,163 - INFO - {'updated': 'initiated stk query for ws_CO_11092024103209767794444678 899885 '}
2024-09-11 07:32:33,235 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:32:33,837 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:32:33,841 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 4Gfn5xDW0bqZX3BA7qh43cajzkRM'}"}
2024-09-11 07:32:33,843 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDczMjMz', 'Timestamp': '20240911073233', 'CheckoutRequestID': 'ws_CO_11092024103209767794444678'}"}
2024-09-11 07:32:33,847 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:32:34,443 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 07:32:34,444 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170976596', 'CheckoutRequestID': 'ws_CO_11092024103209767794444678', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024103209767794444678 899885"}
2024-09-11 07:32:34,568 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:32:34,766 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:32:34,768 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:32:34,995 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:32:35,640 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:32:35,660 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-11 07:32:35,660 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 07:33:19,337 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:33:19,514 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:33:19,515 - INFO - there is a test coming
2024-09-11 07:33:19,515 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 07:33:19,561 - INFO - {'updated_data': 'the data is now as 254726079085'}
2024-09-11 07:33:19,561 - INFO - the data is now as 254726079085
2024-09-11 07:33:19,577 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 07:33:19,577 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 07:33:19,578 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:33:20,329 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:33:20,331 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer hQcrmzs2SxHg9APb2ovBduGwSH9s'}"}
2024-09-11 07:33:20,332 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDczMzIw', 'Timestamp': '20240911073320', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '50', 'PartyA': '254726079085', 'PartyB': 827142, 'PhoneNumber': '254726079085', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BIPF/0000378-1283', 'TransactionDesc': 'Some payment'}
2024-09-11 07:33:20,333 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:33:25,194 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 07:33:25,203 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8681250', 'CheckoutRequestID': 'ws_CO_11092024103320966726079085', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 07:33:37,948 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8681250', 'CheckoutRequestID': 'ws_CO_11092024103320966726079085', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 50.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB6766PYS'}, {'Name': 'TransactionDate', 'Value': 20240911103337}, {'Name': 'PhoneNumber', 'Value': 254726079085}]}}}}"}
2024-09-11 07:33:37,948 - INFO - {'updated_data': 'callback data began'}
2024-09-11 07:33:37,948 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8681250', 'CheckoutRequestID': 'ws_CO_11092024103320966726079085', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 50.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB6766PYS'}, {'Name': 'TransactionDate', 'Value': 20240911103337}, {'Name': 'PhoneNumber', 'Value': 254726079085}]}}}}}
2024-09-11 07:33:38,116 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:33:38,308 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:33:38,309 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:33:38,544 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:33:47,552 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171215166', 'CheckoutRequestID': 'ws_CO_11092024103329494757448035', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1340.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB6767M4U'}, {'Name': 'TransactionDate', 'Value': 20240911103346}, {'Name': 'PhoneNumber', 'Value': 254757448035}]}}}}"}
2024-09-11 07:33:47,552 - INFO - {'updated_data': 'callback data began'}
2024-09-11 07:33:47,552 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171215166', 'CheckoutRequestID': 'ws_CO_11092024103329494757448035', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1340.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB6767M4U'}, {'Name': 'TransactionDate', 'Value': 20240911103346}, {'Name': 'PhoneNumber', 'Value': 254757448035}]}}}}}
2024-09-11 07:33:47,713 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:33:47,908 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:33:47,915 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:33:48,166 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:34:23,501 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:34:23,674 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:34:23,675 - INFO - there is a test coming
2024-09-11 07:34:23,675 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 07:34:23,718 - INFO - {'updated_data': 'the data is now as 254706079362'}
2024-09-11 07:34:23,718 - INFO - the data is now as 254706079362
2024-09-11 07:34:23,735 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 07:34:23,735 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 07:34:23,737 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:34:24,496 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:34:24,498 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 8dmhTIREoaUgJnQzdLHZYGFtesB5'}"}
2024-09-11 07:34:24,499 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDczNDI0', 'Timestamp': '20240911073424', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254706079362', 'PartyB': 827142, 'PhoneNumber': '254706079362', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-52784', 'TransactionDesc': 'Some payment'}
2024-09-11 07:34:24,500 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:34:28,283 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 07:34:28,292 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171704032', 'CheckoutRequestID': 'ws_CO_11092024103425016706079362', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 07:35:04,604 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181622782', 'CheckoutRequestID': 'ws_CO_11092024103454829702387282', 'ResultCode': 3, 'ResultDesc': 'Declined due to limit rule: greater than the maximum transaction amount.'}}}"}
2024-09-11 07:35:04,605 - INFO - {'updated_data': 'callback data began'}
2024-09-11 07:35:04,605 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181622782', 'CheckoutRequestID': 'ws_CO_11092024103454829702387282', 'ResultCode': 3, 'ResultDesc': 'Declined due to limit rule: greater than the maximum transaction amount.'}}}}
2024-09-11 07:35:04,763 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:35:05,262 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:35:05,263 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:35:05,812 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:35:06,044 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:35:06,175 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:35:06,176 - INFO - {'updated': 'initiated stk query for ws_CO_11092024103454829702387282 899885 '}
2024-09-11 07:35:06,248 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:35:06,813 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:35:06,815 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer yOc6GAnZKlphMjcYdmkIHQ081cE5'}"}
2024-09-11 07:35:06,815 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDczNTA2', 'Timestamp': '20240911073506', 'CheckoutRequestID': 'ws_CO_11092024103454829702387282'}"}
2024-09-11 07:35:06,816 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:35:07,438 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 411
2024-09-11 07:35:07,439 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181622782', 'CheckoutRequestID': 'ws_CO_11092024103454829702387282', 'ResultCode': '3', 'ResultDesc': 'Declined due to limit rule: greater than the maximum transaction amount.'} for ws_CO_11092024103454829702387282 899885"}
2024-09-11 07:35:07,559 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:35:07,757 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:35:07,759 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:35:07,998 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:35:46,214 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:35:46,381 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:35:46,382 - INFO - {'updated': 'initiated stk query for ws_CO_11092024103532812702387282 899885 '}
2024-09-11 07:35:46,441 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:35:47,018 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:35:47,020 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 32PdlYKoZVsa7eBLPP1yDmJsPkGF'}"}
2024-09-11 07:35:47,021 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDczNTQ2', 'Timestamp': '20240911073546', 'CheckoutRequestID': 'ws_CO_11092024103532812702387282'}"}
2024-09-11 07:35:47,022 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:35:47,642 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 411
2024-09-11 07:35:47,642 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8687323', 'CheckoutRequestID': 'ws_CO_11092024103532812702387282', 'ResultCode': '3', 'ResultDesc': 'Declined due to limit rule: greater than the maximum transaction amount.'} for ws_CO_11092024103532812702387282 899885"}
2024-09-11 07:35:47,765 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:35:47,962 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:35:47,964 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:35:48,173 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:37:48,259 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599052520', 'CheckoutRequestID': 'ws_CO_11092024103734017723042021', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 23108.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB876PPBY'}, {'Name': 'TransactionDate', 'Value': 20240911103747}, {'Name': 'PhoneNumber', 'Value': 254723042021}]}}}}"}
2024-09-11 07:37:48,259 - INFO - {'updated_data': 'callback data began'}
2024-09-11 07:37:48,259 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599052520', 'CheckoutRequestID': 'ws_CO_11092024103734017723042021', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 23108.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB876PPBY'}, {'Name': 'TransactionDate', 'Value': 20240911103747}, {'Name': 'PhoneNumber', 'Value': 254723042021}]}}}}}
2024-09-11 07:37:48,415 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:37:48,619 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:37:48,620 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:37:48,853 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:38:20,401 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:38:20,510 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:38:20,511 - INFO - there is a test coming
2024-09-11 07:38:20,511 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 07:38:20,573 - INFO - {'updated_data': 'the data is now as 254714699386'}
2024-09-11 07:38:20,574 - INFO - the data is now as 254714699386
2024-09-11 07:38:20,593 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 07:38:20,593 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 07:38:20,594 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:38:21,196 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:38:21,204 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer J9cy86dkZYrByagBw7k9xJNw7pYW'}"}
2024-09-11 07:38:21,209 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDczODIx', 'Timestamp': '20240911073821', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '4000', 'PartyA': '254714699386', 'PartyB': 899885, 'PhoneNumber': '254714699386', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA006636CP-1726040299382', 'TransactionDesc': 'Some payment'}
2024-09-11 07:38:21,223 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:38:22,051 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 07:38:22,056 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e170983168', 'CheckoutRequestID': 'ws_CO_11092024103821815714699386', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 07:38:33,621 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181631588', 'CheckoutRequestID': 'ws_CO_11092024103819369722562750', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 9182.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB276SY02'}, {'Name': 'TransactionDate', 'Value': 20240911103833}, {'Name': 'PhoneNumber', 'Value': 254722562750}]}}}}"}
2024-09-11 07:38:33,621 - INFO - {'updated_data': 'callback data began'}
2024-09-11 07:38:33,621 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181631588', 'CheckoutRequestID': 'ws_CO_11092024103819369722562750', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 9182.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB276SY02'}, {'Name': 'TransactionDate', 'Value': 20240911103833}, {'Name': 'PhoneNumber', 'Value': 254722562750}]}}}}}
2024-09-11 07:38:33,782 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:38:33,993 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 07:38:33,994 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 07:38:34,239 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 07:55:41,844 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19178312', 'CheckoutRequestID': 'ws_CO_11092024105530664703115400', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB278YOR2'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911105541}, {'Name': 'PhoneNumber', 'Value': 254703115400}]}}}}"}
2024-09-11 07:55:41,845 - INFO - {'updated_data': 'callback data began'}
2024-09-11 07:55:41,845 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19178312', 'CheckoutRequestID': 'ws_CO_11092024105530664703115400', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB278YOR2'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911105541}, {'Name': 'PhoneNumber', 'Value': 254703115400}]}}}}}
2024-09-11 07:55:42,011 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:55:45,952 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:55:45,972 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-11 07:55:45,973 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 07:56:12,028 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 07:56:12,220 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 07:56:12,221 - INFO - {'updated': 'initiated stk query for ws_CO_11092024105530664703115400 827142 '}
2024-09-11 07:56:12,287 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:56:13,032 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 07:56:13,034 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 4TqP3nseT2JtqPk0Np4ZJqIPprwn'}"}
2024-09-11 07:56:13,034 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDc1NjEy', 'Timestamp': '20240911075612', 'CheckoutRequestID': 'ws_CO_11092024105530664703115400'}"}
2024-09-11 07:56:13,035 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 07:56:13,755 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 07:56:13,756 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19178312', 'CheckoutRequestID': 'ws_CO_11092024105530664703115400', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024105530664703115400 827142"}
2024-09-11 07:56:13,875 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 07:56:21,898 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 522 7045
2024-09-11 07:56:53,455 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 522 7045
2024-09-11 08:01:39,495 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171733756', 'CheckoutRequestID': 'ws_CO_11092024110127244768858487', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB179PKFF'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911110138}, {'Name': 'PhoneNumber', 'Value': 254768858487}]}}}}"}
2024-09-11 08:01:39,496 - INFO - {'updated_data': 'callback data began'}
2024-09-11 08:01:39,496 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171733756', 'CheckoutRequestID': 'ws_CO_11092024110127244768858487', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB179PKFF'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911110138}, {'Name': 'PhoneNumber', 'Value': 254768858487}]}}}}}
2024-09-11 08:01:39,676 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 08:01:43,006 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:01:43,195 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:01:43,196 - INFO - {'updated': 'initiated stk query for ws_CO_11092024110130385790424135 827142 '}
2024-09-11 08:01:43,252 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:01:43,815 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:01:43,817 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer xsGk3IgA52sKRelJCJwYAQbMjMms'}"}
2024-09-11 08:01:43,817 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDgwMTQz', 'Timestamp': '20240911080143', 'CheckoutRequestID': 'ws_CO_11092024110130385790424135'}"}
2024-09-11 08:01:43,818 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:01:44,422 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 08:01:44,423 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024110130385790424135', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024110130385790424135 827142"}
2024-09-11 08:01:44,426 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 08:02:04,917 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 08:02:04,918 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 08:02:05,139 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 08:03:13,076 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:03:13,279 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:03:13,279 - INFO - {'updated': 'initiated stk query for ws_CO_11092024110301913790424135 827142 '}
2024-09-11 08:03:13,342 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:03:13,938 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:03:13,940 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 29PJ4E9Kbx91R2iA3kHGyCbAArw7'}"}
2024-09-11 08:03:13,940 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDgwMzEz', 'Timestamp': '20240911080313', 'CheckoutRequestID': 'ws_CO_11092024110301913790424135'}"}
2024-09-11 08:03:13,942 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:03:14,577 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 08:03:14,577 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19198725', 'CheckoutRequestID': 'ws_CO_11092024110301913790424135', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024110301913790424135 827142"}
2024-09-11 08:03:14,728 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 08:03:14,940 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 08:03:14,941 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 08:03:15,180 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 08:03:35,453 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:03:35,590 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:03:35,591 - INFO - there is a test coming
2024-09-11 08:03:35,591 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 08:03:35,633 - INFO - {'updated_data': 'the data is now as 254706089471'}
2024-09-11 08:03:35,633 - INFO - the data is now as 254706089471
2024-09-11 08:03:35,650 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 08:03:35,650 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 08:03:35,651 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:03:36,223 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:03:36,225 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer AYdSY3WmzbGM8AlBv4GMaWBKjvTB'}"}
2024-09-11 08:03:36,226 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDgwMzM2', 'Timestamp': '20240911080336', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254706089471', 'PartyB': 899885, 'PhoneNumber': '254706089471', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054291', 'TransactionDesc': 'Some payment'}
2024-09-11 08:03:36,227 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:03:37,073 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 08:03:37,079 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88918056', 'CheckoutRequestID': 'ws_CO_11092024110336838706089471', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 08:06:44,699 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:06:44,741 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 08:06:44,741 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 08:17:21,750 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:17:21,928 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:17:21,929 - INFO - {'updated': 'initiated stk query for ws_CO_11092024111710532721852479 899885 '}
2024-09-11 08:17:21,990 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:17:22,570 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:17:22,572 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer n3EymLsMtvjwGCFsXYqZJIYMYCOH'}"}
2024-09-11 08:17:22,572 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDgxNzIx', 'Timestamp': '20240911081721', 'CheckoutRequestID': 'ws_CO_11092024111710532721852479'}"}
2024-09-11 08:17:22,573 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:17:23,284 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 08:17:23,284 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024111710532721852479', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024111710532721852479 899885"}
2024-09-11 08:17:23,287 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 08:23:46,381 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:23:46,574 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:23:46,575 - INFO - {'updated': 'initiated stk query for ws_CO_11092024112307601722796197 899885 '}
2024-09-11 08:23:46,645 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:23:47,209 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:23:47,212 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 9k1xfVgJ6S63M6mmNcpjbThAO6AD'}"}
2024-09-11 08:23:47,215 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDgyMzQ2', 'Timestamp': '20240911082346', 'CheckoutRequestID': 'ws_CO_11092024112307601722796197'}"}
2024-09-11 08:23:47,216 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:23:52,373 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 429 221
2024-09-11 08:23:52,374 - INFO - {'updated': "Received response {'fault': {'faultstring': 'Spike arrest violation. Allowed rate : MessageRate{messagesPerPeriod=25, periodInMicroseconds=1000000, maxBurstMessageCount=2.5}', 'detail': {'errorcode': 'policies.ratelimit.SpikeArrestViolation'}}} for ws_CO_11092024112307601722796197 899885"}
2024-09-11 08:23:52,376 - WARNING - Too Many Requests: /api/v1/stk/query/
2024-09-11 08:26:40,332 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:26:40,514 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:26:40,515 - INFO - there is a test coming
2024-09-11 08:26:40,515 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 08:26:54,155 - INFO - {'updated_data': 'the data is now as 254724859647'}
2024-09-11 08:26:54,155 - INFO - the data is now as 254724859647
2024-09-11 08:26:54,173 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 08:26:54,174 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 08:26:54,175 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:26:54,844 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:26:54,846 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 3iSUOWyqIRGjhUwGK0AS7EspGvA3'}"}
2024-09-11 08:26:54,847 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDgyNjU0', 'Timestamp': '20240911082654', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '50000', 'PartyA': '254724859647', 'PartyB': 827142, 'PhoneNumber': '254724859647', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-24742', 'TransactionDesc': 'Some payment'}
2024-09-11 08:26:54,848 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:26:57,823 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 404 208
2024-09-11 08:26:57,825 - INFO -  th data is {'code': 404, 'message': {'requestId': 'a5e9-4493-bf74-289c5402a3181756967', 'errorCode': '404.001.03', 'errorMessage': 'Invalid Access Token'}}
2024-09-11 08:26:57,826 - WARNING - Not Found: /api/v1/stk/
2024-09-11 08:30:36,967 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519273165', 'CheckoutRequestID': 'ws_CO_11092024113023818721929993', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 216.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB67DEYFI'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911113036}, {'Name': 'PhoneNumber', 'Value': 254721929993}]}}}}"}
2024-09-11 08:30:36,968 - INFO - {'updated_data': 'callback data began'}
2024-09-11 08:30:36,968 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519273165', 'CheckoutRequestID': 'ws_CO_11092024113023818721929993', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 216.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB67DEYFI'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911113036}, {'Name': 'PhoneNumber', 'Value': 254721929993}]}}}}}
2024-09-11 08:30:37,126 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 08:30:37,621 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 08:30:37,622 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 08:30:37,847 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 08:32:00,790 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:32:00,951 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:32:00,952 - INFO - {'updated': 'initiated stk query for ws_CO_11092024113149561724859647 827142 '}
2024-09-11 08:32:01,026 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:32:01,625 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:32:01,627 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer GkeHzILRq1VOQcibNF8MkfiViwo2'}"}
2024-09-11 08:32:01,628 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDgzMjAx', 'Timestamp': '20240911083201', 'CheckoutRequestID': 'ws_CO_11092024113149561724859647'}"}
2024-09-11 08:32:01,629 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:32:02,274 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 08:32:02,275 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024113149561724859647', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024113149561724859647 827142"}
2024-09-11 08:32:02,277 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 08:35:58,101 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:35:58,246 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:35:58,247 - INFO - there is a test coming
2024-09-11 08:35:58,247 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 08:35:58,292 - INFO - {'updated_data': 'the data is now as 254726922034'}
2024-09-11 08:35:58,293 - INFO - the data is now as 254726922034
2024-09-11 08:35:58,315 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 08:35:58,316 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 08:35:58,317 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:35:58,970 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:35:58,972 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer E1ZX9BwlXgoAjiNHMLxVo45QjVfn'}"}
2024-09-11 08:35:58,973 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDgzNTU4', 'Timestamp': '20240911083558', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254726922034', 'PartyB': 899885, 'PhoneNumber': '254726922034', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA1561143LM-1726043756312', 'TransactionDesc': 'Some payment'}
2024-09-11 08:35:58,974 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:35:59,798 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 08:35:59,804 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181780093', 'CheckoutRequestID': 'ws_CO_11092024113559546726922034', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 08:36:10,751 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:36:10,938 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:36:10,938 - INFO - {'updated': 'initiated stk query for ws_CO_11092024113559546726922034 899885 '}
2024-09-11 08:36:10,993 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:36:11,583 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:36:11,585 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Wr6UHD0yhJ04tlskc3RshNZXcMRd'}"}
2024-09-11 08:36:11,585 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDgzNjEw', 'Timestamp': '20240911083610', 'CheckoutRequestID': 'ws_CO_11092024113559546726922034'}"}
2024-09-11 08:36:11,586 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:36:12,198 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 08:36:12,198 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181780093', 'CheckoutRequestID': 'ws_CO_11092024113559546726922034', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024113559546726922034 899885"}
2024-09-11 08:36:12,318 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 08:36:12,525 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 08:36:12,526 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 08:36:13,078 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 08:36:32,444 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:36:33,249 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:36:33,250 - INFO - there is a test coming
2024-09-11 08:36:33,250 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 08:36:33,291 - INFO - {'updated_data': 'the data is now as 254725273172'}
2024-09-11 08:36:33,291 - INFO - the data is now as 254725273172
2024-09-11 08:36:33,317 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 08:36:33,318 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 08:36:33,319 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:36:33,885 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:36:33,887 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer PFrbk2gR6Jh8DqUnApJFMbayc4T6'}"}
2024-09-11 08:36:33,888 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDgzNjMz', 'Timestamp': '20240911083633', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '500', 'PartyA': '254725273172', 'PartyB': 827142, 'PhoneNumber': '254725273172', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '121-43918', 'TransactionDesc': 'Some payment'}
2024-09-11 08:36:33,889 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:36:34,747 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 08:36:34,760 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8844912', 'CheckoutRequestID': 'ws_CO_11092024113634422725273172', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 08:36:47,884 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8844912', 'CheckoutRequestID': 'ws_CO_11092024113634422725273172', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB17E7IEL'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911113647}, {'Name': 'PhoneNumber', 'Value': 254725273172}]}}}}"}
2024-09-11 08:36:47,885 - INFO - {'updated_data': 'callback data began'}
2024-09-11 08:36:47,885 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8844912', 'CheckoutRequestID': 'ws_CO_11092024113634422725273172', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB17E7IEL'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911113647}, {'Name': 'PhoneNumber', 'Value': 254725273172}]}}}}}
2024-09-11 08:36:48,068 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 08:36:48,595 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 08:36:48,596 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 08:36:48,811 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 08:37:02,753 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171050635', 'CheckoutRequestID': 'ws_CO_11092024113645546720569509', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2428.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB67E8LSI'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911113702}, {'Name': 'PhoneNumber', 'Value': 254720569509}]}}}}"}
2024-09-11 08:37:02,753 - INFO - {'updated_data': 'callback data began'}
2024-09-11 08:37:02,753 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171050635', 'CheckoutRequestID': 'ws_CO_11092024113645546720569509', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2428.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB67E8LSI'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911113702}, {'Name': 'PhoneNumber', 'Value': 254720569509}]}}}}}
2024-09-11 08:37:02,924 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 08:37:03,136 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 08:37:03,138 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 08:37:03,693 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 08:37:05,775 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:37:05,962 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:37:05,963 - INFO - {'updated': 'initiated stk query for ws_CO_11092024113634422725273172 827142 '}
2024-09-11 08:37:06,024 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:37:06,633 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:37:06,635 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer xFbRPEShGeMFigUjvxHt4vWyiK4T'}"}
2024-09-11 08:37:06,636 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDgzNzA2', 'Timestamp': '20240911083706', 'CheckoutRequestID': 'ws_CO_11092024113634422725273172'}"}
2024-09-11 08:37:06,637 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:37:07,280 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 08:37:07,280 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8844912', 'CheckoutRequestID': 'ws_CO_11092024113634422725273172', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024113634422725273172 827142"}
2024-09-11 08:37:07,453 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 08:37:07,633 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:37:07,654 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 08:37:07,661 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 08:37:07,666 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 08:37:07,654 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 08:37:07,900 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 08:37:15,009 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:37:15,165 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:37:15,166 - INFO - there is a test coming
2024-09-11 08:37:15,166 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 08:37:15,214 - INFO - {'updated_data': 'the data is now as 254799805524'}
2024-09-11 08:37:15,215 - INFO - the data is now as 254799805524
2024-09-11 08:37:15,231 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 08:37:15,231 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 08:37:15,232 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:37:15,817 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:37:15,819 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer VLDA07W2CJ1jNg3Ffb3Gmw5GaOdk'}"}
2024-09-11 08:37:15,820 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDgzNzE1', 'Timestamp': '20240911083715', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254799805524', 'PartyB': 827142, 'PhoneNumber': '254799805524', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-26716', 'TransactionDesc': 'Some payment'}
2024-09-11 08:37:15,821 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:37:16,634 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 08:37:16,641 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19287424', 'CheckoutRequestID': 'ws_CO_11092024113716367799805524', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 08:48:40,561 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:48:40,709 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:48:40,709 - INFO - there is a test coming
2024-09-11 08:48:40,710 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 08:48:40,765 - INFO - {'updated_data': 'the data is now as 254723654130'}
2024-09-11 08:48:40,765 - INFO - the data is now as 254723654130
2024-09-11 08:48:40,784 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 08:48:40,785 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 08:48:40,786 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:48:41,407 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:48:41,409 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 02Sx3kYFBDGAkV9x5FKapcUbeYTQ'}"}
2024-09-11 08:48:41,409 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDg0ODQx', 'Timestamp': '20240911084841', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254723654130', 'PartyB': 899885, 'PhoneNumber': '254723654130', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054196', 'TransactionDesc': 'Some payment'}
2024-09-11 08:48:41,411 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:48:45,257 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 08:48:45,267 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599235917', 'CheckoutRequestID': 'ws_CO_11092024114841950723654130', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 08:48:47,194 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 08:48:47,544 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 08:48:47,545 - INFO - {'updated': 'initiated stk query for ws_CO_11092024114831556725368679 827142 '}
2024-09-11 08:48:47,602 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:48:48,267 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 08:48:48,269 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 4TXqVQnCAvq6VGbGZDPrhMdtbkfF'}"}
2024-09-11 08:48:48,269 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDg0ODQ3', 'Timestamp': '20240911084847', 'CheckoutRequestID': 'ws_CO_11092024114831556725368679'}"}
2024-09-11 08:48:48,270 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 08:48:48,904 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 08:48:48,904 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519320032', 'CheckoutRequestID': 'ws_CO_11092024114831556725368679', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024114831556725368679 827142"}
2024-09-11 08:48:49,029 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 08:48:49,560 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 08:48:49,562 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 08:48:49,775 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:04:36,289 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:04:36,476 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:04:36,477 - INFO - there is a test coming
2024-09-11 09:04:36,477 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 09:04:36,525 - INFO - {'updated_data': 'the data is now as 254110013701'}
2024-09-11 09:04:36,526 - INFO - the data is now as 254110013701
2024-09-11 09:04:36,543 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 09:04:36,544 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 09:04:36,545 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:04:37,144 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:04:37,146 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ZZAdFcj6ZvdhjkzhHsXOtr2361xb'}"}
2024-09-11 09:04:37,147 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDkwNDM3', 'Timestamp': '20240911090437', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254110013701', 'PartyB': 899885, 'PhoneNumber': '254110013701', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054200', 'TransactionDesc': 'Some payment'}
2024-09-11 09:04:37,148 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:04:37,948 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 09:04:37,954 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171807661', 'CheckoutRequestID': 'ws_CO_11092024120437675110013701', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 09:04:45,838 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181854555', 'CheckoutRequestID': 'ws_CO_11092024120437021725815080', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 6000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB37HU1X5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911120445}, {'Name': 'PhoneNumber', 'Value': 254725815080}]}}}}"}
2024-09-11 09:04:45,838 - INFO - {'updated_data': 'callback data began'}
2024-09-11 09:04:45,838 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181854555', 'CheckoutRequestID': 'ws_CO_11092024120437021725815080', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 6000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB37HU1X5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911120445}, {'Name': 'PhoneNumber', 'Value': 254725815080}]}}}}}
2024-09-11 09:04:46,010 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:04:46,506 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:04:46,507 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:04:46,743 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:04:47,130 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171807661', 'CheckoutRequestID': 'ws_CO_11092024120437675110013701', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB67HTSKA'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911120446}, {'Name': 'PhoneNumber', 'Value': 254110013701}]}}}}"}
2024-09-11 09:04:47,131 - INFO - {'updated_data': 'callback data began'}
2024-09-11 09:04:47,131 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171807661', 'CheckoutRequestID': 'ws_CO_11092024120437675110013701', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB67HTSKA'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911120446}, {'Name': 'PhoneNumber', 'Value': 254110013701}]}}}}}
2024-09-11 09:04:47,292 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:04:47,496 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:04:47,497 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:04:47,746 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:06:33,459 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19363473', 'CheckoutRequestID': 'ws_CO_11092024120622433729901217', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3485.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB17I1T5B'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911120630}, {'Name': 'PhoneNumber', 'Value': 254729901217}]}}}}"}
2024-09-11 09:06:33,460 - INFO - {'updated_data': 'callback data began'}
2024-09-11 09:06:33,460 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19363473', 'CheckoutRequestID': 'ws_CO_11092024120622433729901217', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3485.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB17I1T5B'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911120630}, {'Name': 'PhoneNumber', 'Value': 254729901217}]}}}}}
2024-09-11 09:06:33,632 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:06:33,908 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:06:33,910 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:06:34,134 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:07:13,726 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:07:14,069 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:07:14,070 - INFO - there is a test coming
2024-09-11 09:07:14,070 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 09:07:14,118 - INFO - {'updated_data': 'the data is now as 254700296971'}
2024-09-11 09:07:14,118 - INFO - the data is now as 254700296971
2024-09-11 09:07:14,136 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 09:07:14,136 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 09:07:14,138 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:07:14,899 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:07:14,901 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ZKmrTTAYAji05OgKlErHpS5CyRVx'}"}
2024-09-11 09:07:14,901 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDkwNzE0', 'Timestamp': '20240911090714', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '200', 'PartyA': '254700296971', 'PartyB': 899885, 'PhoneNumber': '254700296971', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054351', 'TransactionDesc': 'Some payment'}
2024-09-11 09:07:14,902 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:07:15,725 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 09:07:15,732 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d88991322', 'CheckoutRequestID': 'ws_CO_11092024120715477700296971', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 09:08:14,932 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171085148', 'CheckoutRequestID': 'ws_CO_11092024120745852729901217', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2345.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB27I9XGE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911120814}, {'Name': 'PhoneNumber', 'Value': 254729901217}]}}}}"}
2024-09-11 09:08:14,933 - INFO - {'updated_data': 'callback data began'}
2024-09-11 09:08:14,933 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171085148', 'CheckoutRequestID': 'ws_CO_11092024120745852729901217', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2345.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB27I9XGE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911120814}, {'Name': 'PhoneNumber', 'Value': 254729901217}]}}}}}
2024-09-11 09:08:15,092 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:08:15,607 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:08:15,608 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:08:15,832 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:08:32,952 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:08:33,137 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:08:33,141 - INFO - there is a test coming
2024-09-11 09:08:33,141 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 09:08:33,185 - INFO - {'updated_data': 'the data is now as 254725965165'}
2024-09-11 09:08:33,185 - INFO - the data is now as 254725965165
2024-09-11 09:08:33,214 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 09:08:33,215 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 09:08:33,216 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:08:33,998 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:08:34,000 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer VqmluuiTFZiBQID3qEAsTwAqKjmY'}"}
2024-09-11 09:08:34,000 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDkwODM0', 'Timestamp': '20240911090834', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254725965165', 'PartyB': 827142, 'PhoneNumber': '254725965165', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-23824', 'TransactionDesc': 'Some payment'}
2024-09-11 09:08:34,002 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:08:34,765 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 09:08:34,772 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208794681704', 'CheckoutRequestID': 'ws_CO_11092024120834524725965165', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 09:08:45,407 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794681704', 'CheckoutRequestID': 'ws_CO_11092024120834524725965165', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB97ICCLJ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911120844}, {'Name': 'PhoneNumber', 'Value': 254725965165}]}}}}"}
2024-09-11 09:08:45,408 - INFO - {'updated_data': 'callback data began'}
2024-09-11 09:08:45,408 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794681704', 'CheckoutRequestID': 'ws_CO_11092024120834524725965165', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB97ICCLJ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911120844}, {'Name': 'PhoneNumber', 'Value': 254725965165}]}}}}}
2024-09-11 09:08:45,583 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:08:45,797 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:08:45,799 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:08:45,830 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:08:45,935 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:08:45,936 - INFO - {'updated': 'initiated stk query for ws_CO_11092024120834524725965165 827142 '}
2024-09-11 09:08:46,003 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:08:46,025 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:08:46,601 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:08:46,603 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer S5jj8Kwa2o73w7GK6323FSFv5pzc'}"}
2024-09-11 09:08:46,604 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDkwODQ2', 'Timestamp': '20240911090846', 'CheckoutRequestID': 'ws_CO_11092024120834524725965165'}"}
2024-09-11 09:08:46,605 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:08:47,243 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 09:08:47,243 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208794681704', 'CheckoutRequestID': 'ws_CO_11092024120834524725965165', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024120834524725965165 827142"}
2024-09-11 09:08:47,372 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:08:47,569 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:08:47,571 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:08:47,832 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:10:36,275 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:10:36,508 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:10:36,508 - INFO - there is a test coming
2024-09-11 09:10:36,508 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 09:10:36,552 - INFO - {'updated_data': 'the data is now as 254725102770'}
2024-09-11 09:10:36,552 - INFO - the data is now as 254725102770
2024-09-11 09:10:36,568 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 09:10:36,568 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 09:10:36,579 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:10:37,177 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:10:37,180 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Rij8zOvkvgXYJqTublYu09bBRmnS'}"}
2024-09-11 09:10:37,180 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDkxMDM3', 'Timestamp': '20240911091037', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254725102770', 'PartyB': 827142, 'PhoneNumber': '254725102770', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-5013', 'TransactionDesc': 'Some payment'}
2024-09-11 09:10:37,182 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:10:37,992 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 09:10:37,999 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599292517', 'CheckoutRequestID': 'ws_CO_11092024121037728725102770', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 09:13:02,690 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:13:02,707 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-11 09:13:02,708 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 09:13:32,047 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8939327', 'CheckoutRequestID': 'ws_CO_11092024121323611721535909', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB37IZ53Z'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911121331}, {'Name': 'PhoneNumber', 'Value': 254721535909}]}}}}"}
2024-09-11 09:13:32,048 - INFO - {'updated_data': 'callback data began'}
2024-09-11 09:13:32,048 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8939327', 'CheckoutRequestID': 'ws_CO_11092024121323611721535909', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB37IZ53Z'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911121331}, {'Name': 'PhoneNumber', 'Value': 254721535909}]}}}}}
2024-09-11 09:13:32,213 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:13:32,401 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:13:32,403 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:13:32,736 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:13:32,893 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:13:32,893 - INFO - {'updated': 'initiated stk query for ws_CO_11092024121241514724892594 827142 '}
2024-09-11 09:13:32,936 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:13:32,969 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:13:33,549 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:13:33,552 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer e9R3Q5phoGzbrbp5mHrP2AIcR41Z'}"}
2024-09-11 09:13:33,552 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDkxMzMy', 'Timestamp': '20240911091332', 'CheckoutRequestID': 'ws_CO_11092024121241514724892594'}"}
2024-09-11 09:13:33,554 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:13:34,145 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 367
2024-09-11 09:13:34,146 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8937620', 'CheckoutRequestID': 'ws_CO_11092024121241514724892594', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_11092024121241514724892594 827142"}
2024-09-11 09:13:34,292 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:13:34,784 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:13:34,785 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:13:35,028 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:17:43,432 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171095924', 'CheckoutRequestID': 'ws_CO_11092024121727659728428242', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 15000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB77JIEOZ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911121742}, {'Name': 'PhoneNumber', 'Value': 254728428242}]}}}}"}
2024-09-11 09:17:43,433 - INFO - {'updated_data': 'callback data began'}
2024-09-11 09:17:43,433 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171095924', 'CheckoutRequestID': 'ws_CO_11092024121727659728428242', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 15000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB77JIEOZ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911121742}, {'Name': 'PhoneNumber', 'Value': 254728428242}]}}}}}
2024-09-11 09:17:43,597 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:17:43,804 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:17:43,806 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:17:44,012 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:18:12,205 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:18:12,339 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:18:12,342 - INFO - there is a test coming
2024-09-11 09:18:12,342 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 09:18:12,404 - INFO - {'updated_data': 'the data is now as 254797779014'}
2024-09-11 09:18:12,405 - INFO - the data is now as 254797779014
2024-09-11 09:18:12,434 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 09:18:12,434 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 09:18:12,436 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:18:13,013 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:18:13,016 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ktEZQNriddyU3vng6v4cbKjD7IsK'}"}
2024-09-11 09:18:13,016 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDkxODEz', 'Timestamp': '20240911091813', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '160000', 'PartyA': '254797779014', 'PartyB': 899885, 'PhoneNumber': '254797779014', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054298', 'TransactionDesc': 'Some payment'}
2024-09-11 09:18:13,017 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:18:13,872 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 09:18:13,879 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89003401', 'CheckoutRequestID': 'ws_CO_11092024121813545797779014', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 09:18:29,575 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89003401', 'CheckoutRequestID': 'ws_CO_11092024121813545797779014', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-11 09:18:29,575 - INFO - {'updated_data': 'callback data began'}
2024-09-11 09:18:29,575 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89003401', 'CheckoutRequestID': 'ws_CO_11092024121813545797779014', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-11 09:18:29,727 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:18:30,233 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:18:30,235 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:18:30,515 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:19:27,440 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519399833', 'CheckoutRequestID': 'ws_CO_11092024121919546708007013', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 09:19:27,441 - INFO - {'updated_data': 'callback data began'}
2024-09-11 09:19:27,441 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519399833', 'CheckoutRequestID': 'ws_CO_11092024121919546708007013', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 09:19:27,599 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:19:27,823 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:19:27,824 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:19:28,059 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:20:24,433 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8957773', 'CheckoutRequestID': 'ws_CO_11092024122022498797779014', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-11 09:20:24,433 - INFO - {'updated_data': 'callback data began'}
2024-09-11 09:20:24,433 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8957773', 'CheckoutRequestID': 'ws_CO_11092024122022498797779014', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-11 09:20:24,601 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:20:24,814 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:20:24,816 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:20:25,037 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:22:15,095 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:22:15,290 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:22:15,291 - INFO - {'updated': 'initiated stk query for ws_CO_11092024122202125706988587 899885 '}
2024-09-11 09:22:15,350 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:22:16,043 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:22:16,045 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer TCSwSXmrFzEcRdDjAEHX3waVUBN9'}"}
2024-09-11 09:22:16,046 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDkyMjE1', 'Timestamp': '20240911092215', 'CheckoutRequestID': 'ws_CO_11092024122202125706988587'}"}
2024-09-11 09:22:16,047 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:22:16,668 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 388
2024-09-11 09:22:16,669 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519406371', 'CheckoutRequestID': 'ws_CO_11092024122202125706988587', 'ResultCode': '1', 'ResultDesc': 'The balance is insufficient for the transaction.'} for ws_CO_11092024122202125706988587 899885"}
2024-09-11 09:22:16,790 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:22:17,024 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:22:17,025 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:22:17,548 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:22:28,298 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8962307', 'CheckoutRequestID': 'ws_CO_11092024122216167722406290', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 09:22:28,298 - INFO - {'updated_data': 'callback data began'}
2024-09-11 09:22:28,298 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8962307', 'CheckoutRequestID': 'ws_CO_11092024122216167722406290', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 09:22:28,455 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:22:28,638 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:22:28,639 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:22:29,156 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:22:30,651 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:22:30,847 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:22:30,848 - INFO - {'updated': 'initiated stk query for ws_CO_11092024122216167722406290 899885 '}
2024-09-11 09:22:30,909 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:22:31,476 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:22:31,478 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer H6hUKfFNvIf8jPgl8oC6KB56Rb6Q'}"}
2024-09-11 09:22:31,479 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDkyMjMw', 'Timestamp': '20240911092230', 'CheckoutRequestID': 'ws_CO_11092024122216167722406290'}"}
2024-09-11 09:22:31,480 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:22:32,123 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 367
2024-09-11 09:22:32,123 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8962307', 'CheckoutRequestID': 'ws_CO_11092024122216167722406290', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_11092024122216167722406290 899885"}
2024-09-11 09:22:32,275 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:22:32,467 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:22:32,468 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:22:32,673 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:22:57,878 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:22:58,000 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:22:58,000 - INFO - there is a test coming
2024-09-11 09:22:58,000 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 09:22:58,052 - INFO - {'updated_data': 'the data is now as 254721964737'}
2024-09-11 09:22:58,052 - INFO - the data is now as 254721964737
2024-09-11 09:22:58,070 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 09:22:58,070 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 09:22:58,071 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:22:58,716 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:22:58,718 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer qbbpyoHjNJ1yKzVH1JTXzDg4afNb'}"}
2024-09-11 09:22:58,719 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDkyMjU4', 'Timestamp': '20240911092258', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '4000', 'PartyA': '254721964737', 'PartyB': 827142, 'PhoneNumber': '254721964737', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-31112', 'TransactionDesc': 'Some payment'}
2024-09-11 09:22:58,720 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:22:59,462 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 09:22:59,469 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171340020', 'CheckoutRequestID': 'ws_CO_11092024122259263721964737', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 09:23:51,121 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181902937', 'CheckoutRequestID': 'ws_CO_11092024122342990705186796', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 150.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB77KBQ1R'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911122350}, {'Name': 'PhoneNumber', 'Value': 254705186796}]}}}}"}
2024-09-11 09:23:51,121 - INFO - {'updated_data': 'callback data began'}
2024-09-11 09:23:51,121 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181902937', 'CheckoutRequestID': 'ws_CO_11092024122342990705186796', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 150.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB77KBQ1R'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911122350}, {'Name': 'PhoneNumber', 'Value': 254705186796}]}}}}}
2024-09-11 09:23:51,285 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:23:51,501 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:23:51,505 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:23:51,737 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:24:42,217 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19409706', 'CheckoutRequestID': 'ws_CO_11092024122428521722406290', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB37KFU3D'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911122441}, {'Name': 'PhoneNumber', 'Value': 254722406290}]}}}}"}
2024-09-11 09:24:42,218 - INFO - {'updated_data': 'callback data began'}
2024-09-11 09:24:42,218 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19409706', 'CheckoutRequestID': 'ws_CO_11092024122428521722406290', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB37KFU3D'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911122441}, {'Name': 'PhoneNumber', 'Value': 254722406290}]}}}}}
2024-09-11 09:24:42,418 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:24:42,914 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:24:42,915 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:24:43,122 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:24:47,754 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:24:47,902 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:24:47,903 - INFO - {'updated': 'initiated stk query for ws_CO_11092024122428521722406290 899885 '}
2024-09-11 09:24:47,969 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:24:48,554 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:24:48,556 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer cb2PNNNDqAX7tSec74Lgs4GdZUSc'}"}
2024-09-11 09:24:48,556 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDkyNDQ3', 'Timestamp': '20240911092447', 'CheckoutRequestID': 'ws_CO_11092024122428521722406290'}"}
2024-09-11 09:24:48,557 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:24:49,153 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 09:24:49,154 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19409706', 'CheckoutRequestID': 'ws_CO_11092024122428521722406290', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024122428521722406290 899885"}
2024-09-11 09:24:49,279 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:24:49,807 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:24:49,809 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:24:49,833 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:24:49,847 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 09:24:49,848 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 09:24:50,043 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:24:54,614 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:24:54,635 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-11 09:24:54,636 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 09:24:57,228 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181905774', 'CheckoutRequestID': 'ws_CO_11092024122444802725380078', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB17KH0L1'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911122456}, {'Name': 'PhoneNumber', 'Value': 254725380078}]}}}}"}
2024-09-11 09:24:57,228 - INFO - {'updated_data': 'callback data began'}
2024-09-11 09:24:57,229 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3181905774', 'CheckoutRequestID': 'ws_CO_11092024122444802725380078', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB17KH0L1'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911122456}, {'Name': 'PhoneNumber', 'Value': 254725380078}]}}}}}
2024-09-11 09:24:57,397 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:24:57,601 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:24:57,603 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:24:58,148 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:25:55,075 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:25:55,210 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:25:55,211 - INFO - {'updated': 'initiated stk query for ws_CO_11092024122543724716599177 827142 '}
2024-09-11 09:25:55,286 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:25:55,883 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:25:55,885 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 8G7BNBUSTHRWGAJKZxxzf2OCWyc8'}"}
2024-09-11 09:25:55,886 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDkyNTU1', 'Timestamp': '20240911092555', 'CheckoutRequestID': 'ws_CO_11092024122543724716599177'}"}
2024-09-11 09:25:55,887 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:25:56,529 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 09:25:56,529 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b8971476', 'CheckoutRequestID': 'ws_CO_11092024122543724716599177', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024122543724716599177 827142"}
2024-09-11 09:25:56,660 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:25:56,851 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:25:56,852 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:25:57,422 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:26:40,813 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:26:40,943 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:26:40,944 - INFO - there is a test coming
2024-09-11 09:26:40,944 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 09:26:40,985 - INFO - {'updated_data': 'the data is now as 254114449748'}
2024-09-11 09:26:40,986 - INFO - the data is now as 254114449748
2024-09-11 09:26:41,001 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 09:26:41,001 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 09:26:41,002 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:26:41,562 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:26:41,564 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Al3qS8HNZx1TAHSsVD1aVhVftVJ4'}"}
2024-09-11 09:26:41,565 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDkyNjQx', 'Timestamp': '20240911092641', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254114449748', 'PartyB': 899885, 'PhoneNumber': '254114449748', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054325', 'TransactionDesc': 'Some payment'}
2024-09-11 09:26:41,567 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:26:42,447 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 09:26:42,453 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599333452', 'CheckoutRequestID': 'ws_CO_11092024122642099114449748', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 09:26:54,702 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:26:54,716 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 09:26:54,717 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 09:43:19,846 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:43:19,992 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:43:19,993 - INFO - there is a test coming
2024-09-11 09:43:19,993 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 09:43:20,099 - INFO - {'updated_data': 'the data is now as 254711759189'}
2024-09-11 09:43:20,100 - INFO - the data is now as 254711759189
2024-09-11 09:43:20,127 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 09:43:20,127 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 09:43:20,129 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:43:20,808 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:43:20,810 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Nu5jAifh5Hie5RqXeabvGhoC6kkI'}"}
2024-09-11 09:43:20,811 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMDk0MzIw', 'Timestamp': '20240911094320', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254711759189', 'PartyB': 899885, 'PhoneNumber': '254711759189', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054331', 'TransactionDesc': 'Some payment'}
2024-09-11 09:43:20,812 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:43:21,571 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 09:43:21,579 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89032536', 'CheckoutRequestID': 'ws_CO_11092024124321351711759189', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 09:54:55,834 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585055453045', 'CheckoutRequestID': 'ws_CO_11092024125445001720242938', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB27OHN7E'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911125455}, {'Name': 'PhoneNumber', 'Value': 254720242938}]}}}}"}
2024-09-11 09:54:55,835 - INFO - {'updated_data': 'callback data began'}
2024-09-11 09:54:55,835 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585055453045', 'CheckoutRequestID': 'ws_CO_11092024125445001720242938', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB27OHN7E'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911125455}, {'Name': 'PhoneNumber', 'Value': 254720242938}]}}}}}
2024-09-11 09:54:56,005 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 09:54:56,202 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 09:54:56,203 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 09:54:56,427 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 09:57:16,434 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 09:57:16,568 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 09:57:16,568 - INFO - there is a test coming
2024-09-11 09:57:16,568 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 09:57:16,612 - INFO - {'updated_data': 'the data is now as 254720242938'}
2024-09-11 09:57:16,612 - INFO - the data is now as 254720242938
2024-09-11 09:57:16,639 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 09:57:16,640 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 09:57:16,641 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:57:17,243 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 09:57:17,245 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 3V4vo0rKDnW1ZyE3xFH0uIEc7G4M'}"}
2024-09-11 09:57:17,245 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMDk1NzE3', 'Timestamp': '20240911095717', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '47652', 'PartyA': '254720242938', 'PartyB': 827142, 'PhoneNumber': '254720242938', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-139524', 'TransactionDesc': 'Some payment'}
2024-09-11 09:57:17,247 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 09:57:18,097 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 09:57:18,104 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519497228', 'CheckoutRequestID': 'ws_CO_11092024125717805720242938', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 10:01:43,741 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:01:43,929 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:01:43,930 - INFO - {'updated': 'initiated stk query for ws_CO_11092024130132264721326771 827142 '}
2024-09-11 10:01:43,991 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:01:44,663 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:01:44,665 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer dobbDWyA0UvuM9pqGCobruVcHNDI'}"}
2024-09-11 10:01:44,665 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTAwMTQz', 'Timestamp': '20240911100143', 'CheckoutRequestID': 'ws_CO_11092024130132264721326771'}"}
2024-09-11 10:01:44,666 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:01:45,323 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 10:01:45,324 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89052734', 'CheckoutRequestID': 'ws_CO_11092024130132264721326771', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024130132264721326771 827142"}
2024-09-11 10:01:45,446 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:01:45,944 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:01:45,946 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:01:46,178 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:02:02,167 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:02:02,594 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:02:02,595 - INFO - there is a test coming
2024-09-11 10:02:02,595 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 10:02:02,651 - INFO - {'updated_data': 'the data is now as 254721318977'}
2024-09-11 10:02:02,651 - INFO - the data is now as 254721318977
2024-09-11 10:02:02,669 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 10:02:02,670 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 10:02:02,671 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:02:03,549 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:02:03,551 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer pol5pUJ1Bi4uV2SsrNagIJohfFCn'}"}
2024-09-11 10:02:03,552 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTAwMjAz', 'Timestamp': '20240911100203', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '8000', 'PartyA': '254721318977', 'PartyB': 899885, 'PhoneNumber': '254721318977', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054334', 'TransactionDesc': 'Some payment'}
2024-09-11 10:02:03,553 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:02:05,658 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 10:02:05,664 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077059721', 'CheckoutRequestID': 'ws_CO_11092024130204087721318977', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 10:02:16,368 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077059721', 'CheckoutRequestID': 'ws_CO_11092024130204087721318977', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 8000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB77PH34L'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911130216}, {'Name': 'PhoneNumber', 'Value': 254721318977}]}}}}"}
2024-09-11 10:02:16,369 - INFO - {'updated_data': 'callback data began'}
2024-09-11 10:02:16,369 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077059721', 'CheckoutRequestID': 'ws_CO_11092024130204087721318977', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 8000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB77PH34L'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911130216}, {'Name': 'PhoneNumber', 'Value': 254721318977}]}}}}}
2024-09-11 10:02:16,543 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:02:16,776 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:02:16,778 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:02:17,014 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:02:37,684 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:02:37,862 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:02:37,862 - INFO - {'updated': 'initiated stk query for ws_CO_11092024130204087721318977 899885 '}
2024-09-11 10:02:37,926 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:02:38,502 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:02:38,504 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer mxCNXZQIGa7EGufJjDtdsXysW3Xl'}"}
2024-09-11 10:02:38,504 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTAwMjM3', 'Timestamp': '20240911100237', 'CheckoutRequestID': 'ws_CO_11092024130204087721318977'}"}
2024-09-11 10:02:38,505 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:02:39,137 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 10:02:39,137 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077059721', 'CheckoutRequestID': 'ws_CO_11092024130204087721318977', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024130204087721318977 899885"}
2024-09-11 10:02:39,257 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:02:39,684 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:02:39,685 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:02:39,919 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:03:00,272 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:03:00,475 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:03:00,476 - INFO - {'updated': 'initiated stk query for ws_CO_11092024130143057722948355 827142 '}
2024-09-11 10:03:00,532 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:03:01,199 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:03:01,201 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Hs39fw08jWFfdJ2lQJ3qk6q3szRx'}"}
2024-09-11 10:03:01,201 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTAwMzAw', 'Timestamp': '20240911100300', 'CheckoutRequestID': 'ws_CO_11092024130143057722948355'}"}
2024-09-11 10:03:01,202 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:03:01,915 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-11 10:03:01,916 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208794741843', 'CheckoutRequestID': 'ws_CO_11092024130143057722948355', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_11092024130143057722948355 827142"}
2024-09-11 10:03:02,041 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:03:02,261 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:03:02,263 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:03:02,487 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:03:23,838 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:03:24,017 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:03:24,017 - INFO - there is a test coming
2024-09-11 10:03:24,017 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 10:03:24,060 - INFO - {'updated_data': 'the data is now as 254720517321'}
2024-09-11 10:03:24,060 - INFO - the data is now as 254720517321
2024-09-11 10:03:24,081 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 10:03:24,082 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 10:03:24,083 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:03:24,658 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:03:24,660 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer nyDblzA9ME8KrWgoRGbDAQ50wZPs'}"}
2024-09-11 10:03:24,661 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTAwMzI0', 'Timestamp': '20240911100324', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254720517321', 'PartyB': 827142, 'PhoneNumber': '254720517321', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-4432', 'TransactionDesc': 'Some payment'}
2024-09-11 10:03:24,662 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:03:25,404 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 10:03:25,412 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171148483', 'CheckoutRequestID': 'ws_CO_11092024130325183720517321', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 10:03:34,618 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171148483', 'CheckoutRequestID': 'ws_CO_11092024130325183720517321', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB97PNM39'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911130333}, {'Name': 'PhoneNumber', 'Value': 254720517321}]}}}}"}
2024-09-11 10:03:34,619 - INFO - {'updated_data': 'callback data began'}
2024-09-11 10:03:34,619 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171148483', 'CheckoutRequestID': 'ws_CO_11092024130325183720517321', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB97PNM39'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911130333}, {'Name': 'PhoneNumber', 'Value': 254720517321}]}}}}}
2024-09-11 10:03:34,783 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:03:34,977 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:03:34,978 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:03:35,523 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:03:36,515 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:03:36,700 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:03:36,701 - INFO - {'updated': 'initiated stk query for ws_CO_11092024130325183720517321 827142 '}
2024-09-11 10:03:36,768 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:03:37,348 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:03:37,350 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer NvpCLUNSsP95Ct8HZf20fepR5VYL'}"}
2024-09-11 10:03:37,350 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTAwMzM2', 'Timestamp': '20240911100336', 'CheckoutRequestID': 'ws_CO_11092024130325183720517321'}"}
2024-09-11 10:03:37,360 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:03:38,103 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 10:03:38,105 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171148483', 'CheckoutRequestID': 'ws_CO_11092024130325183720517321', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024130325183720517321 827142"}
2024-09-11 10:03:38,224 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:03:38,708 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:03:38,709 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:03:38,917 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:03:41,809 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:03:41,972 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:03:41,973 - INFO - there is a test coming
2024-09-11 10:03:41,973 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 10:03:42,016 - INFO - {'updated_data': 'the data is now as 254721326771'}
2024-09-11 10:03:42,017 - INFO - the data is now as 254721326771
2024-09-11 10:03:42,034 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 10:03:42,034 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 10:03:42,035 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:03:42,794 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:03:42,796 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ceK4nbEQiti35fjPG1ZapDeVsFoT'}"}
2024-09-11 10:03:42,797 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTAwMzQy', 'Timestamp': '20240911100342', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '704', 'PartyA': '254721326771', 'PartyB': 827142, 'PhoneNumber': '254721326771', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '264-14009', 'TransactionDesc': 'Some payment'}
2024-09-11 10:03:42,798 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:03:43,668 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 10:03:43,675 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585055477262', 'CheckoutRequestID': 'ws_CO_11092024130343398721326771', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 10:03:54,859 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:03:54,873 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 10:03:54,873 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 10:04:04,749 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:04:04,871 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:04:04,871 - INFO - {'updated': 'initiated stk query for ws_CO_11092024130343398721326771 827142 '}
2024-09-11 10:04:04,986 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:04:05,840 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:04:05,842 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 48xDZ6QZeOYUUlAyfFQEd5W6q0hF'}"}
2024-09-11 10:04:05,842 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTAwNDA0', 'Timestamp': '20240911100404', 'CheckoutRequestID': 'ws_CO_11092024130343398721326771'}"}
2024-09-11 10:04:05,844 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:04:06,451 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 10:04:06,452 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585055477262', 'CheckoutRequestID': 'ws_CO_11092024130343398721326771', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024130343398721326771 827142"}
2024-09-11 10:04:06,584 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:04:06,809 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:04:06,811 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:04:07,032 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:04:13,807 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:04:13,839 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-11 10:04:13,840 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 10:05:45,691 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:05:45,825 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:05:45,826 - INFO - {'updated': 'initiated stk query for ws_CO_11092024130534634798636633 899885 '}
2024-09-11 10:05:45,889 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:05:46,572 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:05:46,574 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer i1vQM9hgu2MfRK1uciEf3r9IqXOR'}"}
2024-09-11 10:05:46,574 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTAwNTQ1', 'Timestamp': '20240911100545', 'CheckoutRequestID': 'ws_CO_11092024130534634798636633'}"}
2024-09-11 10:05:46,576 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:05:47,207 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 10:05:47,211 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19516070', 'CheckoutRequestID': 'ws_CO_11092024130534634798636633', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024130534634798636633 899885"}
2024-09-11 10:05:47,343 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:05:47,548 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:05:47,549 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:05:47,782 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:13:42,826 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794755245', 'CheckoutRequestID': 'ws_CO_11092024131335079712523021', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB17R1475'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911131342}, {'Name': 'PhoneNumber', 'Value': 254712523021}]}}}}"}
2024-09-11 10:13:42,826 - INFO - {'updated_data': 'callback data began'}
2024-09-11 10:13:42,828 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794755245', 'CheckoutRequestID': 'ws_CO_11092024131335079712523021', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB17R1475'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911131342}, {'Name': 'PhoneNumber', 'Value': 254712523021}]}}}}}
2024-09-11 10:13:42,989 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:13:43,384 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:13:43,385 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:13:43,602 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:13:47,559 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:13:47,747 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:13:47,748 - INFO - {'updated': 'initiated stk query for ws_CO_11092024131335079712523021 827142 '}
2024-09-11 10:13:47,811 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:13:48,451 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:13:48,453 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer sUU1BFQiA3hxNlmxFqXy28jqr5Bg'}"}
2024-09-11 10:13:48,453 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTAxMzQ3', 'Timestamp': '20240911101347', 'CheckoutRequestID': 'ws_CO_11092024131335079712523021'}"}
2024-09-11 10:13:48,454 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:13:49,111 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 429 221
2024-09-11 10:13:49,112 - INFO - {'updated': "Received response {'fault': {'faultstring': 'Spike arrest violation. Allowed rate : MessageRate{messagesPerPeriod=25, periodInMicroseconds=1000000, maxBurstMessageCount=2.5}', 'detail': {'errorcode': 'policies.ratelimit.SpikeArrestViolation'}}} for ws_CO_11092024131335079712523021 827142"}
2024-09-11 10:13:49,114 - WARNING - Too Many Requests: /api/v1/stk/query/
2024-09-11 10:13:52,220 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:13:52,374 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:13:52,375 - INFO - there is a test coming
2024-09-11 10:13:52,375 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 10:13:52,417 - INFO - {'updated_data': 'the data is now as 254726444433'}
2024-09-11 10:13:52,417 - INFO - the data is now as 254726444433
2024-09-11 10:13:52,432 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 10:13:52,433 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 10:13:52,434 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:13:53,112 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:13:53,113 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer GNLbyIP6t3UGO8udZwXaM1gitxSA'}"}
2024-09-11 10:13:53,116 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTAxMzUz', 'Timestamp': '20240911101353', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '30400', 'PartyA': '254726444433', 'PartyB': 899885, 'PhoneNumber': '254726444433', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054356', 'TransactionDesc': 'Some payment'}
2024-09-11 10:13:53,120 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:13:53,937 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 10:13:53,948 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89066706', 'CheckoutRequestID': 'ws_CO_11092024131353676726444433', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 10:14:07,874 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:14:07,900 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-11 10:14:07,901 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 10:27:45,384 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:27:45,400 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 10:27:45,401 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 10:27:46,241 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:27:46,409 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:27:46,410 - INFO - {'updated': 'initiated stk query for ws_CO_11092024132725110725999640 899885 '}
2024-09-11 10:27:46,477 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:27:47,094 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:27:47,096 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ZngloojYuNUn1ljduPoB1S97K82H'}"}
2024-09-11 10:27:47,096 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTAyNzQ2', 'Timestamp': '20240911102746', 'CheckoutRequestID': 'ws_CO_11092024132725110725999640'}"}
2024-09-11 10:27:47,098 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:27:47,812 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 367
2024-09-11 10:27:47,812 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182067262', 'CheckoutRequestID': 'ws_CO_11092024132725110725999640', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_11092024132725110725999640 899885"}
2024-09-11 10:27:47,946 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:27:48,141 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:27:48,143 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:27:48,381 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:27:59,469 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171901483', 'CheckoutRequestID': 'ws_CO_11092024132744046722491492', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB77T0SCV'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911132758}, {'Name': 'PhoneNumber', 'Value': 254722491492}]}}}}"}
2024-09-11 10:27:59,469 - INFO - {'updated_data': 'callback data began'}
2024-09-11 10:27:59,469 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171901483', 'CheckoutRequestID': 'ws_CO_11092024132744046722491492', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB77T0SCV'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911132758}, {'Name': 'PhoneNumber', 'Value': 254722491492}]}}}}}
2024-09-11 10:27:59,627 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:28:00,136 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:28:00,138 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:28:00,374 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:28:15,159 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:28:15,182 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 10:28:15,183 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 10:28:25,790 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:28:25,956 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:28:25,957 - INFO - {'updated': 'initiated stk query for ws_CO_11092024132724017720436270 827142 '}
2024-09-11 10:28:26,015 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:28:26,606 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:28:26,608 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer omTG1KSlQysNxa3nPk9QGET5Gdgp'}"}
2024-09-11 10:28:26,609 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTAyODI2', 'Timestamp': '20240911102826', 'CheckoutRequestID': 'ws_CO_11092024132724017720436270'}"}
2024-09-11 10:28:26,610 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:28:27,261 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 10:28:27,262 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9130781', 'CheckoutRequestID': 'ws_CO_11092024132724017720436270', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024132724017720436270 827142"}
2024-09-11 10:28:27,392 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:28:27,595 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:28:27,596 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:28:27,818 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:30:13,364 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:30:13,531 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:30:13,531 - INFO - {'updated': 'initiated stk query for ws_CO_11092024133002138728610103 827142 '}
2024-09-11 10:30:13,594 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:30:14,168 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:30:14,170 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 9ZjvMhx80ppn5oGzMxGcmXDotTN2'}"}
2024-09-11 10:30:14,171 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTAzMDEz', 'Timestamp': '20240911103013', 'CheckoutRequestID': 'ws_CO_11092024133002138728610103'}"}
2024-09-11 10:30:14,172 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:30:14,896 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 10:30:14,896 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024133002138728610103', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024133002138728610103 827142"}
2024-09-11 10:30:14,899 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 10:31:33,506 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:31:33,710 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:31:33,710 - INFO - there is a test coming
2024-09-11 10:31:33,711 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 10:31:33,758 - INFO - {'updated_data': 'the data is now as 254728610103'}
2024-09-11 10:31:33,758 - INFO - the data is now as 254728610103
2024-09-11 10:31:33,774 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 10:31:33,774 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 10:31:33,775 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:31:34,393 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:31:34,395 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer e4SMHZyLBGxBCa1ZKnAXY73N8LeH'}"}
2024-09-11 10:31:34,396 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTAzMTM0', 'Timestamp': '20240911103134', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '7100', 'PartyA': '254728610103', 'PartyB': 827142, 'PhoneNumber': '254728610103', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-13753', 'TransactionDesc': 'Some payment'}
2024-09-11 10:31:34,397 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:31:35,271 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 10:31:35,277 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208794775219', 'CheckoutRequestID': 'ws_CO_11092024133134999728610103', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 10:37:54,662 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:37:54,791 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:37:54,791 - INFO - there is a test coming
2024-09-11 10:37:54,792 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 10:37:54,840 - INFO - {'updated_data': 'the data is now as 254721475303'}
2024-09-11 10:37:54,840 - INFO - the data is now as 254721475303
2024-09-11 10:37:54,856 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 10:37:54,856 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 10:37:54,857 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:37:55,435 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:37:55,437 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer hnJtMcq80Abxx6AGldMMzhK8ZPjG'}"}
2024-09-11 10:37:55,438 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTAzNzU1', 'Timestamp': '20240911103755', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254721475303', 'PartyB': 827142, 'PhoneNumber': '254721475303', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-31126', 'TransactionDesc': 'Some payment'}
2024-09-11 10:37:55,439 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:37:56,188 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 10:37:56,230 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89093628', 'CheckoutRequestID': 'ws_CO_11092024133755987721475303', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 10:37:58,172 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9160058', 'CheckoutRequestID': 'ws_CO_11092024133735560799775212', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB47UFNAE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911133754}, {'Name': 'PhoneNumber', 'Value': 254799775212}]}}}}"}
2024-09-11 10:37:58,172 - INFO - {'updated_data': 'callback data began'}
2024-09-11 10:37:58,172 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9160058', 'CheckoutRequestID': 'ws_CO_11092024133735560799775212', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB47UFNAE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911133754}, {'Name': 'PhoneNumber', 'Value': 254799775212}]}}}}}
2024-09-11 10:37:58,392 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:37:58,923 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:37:58,924 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:37:59,180 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:38:16,656 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:38:16,800 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:38:16,801 - INFO - {'updated': 'initiated stk query for ws_CO_11092024133735560799775212 827142 '}
2024-09-11 10:38:16,859 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:38:17,511 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:38:17,513 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer AXzAAresqx2a0luxAP7M7aMtu6Zp'}"}
2024-09-11 10:38:17,513 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTAzODE2', 'Timestamp': '20240911103816', 'CheckoutRequestID': 'ws_CO_11092024133735560799775212'}"}
2024-09-11 10:38:17,515 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:38:18,142 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 10:38:18,143 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9160058', 'CheckoutRequestID': 'ws_CO_11092024133735560799775212', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024133735560799775212 827142"}
2024-09-11 10:38:18,288 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:38:18,303 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:38:18,324 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-11 10:38:18,325 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 10:38:18,503 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:38:18,504 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:38:18,717 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:38:35,912 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:38:36,042 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:38:36,044 - INFO - there is a test coming
2024-09-11 10:38:36,044 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 10:38:36,096 - INFO - {'updated_data': 'the data is now as 254724625200'}
2024-09-11 10:38:36,096 - INFO - the data is now as 254724625200
2024-09-11 10:38:36,111 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 10:38:36,111 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 10:38:36,112 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:38:36,781 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:38:36,783 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer p2kLGtDkG74DzCbEfTaGcjP1x6u2'}"}
2024-09-11 10:38:36,783 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTAzODM2', 'Timestamp': '20240911103836', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254724625200', 'PartyB': 899885, 'PhoneNumber': '254724625200', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054357', 'TransactionDesc': 'Some payment'}
2024-09-11 10:38:36,785 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:38:37,593 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 10:38:37,599 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171187786', 'CheckoutRequestID': 'ws_CO_11092024133837323724625200', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 10:43:58,305 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:43:58,317 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 10:43:58,318 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 10:47:35,552 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:47:35,737 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:47:35,738 - INFO - there is a test coming
2024-09-11 10:47:35,738 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 10:47:35,779 - INFO - {'updated_data': 'the data is now as 254722759137'}
2024-09-11 10:47:35,779 - INFO - the data is now as 254722759137
2024-09-11 10:47:35,796 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 10:47:35,796 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 10:47:35,798 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:47:36,479 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:47:36,488 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer yDZAT3hXBqeqQ4VxonQwexRzWLrb'}"}
2024-09-11 10:47:36,489 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTA0NzM2', 'Timestamp': '20240911104736', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '105127', 'PartyA': '254722759137', 'PartyB': 827142, 'PhoneNumber': '254722759137', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '124-5499', 'TransactionDesc': 'Some payment'}
2024-09-11 10:47:36,490 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:47:37,295 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 10:47:37,300 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171198698', 'CheckoutRequestID': 'ws_CO_11092024134737028722759137', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 10:47:49,866 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171198698', 'CheckoutRequestID': 'ws_CO_11092024134737028722759137', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 10:47:49,866 - INFO - {'updated_data': 'callback data began'}
2024-09-11 10:47:49,866 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171198698', 'CheckoutRequestID': 'ws_CO_11092024134737028722759137', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 10:47:50,037 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:47:50,582 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:47:50,584 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:47:50,990 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:48:33,392 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:48:33,522 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:48:33,523 - INFO - there is a test coming
2024-09-11 10:48:33,523 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 10:48:33,577 - INFO - {'updated_data': 'the data is now as 254722885250'}
2024-09-11 10:48:33,577 - INFO - the data is now as 254722885250
2024-09-11 10:48:33,594 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 10:48:33,595 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 10:48:33,596 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:48:34,165 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:48:34,167 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer so0qsmhBSbrVybRlxfYNm7QaCDGk'}"}
2024-09-11 10:48:34,168 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTA0ODM0', 'Timestamp': '20240911104834', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100000', 'PartyA': '254722885250', 'PartyB': 899885, 'PhoneNumber': '254722885250', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054413', 'TransactionDesc': 'Some payment'}
2024-09-11 10:48:34,169 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:48:34,921 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 10:48:34,928 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89106127', 'CheckoutRequestID': 'ws_CO_11092024134834701722885250', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 10:48:56,507 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:48:56,637 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:48:56,637 - INFO - {'updated': 'initiated stk query for ws_CO_11092024134834701722885250 899885 '}
2024-09-11 10:48:56,705 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:48:57,303 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:48:57,305 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 0dt0kik8zcRGwEBEORiZjcS1eLLh'}"}
2024-09-11 10:48:57,305 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTA0ODU2', 'Timestamp': '20240911104856', 'CheckoutRequestID': 'ws_CO_11092024134834701722885250'}"}
2024-09-11 10:48:57,306 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:48:58,030 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 10:48:58,030 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89106127', 'CheckoutRequestID': 'ws_CO_11092024134834701722885250', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024134834701722885250 899885"}
2024-09-11 10:48:58,167 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:48:58,672 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:48:58,674 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:48:58,906 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:52:01,300 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:52:01,452 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:52:01,453 - INFO - there is a test coming
2024-09-11 10:52:01,454 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 10:52:01,497 - INFO - {'updated_data': 'the data is now as 254718007123'}
2024-09-11 10:52:01,498 - INFO - the data is now as 254718007123
2024-09-11 10:52:01,515 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 10:52:01,515 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 10:52:01,517 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:52:02,269 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:52:02,271 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer iAbP9CHjFFjebRMs5gz3qyWR2r6v'}"}
2024-09-11 10:52:02,272 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTA1MjAy', 'Timestamp': '20240911105202', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254718007123', 'PartyB': 899885, 'PhoneNumber': '254718007123', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054414', 'TransactionDesc': 'Some payment'}
2024-09-11 10:52:02,273 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:52:03,069 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 10:52:03,075 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171441289', 'CheckoutRequestID': 'ws_CO_11092024135202858718007123', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 10:52:10,553 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171441289', 'CheckoutRequestID': 'ws_CO_11092024135202858718007123', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB97WGJ4B'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911135209}, {'Name': 'PhoneNumber', 'Value': 254718007123}]}}}}"}
2024-09-11 10:52:10,553 - INFO - {'updated_data': 'callback data began'}
2024-09-11 10:52:10,553 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171441289', 'CheckoutRequestID': 'ws_CO_11092024135202858718007123', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB97WGJ4B'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911135209}, {'Name': 'PhoneNumber', 'Value': 254718007123}]}}}}}
2024-09-11 10:52:10,720 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:52:11,225 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:52:11,226 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:52:11,755 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:52:13,879 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:52:14,014 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:52:14,014 - INFO - {'updated': 'initiated stk query for ws_CO_11092024135202858718007123 899885 '}
2024-09-11 10:52:14,073 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:52:14,734 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:52:14,736 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 6l39eublErGzmGsTkiZv5LSAXpT8'}"}
2024-09-11 10:52:14,736 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTA1MjE0', 'Timestamp': '20240911105214', 'CheckoutRequestID': 'ws_CO_11092024135202858718007123'}"}
2024-09-11 10:52:14,738 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:52:15,470 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 10:52:15,471 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171441289', 'CheckoutRequestID': 'ws_CO_11092024135202858718007123', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024135202858718007123 899885"}
2024-09-11 10:52:15,600 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:52:16,124 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:52:16,125 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:52:16,660 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:57:11,403 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599571687', 'CheckoutRequestID': 'ws_CO_11092024135709011723484008', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 10:57:11,403 - INFO - {'updated_data': 'callback data began'}
2024-09-11 10:57:11,403 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599571687', 'CheckoutRequestID': 'ws_CO_11092024135709011723484008', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 10:57:11,581 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:57:11,830 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:57:11,832 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:57:12,105 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:57:21,054 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182149269', 'CheckoutRequestID': 'ws_CO_11092024135710939724867193', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB07X6FHM'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911135720}, {'Name': 'PhoneNumber', 'Value': 254724867193}]}}}}"}
2024-09-11 10:57:21,055 - INFO - {'updated_data': 'callback data began'}
2024-09-11 10:57:21,055 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182149269', 'CheckoutRequestID': 'ws_CO_11092024135710939724867193', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB07X6FHM'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911135720}, {'Name': 'PhoneNumber', 'Value': 254724867193}]}}}}}
2024-09-11 10:57:21,227 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:57:21,852 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:57:21,853 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:57:22,401 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 10:58:11,185 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:58:11,351 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:58:11,352 - INFO - {'updated': 'initiated stk query for ws_CO_11092024135759989726790715 827142 '}
2024-09-11 10:58:11,414 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:58:12,007 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:58:12,009 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 9odPBQzgpWjz5Gx2dp7l00ZtAOdI'}"}
2024-09-11 10:58:12,010 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTA1ODEx', 'Timestamp': '20240911105811', 'CheckoutRequestID': 'ws_CO_11092024135759989726790715'}"}
2024-09-11 10:58:12,018 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:58:12,631 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 10:58:12,633 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024135759989726790715', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024135759989726790715 827142"}
2024-09-11 10:58:12,635 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 10:58:21,131 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 10:58:21,281 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 10:58:21,282 - INFO - {'updated': 'initiated stk query for ws_CO_11092024135759989726790715 827142 '}
2024-09-11 10:58:21,343 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:58:21,979 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 10:58:21,981 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer DRbAUyCrTypSSSGj7IHFPG3yOnJr'}"}
2024-09-11 10:58:21,982 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTA1ODIx', 'Timestamp': '20240911105821', 'CheckoutRequestID': 'ws_CO_11092024135759989726790715'}"}
2024-09-11 10:58:21,984 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 10:58:22,597 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 377
2024-09-11 10:58:22,597 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171447590', 'CheckoutRequestID': 'ws_CO_11092024135759989726790715', 'ResultCode': '1037', 'ResultDesc': 'DS timeout user cannot be reached'} for ws_CO_11092024135759989726790715 827142"}
2024-09-11 10:58:22,736 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 10:58:23,290 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 10:58:23,292 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 10:58:23,588 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:00:32,666 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:00:32,881 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:00:32,882 - INFO - there is a test coming
2024-09-11 11:00:32,882 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 11:00:32,931 - INFO - {'updated_data': 'the data is now as 254729546094'}
2024-09-11 11:00:32,932 - INFO - the data is now as 254729546094
2024-09-11 11:00:32,948 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 11:00:32,948 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 11:00:32,950 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:00:33,545 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:00:33,547 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer faUdUNWy6FujATiwaPLSbrw8XaXy'}"}
2024-09-11 11:00:33,548 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTEwMDMz', 'Timestamp': '20240911110033', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '43000', 'PartyA': '254729546094', 'PartyB': 899885, 'PhoneNumber': '254729546094', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0622327-1726052431292', 'TransactionDesc': 'Some payment'}
2024-09-11 11:00:33,549 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:00:34,533 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 11:00:34,540 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171212794', 'CheckoutRequestID': 'ws_CO_11092024140034089729546094', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 11:01:41,297 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:01:41,462 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:01:41,463 - INFO - there is a test coming
2024-09-11 11:01:41,463 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 11:01:41,504 - INFO - {'updated_data': 'the data is now as 254713377447'}
2024-09-11 11:01:41,504 - INFO - the data is now as 254713377447
2024-09-11 11:01:41,526 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 11:01:41,527 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 11:01:41,528 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:01:42,184 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:01:42,186 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 3FzVY7P0RC5kSDIc3QXdO7Q9diTD'}"}
2024-09-11 11:01:42,186 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTEwMTQy', 'Timestamp': '20240911110142', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254713377447', 'PartyB': 899885, 'PhoneNumber': '254713377447', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA78106452CP', 'TransactionDesc': 'Some payment'}
2024-09-11 11:01:42,188 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:01:43,072 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 11:01:43,078 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19666153', 'CheckoutRequestID': 'ws_CO_11092024140142838713377447', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 11:02:57,038 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:02:57,174 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:02:57,175 - INFO - {'updated': 'initiated stk query for ws_CO_11092024140245644713377447 899885 '}
2024-09-11 11:02:57,238 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:02:57,804 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:02:57,806 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer cAMZ5eFnHAmtPcShzXCXIKJXKj0t'}"}
2024-09-11 11:02:57,806 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTEwMjU3', 'Timestamp': '20240911110257', 'CheckoutRequestID': 'ws_CO_11092024140245644713377447'}"}
2024-09-11 11:02:57,807 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:02:58,507 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 11:02:58,508 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024140245644713377447', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024140245644713377447 899885"}
2024-09-11 11:02:58,510 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 11:03:07,029 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:03:07,196 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:03:07,196 - INFO - {'updated': 'initiated stk query for ws_CO_11092024140245644713377447 899885 '}
2024-09-11 11:03:07,269 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:03:07,914 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:03:07,916 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer QYS1K23LGT8wSM8tN6pU70Z4155A'}"}
2024-09-11 11:03:07,916 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTEwMzA3', 'Timestamp': '20240911110307', 'CheckoutRequestID': 'ws_CO_11092024140245644713377447'}"}
2024-09-11 11:03:07,918 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:03:08,599 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 11:03:08,600 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171941509', 'CheckoutRequestID': 'ws_CO_11092024140245644713377447', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024140245644713377447 899885"}
2024-09-11 11:03:08,719 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:03:08,909 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:03:08,911 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:03:09,125 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:03:17,870 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519672954', 'CheckoutRequestID': 'ws_CO_11092024140308757721115820', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 250.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB17XZW13'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911140317}, {'Name': 'PhoneNumber', 'Value': 254721115820}]}}}}"}
2024-09-11 11:03:17,871 - INFO - {'updated_data': 'callback data began'}
2024-09-11 11:03:17,871 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519672954', 'CheckoutRequestID': 'ws_CO_11092024140308757721115820', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 250.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB17XZW13'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911140317}, {'Name': 'PhoneNumber', 'Value': 254721115820}]}}}}}
2024-09-11 11:03:18,034 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:03:18,238 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:03:18,239 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:03:18,479 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:09:27,424 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077135119', 'CheckoutRequestID': 'ws_CO_11092024140918269716637530', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB97YTE0Z'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911140925}, {'Name': 'PhoneNumber', 'Value': 254716637530}]}}}}"}
2024-09-11 11:09:27,429 - INFO - {'updated_data': 'callback data began'}
2024-09-11 11:09:27,429 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077135119', 'CheckoutRequestID': 'ws_CO_11092024140918269716637530', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB97YTE0Z'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911140925}, {'Name': 'PhoneNumber', 'Value': 254716637530}]}}}}}
2024-09-11 11:09:27,610 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:09:27,808 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:09:27,810 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:09:28,020 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:09:28,661 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:09:28,694 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-11 11:09:28,694 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 11:09:49,505 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:09:49,531 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 11:09:49,532 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 11:10:04,732 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:10:04,745 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-11 11:10:04,746 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 11:10:49,413 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794819249', 'CheckoutRequestID': 'ws_CO_11092024141040900798570246', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB47Z073W'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911141048}, {'Name': 'PhoneNumber', 'Value': 254798570246}]}}}}"}
2024-09-11 11:10:49,413 - INFO - {'updated_data': 'callback data began'}
2024-09-11 11:10:49,414 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794819249', 'CheckoutRequestID': 'ws_CO_11092024141040900798570246', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB47Z073W'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911141048}, {'Name': 'PhoneNumber', 'Value': 254798570246}]}}}}}
2024-09-11 11:10:49,572 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:10:49,777 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:10:49,779 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:10:50,003 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:11:11,707 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19690304', 'CheckoutRequestID': 'ws_CO_11092024141057341705787527', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 30000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB07Z1VIS'}, {'Name': 'TransactionDate', 'Value': 20240911141110}, {'Name': 'PhoneNumber', 'Value': 254705787527}]}}}}"}
2024-09-11 11:11:11,707 - INFO - {'updated_data': 'callback data began'}
2024-09-11 11:11:11,707 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19690304', 'CheckoutRequestID': 'ws_CO_11092024141057341705787527', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 30000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB07Z1VIS'}, {'Name': 'TransactionDate', 'Value': 20240911141110}, {'Name': 'PhoneNumber', 'Value': 254705787527}]}}}}}
2024-09-11 11:11:11,871 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:11:12,094 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:11:12,096 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:11:12,615 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:11:31,541 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:11:31,719 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:11:31,720 - INFO - {'updated': 'initiated stk query for ws_CO_11092024141057341705787527 899885 '}
2024-09-11 11:11:31,787 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:11:32,384 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:11:32,386 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer bG3BbfQy3gZUwjaRLAZ7eg08PYWd'}"}
2024-09-11 11:11:32,387 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTExMTMx', 'Timestamp': '20240911111131', 'CheckoutRequestID': 'ws_CO_11092024141057341705787527'}"}
2024-09-11 11:11:32,388 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:11:33,088 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 11:11:33,089 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19690304', 'CheckoutRequestID': 'ws_CO_11092024141057341705787527', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024141057341705787527 899885"}
2024-09-11 11:11:33,211 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:11:33,403 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:11:33,405 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:11:33,610 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:11:54,944 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:11:55,104 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:11:55,105 - INFO - {'updated': 'initiated stk query for ws_CO_11092024141040900798570246 827142 '}
2024-09-11 11:11:55,195 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:11:55,899 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:11:55,901 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer h9Fpo9KNGFqIKHSMy9QObXfRlhUS'}"}
2024-09-11 11:11:55,902 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTExMTU1', 'Timestamp': '20240911111155', 'CheckoutRequestID': 'ws_CO_11092024141040900798570246'}"}
2024-09-11 11:11:55,903 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:11:56,554 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 11:11:56,554 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208794819249', 'CheckoutRequestID': 'ws_CO_11092024141040900798570246', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024141040900798570246 827142"}
2024-09-11 11:11:56,689 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:11:56,879 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:11:56,880 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:11:57,185 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:14:59,788 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794824277', 'CheckoutRequestID': 'ws_CO_11092024141457901723220235', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-11 11:14:59,788 - INFO - {'updated_data': 'callback data began'}
2024-09-11 11:14:59,789 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794824277', 'CheckoutRequestID': 'ws_CO_11092024141457901723220235', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-11 11:14:59,956 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:15:00,145 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:15:00,147 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:15:00,355 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:15:09,008 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:15:09,192 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:15:09,192 - INFO - {'updated': 'initiated stk query for ws_CO_11092024141457901723220235 899885 '}
2024-09-11 11:15:09,257 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:15:09,939 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:15:09,941 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer fy36A5MPwShL6kqYwWo5t8qKKS4f'}"}
2024-09-11 11:15:09,941 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTExNTA5', 'Timestamp': '20240911111509', 'CheckoutRequestID': 'ws_CO_11092024141457901723220235'}"}
2024-09-11 11:15:09,942 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:15:10,603 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 376
2024-09-11 11:15:10,604 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208794824277', 'CheckoutRequestID': 'ws_CO_11092024141457901723220235', 'ResultCode': '1037', 'ResultDesc': 'DS timeout user cannot be reached'} for ws_CO_11092024141457901723220235 899885"}
2024-09-11 11:15:10,726 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:15:10,924 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:15:10,928 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:15:11,148 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:15:38,493 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:15:38,507 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 11:15:38,508 - ERROR - Internal Server Error: /api/v1/stk/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 432, in post
    if PAYMENTS_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 11:15:55,151 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:15:55,281 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:15:55,282 - INFO - there is a test coming
2024-09-11 11:15:55,282 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 11:15:55,329 - INFO - {'updated_data': 'the data is now as 254723220235'}
2024-09-11 11:15:55,330 - INFO - the data is now as 254723220235
2024-09-11 11:15:55,348 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 11:15:55,348 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 11:15:55,349 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:15:55,998 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:15:56,000 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer dL9a6CAUymq9dRmgPBDJ1ng7FS4f'}"}
2024-09-11 11:15:56,000 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTExNTU2', 'Timestamp': '20240911111556', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254723220235', 'PartyB': 899885, 'PhoneNumber': '254723220235', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Order No . 14019', 'TransactionDesc': 'Some payment'}
2024-09-11 11:15:56,004 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:15:56,730 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 11:15:56,736 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19703481', 'CheckoutRequestID': 'ws_CO_11092024141556532723220235', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 11:17:35,806 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:17:35,978 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:17:35,978 - INFO - there is a test coming
2024-09-11 11:17:35,979 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 11:17:36,034 - INFO - {'updated_data': 'the data is now as 254717650987'}
2024-09-11 11:17:36,034 - INFO - the data is now as 254717650987
2024-09-11 11:17:36,050 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 11:17:36,051 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 11:17:36,052 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:17:36,769 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:17:36,771 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Gvb4qfl8Qj8M9XWOl0BXdx7Gv6rc'}"}
2024-09-11 11:17:36,772 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTExNzM2', 'Timestamp': '20240911111736', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254717650987', 'PartyB': 899885, 'PhoneNumber': '254717650987', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA004251CP-1726053454041', 'TransactionDesc': 'Some payment'}
2024-09-11 11:17:36,773 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:17:37,712 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 11:17:37,721 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599625444', 'CheckoutRequestID': 'ws_CO_11092024141737417717650987', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 11:18:50,111 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171958662', 'CheckoutRequestID': 'ws_CO_11092024141839761703743459', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 11:18:50,111 - INFO - {'updated_data': 'callback data began'}
2024-09-11 11:18:50,111 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171958662', 'CheckoutRequestID': 'ws_CO_11092024141839761703743459', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 11:18:50,283 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:18:50,673 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:18:50,674 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:18:50,901 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:21:56,156 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171473533', 'CheckoutRequestID': 'ws_CO_11092024142139258112071305', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 17000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB880HWSI'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911142155}, {'Name': 'PhoneNumber', 'Value': 254112071305}]}}}}"}
2024-09-11 11:21:56,156 - INFO - {'updated_data': 'callback data began'}
2024-09-11 11:21:56,156 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171473533', 'CheckoutRequestID': 'ws_CO_11092024142139258112071305', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 17000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB880HWSI'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911142155}, {'Name': 'PhoneNumber', 'Value': 254112071305}]}}}}}
2024-09-11 11:21:56,319 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:21:56,533 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:21:56,535 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:21:56,767 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:21:57,720 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:21:57,967 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:21:57,968 - INFO - {'updated': 'initiated stk query for ws_CO_11092024142139258112071305 899885 '}
2024-09-11 11:21:58,057 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:21:58,631 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:21:58,633 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 3PAAZ1AvlgCM3ztI0hisxEzzfjdF'}"}
2024-09-11 11:21:58,634 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTEyMTU4', 'Timestamp': '20240911112158', 'CheckoutRequestID': 'ws_CO_11092024142139258112071305'}"}
2024-09-11 11:21:58,635 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:21:59,366 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 11:21:59,367 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171473533', 'CheckoutRequestID': 'ws_CO_11092024142139258112071305', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024142139258112071305 899885"}
2024-09-11 11:21:59,488 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:21:59,692 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:21:59,693 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:22:00,223 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:24:26,353 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:24:26,481 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:24:26,482 - INFO - there is a test coming
2024-09-11 11:24:26,483 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 11:24:26,527 - INFO - {'updated_data': 'the data is now as 254715978200'}
2024-09-11 11:24:26,527 - INFO - the data is now as 254715978200
2024-09-11 11:24:26,542 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 11:24:26,543 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 11:24:26,551 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:24:27,162 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:24:27,163 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer wyiOitQZg4WVTbKBPtRshWVYVEvE'}"}
2024-09-11 11:24:27,164 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTEyNDI3', 'Timestamp': '20240911112427', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '133113', 'PartyA': '254715978200', 'PartyB': 827142, 'PhoneNumber': '254715978200', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-31661', 'TransactionDesc': 'Some payment'}
2024-09-11 11:24:27,165 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:24:28,037 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 11:24:28,042 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208794834943', 'CheckoutRequestID': 'ws_CO_11092024142427682715978200', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 11:27:09,601 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:27:09,760 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:27:09,760 - INFO - {'updated': 'initiated stk query for ws_CO_11092024142618303721803852 827142 '}
2024-09-11 11:27:09,837 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:27:10,507 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:27:10,509 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer uQnYpL5VUNKmvqDvot4NdpuEv1Zy'}"}
2024-09-11 11:27:10,510 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTEyNzA5', 'Timestamp': '20240911112709', 'CheckoutRequestID': 'ws_CO_11092024142618303721803852'}"}
2024-09-11 11:27:10,511 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:27:11,120 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 11:27:11,120 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585055699894', 'CheckoutRequestID': 'ws_CO_11092024142618303721803852', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024142618303721803852 827142"}
2024-09-11 11:27:11,242 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:27:11,760 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:27:11,761 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:27:12,003 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:27:29,474 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:27:29,718 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:27:29,719 - INFO - there is a test coming
2024-09-11 11:27:29,719 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 11:27:29,766 - INFO - {'updated_data': 'the data is now as 254726845964'}
2024-09-11 11:27:29,766 - INFO - the data is now as 254726845964
2024-09-11 11:27:29,784 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 11:27:29,784 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 11:27:29,785 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:27:30,377 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:27:30,379 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer JuoG2eE7SfO9mm6qVdiBMj3sjNVZ'}"}
2024-09-11 11:27:30,380 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTEyNzMw', 'Timestamp': '20240911112730', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '350000', 'PartyA': '254726845964', 'PartyB': 899885, 'PhoneNumber': '254726845964', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054418', 'TransactionDesc': 'Some payment'}
2024-09-11 11:27:30,381 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:27:32,242 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 11:27:32,248 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171968661', 'CheckoutRequestID': 'ws_CO_11092024142730973726845964', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 11:27:41,038 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171968661', 'CheckoutRequestID': 'ws_CO_11092024142730973726845964', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}"}
2024-09-11 11:27:41,038 - INFO - {'updated_data': 'callback data began'}
2024-09-11 11:27:41,038 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171968661', 'CheckoutRequestID': 'ws_CO_11092024142730973726845964', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}}
2024-09-11 11:27:41,208 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:27:41,407 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:27:41,408 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:27:41,623 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:27:43,439 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:27:43,570 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:27:43,570 - INFO - {'updated': 'initiated stk query for ws_CO_11092024142730973726845964 899885 '}
2024-09-11 11:27:43,693 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:27:44,560 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:27:44,562 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer qKan20lMxrDW8ZjyxWaVgCcvlVOY'}"}
2024-09-11 11:27:44,562 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTEyNzQz', 'Timestamp': '20240911112743', 'CheckoutRequestID': 'ws_CO_11092024142730973726845964'}"}
2024-09-11 11:27:44,564 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:27:45,291 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 381
2024-09-11 11:27:45,291 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962171968661', 'CheckoutRequestID': 'ws_CO_11092024142730973726845964', 'ResultCode': '2001', 'ResultDesc': 'The initiator information is invalid.'} for ws_CO_11092024142730973726845964 899885"}
2024-09-11 11:27:45,418 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:27:45,954 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:27:45,956 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:27:46,498 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:27:51,735 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182232163', 'CheckoutRequestID': 'ws_CO_11092024142720152722129263', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 11:27:51,735 - INFO - {'updated_data': 'callback data began'}
2024-09-11 11:27:51,735 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182232163', 'CheckoutRequestID': 'ws_CO_11092024142720152722129263', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 11:27:51,906 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:27:52,426 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:27:52,427 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:27:52,662 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:28:30,587 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:28:30,769 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:28:30,769 - INFO - {'updated': 'initiated stk query for ws_CO_11092024142720152722129263 827142 '}
2024-09-11 11:28:30,837 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:28:31,419 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:28:31,421 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer joX1dvNedcPs1hapO3qf5ngxLzRZ'}"}
2024-09-11 11:28:31,422 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTEyODMw', 'Timestamp': '20240911112830', 'CheckoutRequestID': 'ws_CO_11092024142720152722129263'}"}
2024-09-11 11:28:31,423 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:28:32,156 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 367
2024-09-11 11:28:32,156 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182232163', 'CheckoutRequestID': 'ws_CO_11092024142720152722129263', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_11092024142720152722129263 827142"}
2024-09-11 11:28:32,281 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:28:32,795 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:28:32,796 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:28:33,459 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:29:49,097 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:29:49,227 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:29:49,228 - INFO - there is a test coming
2024-09-11 11:29:49,228 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 11:29:49,272 - INFO - {'updated_data': 'the data is now as 254716134717'}
2024-09-11 11:29:49,273 - INFO - the data is now as 254716134717
2024-09-11 11:29:49,296 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 11:29:49,296 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 11:29:49,297 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:29:49,863 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:29:49,865 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer nDahXvNi2NF952zr2SG0JWQwEb3t'}"}
2024-09-11 11:29:49,866 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTEyOTQ5', 'Timestamp': '20240911112949', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254716134717', 'PartyB': 827142, 'PhoneNumber': '254716134717', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-20296', 'TransactionDesc': 'Some payment'}
2024-09-11 11:29:49,867 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:29:51,216 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 11:29:51,225 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9302539', 'CheckoutRequestID': 'ws_CO_11092024142950439716134717', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 11:33:10,969 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19751668', 'CheckoutRequestID': 'ws_CO_11092024143255793722129263', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}"}
2024-09-11 11:33:10,970 - INFO - {'updated_data': 'callback data began'}
2024-09-11 11:33:10,970 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19751668', 'CheckoutRequestID': 'ws_CO_11092024143255793722129263', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}}
2024-09-11 11:33:11,138 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:33:11,687 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:33:11,688 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:33:11,904 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:34:44,158 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:34:44,352 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:34:44,353 - INFO - there is a test coming
2024-09-11 11:34:44,353 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 11:34:44,404 - INFO - {'updated_data': 'the data is now as 254723484008'}
2024-09-11 11:34:44,405 - INFO - the data is now as 254723484008
2024-09-11 11:34:44,422 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 11:34:44,422 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 11:34:44,434 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:34:45,004 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:34:45,006 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer k5s2qou1H0RbizWga685Cs1SCGuv'}"}
2024-09-11 11:34:45,006 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTEzNDQ1', 'Timestamp': '20240911113445', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '50000', 'PartyA': '254723484008', 'PartyB': 899885, 'PhoneNumber': '254723484008', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA007180CP-1726054479951', 'TransactionDesc': 'Some payment'}
2024-09-11 11:34:45,007 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:34:45,885 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 11:34:45,892 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585055722092', 'CheckoutRequestID': 'ws_CO_11092024143445656723484008', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 11:34:51,674 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182250850', 'CheckoutRequestID': 'ws_CO_11092024143434482726833351', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB1828CID'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911143451}, {'Name': 'PhoneNumber', 'Value': 254726833351}]}}}}"}
2024-09-11 11:34:51,674 - INFO - {'updated_data': 'callback data began'}
2024-09-11 11:34:51,674 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182250850', 'CheckoutRequestID': 'ws_CO_11092024143434482726833351', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB1828CID'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911143451}, {'Name': 'PhoneNumber', 'Value': 254726833351}]}}}}}
2024-09-11 11:34:51,847 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:34:52,528 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:34:52,530 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:34:52,754 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:34:55,561 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:34:55,713 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:34:55,714 - INFO - {'updated': 'initiated stk query for ws_CO_11092024143434482726833351 827142 '}
2024-09-11 11:34:55,770 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:34:56,470 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:34:56,472 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer cBnfDYzXdQlP95Kcq1LQPgyvgtPg'}"}
2024-09-11 11:34:56,472 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTEzNDU1', 'Timestamp': '20240911113455', 'CheckoutRequestID': 'ws_CO_11092024143434482726833351'}"}
2024-09-11 11:34:56,474 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:34:57,116 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 11:34:57,116 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182250850', 'CheckoutRequestID': 'ws_CO_11092024143434482726833351', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024143434482726833351 827142"}
2024-09-11 11:34:57,294 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:34:57,493 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:34:57,494 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:34:57,722 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:35:01,664 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585055722092', 'CheckoutRequestID': 'ws_CO_11092024143445656723484008', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 50000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB98291CH'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911143501}, {'Name': 'PhoneNumber', 'Value': 254723484008}]}}}}"}
2024-09-11 11:35:01,664 - INFO - {'updated_data': 'callback data began'}
2024-09-11 11:35:01,664 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585055722092', 'CheckoutRequestID': 'ws_CO_11092024143445656723484008', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 50000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB98291CH'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911143501}, {'Name': 'PhoneNumber', 'Value': 254723484008}]}}}}}
2024-09-11 11:35:01,840 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:35:02,347 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:35:02,348 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:35:02,579 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:35:22,702 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:35:22,910 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:35:22,910 - INFO - {'updated': 'initiated stk query for ws_CO_11092024143445656723484008 899885 '}
2024-09-11 11:35:22,998 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:35:23,665 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:35:23,667 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ZjQmnWczOATxBMlfZgXZeJgWjAtW'}"}
2024-09-11 11:35:23,667 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTEzNTIy', 'Timestamp': '20240911113522', 'CheckoutRequestID': 'ws_CO_11092024143445656723484008'}"}
2024-09-11 11:35:23,669 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:35:24,278 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 11:35:24,279 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585055722092', 'CheckoutRequestID': 'ws_CO_11092024143445656723484008', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024143445656723484008 899885"}
2024-09-11 11:35:24,437 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:35:24,642 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:35:24,643 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:35:24,881 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:36:23,936 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:36:24,170 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:36:24,171 - INFO - there is a test coming
2024-09-11 11:36:24,171 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 11:36:24,223 - INFO - {'updated_data': 'the data is now as 254797779014'}
2024-09-11 11:36:24,223 - INFO - the data is now as 254797779014
2024-09-11 11:36:24,240 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 11:36:24,240 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 11:36:24,242 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:36:24,843 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:36:24,845 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer iscQiyAM2sdqggwYZOKv6lMmM2Nm'}"}
2024-09-11 11:36:24,846 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTEzNjI0', 'Timestamp': '20240911113624', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '160000', 'PartyA': '254797779014', 'PartyB': 899885, 'PhoneNumber': '254797779014', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054421', 'TransactionDesc': 'Some payment'}
2024-09-11 11:36:24,848 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:36:25,730 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 11:36:25,737 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585055726685', 'CheckoutRequestID': 'ws_CO_11092024143625379797779014', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 11:36:56,522 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171252734', 'CheckoutRequestID': 'ws_CO_11092024143648448720701731', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB182I7GZ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911143655}, {'Name': 'PhoneNumber', 'Value': 254720701731}]}}}}"}
2024-09-11 11:36:56,522 - INFO - {'updated_data': 'callback data began'}
2024-09-11 11:36:56,522 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171252734', 'CheckoutRequestID': 'ws_CO_11092024143648448720701731', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB182I7GZ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911143655}, {'Name': 'PhoneNumber', 'Value': 254720701731}]}}}}}
2024-09-11 11:36:56,677 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:36:56,869 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:36:56,871 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:36:57,394 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:44:49,718 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585055747848', 'CheckoutRequestID': 'ws_CO_11092024144423080722948355', 'ResultCode': 3, 'ResultDesc': 'Declined due to limit rule: greater than the maximum transaction amount.'}}}"}
2024-09-11 11:44:49,718 - INFO - {'updated_data': 'callback data began'}
2024-09-11 11:44:49,719 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585055747848', 'CheckoutRequestID': 'ws_CO_11092024144423080722948355', 'ResultCode': 3, 'ResultDesc': 'Declined due to limit rule: greater than the maximum transaction amount.'}}}}
2024-09-11 11:44:49,905 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:44:50,396 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:44:50,397 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:44:50,928 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:44:57,290 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:44:57,429 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:44:57,429 - INFO - {'updated': 'initiated stk query for ws_CO_11092024144423080722948355 827142 '}
2024-09-11 11:44:57,485 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:44:58,075 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:44:58,077 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer uGMUACzFi7A7VTrNoHVq0ZspRdL6'}"}
2024-09-11 11:44:58,077 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTE0NDU3', 'Timestamp': '20240911114457', 'CheckoutRequestID': 'ws_CO_11092024144423080722948355'}"}
2024-09-11 11:44:58,079 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:44:58,699 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 411
2024-09-11 11:44:58,700 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585055747848', 'CheckoutRequestID': 'ws_CO_11092024144423080722948355', 'ResultCode': '3', 'ResultDesc': 'Declined due to limit rule: greater than the maximum transaction amount.'} for ws_CO_11092024144423080722948355 827142"}
2024-09-11 11:44:58,831 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:44:59,352 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:44:59,354 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:44:59,571 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:45:09,123 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:45:09,332 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:45:09,332 - INFO - there is a test coming
2024-09-11 11:45:09,332 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 11:45:09,406 - INFO - {'updated_data': 'the data is now as 254799733295'}
2024-09-11 11:45:09,407 - INFO - the data is now as 254799733295
2024-09-11 11:45:09,431 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 11:45:09,431 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 11:45:09,432 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:45:10,012 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:45:10,014 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 2hCChHsrGBYfGEp24GzmxaDYSjcE'}"}
2024-09-11 11:45:10,018 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTE0NTEw', 'Timestamp': '20240911114510', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '600', 'PartyA': '254799733295', 'PartyB': 827142, 'PhoneNumber': '254799733295', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-3235', 'TransactionDesc': 'Some payment'}
2024-09-11 11:45:10,023 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:45:11,166 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 11:45:11,172 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19784210', 'CheckoutRequestID': 'ws_CO_11092024144510593799733295', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 11:45:50,680 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9344240', 'CheckoutRequestID': 'ws_CO_11092024144540544722948355', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 11:45:50,681 - INFO - {'updated_data': 'callback data began'}
2024-09-11 11:45:50,681 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9344240', 'CheckoutRequestID': 'ws_CO_11092024144540544722948355', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 11:45:50,843 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:45:51,039 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:45:51,040 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:45:51,268 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:46:19,663 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:46:19,859 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:46:19,860 - INFO - there is a test coming
2024-09-11 11:46:19,860 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 11:46:19,913 - INFO - {'updated_data': 'the data is now as 254721547520'}
2024-09-11 11:46:19,913 - INFO - the data is now as 254721547520
2024-09-11 11:46:19,938 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 11:46:19,938 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 11:46:19,940 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:46:20,616 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:46:20,619 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer KfLTa822Ntd5I0vaAOsNPQ07DtOv'}"}
2024-09-11 11:46:20,620 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTE0NjIw', 'Timestamp': '20240911114620', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '62932', 'PartyA': '254721547520', 'PartyB': 827142, 'PhoneNumber': '254721547520', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-124191', 'TransactionDesc': 'Some payment'}
2024-09-11 11:46:20,621 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:46:21,638 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 11:46:21,646 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89169067', 'CheckoutRequestID': 'ws_CO_11092024144621261721547520', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 11:50:26,731 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89172886', 'CheckoutRequestID': 'ws_CO_11092024145016743722753950', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 11:50:26,731 - INFO - {'updated_data': 'callback data began'}
2024-09-11 11:50:26,731 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89172886', 'CheckoutRequestID': 'ws_CO_11092024145016743722753950', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 11:50:27,054 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:50:27,440 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:50:27,442 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:50:27,683 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:51:38,658 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:51:38,809 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:51:38,810 - INFO - there is a test coming
2024-09-11 11:51:38,810 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 11:51:38,862 - INFO - {'updated_data': 'the data is now as 254721547520'}
2024-09-11 11:51:38,862 - INFO - the data is now as 254721547520
2024-09-11 11:51:38,878 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 11:51:38,879 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 11:51:38,880 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:51:39,546 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:51:39,548 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer qyUcjsZP7xW2yxzcT290iv53hG0s'}"}
2024-09-11 11:51:39,551 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTE1MTM5', 'Timestamp': '20240911115139', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '62932', 'PartyA': '254721547520', 'PartyB': 827142, 'PhoneNumber': '254721547520', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-124191', 'TransactionDesc': 'Some payment'}
2024-09-11 11:51:39,552 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:51:40,456 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 11:51:40,462 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89174487', 'CheckoutRequestID': 'ws_CO_11092024145140188721547520', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 11:52:14,394 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519805757', 'CheckoutRequestID': 'ws_CO_11092024145203005721547520', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB784IVFL'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911145212}, {'Name': 'PhoneNumber', 'Value': 254721547520}]}}}}"}
2024-09-11 11:52:14,394 - INFO - {'updated_data': 'callback data began'}
2024-09-11 11:52:14,394 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519805757', 'CheckoutRequestID': 'ws_CO_11092024145203005721547520', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB784IVFL'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911145212}, {'Name': 'PhoneNumber', 'Value': 254721547520}]}}}}}
2024-09-11 11:52:14,567 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:52:14,764 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:52:14,765 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:52:14,992 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:52:56,592 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171506876', 'CheckoutRequestID': 'ws_CO_11092024145242269793635905', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}"}
2024-09-11 11:52:56,592 - INFO - {'updated_data': 'callback data began'}
2024-09-11 11:52:56,592 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171506876', 'CheckoutRequestID': 'ws_CO_11092024145242269793635905', 'ResultCode': 2001, 'ResultDesc': 'The initiator information is invalid.'}}}}
2024-09-11 11:52:56,760 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:52:56,946 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:52:56,947 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:52:57,475 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 11:53:04,455 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 11:53:04,625 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 11:53:04,626 - INFO - {'updated': 'initiated stk query for ws_CO_11092024145242269793635905 827142 '}
2024-09-11 11:53:04,695 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:53:05,254 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 11:53:05,257 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer i6BgOZ7gqEXZwqG5RCu8TMBJLKHT'}"}
2024-09-11 11:53:05,262 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTE1MzA0', 'Timestamp': '20240911115304', 'CheckoutRequestID': 'ws_CO_11092024145242269793635905'}"}
2024-09-11 11:53:05,264 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 11:53:05,898 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 381
2024-09-11 11:53:05,899 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171506876', 'CheckoutRequestID': 'ws_CO_11092024145242269793635905', 'ResultCode': '2001', 'ResultDesc': 'The initiator information is invalid.'} for ws_CO_11092024145242269793635905 827142"}
2024-09-11 11:53:06,020 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 11:53:06,233 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 11:53:06,234 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 11:53:06,454 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:10:09,678 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:10:09,866 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:10:09,867 - INFO - {'updated': 'initiated stk query for ws_CO_11092024150938707725772470 827142 '}
2024-09-11 12:10:09,922 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:10:10,590 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:10:10,592 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer U6bzj5bCJmEv0bHiIUvhFubASVBQ'}"}
2024-09-11 12:10:10,592 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTIxMDA5', 'Timestamp': '20240911121009', 'CheckoutRequestID': 'ws_CO_11092024150938707725772470'}"}
2024-09-11 12:10:10,594 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:10:11,214 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 12:10:11,214 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077201439', 'CheckoutRequestID': 'ws_CO_11092024150938707725772470', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024150938707725772470 827142"}
2024-09-11 12:10:11,354 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:10:11,544 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:10:11,546 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:10:11,775 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:10:20,366 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:10:20,390 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 12:10:20,391 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 12:10:30,485 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:10:30,504 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 12:10:30,505 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 12:10:39,827 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:10:39,968 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:10:39,969 - INFO - {'updated': 'initiated stk query for ws_CO_11092024150958370706508953 899885 '}
2024-09-11 12:10:40,031 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:10:40,585 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:10:40,587 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 8DQLRAhD875JOXoCFjXI0cjN9w8s'}"}
2024-09-11 12:10:40,588 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTIxMDQw', 'Timestamp': '20240911121040', 'CheckoutRequestID': 'ws_CO_11092024150958370706508953'}"}
2024-09-11 12:10:40,589 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:10:41,209 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 388
2024-09-11 12:10:41,210 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b519855706', 'CheckoutRequestID': 'ws_CO_11092024150958370706508953', 'ResultCode': '1', 'ResultDesc': 'The balance is insufficient for the transaction.'} for ws_CO_11092024150958370706508953 899885"}
2024-09-11 12:10:41,335 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:10:41,543 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:10:41,545 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:10:41,782 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:11:07,658 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:11:08,037 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:11:08,039 - INFO - {'updated': 'initiated stk query for ws_CO_11092024150929030707904172 827142 '}
2024-09-11 12:11:08,094 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:11:08,773 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:11:08,775 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Ja8lFx0jarAgqajxEoiqQHV9ZfGl'}"}
2024-09-11 12:11:08,775 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTIxMTA4', 'Timestamp': '20240911121108', 'CheckoutRequestID': 'ws_CO_11092024150929030707904172'}"}
2024-09-11 12:11:08,777 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:11:09,379 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 12:11:09,379 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171288590', 'CheckoutRequestID': 'ws_CO_11092024150929030707904172', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024150929030707904172 827142"}
2024-09-11 12:11:09,498 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:11:09,688 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:11:09,689 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:11:09,929 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:12:06,988 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:12:07,117 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:12:07,119 - INFO - {'updated': 'initiated stk query for ws_CO_11092024151155786720970384 827142 '}
2024-09-11 12:12:07,178 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:12:07,746 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:12:07,748 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer iws3QHgOBgbxD30aEltJq2zYintM'}"}
2024-09-11 12:12:07,749 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTIxMjA3', 'Timestamp': '20240911121207', 'CheckoutRequestID': 'ws_CO_11092024151155786720970384'}"}
2024-09-11 12:12:07,750 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:12:08,388 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 12:12:08,389 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024151155786720970384', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024151155786720970384 827142"}
2024-09-11 12:12:08,391 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 12:12:09,732 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171291104', 'CheckoutRequestID': 'ws_CO_11092024151155786720970384', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB1874UPH'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911151209}, {'Name': 'PhoneNumber', 'Value': 254720970384}]}}}}"}
2024-09-11 12:12:09,732 - INFO - {'updated_data': 'callback data began'}
2024-09-11 12:12:09,732 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171291104', 'CheckoutRequestID': 'ws_CO_11092024151155786720970384', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB1874UPH'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911151209}, {'Name': 'PhoneNumber', 'Value': 254720970384}]}}}}}
2024-09-11 12:12:09,897 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:12:10,077 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:12:10,079 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:12:10,617 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:12:49,159 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:12:49,326 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:12:49,327 - INFO - {'updated': 'initiated stk query for ws_CO_11092024151236012725904628 899885 '}
2024-09-11 12:12:49,410 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:12:50,014 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:12:50,016 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer AkaQu2GRrZAd5Js8ZanXrpXOFXEH'}"}
2024-09-11 12:12:50,016 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTIxMjQ5', 'Timestamp': '20240911121249', 'CheckoutRequestID': 'ws_CO_11092024151236012725904628'}"}
2024-09-11 12:12:50,017 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:12:50,632 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 12:12:50,633 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182354593', 'CheckoutRequestID': 'ws_CO_11092024151236012725904628', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024151236012725904628 899885"}
2024-09-11 12:12:50,752 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:12:50,957 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:12:50,958 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:12:51,193 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:13:15,744 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:13:16,844 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:13:16,845 - INFO - there is a test coming
2024-09-11 12:13:16,846 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 12:13:16,899 - INFO - {'updated_data': 'the data is now as 254710412376'}
2024-09-11 12:13:16,900 - INFO - the data is now as 254710412376
2024-09-11 12:13:16,916 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 12:13:16,916 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 12:13:16,917 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:13:17,617 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:13:17,620 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer LCNiy1hIsPYhpy0IFPgIp7gJpVkG'}"}
2024-09-11 12:13:17,621 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTIxMzE3', 'Timestamp': '20240911121317', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '40000', 'PartyA': '254710412376', 'PartyB': 899885, 'PhoneNumber': '254710412376', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054427', 'TransactionDesc': 'Some payment'}
2024-09-11 12:13:17,622 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:13:18,362 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 12:13:18,368 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172019111', 'CheckoutRequestID': 'ws_CO_11092024151318148710412376', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 12:14:00,208 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:14:00,331 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:14:00,332 - INFO - {'updated': 'initiated stk query for ws_CO_11092024151349086791589777 827142 '}
2024-09-11 12:14:00,387 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:14:01,043 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:14:01,045 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer EBLiZOkxVpozP36SYooZRkblYDE7'}"}
2024-09-11 12:14:01,046 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTIxNDAw', 'Timestamp': '20240911121400', 'CheckoutRequestID': 'ws_CO_11092024151349086791589777'}"}
2024-09-11 12:14:01,047 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:14:01,744 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 12:14:01,744 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182357993', 'CheckoutRequestID': 'ws_CO_11092024151349086791589777', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024151349086791589777 827142"}
2024-09-11 12:14:01,872 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:14:02,106 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:14:02,108 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:14:02,332 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:15:55,571 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:15:55,742 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:15:55,743 - INFO - there is a test coming
2024-09-11 12:15:55,743 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 12:15:55,785 - INFO - {'updated_data': 'the data is now as 254725509065'}
2024-09-11 12:15:55,786 - INFO - the data is now as 254725509065
2024-09-11 12:15:55,802 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 12:15:55,803 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 12:15:55,804 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:15:56,388 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:15:56,389 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer bAn9tUhl1AW9UfMqGx8P23jFTMki'}"}
2024-09-11 12:15:56,390 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTIxNTU2', 'Timestamp': '20240911121556', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1200', 'PartyA': '254725509065', 'PartyB': 827142, 'PhoneNumber': '254725509065', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-25510', 'TransactionDesc': 'Some payment'}
2024-09-11 12:15:56,391 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:15:57,129 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 12:15:57,135 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9426924', 'CheckoutRequestID': 'ws_CO_11092024151556899725509065', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 12:16:05,621 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9426924', 'CheckoutRequestID': 'ws_CO_11092024151556899725509065', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB787N00T'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911151604}, {'Name': 'PhoneNumber', 'Value': 254725509065}]}}}}"}
2024-09-11 12:16:05,621 - INFO - {'updated_data': 'callback data began'}
2024-09-11 12:16:05,622 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9426924', 'CheckoutRequestID': 'ws_CO_11092024151556899725509065', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB787N00T'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911151604}, {'Name': 'PhoneNumber', 'Value': 254725509065}]}}}}}
2024-09-11 12:16:05,791 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:16:06,505 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:16:06,507 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:16:06,849 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:24:33,774 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:24:34,805 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:24:34,806 - INFO - {'updated': 'initiated stk query for ws_CO_11092024152411457721286547 899885 '}
2024-09-11 12:24:55,755 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:24:56,430 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:24:56,432 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer GUeRmGvJ1whA8ts39H33Pokf6Sqp'}"}
2024-09-11 12:24:56,433 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTIyNDU1', 'Timestamp': '20240911122455', 'CheckoutRequestID': 'ws_CO_11092024152411457721286547'}"}
2024-09-11 12:24:56,434 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:24:57,085 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 12:24:57,086 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208794900274', 'CheckoutRequestID': 'ws_CO_11092024152411457721286547', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024152411457721286547 899885"}
2024-09-11 12:25:15,656 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:25:15,847 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:25:15,848 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:25:16,364 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:25:21,245 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:25:21,398 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:25:21,398 - INFO - there is a test coming
2024-09-11 12:25:21,399 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 12:25:32,588 - INFO - {'updated_data': 'the data is now as 254721522934'}
2024-09-11 12:25:32,589 - INFO - the data is now as 254721522934
2024-09-11 12:25:32,608 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 12:25:32,608 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 12:25:32,609 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:25:33,195 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:25:33,197 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer rUW0OKlTMKounkzQZiQNXCbdRG6n'}"}
2024-09-11 12:25:33,198 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTIyNTMz', 'Timestamp': '20240911122533', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '500', 'PartyA': '254721522934', 'PartyB': 899885, 'PhoneNumber': '254721522934', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054365', 'TransactionDesc': 'Some payment'}
2024-09-11 12:25:33,199 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:25:35,448 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 12:25:57,999 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077219047', 'CheckoutRequestID': 'ws_CO_11092024152533728721522934', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 12:26:08,765 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:26:08,904 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:26:08,905 - INFO - {'updated': 'initiated stk query for ws_CO_11092024152533728721522934 899885 '}
2024-09-11 12:26:08,976 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:26:09,671 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:26:09,673 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 5Om4141JiiyGG1jwm5yDNC66azum'}"}
2024-09-11 12:26:09,674 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTIyNjA4', 'Timestamp': '20240911122608', 'CheckoutRequestID': 'ws_CO_11092024152533728721522934'}"}
2024-09-11 12:26:09,675 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:26:10,305 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 12:26:10,305 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077219047', 'CheckoutRequestID': 'ws_CO_11092024152533728721522934', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024152533728721522934 899885"}
2024-09-11 12:26:10,463 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:26:10,652 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:26:10,654 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:26:10,865 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:27:47,715 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:27:47,958 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:27:47,959 - INFO - there is a test coming
2024-09-11 12:27:47,959 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 12:27:48,013 - INFO - {'updated_data': 'the data is now as 254720490812'}
2024-09-11 12:27:48,014 - INFO - the data is now as 254720490812
2024-09-11 12:27:48,040 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 12:27:48,040 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 12:27:48,042 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:27:48,605 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:27:48,607 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer A3r0CZUGG5A1t7YoZdx8KJDgwF3m'}"}
2024-09-11 12:27:48,608 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTIyNzQ4', 'Timestamp': '20240911122748', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254720490812', 'PartyB': 827142, 'PhoneNumber': '254720490812', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-10451', 'TransactionDesc': 'Some payment'}
2024-09-11 12:27:48,610 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:27:52,374 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 12:27:52,381 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077221343', 'CheckoutRequestID': 'ws_CO_11092024152749115720490812', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 12:28:15,045 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:28:15,210 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:28:15,211 - INFO - {'updated': 'initiated stk query for ws_CO_11092024152749115720490812 827142 '}
2024-09-11 12:28:15,270 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:28:15,915 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:28:15,917 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer NsMDm4fGxeOFF5HAEGGVP6a6kpiz'}"}
2024-09-11 12:28:15,918 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTIyODE1', 'Timestamp': '20240911122815', 'CheckoutRequestID': 'ws_CO_11092024152749115720490812'}"}
2024-09-11 12:28:15,919 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:28:16,653 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 12:28:16,653 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077221343', 'CheckoutRequestID': 'ws_CO_11092024152749115720490812', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024152749115720490812 827142"}
2024-09-11 12:28:16,812 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:28:17,021 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:28:17,023 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:28:17,258 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:29:54,214 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:29:54,342 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:29:54,343 - INFO - there is a test coming
2024-09-11 12:29:54,343 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 12:30:21,661 - INFO - {'updated_data': 'the data is now as 254720490812'}
2024-09-11 12:30:21,661 - INFO - the data is now as 254720490812
2024-09-11 12:30:21,681 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 12:30:21,681 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 12:30:21,682 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:30:22,296 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:30:22,298 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 7ikGdys5NHoskr6rdcK6V9zsjo0c'}"}
2024-09-11 12:30:22,299 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTIzMDIy', 'Timestamp': '20240911123022', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254720490812', 'PartyB': 827142, 'PhoneNumber': '254720490812', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-28264', 'TransactionDesc': 'Some payment'}
2024-09-11 12:30:22,300 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:30:23,235 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 12:30:23,242 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208794906852', 'CheckoutRequestID': 'ws_CO_11092024153022941720490812', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 12:33:13,251 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:33:13,383 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:33:13,384 - INFO - there is a test coming
2024-09-11 12:33:13,384 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 12:33:19,587 - INFO - {'updated_data': 'the data is now as 254790299000'}
2024-09-11 12:33:19,587 - INFO - the data is now as 254790299000
2024-09-11 12:33:19,635 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 12:33:19,636 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 12:33:19,638 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:33:20,232 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:33:20,236 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 8nNDw16FikhWJ9YMCGACu0gBukg3'}"}
2024-09-11 12:33:20,237 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTIzMzIw', 'Timestamp': '20240911123320', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254790299000', 'PartyB': 899885, 'PhoneNumber': '254790299000', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054366', 'TransactionDesc': 'Some payment'}
2024-09-11 12:33:20,238 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:33:21,025 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 12:33:21,068 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89220420', 'CheckoutRequestID': 'ws_CO_11092024153320778790299000', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 12:35:06,680 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:35:06,841 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:35:06,842 - INFO - there is a test coming
2024-09-11 12:35:06,842 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 12:35:39,950 - INFO - {'updated_data': 'the data is now as 254700042204'}
2024-09-11 12:35:39,950 - INFO - the data is now as 254700042204
2024-09-11 12:35:40,006 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 12:35:40,018 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 12:35:40,019 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:35:40,595 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:35:40,597 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ZdpCOWMLuCy6AXqzqpz53YJA2mzQ'}"}
2024-09-11 12:35:40,597 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTIzNTQw', 'Timestamp': '20240911123540', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '26500', 'PartyA': '254700042204', 'PartyB': 899885, 'PhoneNumber': '254700042204', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA008801CP-1726058036781', 'TransactionDesc': 'Some payment'}
2024-09-11 12:35:40,601 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:35:41,499 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 12:35:41,516 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182415692', 'CheckoutRequestID': 'ws_CO_11092024153541256700042204', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 12:36:57,649 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:36:57,743 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 12:36:57,744 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 12:37:46,224 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9484804', 'CheckoutRequestID': 'ws_CO_11092024153737159769155498', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB18AJB8F'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911153744}, {'Name': 'PhoneNumber', 'Value': 254769155498}]}}}}"}
2024-09-11 12:37:46,227 - INFO - {'updated_data': 'callback data began'}
2024-09-11 12:37:46,227 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9484804', 'CheckoutRequestID': 'ws_CO_11092024153737159769155498', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB18AJB8F'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911153744}, {'Name': 'PhoneNumber', 'Value': 254769155498}]}}}}}
2024-09-11 12:37:46,401 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:37:46,641 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:37:46,642 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:37:46,856 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:37:48,526 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:37:48,739 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:37:48,740 - INFO - {'updated': 'initiated stk query for ws_CO_11092024153737159769155498 899885 '}
2024-09-11 12:37:48,805 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:37:49,393 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:37:49,394 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer GRqwjXXthxaWuGjgE9LOZ5s8Hq2y'}"}
2024-09-11 12:37:49,395 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTIzNzQ4', 'Timestamp': '20240911123748', 'CheckoutRequestID': 'ws_CO_11092024153737159769155498'}"}
2024-09-11 12:37:49,396 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:37:50,052 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 12:37:50,053 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9484804', 'CheckoutRequestID': 'ws_CO_11092024153737159769155498', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024153737159769155498 899885"}
2024-09-11 12:37:50,172 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:37:50,385 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:37:50,387 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:37:50,609 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:41:27,613 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:41:27,758 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:41:27,759 - INFO - there is a test coming
2024-09-11 12:41:27,759 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 12:41:27,802 - INFO - {'updated_data': 'the data is now as 254728742301'}
2024-09-11 12:41:27,802 - INFO - the data is now as 254728742301
2024-09-11 12:41:27,837 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 12:41:27,838 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 12:41:27,839 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:41:28,426 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:41:28,427 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer dp8P6P0wsCQex2OeHGO3Z1pvfok1'}"}
2024-09-11 12:41:28,428 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTI0MTI4', 'Timestamp': '20240911124128', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254728742301', 'PartyB': 827142, 'PhoneNumber': '254728742301', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-122104', 'TransactionDesc': 'Some payment'}
2024-09-11 12:41:28,428 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:41:29,361 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 12:41:29,367 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171322845', 'CheckoutRequestID': 'ws_CO_11092024154129063728742301', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 12:41:56,761 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171560930', 'CheckoutRequestID': 'ws_CO_11092024154147177711519466', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB38B3T4N'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911154156}, {'Name': 'PhoneNumber', 'Value': 254711519466}]}}}}"}
2024-09-11 12:41:56,761 - INFO - {'updated_data': 'callback data began'}
2024-09-11 12:41:56,761 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171560930', 'CheckoutRequestID': 'ws_CO_11092024154147177711519466', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB38B3T4N'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911154156}, {'Name': 'PhoneNumber', 'Value': 254711519466}]}}}}}
2024-09-11 12:41:56,974 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:41:57,198 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:41:57,200 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:41:57,415 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:51:49,207 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:51:49,400 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:51:49,400 - INFO - {'updated': 'initiated stk query for ws_CO_11092024155137604726844704 827142 '}
2024-09-11 12:51:49,461 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:51:50,139 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:51:50,141 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 66f2ZR9VGjF4cA5brJ1COoW2EcgF'}"}
2024-09-11 12:51:50,141 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTI1MTQ5', 'Timestamp': '20240911125149', 'CheckoutRequestID': 'ws_CO_11092024155137604726844704'}"}
2024-09-11 12:51:50,142 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:51:50,778 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 12:51:50,778 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024155137604726844704', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024155137604726844704 827142"}
2024-09-11 12:51:50,781 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 12:53:00,816 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19966633', 'CheckoutRequestID': 'ws_CO_11092024155249473722950764', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB28CKXMM'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911155300}, {'Name': 'PhoneNumber', 'Value': 254722950764}]}}}}"}
2024-09-11 12:53:00,817 - INFO - {'updated_data': 'callback data began'}
2024-09-11 12:53:00,818 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19966633', 'CheckoutRequestID': 'ws_CO_11092024155249473722950764', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB28CKXMM'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911155300}, {'Name': 'PhoneNumber', 'Value': 254722950764}]}}}}}
2024-09-11 12:53:00,985 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:53:01,479 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:53:01,481 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:53:02,025 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:53:02,109 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:53:02,269 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:53:02,270 - INFO - {'updated': 'initiated stk query for ws_CO_11092024155249473722950764 899885 '}
2024-09-11 12:53:02,337 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:53:02,928 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:53:02,930 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer RgFmJA4btCgvxTzRdfqUs6mQZT9G'}"}
2024-09-11 12:53:02,930 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTI1MzAy', 'Timestamp': '20240911125302', 'CheckoutRequestID': 'ws_CO_11092024155249473722950764'}"}
2024-09-11 12:53:02,931 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:53:03,598 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 12:53:03,599 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc19966633', 'CheckoutRequestID': 'ws_CO_11092024155249473722950764', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024155249473722950764 899885"}
2024-09-11 12:53:03,740 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:53:03,928 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:53:03,930 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:53:04,158 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:56:54,058 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:56:54,341 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 12:56:54,341 - INFO - there is a test coming
2024-09-11 12:56:54,342 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 12:56:54,385 - INFO - {'updated_data': 'the data is now as 254720051548'}
2024-09-11 12:56:54,385 - INFO - the data is now as 254720051548
2024-09-11 12:56:54,407 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 12:56:54,407 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 12:56:54,409 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:56:55,078 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 12:56:55,080 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer eNq2NkGHGHTphrObGYj9GIQSaLdb'}"}
2024-09-11 12:56:55,080 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTI1NjU1', 'Timestamp': '20240911125655', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '30000', 'PartyA': '254720051548', 'PartyB': 899885, 'PhoneNumber': '254720051548', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0615243-1726059412767', 'TransactionDesc': 'Some payment'}
2024-09-11 12:56:55,081 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 12:56:55,940 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 12:56:55,948 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89246148', 'CheckoutRequestID': 'ws_CO_11092024155655701720051548', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 12:59:13,056 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585055947972', 'CheckoutRequestID': 'ws_CO_11092024155901334726141009', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB28DEZZW'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911155912}, {'Name': 'PhoneNumber', 'Value': 254726141009}]}}}}"}
2024-09-11 12:59:13,056 - INFO - {'updated_data': 'callback data began'}
2024-09-11 12:59:13,057 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585055947972', 'CheckoutRequestID': 'ws_CO_11092024155901334726141009', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB28DEZZW'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911155912}, {'Name': 'PhoneNumber', 'Value': 254726141009}]}}}}}
2024-09-11 12:59:13,224 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:59:13,469 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:59:13,470 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:59:13,757 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89248533', 'CheckoutRequestID': 'ws_CO_11092024155903486721769199', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 80000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB48DEUZY'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911155913}, {'Name': 'PhoneNumber', 'Value': 254721769199}]}}}}"}
2024-09-11 12:59:13,757 - INFO - {'updated_data': 'callback data began'}
2024-09-11 12:59:13,757 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89248533', 'CheckoutRequestID': 'ws_CO_11092024155903486721769199', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 80000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB48DEUZY'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911155913}, {'Name': 'PhoneNumber', 'Value': 254721769199}]}}}}}
2024-09-11 12:59:13,759 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:59:13,931 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 12:59:14,140 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 12:59:14,142 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 12:59:14,352 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 12:59:24,673 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 12:59:24,710 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-11 12:59:24,711 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 13:00:05,476 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:00:05,829 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:00:05,830 - INFO - {'updated': 'initiated stk query for ws_CO_11092024155924123768674362 899885 '}
2024-09-11 13:00:05,908 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:00:06,593 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:00:06,595 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer m4O02SAhr6CFSGkDg4EiX2OKZAse'}"}
2024-09-11 13:00:06,596 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTMwMDA1', 'Timestamp': '20240911130005', 'CheckoutRequestID': 'ws_CO_11092024155924123768674362'}"}
2024-09-11 13:00:06,597 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:00:07,204 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 13:00:07,205 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171580682', 'CheckoutRequestID': 'ws_CO_11092024155924123768674362', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024155924123768674362 899885"}
2024-09-11 13:00:07,334 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:00:07,849 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:00:07,851 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:00:08,111 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:01:11,152 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:01:11,165 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-11 13:01:11,165 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 13:01:33,775 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:01:33,972 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:01:33,973 - INFO - {'updated': 'initiated stk query for ws_CO_11092024160039455722863371 899885 '}
2024-09-11 13:01:34,043 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:01:34,609 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:01:34,611 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer zXrUvRJYiBuT45bR9sqaGANl8V4x'}"}
2024-09-11 13:01:34,611 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTMwMTM0', 'Timestamp': '20240911130134', 'CheckoutRequestID': 'ws_CO_11092024160039455722863371'}"}
2024-09-11 13:01:34,613 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:01:35,233 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 13:01:35,234 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9546129', 'CheckoutRequestID': 'ws_CO_11092024160039455722863371', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024160039455722863371 899885"}
2024-09-11 13:01:35,364 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:01:35,865 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:01:35,866 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:01:36,134 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:01:45,821 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:01:46,017 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:01:46,018 - INFO - there is a test coming
2024-09-11 13:01:46,018 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 13:01:46,061 - INFO - {'updated_data': 'the data is now as 254723747362'}
2024-09-11 13:01:46,061 - INFO - the data is now as 254723747362
2024-09-11 13:01:46,083 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 13:01:46,083 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 13:01:46,084 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:01:46,650 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:01:46,652 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer iFSo1CqS3fNFlyagS4wpzbsJHqe8'}"}
2024-09-11 13:01:46,652 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTMwMTQ2', 'Timestamp': '20240911130146', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '500', 'PartyA': '254723747362', 'PartyB': 827142, 'PhoneNumber': '254723747362', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-37829', 'TransactionDesc': 'Some payment'}
2024-09-11 13:01:46,654 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:01:47,611 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 13:01:47,617 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599906868', 'CheckoutRequestID': 'ws_CO_11092024160147181723747362', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 13:08:16,345 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:08:16,594 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:08:16,595 - INFO - {'updated': 'initiated stk query for ws_CO_11092024160802586726631793 827142 '}
2024-09-11 13:08:16,663 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:08:17,222 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:08:17,224 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ooMwtxHknidegOwOD4cBf82Fi88P'}"}
2024-09-11 13:08:17,225 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTMwODE2', 'Timestamp': '20240911130816', 'CheckoutRequestID': 'ws_CO_11092024160802586726631793'}"}
2024-09-11 13:08:17,226 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:08:17,851 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 13:08:17,852 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182501434', 'CheckoutRequestID': 'ws_CO_11092024160802586726631793', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024160802586726631793 827142"}
2024-09-11 13:08:17,979 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:08:18,165 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:08:18,166 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:08:18,382 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:08:34,160 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:08:34,302 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:08:34,303 - INFO - there is a test coming
2024-09-11 13:08:34,303 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 13:08:34,348 - INFO - {'updated_data': 'the data is now as 254720958942'}
2024-09-11 13:08:34,349 - INFO - the data is now as 254720958942
2024-09-11 13:08:34,367 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 13:08:34,367 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 13:08:34,368 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:08:35,065 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:08:35,067 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 5NvcGXys3SL3zfsmDu1AnS61Eafu'}"}
2024-09-11 13:08:35,069 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTMwODM1', 'Timestamp': '20240911130835', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '500', 'PartyA': '254720958942', 'PartyB': 827142, 'PhoneNumber': '254720958942', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-38502', 'TransactionDesc': 'Some payment'}
2024-09-11 13:08:35,073 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:08:36,045 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 13:08:36,051 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89258754', 'CheckoutRequestID': 'ws_CO_11092024160835700720958942', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 13:11:14,751 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:11:14,902 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:11:14,903 - INFO - {'updated': 'initiated stk query for ws_CO_11092024161044006720958942 827142 '}
2024-09-11 13:11:15,010 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:11:15,581 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:11:15,583 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ZitRHmRd9QPmSw4tj3T0hnfgVAhQ'}"}
2024-09-11 13:11:15,584 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTMxMTE1', 'Timestamp': '20240911131115', 'CheckoutRequestID': 'ws_CO_11092024161044006720958942'}"}
2024-09-11 13:11:15,585 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:11:16,309 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 13:11:16,310 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024161044006720958942', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024161044006720958942 827142"}
2024-09-11 13:11:16,312 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 13:11:49,852 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:11:50,073 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:11:50,074 - INFO - {'updated': 'initiated stk query for ws_CO_11092024161046608720369423 827142 '}
2024-09-11 13:11:50,153 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:11:50,737 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:11:50,739 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 4GTZ4X04Roii8B46Nv7DmcaoNkOz'}"}
2024-09-11 13:11:50,740 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTMxMTUw', 'Timestamp': '20240911131150', 'CheckoutRequestID': 'ws_CO_11092024161046608720369423'}"}
2024-09-11 13:11:50,742 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:11:51,454 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 13:11:51,455 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077267733', 'CheckoutRequestID': 'ws_CO_11092024161046608720369423', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024161046608720369423 827142"}
2024-09-11 13:11:51,622 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:11:52,145 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:11:52,146 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:11:52,372 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:13:15,026 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:13:15,174 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:13:15,174 - INFO - there is a test coming
2024-09-11 13:13:15,174 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 13:13:15,217 - INFO - {'updated_data': 'the data is now as 254722332886'}
2024-09-11 13:13:15,217 - INFO - the data is now as 254722332886
2024-09-11 13:13:15,233 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 13:13:15,233 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 13:13:15,235 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:13:15,878 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:13:15,880 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer yXiRW1poiZtA4oRZLWxY0LcXGce2'}"}
2024-09-11 13:13:15,881 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTMxMzE1', 'Timestamp': '20240911131315', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '20000', 'PartyA': '254722332886', 'PartyB': 827142, 'PhoneNumber': '254722332886', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '125-11785', 'TransactionDesc': 'Some payment'}
2024-09-11 13:13:15,882 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:13:16,708 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 13:13:16,716 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208794952998', 'CheckoutRequestID': 'ws_CO_11092024161316498722332886', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 13:14:33,274 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:14:33,396 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:14:33,397 - INFO - there is a test coming
2024-09-11 13:14:33,397 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 13:14:33,442 - INFO - {'updated_data': 'the data is now as 254722332886'}
2024-09-11 13:14:33,443 - INFO - the data is now as 254722332886
2024-09-11 13:14:33,460 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 13:14:33,461 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 13:14:33,462 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:14:34,070 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:14:34,073 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 80P4qQUHA24nJLCjieOHrbEXxp2Z'}"}
2024-09-11 13:14:34,073 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTMxNDM0', 'Timestamp': '20240911131434', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '11299', 'PartyA': '254722332886', 'PartyB': 827142, 'PhoneNumber': '254722332886', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '125-11785', 'TransactionDesc': 'Some payment'}
2024-09-11 13:14:34,074 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:14:34,938 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 13:14:34,944 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89264760', 'CheckoutRequestID': 'ws_CO_11092024161434708722332886', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 13:16:59,925 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:17:00,111 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:17:00,112 - INFO - there is a test coming
2024-09-11 13:17:00,112 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 13:17:00,168 - INFO - {'updated_data': 'the data is now as 254721477060'}
2024-09-11 13:17:00,169 - INFO - the data is now as 254721477060
2024-09-11 13:17:00,191 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 13:17:00,191 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 13:17:00,192 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:17:00,792 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:17:00,794 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer HCrQzhufApLOerJr7HXd1QpUCcJs'}"}
2024-09-11 13:17:00,795 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTMxNzAw', 'Timestamp': '20240911131700', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5640', 'PartyA': '254721477060', 'PartyB': 827142, 'PhoneNumber': '254721477060', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-27909', 'TransactionDesc': 'Some payment'}
2024-09-11 13:17:00,796 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:17:01,570 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 13:17:01,576 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9589203', 'CheckoutRequestID': 'ws_CO_11092024161701335721477060', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 13:17:36,452 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:17:36,488 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 13:17:36,489 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 13:19:49,037 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599953926', 'CheckoutRequestID': 'ws_CO_11092024161940346715131187', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB48G6Q2G'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911161948}, {'Name': 'PhoneNumber', 'Value': 254715131187}]}}}}"}
2024-09-11 13:19:49,038 - INFO - {'updated_data': 'callback data began'}
2024-09-11 13:19:49,038 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599953926', 'CheckoutRequestID': 'ws_CO_11092024161940346715131187', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB48G6Q2G'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911161948}, {'Name': 'PhoneNumber', 'Value': 254715131187}]}}}}}
2024-09-11 13:19:49,202 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:19:49,607 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:19:49,609 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:19:49,858 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:19:51,881 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:19:52,032 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:19:52,033 - INFO - {'updated': 'initiated stk query for ws_CO_11092024161940346715131187 827142 '}
2024-09-11 13:19:52,092 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:19:52,659 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:19:52,661 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 7Ib2sjKwTouMivRWCcHAbfTQyViM'}"}
2024-09-11 13:19:52,662 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTMxOTUy', 'Timestamp': '20240911131952', 'CheckoutRequestID': 'ws_CO_11092024161940346715131187'}"}
2024-09-11 13:19:52,663 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:19:53,299 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 13:19:53,300 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599953926', 'CheckoutRequestID': 'ws_CO_11092024161940346715131187', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024161940346715131187 827142"}
2024-09-11 13:19:53,422 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:19:53,936 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:19:53,938 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:19:54,166 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:23:27,332 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b520049938', 'CheckoutRequestID': 'ws_CO_11092024162311671721477060', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5640.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB28GOYMI'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911162326}, {'Name': 'PhoneNumber', 'Value': 254721477060}]}}}}"}
2024-09-11 13:23:27,333 - INFO - {'updated_data': 'callback data began'}
2024-09-11 13:23:27,333 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b520049938', 'CheckoutRequestID': 'ws_CO_11092024162311671721477060', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5640.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB28GOYMI'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911162326}, {'Name': 'PhoneNumber', 'Value': 254721477060}]}}}}}
2024-09-11 13:23:27,509 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:23:28,010 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:23:28,011 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:23:28,601 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:23:41,707 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:23:41,864 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:23:41,865 - INFO - {'updated': 'initiated stk query for ws_CO_11092024162311671721477060 827142 '}
2024-09-11 13:23:41,927 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:23:42,642 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:23:42,644 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer S1igiAUHxGZqvoLKrjEKPXWmCRMT'}"}
2024-09-11 13:23:42,645 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTMyMzQx', 'Timestamp': '20240911132341', 'CheckoutRequestID': 'ws_CO_11092024162311671721477060'}"}
2024-09-11 13:23:42,647 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:23:43,353 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 13:23:43,354 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b520049938', 'CheckoutRequestID': 'ws_CO_11092024162311671721477060', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024162311671721477060 827142"}
2024-09-11 13:23:43,505 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:23:43,753 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:23:43,755 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:23:44,315 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:23:45,462 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:23:45,584 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:23:45,584 - INFO - {'updated': 'initiated stk query for ws_CO_11092024162311671721477060 827142 '}
2024-09-11 13:23:45,645 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:23:46,230 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:23:46,232 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer RJYw5zjXAM70jZeI8FlOxkL2aR6t'}"}
2024-09-11 13:23:46,232 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTMyMzQ1', 'Timestamp': '20240911132345', 'CheckoutRequestID': 'ws_CO_11092024162311671721477060'}"}
2024-09-11 13:23:46,234 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:23:46,883 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 13:23:46,884 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b520049938', 'CheckoutRequestID': 'ws_CO_11092024162311671721477060', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024162311671721477060 827142"}
2024-09-11 13:23:47,007 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:23:47,219 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:23:47,221 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:23:47,426 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:25:22,739 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794966059', 'CheckoutRequestID': 'ws_CO_11092024162512008721684537', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 8381.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB58GYTL7'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911162522}, {'Name': 'PhoneNumber', 'Value': 254721684537}]}}}}"}
2024-09-11 13:25:22,739 - INFO - {'updated_data': 'callback data began'}
2024-09-11 13:25:22,739 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794966059', 'CheckoutRequestID': 'ws_CO_11092024162512008721684537', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 8381.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB58GYTL7'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911162522}, {'Name': 'PhoneNumber', 'Value': 254721684537}]}}}}}
2024-09-11 13:25:22,899 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:25:23,521 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:25:23,523 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:25:23,605 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:25:23,781 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:25:23,782 - INFO - {'updated': 'initiated stk query for ws_CO_11092024162512008721684537 827142 '}
2024-09-11 13:25:23,866 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:25:24,056 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:25:24,463 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:25:24,465 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer cfaSGCBwRm1xYBgxTkAkor76V7zR'}"}
2024-09-11 13:25:24,465 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTMyNTIz', 'Timestamp': '20240911132523', 'CheckoutRequestID': 'ws_CO_11092024162512008721684537'}"}
2024-09-11 13:25:24,467 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:25:25,110 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 13:25:25,110 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208794966059', 'CheckoutRequestID': 'ws_CO_11092024162512008721684537', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024162512008721684537 827142"}
2024-09-11 13:25:25,237 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:25:25,427 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:25:25,429 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:25:25,685 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:26:20,036 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:26:20,219 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:26:20,220 - INFO - there is a test coming
2024-09-11 13:26:20,220 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 13:26:20,266 - INFO - {'updated_data': 'the data is now as 254702148555'}
2024-09-11 13:26:20,266 - INFO - the data is now as 254702148555
2024-09-11 13:26:20,283 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 13:26:20,283 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 13:26:20,284 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:26:20,934 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:26:20,936 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer pS3S5wMUQCUJTDlONW0MllAxcAGh'}"}
2024-09-11 13:26:20,936 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTMyNjIw', 'Timestamp': '20240911132620', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3447', 'PartyA': '254702148555', 'PartyB': 827142, 'PhoneNumber': '254702148555', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-156778', 'TransactionDesc': 'Some payment'}
2024-09-11 13:26:20,937 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:26:21,825 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 13:26:21,831 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9614578', 'CheckoutRequestID': 'ws_CO_11092024162621561702148555', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 13:27:41,268 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:27:41,464 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:27:41,465 - INFO - there is a test coming
2024-09-11 13:27:41,466 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 13:27:41,519 - INFO - {'updated_data': 'the data is now as 254722637858'}
2024-09-11 13:27:41,520 - INFO - the data is now as 254722637858
2024-09-11 13:27:41,537 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 13:27:41,538 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 13:27:41,539 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:27:42,114 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:27:42,116 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer EbyfsAJqa0nXt1A4wAAAtURGeIUU'}"}
2024-09-11 13:27:42,117 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTMyNzQy', 'Timestamp': '20240911132742', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10369', 'PartyA': '254722637858', 'PartyB': 827142, 'PhoneNumber': '254722637858', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-18949', 'TransactionDesc': 'Some payment'}
2024-09-11 13:27:42,118 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:27:42,909 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 13:27:42,915 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee599975357', 'CheckoutRequestID': 'ws_CO_11092024162742671722637858', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 13:33:55,783 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171378975', 'CheckoutRequestID': 'ws_CO_11092024163334075725426068', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB58I6C51'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911163353}, {'Name': 'PhoneNumber', 'Value': 254725426068}]}}}}"}
2024-09-11 13:33:55,783 - INFO - {'updated_data': 'callback data began'}
2024-09-11 13:33:55,783 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171378975', 'CheckoutRequestID': 'ws_CO_11092024163334075725426068', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB58I6C51'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911163353}, {'Name': 'PhoneNumber', 'Value': 254725426068}]}}}}}
2024-09-11 13:33:55,946 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:33:56,167 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:33:56,168 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:33:56,412 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:34:29,002 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:34:29,162 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:34:29,163 - INFO - there is a test coming
2024-09-11 13:34:29,163 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 13:34:29,208 - INFO - {'updated_data': 'the data is now as 254719757658'}
2024-09-11 13:34:29,208 - INFO - the data is now as 254719757658
2024-09-11 13:34:29,223 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 13:34:29,223 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 13:34:29,224 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:34:29,794 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:34:29,796 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer jmYBVyGc5KUnbatiKYHfOQuHwSfd'}"}
2024-09-11 13:34:29,796 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTMzNDI5', 'Timestamp': '20240911133429', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254719757658', 'PartyB': 899885, 'PhoneNumber': '254719757658', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054376', 'TransactionDesc': 'Some payment'}
2024-09-11 13:34:29,797 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:34:31,036 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 13:34:31,042 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585056042897', 'CheckoutRequestID': 'ws_CO_11092024163430423719757658', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 13:35:34,733 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:35:34,954 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:35:34,955 - INFO - there is a test coming
2024-09-11 13:35:34,956 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 13:35:35,006 - INFO - {'updated_data': 'the data is now as 254708294337'}
2024-09-11 13:35:35,006 - INFO - the data is now as 254708294337
2024-09-11 13:35:35,022 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 13:35:35,022 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 13:35:35,024 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:35:35,933 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:35:35,935 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer znzafQLDm3OJ9SpZDRr0Z1wlxtHE'}"}
2024-09-11 13:35:35,935 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTMzNTM1', 'Timestamp': '20240911133535', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254708294337', 'PartyB': 899885, 'PhoneNumber': '254708294337', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054377', 'TransactionDesc': 'Some payment'}
2024-09-11 13:35:35,937 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:35:36,839 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 13:35:36,845 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208794977299', 'CheckoutRequestID': 'ws_CO_11092024163536614708294337', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 13:35:47,188 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794977299', 'CheckoutRequestID': 'ws_CO_11092024163536614708294337', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB88IG71S'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911163546}, {'Name': 'PhoneNumber', 'Value': 254708294337}]}}}}"}
2024-09-11 13:35:47,188 - INFO - {'updated_data': 'callback data began'}
2024-09-11 13:35:47,188 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208794977299', 'CheckoutRequestID': 'ws_CO_11092024163536614708294337', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB88IG71S'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911163546}, {'Name': 'PhoneNumber', 'Value': 254708294337}]}}}}}
2024-09-11 13:35:47,348 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:35:47,597 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:35:47,598 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:35:47,865 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:35:50,841 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:35:50,981 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:35:50,981 - INFO - {'updated': 'initiated stk query for ws_CO_11092024163536614708294337 899885 '}
2024-09-11 13:35:51,039 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:35:51,704 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:35:51,706 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Tm0OY9tIVjE4AcCXKhoUyisO6A1D'}"}
2024-09-11 13:35:51,706 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTMzNTUx', 'Timestamp': '20240911133551', 'CheckoutRequestID': 'ws_CO_11092024163536614708294337'}"}
2024-09-11 13:35:51,707 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:35:52,324 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 13:35:52,325 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208794977299', 'CheckoutRequestID': 'ws_CO_11092024163536614708294337', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024163536614708294337 899885"}
2024-09-11 13:35:52,442 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:35:52,653 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:35:52,655 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:35:52,869 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:36:18,240 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:36:18,370 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:36:18,371 - INFO - there is a test coming
2024-09-11 13:36:18,371 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 13:36:18,412 - INFO - {'updated_data': 'the data is now as 254727253139'}
2024-09-11 13:36:18,413 - INFO - the data is now as 254727253139
2024-09-11 13:36:18,428 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 13:36:18,429 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 13:36:18,430 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:36:19,097 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:36:19,099 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer C33uNigAtW3uf2tirWkSTbmpGZmr'}"}
2024-09-11 13:36:19,100 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTMzNjE5', 'Timestamp': '20240911133619', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254727253139', 'PartyB': 899885, 'PhoneNumber': '254727253139', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Order No . 14071', 'TransactionDesc': 'Some payment'}
2024-09-11 13:36:19,101 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:36:20,122 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 13:36:20,128 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182577521', 'CheckoutRequestID': 'ws_CO_11092024163619758727253139', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 13:36:38,847 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182577521', 'CheckoutRequestID': 'ws_CO_11092024163619758727253139', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB28IKLAK'}, {'Name': 'TransactionDate', 'Value': 20240911163638}, {'Name': 'PhoneNumber', 'Value': 254727253139}]}}}}"}
2024-09-11 13:36:38,847 - INFO - {'updated_data': 'callback data began'}
2024-09-11 13:36:38,847 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182577521', 'CheckoutRequestID': 'ws_CO_11092024163619758727253139', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB28IKLAK'}, {'Name': 'TransactionDate', 'Value': 20240911163638}, {'Name': 'PhoneNumber', 'Value': 254727253139}]}}}}}
2024-09-11 13:36:39,014 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:36:39,441 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:36:39,443 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:36:39,692 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:40:03,390 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:40:03,595 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:40:03,596 - INFO - there is a test coming
2024-09-11 13:40:03,596 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 13:40:03,638 - INFO - {'updated_data': 'the data is now as 254718790446'}
2024-09-11 13:40:03,638 - INFO - the data is now as 254718790446
2024-09-11 13:40:03,654 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 13:40:03,654 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 13:40:03,655 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:40:04,309 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:40:04,312 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer uP8XRM0foPW4Iqp78PvKbB0eAnZF'}"}
2024-09-11 13:40:04,313 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTM0MDA0', 'Timestamp': '20240911134004', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '300', 'PartyA': '254718790446', 'PartyB': 899885, 'PhoneNumber': '254718790446', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054447', 'TransactionDesc': 'Some payment'}
2024-09-11 13:40:04,314 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:40:05,174 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 13:40:05,180 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b520095594', 'CheckoutRequestID': 'ws_CO_11092024164004955718790446', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 13:40:17,675 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:40:17,859 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:40:17,860 - INFO - {'updated': 'initiated stk query for ws_CO_11092024164004955718790446 899885 '}
2024-09-11 13:40:17,918 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:40:18,502 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:40:18,504 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer yOFDGEexOPmSr0L9xycr99yHfFAQ'}"}
2024-09-11 13:40:18,504 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTM0MDE3', 'Timestamp': '20240911134017', 'CheckoutRequestID': 'ws_CO_11092024164004955718790446'}"}
2024-09-11 13:40:18,505 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:40:19,132 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 13:40:19,133 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b520095594', 'CheckoutRequestID': 'ws_CO_11092024164004955718790446', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024164004955718790446 899885"}
2024-09-11 13:40:19,266 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:40:19,505 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:40:19,506 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:40:19,728 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:44:57,702 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171391085', 'CheckoutRequestID': 'ws_CO_11092024164446259746149916', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB78JS9WL'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911164457}, {'Name': 'PhoneNumber', 'Value': 254746149916}]}}}}"}
2024-09-11 13:44:57,702 - INFO - {'updated_data': 'callback data began'}
2024-09-11 13:44:57,702 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171391085', 'CheckoutRequestID': 'ws_CO_11092024164446259746149916', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB78JS9WL'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911164457}, {'Name': 'PhoneNumber', 'Value': 254746149916}]}}}}}
2024-09-11 13:44:57,880 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:44:58,432 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:44:58,434 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:44:58,671 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:46:21,749 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:46:21,948 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:46:21,948 - INFO - {'updated': 'initiated stk query for ws_CO_11092024164609447746149916 899885 '}
2024-09-11 13:46:22,031 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:46:22,629 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:46:22,632 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer yff7uJKoRF2Cw0G9epGcn9fZJI81'}"}
2024-09-11 13:46:22,632 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTM0NjIy', 'Timestamp': '20240911134622', 'CheckoutRequestID': 'ws_CO_11092024164609447746149916'}"}
2024-09-11 13:46:22,633 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:46:23,251 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 13:46:23,252 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172119774', 'CheckoutRequestID': 'ws_CO_11092024164609447746149916', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024164609447746149916 899885"}
2024-09-11 13:46:23,387 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:46:23,583 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:46:23,584 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:46:23,816 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:54:12,814 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:54:12,949 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:54:12,950 - INFO - there is a test coming
2024-09-11 13:54:12,950 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 13:54:13,017 - INFO - {'updated_data': 'the data is now as 254725455125'}
2024-09-11 13:54:13,017 - INFO - the data is now as 254725455125
2024-09-11 13:54:13,035 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 13:54:13,036 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 13:54:13,037 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:54:13,813 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:54:13,815 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 03MQlrF4Ze11BtIcVVL84UYS5dF5'}"}
2024-09-11 13:54:13,815 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTM1NDEz', 'Timestamp': '20240911135413', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254725455125', 'PartyB': 899885, 'PhoneNumber': '254725455125', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0626827-1726062851872', 'TransactionDesc': 'Some payment'}
2024-09-11 13:54:13,816 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:54:14,561 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 13:54:14,569 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077314935', 'CheckoutRequestID': 'ws_CO_11092024165414336725455125', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 13:54:25,429 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:54:25,590 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:54:25,590 - INFO - {'updated': 'initiated stk query for ws_CO_11092024165414336725455125 899885 '}
2024-09-11 13:54:25,658 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:54:26,242 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:54:26,244 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer x1y0APemxfwdzMBK9I9k2GiUGsGF'}"}
2024-09-11 13:54:26,245 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTM1NDI1', 'Timestamp': '20240911135425', 'CheckoutRequestID': 'ws_CO_11092024165414336725455125'}"}
2024-09-11 13:54:26,246 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:54:26,899 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 13:54:26,900 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077314935', 'CheckoutRequestID': 'ws_CO_11092024165414336725455125', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024165414336725455125 899885"}
2024-09-11 13:54:27,021 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:54:27,239 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:54:27,241 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:54:27,471 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:55:02,858 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b520135446', 'CheckoutRequestID': 'ws_CO_11092024165456539115003409', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 13:55:02,858 - INFO - {'updated_data': 'callback data began'}
2024-09-11 13:55:02,858 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b520135446', 'CheckoutRequestID': 'ws_CO_11092024165456539115003409', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 13:55:03,013 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:55:03,216 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:55:03,217 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:55:03,444 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:58:02,957 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:58:03,140 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:58:03,140 - INFO - {'updated': 'initiated stk query for ws_CO_11092024165750836723239276 899885 '}
2024-09-11 13:58:03,215 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:58:03,793 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:58:03,795 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer XzgPqDaeWqTi1w94c4zAEOGpAa2r'}"}
2024-09-11 13:58:03,796 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTM1ODAz', 'Timestamp': '20240911135803', 'CheckoutRequestID': 'ws_CO_11092024165750836723239276'}"}
2024-09-11 13:58:03,797 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:58:04,567 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 13:58:04,568 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9700060', 'CheckoutRequestID': 'ws_CO_11092024165750836723239276', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024165750836723239276 899885"}
2024-09-11 13:58:04,703 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 13:58:04,914 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 13:58:04,915 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 13:58:05,149 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 13:58:37,088 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 13:58:37,222 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 13:58:37,223 - INFO - there is a test coming
2024-09-11 13:58:37,223 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 13:58:37,265 - INFO - {'updated_data': 'the data is now as 254704453287'}
2024-09-11 13:58:37,265 - INFO - the data is now as 254704453287
2024-09-11 13:58:37,289 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 13:58:37,289 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 13:58:37,290 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:58:38,139 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 13:58:38,142 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer THE9irrUAw9lIZ5TBnnYyCXtbfFh'}"}
2024-09-11 13:58:38,143 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTM1ODM4', 'Timestamp': '20240911135838', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254704453287', 'PartyB': 899885, 'PhoneNumber': '254704453287', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054380', 'TransactionDesc': 'Some payment'}
2024-09-11 13:58:38,144 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 13:58:39,070 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 13:58:39,076 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172133535', 'CheckoutRequestID': 'ws_CO_11092024165838802704453287', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 14:03:55,255 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:03:55,437 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:03:55,438 - INFO - there is a test coming
2024-09-11 14:03:55,439 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 14:03:55,487 - INFO - {'updated_data': 'the data is now as 254701249559'}
2024-09-11 14:03:55,487 - INFO - the data is now as 254701249559
2024-09-11 14:03:55,505 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 14:03:55,506 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 14:03:55,507 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:03:56,275 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:03:56,277 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 4AGdRk6wsl7viv64qeNvOPhv22sd'}"}
2024-09-11 14:03:56,277 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQwMzU2', 'Timestamp': '20240911140356', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254701249559', 'PartyB': 827142, 'PhoneNumber': '254701249559', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '405-2261', 'TransactionDesc': 'Some payment'}
2024-09-11 14:03:56,278 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:03:57,138 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 14:03:57,145 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20157612', 'CheckoutRequestID': 'ws_CO_11092024170356914701249559', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 14:04:05,380 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20157612', 'CheckoutRequestID': 'ws_CO_11092024170356914701249559', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB28MNTFK'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911170404}, {'Name': 'PhoneNumber', 'Value': 254701249559}]}}}}"}
2024-09-11 14:04:05,381 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:04:05,381 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20157612', 'CheckoutRequestID': 'ws_CO_11092024170356914701249559', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB28MNTFK'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911170404}, {'Name': 'PhoneNumber', 'Value': 254701249559}]}}}}}
2024-09-11 14:04:05,554 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:04:05,803 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:04:05,804 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:04:06,059 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:04:18,044 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:04:18,212 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:04:18,213 - INFO - {'updated': 'initiated stk query for ws_CO_11092024170356914701249559 827142 '}
2024-09-11 14:04:18,271 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:04:18,980 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:04:18,982 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer EubIbgFW40QLjNnVMMTD1XB9Xusq'}"}
2024-09-11 14:04:18,982 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQwNDE4', 'Timestamp': '20240911140418', 'CheckoutRequestID': 'ws_CO_11092024170356914701249559'}"}
2024-09-11 14:04:18,988 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:04:19,736 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 14:04:19,737 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20157612', 'CheckoutRequestID': 'ws_CO_11092024170356914701249559', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024170356914701249559 827142"}
2024-09-11 14:04:19,864 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:04:20,088 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:04:20,089 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:04:20,673 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:04:30,143 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795008964', 'CheckoutRequestID': 'ws_CO_11092024170419200715978200', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 6000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB38MPY2H'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911170429}, {'Name': 'PhoneNumber', 'Value': 254715978200}]}}}}"}
2024-09-11 14:04:30,143 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:04:30,143 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795008964', 'CheckoutRequestID': 'ws_CO_11092024170419200715978200', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 6000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB38MPY2H'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911170429}, {'Name': 'PhoneNumber', 'Value': 254715978200}]}}}}}
2024-09-11 14:04:30,307 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:04:30,546 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:04:30,547 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:04:30,587 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:04:30,620 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-11 14:04:30,621 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 14:04:31,089 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:06:01,860 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:06:02,026 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:06:02,027 - INFO - there is a test coming
2024-09-11 14:06:02,027 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 14:06:02,083 - INFO - {'updated_data': 'the data is now as 254722398058'}
2024-09-11 14:06:02,084 - INFO - the data is now as 254722398058
2024-09-11 14:06:02,105 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 14:06:02,105 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 14:06:02,107 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:06:02,774 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:06:02,776 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer naAeY6kEfLaAbQOmcUospgA3dTQd'}"}
2024-09-11 14:06:02,776 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQwNjAy', 'Timestamp': '20240911140602', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254722398058', 'PartyB': 827142, 'PhoneNumber': '254722398058', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-24398', 'TransactionDesc': 'Some payment'}
2024-09-11 14:06:02,778 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:06:03,533 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 14:06:03,544 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208795010875', 'CheckoutRequestID': 'ws_CO_11092024170603301722398058', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 14:06:11,093 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:06:11,289 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:06:11,290 - INFO - {'updated': 'initiated stk query for ws_CO_11092024170559862724883013 827142 '}
2024-09-11 14:06:11,369 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:06:12,066 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:06:12,067 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer pjZ5LpTF2i44MTmrR08NqWl8p3TC'}"}
2024-09-11 14:06:12,068 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQwNjEx', 'Timestamp': '20240911140611', 'CheckoutRequestID': 'ws_CO_11092024170559862724883013'}"}
2024-09-11 14:06:12,069 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:06:12,810 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 14:06:12,811 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024170559862724883013', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024170559862724883013 827142"}
2024-09-11 14:06:12,813 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 14:06:20,995 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:06:21,153 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:06:21,154 - INFO - {'updated': 'initiated stk query for ws_CO_11092024170559862724883013 827142 '}
2024-09-11 14:06:21,212 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:06:21,816 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:06:21,818 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer gTE4unGzJiB4J4BmGEbkAkMrPOnP'}"}
2024-09-11 14:06:21,819 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQwNjIx', 'Timestamp': '20240911140621', 'CheckoutRequestID': 'ws_CO_11092024170559862724883013'}"}
2024-09-11 14:06:21,822 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:06:22,475 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 14:06:22,475 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024170559862724883013', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024170559862724883013 827142"}
2024-09-11 14:06:22,478 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 14:13:30,284 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795019636', 'CheckoutRequestID': 'ws_CO_11092024171319602703723016', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB58O494L'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911171329}, {'Name': 'PhoneNumber', 'Value': 254703723016}]}}}}"}
2024-09-11 14:13:30,284 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:13:30,285 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795019636', 'CheckoutRequestID': 'ws_CO_11092024171319602703723016', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB58O494L'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911171329}, {'Name': 'PhoneNumber', 'Value': 254703723016}]}}}}}
2024-09-11 14:13:30,452 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:13:30,883 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:13:30,884 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:13:31,451 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:13:33,660 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:13:33,835 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:13:33,836 - INFO - {'updated': 'initiated stk query for ws_CO_11092024171319602703723016 827142 '}
2024-09-11 14:13:33,897 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:13:34,489 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:13:34,490 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 3EpdsBGF2U7GgQTsyeAaXrztYjVu'}"}
2024-09-11 14:13:34,491 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQxMzMz', 'Timestamp': '20240911141333', 'CheckoutRequestID': 'ws_CO_11092024171319602703723016'}"}
2024-09-11 14:13:34,492 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:13:35,143 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 14:13:35,144 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208795019636', 'CheckoutRequestID': 'ws_CO_11092024171319602703723016', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024171319602703723016 827142"}
2024-09-11 14:13:35,277 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:13:35,473 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:13:35,476 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:13:36,005 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:14:38,129 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:14:38,266 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:14:38,267 - INFO - {'updated': 'initiated stk query for ws_CO_11092024171426633722526164 899885 '}
2024-09-11 14:14:38,329 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:14:38,894 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:14:38,896 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer KLh59dpr2GkAD5uXGsZzcaZdyD3z'}"}
2024-09-11 14:14:38,896 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTQxNDM4', 'Timestamp': '20240911141438', 'CheckoutRequestID': 'ws_CO_11092024171426633722526164'}"}
2024-09-11 14:14:38,898 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:14:39,555 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-11 14:14:39,555 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5910102135', 'CheckoutRequestID': 'ws_CO_11092024171426633722526164', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_11092024171426633722526164 899885"}
2024-09-11 14:14:39,684 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:14:40,181 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:14:40,182 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:14:40,433 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:18:14,537 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:18:14,705 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:18:14,706 - INFO - there is a test coming
2024-09-11 14:18:14,707 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 14:18:14,760 - INFO - {'updated_data': 'the data is now as 254721388380'}
2024-09-11 14:18:14,761 - INFO - the data is now as 254721388380
2024-09-11 14:18:14,780 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 14:18:14,780 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 14:18:14,781 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:18:15,624 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:18:15,627 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer HQizhC2oeYe6M0Xi4zffgN2bWaFa'}"}
2024-09-11 14:18:15,627 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQxODE1', 'Timestamp': '20240911141815', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254721388380', 'PartyB': 827142, 'PhoneNumber': '254721388380', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-23010', 'TransactionDesc': 'Some payment'}
2024-09-11 14:18:15,629 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:18:16,468 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 14:18:16,481 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171667485', 'CheckoutRequestID': 'ws_CO_11092024171816137721388380', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 14:19:13,580 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:19:13,736 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:19:13,737 - INFO - {'updated': 'initiated stk query for ws_CO_11092024171850299724465587 899885 '}
2024-09-11 14:19:13,800 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:19:14,420 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:19:14,422 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer clsFjVAmXs8LcOVsvs2aCJ3KSsCu'}"}
2024-09-11 14:19:14,423 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTQxOTEz', 'Timestamp': '20240911141913', 'CheckoutRequestID': 'ws_CO_11092024171850299724465587'}"}
2024-09-11 14:19:14,424 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:19:15,154 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 14:19:15,154 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171430075', 'CheckoutRequestID': 'ws_CO_11092024171850299724465587', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024171850299724465587 899885"}
2024-09-11 14:19:15,380 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:19:15,783 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:19:15,784 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:19:16,026 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:19:26,644 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585056163898', 'CheckoutRequestID': 'ws_CO_11092024171910078714024583', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 6000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB78P29MB'}, {'Name': 'TransactionDate', 'Value': 20240911171926}, {'Name': 'PhoneNumber', 'Value': 254714024583}]}}}}"}
2024-09-11 14:19:26,645 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:19:26,645 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585056163898', 'CheckoutRequestID': 'ws_CO_11092024171910078714024583', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 6000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB78P29MB'}, {'Name': 'TransactionDate', 'Value': 20240911171926}, {'Name': 'PhoneNumber', 'Value': 254714024583}]}}}}}
2024-09-11 14:19:26,836 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:19:27,087 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:19:27,088 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:19:27,321 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:19:51,814 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:19:51,938 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:19:51,938 - INFO - {'updated': 'initiated stk query for ws_CO_11092024171910078714024583 899885 '}
2024-09-11 14:19:52,005 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:19:52,601 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:19:52,603 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer gm7y1EavGvUSJP0OO36ZFJCQAPYq'}"}
2024-09-11 14:19:52,603 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTQxOTUy', 'Timestamp': '20240911141952', 'CheckoutRequestID': 'ws_CO_11092024171910078714024583'}"}
2024-09-11 14:19:52,604 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:19:53,350 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 14:19:53,351 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585056163898', 'CheckoutRequestID': 'ws_CO_11092024171910078714024583', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024171910078714024583 899885"}
2024-09-11 14:19:53,473 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:19:53,972 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:19:53,973 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:19:54,204 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:23:16,651 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077347938', 'CheckoutRequestID': 'ws_CO_11092024172305663790048058', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB68PONBU'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911172316}, {'Name': 'PhoneNumber', 'Value': 254790048058}]}}}}"}
2024-09-11 14:23:16,651 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:23:16,651 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077347938', 'CheckoutRequestID': 'ws_CO_11092024172305663790048058', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB68PONBU'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911172316}, {'Name': 'PhoneNumber', 'Value': 254790048058}]}}}}}
2024-09-11 14:23:16,825 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:23:17,322 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:23:17,324 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:23:17,482 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:23:17,619 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:23:17,620 - INFO - {'updated': 'initiated stk query for ws_CO_11092024172305663790048058 827142 '}
2024-09-11 14:23:17,688 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:23:17,874 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:23:18,378 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:23:18,380 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 8oQwh4FZhbInAdjR3R40UQDpWgan'}"}
2024-09-11 14:23:18,380 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQyMzE3', 'Timestamp': '20240911142317', 'CheckoutRequestID': 'ws_CO_11092024172305663790048058'}"}
2024-09-11 14:23:18,381 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:23:19,120 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 14:23:19,120 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077347938', 'CheckoutRequestID': 'ws_CO_11092024172305663790048058', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024172305663790048058 827142"}
2024-09-11 14:23:19,277 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:23:19,504 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:23:19,505 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:23:19,839 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:25:36,914 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89344089', 'CheckoutRequestID': 'ws_CO_11092024172526711724340942', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB88Q2HKU'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911172536}, {'Name': 'PhoneNumber', 'Value': 254724340942}]}}}}"}
2024-09-11 14:25:36,915 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:25:36,915 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89344089', 'CheckoutRequestID': 'ws_CO_11092024172526711724340942', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB88Q2HKU'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911172536}, {'Name': 'PhoneNumber', 'Value': 254724340942}]}}}}}
2024-09-11 14:25:37,084 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:25:37,287 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:25:37,288 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:25:37,499 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:25:40,123 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:25:40,147 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 14:25:40,148 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 14:26:16,583 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171676450', 'CheckoutRequestID': 'ws_CO_11092024172600641722920224', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB48Q6MAM'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911172616}, {'Name': 'PhoneNumber', 'Value': 254722920224}]}}}}"}
2024-09-11 14:26:16,584 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:26:16,584 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171676450', 'CheckoutRequestID': 'ws_CO_11092024172600641722920224', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB48Q6MAM'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911172616}, {'Name': 'PhoneNumber', 'Value': 254722920224}]}}}}}
2024-09-11 14:26:16,754 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:26:16,989 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:26:16,991 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:26:17,509 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:26:21,686 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:26:21,865 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:26:21,865 - INFO - {'updated': 'initiated stk query for ws_CO_11092024172600641722920224 827142 '}
2024-09-11 14:26:21,924 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:26:22,526 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:26:22,527 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer PnQeizA4YZOPLy3U0Ti8PffqNm6v'}"}
2024-09-11 14:26:22,528 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQyNjIx', 'Timestamp': '20240911142621', 'CheckoutRequestID': 'ws_CO_11092024172600641722920224'}"}
2024-09-11 14:26:22,529 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:26:23,297 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 14:26:23,298 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171676450', 'CheckoutRequestID': 'ws_CO_11092024172600641722920224', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024172600641722920224 827142"}
2024-09-11 14:26:23,420 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:26:23,657 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:26:23,658 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:26:23,899 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:26:51,839 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172166101', 'CheckoutRequestID': 'ws_CO_11092024172644401724161824', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 30000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB48Q9V4Q'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911172651}, {'Name': 'PhoneNumber', 'Value': 254724161824}]}}}}"}
2024-09-11 14:26:51,839 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:26:51,839 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172166101', 'CheckoutRequestID': 'ws_CO_11092024172644401724161824', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 30000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB48Q9V4Q'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911172651}, {'Name': 'PhoneNumber', 'Value': 254724161824}]}}}}}
2024-09-11 14:26:52,015 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:26:52,549 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:26:52,551 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:26:52,804 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:26:55,559 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:26:55,779 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:26:55,780 - INFO - {'updated': 'initiated stk query for ws_CO_11092024172644401724161824 899885 '}
2024-09-11 14:26:55,850 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:26:56,418 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:26:56,420 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer MdOHiFXbTqA8LIqgthXPxesLi18A'}"}
2024-09-11 14:26:56,421 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTQyNjU1', 'Timestamp': '20240911142655', 'CheckoutRequestID': 'ws_CO_11092024172644401724161824'}"}
2024-09-11 14:26:56,422 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:26:57,031 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 14:26:57,032 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172166101', 'CheckoutRequestID': 'ws_CO_11092024172644401724161824', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024172644401724161824 899885"}
2024-09-11 14:26:57,164 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:26:57,670 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:26:57,672 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:26:57,893 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:28:26,628 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182718139', 'CheckoutRequestID': 'ws_CO_11092024172805887719339949', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB48QJ970'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911172825}, {'Name': 'PhoneNumber', 'Value': 254719339949}]}}}}"}
2024-09-11 14:28:26,628 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:28:26,628 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182718139', 'CheckoutRequestID': 'ws_CO_11092024172805887719339949', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB48QJ970'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911172825}, {'Name': 'PhoneNumber', 'Value': 254719339949}]}}}}}
2024-09-11 14:28:26,800 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:28:27,017 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:28:27,019 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:28:27,265 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:29:21,297 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:29:21,423 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:29:21,424 - INFO - there is a test coming
2024-09-11 14:29:21,424 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 14:29:21,469 - INFO - {'updated_data': 'the data is now as 254721622242'}
2024-09-11 14:29:21,470 - INFO - the data is now as 254721622242
2024-09-11 14:29:21,492 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 14:29:21,492 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 14:29:21,494 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:29:22,075 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:29:22,077 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer GENQ0zYdnBtL8VHCdGATkr7TNBnm'}"}
2024-09-11 14:29:22,077 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTQyOTIy', 'Timestamp': '20240911142922', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '500', 'PartyA': '254721622242', 'PartyB': 899885, 'PhoneNumber': '254721622242', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054503', 'TransactionDesc': 'Some payment'}
2024-09-11 14:29:22,079 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:29:22,949 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 14:29:22,959 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077355246', 'CheckoutRequestID': 'ws_CO_11092024172922739721622242', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 14:29:35,665 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077355246', 'CheckoutRequestID': 'ws_CO_11092024172922739721622242', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB58QQEY7'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911172933}, {'Name': 'PhoneNumber', 'Value': 254721622242}]}}}}"}
2024-09-11 14:29:35,665 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:29:35,665 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077355246', 'CheckoutRequestID': 'ws_CO_11092024172922739721622242', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB58QQEY7'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911172933}, {'Name': 'PhoneNumber', 'Value': 254721622242}]}}}}}
2024-09-11 14:29:35,861 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:29:36,106 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:29:36,108 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:29:36,362 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:29:37,206 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:29:37,334 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:29:37,334 - INFO - there is a test coming
2024-09-11 14:29:37,335 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 14:29:37,379 - INFO - {'updated_data': 'the data is now as 254703888510'}
2024-09-11 14:29:37,379 - INFO - the data is now as 254703888510
2024-09-11 14:29:37,418 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 14:29:37,419 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 14:29:37,420 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:29:38,016 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:29:38,019 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer M0eGgzAe59GgKAa06NX2ho9pQfOS'}"}
2024-09-11 14:29:38,019 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTQyOTM4', 'Timestamp': '20240911142938', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '70000', 'PartyA': '254703888510', 'PartyB': 899885, 'PhoneNumber': '254703888510', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054472', 'TransactionDesc': 'Some payment'}
2024-09-11 14:29:38,021 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:29:38,843 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 14:29:38,856 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585056192310', 'CheckoutRequestID': 'ws_CO_11092024172938584703888510', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 14:29:50,029 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:29:50,064 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-11 14:29:50,065 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 14:31:06,638 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5910146573', 'CheckoutRequestID': 'ws_CO_11092024173056059705099923', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 7000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB58QZFE7'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911173106}, {'Name': 'PhoneNumber', 'Value': 254705099923}]}}}}"}
2024-09-11 14:31:06,638 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:31:06,638 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5910146573', 'CheckoutRequestID': 'ws_CO_11092024173056059705099923', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 7000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB58QZFE7'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911173106}, {'Name': 'PhoneNumber', 'Value': 254705099923}]}}}}}
2024-09-11 14:31:06,824 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:31:07,042 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:31:07,043 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:31:07,261 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:31:18,194 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:31:18,396 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:31:18,396 - INFO - {'updated': 'initiated stk query for ws_CO_11092024173056059705099923 899885 '}
2024-09-11 14:31:18,461 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:31:19,040 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:31:19,042 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer FRydmH9xGSJDvXCcoQ6OkrT479G0'}"}
2024-09-11 14:31:19,042 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTQzMTE4', 'Timestamp': '20240911143118', 'CheckoutRequestID': 'ws_CO_11092024173056059705099923'}"}
2024-09-11 14:31:19,043 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:31:19,659 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 14:31:19,659 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5910146573', 'CheckoutRequestID': 'ws_CO_11092024173056059705099923', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024173056059705099923 899885"}
2024-09-11 14:31:19,782 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:31:19,995 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:31:19,996 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:31:20,218 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:33:57,102 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:33:57,389 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:33:57,390 - INFO - there is a test coming
2024-09-11 14:33:57,390 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 14:33:57,436 - INFO - {'updated_data': 'the data is now as 254710967443'}
2024-09-11 14:33:57,436 - INFO - the data is now as 254710967443
2024-09-11 14:33:57,458 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 14:33:57,460 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 14:33:57,484 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:33:58,102 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:33:58,104 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer nMp2nhEH0C5h6u3lAFn8geJjDZDH'}"}
2024-09-11 14:33:58,104 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQzMzU4', 'Timestamp': '20240911143358', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '20000', 'PartyA': '254710967443', 'PartyB': 827142, 'PhoneNumber': '254710967443', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '4353-1271', 'TransactionDesc': 'Some payment'}
2024-09-11 14:33:58,106 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:33:58,838 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 14:33:58,845 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172173903', 'CheckoutRequestID': 'ws_CO_11092024173358616710967443', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 14:33:59,112 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:34:15,254 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:34:15,255 - INFO - {'updated': 'initiated stk query for ws_CO_11092024173347827746053832 827142 '}
2024-09-11 14:34:15,317 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:34:15,876 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:34:15,881 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer skA5eymgGG1pFE0bxkZGm1sfyxjz'}"}
2024-09-11 14:34:15,881 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQzNDE1', 'Timestamp': '20240911143415', 'CheckoutRequestID': 'ws_CO_11092024173347827746053832'}"}
2024-09-11 14:34:15,883 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:34:16,545 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 14:34:16,545 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172173669', 'CheckoutRequestID': 'ws_CO_11092024173347827746053832', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024173347827746053832 827142"}
2024-09-11 14:34:16,673 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:34:17,151 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:34:17,153 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:34:17,385 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:34:31,511 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172173903', 'CheckoutRequestID': 'ws_CO_11092024173358616710967443', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-11 14:34:31,512 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:34:31,512 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172173903', 'CheckoutRequestID': 'ws_CO_11092024173358616710967443', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-11 14:34:31,676 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:34:31,870 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:34:31,872 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:34:32,119 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:37:31,825 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:37:31,988 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:37:31,989 - INFO - there is a test coming
2024-09-11 14:37:31,989 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 14:37:32,033 - INFO - {'updated_data': 'the data is now as 254701785548'}
2024-09-11 14:37:32,033 - INFO - the data is now as 254701785548
2024-09-11 14:37:32,049 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 14:37:32,049 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 14:37:32,051 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:37:32,816 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:37:32,818 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 153xtog5QCCGlaZzBDerUpEz2XQa'}"}
2024-09-11 14:37:32,818 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQzNzMy', 'Timestamp': '20240911143732', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254701785548', 'PartyB': 827142, 'PhoneNumber': '254701785548', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-30204', 'TransactionDesc': 'Some payment'}
2024-09-11 14:37:32,819 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:37:33,812 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 14:37:33,819 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172177726', 'CheckoutRequestID': 'ws_CO_11092024173733516701785548', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 14:37:44,655 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:37:44,838 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:37:44,839 - INFO - {'updated': 'initiated stk query for ws_CO_11092024173733516701785548 827142 '}
2024-09-11 14:37:44,907 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:37:45,483 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:37:45,485 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer zEF32T467ZXQwgiM9gGK324nh4Qp'}"}
2024-09-11 14:37:45,486 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQzNzQ0', 'Timestamp': '20240911143744', 'CheckoutRequestID': 'ws_CO_11092024173733516701785548'}"}
2024-09-11 14:37:45,487 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:37:46,215 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 14:37:46,215 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172177726', 'CheckoutRequestID': 'ws_CO_11092024173733516701785548', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024173733516701785548 827142"}
2024-09-11 14:37:46,353 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:37:46,583 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:37:46,585 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:37:46,828 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:37:52,624 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182745531', 'CheckoutRequestID': 'ws_CO_11092024173740077721329207', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB28S4BYC'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911173751}, {'Name': 'PhoneNumber', 'Value': 254721329207}]}}}}"}
2024-09-11 14:37:52,625 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:37:52,625 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182745531', 'CheckoutRequestID': 'ws_CO_11092024173740077721329207', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB28S4BYC'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911173751}, {'Name': 'PhoneNumber', 'Value': 254721329207}]}}}}}
2024-09-11 14:37:52,789 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:37:52,987 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:37:52,989 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:37:53,210 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:37:58,583 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:37:58,722 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:37:58,723 - INFO - {'updated': 'initiated stk query for ws_CO_11092024173740077721329207 899885 '}
2024-09-11 14:37:58,827 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:37:59,602 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:37:59,605 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 0Bq9tStGV1XGmT9cK6Aaz9oHmIsv'}"}
2024-09-11 14:37:59,605 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTQzNzU4', 'Timestamp': '20240911143758', 'CheckoutRequestID': 'ws_CO_11092024173740077721329207'}"}
2024-09-11 14:37:59,606 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:38:00,263 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 14:38:00,263 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182745531', 'CheckoutRequestID': 'ws_CO_11092024173740077721329207', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024173740077721329207 899885"}
2024-09-11 14:38:00,390 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:38:00,596 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:38:00,598 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:38:01,118 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:38:48,654 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172178695', 'CheckoutRequestID': 'ws_CO_11092024173838162796656581', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB48SAFBW'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911173847}, {'Name': 'PhoneNumber', 'Value': 254796656581}]}}}}"}
2024-09-11 14:38:48,654 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:38:48,654 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172178695', 'CheckoutRequestID': 'ws_CO_11092024173838162796656581', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB48SAFBW'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911173847}, {'Name': 'PhoneNumber', 'Value': 254796656581}]}}}}}
2024-09-11 14:38:48,813 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:38:49,052 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:38:49,053 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:38:49,275 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:38:50,509 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:38:50,678 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:38:50,678 - INFO - {'updated': 'initiated stk query for ws_CO_11092024173838162796656581 827142 '}
2024-09-11 14:38:50,735 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:38:51,411 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:38:51,413 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 1oBYhwGN2Ngmbn891RiYNXIVg1XZ'}"}
2024-09-11 14:38:51,413 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQzODUw', 'Timestamp': '20240911143850', 'CheckoutRequestID': 'ws_CO_11092024173838162796656581'}"}
2024-09-11 14:38:51,414 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:38:52,204 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 14:38:52,204 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172178695', 'CheckoutRequestID': 'ws_CO_11092024173838162796656581', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024173838162796656581 827142"}
2024-09-11 14:38:52,325 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:38:52,834 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:38:52,836 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:38:53,055 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:40:51,888 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171454066', 'CheckoutRequestID': 'ws_CO_11092024174042079729270221', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB58SMP5R'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911174051}, {'Name': 'PhoneNumber', 'Value': 254729270221}]}}}}"}
2024-09-11 14:40:51,888 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:40:51,888 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171454066', 'CheckoutRequestID': 'ws_CO_11092024174042079729270221', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB58SMP5R'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911174051}, {'Name': 'PhoneNumber', 'Value': 254729270221}]}}}}}
2024-09-11 14:40:52,055 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:40:52,574 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:40:52,576 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:40:52,869 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:40:53,344 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:40:53,491 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:40:53,492 - INFO - {'updated': 'initiated stk query for ws_CO_11092024174042079729270221 827142 '}
2024-09-11 14:40:53,547 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:40:54,240 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:40:54,242 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer DadOMYtAsx7DAFXGGnhaAmtMoxj1'}"}
2024-09-11 14:40:54,243 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQ0MDUz', 'Timestamp': '20240911144053', 'CheckoutRequestID': 'ws_CO_11092024174042079729270221'}"}
2024-09-11 14:40:54,244 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:40:54,855 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 14:40:54,855 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171454066', 'CheckoutRequestID': 'ws_CO_11092024174042079729270221', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024174042079729270221 827142"}
2024-09-11 14:40:54,992 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:40:55,195 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:40:55,197 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:40:55,745 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:47:32,489 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:47:32,645 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:47:32,646 - INFO - there is a test coming
2024-09-11 14:47:32,646 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 14:47:32,698 - INFO - {'updated_data': 'the data is now as 254704453287'}
2024-09-11 14:47:32,698 - INFO - the data is now as 254704453287
2024-09-11 14:47:32,719 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 14:47:32,720 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 14:47:32,721 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:47:33,362 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:47:33,364 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer A6mwIiwoAHHcGm87cxfAiy81W7qF'}"}
2024-09-11 14:47:33,364 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTQ0NzMz', 'Timestamp': '20240911144733', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254704453287', 'PartyB': 899885, 'PhoneNumber': '254704453287', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054474', 'TransactionDesc': 'Some payment'}
2024-09-11 14:47:33,366 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:47:34,144 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 14:47:34,152 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172189027', 'CheckoutRequestID': 'ws_CO_11092024174733912704453287', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 14:47:41,585 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172188896', 'CheckoutRequestID': 'ws_CO_11092024174729400712788966', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2400.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB38TTKNJ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911174740}, {'Name': 'PhoneNumber', 'Value': 254712788966}]}}}}"}
2024-09-11 14:47:41,585 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:47:41,585 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172188896', 'CheckoutRequestID': 'ws_CO_11092024174729400712788966', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2400.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB38TTKNJ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911174740}, {'Name': 'PhoneNumber', 'Value': 254712788966}]}}}}}
2024-09-11 14:47:41,754 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:47:42,312 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:47:42,314 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:47:42,645 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:48:33,734 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:48:33,998 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:48:33,999 - INFO - {'updated': 'initiated stk query for ws_CO_11092024174729400712788966 827142 '}
2024-09-11 14:48:34,054 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:48:34,609 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:48:34,612 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer GviV6lEmnGvliEWjk76t9vWkdSnc'}"}
2024-09-11 14:48:34,612 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQ0ODM0', 'Timestamp': '20240911144834', 'CheckoutRequestID': 'ws_CO_11092024174729400712788966'}"}
2024-09-11 14:48:34,614 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:48:35,333 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 14:48:35,334 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172188896', 'CheckoutRequestID': 'ws_CO_11092024174729400712788966', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024174729400712788966 827142"}
2024-09-11 14:48:35,468 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:48:35,668 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:48:35,670 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:48:35,918 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:48:37,828 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077376092', 'CheckoutRequestID': 'ws_CO_11092024174827539725808100', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5140.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB18TZDZL'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911174837}, {'Name': 'PhoneNumber', 'Value': 254725808100}]}}}}"}
2024-09-11 14:48:37,828 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:48:37,828 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077376092', 'CheckoutRequestID': 'ws_CO_11092024174827539725808100', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5140.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB18TZDZL'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911174837}, {'Name': 'PhoneNumber', 'Value': 254725808100}]}}}}}
2024-09-11 14:48:38,000 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:48:38,200 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:48:38,201 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:48:38,727 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:51:43,218 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:51:43,513 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:51:43,514 - INFO - there is a test coming
2024-09-11 14:51:43,515 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 14:51:43,567 - INFO - {'updated_data': 'the data is now as 254710308986'}
2024-09-11 14:51:43,568 - INFO - the data is now as 254710308986
2024-09-11 14:51:43,584 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 14:51:43,584 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 14:51:43,585 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:51:44,235 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:51:44,237 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 6E2OdTRXhbr4AoEuQDH3yeJ7gaWv'}"}
2024-09-11 14:51:44,238 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQ1MTQ0', 'Timestamp': '20240911145144', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '50360', 'PartyA': '254710308986', 'PartyB': 827142, 'PhoneNumber': '254710308986', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-12075', 'TransactionDesc': 'Some payment'}
2024-09-11 14:51:44,239 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:51:45,166 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 14:51:45,172 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9848182', 'CheckoutRequestID': 'ws_CO_11092024175144847710308986', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 14:52:06,454 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:52:06,613 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:52:06,613 - INFO - {'updated': 'initiated stk query for ws_CO_11092024175144847710308986 827142 '}
2024-09-11 14:52:06,678 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:52:07,260 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:52:07,262 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ssG6KIqAfHaQEArvrs7TjCnufaR3'}"}
2024-09-11 14:52:07,262 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQ1MjA2', 'Timestamp': '20240911145206', 'CheckoutRequestID': 'ws_CO_11092024175144847710308986'}"}
2024-09-11 14:52:07,263 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:52:07,872 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 14:52:07,873 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b9848182', 'CheckoutRequestID': 'ws_CO_11092024175144847710308986', 'ResultCode': '1', 'ResultDesc': 'The balance is insufficient for the transaction.'} for ws_CO_11092024175144847710308986 827142"}
2024-09-11 14:52:08,003 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:52:08,199 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:52:08,201 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:52:08,432 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:52:26,436 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:52:26,572 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:52:26,572 - INFO - there is a test coming
2024-09-11 14:52:26,573 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 14:52:26,885 - INFO - {'updated_data': 'the data is now as 254712788966'}
2024-09-11 14:52:26,886 - INFO - the data is now as 254712788966
2024-09-11 14:52:26,971 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 14:52:26,972 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 14:52:26,973 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:52:27,562 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:52:27,564 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer bMmIvEzv5bnnaHQqWrJEuaEGKCHk'}"}
2024-09-11 14:52:27,564 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQ1MjI3', 'Timestamp': '20240911145227', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2400', 'PartyA': '254712788966', 'PartyB': 827142, 'PhoneNumber': '254712788966', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-16569', 'TransactionDesc': 'Some payment'}
2024-09-11 14:52:27,565 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:52:28,414 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 14:52:28,419 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171706059', 'CheckoutRequestID': 'ws_CO_11092024175228220712788966', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 14:53:25,458 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182788870', 'CheckoutRequestID': 'ws_CO_11092024175310051721821115', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 50000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB38UTQPF'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911175324}, {'Name': 'PhoneNumber', 'Value': 254721821115}]}}}}"}
2024-09-11 14:53:25,459 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:53:25,459 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182788870', 'CheckoutRequestID': 'ws_CO_11092024175310051721821115', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 50000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB38UTQPF'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911175324}, {'Name': 'PhoneNumber', 'Value': 254721821115}]}}}}}
2024-09-11 14:53:26,031 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:53:26,238 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:53:26,240 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:53:26,480 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:53:31,157 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:53:31,354 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:53:31,355 - INFO - {'updated': 'initiated stk query for ws_CO_11092024175310051721821115 899885 '}
2024-09-11 14:53:31,412 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:53:32,014 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:53:32,016 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer n0JpAZoK5ZQNNZkqD5YKXJAbMYpl'}"}
2024-09-11 14:53:32,017 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTQ1MzMx', 'Timestamp': '20240911145331', 'CheckoutRequestID': 'ws_CO_11092024175310051721821115'}"}
2024-09-11 14:53:32,018 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:53:32,797 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 14:53:32,798 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3182788870', 'CheckoutRequestID': 'ws_CO_11092024175310051721821115', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024175310051721821115 899885"}
2024-09-11 14:53:32,925 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:53:33,124 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:53:33,125 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:53:33,364 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:53:41,010 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:53:41,202 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:53:41,203 - INFO - there is a test coming
2024-09-11 14:53:41,203 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 14:53:41,252 - INFO - {'updated_data': 'the data is now as 254704453287'}
2024-09-11 14:53:41,252 - INFO - the data is now as 254704453287
2024-09-11 14:53:41,269 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 14:53:41,269 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 14:53:41,270 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:53:41,877 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:53:41,878 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer oQX7JA7ApIVAGSXLUCemogZCjeJF'}"}
2024-09-11 14:53:41,879 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTQ1MzQx', 'Timestamp': '20240911145341', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254704453287', 'PartyB': 899885, 'PhoneNumber': '254704453287', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054478', 'TransactionDesc': 'Some payment'}
2024-09-11 14:53:41,880 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:53:42,675 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 14:53:42,689 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20295607', 'CheckoutRequestID': 'ws_CO_11092024175342433704453287', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 14:54:57,657 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:54:57,809 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:54:57,810 - INFO - there is a test coming
2024-09-11 14:54:57,810 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 14:54:57,859 - INFO - {'updated_data': 'the data is now as 254710308986'}
2024-09-11 14:54:57,859 - INFO - the data is now as 254710308986
2024-09-11 14:54:57,875 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 14:54:57,875 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 14:54:57,876 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:54:58,456 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:54:58,458 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer GBLxAShusNpPTClaZWRdyOZCgt4F'}"}
2024-09-11 14:54:58,458 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQ1NDU4', 'Timestamp': '20240911145458', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '50360', 'PartyA': '254710308986', 'PartyB': 827142, 'PhoneNumber': '254710308986', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-12075', 'TransactionDesc': 'Some payment'}
2024-09-11 14:54:58,460 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:54:59,330 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 14:54:59,336 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89377529', 'CheckoutRequestID': 'ws_CO_11092024175459099710308986', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 14:55:01,249 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171471103', 'CheckoutRequestID': 'ws_CO_11092024175454131704453287', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB68V42D8'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911175500}, {'Name': 'PhoneNumber', 'Value': 254704453287}]}}}}"}
2024-09-11 14:55:01,250 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:55:01,251 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171471103', 'CheckoutRequestID': 'ws_CO_11092024175454131704453287', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB68V42D8'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911175500}, {'Name': 'PhoneNumber', 'Value': 254704453287}]}}}}}
2024-09-11 14:55:01,415 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:55:01,649 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:55:01,650 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:55:01,884 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:55:13,715 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89377529', 'CheckoutRequestID': 'ws_CO_11092024175459099710308986', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 14:55:13,715 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:55:13,715 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89377529', 'CheckoutRequestID': 'ws_CO_11092024175459099710308986', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 14:55:13,895 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:55:14,110 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:55:14,111 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:55:14,366 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:56:03,658 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:56:03,882 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:56:03,883 - INFO - there is a test coming
2024-09-11 14:56:03,884 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 14:56:03,941 - INFO - {'updated_data': 'the data is now as 254721720280'}
2024-09-11 14:56:03,942 - INFO - the data is now as 254721720280
2024-09-11 14:56:03,958 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 14:56:03,958 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 14:56:03,966 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:56:04,795 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:56:04,800 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer LMGyCZ1npmL3ZGqGpbgaOD5ZkL38'}"}
2024-09-11 14:56:04,801 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTQ1NjA0', 'Timestamp': '20240911145604', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '150000', 'PartyA': '254721720280', 'PartyB': 899885, 'PhoneNumber': '254721720280', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054479', 'TransactionDesc': 'Some payment'}
2024-09-11 14:56:04,802 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:56:05,685 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 14:56:05,691 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171710377', 'CheckoutRequestID': 'ws_CO_11092024175605495721720280', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 14:56:17,132 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:56:17,291 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:56:17,291 - INFO - {'updated': 'initiated stk query for ws_CO_11092024175605652724892594 827142 '}
2024-09-11 14:56:17,345 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:56:17,983 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:56:17,985 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer cr4oYwh9AwKcvoiUWp2ye6vnRkuP'}"}
2024-09-11 14:56:17,986 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQ1NjE3', 'Timestamp': '20240911145617', 'CheckoutRequestID': 'ws_CO_11092024175605652724892594'}"}
2024-09-11 14:56:17,987 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:56:18,731 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 14:56:18,731 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024175605652724892594', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024175605652724892594 827142"}
2024-09-11 14:56:18,735 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 14:58:00,585 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:58:00,616 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-11 14:58:00,617 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 14:58:02,403 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:58:02,434 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-11 14:58:02,435 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 14:58:31,134 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795071894', 'CheckoutRequestID': 'ws_CO_11092024175823707796091410', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB78VQNYZ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911175830}, {'Name': 'PhoneNumber', 'Value': 254796091410}]}}}}"}
2024-09-11 14:58:31,134 - INFO - {'updated_data': 'callback data began'}
2024-09-11 14:58:31,134 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795071894', 'CheckoutRequestID': 'ws_CO_11092024175823707796091410', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB78VQNYZ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911175830}, {'Name': 'PhoneNumber', 'Value': 254796091410}]}}}}}
2024-09-11 14:58:31,298 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:58:31,525 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:58:31,526 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:58:32,060 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:58:40,565 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:58:40,756 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:58:40,756 - INFO - {'updated': 'initiated stk query for ws_CO_11092024175749322740740110 827142 '}
2024-09-11 14:58:40,818 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:58:41,445 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:58:41,447 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 1ITXVoN7vnoE6AFknjnelZyRIa5P'}"}
2024-09-11 14:58:41,448 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQ1ODQw', 'Timestamp': '20240911145840', 'CheckoutRequestID': 'ws_CO_11092024175749322740740110'}"}
2024-09-11 14:58:41,449 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:58:42,215 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 14:58:42,216 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20307507', 'CheckoutRequestID': 'ws_CO_11092024175749322740740110', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024175749322740740110 827142"}
2024-09-11 14:58:42,338 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:58:42,883 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:58:42,885 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:58:43,402 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 14:58:51,793 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:58:51,922 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:58:51,926 - INFO - there is a test coming
2024-09-11 14:58:51,926 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 14:58:51,976 - INFO - {'updated_data': 'the data is now as 254721821115'}
2024-09-11 14:58:51,976 - INFO - the data is now as 254721821115
2024-09-11 14:58:51,992 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 14:58:51,993 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 14:58:51,994 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:58:52,755 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:58:52,757 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer zAFllXOOK62LMAGAknTQsZ7Vdh5A'}"}
2024-09-11 14:58:52,757 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTQ1ODUy', 'Timestamp': '20240911145852', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '41000', 'PartyA': '254721821115', 'PartyB': 899885, 'PhoneNumber': '254721821115', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0619068-1726066729174', 'TransactionDesc': 'Some payment'}
2024-09-11 14:58:52,758 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:58:53,999 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 14:58:54,006 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5910225300', 'CheckoutRequestID': 'ws_CO_11092024175853301721821115', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 14:58:54,984 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:58:55,003 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 14:58:55,004 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 14:59:04,839 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 14:59:04,974 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 14:59:04,975 - INFO - {'updated': 'initiated stk query for ws_CO_11092024175823707796091410 827142 '}
2024-09-11 14:59:05,037 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:59:05,620 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 14:59:05,622 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer qNxywBAasDHNVHllgzmA3BRDjKdX'}"}
2024-09-11 14:59:05,623 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTQ1OTA1', 'Timestamp': '20240911145905', 'CheckoutRequestID': 'ws_CO_11092024175823707796091410'}"}
2024-09-11 14:59:05,624 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 14:59:06,316 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 14:59:06,316 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208795071894', 'CheckoutRequestID': 'ws_CO_11092024175823707796091410', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024175823707796091410 827142"}
2024-09-11 14:59:06,450 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 14:59:06,647 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 14:59:06,648 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 14:59:06,913 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 15:01:42,056 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 15:01:42,250 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 15:01:42,252 - INFO - {'updated': 'initiated stk query for ws_CO_11092024180108554726310816 899885 '}
2024-09-11 15:01:42,311 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:01:42,989 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 15:01:42,991 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer b0j26XgtT3xOlN7Pz1ZGQSPWA5Zm'}"}
2024-09-11 15:01:42,991 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTUwMTQy', 'Timestamp': '20240911150142', 'CheckoutRequestID': 'ws_CO_11092024180108554726310816'}"}
2024-09-11 15:01:42,992 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:01:43,658 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 15:01:43,658 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171717044', 'CheckoutRequestID': 'ws_CO_11092024180108554726310816', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024180108554726310816 899885"}
2024-09-11 15:01:43,787 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 15:01:44,085 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 15:01:44,086 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 15:01:44,356 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 15:02:14,104 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 15:02:14,274 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 15:02:14,274 - INFO - there is a test coming
2024-09-11 15:02:14,274 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 15:02:14,325 - INFO - {'updated_data': 'the data is now as 254719168491'}
2024-09-11 15:02:14,326 - INFO - the data is now as 254719168491
2024-09-11 15:02:14,343 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 15:02:14,344 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 15:02:14,345 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:02:15,054 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 15:02:15,056 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Fgx4LntGhcY1G9yAsVyKDzNPkdfZ'}"}
2024-09-11 15:02:15,058 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTUwMjE1', 'Timestamp': '20240911150215', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254719168491', 'PartyB': 899885, 'PhoneNumber': '254719168491', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054390', 'TransactionDesc': 'Some payment'}
2024-09-11 15:02:15,059 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:02:15,938 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 15:02:15,944 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89386987', 'CheckoutRequestID': 'ws_CO_11092024180215713719168491', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 15:04:48,636 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 15:04:48,822 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 15:04:48,822 - INFO - {'updated': 'initiated stk query for ws_CO_11092024180435501740740110 827142 '}
2024-09-11 15:04:48,888 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:04:49,474 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 15:04:49,476 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Y8OTS2eBrnFi6FV1ZdQBU2TtiEId'}"}
2024-09-11 15:04:49,476 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTUwNDQ4', 'Timestamp': '20240911150448', 'CheckoutRequestID': 'ws_CO_11092024180435501740740110'}"}
2024-09-11 15:04:49,478 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:04:50,101 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 15:04:50,102 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024180435501740740110', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024180435501740740110 827142"}
2024-09-11 15:04:50,104 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 15:10:22,979 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 15:10:23,295 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 15:10:23,296 - INFO - there is a test coming
2024-09-11 15:10:23,296 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 15:10:23,344 - INFO - {'updated_data': 'the data is now as 254721679436'}
2024-09-11 15:10:23,344 - INFO - the data is now as 254721679436
2024-09-11 15:10:23,360 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 15:10:23,360 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 15:10:23,361 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:10:24,318 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 15:10:24,320 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer wUKIqCYMWRHst0UpXKM2ZBiZgQvW'}"}
2024-09-11 15:10:24,321 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTUxMDI0', 'Timestamp': '20240911151024', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254721679436', 'PartyB': 899885, 'PhoneNumber': '254721679436', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054392', 'TransactionDesc': 'Some payment'}
2024-09-11 15:10:24,322 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:10:25,204 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 15:10:25,210 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5910260149', 'CheckoutRequestID': 'ws_CO_11092024181025014721679436', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 15:12:29,754 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077405943', 'CheckoutRequestID': 'ws_CO_11092024181216419723699127', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB88YAK4C'}, {'Name': 'TransactionDate', 'Value': 20240911181229}, {'Name': 'PhoneNumber', 'Value': 254723699127}]}}}}"}
2024-09-11 15:12:29,755 - INFO - {'updated_data': 'callback data began'}
2024-09-11 15:12:29,755 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077405943', 'CheckoutRequestID': 'ws_CO_11092024181216419723699127', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB88YAK4C'}, {'Name': 'TransactionDate', 'Value': 20240911181229}, {'Name': 'PhoneNumber', 'Value': 254723699127}]}}}}}
2024-09-11 15:12:29,910 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 15:12:30,182 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 15:12:30,184 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 15:12:30,948 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 15:14:46,331 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 15:14:46,500 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 15:14:46,501 - INFO - there is a test coming
2024-09-11 15:14:46,501 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 15:14:46,548 - INFO - {'updated_data': 'the data is now as 254713637466'}
2024-09-11 15:14:46,549 - INFO - the data is now as 254713637466
2024-09-11 15:14:46,573 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 15:14:46,573 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 15:14:46,574 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:14:47,192 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 15:14:47,194 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer lg4S4diQmuBUBgdpuAiRe5vuq1by'}"}
2024-09-11 15:14:47,194 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTUxNDQ3', 'Timestamp': '20240911151447', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '20000', 'PartyA': '254713637466', 'PartyB': 899885, 'PhoneNumber': '254713637466', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054487', 'TransactionDesc': 'Some payment'}
2024-09-11 15:14:47,195 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:14:48,111 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 15:14:48,117 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20358230', 'CheckoutRequestID': 'ws_CO_11092024181447863713637466', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 15:19:18,578 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 15:19:18,736 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 15:19:18,736 - INFO - {'updated': 'initiated stk query for ws_CO_11092024181907455721616751 899885 '}
2024-09-11 15:19:18,798 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:19:19,366 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 15:19:19,368 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer plc2o0ye20c7HoXryecGIXMpJAYE'}"}
2024-09-11 15:19:19,369 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTUxOTE4', 'Timestamp': '20240911151918', 'CheckoutRequestID': 'ws_CO_11092024181907455721616751'}"}
2024-09-11 15:19:19,379 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:19:20,162 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 15:19:20,163 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208795096877', 'CheckoutRequestID': 'ws_CO_11092024181907455721616751', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024181907455721616751 899885"}
2024-09-11 15:19:20,319 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 15:19:20,549 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 15:19:20,550 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 15:19:20,781 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 15:26:00,154 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20390934', 'CheckoutRequestID': 'ws_CO_11092024182551817759384816', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB290VI8G'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911182559}, {'Name': 'PhoneNumber', 'Value': 254759384816}]}}}}"}
2024-09-11 15:26:00,154 - INFO - {'updated_data': 'callback data began'}
2024-09-11 15:26:00,155 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20390934', 'CheckoutRequestID': 'ws_CO_11092024182551817759384816', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB290VI8G'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911182559}, {'Name': 'PhoneNumber', 'Value': 254759384816}]}}}}}
2024-09-11 15:26:00,324 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 15:26:01,040 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 15:26:01,041 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 15:26:01,259 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 15:26:05,623 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 15:26:05,758 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 15:26:05,759 - INFO - {'updated': 'initiated stk query for ws_CO_11092024182551817759384816 827142 '}
2024-09-11 15:26:05,824 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:26:06,441 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 15:26:06,443 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer tt1WIv2SpVkgdMmd8tE96ejZLkPv'}"}
2024-09-11 15:26:06,444 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTUyNjA1', 'Timestamp': '20240911152605', 'CheckoutRequestID': 'ws_CO_11092024182551817759384816'}"}
2024-09-11 15:26:06,445 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:26:07,200 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 15:26:07,201 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20390934', 'CheckoutRequestID': 'ws_CO_11092024182551817759384816', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024182551817759384816 827142"}
2024-09-11 15:26:07,320 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 15:26:07,545 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 15:26:07,547 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 15:26:07,760 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 15:27:14,621 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 15:27:14,783 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 15:27:14,783 - INFO - there is a test coming
2024-09-11 15:27:14,783 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 15:27:14,827 - INFO - {'updated_data': 'the data is now as 254720724852'}
2024-09-11 15:27:14,827 - INFO - the data is now as 254720724852
2024-09-11 15:27:14,844 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 15:27:14,845 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 15:27:14,846 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:27:15,404 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 15:27:15,406 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer G9sgoGDu6QmCpa97VIgTMAqvYnXB'}"}
2024-09-11 15:27:15,407 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTUyNzE1', 'Timestamp': '20240911152715', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '500', 'PartyA': '254720724852', 'PartyB': 827142, 'PhoneNumber': '254720724852', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-40319', 'TransactionDesc': 'Some payment'}
2024-09-11 15:27:15,408 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:27:16,186 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 15:27:16,193 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171748788', 'CheckoutRequestID': 'ws_CO_11092024182715961720724852', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 15:45:03,210 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 15:45:03,473 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 15:45:03,474 - INFO - there is a test coming
2024-09-11 15:45:03,474 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 15:45:03,521 - INFO - {'updated_data': 'the data is now as 254717032911'}
2024-09-11 15:45:03,521 - INFO - the data is now as 254717032911
2024-09-11 15:45:03,553 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 15:45:03,554 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 15:45:03,555 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:45:04,164 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 15:45:04,166 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer AfNKaubGOeZtn83E2drAxXBoTT0a'}"}
2024-09-11 15:45:04,167 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTU0NTA0', 'Timestamp': '20240911154504', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1829', 'PartyA': '254717032911', 'PartyB': 827142, 'PhoneNumber': '254717032911', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '204-16205', 'TransactionDesc': 'Some payment'}
2024-09-11 15:45:04,168 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 15:45:04,967 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 15:45:04,973 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171771408', 'CheckoutRequestID': 'ws_CO_11092024184504774717032911', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 15:46:14,009 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20452131', 'CheckoutRequestID': 'ws_CO_11092024184605710729094462', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB495236Y'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911184613}, {'Name': 'PhoneNumber', 'Value': 254729094462}]}}}}"}
2024-09-11 15:46:14,009 - INFO - {'updated_data': 'callback data began'}
2024-09-11 15:46:14,009 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20452131', 'CheckoutRequestID': 'ws_CO_11092024184605710729094462', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB495236Y'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911184613}, {'Name': 'PhoneNumber', 'Value': 254729094462}]}}}}}
2024-09-11 15:46:14,185 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 15:46:14,387 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 15:46:14,389 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 15:46:14,946 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 15:51:03,080 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171779136', 'CheckoutRequestID': 'ws_CO_11092024185050680702987388', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4871.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB39648CJ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911185102}, {'Name': 'PhoneNumber', 'Value': 254702987388}]}}}}"}
2024-09-11 15:51:03,080 - INFO - {'updated_data': 'callback data began'}
2024-09-11 15:51:03,080 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171779136', 'CheckoutRequestID': 'ws_CO_11092024185050680702987388', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4871.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB39648CJ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911185102}, {'Name': 'PhoneNumber', 'Value': 254702987388}]}}}}}
2024-09-11 15:51:03,242 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 15:51:03,982 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 15:51:03,984 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 15:51:04,269 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 16:06:33,237 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:06:33,369 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:06:33,370 - INFO - there is a test coming
2024-09-11 16:06:33,370 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 16:06:33,422 - INFO - {'updated_data': 'the data is now as 254713788543'}
2024-09-11 16:06:33,422 - INFO - the data is now as 254713788543
2024-09-11 16:06:33,438 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 16:06:33,438 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 16:06:33,440 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:06:34,127 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:06:34,129 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer xG41fUdnsrGEIbcL0vxZ6bYG9YBU'}"}
2024-09-11 16:06:34,130 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTYwNjM0', 'Timestamp': '20240911160634', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '4000', 'PartyA': '254713788543', 'PartyB': 827142, 'PhoneNumber': '254713788543', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '169-1369', 'TransactionDesc': 'Some payment'}
2024-09-11 16:06:34,131 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:06:35,227 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 16:06:35,234 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3183013403', 'CheckoutRequestID': 'ws_CO_11092024190634891713788543', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 16:06:50,036 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:06:50,238 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:06:50,239 - INFO - there is a test coming
2024-09-11 16:06:50,239 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 16:06:50,293 - INFO - {'updated_data': 'the data is now as 254702274045'}
2024-09-11 16:06:50,293 - INFO - the data is now as 254702274045
2024-09-11 16:06:50,309 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 16:06:50,309 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 16:06:50,311 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:06:51,151 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:06:51,153 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer KdbJ6Pd0RH4VxuaXRXfia0oPpe30'}"}
2024-09-11 16:06:51,154 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTYwNjUx', 'Timestamp': '20240911160651', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254702274045', 'PartyB': 899885, 'PhoneNumber': '254702274045', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Order No . 13041', 'TransactionDesc': 'Some payment'}
2024-09-11 16:06:51,155 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:06:52,022 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 16:06:52,030 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5910433069', 'CheckoutRequestID': 'ws_CO_11092024190651806702274045', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 16:06:56,168 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:06:56,369 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:06:56,370 - INFO - there is a test coming
2024-09-11 16:06:56,370 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 16:06:56,424 - INFO - {'updated_data': 'the data is now as 254720299020'}
2024-09-11 16:06:56,424 - INFO - the data is now as 254720299020
2024-09-11 16:06:56,442 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 16:06:56,442 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 16:06:56,443 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:06:57,196 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:06:57,198 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer jQKgOZVYfAnoe6GMiWXfTLy5GiJz'}"}
2024-09-11 16:06:57,199 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTYwNjU3', 'Timestamp': '20240911160657', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '17000', 'PartyA': '254720299020', 'PartyB': 827142, 'PhoneNumber': '254720299020', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-64306', 'TransactionDesc': 'Some payment'}
2024-09-11 16:06:57,200 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:06:58,568 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 16:06:58,574 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5910433442', 'CheckoutRequestID': 'ws_CO_11092024190657869720299020', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 16:08:02,301 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:08:02,442 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:08:02,443 - INFO - {'updated': 'initiated stk query for ws_CO_11092024190750740708022950 827142 '}
2024-09-11 16:08:02,507 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:08:03,165 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:08:03,167 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer wsjZLq5fkjy3yxIGbNwPHYr26pl9'}"}
2024-09-11 16:08:03,167 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTYwODAy', 'Timestamp': '20240911160802', 'CheckoutRequestID': 'ws_CO_11092024190750740708022950'}"}
2024-09-11 16:08:03,168 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:08:04,031 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 16:08:04,031 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5910436358', 'CheckoutRequestID': 'ws_CO_11092024190750740708022950', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024190750740708022950 827142"}
2024-09-11 16:08:04,151 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 16:08:04,708 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 16:08:04,709 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 16:08:05,014 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 16:08:14,999 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795160201', 'CheckoutRequestID': 'ws_CO_11092024190806272724808024', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 250.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB89A55P4'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911190814}, {'Name': 'PhoneNumber', 'Value': 254724808024}]}}}}"}
2024-09-11 16:08:15,000 - INFO - {'updated_data': 'callback data began'}
2024-09-11 16:08:15,000 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795160201', 'CheckoutRequestID': 'ws_CO_11092024190806272724808024', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 250.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB89A55P4'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911190814}, {'Name': 'PhoneNumber', 'Value': 254724808024}]}}}}}
2024-09-11 16:08:15,178 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 16:08:15,429 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 16:08:15,431 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 16:08:15,714 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 16:08:18,141 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:08:18,352 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:08:18,353 - INFO - {'updated': 'initiated stk query for ws_CO_11092024190806272724808024 899885 '}
2024-09-11 16:08:18,418 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:08:19,185 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:08:19,187 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer qJ6SIGct5IT9eSC3g75OuLPCoP22'}"}
2024-09-11 16:08:19,187 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTYwODE4', 'Timestamp': '20240911160818', 'CheckoutRequestID': 'ws_CO_11092024190806272724808024'}"}
2024-09-11 16:08:19,188 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:08:20,014 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 16:08:20,015 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208795160201', 'CheckoutRequestID': 'ws_CO_11092024190806272724808024', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024190806272724808024 899885"}
2024-09-11 16:08:20,162 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 16:08:20,437 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 16:08:20,439 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 16:08:20,784 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 16:09:16,131 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:09:16,303 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:09:16,303 - INFO - {'updated': 'initiated stk query for ws_CO_11092024190904705722317145 827142 '}
2024-09-11 16:09:16,370 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:09:17,206 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:09:17,208 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Y5FLJx638NF7mknRbtec7WM5GUqI'}"}
2024-09-11 16:09:17,208 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTYwOTE2', 'Timestamp': '20240911160916', 'CheckoutRequestID': 'ws_CO_11092024190904705722317145'}"}
2024-09-11 16:09:17,209 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:09:17,910 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 16:09:17,911 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024190904705722317145', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024190904705722317145 827142"}
2024-09-11 16:09:17,914 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 16:09:42,932 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:09:43,086 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:09:43,087 - INFO - there is a test coming
2024-09-11 16:09:43,087 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 16:09:43,133 - INFO - {'updated_data': 'the data is now as 254791219201'}
2024-09-11 16:09:43,133 - INFO - the data is now as 254791219201
2024-09-11 16:09:43,163 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 16:09:43,163 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 16:09:43,164 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:09:43,743 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:09:43,746 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer DoTChuAi6KLIxJ7PvN3LeIYIlGgm'}"}
2024-09-11 16:09:43,746 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTYwOTQz', 'Timestamp': '20240911160943', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254791219201', 'PartyB': 827142, 'PhoneNumber': '254791219201', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-25699', 'TransactionDesc': 'Some payment'}
2024-09-11 16:09:43,747 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:09:44,553 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 16:09:44,560 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171566008', 'CheckoutRequestID': 'ws_CO_11092024190944280791219201', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 16:15:35,343 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:15:35,476 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:15:35,476 - INFO - there is a test coming
2024-09-11 16:15:35,476 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 16:15:35,517 - INFO - {'updated_data': 'the data is now as 254712058473'}
2024-09-11 16:15:35,518 - INFO - the data is now as 254712058473
2024-09-11 16:15:35,535 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 16:15:35,535 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 16:15:35,536 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:15:36,168 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:15:36,170 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer v78z74cqYjlIHZqbo5XA3yOk1ajA'}"}
2024-09-11 16:15:36,171 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTYxNTM2', 'Timestamp': '20240911161536', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '295', 'PartyA': '254712058473', 'PartyB': 827142, 'PhoneNumber': '254712058473', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '264-28728', 'TransactionDesc': 'Some payment'}
2024-09-11 16:15:36,172 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:15:36,930 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 16:15:36,936 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171812043', 'CheckoutRequestID': 'ws_CO_11092024191536734712058473', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 16:22:51,664 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:22:51,858 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:22:51,858 - INFO - there is a test coming
2024-09-11 16:22:51,859 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 16:22:51,907 - INFO - {'updated_data': 'the data is now as 254722317145'}
2024-09-11 16:22:51,908 - INFO - the data is now as 254722317145
2024-09-11 16:22:51,933 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 16:22:51,933 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 16:22:51,934 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:22:52,558 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:22:52,560 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer IFqRgYcWJx55GmUZ5VNflDoHeLlE'}"}
2024-09-11 16:22:52,560 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTYyMjUy', 'Timestamp': '20240911162252', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1200', 'PartyA': '254722317145', 'PartyB': 899885, 'PhoneNumber': '254722317145', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054492', 'TransactionDesc': 'Some payment'}
2024-09-11 16:22:52,561 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:22:53,374 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 16:22:53,380 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b520575914', 'CheckoutRequestID': 'ws_CO_11092024192253156722317145', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 16:23:01,864 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b520575914', 'CheckoutRequestID': 'ws_CO_11092024192253156722317145', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB29DPMPS'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911192301}, {'Name': 'PhoneNumber', 'Value': 254722317145}]}}}}"}
2024-09-11 16:23:01,865 - INFO - {'updated_data': 'callback data began'}
2024-09-11 16:23:01,865 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b520575914', 'CheckoutRequestID': 'ws_CO_11092024192253156722317145', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB29DPMPS'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911192301}, {'Name': 'PhoneNumber', 'Value': 254722317145}]}}}}}
2024-09-11 16:23:02,056 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 16:23:02,303 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 16:23:02,305 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 16:23:02,575 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 16:23:04,403 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:23:04,565 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:23:04,565 - INFO - {'updated': 'initiated stk query for ws_CO_11092024192253156722317145 899885 '}
2024-09-11 16:23:04,629 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:23:05,231 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:23:05,233 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer qPFePv517KYtxhO9EvPf2WdjrbDj'}"}
2024-09-11 16:23:05,234 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTYyMzA0', 'Timestamp': '20240911162304', 'CheckoutRequestID': 'ws_CO_11092024192253156722317145'}"}
2024-09-11 16:23:05,237 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:23:05,915 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 16:23:05,916 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b520575914', 'CheckoutRequestID': 'ws_CO_11092024192253156722317145', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024192253156722317145 899885"}
2024-09-11 16:23:06,046 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 16:23:06,278 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 16:23:06,280 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 16:23:06,845 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 16:23:12,835 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:23:12,974 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:23:12,975 - INFO - there is a test coming
2024-09-11 16:23:12,975 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 16:23:13,022 - INFO - {'updated_data': 'the data is now as 254718368941'}
2024-09-11 16:23:13,022 - INFO - the data is now as 254718368941
2024-09-11 16:23:13,040 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 16:23:13,040 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 16:23:13,041 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:23:13,625 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:23:13,628 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 8DADJ9VLXGrBWxZkaS4NLLRnIAtY'}"}
2024-09-11 16:23:13,629 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTYyMzEz', 'Timestamp': '20240911162313', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '6000', 'PartyA': '254718368941', 'PartyB': 899885, 'PhoneNumber': '254718368941', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054518', 'TransactionDesc': 'Some payment'}
2024-09-11 16:23:13,630 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:23:14,502 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 16:23:14,509 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077497832', 'CheckoutRequestID': 'ws_CO_11092024192314273718368941', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 16:23:25,188 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077497832', 'CheckoutRequestID': 'ws_CO_11092024192314273718368941', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 6000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB59DSSGB'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911192324}, {'Name': 'PhoneNumber', 'Value': 254718368941}]}}}}"}
2024-09-11 16:23:25,189 - INFO - {'updated_data': 'callback data began'}
2024-09-11 16:23:25,189 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077497832', 'CheckoutRequestID': 'ws_CO_11092024192314273718368941', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 6000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB59DSSGB'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911192324}, {'Name': 'PhoneNumber', 'Value': 254718368941}]}}}}}
2024-09-11 16:23:25,354 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 16:23:25,531 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:23:25,648 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:23:25,649 - INFO - {'updated': 'initiated stk query for ws_CO_11092024192314273718368941 899885 '}
2024-09-11 16:23:25,727 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:23:25,854 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 16:23:25,858 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 16:23:26,095 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 16:23:26,310 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:23:26,313 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer ApLmvArqFA134nvTn5d93mNduSpd'}"}
2024-09-11 16:23:26,313 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTYyMzI1', 'Timestamp': '20240911162325', 'CheckoutRequestID': 'ws_CO_11092024192314273718368941'}"}
2024-09-11 16:23:26,315 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:23:27,046 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 16:23:27,047 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077497832', 'CheckoutRequestID': 'ws_CO_11092024192314273718368941', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024192314273718368941 899885"}
2024-09-11 16:23:27,187 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 16:23:27,746 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 16:23:27,748 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 16:23:28,300 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 16:24:27,636 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:24:27,780 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:24:27,781 - INFO - there is a test coming
2024-09-11 16:24:27,781 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 16:24:27,832 - INFO - {'updated_data': 'the data is now as 254705090275'}
2024-09-11 16:24:27,832 - INFO - the data is now as 254705090275
2024-09-11 16:24:27,852 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 16:24:27,853 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 16:24:27,854 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:24:28,513 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:24:28,515 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer uZLzp5ivif2uVeyuWDjn3ZSq8mdr'}"}
2024-09-11 16:24:28,515 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTYyNDI4', 'Timestamp': '20240911162428', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '4500', 'PartyA': '254705090275', 'PartyB': 899885, 'PhoneNumber': '254705090275', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054519', 'TransactionDesc': 'Some payment'}
2024-09-11 16:24:28,516 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:24:30,375 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 16:24:30,380 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20579768', 'CheckoutRequestID': 'ws_CO_11092024192429060705090275', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 16:35:39,199 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585056587296', 'CheckoutRequestID': 'ws_CO_11092024193516755723778155', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2029.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB29GRKFU'}, {'Name': 'TransactionDate', 'Value': 20240911193538}, {'Name': 'PhoneNumber', 'Value': 254723778155}]}}}}"}
2024-09-11 16:35:39,200 - INFO - {'updated_data': 'callback data began'}
2024-09-11 16:35:39,200 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585056587296', 'CheckoutRequestID': 'ws_CO_11092024193516755723778155', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2029.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB29GRKFU'}, {'Name': 'TransactionDate', 'Value': 20240911193538}, {'Name': 'PhoneNumber', 'Value': 254723778155}]}}}}}
2024-09-11 16:35:39,363 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 16:35:40,055 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 16:35:40,056 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 16:35:40,264 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 16:37:33,200 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20628515', 'CheckoutRequestID': 'ws_CO_11092024193701215768157063', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-11 16:37:33,200 - INFO - {'updated_data': 'callback data began'}
2024-09-11 16:37:33,200 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20628515', 'CheckoutRequestID': 'ws_CO_11092024193701215768157063', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-11 16:37:33,385 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 16:37:33,578 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 16:37:33,588 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 16:37:33,830 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 16:47:25,280 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20669103', 'CheckoutRequestID': 'ws_CO_11092024194720499721791607', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 16:47:25,280 - INFO - {'updated_data': 'callback data began'}
2024-09-11 16:47:25,280 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20669103', 'CheckoutRequestID': 'ws_CO_11092024194720499721791607', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 16:47:25,446 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 16:47:26,018 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 16:47:26,019 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 16:47:26,347 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 16:47:34,286 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:47:34,462 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:47:34,463 - INFO - there is a test coming
2024-09-11 16:47:34,463 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 16:47:34,506 - INFO - {'updated_data': 'the data is now as 254768157063'}
2024-09-11 16:47:34,506 - INFO - the data is now as 254768157063
2024-09-11 16:47:34,522 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 16:47:34,523 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 16:47:34,524 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:47:35,229 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:47:35,231 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 0btaWXhm6hKaUjblIaI5GXtMHKwD'}"}
2024-09-11 16:47:35,231 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTY0NzM1', 'Timestamp': '20240911164735', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254768157063', 'PartyB': 827142, 'PhoneNumber': '254768157063', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '431-2072', 'TransactionDesc': 'Some payment'}
2024-09-11 16:47:35,233 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:47:36,145 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 16:47:36,153 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208795221229', 'CheckoutRequestID': 'ws_CO_11092024194735791768157063', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 16:47:49,068 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:47:49,237 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:47:49,237 - INFO - there is a test coming
2024-09-11 16:47:49,238 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 16:47:49,286 - INFO - {'updated_data': 'the data is now as 254115052081'}
2024-09-11 16:47:49,287 - INFO - the data is now as 254115052081
2024-09-11 16:47:49,304 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 16:47:49,305 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 16:47:49,306 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:47:49,930 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:47:49,932 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer jRc5OMkbUz1GpdTAO4s4hhj5mWws'}"}
2024-09-11 16:47:49,932 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTY0NzQ5', 'Timestamp': '20240911164749', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254115052081', 'PartyB': 827142, 'PhoneNumber': '254115052081', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-35974', 'TransactionDesc': 'Some payment'}
2024-09-11 16:47:49,933 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:47:51,042 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 16:47:51,049 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5910585297', 'CheckoutRequestID': 'ws_CO_11092024194750571115052081', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 16:53:29,718 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b10252543', 'CheckoutRequestID': 'ws_CO_11092024195322016740267007', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 32500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB99KTQG9'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911195329}, {'Name': 'PhoneNumber', 'Value': 254740267007}]}}}}"}
2024-09-11 16:53:29,719 - INFO - {'updated_data': 'callback data began'}
2024-09-11 16:53:29,719 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b10252543', 'CheckoutRequestID': 'ws_CO_11092024195322016740267007', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 32500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB99KTQG9'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911195329}, {'Name': 'PhoneNumber', 'Value': 254740267007}]}}}}}
2024-09-11 16:53:29,873 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 16:53:30,073 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 16:53:30,074 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 16:53:30,348 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 16:53:58,375 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077548266', 'CheckoutRequestID': 'ws_CO_11092024195340277705884891', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}"}
2024-09-11 16:53:58,376 - INFO - {'updated_data': 'callback data began'}
2024-09-11 16:53:58,376 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077548266', 'CheckoutRequestID': 'ws_CO_11092024195340277705884891', 'ResultCode': 1, 'ResultDesc': 'The balance is insufficient for the transaction.'}}}}
2024-09-11 16:53:58,551 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 16:53:59,049 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 16:53:59,050 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 16:53:59,291 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 16:54:35,628 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:54:35,873 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:54:35,874 - INFO - there is a test coming
2024-09-11 16:54:35,874 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 16:54:35,919 - INFO - {'updated_data': 'the data is now as 254799829690'}
2024-09-11 16:54:35,919 - INFO - the data is now as 254799829690
2024-09-11 16:54:35,936 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 16:54:35,936 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 16:54:35,941 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:54:36,525 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:54:36,527 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 4yLOZakLkpW7CBU5mCUY8TyAG0Qo'}"}
2024-09-11 16:54:36,527 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTY1NDM2', 'Timestamp': '20240911165436', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5500', 'PartyA': '254799829690', 'PartyB': 899885, 'PhoneNumber': '254799829690', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054496', 'TransactionDesc': 'Some payment'}
2024-09-11 16:54:36,528 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:54:37,349 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 16:54:37,355 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172363785', 'CheckoutRequestID': 'ws_CO_11092024195437091799829690', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 16:54:48,110 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:54:48,248 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 16:54:48,248 - INFO - {'updated': 'initiated stk query for ws_CO_11092024195437091799829690 899885 '}
2024-09-11 16:54:48,312 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:54:48,900 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 16:54:48,902 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer dBcNNcqAYmCIm0GGdGljnwvmLsvm'}"}
2024-09-11 16:54:48,902 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTY1NDQ4', 'Timestamp': '20240911165448', 'CheckoutRequestID': 'ws_CO_11092024195437091799829690'}"}
2024-09-11 16:54:48,903 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 16:54:49,543 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 16:54:49,544 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024195437091799829690', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024195437091799829690 899885"}
2024-09-11 16:54:49,546 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 16:55:43,280 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585056667602', 'CheckoutRequestID': 'ws_CO_11092024195534632725553247', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB09LAXQG'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911195542}, {'Name': 'PhoneNumber', 'Value': 254725553247}]}}}}"}
2024-09-11 16:55:43,280 - INFO - {'updated_data': 'callback data began'}
2024-09-11 16:55:43,280 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585056667602', 'CheckoutRequestID': 'ws_CO_11092024195534632725553247', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB09LAXQG'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911195542}, {'Name': 'PhoneNumber', 'Value': 254725553247}]}}}}}
2024-09-11 16:55:43,454 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 16:55:43,668 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 16:55:43,669 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 16:55:44,189 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 16:55:47,346 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:55:47,375 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 16:55:47,376 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 16:55:55,538 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 16:55:55,556 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 16:55:55,557 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 17:03:34,574 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:03:34,745 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:03:34,746 - INFO - there is a test coming
2024-09-11 17:03:34,746 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 17:03:34,788 - INFO - {'updated_data': 'the data is now as 254724460033'}
2024-09-11 17:03:34,788 - INFO - the data is now as 254724460033
2024-09-11 17:03:34,811 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 17:03:34,811 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 17:03:34,812 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:03:35,744 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:03:35,746 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer DqO3rwhxhZgcUa4GRN5q4bybR9TV'}"}
2024-09-11 17:03:35,746 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTcwMzM1', 'Timestamp': '20240911170335', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254724460033', 'PartyB': 899885, 'PhoneNumber': '254724460033', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Order No . 14022', 'TransactionDesc': 'Some payment'}
2024-09-11 17:03:35,756 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:03:36,803 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 17:03:36,809 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20733219', 'CheckoutRequestID': 'ws_CO_11092024200336472724460033', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 17:04:19,268 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171651245', 'CheckoutRequestID': 'ws_CO_11092024200406485723280022', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB19N4NCZ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911200418}, {'Name': 'PhoneNumber', 'Value': 254723280022}]}}}}"}
2024-09-11 17:04:19,269 - INFO - {'updated_data': 'callback data began'}
2024-09-11 17:04:19,269 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171651245', 'CheckoutRequestID': 'ws_CO_11092024200406485723280022', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB19N4NCZ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911200418}, {'Name': 'PhoneNumber', 'Value': 254723280022}]}}}}}
2024-09-11 17:04:19,451 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 17:04:19,945 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 17:04:19,946 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 17:04:20,557 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 17:08:09,004 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b10309610', 'CheckoutRequestID': 'ws_CO_11092024200757464720405515', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB99NX199'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911200808}, {'Name': 'PhoneNumber', 'Value': 254720405515}]}}}}"}
2024-09-11 17:08:09,004 - INFO - {'updated_data': 'callback data began'}
2024-09-11 17:08:09,004 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b10309610', 'CheckoutRequestID': 'ws_CO_11092024200757464720405515', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB99NX199'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911200808}, {'Name': 'PhoneNumber', 'Value': 254720405515}]}}}}}
2024-09-11 17:08:09,164 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 17:08:09,744 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 17:08:09,746 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 17:08:09,994 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 17:09:27,521 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:09:27,682 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:09:27,682 - INFO - there is a test coming
2024-09-11 17:09:27,682 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 17:09:27,738 - INFO - {'updated_data': 'the data is now as 254725282252'}
2024-09-11 17:09:27,738 - INFO - the data is now as 254725282252
2024-09-11 17:09:27,756 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 17:09:27,756 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 17:09:27,757 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:09:28,507 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:09:28,509 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer GyoPKOHaicJfddHSuTVfSbMzw8VV'}"}
2024-09-11 17:09:28,509 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTcwOTI4', 'Timestamp': '20240911170928', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254725282252', 'PartyB': 899885, 'PhoneNumber': '254725282252', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054559', 'TransactionDesc': 'Some payment'}
2024-09-11 17:09:28,510 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:09:29,595 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 17:09:29,607 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171898588', 'CheckoutRequestID': 'ws_CO_11092024200929092725282252', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 17:09:50,704 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:09:50,879 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:09:50,879 - INFO - there is a test coming
2024-09-11 17:09:50,879 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 17:09:50,924 - INFO - {'updated_data': 'the data is now as 254721662005'}
2024-09-11 17:09:50,924 - INFO - the data is now as 254721662005
2024-09-11 17:09:50,968 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 17:09:50,968 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 17:09:50,972 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:09:51,552 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:09:51,554 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer EmnOqYUzU9800GjJ0wek4YT4of0t'}"}
2024-09-11 17:09:51,555 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTcwOTUx', 'Timestamp': '20240911170951', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '4000', 'PartyA': '254721662005', 'PartyB': 899885, 'PhoneNumber': '254721662005', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054497', 'TransactionDesc': 'Some payment'}
2024-09-11 17:09:51,556 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:09:52,413 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 17:09:52,419 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b520759755', 'CheckoutRequestID': 'ws_CO_11092024200952152721662005', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 17:10:56,183 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:10:56,310 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:10:56,311 - INFO - {'updated': 'initiated stk query for ws_CO_11092024201037971769226627 899885 '}
2024-09-11 17:10:56,380 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:10:57,059 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:10:57,060 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 3ExujM9BWhO7SBGtEaTfMN66idW4'}"}
2024-09-11 17:10:57,061 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTcxMDU2', 'Timestamp': '20240911171056', 'CheckoutRequestID': 'ws_CO_11092024201037971769226627'}"}
2024-09-11 17:10:57,062 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:10:57,695 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 17:10:57,696 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171661385', 'CheckoutRequestID': 'ws_CO_11092024201037971769226627', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024201037971769226627 899885"}
2024-09-11 17:10:57,817 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 17:10:58,005 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 17:10:58,007 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 17:10:58,233 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 17:12:56,236 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:12:56,406 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:12:56,407 - INFO - there is a test coming
2024-09-11 17:12:56,407 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 17:12:56,455 - INFO - {'updated_data': 'the data is now as 254725282252'}
2024-09-11 17:12:56,455 - INFO - the data is now as 254725282252
2024-09-11 17:12:56,475 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 17:12:56,475 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 17:12:56,477 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:12:57,091 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:12:57,093 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer KMKTCESW5d1elbKXF8L4z0dh6YyT'}"}
2024-09-11 17:12:57,093 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTcxMjU3', 'Timestamp': '20240911171257', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254725282252', 'PartyB': 899885, 'PhoneNumber': '254725282252', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054528', 'TransactionDesc': 'Some payment'}
2024-09-11 17:12:57,095 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:12:59,281 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 17:12:59,287 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585056735715', 'CheckoutRequestID': 'ws_CO_11092024201257611725282252', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 17:13:52,030 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:13:52,181 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:13:52,182 - INFO - there is a test coming
2024-09-11 17:13:52,185 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 17:13:52,234 - INFO - {'updated_data': 'the data is now as 254720970193'}
2024-09-11 17:13:52,235 - INFO - the data is now as 254720970193
2024-09-11 17:13:52,254 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 17:13:52,254 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 17:13:52,255 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:13:52,932 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:13:52,934 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer GuqN3uChiosKin1Gy8PotRAtdHtj'}"}
2024-09-11 17:13:52,934 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTcxMzUy', 'Timestamp': '20240911171352', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254720970193', 'PartyB': 827142, 'PhoneNumber': '254720970193', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-30171', 'TransactionDesc': 'Some payment'}
2024-09-11 17:13:52,935 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:13:55,247 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 17:13:55,254 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20772900', 'CheckoutRequestID': 'ws_CO_11092024201353473720970193', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 17:14:13,818 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20772900', 'CheckoutRequestID': 'ws_CO_11092024201353473720970193', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 17:14:13,818 - INFO - {'updated_data': 'callback data began'}
2024-09-11 17:14:13,818 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20772900', 'CheckoutRequestID': 'ws_CO_11092024201353473720970193', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 17:14:14,047 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 17:14:14,254 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 17:14:14,255 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 17:14:14,513 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 17:14:16,004 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:14:16,138 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:14:16,139 - INFO - {'updated': 'initiated stk query for ws_CO_11092024201353473720970193 827142 '}
2024-09-11 17:14:16,198 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:14:16,770 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:14:16,772 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer dauOhWQJ6So9NG5J9wtLr80cT5sy'}"}
2024-09-11 17:14:16,772 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTcxNDE2', 'Timestamp': '20240911171416', 'CheckoutRequestID': 'ws_CO_11092024201353473720970193'}"}
2024-09-11 17:14:16,778 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:14:17,492 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-11 17:14:17,492 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20772900', 'CheckoutRequestID': 'ws_CO_11092024201353473720970193', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_11092024201353473720970193 827142"}
2024-09-11 17:14:17,616 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 17:14:18,156 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 17:14:18,157 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 17:14:18,670 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 17:14:36,265 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077581330', 'CheckoutRequestID': 'ws_CO_11092024201434084720970193', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-11 17:14:36,265 - INFO - {'updated_data': 'callback data began'}
2024-09-11 17:14:36,265 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077581330', 'CheckoutRequestID': 'ws_CO_11092024201434084720970193', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-11 17:14:36,439 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 17:14:36,963 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 17:14:36,964 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 17:14:37,207 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 17:14:45,385 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:14:45,541 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:14:45,542 - INFO - {'updated': 'initiated stk query for ws_CO_11092024201434084720970193 827142 '}
2024-09-11 17:14:45,627 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:14:46,219 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:14:46,221 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer eiHqqRdORao0UX2blSFAS8IeKGML'}"}
2024-09-11 17:14:46,222 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTcxNDQ1', 'Timestamp': '20240911171445', 'CheckoutRequestID': 'ws_CO_11092024201434084720970193'}"}
2024-09-11 17:14:46,223 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:14:46,856 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 376
2024-09-11 17:14:46,857 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077581330', 'CheckoutRequestID': 'ws_CO_11092024201434084720970193', 'ResultCode': '1037', 'ResultDesc': 'DS timeout user cannot be reached'} for ws_CO_11092024201434084720970193 827142"}
2024-09-11 17:14:46,991 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 17:14:47,183 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 17:14:47,184 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 17:14:47,422 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 17:16:20,523 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89576532', 'CheckoutRequestID': 'ws_CO_11092024201600998721385140', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 12000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB99PK7FX'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911201619}, {'Name': 'PhoneNumber', 'Value': 254721385140}]}}}}"}
2024-09-11 17:16:20,524 - INFO - {'updated_data': 'callback data began'}
2024-09-11 17:16:20,524 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89576532', 'CheckoutRequestID': 'ws_CO_11092024201600998721385140', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 12000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB99PK7FX'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911201619}, {'Name': 'PhoneNumber', 'Value': 254721385140}]}}}}}
2024-09-11 17:16:20,709 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 17:16:21,119 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 17:16:21,120 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 17:16:21,693 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 17:16:22,605 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:16:22,723 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:16:22,723 - INFO - {'updated': 'initiated stk query for ws_CO_11092024201600998721385140 899885 '}
2024-09-11 17:16:22,787 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:16:23,383 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:16:23,385 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer KwAvq3ZHoSYOZkvyNz4u6qWwSqYl'}"}
2024-09-11 17:16:23,386 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTcxNjIy', 'Timestamp': '20240911171622', 'CheckoutRequestID': 'ws_CO_11092024201600998721385140'}"}
2024-09-11 17:16:23,387 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:16:24,119 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 17:16:24,120 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89576532', 'CheckoutRequestID': 'ws_CO_11092024201600998721385140', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024201600998721385140 899885"}
2024-09-11 17:16:24,246 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 17:16:24,775 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 17:16:24,776 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 17:16:25,277 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 17:16:49,298 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:16:49,477 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:16:49,478 - INFO - there is a test coming
2024-09-11 17:16:49,478 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 17:16:49,521 - INFO - {'updated_data': 'the data is now as 254720970193'}
2024-09-11 17:16:49,521 - INFO - the data is now as 254720970193
2024-09-11 17:16:49,555 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 17:16:49,556 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 17:16:49,557 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:16:50,230 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:16:50,232 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 3uTkDBui4y7vWAkbcSS3970eT0J2'}"}
2024-09-11 17:16:50,232 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTcxNjUw', 'Timestamp': '20240911171650', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254720970193', 'PartyB': 827142, 'PhoneNumber': '254720970193', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-30171', 'TransactionDesc': 'Some payment'}
2024-09-11 17:16:50,233 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:16:51,203 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 17:16:51,209 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3183279150', 'CheckoutRequestID': 'ws_CO_11092024201650960720970193', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 17:17:02,071 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:17:02,271 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:17:02,272 - INFO - {'updated': 'initiated stk query for ws_CO_11092024201650960720970193 827142 '}
2024-09-11 17:17:02,338 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:17:02,920 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:17:02,922 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer nYQRXlUfIOhnB4AX1pN8t70rzcse'}"}
2024-09-11 17:17:02,923 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTcxNzAy', 'Timestamp': '20240911171702', 'CheckoutRequestID': 'ws_CO_11092024201650960720970193'}"}
2024-09-11 17:17:02,924 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:17:03,661 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 17:17:03,661 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3183279150', 'CheckoutRequestID': 'ws_CO_11092024201650960720970193', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024201650960720970193 827142"}
2024-09-11 17:17:03,798 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 17:17:04,318 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 17:17:04,319 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 17:17:04,850 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 17:18:47,443 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:18:47,593 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:18:47,594 - INFO - {'updated': 'initiated stk query for ws_CO_11092024201816236728511771 827142 '}
2024-09-11 17:18:47,658 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:18:48,336 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:18:48,338 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer u975QG6Vz23LTTFaH1rQknJYPNSW'}"}
2024-09-11 17:18:48,339 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTcxODQ3', 'Timestamp': '20240911171847', 'CheckoutRequestID': 'ws_CO_11092024201816236728511771'}"}
2024-09-11 17:18:48,340 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:18:48,972 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 17:18:48,973 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171673109', 'CheckoutRequestID': 'ws_CO_11092024201816236728511771', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024201816236728511771 827142"}
2024-09-11 17:18:49,103 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 17:18:49,623 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 17:18:49,624 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 17:18:49,833 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 17:18:54,956 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:18:55,083 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:18:55,084 - INFO - {'updated': 'initiated stk query for ws_CO_11092024201816236728511771 827142 '}
2024-09-11 17:18:55,147 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:18:55,704 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:18:55,706 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer kr7lM3ny3hMmU2SFuXNTpsvl7hzS'}"}
2024-09-11 17:18:55,706 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTcxODU1', 'Timestamp': '20240911171855', 'CheckoutRequestID': 'ws_CO_11092024201816236728511771'}"}
2024-09-11 17:18:55,707 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:18:56,339 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 17:18:56,343 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171673109', 'CheckoutRequestID': 'ws_CO_11092024201816236728511771', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024201816236728511771 827142"}
2024-09-11 17:18:56,475 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 17:18:56,675 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 17:18:56,677 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 17:18:57,209 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 17:19:39,966 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171674953', 'CheckoutRequestID': 'ws_CO_11092024201931310701576474', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB89Q7WJK'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911201939}, {'Name': 'PhoneNumber', 'Value': 254701576474}]}}}}"}
2024-09-11 17:19:39,967 - INFO - {'updated_data': 'callback data began'}
2024-09-11 17:19:39,967 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171674953', 'CheckoutRequestID': 'ws_CO_11092024201931310701576474', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB89Q7WJK'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911201939}, {'Name': 'PhoneNumber', 'Value': 254701576474}]}}}}}
2024-09-11 17:19:40,154 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 17:19:40,369 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 17:19:40,370 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 17:19:40,605 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 17:24:50,918 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:24:51,083 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:24:51,083 - INFO - there is a test coming
2024-09-11 17:24:51,083 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 17:24:51,126 - INFO - {'updated_data': 'the data is now as 254745450548'}
2024-09-11 17:24:51,126 - INFO - the data is now as 254745450548
2024-09-11 17:24:51,142 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 17:24:51,143 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 17:24:51,144 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:24:51,946 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:24:51,948 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer RGqD94bppIFGw3MrszxZsj0sloBc'}"}
2024-09-11 17:24:51,949 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTcyNDUx', 'Timestamp': '20240911172451', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254745450548', 'PartyB': 899885, 'PhoneNumber': '254745450548', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054561', 'TransactionDesc': 'Some payment'}
2024-09-11 17:24:51,950 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:25:40,589 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 17:25:40,599 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b520816980', 'CheckoutRequestID': 'ws_CO_11092024202537910745450548', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 17:29:10,164 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:29:10,344 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:29:10,344 - INFO - there is a test coming
2024-09-11 17:29:10,345 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 17:29:10,398 - INFO - {'updated_data': 'the data is now as 254729928688'}
2024-09-11 17:29:10,398 - INFO - the data is now as 254729928688
2024-09-11 17:29:10,417 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 17:29:10,417 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 17:29:10,418 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:29:10,979 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:29:10,981 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Uw7Pj3usWnMYwFqQ0QkvRfgGGlOG'}"}
2024-09-11 17:29:10,982 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTcyOTEw', 'Timestamp': '20240911172910', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '15000', 'PartyA': '254729928688', 'PartyB': 899885, 'PhoneNumber': '254729928688', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'BA0624185-1726075748911', 'TransactionDesc': 'Some payment'}
2024-09-11 17:29:10,983 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:29:12,088 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 17:29:12,097 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208795295820', 'CheckoutRequestID': 'ws_CO_11092024202911612729928688', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 17:29:23,053 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:29:23,269 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:29:23,270 - INFO - {'updated': 'initiated stk query for ws_CO_11092024202911612729928688 899885 '}
2024-09-11 17:29:23,338 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:29:23,997 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:29:23,999 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer aGwHpZgv5TJFG1mzHRDfcI9joEDa'}"}
2024-09-11 17:29:23,999 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTcyOTIz', 'Timestamp': '20240911172923', 'CheckoutRequestID': 'ws_CO_11092024202911612729928688'}"}
2024-09-11 17:29:24,001 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:29:24,747 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 17:29:24,748 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024202911612729928688', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024202911612729928688 899885"}
2024-09-11 17:29:24,750 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 17:31:13,999 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:31:14,141 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:31:14,142 - INFO - there is a test coming
2024-09-11 17:31:14,142 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 17:31:14,187 - INFO - {'updated_data': 'the data is now as 254794750526'}
2024-09-11 17:31:14,187 - INFO - the data is now as 254794750526
2024-09-11 17:31:14,203 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 17:31:14,203 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 17:31:14,204 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:31:14,766 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:31:14,768 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ImuvjaVM2DIalXzVfVWGqDGm72SS'}"}
2024-09-11 17:31:14,769 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTczMTE0', 'Timestamp': '20240911173114', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254794750526', 'PartyB': 827142, 'PhoneNumber': '254794750526', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-28325', 'TransactionDesc': 'Some payment'}
2024-09-11 17:31:14,770 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:31:16,204 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 17:31:16,209 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171942557', 'CheckoutRequestID': 'ws_CO_11092024203115310794750526', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 17:31:35,744 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:31:35,935 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:31:35,936 - INFO - {'updated': 'initiated stk query for ws_CO_11092024203112756722719403 899885 '}
2024-09-11 17:31:36,010 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:31:36,584 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:31:36,586 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer cN5y6UtHOdPpLXxOdEJUDzKtmiqP'}"}
2024-09-11 17:31:36,587 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTczMTM2', 'Timestamp': '20240911173136', 'CheckoutRequestID': 'ws_CO_11092024203112756722719403'}"}
2024-09-11 17:31:36,588 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:32:58,536 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 17:32:58,537 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6171942444', 'CheckoutRequestID': 'ws_CO_11092024203112756722719403', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024203112756722719403 899885"}
2024-09-11 17:32:58,663 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 17:32:59,136 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 17:32:59,138 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 17:32:59,385 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 17:33:16,945 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:33:17,103 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:33:17,104 - INFO - there is a test coming
2024-09-11 17:33:17,104 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 17:33:17,152 - INFO - {'updated_data': 'the data is now as 254721153278'}
2024-09-11 17:33:17,153 - INFO - the data is now as 254721153278
2024-09-11 17:33:17,180 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 17:33:17,180 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 17:33:17,181 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:33:17,851 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:33:17,853 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer HNteuRjEbn4K7CcVjMQbBaJCsgnZ'}"}
2024-09-11 17:33:17,854 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTczMzE3', 'Timestamp': '20240911173317', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '4000', 'PartyA': '254721153278', 'PartyB': 827142, 'PhoneNumber': '254721153278', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-22179', 'TransactionDesc': 'Some payment'}
2024-09-11 17:33:17,862 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:33:18,844 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 17:33:18,850 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171709504', 'CheckoutRequestID': 'ws_CO_11092024203318399721153278', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 17:33:49,781 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:33:49,960 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:33:49,961 - INFO - {'updated': 'initiated stk query for ws_CO_11092024203318399721153278 827142 '}
2024-09-11 17:33:50,020 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:33:57,984 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:33:57,986 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Gouu2cl1uYStbqDG2PJCxvSKpGMR'}"}
2024-09-11 17:33:57,986 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTczMzUw', 'Timestamp': '20240911173350', 'CheckoutRequestID': 'ws_CO_11092024203318399721153278'}"}
2024-09-11 17:33:57,987 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:33:58,598 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 17:33:58,599 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171709504', 'CheckoutRequestID': 'ws_CO_11092024203318399721153278', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024203318399721153278 827142"}
2024-09-11 17:33:58,727 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 17:33:58,928 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 17:33:58,929 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 17:33:59,152 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 17:41:52,619 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20881133', 'CheckoutRequestID': 'ws_CO_11092024204139538721318977', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 8000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB19UEZIP'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911204151}, {'Name': 'PhoneNumber', 'Value': 254721318977}]}}}}"}
2024-09-11 17:41:52,619 - INFO - {'updated_data': 'callback data began'}
2024-09-11 17:41:52,619 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20881133', 'CheckoutRequestID': 'ws_CO_11092024204139538721318977', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 8000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB19UEZIP'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911204151}, {'Name': 'PhoneNumber', 'Value': 254721318977}]}}}}}
2024-09-11 17:41:52,833 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 17:41:53,143 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 17:41:53,144 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 17:41:53,512 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 17:42:07,799 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:42:07,919 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:42:07,920 - INFO - {'updated': 'initiated stk query for ws_CO_11092024204139538721318977 899885 '}
2024-09-11 17:42:07,981 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:42:08,763 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:42:08,765 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 3G85auALbwHHnbklJHekyNgdlzMN'}"}
2024-09-11 17:42:08,766 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTc0MjA3', 'Timestamp': '20240911174207', 'CheckoutRequestID': 'ws_CO_11092024204139538721318977'}"}
2024-09-11 17:42:08,771 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:42:09,620 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 17:42:09,621 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20881133', 'CheckoutRequestID': 'ws_CO_11092024204139538721318977', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024204139538721318977 899885"}
2024-09-11 17:42:09,747 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 17:42:10,033 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 17:42:10,035 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 17:42:11,054 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 17:42:47,895 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:42:48,052 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:42:48,053 - INFO - there is a test coming
2024-09-11 17:42:48,053 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 17:42:48,098 - INFO - {'updated_data': 'the data is now as 254722320392'}
2024-09-11 17:42:48,099 - INFO - the data is now as 254722320392
2024-09-11 17:42:48,120 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 17:42:48,120 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 17:42:48,121 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:42:49,085 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:42:49,088 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 56SjXO6RRvu5ePYBnv5eJaSJUrpD'}"}
2024-09-11 17:42:49,088 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTc0MjQ5', 'Timestamp': '20240911174249', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '100', 'PartyA': '254722320392', 'PartyB': 899885, 'PhoneNumber': '254722320392', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054564', 'TransactionDesc': 'Some payment'}
2024-09-11 17:42:49,089 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:42:50,172 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 17:42:50,179 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b520887004', 'CheckoutRequestID': 'ws_CO_11092024204249816722320392', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 17:44:40,279 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:44:40,432 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 17:44:40,433 - INFO - there is a test coming
2024-09-11 17:44:40,433 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 17:44:40,503 - INFO - {'updated_data': 'the data is now as 254724032207'}
2024-09-11 17:44:40,504 - INFO - the data is now as 254724032207
2024-09-11 17:44:40,520 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 17:44:40,520 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 17:44:40,522 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:44:42,557 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 17:44:42,559 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer 7so389RlN5Kjg9muSwnYYQduwdpj'}"}
2024-09-11 17:44:42,560 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTc0NDQy', 'Timestamp': '20240911174442', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2060', 'PartyA': '254724032207', 'PartyB': 899885, 'PhoneNumber': '254724032207', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054565', 'TransactionDesc': 'Some payment'}
2024-09-11 17:44:42,561 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 17:44:43,748 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 17:44:43,757 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc20896619', 'CheckoutRequestID': 'ws_CO_11092024204443299724032207', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 17:46:35,122 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 17:46:35,141 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 17:46:35,141 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 18:02:23,961 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 18:02:24,089 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 18:02:24,089 - INFO - {'updated': 'initiated stk query for ws_CO_11092024210212734717429165 827142 '}
2024-09-11 18:02:24,153 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:02:25,024 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 18:02:25,026 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 1aj1hMkEDf3guZ8FrqcrfrGplGsi'}"}
2024-09-11 18:02:25,027 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTgwMjI0', 'Timestamp': '20240911180224', 'CheckoutRequestID': 'ws_CO_11092024210212734717429165'}"}
2024-09-11 18:02:25,028 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:02:25,928 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-11 18:02:25,929 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '8385-4bd1-a41f-473a644f05b520973176', 'CheckoutRequestID': 'ws_CO_11092024210212734717429165', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_11092024210212734717429165 827142"}
2024-09-11 18:02:26,075 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 18:02:26,348 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 18:02:26,349 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 18:02:26,686 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 18:02:45,421 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 18:02:45,591 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 18:02:45,592 - INFO - there is a test coming
2024-09-11 18:02:45,592 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 18:02:45,641 - INFO - {'updated_data': 'the data is now as 254717429165'}
2024-09-11 18:02:45,641 - INFO - the data is now as 254717429165
2024-09-11 18:02:45,657 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 18:02:45,657 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 18:02:45,658 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:02:46,410 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 18:02:46,412 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Il1ASd3jrEagfuVu60QuroJPPzH6'}"}
2024-09-11 18:02:46,412 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTgwMjQ2', 'Timestamp': '20240911180246', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254717429165', 'PartyB': 827142, 'PhoneNumber': '254717429165', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-22786', 'TransactionDesc': 'Some payment'}
2024-09-11 18:02:46,413 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:02:47,390 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 18:02:47,397 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208795366983', 'CheckoutRequestID': 'ws_CO_11092024210247129717429165', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 18:02:58,250 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 18:02:58,427 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 18:02:58,428 - INFO - {'updated': 'initiated stk query for ws_CO_11092024210247129717429165 827142 '}
2024-09-11 18:02:58,488 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:02:59,329 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 18:02:59,332 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer FgVEz8FPqMciXROR9aJ3c5N6yqae'}"}
2024-09-11 18:02:59,332 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTgwMjU4', 'Timestamp': '20240911180258', 'CheckoutRequestID': 'ws_CO_11092024210247129717429165'}"}
2024-09-11 18:02:59,334 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:03:00,189 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-11 18:03:00,190 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208795366983', 'CheckoutRequestID': 'ws_CO_11092024210247129717429165', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_11092024210247129717429165 827142"}
2024-09-11 18:03:00,337 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 18:03:00,952 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 18:03:00,953 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 18:03:01,295 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 18:04:59,697 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171773061', 'CheckoutRequestID': 'ws_CO_11092024210445180721249105', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB89YDXFE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911210459}, {'Name': 'PhoneNumber', 'Value': 254721249105}]}}}}"}
2024-09-11 18:04:59,697 - INFO - {'updated_data': 'callback data began'}
2024-09-11 18:04:59,698 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171773061', 'CheckoutRequestID': 'ws_CO_11092024210445180721249105', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB89YDXFE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911210459}, {'Name': 'PhoneNumber', 'Value': 254721249105}]}}}}}
2024-09-11 18:04:59,867 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 18:05:00,172 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 18:05:00,174 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 18:05:00,547 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 18:06:29,076 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89682549', 'CheckoutRequestID': 'ws_CO_11092024210614757725380078', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 400.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB49YM612'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911210628}, {'Name': 'PhoneNumber', 'Value': 254725380078}]}}}}"}
2024-09-11 18:06:29,077 - INFO - {'updated_data': 'callback data began'}
2024-09-11 18:06:29,077 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89682549', 'CheckoutRequestID': 'ws_CO_11092024210614757725380078', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 400.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB49YM612'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911210628}, {'Name': 'PhoneNumber', 'Value': 254725380078}]}}}}}
2024-09-11 18:06:29,246 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 18:06:29,515 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 18:06:29,517 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 18:06:29,869 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 18:07:26,425 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 18:07:26,593 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 18:07:26,594 - INFO - there is a test coming
2024-09-11 18:07:26,594 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 18:07:26,640 - INFO - {'updated_data': 'the data is now as 254791034735'}
2024-09-11 18:07:26,641 - INFO - the data is now as 254791034735
2024-09-11 18:07:26,656 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 18:07:26,657 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 18:07:26,658 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:07:27,418 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 18:07:27,420 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer RXTrxhxdcdi4aX32qgHAeFrZ6GHW'}"}
2024-09-11 18:07:27,421 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTgwNzI3', 'Timestamp': '20240911180727', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1500', 'PartyA': '254791034735', 'PartyB': 827142, 'PhoneNumber': '254791034735', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-34176', 'TransactionDesc': 'Some payment'}
2024-09-11 18:07:27,427 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:07:29,411 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 18:07:29,417 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585056958972', 'CheckoutRequestID': 'ws_CO_11092024210728151791034735', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 18:07:40,421 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 18:07:40,588 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 18:07:40,589 - INFO - {'updated': 'initiated stk query for ws_CO_11092024210728151791034735 827142 '}
2024-09-11 18:07:40,658 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:07:41,425 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 18:07:41,427 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Z53jWeMdFFVTzFCAG5MywqsiYXA1'}"}
2024-09-11 18:07:41,427 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTgwNzQw', 'Timestamp': '20240911180740', 'CheckoutRequestID': 'ws_CO_11092024210728151791034735'}"}
2024-09-11 18:07:41,428 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:07:42,256 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 18:07:42,257 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024210728151791034735', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024210728151791034735 827142"}
2024-09-11 18:07:42,260 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 18:07:47,093 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585056958972', 'CheckoutRequestID': 'ws_CO_11092024210728151791034735', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB99YTHUZ'}, {'Name': 'TransactionDate', 'Value': 20240911210746}, {'Name': 'PhoneNumber', 'Value': 254791034735}]}}}}"}
2024-09-11 18:07:47,094 - INFO - {'updated_data': 'callback data began'}
2024-09-11 18:07:47,094 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585056958972', 'CheckoutRequestID': 'ws_CO_11092024210728151791034735', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB99YTHUZ'}, {'Name': 'TransactionDate', 'Value': 20240911210746}, {'Name': 'PhoneNumber', 'Value': 254791034735}]}}}}}
2024-09-11 18:07:47,253 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 18:07:47,845 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 18:07:47,847 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 18:07:48,184 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 18:07:51,061 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 18:07:51,220 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 18:07:51,221 - INFO - {'updated': 'initiated stk query for ws_CO_11092024210728151791034735 827142 '}
2024-09-11 18:07:51,281 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:07:52,117 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 18:07:52,122 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer VDW9Df6bNVbGAvuZovPXiYizOqEr'}"}
2024-09-11 18:07:52,123 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTgwNzUx', 'Timestamp': '20240911180751', 'CheckoutRequestID': 'ws_CO_11092024210728151791034735'}"}
2024-09-11 18:07:52,124 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:07:52,993 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 18:07:52,994 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585056958972', 'CheckoutRequestID': 'ws_CO_11092024210728151791034735', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024210728151791034735 827142"}
2024-09-11 18:07:53,123 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 18:07:53,410 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 18:07:53,412 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 18:07:53,759 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 18:08:36,952 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172016992', 'CheckoutRequestID': 'ws_CO_11092024210814336720214112', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB09YYAEE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911210836}, {'Name': 'PhoneNumber', 'Value': 254720214112}]}}}}"}
2024-09-11 18:08:36,953 - INFO - {'updated_data': 'callback data began'}
2024-09-11 18:08:36,953 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172016992', 'CheckoutRequestID': 'ws_CO_11092024210814336720214112', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB09YYAEE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911210836}, {'Name': 'PhoneNumber', 'Value': 254720214112}]}}}}}
2024-09-11 18:08:37,136 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 18:08:37,427 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 18:08:37,429 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 18:08:37,777 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 18:11:18,832 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 18:11:18,983 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 18:11:18,984 - INFO - there is a test coming
2024-09-11 18:11:18,984 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 18:11:19,028 - INFO - {'updated_data': 'the data is now as 254717429165'}
2024-09-11 18:11:19,028 - INFO - the data is now as 254717429165
2024-09-11 18:11:19,069 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 18:11:19,069 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 18:11:19,071 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:11:19,941 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 18:11:19,945 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer rUI9SNNeDUBMaGE5idC7tCRke0xP'}"}
2024-09-11 18:11:19,946 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTgxMTE5', 'Timestamp': '20240911181119', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254717429165', 'PartyB': 827142, 'PhoneNumber': '254717429165', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-22786', 'TransactionDesc': 'Some payment'}
2024-09-11 18:11:19,947 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:11:20,862 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 18:11:20,876 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208795380397', 'CheckoutRequestID': 'ws_CO_11092024211120654717429165', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 18:11:22,591 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795380397', 'CheckoutRequestID': 'ws_CO_11092024211120654717429165', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 18:11:22,591 - INFO - {'updated_data': 'callback data began'}
2024-09-11 18:11:22,591 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795380397', 'CheckoutRequestID': 'ws_CO_11092024211120654717429165', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 18:11:22,778 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 18:11:23,250 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 18:11:23,251 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 18:11:23,612 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 18:11:31,667 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 18:11:31,795 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 18:11:31,795 - INFO - {'updated': 'initiated stk query for ws_CO_11092024211120654717429165 827142 '}
2024-09-11 18:11:31,867 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:11:32,729 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 18:11:32,731 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer X58qf17thH1IiR2Rtg8pZFADPidA'}"}
2024-09-11 18:11:32,732 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTgxMTMx', 'Timestamp': '20240911181131', 'CheckoutRequestID': 'ws_CO_11092024211120654717429165'}"}
2024-09-11 18:11:32,735 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:11:33,545 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 368
2024-09-11 18:11:33,546 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208795380397', 'CheckoutRequestID': 'ws_CO_11092024211120654717429165', 'ResultCode': '1032', 'ResultDesc': 'Request cancelled by user'} for ws_CO_11092024211120654717429165 827142"}
2024-09-11 18:11:33,675 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 18:11:33,934 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 18:11:33,936 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 18:11:34,583 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 18:11:42,025 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 18:11:42,217 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 18:11:42,218 - INFO - there is a test coming
2024-09-11 18:11:42,218 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 18:11:42,270 - INFO - {'updated_data': 'the data is now as 254717429165'}
2024-09-11 18:11:42,270 - INFO - the data is now as 254717429165
2024-09-11 18:11:42,287 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 18:11:42,287 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 18:11:42,288 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:11:43,055 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 18:11:43,057 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer XIVlbG3z3Tp7skL9RyE0GrDCGQ6m'}"}
2024-09-11 18:11:43,058 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTgxMTQz', 'Timestamp': '20240911181143', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '1000', 'PartyA': '254717429165', 'PartyB': 827142, 'PhoneNumber': '254717429165', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '402-22786', 'TransactionDesc': 'Some payment'}
2024-09-11 18:11:43,059 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:11:44,259 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 18:11:44,266 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172511467', 'CheckoutRequestID': 'ws_CO_11092024211143850717429165', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 18:15:22,246 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 18:15:22,376 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 18:15:22,377 - INFO - {'updated': 'initiated stk query for ws_CO_11092024211510751706496207 899885 '}
2024-09-11 18:15:22,451 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:15:23,187 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 18:15:23,189 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer q1seDLNXnWYTkIuHhQY6KiJsgbSW'}"}
2024-09-11 18:15:23,189 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTgxNTIy', 'Timestamp': '20240911181522', 'CheckoutRequestID': 'ws_CO_11092024211510751706496207'}"}
2024-09-11 18:15:23,191 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:15:24,008 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 18:15:24,009 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc21022738', 'CheckoutRequestID': 'ws_CO_11092024211510751706496207', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024211510751706496207 899885"}
2024-09-11 18:15:24,136 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 18:15:24,421 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 18:15:24,424 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 18:15:24,789 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 18:19:40,687 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 18:19:40,832 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 18:19:40,833 - INFO - {'updated': 'initiated stk query for ws_CO_11092024211929261725713215 827142 '}
2024-09-11 18:19:40,904 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:19:41,746 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 18:19:41,748 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer P46JAVRAaUPeYXo2puDbd9XOVAoG'}"}
2024-09-11 18:19:41,749 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTgxOTQw', 'Timestamp': '20240911181940', 'CheckoutRequestID': 'ws_CO_11092024211929261725713215'}"}
2024-09-11 18:19:41,750 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:19:42,647 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 18:19:42,648 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077709198', 'CheckoutRequestID': 'ws_CO_11092024211929261725713215', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024211929261725713215 827142"}
2024-09-11 18:19:42,951 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 18:19:43,225 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 18:19:43,227 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 18:19:43,571 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 18:19:48,901 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172523355', 'CheckoutRequestID': 'ws_CO_11092024211946914717429165', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 18:19:48,902 - INFO - {'updated_data': 'callback data began'}
2024-09-11 18:19:48,902 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172523355', 'CheckoutRequestID': 'ws_CO_11092024211946914717429165', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 18:19:49,084 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 18:19:49,367 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 18:19:49,368 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 18:19:49,746 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 18:20:38,023 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077710766', 'CheckoutRequestID': 'ws_CO_11092024212026687790261693', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB0A0QTS2'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911212037}, {'Name': 'PhoneNumber', 'Value': 254790261693}]}}}}"}
2024-09-11 18:20:38,023 - INFO - {'updated_data': 'callback data began'}
2024-09-11 18:20:38,023 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077710766', 'CheckoutRequestID': 'ws_CO_11092024212026687790261693', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB0A0QTS2'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911212037}, {'Name': 'PhoneNumber', 'Value': 254790261693}]}}}}}
2024-09-11 18:20:38,194 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 18:20:38,480 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 18:20:38,482 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 18:20:39,148 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 18:20:41,201 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 18:20:41,365 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 18:20:41,366 - INFO - {'updated': 'initiated stk query for ws_CO_11092024212026687790261693 899885 '}
2024-09-11 18:20:41,427 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:20:42,371 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 18:20:42,373 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer FCP6khH8G9qp7IvQDNiSPqhc1VSE'}"}
2024-09-11 18:20:42,374 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTgyMDQx', 'Timestamp': '20240911182041', 'CheckoutRequestID': 'ws_CO_11092024212026687790261693'}"}
2024-09-11 18:20:42,375 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:20:43,130 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 18:20:43,130 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077710766', 'CheckoutRequestID': 'ws_CO_11092024212026687790261693', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024212026687790261693 899885"}
2024-09-11 18:20:43,273 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 18:20:43,521 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 18:20:43,522 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 18:20:44,167 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 18:29:34,928 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 18:29:35,079 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 18:29:35,080 - INFO - there is a test coming
2024-09-11 18:29:35,080 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 18:29:35,148 - INFO - {'updated_data': 'the data is now as 254796297773'}
2024-09-11 18:29:35,148 - INFO - the data is now as 254796297773
2024-09-11 18:29:35,189 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 18:29:35,189 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 18:29:35,191 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:29:35,935 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 18:29:35,937 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer GRcCuflEGYK3I1nt8OEzTrx2ev1L'}"}
2024-09-11 18:29:35,938 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTgyOTM1', 'Timestamp': '20240911182935', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5000', 'PartyA': '254796297773', 'PartyB': 899885, 'PhoneNumber': '254796297773', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054568', 'TransactionDesc': 'Some payment'}
2024-09-11 18:29:35,939 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:29:36,812 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 18:29:36,818 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89718359', 'CheckoutRequestID': 'ws_CO_11092024212936476796297773', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 18:29:48,748 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89718359', 'CheckoutRequestID': 'ws_CO_11092024212936476796297773', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB1A21RV5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911212948}, {'Name': 'PhoneNumber', 'Value': 254796297773}]}}}}"}
2024-09-11 18:29:48,749 - INFO - {'updated_data': 'callback data began'}
2024-09-11 18:29:48,749 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89718359', 'CheckoutRequestID': 'ws_CO_11092024212936476796297773', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB1A21RV5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911212948}, {'Name': 'PhoneNumber', 'Value': 254796297773}]}}}}}
2024-09-11 18:29:48,949 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 18:29:49,323 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 18:29:49,325 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 18:29:49,574 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 18:37:39,921 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 18:37:40,040 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 18:37:40,041 - INFO - {'updated': 'initiated stk query for ws_CO_11092024213718279726970220 899885 '}
2024-09-11 18:37:40,103 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:37:40,666 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 18:37:40,668 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer oy3ODO9PZZSWnmvE6y4F7Asfe0Um'}"}
2024-09-11 18:37:40,672 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTgzNzQw', 'Timestamp': '20240911183740', 'CheckoutRequestID': 'ws_CO_11092024213718279726970220'}"}
2024-09-11 18:37:40,674 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:37:41,331 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 18:37:41,331 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172550054', 'CheckoutRequestID': 'ws_CO_11092024213718279726970220', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024213718279726970220 899885"}
2024-09-11 18:37:41,449 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 18:37:41,667 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 18:37:41,668 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 18:37:41,964 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 18:40:11,432 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171827168', 'CheckoutRequestID': 'ws_CO_11092024214004311711493371', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5300.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB5A3GQE1'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911214010}, {'Name': 'PhoneNumber', 'Value': 254711493371}]}}}}"}
2024-09-11 18:40:11,433 - INFO - {'updated_data': 'callback data began'}
2024-09-11 18:40:11,433 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171827168', 'CheckoutRequestID': 'ws_CO_11092024214004311711493371', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 5300.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB5A3GQE1'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911214010}, {'Name': 'PhoneNumber', 'Value': 254711493371}]}}}}}
2024-09-11 18:40:11,596 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 18:40:11,806 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 18:40:11,807 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 18:40:12,049 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 18:41:23,946 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 18:41:24,112 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 18:41:24,112 - INFO - {'updated': 'initiated stk query for ws_CO_11092024214111925706704341 827142 '}
2024-09-11 18:41:24,176 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:41:38,694 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 18:41:38,696 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer IIGpkMoHGk0Zv7nHCv2MtAwkxSmc'}"}
2024-09-11 18:41:38,697 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTg0MTI0', 'Timestamp': '20240911184124', 'CheckoutRequestID': 'ws_CO_11092024214111925706704341'}"}
2024-09-11 18:41:38,698 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:41:39,446 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 18:41:39,446 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208795426041', 'CheckoutRequestID': 'ws_CO_11092024214111925706704341', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024214111925706704341 827142"}
2024-09-11 18:41:39,563 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 18:41:39,771 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 18:41:39,773 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 18:41:39,986 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 18:42:07,464 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 18:42:07,627 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 18:42:07,628 - INFO - there is a test coming
2024-09-11 18:42:07,628 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 18:42:07,675 - INFO - {'updated_data': 'the data is now as 254748937138'}
2024-09-11 18:42:07,675 - INFO - the data is now as 254748937138
2024-09-11 18:42:07,695 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 18:42:07,695 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 18:42:07,696 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:42:08,299 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 18:42:08,301 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Gk8eHTv5jIQuRlqu2fLHZlPwBvvL'}"}
2024-09-11 18:42:08,302 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTg0MjA4', 'Timestamp': '20240911184208', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '8000', 'PartyA': '254748937138', 'PartyB': 899885, 'PhoneNumber': '254748937138', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054542', 'TransactionDesc': 'Some payment'}
2024-09-11 18:42:08,303 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:42:11,005 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 18:42:11,011 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171831432', 'CheckoutRequestID': 'ws_CO_11092024214208916748937138', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 18:52:08,256 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172092732', 'CheckoutRequestID': 'ws_CO_11092024215157841717379630', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB7A4XXRP'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911215207}, {'Name': 'PhoneNumber', 'Value': 254717379630}]}}}}"}
2024-09-11 18:52:08,257 - INFO - {'updated_data': 'callback data began'}
2024-09-11 18:52:08,257 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172092732', 'CheckoutRequestID': 'ws_CO_11092024215157841717379630', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB7A4XXRP'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911215207}, {'Name': 'PhoneNumber', 'Value': 254717379630}]}}}}}
2024-09-11 18:52:08,421 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 18:52:08,824 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 18:52:08,825 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 18:52:09,059 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 18:52:21,188 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 18:52:21,311 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 18:52:21,312 - INFO - {'updated': 'initiated stk query for ws_CO_11092024215157841717379630 827142 '}
2024-09-11 18:52:21,369 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:52:21,955 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 18:52:21,957 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer xeRf57726a70n54uubvxEzKRkhAY'}"}
2024-09-11 18:52:21,957 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTg1MjIx', 'Timestamp': '20240911185221', 'CheckoutRequestID': 'ws_CO_11092024215157841717379630'}"}
2024-09-11 18:52:21,959 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:52:22,596 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 387
2024-09-11 18:52:22,596 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172092732', 'CheckoutRequestID': 'ws_CO_11092024215157841717379630', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024215157841717379630 827142"}
2024-09-11 18:52:22,775 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 18:52:22,982 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 18:52:22,984 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 18:52:23,233 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 18:59:38,298 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 18:59:38,457 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 18:59:38,458 - INFO - {'updated': 'initiated stk query for ws_CO_11092024215925947724853288 899885 '}
2024-09-11 18:59:38,522 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:59:39,237 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 18:59:39,239 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer 9AYLGwGHkkFsVRoS5VaY8xanOo43'}"}
2024-09-11 18:59:39,240 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTg1OTM4', 'Timestamp': '20240911185938', 'CheckoutRequestID': 'ws_CO_11092024215925947724853288'}"}
2024-09-11 18:59:39,241 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 18:59:39,875 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 18:59:39,875 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b10741457', 'CheckoutRequestID': 'ws_CO_11092024215925947724853288', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024215925947724853288 899885"}
2024-09-11 18:59:40,007 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 18:59:40,686 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 18:59:40,688 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 18:59:40,935 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 19:02:08,817 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 19:02:08,977 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 19:02:08,978 - INFO - there is a test coming
2024-09-11 19:02:08,978 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 19:02:09,037 - INFO - {'updated_data': 'the data is now as 254725522727'}
2024-09-11 19:02:09,037 - INFO - the data is now as 254725522727
2024-09-11 19:02:09,053 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 19:02:09,053 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 19:02:09,054 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:02:09,827 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 19:02:09,829 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer WvVhHVh5dET8itgTzUgNCabeXGYg'}"}
2024-09-11 19:02:09,829 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTkwMjA5', 'Timestamp': '20240911190209', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '6190', 'PartyA': '254725522727', 'PartyB': 827142, 'PhoneNumber': '254725522727', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '121-15517', 'TransactionDesc': 'Some payment'}
2024-09-11 19:02:09,830 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:02:10,648 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 19:02:10,655 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077789538', 'CheckoutRequestID': 'ws_CO_11092024220210393725522727', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 19:02:46,980 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172114721', 'CheckoutRequestID': 'ws_CO_11092024220235964722213345', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB5A65S6F'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911220246}, {'Name': 'PhoneNumber', 'Value': 254722213345}]}}}}"}
2024-09-11 19:02:46,980 - INFO - {'updated_data': 'callback data began'}
2024-09-11 19:02:46,980 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172114721', 'CheckoutRequestID': 'ws_CO_11092024220235964722213345', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB5A65S6F'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911220246}, {'Name': 'PhoneNumber', 'Value': 254722213345}]}}}}}
2024-09-11 19:02:47,155 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 19:02:47,358 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 19:02:47,360 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 19:02:47,579 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 19:03:17,421 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 19:03:17,570 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 19:03:17,570 - INFO - there is a test coming
2024-09-11 19:03:17,571 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 19:03:17,622 - INFO - {'updated_data': 'the data is now as 254720045399'}
2024-09-11 19:03:17,622 - INFO - the data is now as 254720045399
2024-09-11 19:03:17,648 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 19:03:17,649 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 19:03:17,650 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:03:18,204 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 19:03:18,206 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer tecphdFZJc7sRqcdCZ4LjMBaxlAM'}"}
2024-09-11 19:03:18,207 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTkwMzE4', 'Timestamp': '20240911190318', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '200', 'PartyA': '254720045399', 'PartyB': 827142, 'PhoneNumber': '254720045399', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '404-1434', 'TransactionDesc': 'Some payment'}
2024-09-11 19:03:18,208 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:03:19,035 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 344
2024-09-11 19:03:19,042 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171877586', 'CheckoutRequestID': 'ws_CO_11092024220318824720045399', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 19:06:31,941 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 19:06:31,974 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 84
2024-09-11 19:06:31,975 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 19:10:23,384 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b10780674', 'CheckoutRequestID': 'ws_CO_11092024221012099702658287', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1001.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB5A6XWBN'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911221021}, {'Name': 'PhoneNumber', 'Value': 254702658287}]}}}}"}
2024-09-11 19:10:23,384 - INFO - {'updated_data': 'callback data began'}
2024-09-11 19:10:23,384 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b10780674', 'CheckoutRequestID': 'ws_CO_11092024221012099702658287', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1001.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB5A6XWBN'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911221021}, {'Name': 'PhoneNumber', 'Value': 254702658287}]}}}}}
2024-09-11 19:10:23,553 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 19:10:23,967 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 19:10:23,968 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 19:10:24,194 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 19:10:35,431 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 19:10:35,566 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 19:10:35,567 - INFO - {'updated': 'initiated stk query for ws_CO_11092024221014162724574034 827142 '}
2024-09-11 19:10:35,623 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:10:36,335 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 19:10:36,336 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer yRJoAaV5nLOcBTDLywQn1CPYZLtG'}"}
2024-09-11 19:10:36,337 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTkxMDM1', 'Timestamp': '20240911191035', 'CheckoutRequestID': 'ws_CO_11092024221014162724574034'}"}
2024-09-11 19:10:36,338 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:10:37,051 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 19:10:37,051 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024221014162724574034', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024221014162724574034 827142"}
2024-09-11 19:10:37,053 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 19:10:43,509 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3183719449', 'CheckoutRequestID': 'ws_CO_11092024221014162724574034', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB2A6Z82G'}, {'Name': 'TransactionDate', 'Value': 20240911221042}, {'Name': 'PhoneNumber', 'Value': 254724574034}]}}}}"}
2024-09-11 19:10:43,509 - INFO - {'updated_data': 'callback data began'}
2024-09-11 19:10:43,509 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3183719449', 'CheckoutRequestID': 'ws_CO_11092024221014162724574034', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB2A6Z82G'}, {'Name': 'TransactionDate', 'Value': 20240911221042}, {'Name': 'PhoneNumber', 'Value': 254724574034}]}}}}}
2024-09-11 19:10:43,682 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 19:10:43,861 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 19:10:43,862 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 19:10:44,066 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 19:11:23,907 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 19:11:24,077 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 19:11:24,078 - INFO - {'updated': 'initiated stk query for ws_CO_11092024221014162724574034 827142 '}
2024-09-11 19:11:24,144 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:11:24,731 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 19:11:24,733 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer DlgrVMOZzlFGiVQ5dAHRK3M5AGqD'}"}
2024-09-11 19:11:24,734 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTkxMTI0', 'Timestamp': '20240911191124', 'CheckoutRequestID': 'ws_CO_11092024221014162724574034'}"}
2024-09-11 19:11:24,735 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:11:25,440 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 19:11:25,441 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3183719449', 'CheckoutRequestID': 'ws_CO_11092024221014162724574034', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024221014162724574034 827142"}
2024-09-11 19:11:25,627 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 19:11:25,818 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 19:11:25,819 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 19:11:26,024 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 19:11:30,741 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 19:11:30,915 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 19:11:30,915 - INFO - {'updated': 'initiated stk query for ws_CO_11092024221119553715536020 899885 '}
2024-09-11 19:11:30,969 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:11:31,623 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 19:11:31,625 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer WHRRdGx8I7IbvqYARwGy7X4myfJI'}"}
2024-09-11 19:11:31,626 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTkxMTMw', 'Timestamp': '20240911191130', 'CheckoutRequestID': 'ws_CO_11092024221119553715536020'}"}
2024-09-11 19:11:31,627 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:11:32,268 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 19:11:32,269 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024221119553715536020', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024221119553715536020 899885"}
2024-09-11 19:11:32,272 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 19:11:44,357 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171890724', 'CheckoutRequestID': 'ws_CO_11092024221119553715536020', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 19000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB6A72NTK'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911221143}, {'Name': 'PhoneNumber', 'Value': 254715536020}]}}}}"}
2024-09-11 19:11:44,358 - INFO - {'updated_data': 'callback data began'}
2024-09-11 19:11:44,358 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e171890724', 'CheckoutRequestID': 'ws_CO_11092024221119553715536020', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 19000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB6A72NTK'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911221143}, {'Name': 'PhoneNumber', 'Value': 254715536020}]}}}}}
2024-09-11 19:11:44,825 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 19:11:45,023 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 19:11:45,025 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 19:11:45,266 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 19:11:45,810 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 19:11:45,939 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 19:11:45,939 - INFO - there is a test coming
2024-09-11 19:11:45,940 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 19:11:46,035 - INFO - {'updated_data': 'the data is now as 254726446009'}
2024-09-11 19:11:46,036 - INFO - the data is now as 254726446009
2024-09-11 19:11:46,054 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 19:11:46,055 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 19:11:46,056 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:11:46,724 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 19:11:46,726 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer dSHS34N8GWqvStwt5HhonAVkGpXG'}"}
2024-09-11 19:11:46,727 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTkxMTQ2', 'Timestamp': '20240911191146', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '50000', 'PartyA': '254726446009', 'PartyB': 899885, 'PhoneNumber': '254726446009', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054608', 'TransactionDesc': 'Some payment'}
2024-09-11 19:11:46,728 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:11:47,533 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 19:11:47,539 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5911145628', 'CheckoutRequestID': 'ws_CO_11092024221147260726446009', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 19:29:50,586 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 19:29:50,765 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 19:29:50,766 - INFO - {'updated': 'initiated stk query for ws_CO_11092024222939140722258830 827142 '}
2024-09-11 19:29:50,824 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:29:51,406 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 19:29:51,408 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer duL2NlqENI3iDQGrNQvJnDtzDDqx'}"}
2024-09-11 19:29:51,409 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTkyOTUw', 'Timestamp': '20240911192950', 'CheckoutRequestID': 'ws_CO_11092024222939140722258830'}"}
2024-09-11 19:29:51,410 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:29:57,921 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 404 174
2024-09-11 19:29:57,922 - INFO - {'updated': "Received response {'requestId': '', 'errorCode': '404.001.03', 'errorMessage': 'Invalid Access Token'} for ws_CO_11092024222939140722258830 827142"}
2024-09-11 19:29:57,924 - WARNING - Not Found: /api/v1/stk/query/
2024-09-11 19:38:33,579 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 19:38:33,718 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 19:38:33,719 - INFO - there is a test coming
2024-09-11 19:38:33,719 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 19:38:33,763 - INFO - {'updated_data': 'the data is now as 254724892594'}
2024-09-11 19:38:33,764 - INFO - the data is now as 254724892594
2024-09-11 19:38:33,784 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 19:38:33,784 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 19:38:33,785 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:38:34,382 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 19:38:34,384 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer bV93sGXeDMPyb59CgkGgi6f85q2z'}"}
2024-09-11 19:38:34,384 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTkzODM0', 'Timestamp': '20240911193834', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '5513', 'PartyA': '254724892594', 'PartyB': 827142, 'PhoneNumber': '254724892594', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '200-13242', 'TransactionDesc': 'Some payment'}
2024-09-11 19:38:34,386 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:38:35,221 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 19:38:35,227 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89844307', 'CheckoutRequestID': 'ws_CO_11092024223835034724892594', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 19:39:27,621 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89845491', 'CheckoutRequestID': 'ws_CO_11092024223911871721518870', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB8A9FM6Q'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911223926}, {'Name': 'PhoneNumber', 'Value': 254721518870}]}}}}"}
2024-09-11 19:39:27,621 - INFO - {'updated_data': 'callback data began'}
2024-09-11 19:39:27,621 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d89845491', 'CheckoutRequestID': 'ws_CO_11092024223911871721518870', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB8A9FM6Q'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911223926}, {'Name': 'PhoneNumber', 'Value': 254721518870}]}}}}}
2024-09-11 19:39:27,788 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 19:39:27,987 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 19:39:27,989 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 19:39:28,239 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 19:39:37,142 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 19:39:37,165 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 429 83
2024-09-11 19:39:37,168 - ERROR - Internal Server Error: /api/v1/stk/query/
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/usr/src/britam/payments/app/payments/views.py", line 78, in post
    if PAYMENT_QUERY_STK_PUSH in app.json()['data']['roles']:
KeyError: 'data'
2024-09-11 19:40:17,308 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 19:40:17,469 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 19:40:17,470 - INFO - {'updated': 'initiated stk query for ws_CO_11092024223835034724892594 827142 '}
2024-09-11 19:40:17,524 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:40:28,191 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 400 0
2024-09-11 19:40:28,193 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer '}"}
2024-09-11 19:40:28,194 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTk0MDE3', 'Timestamp': '20240911194017', 'CheckoutRequestID': 'ws_CO_11092024223835034724892594'}"}
2024-09-11 19:40:28,195 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:40:32,422 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 404 174
2024-09-11 19:40:32,422 - INFO - {'updated': "Received response {'requestId': '', 'errorCode': '404.001.03', 'errorMessage': 'Invalid Access Token'} for ws_CO_11092024223835034724892594 827142"}
2024-09-11 19:40:32,424 - WARNING - Not Found: /api/v1/stk/query/
2024-09-11 19:44:08,874 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 19:44:09,052 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 19:44:09,053 - INFO - there is a test coming
2024-09-11 19:44:09,053 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 19:44:09,101 - INFO - {'updated_data': 'the data is now as 254723177557'}
2024-09-11 19:44:09,101 - INFO - the data is now as 254723177557
2024-09-11 19:44:09,117 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 19:44:09,117 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 19:44:09,119 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:44:14,738 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 19:44:14,740 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer mphXjpvn1dsYJOBbtYL2lhRMebhP'}"}
2024-09-11 19:44:14,741 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTk0NDE0', 'Timestamp': '20240911194414', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '3000', 'PartyA': '254723177557', 'PartyB': 827142, 'PhoneNumber': '254723177557', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '122-154947', 'TransactionDesc': 'Some payment'}
2024-09-11 19:44:14,742 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:44:15,486 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 19:44:15,492 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '34ab-403e-b643-0699f100208795545298', 'CheckoutRequestID': 'ws_CO_11092024224415272723177557', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 19:44:45,806 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b10888392', 'CheckoutRequestID': 'ws_CO_11092024224430648724892594', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 288.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB5A9TAT3'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911224445}, {'Name': 'PhoneNumber', 'Value': 254724892594}]}}}}"}
2024-09-11 19:44:45,806 - INFO - {'updated_data': 'callback data began'}
2024-09-11 19:44:45,806 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b10888392', 'CheckoutRequestID': 'ws_CO_11092024224430648724892594', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 288.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB5A9TAT3'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911224445}, {'Name': 'PhoneNumber', 'Value': 254724892594}]}}}}}
2024-09-11 19:44:45,962 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 19:44:46,156 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 19:44:46,157 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 19:44:46,371 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 19:44:46,520 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 19:44:46,679 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 19:44:46,679 - INFO - {'updated': 'initiated stk query for ws_CO_11092024224415272723177557 827142 '}
2024-09-11 19:44:46,741 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:44:47,327 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 19:44:47,329 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer YcjZizW0Ns0KdEVHeTXaGH1lj4id'}"}
2024-09-11 19:44:47,329 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTk0NDQ2', 'Timestamp': '20240911194446', 'CheckoutRequestID': 'ws_CO_11092024224415272723177557'}"}
2024-09-11 19:44:47,331 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:44:48,071 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 19:44:48,072 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '34ab-403e-b643-0699f100208795545298', 'CheckoutRequestID': 'ws_CO_11092024224415272723177557', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024224415272723177557 827142"}
2024-09-11 19:44:48,215 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 19:44:48,395 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 19:44:48,396 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 19:44:48,628 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 19:45:13,298 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 19:45:13,461 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 19:45:13,461 - INFO - {'updated': 'initiated stk query for ws_CO_11092024224430648724892594 827142 '}
2024-09-11 19:45:13,521 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:45:15,149 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 19:45:15,151 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer B0L0ZAT9qFX3HRVyOYjf1POXlYO9'}"}
2024-09-11 19:45:15,152 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTk0NTEz', 'Timestamp': '20240911194513', 'CheckoutRequestID': 'ws_CO_11092024224430648724892594'}"}
2024-09-11 19:45:15,153 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:45:33,669 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 19:45:33,669 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b10888392', 'CheckoutRequestID': 'ws_CO_11092024224430648724892594', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024224430648724892594 827142"}
2024-09-11 19:45:33,802 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 19:45:34,005 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 19:45:34,007 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 19:45:34,225 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 19:46:28,172 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 19:46:28,377 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 19:46:28,378 - INFO - there is a test coming
2024-09-11 19:46:28,378 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 19:46:28,417 - INFO - {'updated_data': 'the data is now as 254723177557'}
2024-09-11 19:46:28,418 - INFO - the data is now as 254723177557
2024-09-11 19:46:28,433 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 19:46:28,433 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 19:46:28,434 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:46:29,007 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 19:46:29,008 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer Bz2g3hIvauDGoxnIVhWAMZhW9fEM'}"}
2024-09-11 19:46:29,009 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTk0NjI5', 'Timestamp': '20240911194629', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254723177557', 'PartyB': 827142, 'PhoneNumber': '254723177557', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '120-10752', 'TransactionDesc': 'Some payment'}
2024-09-11 19:46:29,010 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:46:30,202 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 19:46:30,208 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5911253908', 'CheckoutRequestID': 'ws_CO_11092024224629523723177557', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 19:46:51,926 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 19:46:52,131 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 19:46:52,131 - INFO - {'updated': 'initiated stk query for ws_CO_11092024224629523723177557 827142 '}
2024-09-11 19:46:52,190 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:46:52,785 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 19:46:52,787 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer yA8GAmcCqyny4KmwLdrJRtNoapPy'}"}
2024-09-11 19:46:52,788 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMTk0NjUy', 'Timestamp': '20240911194652', 'CheckoutRequestID': 'ws_CO_11092024224629523723177557'}"}
2024-09-11 19:46:52,789 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:46:53,654 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 19:46:53,654 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5911253908', 'CheckoutRequestID': 'ws_CO_11092024224629523723177557', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024224629523723177557 827142"}
2024-09-11 19:46:53,776 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 19:46:53,987 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 19:46:53,988 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 19:46:54,238 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 19:48:24,952 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 19:48:25,103 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 19:48:25,104 - INFO - there is a test coming
2024-09-11 19:48:25,104 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 19:48:25,151 - INFO - {'updated_data': 'the data is now as 254705596528'}
2024-09-11 19:48:25,151 - INFO - the data is now as 254705596528
2024-09-11 19:48:25,168 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 19:48:25,168 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 19:48:25,170 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:48:25,740 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 19:48:25,742 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer GsB1G86wAvty7nDJFWKzKutAZebG'}"}
2024-09-11 19:48:25,742 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMTk0ODI1', 'Timestamp': '20240911194825', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '16000', 'PartyA': '254705596528', 'PartyB': 899885, 'PhoneNumber': '254705596528', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054546', 'TransactionDesc': 'Some payment'}
2024-09-11 19:48:25,744 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 19:48:26,676 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 19:48:26,685 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3183841065', 'CheckoutRequestID': 'ws_CO_11092024224826376705596528', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 20:01:30,882 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b10939519', 'CheckoutRequestID': 'ws_CO_11092024230123313702387282', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 150000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB6AAVMOE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911230130}, {'Name': 'PhoneNumber', 'Value': 254702387282}]}}}}"}
2024-09-11 20:01:30,882 - INFO - {'updated_data': 'callback data began'}
2024-09-11 20:01:30,883 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b10939519', 'CheckoutRequestID': 'ws_CO_11092024230123313702387282', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 150000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB6AAVMOE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911230130}, {'Name': 'PhoneNumber', 'Value': 254702387282}]}}}}}
2024-09-11 20:01:31,055 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 20:01:31,304 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 20:01:31,305 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 20:01:31,538 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 20:01:34,564 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 20:01:34,740 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 20:01:34,741 - INFO - {'updated': 'initiated stk query for ws_CO_11092024230123313702387282 899885 '}
2024-09-11 20:01:34,814 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:01:35,575 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 20:01:35,577 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer Fm2J0J4ZC857PKgrtZQZMcAz9PzZ'}"}
2024-09-11 20:01:35,578 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMjAwMTM0', 'Timestamp': '20240911200134', 'CheckoutRequestID': 'ws_CO_11092024230123313702387282'}"}
2024-09-11 20:01:35,579 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:01:36,305 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 20:01:36,306 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b10939519', 'CheckoutRequestID': 'ws_CO_11092024230123313702387282', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024230123313702387282 899885"}
2024-09-11 20:01:36,443 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 20:01:36,637 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 20:01:36,639 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 20:01:36,891 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 20:04:24,655 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b10946646', 'CheckoutRequestID': 'ws_CO_11092024230413381715763781', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB8AB1CP4'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911230423}, {'Name': 'PhoneNumber', 'Value': 254715763781}]}}}}"}
2024-09-11 20:04:24,655 - INFO - {'updated_data': 'callback data began'}
2024-09-11 20:04:24,655 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b10946646', 'CheckoutRequestID': 'ws_CO_11092024230413381715763781', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB8AB1CP4'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911230423}, {'Name': 'PhoneNumber', 'Value': 254715763781}]}}}}}
2024-09-11 20:04:24,856 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 20:04:25,044 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 20:04:25,046 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 20:04:25,283 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 20:15:03,326 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 20:15:03,458 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 20:15:03,458 - INFO - {'updated': 'initiated stk query for ws_CO_11092024231452250728981855 827142 '}
2024-09-11 20:15:03,524 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:15:04,125 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 20:15:04,126 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer AAUfzy9Ag8aqr3GsclT4WrNBwXyA'}"}
2024-09-11 20:15:04,127 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMjAxNTAz', 'Timestamp': '20240911201503', 'CheckoutRequestID': 'ws_CO_11092024231452250728981855'}"}
2024-09-11 20:15:04,128 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:15:04,736 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 386
2024-09-11 20:15:04,737 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b10974082', 'CheckoutRequestID': 'ws_CO_11092024231452250728981855', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024231452250728981855 827142"}
2024-09-11 20:15:04,867 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 20:15:05,056 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 20:15:05,058 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 20:15:05,290 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 20:18:23,588 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 20:18:23,871 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 20:18:23,872 - INFO - there is a test coming
2024-09-11 20:18:23,872 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 20:18:23,914 - INFO - {'updated_data': 'the data is now as 254723836684'}
2024-09-11 20:18:23,914 - INFO - the data is now as 254723836684
2024-09-11 20:18:23,933 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 20:18:23,933 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 20:18:23,934 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:18:24,563 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 20:18:24,565 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ObXOGx8aUOIN2zlX4pf6UeRHpufz'}"}
2024-09-11 20:18:24,566 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMjAxODI0', 'Timestamp': '20240911201824', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '2000', 'PartyA': '254723836684', 'PartyB': 899885, 'PhoneNumber': '254723836684', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Topup Order No . 1054582', 'TransactionDesc': 'Some payment'}
2024-09-11 20:18:24,567 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:18:25,296 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 20:18:25,302 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5911342026', 'CheckoutRequestID': 'ws_CO_11092024231825100723836684', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 20:18:36,494 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 20:18:36,655 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 20:18:36,656 - INFO - {'updated': 'initiated stk query for ws_CO_11092024231825100723836684 899885 '}
2024-09-11 20:18:36,714 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:18:37,400 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 20:18:37,402 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer hWSXGairbErwnCUKNEwWjiqGkGIW'}"}
2024-09-11 20:18:37,402 - INFO - {'updated': "The request payload is {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMjAxODM2', 'Timestamp': '20240911201836', 'CheckoutRequestID': 'ws_CO_11092024231825100723836684'}"}
2024-09-11 20:18:37,404 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:18:38,032 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 500 222
2024-09-11 20:18:38,032 - INFO - {'updated': "Received response {'requestId': 'ws_CO_11092024231825100723836684', 'errorCode': '500.001.1001', 'errorMessage': 'The transaction is being processed'} for ws_CO_11092024231825100723836684 899885"}
2024-09-11 20:18:38,035 - ERROR - Internal Server Error: /api/v1/stk/query/
2024-09-11 20:31:14,040 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 20:31:14,180 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 20:31:14,181 - INFO - there is a test coming
2024-09-11 20:31:14,181 - INFO - {'updated_data': 'started mpesa stk push 899885'}
2024-09-11 20:31:14,225 - INFO - {'updated_data': 'the data is now as 254725985175'}
2024-09-11 20:31:14,225 - INFO - the data is now as 254725985175
2024-09-11 20:31:14,248 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 20:31:14,248 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 20:31:14,249 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:31:14,822 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 20:31:14,824 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer ks9Kq3NwRAuFIWqd3AG4q9WQ9yX4'}"}
2024-09-11 20:31:14,825 - INFO - {'BusinessShortCode': 899885, 'Password': 'ODk5ODg1NGI1ZGQxOGZmZTJmNWRhM2YxYTYzY2E5NzQyNzcyZWY3M2MxNzI4Y2NjOWI2YjgxYzM3MmZiZDhlZmY5MDFmMzIwMjQwOTExMjAzMTE0', 'Timestamp': '20240911203114', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '10000', 'PartyA': '254725985175', 'PartyB': 899885, 'PhoneNumber': '254725985175', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': 'Order No . 14073', 'TransactionDesc': 'Some payment'}
2024-09-11 20:31:14,826 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:31:15,859 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 343
2024-09-11 20:31:15,865 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b521463297', 'CheckoutRequestID': 'ws_CO_11092024233115574725985175', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 20:36:13,405 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc21478845', 'CheckoutRequestID': 'ws_CO_11092024233603756725985175', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB7ACEZL5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911233612}, {'Name': 'PhoneNumber', 'Value': 254725985175}]}}}}"}
2024-09-11 20:36:13,405 - INFO - {'updated_data': 'callback data began'}
2024-09-11 20:36:13,405 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc21478845', 'CheckoutRequestID': 'ws_CO_11092024233603756725985175', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB7ACEZL5'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911233612}, {'Name': 'PhoneNumber', 'Value': 254725985175}]}}}}}
2024-09-11 20:36:13,567 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 20:36:13,977 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 20:36:13,979 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 20:36:14,200 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 20:36:36,487 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585057442391', 'CheckoutRequestID': 'ws_CO_11092024233622437746919917', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB5ACFN7N'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911233635}, {'Name': 'PhoneNumber', 'Value': 254746919917}]}}}}"}
2024-09-11 20:36:36,487 - INFO - {'updated_data': 'callback data began'}
2024-09-11 20:36:36,487 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585057442391', 'CheckoutRequestID': 'ws_CO_11092024233622437746919917', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB5ACFN7N'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911233635}, {'Name': 'PhoneNumber', 'Value': 254746919917}]}}}}}
2024-09-11 20:36:36,651 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 20:36:36,856 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 20:36:36,857 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 20:36:37,077 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 20:38:29,934 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 20:38:30,082 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 20:38:30,083 - INFO - there is a test coming
2024-09-11 20:38:30,083 - INFO - {'updated_data': 'started mpesa stk push 827142'}
2024-09-11 20:38:30,125 - INFO - {'updated_data': 'the data is now as 254701292401'}
2024-09-11 20:38:30,125 - INFO - the data is now as 254701292401
2024-09-11 20:38:30,142 - INFO - {'updated_data': 'The paybill is found'}
2024-09-11 20:38:30,143 - INFO - {'updated_data': ' thee keys ogBgc6AcFZBGCtt8FtZbGr5HDrGnfL4N , nA8VhV2ckotN8f8x , False , https://api.safaricom.co.ke '}
2024-09-11 20:38:30,144 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:38:30,725 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 20:38:30,727 - INFO - {'updated_data': "The header is {'Authorization': 'Bearer wRiQQpM22IuYNBqtmVAGBzCLAffa'}"}
2024-09-11 20:38:30,727 - INFO - {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMjAzODMw', 'Timestamp': '20240911203830', 'TransactionType': 'CustomerPayBillOnline', 'Amount': '4000', 'PartyA': '254701292401', 'PartyB': 827142, 'PhoneNumber': '254701292401', 'CallBackURL': 'https://brtgw.britam.com/payment/uat/api/v1/c2b/online_checkout/callback/', 'AccountReference': '121-55870', 'TransactionDesc': 'Some payment'}
2024-09-11 20:38:30,728 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:38:31,624 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpush/v1/processrequest HTTP/1.1" 200 342
2024-09-11 20:38:31,640 - INFO -  th data is {'code': 200, 'message': {'MerchantRequestID': '6771-4f62-b538-7b91427585057447235', 'CheckoutRequestID': 'ws_CO_11092024233831350701292401', 'ResponseCode': '0', 'ResponseDescription': 'Success. Request accepted for processing', 'CustomerMessage': 'Success. Request accepted for processing'}}
2024-09-11 20:38:42,315 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585057447235', 'CheckoutRequestID': 'ws_CO_11092024233831350701292401', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB9ACI4SR'}, {'Name': 'TransactionDate', 'Value': 20240911233841}, {'Name': 'PhoneNumber', 'Value': 254701292401}]}}}}"}
2024-09-11 20:38:42,316 - INFO - {'updated_data': 'callback data began'}
2024-09-11 20:38:42,316 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585057447235', 'CheckoutRequestID': 'ws_CO_11092024233831350701292401', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB9ACI4SR'}, {'Name': 'TransactionDate', 'Value': 20240911233841}, {'Name': 'PhoneNumber', 'Value': 254701292401}]}}}}}
2024-09-11 20:38:42,484 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 20:38:42,683 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 20:38:42,685 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 20:38:42,791 - DEBUG - Starting new HTTPS connection (1): brtgw.britam.com:443
2024-09-11 20:38:42,910 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 20:38:42,952 - DEBUG - https://brtgw.britam.com:443 "GET /api/auth/verify/ HTTP/1.1" 200 1092
2024-09-11 20:38:42,953 - INFO - {'updated': 'initiated stk query for ws_CO_11092024233831350701292401 827142 '}
2024-09-11 20:38:43,028 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:38:43,611 - DEBUG - https://api.safaricom.co.ke:443 "GET /oauth/v1/generate?grant_type=client_credentials HTTP/1.1" 200 113
2024-09-11 20:38:43,612 - INFO - {'updated': "the sent headers is {'Content-Type': 'application/json', 'Authorization': 'Bearer CEXjXBmK9RRAFuk6D73PzcnBqAJ4'}"}
2024-09-11 20:38:43,613 - INFO - {'updated': "The request payload is {'BusinessShortCode': 827142, 'Password': 'ODI3MTQyMzhlNmFmNWFhYjBiYzdkMGRkODE5NTgxM2MwNWM2ZDNlMTZmYTk0Y2JkMjFiZTVhZDhiNDM2MjY0ZjNhYTRlYjIwMjQwOTExMjAzODQz', 'Timestamp': '20240911203843', 'CheckoutRequestID': 'ws_CO_11092024233831350701292401'}"}
2024-09-11 20:38:43,614 - DEBUG - Starting new HTTPS connection (1): api.safaricom.co.ke:443
2024-09-11 20:38:44,234 - DEBUG - https://api.safaricom.co.ke:443 "POST /mpesa/stkpushquery/v1/query HTTP/1.1" 200 385
2024-09-11 20:38:44,234 - INFO - {'updated': "Received response {'ResponseCode': '0', 'ResponseDescription': 'The service request has been accepted successsfully', 'MerchantRequestID': '6771-4f62-b538-7b91427585057447235', 'CheckoutRequestID': 'ws_CO_11092024233831350701292401', 'ResultCode': '0', 'ResultDesc': 'The service request is processed successfully.'} for ws_CO_11092024233831350701292401 827142"}
2024-09-11 20:38:44,363 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 20:38:44,586 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 20:38:44,587 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 20:38:44,796 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 20:40:17,106 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc21488092', 'CheckoutRequestID': 'ws_CO_11092024234007591712551635', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB4ACK1FG'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911234016}, {'Name': 'PhoneNumber', 'Value': 254712551635}]}}}}"}
2024-09-11 20:40:17,106 - INFO - {'updated_data': 'callback data began'}
2024-09-11 20:40:17,106 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc21488092', 'CheckoutRequestID': 'ws_CO_11092024234007591712551635', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB4ACK1FG'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911234016}, {'Name': 'PhoneNumber', 'Value': 254712551635}]}}}}}
2024-09-11 20:40:17,288 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 20:40:20,422 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 20:40:20,424 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 20:40:20,669 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 20:44:02,700 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc21497013', 'CheckoutRequestID': 'ws_CO_11092024234352872712941045', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB6ACOADM'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911234402}, {'Name': 'PhoneNumber', 'Value': 254712941045}]}}}}"}
2024-09-11 20:44:02,700 - INFO - {'updated_data': 'callback data began'}
2024-09-11 20:44:02,700 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc21497013', 'CheckoutRequestID': 'ws_CO_11092024234352872712941045', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIB6ACOADM'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240911234402}, {'Name': 'PhoneNumber', 'Value': 254712941045}]}}}}}
2024-09-11 20:44:02,867 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 20:44:03,267 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 20:44:03,268 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 20:44:03,536 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 20:57:47,376 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc21528585', 'CheckoutRequestID': 'ws_CO_11092024235730316717293985', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 20:57:47,377 - INFO - {'updated_data': 'callback data began'}
2024-09-11 20:57:47,377 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc21528585', 'CheckoutRequestID': 'ws_CO_11092024235730316717293985', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 20:57:47,571 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 20:57:47,991 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 20:57:47,992 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 20:57:48,220 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-11 22:22:52,765 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3184166635', 'CheckoutRequestID': 'ws_CO_12092024012245648728658377', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-11 22:22:52,766 - INFO - {'updated_data': 'callback data began'}
2024-09-11 22:22:52,766 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3184166635', 'CheckoutRequestID': 'ws_CO_12092024012245648728658377', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-11 22:22:52,937 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-11 22:22:53,126 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-11 22:22:53,128 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-11 22:22:53,376 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 02:44:07,437 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc21960261', 'CheckoutRequestID': 'ws_CO_12092024054358625725530807', 'ResultCode': 17, 'ResultDesc': 'Rule limited.'}}}"}
2024-09-12 02:44:07,437 - INFO - {'updated_data': 'callback data began'}
2024-09-12 02:44:07,437 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc21960261', 'CheckoutRequestID': 'ws_CO_12092024054358625725530807', 'ResultCode': 17, 'ResultDesc': 'Rule limited.'}}}}
2024-09-12 02:44:07,607 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 02:44:07,792 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 02:44:07,793 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 02:44:07,996 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 02:54:13,257 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172265590', 'CheckoutRequestID': 'ws_CO_12092024055404707720056841', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC1AHM147'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912055412}, {'Name': 'PhoneNumber', 'Value': 254720056841}]}}}}"}
2024-09-12 02:54:13,258 - INFO - {'updated_data': 'callback data began'}
2024-09-12 02:54:13,258 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172265590', 'CheckoutRequestID': 'ws_CO_12092024055404707720056841', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC1AHM147'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912055412}, {'Name': 'PhoneNumber', 'Value': 254720056841}]}}}}}
2024-09-12 02:54:13,427 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 02:54:13,686 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 02:54:13,687 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 02:54:13,915 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 02:54:13,922 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077940670', 'CheckoutRequestID': 'ws_CO_12092024055405357713586252', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC6AHM3BS'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912055413}, {'Name': 'PhoneNumber', 'Value': 254713586252}]}}}}"}
2024-09-12 02:54:13,922 - INFO - {'updated_data': 'callback data began'}
2024-09-12 02:54:13,922 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077940670', 'CheckoutRequestID': 'ws_CO_12092024055405357713586252', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC6AHM3BS'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912055413}, {'Name': 'PhoneNumber', 'Value': 254713586252}]}}}}}
2024-09-12 02:54:14,196 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 02:54:14,395 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 02:54:14,396 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 02:54:14,914 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 03:15:33,898 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077952498', 'CheckoutRequestID': 'ws_CO_12092024061524654723544945', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 9000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC7AIB92R'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912061533}, {'Name': 'PhoneNumber', 'Value': 254723544945}]}}}}"}
2024-09-12 03:15:33,899 - INFO - {'updated_data': 'callback data began'}
2024-09-12 03:15:33,899 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077952498', 'CheckoutRequestID': 'ws_CO_12092024061524654723544945', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 9000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC7AIB92R'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912061533}, {'Name': 'PhoneNumber', 'Value': 254723544945}]}}}}}
2024-09-12 03:15:34,069 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 03:15:34,439 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 03:15:34,440 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 03:15:34,945 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 03:18:33,288 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc21995668', 'CheckoutRequestID': 'ws_CO_12092024061820725713655398', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2408.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC0AIFU2A'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912061832}, {'Name': 'PhoneNumber', 'Value': 254713655398}]}}}}"}
2024-09-12 03:18:33,289 - INFO - {'updated_data': 'callback data began'}
2024-09-12 03:18:33,289 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc21995668', 'CheckoutRequestID': 'ws_CO_12092024061820725713655398', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2408.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC0AIFU2A'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912061832}, {'Name': 'PhoneNumber', 'Value': 254713655398}]}}}}}
2024-09-12 03:18:33,464 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 03:18:33,662 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 03:18:33,664 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 03:18:33,894 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 03:20:46,542 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795639366', 'CheckoutRequestID': 'ws_CO_12092024062038353721115820', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC9AIJT21'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912062045}, {'Name': 'PhoneNumber', 'Value': 254721115820}]}}}}"}
2024-09-12 03:20:46,543 - INFO - {'updated_data': 'callback data began'}
2024-09-12 03:20:46,543 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795639366', 'CheckoutRequestID': 'ws_CO_12092024062038353721115820', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC9AIJT21'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912062045}, {'Name': 'PhoneNumber', 'Value': 254721115820}]}}}}}
2024-09-12 03:20:46,717 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 03:20:47,092 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 03:20:47,094 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 03:20:47,293 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 03:31:23,292 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b522009153', 'CheckoutRequestID': 'ws_CO_12092024063107049723831641', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-12 03:31:23,293 - INFO - {'updated_data': 'callback data began'}
2024-09-12 03:31:23,293 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b522009153', 'CheckoutRequestID': 'ws_CO_12092024063107049723831641', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-12 03:31:23,475 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 03:31:23,835 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 03:31:23,836 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 03:31:24,048 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 03:33:03,794 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585057978342', 'CheckoutRequestID': 'ws_CO_12092024063255511723831641', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC7AJ77KT'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912063303}, {'Name': 'PhoneNumber', 'Value': 254723831641}]}}}}"}
2024-09-12 03:33:03,794 - INFO - {'updated_data': 'callback data began'}
2024-09-12 03:33:03,795 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585057978342', 'CheckoutRequestID': 'ws_CO_12092024063255511723831641', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC7AJ77KT'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912063303}, {'Name': 'PhoneNumber', 'Value': 254723831641}]}}}}}
2024-09-12 03:33:03,969 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 03:33:04,157 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 03:33:04,158 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 03:33:04,376 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 04:09:07,485 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077989890', 'CheckoutRequestID': 'ws_CO_12092024070849978722591172', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 40000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC5ALQUEJ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912070906}, {'Name': 'PhoneNumber', 'Value': 254722591172}]}}}}"}
2024-09-12 04:09:07,486 - INFO - {'updated_data': 'callback data began'}
2024-09-12 04:09:07,486 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f077989890', 'CheckoutRequestID': 'ws_CO_12092024070849978722591172', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 40000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC5ALQUEJ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912070906}, {'Name': 'PhoneNumber', 'Value': 254722591172}]}}}}}
2024-09-12 04:09:07,670 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 04:09:07,853 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 04:09:07,854 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 04:09:08,056 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 04:14:02,745 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585058042075', 'CheckoutRequestID': 'ws_CO_12092024071349821757766316', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 933.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC0AM5G70'}, {'Name': 'TransactionDate', 'Value': 20240912071402}, {'Name': 'PhoneNumber', 'Value': 254757766316}]}}}}"}
2024-09-12 04:14:02,746 - INFO - {'updated_data': 'callback data began'}
2024-09-12 04:14:02,746 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585058042075', 'CheckoutRequestID': 'ws_CO_12092024071349821757766316', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 933.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC0AM5G70'}, {'Name': 'TransactionDate', 'Value': 20240912071402}, {'Name': 'PhoneNumber', 'Value': 254757766316}]}}}}}
2024-09-12 04:14:02,918 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 04:14:03,293 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 04:14:03,295 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 04:14:03,499 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 04:18:23,422 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795681395', 'CheckoutRequestID': 'ws_CO_12092024071810940728747062', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC6AMJ000'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912071822}, {'Name': 'PhoneNumber', 'Value': 254728747062}]}}}}"}
2024-09-12 04:18:23,425 - INFO - {'updated_data': 'callback data began'}
2024-09-12 04:18:23,425 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795681395', 'CheckoutRequestID': 'ws_CO_12092024071810940728747062', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC6AMJ000'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912071822}, {'Name': 'PhoneNumber', 'Value': 254728747062}]}}}}}
2024-09-12 04:18:23,589 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 04:18:23,798 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 04:18:23,800 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 04:18:24,017 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 04:46:54,329 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172835947', 'CheckoutRequestID': 'ws_CO_12092024074647619724114085', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC6APBALE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912074653}, {'Name': 'PhoneNumber', 'Value': 254724114085}]}}}}"}
2024-09-12 04:46:54,330 - INFO - {'updated_data': 'callback data began'}
2024-09-12 04:46:54,330 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172835947', 'CheckoutRequestID': 'ws_CO_12092024074647619724114085', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC6APBALE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912074653}, {'Name': 'PhoneNumber', 'Value': 254724114085}]}}}}}
2024-09-12 04:46:54,505 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 04:46:54,691 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 04:46:54,692 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 04:46:54,912 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 04:51:31,371 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3184643260', 'CheckoutRequestID': 'ws_CO_12092024075122148791449999', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2165.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC0APSP1Q'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912075130}, {'Name': 'PhoneNumber', 'Value': 254791449999}]}}}}"}
2024-09-12 04:51:31,372 - INFO - {'updated_data': 'callback data began'}
2024-09-12 04:51:31,372 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3184643260', 'CheckoutRequestID': 'ws_CO_12092024075122148791449999', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2165.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC0APSP1Q'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912075130}, {'Name': 'PhoneNumber', 'Value': 254791449999}]}}}}}
2024-09-12 04:51:31,537 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 04:51:31,772 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 04:51:31,773 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 04:51:31,979 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 05:03:25,166 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172361945', 'CheckoutRequestID': 'ws_CO_12092024080307315705696174', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC3AR2BUD'}, {'Name': 'TransactionDate', 'Value': 20240912080324}, {'Name': 'PhoneNumber', 'Value': 254705696174}]}}}}"}
2024-09-12 05:03:25,167 - INFO - {'updated_data': 'callback data began'}
2024-09-12 05:03:25,167 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172361945', 'CheckoutRequestID': 'ws_CO_12092024080307315705696174', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC3AR2BUD'}, {'Name': 'TransactionDate', 'Value': 20240912080324}, {'Name': 'PhoneNumber', 'Value': 254705696174}]}}}}}
2024-09-12 05:03:25,352 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 05:03:25,530 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 05:03:25,532 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 05:03:25,746 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 05:06:06,638 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585058143787', 'CheckoutRequestID': 'ws_CO_12092024080559212725607400', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC1ARCU5R'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912080606}, {'Name': 'PhoneNumber', 'Value': 254725607400}]}}}}"}
2024-09-12 05:06:06,638 - INFO - {'updated_data': 'callback data began'}
2024-09-12 05:06:06,639 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585058143787', 'CheckoutRequestID': 'ws_CO_12092024080559212725607400', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC1ARCU5R'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912080606}, {'Name': 'PhoneNumber', 'Value': 254725607400}]}}}}}
2024-09-12 05:06:06,817 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 05:06:07,000 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 05:06:07,001 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 05:06:07,510 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 05:06:57,369 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795724299', 'CheckoutRequestID': 'ws_CO_12092024080646197713189793', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC4ARGCP4'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912080656}, {'Name': 'PhoneNumber', 'Value': 254713189793}]}}}}"}
2024-09-12 05:06:57,370 - INFO - {'updated_data': 'callback data began'}
2024-09-12 05:06:57,370 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '34ab-403e-b643-0699f100208795724299', 'CheckoutRequestID': 'ws_CO_12092024080646197713189793', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC4ARGCP4'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912080656}, {'Name': 'PhoneNumber', 'Value': 254713189793}]}}}}}
2024-09-12 05:06:57,538 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 05:06:57,713 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 05:06:57,715 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 05:06:57,921 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 05:11:11,313 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b11744442', 'CheckoutRequestID': 'ws_CO_12092024081102042717583202', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC1ARX6QT'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912081110}, {'Name': 'PhoneNumber', 'Value': 254717583202}]}}}}"}
2024-09-12 05:11:11,314 - INFO - {'updated_data': 'callback data began'}
2024-09-12 05:11:11,314 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b11744442', 'CheckoutRequestID': 'ws_CO_12092024081102042717583202', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC1ARX6QT'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912081110}, {'Name': 'PhoneNumber', 'Value': 254717583202}]}}}}}
2024-09-12 05:11:11,477 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 05:11:11,663 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 05:11:11,664 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 05:11:11,878 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 05:20:52,139 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b11765773', 'CheckoutRequestID': 'ws_CO_12092024082041663790048699', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 90000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC1AT1461'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912082051}, {'Name': 'PhoneNumber', 'Value': 254790048699}]}}}}"}
2024-09-12 05:20:52,140 - INFO - {'updated_data': 'callback data began'}
2024-09-12 05:20:52,140 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'e1f1-482d-9538-d140c330be9b11765773', 'CheckoutRequestID': 'ws_CO_12092024082041663790048699', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 90000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC1AT1461'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912082051}, {'Name': 'PhoneNumber', 'Value': 254790048699}]}}}}}
2024-09-12 05:20:52,333 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 05:20:52,702 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 05:20:52,703 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 05:20:52,924 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 05:24:33,032 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172871330', 'CheckoutRequestID': 'ws_CO_12092024082422025714433055', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC1ATGO6L'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912082432}, {'Name': 'PhoneNumber', 'Value': 254714433055}]}}}}"}
2024-09-12 05:24:33,033 - INFO - {'updated_data': 'callback data began'}
2024-09-12 05:24:33,033 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172871330', 'CheckoutRequestID': 'ws_CO_12092024082422025714433055', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC1ATGO6L'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912082432}, {'Name': 'PhoneNumber', 'Value': 254714433055}]}}}}}
2024-09-12 05:24:33,201 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 05:24:33,383 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 05:24:33,384 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 05:24:33,581 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 05:52:02,656 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3184779619', 'CheckoutRequestID': 'ws_CO_12092024085151891791485420', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC2AWMJDG'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912085201}, {'Name': 'PhoneNumber', 'Value': 254791485420}]}}}}"}
2024-09-12 05:52:02,657 - INFO - {'updated_data': 'callback data began'}
2024-09-12 05:52:02,657 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3184779619', 'CheckoutRequestID': 'ws_CO_12092024085151891791485420', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC2AWMJDG'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912085201}, {'Name': 'PhoneNumber', 'Value': 254791485420}]}}}}}
2024-09-12 05:52:02,826 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 05:52:03,189 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 05:52:03,195 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 05:52:03,407 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:00:19,668 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc22306197', 'CheckoutRequestID': 'ws_CO_12092024090008415726442981', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC7AXKHVB'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912090019}, {'Name': 'PhoneNumber', 'Value': 254726442981}]}}}}"}
2024-09-12 06:00:19,669 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:00:19,669 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc22306197', 'CheckoutRequestID': 'ws_CO_12092024090008415726442981', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC7AXKHVB'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912090019}, {'Name': 'PhoneNumber', 'Value': 254726442981}]}}}}}
2024-09-12 06:00:19,834 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:00:20,031 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:00:20,032 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:00:20,268 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:09:35,104 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172917794', 'CheckoutRequestID': 'ws_CO_12092024090925754740740110', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-12 06:09:35,105 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:09:35,105 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172917794', 'CheckoutRequestID': 'ws_CO_12092024090925754740740110', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-12 06:09:35,273 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:09:35,753 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:09:35,755 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:09:35,967 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:10:32,208 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5912242528', 'CheckoutRequestID': 'ws_CO_12092024091015663727606471', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 389.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC7AYRDIF'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912091031}, {'Name': 'PhoneNumber', 'Value': 254727606471}]}}}}"}
2024-09-12 06:10:32,208 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:10:32,208 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5912242528', 'CheckoutRequestID': 'ws_CO_12092024091015663727606471', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 389.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC7AYRDIF'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912091031}, {'Name': 'PhoneNumber', 'Value': 254727606471}]}}}}}
2024-09-12 06:10:32,398 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:10:32,887 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:10:32,888 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:10:33,088 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:13:08,540 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc22335821', 'CheckoutRequestID': 'ws_CO_12092024091206491724958251', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}"}
2024-09-12 06:13:08,541 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:13:08,542 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc22335821', 'CheckoutRequestID': 'ws_CO_12092024091206491724958251', 'ResultCode': 1037, 'ResultDesc': 'DS timeout user cannot be reached'}}}}
2024-09-12 06:13:08,715 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:13:08,904 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:13:08,906 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:13:09,109 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:13:46,576 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e172195939', 'CheckoutRequestID': 'ws_CO_12092024091334475717699098', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC2AZ4OBS'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912091345}, {'Name': 'PhoneNumber', 'Value': 254717699098}]}}}}"}
2024-09-12 06:13:46,577 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:13:46,577 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e172195939', 'CheckoutRequestID': 'ws_CO_12092024091334475717699098', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC2AZ4OBS'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912091345}, {'Name': 'PhoneNumber', 'Value': 254717699098}]}}}}}
2024-09-12 06:13:46,746 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:13:46,926 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:13:46,927 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:13:47,127 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:16:10,146 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f078110690', 'CheckoutRequestID': 'ws_CO_12092024091559621721881437', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 8000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC8AZEKAE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912091609}, {'Name': 'PhoneNumber', 'Value': 254721881437}]}}}}"}
2024-09-12 06:16:10,148 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:16:10,148 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f078110690', 'CheckoutRequestID': 'ws_CO_12092024091559621721881437', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 8000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC8AZEKAE'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912091609}, {'Name': 'PhoneNumber', 'Value': 254721881437}]}}}}}
2024-09-12 06:16:10,316 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:16:10,717 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:16:10,719 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:16:10,926 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:17:19,808 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3184841456', 'CheckoutRequestID': 'ws_CO_12092024091707786740740110', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC4AZJPPU'}, {'Name': 'TransactionDate', 'Value': 20240912091719}, {'Name': 'PhoneNumber', 'Value': 254740740110}]}}}}"}
2024-09-12 06:17:19,808 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:17:19,808 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'a5e9-4493-bf74-289c5402a3184841456', 'CheckoutRequestID': 'ws_CO_12092024091707786740740110', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC4AZJPPU'}, {'Name': 'TransactionDate', 'Value': 20240912091719}, {'Name': 'PhoneNumber', 'Value': 254740740110}]}}}}}
2024-09-12 06:17:19,968 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:17:20,147 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:17:20,148 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:17:20,377 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:18:05,256 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172926150', 'CheckoutRequestID': 'ws_CO_12092024091757462721728938', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC0AZMG9I'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912091804}, {'Name': 'PhoneNumber', 'Value': 254721728938}]}}}}"}
2024-09-12 06:18:05,257 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:18:05,257 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'f94f-4acd-a303-8fbbcf917962172926150', 'CheckoutRequestID': 'ws_CO_12092024091757462721728938', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 100000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC0AZMG9I'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912091804}, {'Name': 'PhoneNumber', 'Value': 254721728938}]}}}}}
2024-09-12 06:18:05,423 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:18:05,612 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:18:05,614 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:18:05,826 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:24:58,697 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5912278753', 'CheckoutRequestID': 'ws_CO_12092024092456755718052074', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-12 06:24:58,697 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:24:58,697 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5912278753', 'CheckoutRequestID': 'ws_CO_12092024092456755718052074', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-12 06:24:58,853 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:24:59,059 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:24:59,060 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:24:59,258 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:25:21,167 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc22367960', 'CheckoutRequestID': 'ws_CO_12092024092509702757411534', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC5B0HIXB'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912092520}, {'Name': 'PhoneNumber', 'Value': 254757411534}]}}}}"}
2024-09-12 06:25:21,168 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:25:21,168 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc22367960', 'CheckoutRequestID': 'ws_CO_12092024092509702757411534', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC5B0HIXB'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912092520}, {'Name': 'PhoneNumber', 'Value': 254757411534}]}}}}}
2024-09-12 06:25:21,339 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:25:21,529 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:25:21,531 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:25:21,731 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:26:09,189 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d90114953', 'CheckoutRequestID': 'ws_CO_12092024092607128718052074', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-12 06:26:09,190 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:26:09,190 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d90114953', 'CheckoutRequestID': 'ws_CO_12092024092607128718052074', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-12 06:26:09,355 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:26:09,530 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:26:09,531 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:26:09,734 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:27:52,014 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172447292', 'CheckoutRequestID': 'ws_CO_12092024092742908721865699', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC2B0SJXG'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912092751}, {'Name': 'PhoneNumber', 'Value': 254721865699}]}}}}"}
2024-09-12 06:27:52,016 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:27:52,016 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172447292', 'CheckoutRequestID': 'ws_CO_12092024092742908721865699', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 3000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC2B0SJXG'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912092751}, {'Name': 'PhoneNumber', 'Value': 254721865699}]}}}}}
2024-09-12 06:27:52,198 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:27:52,378 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:27:52,379 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:27:52,586 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:33:20,397 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585058352023', 'CheckoutRequestID': 'ws_CO_12092024093312637796413037', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC8B1G8F2'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912093319}, {'Name': 'PhoneNumber', 'Value': 254796413037}]}}}}"}
2024-09-12 06:33:20,398 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:33:20,398 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '6771-4f62-b538-7b91427585058352023', 'CheckoutRequestID': 'ws_CO_12092024093312637796413037', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 10000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC8B1G8F2'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912093319}, {'Name': 'PhoneNumber', 'Value': 254796413037}]}}}}}
2024-09-12 06:33:20,583 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:33:20,780 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:33:20,781 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:33:21,006 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:35:41,434 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc22394726', 'CheckoutRequestID': 'ws_CO_12092024093527384796032845', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC3B1Q4K1'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912093540}, {'Name': 'PhoneNumber', 'Value': 254796032845}]}}}}"}
2024-09-12 06:35:41,435 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:35:41,436 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc22394726', 'CheckoutRequestID': 'ws_CO_12092024093527384796032845', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC3B1Q4K1'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912093540}, {'Name': 'PhoneNumber', 'Value': 254796032845}]}}}}}
2024-09-12 06:35:41,598 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:35:41,778 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:35:41,780 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:35:42,002 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:44:55,580 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e172229012', 'CheckoutRequestID': 'ws_CO_12092024094446178707694388', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC5B2U5DJ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912094454}, {'Name': 'PhoneNumber', 'Value': 254707694388}]}}}}"}
2024-09-12 06:44:55,581 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:44:55,581 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e172229012', 'CheckoutRequestID': 'ws_CO_12092024094446178707694388', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 200.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC5B2U5DJ'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912094454}, {'Name': 'PhoneNumber', 'Value': 254707694388}]}}}}}
2024-09-12 06:44:55,744 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:44:55,928 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:44:55,929 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:44:56,132 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:46:37,602 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d90137043', 'CheckoutRequestID': 'ws_CO_12092024094624549720593559', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 15000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC6B3227Q'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912094636}, {'Name': 'PhoneNumber', 'Value': 254720593559}]}}}}"}
2024-09-12 06:46:37,602 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:46:37,603 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d90137043', 'CheckoutRequestID': 'ws_CO_12092024094624549720593559', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 15000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC6B3227Q'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912094636}, {'Name': 'PhoneNumber', 'Value': 254720593559}]}}}}}
2024-09-12 06:46:37,771 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:46:37,956 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:46:37,957 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:46:38,163 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:47:55,883 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172469126', 'CheckoutRequestID': 'ws_CO_12092024094747969727676152', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-12 06:47:55,884 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:47:55,884 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9096-43a2-9c4e-15e6d7a8d8f6172469126', 'CheckoutRequestID': 'ws_CO_12092024094747969727676152', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-12 06:47:56,049 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:47:56,423 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:47:56,424 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:47:56,634 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:48:19,985 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d90139243', 'CheckoutRequestID': 'ws_CO_12092024094818343718052074', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}"}
2024-09-12 06:48:19,985 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:48:19,985 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'c01d-43fe-967a-e1f71d81049d90139243', 'CheckoutRequestID': 'ws_CO_12092024094818343718052074', 'ResultCode': 1032, 'ResultDesc': 'Request cancelled by user'}}}}
2024-09-12 06:48:20,154 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:48:20,339 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:48:20,340 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:48:20,565 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:48:46,737 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5912341279', 'CheckoutRequestID': 'ws_CO_12092024094835510722947938', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4578.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC6B3BDH6'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912094846}, {'Name': 'PhoneNumber', 'Value': 254722947938}]}}}}"}
2024-09-12 06:48:46,738 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:48:46,738 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5912341279', 'CheckoutRequestID': 'ws_CO_12092024094835510722947938', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 4578.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC6B3BDH6'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912094846}, {'Name': 'PhoneNumber', 'Value': 254722947938}]}}}}}
2024-09-12 06:48:46,909 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:48:47,088 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:48:47,089 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:48:47,291 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:50:27,688 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e172235177', 'CheckoutRequestID': 'ws_CO_12092024095017600720845346', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC4B3ICIM'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912095027}, {'Name': 'PhoneNumber', 'Value': 254720845346}]}}}}"}
2024-09-12 06:50:27,689 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:50:27,689 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '556d-49bb-bb72-b5d8a6cb5d5e172235177', 'CheckoutRequestID': 'ws_CO_12092024095017600720845346', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC4B3ICIM'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912095027}, {'Name': 'PhoneNumber', 'Value': 254720845346}]}}}}}
2024-09-12 06:50:27,867 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:50:28,055 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:50:28,057 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:50:28,283 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:52:16,560 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b522435425', 'CheckoutRequestID': 'ws_CO_12092024095208671729821751', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC3B3QLG1'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912095215}, {'Name': 'PhoneNumber', 'Value': 254729821751}]}}}}"}
2024-09-12 06:52:16,561 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:52:16,561 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b522435425', 'CheckoutRequestID': 'ws_CO_12092024095208671729821751', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 20000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC3B3QLG1'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912095215}, {'Name': 'PhoneNumber', 'Value': 254729821751}]}}}}}
2024-09-12 06:52:16,741 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:52:16,922 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:52:16,923 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:52:17,131 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:52:41,374 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f078149661', 'CheckoutRequestID': 'ws_CO_12092024095231093721517563', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC4B3SJEO'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912095240}, {'Name': 'PhoneNumber', 'Value': 254721517563}]}}}}"}
2024-09-12 06:52:41,375 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:52:41,375 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '9566-48c7-8be0-71e5ae4748f078149661', 'CheckoutRequestID': 'ws_CO_12092024095231093721517563', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC4B3SJEO'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912095240}, {'Name': 'PhoneNumber', 'Value': 254721517563}]}}}}}
2024-09-12 06:52:41,538 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:52:41,720 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:52:41,722 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:52:41,931 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:54:01,421 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b522440045', 'CheckoutRequestID': 'ws_CO_12092024095351185113258119', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC8B3YB0Y'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912095400}, {'Name': 'PhoneNumber', 'Value': 254113258119}]}}}}"}
2024-09-12 06:54:01,422 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:54:01,422 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b522440045', 'CheckoutRequestID': 'ws_CO_12092024095351185113258119', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 1000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC8B3YB0Y'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912095400}, {'Name': 'PhoneNumber', 'Value': 254113258119}]}}}}}
2024-09-12 06:54:01,579 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:54:01,988 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:54:01,990 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:54:02,225 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:54:45,508 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc22446043', 'CheckoutRequestID': 'ws_CO_12092024095435981711991997', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC1B41N8J'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912095445}, {'Name': 'PhoneNumber', 'Value': 254711991997}]}}}}"}
2024-09-12 06:54:45,509 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:54:45,509 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': 'feab-4d34-8ffb-457d02cd9bfc22446043', 'CheckoutRequestID': 'ws_CO_12092024095435981711991997', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 2500.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC1B41N8J'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912095445}, {'Name': 'PhoneNumber', 'Value': 254711991997}]}}}}}
2024-09-12 06:54:45,670 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:54:45,859 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:54:45,861 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:54:46,069 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 06:55:54,558 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5912360197', 'CheckoutRequestID': 'ws_CO_12092024095534820712224440', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 49000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC4B46IOG'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912095553}, {'Name': 'PhoneNumber', 'Value': 254712224440}]}}}}"}
2024-09-12 06:55:54,559 - INFO - {'updated_data': 'callback data began'}
2024-09-12 06:55:54,559 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '0a83-4731-ac2e-58dccc54ee5912360197', 'CheckoutRequestID': 'ws_CO_12092024095534820712224440', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 49000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC4B46IOG'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912095553}, {'Name': 'PhoneNumber', 'Value': 254712224440}]}}}}}
2024-09-12 06:55:54,733 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 06:55:54,914 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 06:55:54,915 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 06:55:55,136 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
2024-09-12 07:46:55,245 - INFO - {'update_info': "the data is {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b522578481', 'CheckoutRequestID': 'ws_CO_12092024104643956702920658', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 50000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC4BAHU2O'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912104654}, {'Name': 'PhoneNumber', 'Value': 254702920658}]}}}}"}
2024-09-12 07:46:55,246 - INFO - {'updated_data': 'callback data began'}
2024-09-12 07:46:55,246 - INFO - {'updated_data': {'Body': {'stkCallback': {'MerchantRequestID': '8385-4bd1-a41f-473a644f05b522578481', 'CheckoutRequestID': 'ws_CO_12092024104643956702920658', 'ResultCode': 0, 'ResultDesc': 'The service request is processed successfully.', 'CallbackMetadata': {'Item': [{'Name': 'Amount', 'Value': 50000.0}, {'Name': 'MpesaReceiptNumber', 'Value': 'SIC4BAHU2O'}, {'Name': 'Balance'}, {'Name': 'TransactionDate', 'Value': 20240912104654}, {'Name': 'PhoneNumber', 'Value': 254702920658}]}}}}}
2024-09-12 07:46:55,408 - DEBUG - Starting new HTTP connection (1): mpesa.com:80
2024-09-12 07:46:55,792 - DEBUG - http://mpesa.com:80 "POST / HTTP/1.1" 301 None
2024-09-12 07:46:55,793 - DEBUG - Starting new HTTPS connection (1): mpesa.com:443
2024-09-12 07:46:56,003 - DEBUG - https://mpesa.com:443 "GET / HTTP/1.1" 200 None
